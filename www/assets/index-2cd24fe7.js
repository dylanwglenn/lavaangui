(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();function Be(){}function cf(t,e){for(const r in e)t[r]=e[r];return t}function el(t){return t()}function yo(){return Object.create(null)}function _r(t){t.forEach(el)}function $i(t){return typeof t=="function"}function Je(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function df(t){return Object.keys(t).length===0}function tl(t,...e){if(t==null)return Be;const r=t.subscribe(...e);return r.unsubscribe?()=>r.unsubscribe():r}function Dt(t){let e;return tl(t,r=>e=r)(),e}function Ln(t,e,r){t.$$.on_destroy.push(tl(e,r))}function rl(t,e,r,n){if(t){const a=nl(t,e,r,n);return t[0](a)}}function nl(t,e,r,n){return t[1]&&n?cf(r.ctx.slice(),t[1](n(e))):r.ctx}function al(t,e,r,n){if(t[2]&&n){const a=t[2](n(r));if(e.dirty===void 0)return a;if(typeof a=="object"){const i=[],o=Math.max(e.dirty.length,a.length);for(let s=0;s<o;s+=1)i[s]=e.dirty[s]|a[s];return i}return e.dirty|a}return e.dirty}function il(t,e,r,n,a,i){if(a){const o=nl(e,r,n,i);t.p(o,a)}}function ol(t){if(t.ctx.length>32){const e=[],r=t.ctx.length/32;for(let n=0;n<r;n++)e[n]=-1;return e}return-1}function ir(t,e,r){return t.set(r),e}function He(t,e){t.appendChild(e)}function Me(t,e,r){t.insertBefore(e,r||null)}function Le(t){t.parentNode&&t.parentNode.removeChild(t)}function hf(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function Ne(t){return document.createElement(t)}function Bn(t){return document.createTextNode(t)}function Qe(){return Bn(" ")}function sl(){return Bn("")}function Gt(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function Ce(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function vf(t){return Array.from(t.childNodes)}function ll(t,e){e=""+e,t.data!==e&&(t.data=e)}let xn;function yn(t){xn=t}function gf(){if(!xn)throw new Error("Function called outside component initialization");return xn}function Vi(t){gf().$$.on_mount.push(t)}const Nr=[],ki=[];let qr=[];const bo=[],pf=Promise.resolve();let _i=!1;function mf(){_i||(_i=!0,pf.then(ul))}function Di(t){qr.push(t)}const ja=new Set;let Ar=0;function ul(){if(Ar!==0)return;const t=xn;do{try{for(;Ar<Nr.length;){const e=Nr[Ar];Ar++,yn(e),yf(e.$$)}}catch(e){throw Nr.length=0,Ar=0,e}for(yn(null),Nr.length=0,Ar=0;ki.length;)ki.pop()();for(let e=0;e<qr.length;e+=1){const r=qr[e];ja.has(r)||(ja.add(r),r())}qr.length=0}while(Nr.length);for(;bo.length;)bo.pop()();_i=!1,ja.clear(),yn(t)}function yf(t){if(t.fragment!==null){t.update(),_r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Di)}}function bf(t){const e=[],r=[];qr.forEach(n=>t.indexOf(n)===-1?e.push(n):r.push(n)),r.forEach(n=>n()),qr=e}const fa=new Set;let wf;function Ge(t,e){t&&t.i&&(fa.delete(t),t.i(e))}function Ue(t,e,r,n){if(t&&t.o){if(fa.has(t))return;fa.add(t),wf.c.push(()=>{fa.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}else n&&n()}function je(t){t&&t.c()}function Ye(t,e,r,n){const{fragment:a,after_update:i}=t.$$;a&&a.m(e,r),n||Di(()=>{const o=t.$$.on_mount.map(el).filter($i);t.$$.on_destroy?t.$$.on_destroy.push(...o):_r(o),t.$$.on_mount=[]}),i.forEach(Di)}function Xe(t,e){const r=t.$$;r.fragment!==null&&(bf(r.after_update),_r(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function xf(t,e){t.$$.dirty[0]===-1&&(Nr.push(t),mf(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function nt(t,e,r,n,a,i,o,s=[-1]){const l=xn;yn(t);const u=t.$$={fragment:null,ctx:[],props:i,update:Be,not_equal:a,bound:yo(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:yo(),dirty:s,skip_bound:!1,root:e.target||l.$$.root};o&&o(u.root);let f=!1;if(u.ctx=r?r(t,e.props||{},(c,h,...v)=>{const p=v.length?v[0]:h;return u.ctx&&a(u.ctx[c],u.ctx[c]=p)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](p),f&&xf(t,c)),h}):[],u.update(),f=!0,_r(u.before_update),u.fragment=n?n(u.ctx):!1,e.target){if(e.hydrate){const c=vf(e.target);u.fragment&&u.fragment.l(c),c.forEach(Le)}else u.fragment&&u.fragment.c();e.intro&&Ge(t.$$.fragment),Ye(t,e.target,e.anchor,e.customElement),ul()}yn(l)}class at{$destroy(){Xe(this,1),this.$destroy=Be}$on(e,r){if(!$i(r))return Be;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(r),()=>{const a=n.indexOf(r);a!==-1&&n.splice(a,1)}}$set(e){this.$$set&&!df(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var st=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ef(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var On=Ef,Cf=typeof st=="object"&&st&&st.Object===Object&&st,Sf=Cf,kf=Sf,_f=typeof self=="object"&&self&&self.Object===Object&&self,Df=kf||_f||Function("return this")(),za=Df,Tf=za,Pf=function(){return Tf.Date.now()},zf=Pf,Af=/\s/;function Lf(t){for(var e=t.length;e--&&Af.test(t.charAt(e)););return e}var Bf=Lf,Mf=Bf,Of=/^\s+/;function If(t){return t&&t.slice(0,Mf(t)+1).replace(Of,"")}var Rf=If,Nf=za,Ff=Nf.Symbol,qi=Ff,wo=qi,fl=Object.prototype,$f=fl.hasOwnProperty,Vf=fl.toString,un=wo?wo.toStringTag:void 0;function qf(t){var e=$f.call(t,un),r=t[un];try{t[un]=void 0;var n=!0}catch{}var a=Vf.call(t);return n&&(e?t[un]=r:delete t[un]),a}var Gf=qf,Hf=Object.prototype,Wf=Hf.toString;function Uf(t){return Wf.call(t)}var Kf=Uf,xo=qi,Zf=Gf,Yf=Kf,Xf="[object Null]",jf="[object Undefined]",Eo=xo?xo.toStringTag:void 0;function Qf(t){return t==null?t===void 0?jf:Xf:Eo&&Eo in Object(t)?Zf(t):Yf(t)}var cl=Qf;function Jf(t){return t!=null&&typeof t=="object"}var ec=Jf,tc=cl,rc=ec,nc="[object Symbol]";function ac(t){return typeof t=="symbol"||rc(t)&&tc(t)==nc}var In=ac,ic=Rf,Co=On,oc=In,So=0/0,sc=/^[-+]0x[0-9a-f]+$/i,lc=/^0b[01]+$/i,uc=/^0o[0-7]+$/i,fc=parseInt;function cc(t){if(typeof t=="number")return t;if(oc(t))return So;if(Co(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Co(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=ic(t);var r=lc.test(t);return r||uc.test(t)?fc(t.slice(2),r?2:8):sc.test(t)?So:+t}var dc=cc,hc=On,Qa=zf,ko=dc,vc="Expected a function",gc=Math.max,pc=Math.min;function mc(t,e,r){var n,a,i,o,s,l,u=0,f=!1,c=!1,h=!0;if(typeof t!="function")throw new TypeError(vc);e=ko(e)||0,hc(r)&&(f=!!r.leading,c="maxWait"in r,i=c?gc(ko(r.maxWait)||0,e):i,h="trailing"in r?!!r.trailing:h);function v(S){var C=n,T=a;return n=a=void 0,u=S,o=t.apply(T,C),o}function p(S){return u=S,s=setTimeout(d,e),f?v(S):o}function y(S){var C=S-l,T=S-u,_=e-C;return c?pc(_,i-T):_}function w(S){var C=S-l,T=S-u;return l===void 0||C>=e||C<0||c&&T>=i}function d(){var S=Qa();if(w(S))return g(S);s=setTimeout(d,y(S))}function g(S){return s=void 0,h&&n?v(S):(n=a=void 0,o)}function m(){s!==void 0&&clearTimeout(s),u=0,n=l=a=s=void 0}function b(){return s===void 0?o:g(Qa())}function E(){var S=Qa(),C=w(S);if(n=arguments,a=this,l=S,C){if(s===void 0)return p(l);if(c)return clearTimeout(s),s=setTimeout(d,e),v(l)}return s===void 0&&(s=setTimeout(d,e)),o}return E.cancel=m,E.flush=b,E}var yc=mc,dl={exports:{}};(function(t,e){(function(){var r,n,a,i,o,s,l,u,f,c,h,v,p,y,w;a=Math.floor,c=Math.min,n=function(d,g){return d<g?-1:d>g?1:0},f=function(d,g,m,b,E){var S;if(m==null&&(m=0),E==null&&(E=n),m<0)throw new Error("lo must be non-negative");for(b==null&&(b=d.length);m<b;)S=a((m+b)/2),E(g,d[S])<0?b=S:m=S+1;return[].splice.apply(d,[m,m-m].concat(g)),g},s=function(d,g,m){return m==null&&(m=n),d.push(g),y(d,0,d.length-1,m)},o=function(d,g){var m,b;return g==null&&(g=n),m=d.pop(),d.length?(b=d[0],d[0]=m,w(d,0,g)):b=m,b},u=function(d,g,m){var b;return m==null&&(m=n),b=d[0],d[0]=g,w(d,0,m),b},l=function(d,g,m){var b;return m==null&&(m=n),d.length&&m(d[0],g)<0&&(b=[d[0],g],g=b[0],d[0]=b[1],w(d,0,m)),g},i=function(d,g){var m,b,E,S,C,T;for(g==null&&(g=n),S=function(){T=[];for(var _=0,P=a(d.length/2);0<=P?_<P:_>P;0<=P?_++:_--)T.push(_);return T}.apply(this).reverse(),C=[],b=0,E=S.length;b<E;b++)m=S[b],C.push(w(d,m,g));return C},p=function(d,g,m){var b;if(m==null&&(m=n),b=d.indexOf(g),b!==-1)return y(d,0,b,m),w(d,b,m)},h=function(d,g,m){var b,E,S,C,T;if(m==null&&(m=n),E=d.slice(0,g),!E.length)return E;for(i(E,m),T=d.slice(g),S=0,C=T.length;S<C;S++)b=T[S],l(E,b,m);return E.sort(m).reverse()},v=function(d,g,m){var b,E,S,C,T,_,P,F,k;if(m==null&&(m=n),g*10<=d.length){if(S=d.slice(0,g).sort(m),!S.length)return S;for(E=S[S.length-1],P=d.slice(g),C=0,_=P.length;C<_;C++)b=P[C],m(b,E)<0&&(f(S,b,0,null,m),S.pop(),E=S[S.length-1]);return S}for(i(d,m),k=[],T=0,F=c(g,d.length);0<=F?T<F:T>F;0<=F?++T:--T)k.push(o(d,m));return k},y=function(d,g,m,b){var E,S,C;for(b==null&&(b=n),E=d[m];m>g;){if(C=m-1>>1,S=d[C],b(E,S)<0){d[m]=S,m=C;continue}break}return d[m]=E},w=function(d,g,m){var b,E,S,C,T;for(m==null&&(m=n),E=d.length,T=g,S=d[g],b=2*g+1;b<E;)C=b+1,C<E&&!(m(d[b],d[C])<0)&&(b=C),d[g]=d[b],g=b,b=2*g+1;return d[g]=S,y(d,T,g,m)},r=function(){d.push=s,d.pop=o,d.replace=u,d.pushpop=l,d.heapify=i,d.updateItem=p,d.nlargest=h,d.nsmallest=v;function d(g){this.cmp=g??n,this.nodes=[]}return d.prototype.push=function(g){return s(this.nodes,g,this.cmp)},d.prototype.pop=function(){return o(this.nodes,this.cmp)},d.prototype.peek=function(){return this.nodes[0]},d.prototype.contains=function(g){return this.nodes.indexOf(g)!==-1},d.prototype.replace=function(g){return u(this.nodes,g,this.cmp)},d.prototype.pushpop=function(g){return l(this.nodes,g,this.cmp)},d.prototype.heapify=function(){return i(this.nodes,this.cmp)},d.prototype.updateItem=function(g){return p(this.nodes,g,this.cmp)},d.prototype.clear=function(){return this.nodes=[]},d.prototype.empty=function(){return this.nodes.length===0},d.prototype.size=function(){return this.nodes.length},d.prototype.clone=function(){var g;return g=new d,g.nodes=this.nodes.slice(0),g},d.prototype.toArray=function(){return this.nodes.slice(0)},d.prototype.insert=d.prototype.push,d.prototype.top=d.prototype.peek,d.prototype.front=d.prototype.peek,d.prototype.has=d.prototype.contains,d.prototype.copy=d.prototype.clone,d}(),function(d,g){return t.exports=g()}(this,function(){return r})}).call(st)})(dl);var bc=dl.exports,wc=bc,xc=Array.isArray,Aa=xc,Ec=Aa,Cc=In,Sc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kc=/^\w*$/;function _c(t,e){if(Ec(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Cc(t)?!0:kc.test(t)||!Sc.test(t)||e!=null&&t in Object(e)}var Dc=_c,Tc=cl,Pc=On,zc="[object AsyncFunction]",Ac="[object Function]",Lc="[object GeneratorFunction]",Bc="[object Proxy]";function Mc(t){if(!Pc(t))return!1;var e=Tc(t);return e==Ac||e==Lc||e==zc||e==Bc}var Oc=Mc,Ic=za,Rc=Ic["__core-js_shared__"],Nc=Rc,Ja=Nc,_o=function(){var t=/[^.]+$/.exec(Ja&&Ja.keys&&Ja.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Fc(t){return!!_o&&_o in t}var $c=Fc,Vc=Function.prototype,qc=Vc.toString;function Gc(t){if(t!=null){try{return qc.call(t)}catch{}try{return t+""}catch{}}return""}var Hc=Gc,Wc=Oc,Uc=$c,Kc=On,Zc=Hc,Yc=/[\\^$.*+?()[\]{}|]/g,Xc=/^\[object .+?Constructor\]$/,jc=Function.prototype,Qc=Object.prototype,Jc=jc.toString,ed=Qc.hasOwnProperty,td=RegExp("^"+Jc.call(ed).replace(Yc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function rd(t){if(!Kc(t)||Uc(t))return!1;var e=Wc(t)?td:Xc;return e.test(Zc(t))}var nd=rd;function ad(t,e){return t==null?void 0:t[e]}var id=ad,od=nd,sd=id;function ld(t,e){var r=sd(t,e);return od(r)?r:void 0}var Gi=ld,ud=Gi,fd=ud(Object,"create"),La=fd,Do=La;function cd(){this.__data__=Do?Do(null):{},this.size=0}var dd=cd;function hd(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var vd=hd,gd=La,pd="__lodash_hash_undefined__",md=Object.prototype,yd=md.hasOwnProperty;function bd(t){var e=this.__data__;if(gd){var r=e[t];return r===pd?void 0:r}return yd.call(e,t)?e[t]:void 0}var wd=bd,xd=La,Ed=Object.prototype,Cd=Ed.hasOwnProperty;function Sd(t){var e=this.__data__;return xd?e[t]!==void 0:Cd.call(e,t)}var kd=Sd,_d=La,Dd="__lodash_hash_undefined__";function Td(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=_d&&e===void 0?Dd:e,this}var Pd=Td,zd=dd,Ad=vd,Ld=wd,Bd=kd,Md=Pd;function Xr(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Xr.prototype.clear=zd;Xr.prototype.delete=Ad;Xr.prototype.get=Ld;Xr.prototype.has=Bd;Xr.prototype.set=Md;var Od=Xr;function Id(){this.__data__=[],this.size=0}var Rd=Id;function Nd(t,e){return t===e||t!==t&&e!==e}var hl=Nd,Fd=hl;function $d(t,e){for(var r=t.length;r--;)if(Fd(t[r][0],e))return r;return-1}var Ba=$d,Vd=Ba,qd=Array.prototype,Gd=qd.splice;function Hd(t){var e=this.__data__,r=Vd(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Gd.call(e,r,1),--this.size,!0}var Wd=Hd,Ud=Ba;function Kd(t){var e=this.__data__,r=Ud(e,t);return r<0?void 0:e[r][1]}var Zd=Kd,Yd=Ba;function Xd(t){return Yd(this.__data__,t)>-1}var jd=Xd,Qd=Ba;function Jd(t,e){var r=this.__data__,n=Qd(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var eh=Jd,th=Rd,rh=Wd,nh=Zd,ah=jd,ih=eh;function jr(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}jr.prototype.clear=th;jr.prototype.delete=rh;jr.prototype.get=nh;jr.prototype.has=ah;jr.prototype.set=ih;var oh=jr,sh=Gi,lh=za,uh=sh(lh,"Map"),fh=uh,To=Od,ch=oh,dh=fh;function hh(){this.size=0,this.__data__={hash:new To,map:new(dh||ch),string:new To}}var vh=hh;function gh(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var ph=gh,mh=ph;function yh(t,e){var r=t.__data__;return mh(e)?r[typeof e=="string"?"string":"hash"]:r.map}var Ma=yh,bh=Ma;function wh(t){var e=bh(this,t).delete(t);return this.size-=e?1:0,e}var xh=wh,Eh=Ma;function Ch(t){return Eh(this,t).get(t)}var Sh=Ch,kh=Ma;function _h(t){return kh(this,t).has(t)}var Dh=_h,Th=Ma;function Ph(t,e){var r=Th(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var zh=Ph,Ah=vh,Lh=xh,Bh=Sh,Mh=Dh,Oh=zh;function Qr(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Qr.prototype.clear=Ah;Qr.prototype.delete=Lh;Qr.prototype.get=Bh;Qr.prototype.has=Mh;Qr.prototype.set=Oh;var Ih=Qr,vl=Ih,Rh="Expected a function";function Hi(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Rh);var r=function(){var n=arguments,a=e?e.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=t.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(Hi.Cache||vl),r}Hi.Cache=vl;var Nh=Hi,Fh=Nh,$h=500;function Vh(t){var e=Fh(t,function(n){return r.size===$h&&r.clear(),n}),r=e.cache;return e}var qh=Vh,Gh=qh,Hh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Wh=/\\(\\)?/g,Uh=Gh(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Hh,function(r,n,a,i){e.push(a?i.replace(Wh,"$1"):n||r)}),e}),gl=Uh;function Kh(t,e){for(var r=-1,n=t==null?0:t.length,a=Array(n);++r<n;)a[r]=e(t[r],r,t);return a}var pl=Kh,Po=qi,Zh=pl,Yh=Aa,Xh=In,jh=1/0,zo=Po?Po.prototype:void 0,Ao=zo?zo.toString:void 0;function ml(t){if(typeof t=="string")return t;if(Yh(t))return Zh(t,ml)+"";if(Xh(t))return Ao?Ao.call(t):"";var e=t+"";return e=="0"&&1/t==-jh?"-0":e}var Qh=ml,Jh=Qh;function ev(t){return t==null?"":Jh(t)}var yl=ev,tv=Aa,rv=Dc,nv=gl,av=yl;function iv(t,e){return tv(t)?t:rv(t,e)?[t]:nv(av(t))}var bl=iv,ov=In,sv=1/0;function lv(t){if(typeof t=="string"||ov(t))return t;var e=t+"";return e=="0"&&1/t==-sv?"-0":e}var Wi=lv,uv=bl,fv=Wi;function cv(t,e){e=uv(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[fv(e[r++])];return r&&r==n?t:void 0}var dv=cv,hv=dv;function vv(t,e,r){var n=t==null?void 0:hv(t,e);return n===void 0?r:n}var gv=vv,pv=Gi,mv=function(){try{var t=pv(Object,"defineProperty");return t({},"",{}),t}catch{}}(),yv=mv,Lo=yv;function bv(t,e,r){e=="__proto__"&&Lo?Lo(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var wv=bv,xv=wv,Ev=hl,Cv=Object.prototype,Sv=Cv.hasOwnProperty;function kv(t,e,r){var n=t[e];(!(Sv.call(t,e)&&Ev(n,r))||r===void 0&&!(e in t))&&xv(t,e,r)}var _v=kv,Dv=9007199254740991,Tv=/^(?:0|[1-9]\d*)$/;function Pv(t,e){var r=typeof t;return e=e??Dv,!!e&&(r=="number"||r!="symbol"&&Tv.test(t))&&t>-1&&t%1==0&&t<e}var zv=Pv,Av=_v,Lv=bl,Bv=zv,Bo=On,Mv=Wi;function Ov(t,e,r,n){if(!Bo(t))return t;e=Lv(e,t);for(var a=-1,i=e.length,o=i-1,s=t;s!=null&&++a<i;){var l=Mv(e[a]),u=r;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(a!=o){var f=s[l];u=n?n(f,l,s):void 0,u===void 0&&(u=Bo(f)?f:Bv(e[a+1])?[]:{})}Av(s,l,u),s=s[l]}return t}var Iv=Ov,Rv=Iv;function Nv(t,e,r){return t==null?t:Rv(t,e,r)}var Fv=Nv;function $v(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var Vv=$v,qv=pl,Gv=Vv,Hv=Aa,Wv=In,Uv=gl,Kv=Wi,Zv=yl;function Yv(t){return Hv(t)?qv(t,Kv):Wv(t)?[t]:Gv(Uv(Zv(t)))}var Xv=Yv,jv=yc,Qv=wc,Jv=gv,eg=Fv,tg=Xv;function Rn(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var Oa=Rn(jv),Nn=Rn(Qv),rg=Rn(Jv),ng=Rn(eg),ag=Rn(tg);function rt(t){"@babel/helpers - typeof";return rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(t)}function Ui(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ki(t,e,r){return e&&Mo(t.prototype,e),r&&Mo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function wl(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zt(t,e){return ig(t)||og(t,e)||sg(t,e)||lg()}function ig(t){if(Array.isArray(t))return t}function og(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],a=!0,i=!1,o,s;try{for(r=r.call(t);!(a=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));a=!0);}catch(l){i=!0,s=l}finally{try{!a&&r.return!=null&&r.return()}finally{if(i)throw s}}return n}}function sg(t,e){if(t){if(typeof t=="string")return Oo(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oo(t,e)}}function Oo(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function lg(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ve=typeof window>"u"?null:window,Io=Ve?Ve.navigator:null;Ve&&Ve.document;var ug=rt(""),xl=rt({}),fg=rt(function(){}),cg=typeof HTMLElement>"u"?"undefined":rt(HTMLElement),Fn=function(e){return e&&e.instanceString&&We(e.instanceString)?e.instanceString():null},me=function(e){return e!=null&&rt(e)==ug},We=function(e){return e!=null&&rt(e)===fg},Oe=function(e){return!zt(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},_e=function(e){return e!=null&&rt(e)===xl&&!Oe(e)&&e.constructor===Object},dg=function(e){return e!=null&&rt(e)===xl},he=function(e){return e!=null&&rt(e)===rt(1)&&!isNaN(e)},hg=function(e){return he(e)&&Math.floor(e)===e},wa=function(e){if(cg!=="undefined")return e!=null&&e instanceof HTMLElement},zt=function(e){return $n(e)||El(e)},$n=function(e){return Fn(e)==="collection"&&e._private.single},El=function(e){return Fn(e)==="collection"&&!e._private.single},Zi=function(e){return Fn(e)==="core"},Cl=function(e){return Fn(e)==="stylesheet"},vg=function(e){return Fn(e)==="event"},lr=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},gg=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},pg=function(e){return _e(e)&&he(e.x1)&&he(e.x2)&&he(e.y1)&&he(e.y2)},mg=function(e){return dg(e)&&We(e.then)},yg=function(){return Io&&Io.userAgent.match(/msie|trident|edge/i)},En=function(e,r){r||(r=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);return i.join("$")});var n=function a(){var i=this,o=arguments,s,l=r.apply(i,o),u=a.cache;return(s=u[l])||(s=u[l]=e.apply(i,o)),s};return n.cache={},n},Yi=En(function(t){return t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),Ia=En(function(t){return t.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),Sl=En(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),Ro=function(e){return lr(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},tt="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",bg="rgb[a]?\\(("+tt+"[%]?)\\s*,\\s*("+tt+"[%]?)\\s*,\\s*("+tt+"[%]?)(?:\\s*,\\s*("+tt+"))?\\)",wg="rgb[a]?\\((?:"+tt+"[%]?)\\s*,\\s*(?:"+tt+"[%]?)\\s*,\\s*(?:"+tt+"[%]?)(?:\\s*,\\s*(?:"+tt+"))?\\)",xg="hsl[a]?\\(("+tt+")\\s*,\\s*("+tt+"[%])\\s*,\\s*("+tt+"[%])(?:\\s*,\\s*("+tt+"))?\\)",Eg="hsl[a]?\\((?:"+tt+")\\s*,\\s*(?:"+tt+"[%])\\s*,\\s*(?:"+tt+"[%])(?:\\s*,\\s*(?:"+tt+"))?\\)",Cg="\\#[0-9a-fA-F]{3}",Sg="\\#[0-9a-fA-F]{6}",kl=function(e,r){return e<r?-1:e>r?1:0},kg=function(e,r){return-1*kl(e,r)},be=Object.assign!=null?Object.assign.bind(Object):function(t){for(var e=arguments,r=1;r<e.length;r++){var n=e[r];if(n!=null)for(var a=Object.keys(n),i=0;i<a.length;i++){var o=a[i];t[o]=n[o]}}return t},_g=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var r=e.length===4,n,a,i,o=16;return r?(n=parseInt(e[1]+e[1],o),a=parseInt(e[2]+e[2],o),i=parseInt(e[3]+e[3],o)):(n=parseInt(e[1]+e[2],o),a=parseInt(e[3]+e[4],o),i=parseInt(e[5]+e[6],o)),[n,a,i]}},Dg=function(e){var r,n,a,i,o,s,l,u;function f(p,y,w){return w<0&&(w+=1),w>1&&(w-=1),w<1/6?p+(y-p)*6*w:w<1/2?y:w<2/3?p+(y-p)*(2/3-w)*6:p}var c=new RegExp("^"+xg+"$").exec(e);if(c){if(n=parseInt(c[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,a=parseFloat(c[2]),a<0||a>100||(a=a/100,i=parseFloat(c[3]),i<0||i>100)||(i=i/100,o=c[4],o!==void 0&&(o=parseFloat(o),o<0||o>1)))return;if(a===0)s=l=u=Math.round(i*255);else{var h=i<.5?i*(1+a):i+a-i*a,v=2*i-h;s=Math.round(255*f(v,h,n+1/3)),l=Math.round(255*f(v,h,n)),u=Math.round(255*f(v,h,n-1/3))}r=[s,l,u,o]}return r},Tg=function(e){var r,n=new RegExp("^"+bg+"$").exec(e);if(n){r=[];for(var a=[],i=1;i<=3;i++){var o=n[i];if(o[o.length-1]==="%"&&(a[i]=!0),o=parseFloat(o),a[i]&&(o=o/100*255),o<0||o>255)return;r.push(Math.floor(o))}var s=a[1]||a[2]||a[3],l=a[1]&&a[2]&&a[3];if(s&&!l)return;var u=n[4];if(u!==void 0){if(u=parseFloat(u),u<0||u>1)return;r.push(u)}}return r},Pg=function(e){return Ag[e.toLowerCase()]},zg=function(e){return(Oe(e)?e:null)||Pg(e)||_g(e)||Tg(e)||Dg(e)},Ag={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},_l=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(_e(o))throw Error("Tried to set map with object key");i<n.length-1?(r[o]==null&&(r[o]={}),r=r[o]):r[o]=e.value}},Dl=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(_e(o))throw Error("Tried to get map with object key");if(r=r[o],r==null)return r}return r},ei=Ve?Ve.performance:null,Tl=ei&&ei.now?function(){return ei.now()}:function(){return Date.now()},Lg=function(){if(Ve){if(Ve.requestAnimationFrame)return function(t){Ve.requestAnimationFrame(t)};if(Ve.mozRequestAnimationFrame)return function(t){Ve.mozRequestAnimationFrame(t)};if(Ve.webkitRequestAnimationFrame)return function(t){Ve.webkitRequestAnimationFrame(t)};if(Ve.msRequestAnimationFrame)return function(t){Ve.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(Tl())},1e3/60)}}(),xa=function(e){return Lg(e)},Yt=Tl,Fr=9261,Pl=65599,vn=5381,zl=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Fr,n=r,a;a=e.next(),!a.done;)n=n*Pl+a.value|0;return n},Cn=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Fr;return r*Pl+e|0},Sn=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vn;return(r<<5)+r+e|0},Bg=function(e,r){return e*2097152+r},tr=function(e){return e[0]*2097152+e[1]},Xn=function(e,r){return[Cn(e[0],r[0]),Sn(e[1],r[1])]},Mg=function(e,r){var n={value:0,done:!1},a=0,i=e.length,o={next:function(){return a<i?n.value=e[a++]:n.done=!0,n}};return zl(o,r)},wr=function(e,r){var n={value:0,done:!1},a=0,i=e.length,o={next:function(){return a<i?n.value=e.charCodeAt(a++):n.done=!0,n}};return zl(o,r)},Al=function(){return Og(arguments)},Og=function(e){for(var r,n=0;n<e.length;n++){var a=e[n];n===0?r=wr(a):r=wr(a,r)}return r},No=!0,Ig=console.warn!=null,Rg=console.trace!=null,Xi=Number.MAX_SAFE_INTEGER||9007199254740991,Ll=function(){return!0},Ea=function(){return!1},Fo=function(){return 0},ji=function(){},Ke=function(e){throw new Error(e)},Bl=function(e){if(e!==void 0)No=!!e;else return No},ze=function(e){Bl()&&(Ig?console.warn(e):(console.log(e),Rg&&console.trace()))},Ng=function(e){return be({},e)},Vt=function(e){return e==null?e:Oe(e)?e.slice():_e(e)?Ng(e):e},Fg=function(e){return e.slice()},Ml=function(e,r){for(r=e="";e++<36;r+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return r},$g={},Ol=function(){return $g},dt=function(e){var r=Object.keys(e);return function(n){for(var a={},i=0;i<r.length;i++){var o=r[i],s=n==null?void 0:n[o];a[o]=s===void 0?e[o]:s}return a}},ur=function(e,r,n){for(var a=e.length-1;a>=0&&!(e[a]===r&&(e.splice(a,1),n));a--);},Qi=function(e){e.splice(0,e.length)},Vg=function(e,r){for(var n=0;n<r.length;n++){var a=r[n];e.push(a)}},Rt=function(e,r,n){return n&&(r=Sl(n,r)),e[r]},nr=function(e,r,n,a){n&&(r=Sl(n,r)),e[r]=a},qg=function(){function t(){Ui(this,t),this._obj={}}return Ki(t,[{key:"set",value:function(r,n){return this._obj[r]=n,this}},{key:"delete",value:function(r){return this._obj[r]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(r){return this._obj[r]!==void 0}},{key:"get",value:function(r){return this._obj[r]}}]),t}(),qt=typeof Map<"u"?Map:qg,Gg="undefined",Hg=function(){function t(e){if(Ui(this,t),this._obj=Object.create(null),this.size=0,e!=null){var r;e.instanceString!=null&&e.instanceString()===this.instanceString()?r=e.toArray():r=e;for(var n=0;n<r.length;n++)this.add(r[n])}}return Ki(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(r){var n=this._obj;n[r]!==1&&(n[r]=1,this.size++)}},{key:"delete",value:function(r){var n=this._obj;n[r]===1&&(n[r]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(r){return this._obj[r]===1}},{key:"toArray",value:function(){var r=this;return Object.keys(this._obj).filter(function(n){return r.has(n)})}},{key:"forEach",value:function(r,n){return this.toArray().forEach(r,n)}}]),t}(),Jr=(typeof Set>"u"?"undefined":rt(Set))!==Gg?Set:Hg,Ra=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||r===void 0||!Zi(e)){Ke("An element must have a core reference and parameters set");return}var a=r.group;if(a==null&&(r.data&&r.data.source!=null&&r.data.target!=null?a="edges":a="nodes"),a!=="nodes"&&a!=="edges"){Ke("An element must be of type `nodes` or `edges`; you specified `"+a+"`");return}this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!r.selected,selectable:r.selectable===void 0?!0:!!r.selectable,locked:!!r.locked,grabbed:!1,grabbable:r.grabbable===void 0?!0:!!r.grabbable,pannable:r.pannable===void 0?a==="edges":!!r.pannable,active:!1,classes:new Jr,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:r.parent&&r.parent.isNode()?r.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(i.position.x==null&&(i.position.x=0),i.position.y==null&&(i.position.y=0),r.renderedPosition){var o=r.renderedPosition,s=e.pan(),l=e.zoom();i.position={x:(o.x-s.x)/l,y:(o.y-s.y)/l}}var u=[];Oe(r.classes)?u=r.classes:me(r.classes)&&(u=r.classes.split(/\s+/));for(var f=0,c=u.length;f<c;f++){var h=u[f];!h||h===""||i.classes.add(h)}this.createEmitter();var v=r.style||r.css;v&&(ze("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(v)),(n===void 0||n)&&this.restore()},$o=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,a,i){var o;_e(n)&&!zt(n)&&(o=n,n=o.roots||o.root,a=o.visit,i=o.directed),i=arguments.length===2&&!We(a)?a:i,a=We(a)?a:function(){};for(var s=this._private.cy,l=n=me(n)?this.filter(n):n,u=[],f=[],c={},h={},v={},p=0,y,w=this.byGroup(),d=w.nodes,g=w.edges,m=0;m<l.length;m++){var b=l[m],E=b.id();b.isNode()&&(u.unshift(b),e.bfs&&(v[E]=!0,f.push(b)),h[E]=0)}for(var S=function(){var R=e.bfs?u.shift():u.pop(),x=R.id();if(e.dfs){if(v[x])return"continue";v[x]=!0,f.push(R)}var W=h[x],O=c[x],M=O!=null?O.source():null,K=O!=null?O.target():null,G=O==null?void 0:R.same(M)?K[0]:M[0],H=void 0;if(H=a(R,O,G,p++,W),H===!0)return y=R,"break";if(H===!1)return"break";for(var A=R.connectedEdges().filter(function(Y){return(!i||Y.source().same(R))&&g.has(Y)}),z=0;z<A.length;z++){var $=A[z],I=$.connectedNodes().filter(function(Y){return!Y.same(R)&&d.has(Y)}),V=I.id();I.length!==0&&!v[V]&&(I=I[0],u.push(I),e.bfs&&(v[V]=!0,f.push(I)),c[V]=$,h[V]=h[x]+1)}};u.length!==0;){var C=S();if(C!=="continue"&&C==="break")break}for(var T=s.collection(),_=0;_<f.length;_++){var P=f[_],F=c[P.id()];F!=null&&T.push(F),T.push(P)}return{path:s.collection(T),found:s.collection(y)}}},kn={breadthFirstSearch:$o({bfs:!0}),depthFirstSearch:$o({dfs:!0})};kn.bfs=kn.breadthFirstSearch;kn.dfs=kn.depthFirstSearch;var Wg=dt({root:null,weight:function(e){return 1},directed:!1}),Ug={dijkstra:function(e){if(!_e(e)){var r=arguments;e={root:r[0],weight:r[1],directed:r[2]}}var n=Wg(e),a=n.root,i=n.weight,o=n.directed,s=this,l=i,u=me(a)?this.filter(a)[0]:a[0],f={},c={},h={},v=this.byGroup(),p=v.nodes,y=v.edges;y.unmergeBy(function(W){return W.isLoop()});for(var w=function(O){return f[O.id()]},d=function(O,M){f[O.id()]=M,g.updateItem(O)},g=new Nn.default(function(W,O){return w(W)-w(O)}),m=0;m<p.length;m++){var b=p[m];f[b.id()]=b.same(u)?0:1/0,g.push(b)}for(var E=function(O,M){for(var K=(o?O.edgesTo(M):O.edgesWith(M)).intersect(y),G=1/0,H,A=0;A<K.length;A++){var z=K[A],$=l(z);($<G||!H)&&(G=$,H=z)}return{edge:H,dist:G}};g.size()>0;){var S=g.pop(),C=w(S),T=S.id();if(h[T]=C,C!==1/0)for(var _=S.neighborhood().intersect(p),P=0;P<_.length;P++){var F=_[P],k=F.id(),R=E(S,F),x=C+R.dist;x<w(F)&&(d(F,x),c[k]={node:S,edge:R.edge})}}return{distanceTo:function(O){var M=me(O)?p.filter(O)[0]:O[0];return h[M.id()]},pathTo:function(O){var M=me(O)?p.filter(O)[0]:O[0],K=[],G=M,H=G.id();if(M.length>0)for(K.unshift(M);c[H];){var A=c[H];K.unshift(A.edge),K.unshift(A.node),G=A.node,H=G.id()}return s.spawn(K)}}}},Kg={kruskal:function(e){e=e||function(m){return 1};for(var r=this.byGroup(),n=r.nodes,a=r.edges,i=n.length,o=new Array(i),s=n,l=function(b){for(var E=0;E<o.length;E++){var S=o[E];if(S.has(b))return E}},u=0;u<i;u++)o[u]=this.spawn(n[u]);for(var f=a.sort(function(m,b){return e(m)-e(b)}),c=0;c<f.length;c++){var h=f[c],v=h.source()[0],p=h.target()[0],y=l(v),w=l(p),d=o[y],g=o[w];y!==w&&(s.merge(h),d.merge(g),o.splice(w,1))}return s}},Zg=dt({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),Yg={aStar:function(e){var r=this.cy(),n=Zg(e),a=n.root,i=n.goal,o=n.heuristic,s=n.directed,l=n.weight;a=r.collection(a)[0],i=r.collection(i)[0];var u=a.id(),f=i.id(),c={},h={},v={},p=new Nn.default(function(H,A){return h[H.id()]-h[A.id()]}),y=new Jr,w={},d={},g=function(A,z){p.push(A),y.add(z)},m,b,E=function(){m=p.pop(),b=m.id(),y.delete(b)},S=function(A){return y.has(A)};g(a,u),c[u]=0,h[u]=o(a);for(var C=0;p.size()>0;){if(E(),C++,b===f){for(var T=[],_=i,P=f,F=d[P];T.unshift(_),F!=null&&T.unshift(F),_=w[P],_!=null;)P=_.id(),F=d[P];return{found:!0,distance:c[b],path:this.spawn(T),steps:C}}v[b]=!0;for(var k=m._private.edges,R=0;R<k.length;R++){var x=k[R];if(this.hasElementWithId(x.id())&&!(s&&x.data("source")!==b)){var W=x.source(),O=x.target(),M=W.id()!==b?W:O,K=M.id();if(this.hasElementWithId(K)&&!v[K]){var G=c[b]+l(x);if(!S(K)){c[K]=G,h[K]=G+o(M),g(M,K),w[K]=m,d[K]=x;continue}G<c[K]&&(c[K]=G,h[K]=G+o(M),w[K]=m,d[K]=x)}}}}return{found:!1,distance:void 0,path:void 0,steps:C}}},Xg=dt({weight:function(e){return 1},directed:!1}),jg={floydWarshall:function(e){for(var r=this.cy(),n=Xg(e),a=n.weight,i=n.directed,o=a,s=this.byGroup(),l=s.nodes,u=s.edges,f=l.length,c=f*f,h=function($){return l.indexOf($)},v=function($){return l[$]},p=new Array(c),y=0;y<c;y++){var w=y%f,d=(y-w)/f;d===w?p[y]=0:p[y]=1/0}for(var g=new Array(c),m=new Array(c),b=0;b<u.length;b++){var E=u[b],S=E.source()[0],C=E.target()[0];if(S!==C){var T=h(S),_=h(C),P=T*f+_,F=o(E);if(p[P]>F&&(p[P]=F,g[P]=_,m[P]=E),!i){var k=_*f+T;!i&&p[k]>F&&(p[k]=F,g[k]=T,m[k]=E)}}}for(var R=0;R<f;R++)for(var x=0;x<f;x++)for(var W=x*f+R,O=0;O<f;O++){var M=x*f+O,K=R*f+O;p[W]+p[K]<p[M]&&(p[M]=p[W]+p[K],g[M]=g[W])}var G=function($){return(me($)?r.filter($):$)[0]},H=function($){return h(G($))},A={distance:function($,I){var V=H($),Y=H(I);return p[V*f+Y]},path:function($,I){var V=H($),Y=H(I),U=v(V);if(V===Y)return U.collection();if(g[V*f+Y]==null)return r.collection();var Q=r.collection(),te=V,ae;for(Q.merge(U);V!==Y;)te=V,V=g[V*f+Y],ae=m[te*f+V],Q.merge(ae),Q.merge(v(V));return Q}};return A}},Qg=dt({weight:function(e){return 1},directed:!1,root:null}),Jg={bellmanFord:function(e){var r=this,n=Qg(e),a=n.weight,i=n.directed,o=n.root,s=a,l=this,u=this.cy(),f=this.byGroup(),c=f.edges,h=f.nodes,v=h.length,p=new qt,y=!1,w=[];o=u.collection(o)[0],c.unmergeBy(function(L){return L.isLoop()});for(var d=c.length,g=function(B){var Z=p.get(B.id());return Z||(Z={},p.set(B.id(),Z)),Z},m=function(B){return(me(B)?u.$(B):B)[0]},b=function(B){return g(m(B)).dist},E=function(B){for(var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,ne=m(B),se=[],ee=ne;;){if(ee==null)return r.spawn();var J=g(ee),N=J.edge,X=J.pred;if(se.unshift(ee[0]),ee.same(Z)&&se.length>0)break;N!=null&&se.unshift(N),ee=X}return l.spawn(se)},S=0;S<v;S++){var C=h[S],T=g(C);C.same(o)?T.dist=0:T.dist=1/0,T.pred=null,T.edge=null}for(var _=!1,P=function(B,Z,ne,se,ee,J){var N=se.dist+J;N<ee.dist&&!ne.same(se.edge)&&(ee.dist=N,ee.pred=B,ee.edge=ne,_=!0)},F=1;F<v;F++){_=!1;for(var k=0;k<d;k++){var R=c[k],x=R.source(),W=R.target(),O=s(R),M=g(x),K=g(W);P(x,W,R,M,K,O),i||P(W,x,R,K,M,O)}if(!_)break}if(_)for(var G=[],H=0;H<d;H++){var A=c[H],z=A.source(),$=A.target(),I=s(A),V=g(z).dist,Y=g($).dist;if(V+I<Y||!i&&Y+I<V)if(y||(ze("Graph contains a negative weight cycle for Bellman-Ford"),y=!0),e.findNegativeWeightCycles!==!1){var U=[];V+I<Y&&U.push(z),!i&&Y+I<V&&U.push($);for(var Q=U.length,te=0;te<Q;te++){var ae=U[te],oe=[ae];oe.push(g(ae).edge);for(var ue=g(ae).pred;oe.indexOf(ue)===-1;)oe.push(ue),oe.push(g(ue).edge),ue=g(ue).pred;oe=oe.slice(oe.indexOf(ue));for(var de=oe[0].id(),D=0,j=2;j<oe.length;j+=2)oe[j].id()<de&&(de=oe[j].id(),D=j);oe=oe.slice(D).concat(oe.slice(0,D)),oe.push(oe[0]);var q=oe.map(function(L){return L.id()}).join(",");G.indexOf(q)===-1&&(w.push(l.spawn(oe)),G.push(q))}}else break}return{distanceTo:b,pathTo:E,hasNegativeWeightCycle:y,negativeWeightCycles:w}}},ep=Math.sqrt(2),tp=function(e,r,n){n.length===0&&Ke("Karger-Stein must be run on a connected (sub)graph");for(var a=n[e],i=a[1],o=a[2],s=r[i],l=r[o],u=n,f=u.length-1;f>=0;f--){var c=u[f],h=c[1],v=c[2];(r[h]===s&&r[v]===l||r[h]===l&&r[v]===s)&&u.splice(f,1)}for(var p=0;p<u.length;p++){var y=u[p];y[1]===l?(u[p]=y.slice(),u[p][1]=s):y[2]===l&&(u[p]=y.slice(),u[p][2]=s)}for(var w=0;w<r.length;w++)r[w]===l&&(r[w]=s);return u},ti=function(e,r,n,a){for(;n>a;){var i=Math.floor(Math.random()*r.length);r=tp(i,e,r),n--}return r},rp={kargerStein:function(){var e=this,r=this.byGroup(),n=r.nodes,a=r.edges;a.unmergeBy(function(K){return K.isLoop()});var i=n.length,o=a.length,s=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),l=Math.floor(i/ep);if(i<2){Ke("At least 2 nodes are required for Karger-Stein algorithm");return}for(var u=[],f=0;f<o;f++){var c=a[f];u.push([f,n.indexOf(c.source()),n.indexOf(c.target())])}for(var h=1/0,v=[],p=new Array(i),y=new Array(i),w=new Array(i),d=function(G,H){for(var A=0;A<i;A++)H[A]=G[A]},g=0;g<=s;g++){for(var m=0;m<i;m++)y[m]=m;var b=ti(y,u.slice(),i,l),E=b.slice();d(y,w);var S=ti(y,b,l,2),C=ti(w,E,l,2);S.length<=C.length&&S.length<h?(h=S.length,v=S,d(y,p)):C.length<=S.length&&C.length<h&&(h=C.length,v=C,d(w,p))}for(var T=this.spawn(v.map(function(K){return a[K[0]]})),_=this.spawn(),P=this.spawn(),F=p[0],k=0;k<p.length;k++){var R=p[k],x=n[k];R===F?_.merge(x):P.merge(x)}var W=function(G){var H=e.spawn();return G.forEach(function(A){H.merge(A),A.connectedEdges().forEach(function(z){e.contains(z)&&!T.contains(z)&&H.merge(z)})}),H},O=[W(_),W(P)],M={cut:T,components:O,partition1:_,partition2:P};return M}},np=function(e){return{x:e.x,y:e.y}},Na=function(e,r,n){return{x:e.x*r+n.x,y:e.y*r+n.y}},Il=function(e,r,n){return{x:(e.x-n.x)/r,y:(e.y-n.y)/r}},$r=function(e){return{x:e[0],y:e[1]}},ap=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=1/0,i=r;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.min(o,a))}return a},ip=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=-1/0,i=r;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.max(o,a))}return a},op=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=0,i=0,o=r;o<n;o++){var s=e[o];isFinite(s)&&(a+=s,i++)}return a/i},sp=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;a?e=e.slice(r,n):(n<e.length&&e.splice(n,e.length-n),r>0&&e.splice(0,r));for(var s=0,l=e.length-1;l>=0;l--){var u=e[l];o?isFinite(u)||(e[l]=-1/0,s++):e.splice(l,1)}i&&e.sort(function(h,v){return h-v});var f=e.length,c=Math.floor(f/2);return f%2!==0?e[c+1+s]:(e[c-1+s]+e[c+s])/2},lp=function(e){return Math.PI*e/180},jn=function(e,r){return Math.atan2(r,e)-Math.PI/2},Ji=Math.log2||function(t){return Math.log(t)/Math.log(2)},Rl=function(e){return e>0?1:e<0?-1:0},xr=function(e,r){return Math.sqrt(mr(e,r))},mr=function(e,r){var n=r.x-e.x,a=r.y-e.y;return n*n+a*a},up=function(e){for(var r=e.length,n=0,a=0;a<r;a++)n+=e[a];for(var i=0;i<r;i++)e[i]=e[i]/n;return e},ot=function(e,r,n,a){return(1-a)*(1-a)*e+2*(1-a)*a*r+a*a*n},Gr=function(e,r,n,a){return{x:ot(e.x,r.x,n.x,a),y:ot(e.y,r.y,n.y,a)}},fp=function(e,r,n,a){var i={x:r.x-e.x,y:r.y-e.y},o=xr(e,r),s={x:i.x/o,y:i.y/o};return n=n??0,a=a??n*o,{x:e.x+s.x*a,y:e.y+s.y*a}},_n=function(e,r,n){return Math.max(e,Math.min(n,r))},Tt=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},cp=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},dp=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},hp=function(e,r){e.x1=Math.min(e.x1,r.x1),e.x2=Math.max(e.x2,r.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r.y1),e.y2=Math.max(e.y2,r.y2),e.h=e.y2-e.y1},vp=function(e,r,n){e.x1=Math.min(e.x1,r),e.x2=Math.max(e.x2,r),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},ca=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=r,e.x2+=r,e.y1-=r,e.y2+=r,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},ri=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,a,i,o;if(r.length===1)n=a=i=o=r[0];else if(r.length===2)n=i=r[0],o=a=r[1];else if(r.length===4){var s=Zt(r,4);n=s[0],a=s[1],i=s[2],o=s[3]}return e.x1-=o,e.x2+=a,e.y1-=n,e.y2+=i,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Vo=function(e,r){e.x1=r.x1,e.y1=r.y1,e.x2=r.x2,e.y2=r.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},eo=function(e,r){return!(e.x1>r.x2||r.x1>e.x2||e.x2<r.x1||r.x2<e.x1||e.y2<r.y1||r.y2<e.y1||e.y1>r.y2||r.y1>e.y2)},Kr=function(e,r,n){return e.x1<=r&&r<=e.x2&&e.y1<=n&&n<=e.y2},gp=function(e,r){return Kr(e,r.x,r.y)},Nl=function(e,r){return Kr(e,r.x1,r.y1)&&Kr(e,r.x2,r.y2)},Fl=function(e,r,n,a,i,o,s){var l=Vn(i,o),u=i/2,f=o/2,c;{var h=n-u+l-s,v=a-f-s,p=n+u-l+s,y=v;if(c=ar(e,r,n,a,h,v,p,y,!1),c.length>0)return c}{var w=n+u+s,d=a-f+l-s,g=w,m=a+f-l+s;if(c=ar(e,r,n,a,w,d,g,m,!1),c.length>0)return c}{var b=n-u+l-s,E=a+f+s,S=n+u-l+s,C=E;if(c=ar(e,r,n,a,b,E,S,C,!1),c.length>0)return c}{var T=n-u-s,_=a-f+l-s,P=T,F=a+f-l+s;if(c=ar(e,r,n,a,T,_,P,F,!1),c.length>0)return c}var k;{var R=n-u+l,x=a-f+l;if(k=gn(e,r,n,a,R,x,l+s),k.length>0&&k[0]<=R&&k[1]<=x)return[k[0],k[1]]}{var W=n+u-l,O=a-f+l;if(k=gn(e,r,n,a,W,O,l+s),k.length>0&&k[0]>=W&&k[1]<=O)return[k[0],k[1]]}{var M=n+u-l,K=a+f-l;if(k=gn(e,r,n,a,M,K,l+s),k.length>0&&k[0]>=M&&k[1]>=K)return[k[0],k[1]]}{var G=n-u+l,H=a+f-l;if(k=gn(e,r,n,a,G,H,l+s),k.length>0&&k[0]<=G&&k[1]>=H)return[k[0],k[1]]}return[]},pp=function(e,r,n,a,i,o,s){var l=s,u=Math.min(n,i),f=Math.max(n,i),c=Math.min(a,o),h=Math.max(a,o);return u-l<=e&&e<=f+l&&c-l<=r&&r<=h+l},mp=function(e,r,n,a,i,o,s,l,u){var f={x1:Math.min(n,s,i)-u,x2:Math.max(n,s,i)+u,y1:Math.min(a,l,o)-u,y2:Math.max(a,l,o)+u};return!(e<f.x1||e>f.x2||r<f.y1||r>f.y2)},yp=function(e,r,n,a){n-=a;var i=r*r-4*e*n;if(i<0)return[];var o=Math.sqrt(i),s=2*e,l=(-r+o)/s,u=(-r-o)/s;return[l,u]},bp=function(e,r,n,a,i){var o=1e-5;e===0&&(e=o),r/=e,n/=e,a/=e;var s,l,u,f,c,h,v,p;if(l=(3*n-r*r)/9,u=-(27*a)+r*(9*n-2*(r*r)),u/=54,s=l*l*l+u*u,i[1]=0,v=r/3,s>0){c=u+Math.sqrt(s),c=c<0?-Math.pow(-c,1/3):Math.pow(c,1/3),h=u-Math.sqrt(s),h=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),i[0]=-v+c+h,v+=(c+h)/2,i[4]=i[2]=-v,v=Math.sqrt(3)*(-h+c)/2,i[3]=v,i[5]=-v;return}if(i[5]=i[3]=0,s===0){p=u<0?-Math.pow(-u,1/3):Math.pow(u,1/3),i[0]=-v+2*p,i[4]=i[2]=-(p+v);return}l=-l,f=l*l*l,f=Math.acos(u/Math.sqrt(f)),p=2*Math.sqrt(l),i[0]=-v+p*Math.cos(f/3),i[2]=-v+p*Math.cos((f+2*Math.PI)/3),i[4]=-v+p*Math.cos((f+4*Math.PI)/3)},wp=function(e,r,n,a,i,o,s,l){var u=1*n*n-4*n*i+2*n*s+4*i*i-4*i*s+s*s+a*a-4*a*o+2*a*l+4*o*o-4*o*l+l*l,f=1*9*n*i-3*n*n-3*n*s-6*i*i+3*i*s+9*a*o-3*a*a-3*a*l-6*o*o+3*o*l,c=1*3*n*n-6*n*i+n*s-n*e+2*i*i+2*i*e-s*e+3*a*a-6*a*o+a*l-a*r+2*o*o+2*o*r-l*r,h=1*n*i-n*n+n*e-i*e+a*o-a*a+a*r-o*r,v=[];bp(u,f,c,h,v);for(var p=1e-7,y=[],w=0;w<6;w+=2)Math.abs(v[w+1])<p&&v[w]>=0&&v[w]<=1&&y.push(v[w]);y.push(1),y.push(0);for(var d=-1,g,m,b,E=0;E<y.length;E++)g=Math.pow(1-y[E],2)*n+2*(1-y[E])*y[E]*i+y[E]*y[E]*s,m=Math.pow(1-y[E],2)*a+2*(1-y[E])*y[E]*o+y[E]*y[E]*l,b=Math.pow(g-e,2)+Math.pow(m-r,2),d>=0?b<d&&(d=b):d=b;return d},xp=function(e,r,n,a,i,o){var s=[e-n,r-a],l=[i-n,o-a],u=l[0]*l[0]+l[1]*l[1],f=s[0]*s[0]+s[1]*s[1],c=s[0]*l[0]+s[1]*l[1],h=c*c/u;return c<0?f:h>u?(e-i)*(e-i)+(r-o)*(r-o):f-h},_t=function(e,r,n){for(var a,i,o,s,l,u=0,f=0;f<n.length/2;f++)if(a=n[f*2],i=n[f*2+1],f+1<n.length/2?(o=n[(f+1)*2],s=n[(f+1)*2+1]):(o=n[(f+1-n.length/2)*2],s=n[(f+1-n.length/2)*2+1]),!(a==e&&o==e))if(a>=e&&e>=o||a<=e&&e<=o)l=(e-a)/(o-a)*(s-i)+i,l>r&&u++;else continue;return u%2!==0},Xt=function(e,r,n,a,i,o,s,l,u){var f=new Array(n.length),c;l[0]!=null?(c=Math.atan(l[1]/l[0]),l[0]<0?c=c+Math.PI/2:c=-c-Math.PI/2):c=l;for(var h=Math.cos(-c),v=Math.sin(-c),p=0;p<f.length/2;p++)f[p*2]=o/2*(n[p*2]*h-n[p*2+1]*v),f[p*2+1]=s/2*(n[p*2+1]*h+n[p*2]*v),f[p*2]+=a,f[p*2+1]+=i;var y;if(u>0){var w=Vl(f,-u);y=$l(w)}else y=f;return _t(e,r,y)},Ep=function(e,r,n,a,i,o,s){for(var l=new Array(n.length),u=o/2,f=s/2,c=to(o,s),h=c*c,v=0;v<n.length/4;v++){var p=void 0,y=void 0;v===0?p=n.length-2:p=v*4-2,y=v*4+2;var w=a+u*n[v*4],d=i+f*n[v*4+1],g=-n[p]*n[y]-n[p+1]*n[y+1],m=c/Math.tan(Math.acos(g)/2),b=w-m*n[p],E=d-m*n[p+1],S=w+m*n[y],C=d+m*n[y+1];l[v*4]=b,l[v*4+1]=E,l[v*4+2]=S,l[v*4+3]=C;var T=n[p+1],_=-n[p],P=T*n[y]+_*n[y+1];P<0&&(T*=-1,_*=-1);var F=b+T*c,k=E+_*c,R=Math.pow(F-e,2)+Math.pow(k-r,2);if(R<=h)return!0}return _t(e,r,l)},$l=function(e){for(var r=new Array(e.length/2),n,a,i,o,s,l,u,f,c=0;c<e.length/4;c++){n=e[c*4],a=e[c*4+1],i=e[c*4+2],o=e[c*4+3],c<e.length/4-1?(s=e[(c+1)*4],l=e[(c+1)*4+1],u=e[(c+1)*4+2],f=e[(c+1)*4+3]):(s=e[0],l=e[1],u=e[2],f=e[3]);var h=ar(n,a,i,o,s,l,u,f,!0);r[c*2]=h[0],r[c*2+1]=h[1]}return r},Vl=function(e,r){for(var n=new Array(e.length*2),a,i,o,s,l=0;l<e.length/2;l++){a=e[l*2],i=e[l*2+1],l<e.length/2-1?(o=e[(l+1)*2],s=e[(l+1)*2+1]):(o=e[0],s=e[1]);var u=s-i,f=-(o-a),c=Math.sqrt(u*u+f*f),h=u/c,v=f/c;n[l*4]=a+h*r,n[l*4+1]=i+v*r,n[l*4+2]=o+h*r,n[l*4+3]=s+v*r}return n},Cp=function(e,r,n,a,i,o){var s=n-e,l=a-r;s/=i,l/=o;var u=Math.sqrt(s*s+l*l),f=u-1;if(f<0)return[];var c=f/u;return[(n-e)*c+e,(a-r)*c+r]},br=function(e,r,n,a,i,o,s){return e-=i,r-=o,e/=n/2+s,r/=a/2+s,e*e+r*r<=1},gn=function(e,r,n,a,i,o,s){var l=[n-e,a-r],u=[e-i,r-o],f=l[0]*l[0]+l[1]*l[1],c=2*(u[0]*l[0]+u[1]*l[1]),h=u[0]*u[0]+u[1]*u[1]-s*s,v=c*c-4*f*h;if(v<0)return[];var p=(-c+Math.sqrt(v))/(2*f),y=(-c-Math.sqrt(v))/(2*f),w=Math.min(p,y),d=Math.max(p,y),g=[];if(w>=0&&w<=1&&g.push(w),d>=0&&d<=1&&g.push(d),g.length===0)return[];var m=g[0]*l[0]+e,b=g[0]*l[1]+r;if(g.length>1){if(g[0]==g[1])return[m,b];var E=g[1]*l[0]+e,S=g[1]*l[1]+r;return[m,b,E,S]}else return[m,b]},ni=function(e,r,n){return r<=e&&e<=n||n<=e&&e<=r?e:e<=r&&r<=n||n<=r&&r<=e?r:n},ar=function(e,r,n,a,i,o,s,l,u){var f=e-i,c=n-e,h=s-i,v=r-o,p=a-r,y=l-o,w=h*v-y*f,d=c*v-p*f,g=y*c-h*p;if(g!==0){var m=w/g,b=d/g,E=.001,S=0-E,C=1+E;return S<=m&&m<=C&&S<=b&&b<=C?[e+m*c,r+m*p]:u?[e+m*c,r+m*p]:[]}else return w===0||d===0?ni(e,n,s)===s?[s,l]:ni(e,n,i)===i?[i,o]:ni(i,s,n)===n?[n,a]:[]:[]},Dn=function(e,r,n,a,i,o,s,l){var u=[],f,c=new Array(n.length),h=!0;o==null&&(h=!1);var v;if(h){for(var p=0;p<c.length/2;p++)c[p*2]=n[p*2]*o+a,c[p*2+1]=n[p*2+1]*s+i;if(l>0){var y=Vl(c,-l);v=$l(y)}else v=c}else v=n;for(var w,d,g,m,b=0;b<v.length/2;b++)w=v[b*2],d=v[b*2+1],b<v.length/2-1?(g=v[(b+1)*2],m=v[(b+1)*2+1]):(g=v[0],m=v[1]),f=ar(e,r,a,i,w,d,g,m),f.length!==0&&u.push(f[0],f[1]);return u},Sp=function(e,r,n,a,i,o,s,l){for(var u=[],f,c=new Array(n.length),h=o/2,v=s/2,p=to(o,s),y=0;y<n.length/4;y++){var w=void 0,d=void 0;y===0?w=n.length-2:w=y*4-2,d=y*4+2;var g=a+h*n[y*4],m=i+v*n[y*4+1],b=-n[w]*n[d]-n[w+1]*n[d+1],E=p/Math.tan(Math.acos(b)/2),S=g-E*n[w],C=m-E*n[w+1],T=g+E*n[d],_=m+E*n[d+1];y===0?(c[n.length-2]=S,c[n.length-1]=C):(c[y*4-2]=S,c[y*4-1]=C),c[y*4]=T,c[y*4+1]=_;var P=n[w+1],F=-n[w],k=P*n[d]+F*n[d+1];k<0&&(P*=-1,F*=-1);var R=S+P*p,x=C+F*p;f=gn(e,r,a,i,R,x,p),f.length!==0&&u.push(f[0],f[1])}for(var W=0;W<c.length/4;W++)f=ar(e,r,a,i,c[W*4],c[W*4+1],c[W*4+2],c[W*4+3],!1),f.length!==0&&u.push(f[0],f[1]);if(u.length>2){for(var O=[u[0],u[1]],M=Math.pow(O[0]-e,2)+Math.pow(O[1]-r,2),K=1;K<u.length/2;K++){var G=Math.pow(u[K*2]-e,2)+Math.pow(u[K*2+1]-r,2);G<=M&&(O[0]=u[K*2],O[1]=u[K*2+1],M=G)}return O}return u},Qn=function(e,r,n){var a=[e[0]-r[0],e[1]-r[1]],i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),o=(i-n)/i;return o<0&&(o=1e-5),[r[0]+o*a[0],r[1]+o*a[1]]},xt=function(e,r){var n=Ti(e,r);return n=ql(n),n},ql=function(e){for(var r,n,a=e.length/2,i=1/0,o=1/0,s=-1/0,l=-1/0,u=0;u<a;u++)r=e[2*u],n=e[2*u+1],i=Math.min(i,r),s=Math.max(s,r),o=Math.min(o,n),l=Math.max(l,n);for(var f=2/(s-i),c=2/(l-o),h=0;h<a;h++)r=e[2*h]=e[2*h]*f,n=e[2*h+1]=e[2*h+1]*c,i=Math.min(i,r),s=Math.max(s,r),o=Math.min(o,n),l=Math.max(l,n);if(o<-1)for(var v=0;v<a;v++)n=e[2*v+1]=e[2*v+1]+(-1-o);return e},Ti=function(e,r){var n=1/e*2*Math.PI,a=e%2===0?Math.PI/2+n/2:Math.PI/2;a+=r;for(var i=new Array(e*2),o,s=0;s<e;s++)o=s*n+a,i[2*s]=Math.cos(o),i[2*s+1]=Math.sin(-o);return i},Vn=function(e,r){return Math.min(e/4,r/4,8)},to=function(e,r){return Math.min(e/10,r/10,8)},Gl=function(){return 8},kp=function(e,r,n){return[e-2*r+n,2*(r-e),e]},Pi=function(e,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},_p=dt({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),Dp={pageRank:function(e){for(var r=_p(e),n=r.dampingFactor,a=r.precision,i=r.iterations,o=r.weight,s=this._private.cy,l=this.byGroup(),u=l.nodes,f=l.edges,c=u.length,h=c*c,v=f.length,p=new Array(h),y=new Array(c),w=(1-n)/c,d=0;d<c;d++){for(var g=0;g<c;g++){var m=d*c+g;p[m]=0}y[d]=0}for(var b=0;b<v;b++){var E=f[b],S=E.data("source"),C=E.data("target");if(S!==C){var T=u.indexOfId(S),_=u.indexOfId(C),P=o(E),F=_*c+T;p[F]+=P,y[T]+=P}}for(var k=1/c+w,R=0;R<c;R++)if(y[R]===0)for(var x=0;x<c;x++){var W=x*c+R;p[W]=k}else for(var O=0;O<c;O++){var M=O*c+R;p[M]=p[M]/y[R]+w}for(var K=new Array(c),G=new Array(c),H,A=0;A<c;A++)K[A]=1;for(var z=0;z<i;z++){for(var $=0;$<c;$++)G[$]=0;for(var I=0;I<c;I++)for(var V=0;V<c;V++){var Y=I*c+V;G[I]+=p[Y]*K[V]}up(G),H=K,K=G,G=H;for(var U=0,Q=0;Q<c;Q++){var te=H[Q]-K[Q];U+=te*te}if(U<a)break}var ae={rank:function(ue){return ue=s.collection(ue)[0],K[u.indexOf(ue)]}};return ae}},qo=dt({root:null,weight:function(e){return 1},directed:!1,alpha:0}),Hr={degreeCentralityNormalized:function(e){e=qo(e);var r=this.cy(),n=this.nodes(),a=n.length;if(e.directed){for(var f={},c={},h=0,v=0,p=0;p<a;p++){var y=n[p],w=y.id();e.root=y;var d=this.degreeCentrality(e);h<d.indegree&&(h=d.indegree),v<d.outdegree&&(v=d.outdegree),f[w]=d.indegree,c[w]=d.outdegree}return{indegree:function(m){return h==0?0:(me(m)&&(m=r.filter(m)),f[m.id()]/h)},outdegree:function(m){return v===0?0:(me(m)&&(m=r.filter(m)),c[m.id()]/v)}}}else{for(var i={},o=0,s=0;s<a;s++){var l=n[s];e.root=l;var u=this.degreeCentrality(e);o<u.degree&&(o=u.degree),i[l.id()]=u.degree}return{degree:function(m){return o===0?0:(me(m)&&(m=r.filter(m)),i[m.id()]/o)}}}},degreeCentrality:function(e){e=qo(e);var r=this.cy(),n=this,a=e,i=a.root,o=a.weight,s=a.directed,l=a.alpha;if(i=r.collection(i)[0],s){for(var v=i.connectedEdges(),p=v.filter(function(S){return S.target().same(i)&&n.has(S)}),y=v.filter(function(S){return S.source().same(i)&&n.has(S)}),w=p.length,d=y.length,g=0,m=0,b=0;b<p.length;b++)g+=o(p[b]);for(var E=0;E<y.length;E++)m+=o(y[E]);return{indegree:Math.pow(w,1-l)*Math.pow(g,l),outdegree:Math.pow(d,1-l)*Math.pow(m,l)}}else{for(var u=i.connectedEdges().intersection(n),f=u.length,c=0,h=0;h<u.length;h++)c+=o(u[h]);return{degree:Math.pow(f,1-l)*Math.pow(c,l)}}}};Hr.dc=Hr.degreeCentrality;Hr.dcn=Hr.degreeCentralityNormalised=Hr.degreeCentralityNormalized;var Go=dt({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Wr={closenessCentralityNormalized:function(e){for(var r=Go(e),n=r.harmonic,a=r.weight,i=r.directed,o=this.cy(),s={},l=0,u=this.nodes(),f=this.floydWarshall({weight:a,directed:i}),c=0;c<u.length;c++){for(var h=0,v=u[c],p=0;p<u.length;p++)if(c!==p){var y=f.distance(v,u[p]);n?h+=1/y:h+=y}n||(h=1/h),l<h&&(l=h),s[v.id()]=h}return{closeness:function(d){return l==0?0:(me(d)?d=o.filter(d)[0].id():d=d.id(),s[d]/l)}}},closenessCentrality:function(e){var r=Go(e),n=r.root,a=r.weight,i=r.directed,o=r.harmonic;n=this.filter(n)[0];for(var s=this.dijkstra({root:n,weight:a,directed:i}),l=0,u=this.nodes(),f=0;f<u.length;f++){var c=u[f];if(!c.same(n)){var h=s.distanceTo(c);o?l+=1/h:l+=h}}return o?l:1/l}};Wr.cc=Wr.closenessCentrality;Wr.ccn=Wr.closenessCentralityNormalised=Wr.closenessCentralityNormalized;var Tp=dt({weight:null,directed:!1}),zi={betweennessCentrality:function(e){for(var r=Tp(e),n=r.directed,a=r.weight,i=a!=null,o=this.cy(),s=this.nodes(),l={},u={},f=0,c={set:function(m,b){u[m]=b,b>f&&(f=b)},get:function(m){return u[m]}},h=0;h<s.length;h++){var v=s[h],p=v.id();n?l[p]=v.outgoers().nodes():l[p]=v.openNeighborhood().nodes(),c.set(p,0)}for(var y=function(m){for(var b=s[m].id(),E=[],S={},C={},T={},_=new Nn.default(function(V,Y){return T[V]-T[Y]}),P=0;P<s.length;P++){var F=s[P].id();S[F]=[],C[F]=0,T[F]=1/0}for(C[b]=1,T[b]=0,_.push(b);!_.empty();){var k=_.pop();if(E.push(k),i)for(var R=0;R<l[k].length;R++){var x=l[k][R],W=o.getElementById(k),O=void 0;W.edgesTo(x).length>0?O=W.edgesTo(x)[0]:O=x.edgesTo(W)[0];var M=a(O);x=x.id(),T[x]>T[k]+M&&(T[x]=T[k]+M,_.nodes.indexOf(x)<0?_.push(x):_.updateItem(x),C[x]=0,S[x]=[]),T[x]==T[k]+M&&(C[x]=C[x]+C[k],S[x].push(k))}else for(var K=0;K<l[k].length;K++){var G=l[k][K].id();T[G]==1/0&&(_.push(G),T[G]=T[k]+1),T[G]==T[k]+1&&(C[G]=C[G]+C[k],S[G].push(k))}}for(var H={},A=0;A<s.length;A++)H[s[A].id()]=0;for(;E.length>0;){for(var z=E.pop(),$=0;$<S[z].length;$++){var I=S[z][$];H[I]=H[I]+C[I]/C[z]*(1+H[z])}z!=s[m].id()&&c.set(z,c.get(z)+H[z])}},w=0;w<s.length;w++)y(w);var d={betweenness:function(m){var b=o.collection(m).id();return c.get(b)},betweennessNormalized:function(m){if(f==0)return 0;var b=o.collection(m).id();return c.get(b)/f}};return d.betweennessNormalised=d.betweennessNormalized,d}};zi.bc=zi.betweennessCentrality;var Pp=dt({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),zp=function(e){return Pp(e)},Ap=function(e,r){for(var n=0,a=0;a<r.length;a++)n+=r[a](e);return n},Lp=function(e,r,n){for(var a=0;a<r;a++)e[a*r+a]=n},Hl=function(e,r){for(var n,a=0;a<r;a++){n=0;for(var i=0;i<r;i++)n+=e[i*r+a];for(var o=0;o<r;o++)e[o*r+a]=e[o*r+a]/n}},Bp=function(e,r,n){for(var a=new Array(n*n),i=0;i<n;i++){for(var o=0;o<n;o++)a[i*n+o]=0;for(var s=0;s<n;s++)for(var l=0;l<n;l++)a[i*n+l]+=e[i*n+s]*r[s*n+l]}return a},Mp=function(e,r,n){for(var a=e.slice(0),i=1;i<n;i++)e=Bp(e,a,r);return e},Op=function(e,r,n){for(var a=new Array(r*r),i=0;i<r*r;i++)a[i]=Math.pow(e[i],n);return Hl(a,r),a},Ip=function(e,r,n,a){for(var i=0;i<n;i++){var o=Math.round(e[i]*Math.pow(10,a))/Math.pow(10,a),s=Math.round(r[i]*Math.pow(10,a))/Math.pow(10,a);if(o!==s)return!1}return!0},Rp=function(e,r,n,a){for(var i=[],o=0;o<r;o++){for(var s=[],l=0;l<r;l++)Math.round(e[o*r+l]*1e3)/1e3>0&&s.push(n[l]);s.length!==0&&i.push(a.collection(s))}return i},Np=function(e,r){for(var n=0;n<e.length;n++)if(!r[n]||e[n].id()!==r[n].id())return!1;return!0},Fp=function(e){for(var r=0;r<e.length;r++)for(var n=0;n<e.length;n++)r!=n&&Np(e[r],e[n])&&e.splice(n,1);return e},Ho=function(e){for(var r=this.nodes(),n=this.edges(),a=this.cy(),i=zp(e),o={},s=0;s<r.length;s++)o[r[s].id()]=s;for(var l=r.length,u=l*l,f=new Array(u),c,h=0;h<u;h++)f[h]=0;for(var v=0;v<n.length;v++){var p=n[v],y=o[p.source().id()],w=o[p.target().id()],d=Ap(p,i.attributes);f[y*l+w]+=d,f[w*l+y]+=d}Lp(f,l,i.multFactor),Hl(f,l);for(var g=!0,m=0;g&&m<i.maxIterations;)g=!1,c=Mp(f,l,i.expandFactor),f=Op(c,l,i.inflateFactor),Ip(f,c,u,4)||(g=!0),m++;var b=Rp(f,l,r,a);return b=Fp(b),b},$p={markovClustering:Ho,mcl:Ho},Vp=function(e){return e},Wl=function(e,r){return Math.abs(r-e)},Wo=function(e,r,n){return e+Wl(r,n)},Uo=function(e,r,n){return e+Math.pow(n-r,2)},qp=function(e){return Math.sqrt(e)},Gp=function(e,r,n){return Math.max(e,Wl(r,n))},fn=function(e,r,n,a,i){for(var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:Vp,s=a,l,u,f=0;f<e;f++)l=r(f),u=n(f),s=i(s,l,u);return o(s)},Zr={euclidean:function(e,r,n){return e>=2?fn(e,r,n,0,Uo,qp):fn(e,r,n,0,Wo)},squaredEuclidean:function(e,r,n){return fn(e,r,n,0,Uo)},manhattan:function(e,r,n){return fn(e,r,n,0,Wo)},max:function(e,r,n){return fn(e,r,n,-1/0,Gp)}};Zr["squared-euclidean"]=Zr.squaredEuclidean;Zr.squaredeuclidean=Zr.squaredEuclidean;function Fa(t,e,r,n,a,i){var o;return We(t)?o=t:o=Zr[t]||Zr.euclidean,e===0&&We(t)?o(a,i):o(e,r,n,a,i)}var Hp=dt({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),ro=function(e){return Hp(e)},Ca=function(e,r,n,a,i){var o=i!=="kMedoids",s=o?function(c){return n[c]}:function(c){return a[c](n)},l=function(h){return a[h](r)},u=n,f=r;return Fa(e,a.length,s,l,u,f)},ai=function(e,r,n){for(var a=n.length,i=new Array(a),o=new Array(a),s=new Array(r),l=null,u=0;u<a;u++)i[u]=e.min(n[u]).value,o[u]=e.max(n[u]).value;for(var f=0;f<r;f++){l=[];for(var c=0;c<a;c++)l[c]=Math.random()*(o[c]-i[c])+i[c];s[f]=l}return s},Ul=function(e,r,n,a,i){for(var o=1/0,s=0,l=0;l<r.length;l++){var u=Ca(n,e,r[l],a,i);u<o&&(o=u,s=l)}return s},Kl=function(e,r,n){for(var a=[],i=null,o=0;o<r.length;o++)i=r[o],n[i.id()]===e&&a.push(i);return a},Wp=function(e,r,n){return Math.abs(r-e)<=n},Up=function(e,r,n){for(var a=0;a<e.length;a++)for(var i=0;i<e[a].length;i++){var o=Math.abs(e[a][i]-r[a][i]);if(o>n)return!1}return!0},Kp=function(e,r,n){for(var a=0;a<n;a++)if(e===r[a])return!0;return!1},Ko=function(e,r){var n=new Array(r);if(e.length<50)for(var a=0;a<r;a++){for(var i=e[Math.floor(Math.random()*e.length)];Kp(i,n,a);)i=e[Math.floor(Math.random()*e.length)];n[a]=i}else for(var o=0;o<r;o++)n[o]=e[Math.floor(Math.random()*e.length)];return n},Zo=function(e,r,n){for(var a=0,i=0;i<r.length;i++)a+=Ca("manhattan",r[i],e,n,"kMedoids");return a},Zp=function(e){var r=this.cy(),n=this.nodes(),a=null,i=ro(e),o=new Array(i.k),s={},l;i.testMode?typeof i.testCentroids=="number"?(i.testCentroids,l=ai(n,i.k,i.attributes)):rt(i.testCentroids)==="object"?l=i.testCentroids:l=ai(n,i.k,i.attributes):l=ai(n,i.k,i.attributes);for(var u=!0,f=0;u&&f<i.maxIterations;){for(var c=0;c<n.length;c++)a=n[c],s[a.id()]=Ul(a,l,i.distance,i.attributes,"kMeans");u=!1;for(var h=0;h<i.k;h++){var v=Kl(h,n,s);if(v.length!==0){for(var p=i.attributes.length,y=l[h],w=new Array(p),d=new Array(p),g=0;g<p;g++){d[g]=0;for(var m=0;m<v.length;m++)a=v[m],d[g]+=i.attributes[g](a);w[g]=d[g]/v.length,Wp(w[g],y[g],i.sensitivityThreshold)||(u=!0)}l[h]=w,o[h]=r.collection(v)}}f++}return o},Yp=function(e){var r=this.cy(),n=this.nodes(),a=null,i=ro(e),o=new Array(i.k),s,l={},u,f=new Array(i.k);i.testMode?typeof i.testCentroids=="number"||(rt(i.testCentroids)==="object"?s=i.testCentroids:s=Ko(n,i.k)):s=Ko(n,i.k);for(var c=!0,h=0;c&&h<i.maxIterations;){for(var v=0;v<n.length;v++)a=n[v],l[a.id()]=Ul(a,s,i.distance,i.attributes,"kMedoids");c=!1;for(var p=0;p<s.length;p++){var y=Kl(p,n,l);if(y.length!==0){f[p]=Zo(s[p],y,i.attributes);for(var w=0;w<y.length;w++)u=Zo(y[w],y,i.attributes),u<f[p]&&(f[p]=u,s[p]=y[w],c=!0);o[p]=r.collection(y)}}h++}return o},Xp=function(e,r,n,a,i){for(var o,s,l=0;l<r.length;l++)for(var u=0;u<e.length;u++)a[l][u]=Math.pow(n[l][u],i.m);for(var f=0;f<e.length;f++)for(var c=0;c<i.attributes.length;c++){o=0,s=0;for(var h=0;h<r.length;h++)o+=a[h][f]*i.attributes[c](r[h]),s+=a[h][f];e[f][c]=o/s}},jp=function(e,r,n,a,i){for(var o=0;o<e.length;o++)r[o]=e[o].slice();for(var s,l,u,f=2/(i.m-1),c=0;c<n.length;c++)for(var h=0;h<a.length;h++){s=0;for(var v=0;v<n.length;v++)l=Ca(i.distance,a[h],n[c],i.attributes,"cmeans"),u=Ca(i.distance,a[h],n[v],i.attributes,"cmeans"),s+=Math.pow(l/u,f);e[h][c]=1/s}},Qp=function(e,r,n,a){for(var i=new Array(n.k),o=0;o<i.length;o++)i[o]=[];for(var s,l,u=0;u<r.length;u++){s=-1/0,l=-1;for(var f=0;f<r[0].length;f++)r[u][f]>s&&(s=r[u][f],l=f);i[l].push(e[u])}for(var c=0;c<i.length;c++)i[c]=a.collection(i[c]);return i},Yo=function(e){var r=this.cy(),n=this.nodes(),a=ro(e),i,o,s,l,u;l=new Array(n.length);for(var f=0;f<n.length;f++)l[f]=new Array(a.k);s=new Array(n.length);for(var c=0;c<n.length;c++)s[c]=new Array(a.k);for(var h=0;h<n.length;h++){for(var v=0,p=0;p<a.k;p++)s[h][p]=Math.random(),v+=s[h][p];for(var y=0;y<a.k;y++)s[h][y]=s[h][y]/v}o=new Array(a.k);for(var w=0;w<a.k;w++)o[w]=new Array(a.attributes.length);u=new Array(n.length);for(var d=0;d<n.length;d++)u[d]=new Array(a.k);for(var g=!0,m=0;g&&m<a.maxIterations;)g=!1,Xp(o,n,s,u,a),jp(s,l,o,n,a),Up(s,l,a.sensitivityThreshold)||(g=!0),m++;return i=Qp(n,s,a,r),{clusters:i,degreeOfMembership:s}},Jp={kMeans:Zp,kMedoids:Yp,fuzzyCMeans:Yo,fcm:Yo},em=dt({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),tm={single:"min",complete:"max"},rm=function(e){var r=em(e),n=tm[r.linkage];return n!=null&&(r.linkage=n),r},Xo=function(e,r,n,a,i){for(var o=0,s=1/0,l,u=i.attributes,f=function(_,P){return Fa(i.distance,u.length,function(F){return u[F](_)},function(F){return u[F](P)},_,P)},c=0;c<e.length;c++){var h=e[c].key,v=n[h][a[h]];v<s&&(o=h,s=v)}if(i.mode==="threshold"&&s>=i.threshold||i.mode==="dendrogram"&&e.length===1)return!1;var p=r[o],y=r[a[o]],w;i.mode==="dendrogram"?w={left:p,right:y,key:p.key}:w={value:p.value.concat(y.value),key:p.key},e[p.index]=w,e.splice(y.index,1),r[p.key]=w;for(var d=0;d<e.length;d++){var g=e[d];p.key===g.key?l=1/0:i.linkage==="min"?(l=n[p.key][g.key],n[p.key][g.key]>n[y.key][g.key]&&(l=n[y.key][g.key])):i.linkage==="max"?(l=n[p.key][g.key],n[p.key][g.key]<n[y.key][g.key]&&(l=n[y.key][g.key])):i.linkage==="mean"?l=(n[p.key][g.key]*p.size+n[y.key][g.key]*y.size)/(p.size+y.size):i.mode==="dendrogram"?l=f(g.value,p.value):l=f(g.value[0],p.value[0]),n[p.key][g.key]=n[g.key][p.key]=l}for(var m=0;m<e.length;m++){var b=e[m].key;if(a[b]===p.key||a[b]===y.key){for(var E=b,S=0;S<e.length;S++){var C=e[S].key;n[b][C]<n[b][E]&&(E=C)}a[b]=E}e[m].index=m}return p.key=y.key=p.index=y.index=null,!0},Jn=function t(e,r,n){e&&(e.value?r.push(e.value):(e.left&&t(e.left,r),e.right&&t(e.right,r)))},nm=function t(e,r){if(!e)return"";if(e.left&&e.right){var n=t(e.left,r),a=t(e.right,r),i=r.add({group:"nodes",data:{id:n+","+a}});return r.add({group:"edges",data:{source:n,target:i.id()}}),r.add({group:"edges",data:{source:a,target:i.id()}}),i.id()}else if(e.value)return e.value.id()},am=function t(e,r,n){if(!e)return[];var a=[],i=[],o=[];return r===0?(e.left&&Jn(e.left,a),e.right&&Jn(e.right,i),o=a.concat(i),[n.collection(o)]):r===1?e.value?[n.collection(e.value)]:(e.left&&Jn(e.left,a),e.right&&Jn(e.right,i),[n.collection(a),n.collection(i)]):e.value?[n.collection(e.value)]:(e.left&&(a=t(e.left,r-1,n)),e.right&&(i=t(e.right,r-1,n)),a.concat(i))},jo=function(e){for(var r=this.cy(),n=this.nodes(),a=rm(e),i=a.attributes,o=function(m,b){return Fa(a.distance,i.length,function(E){return i[E](m)},function(E){return i[E](b)},m,b)},s=[],l=[],u=[],f=[],c=0;c<n.length;c++){var h={value:a.mode==="dendrogram"?n[c]:[n[c]],key:c,index:c};s[c]=h,f[c]=h,l[c]=[],u[c]=0}for(var v=0;v<s.length;v++)for(var p=0;p<=v;p++){var y=void 0;a.mode==="dendrogram"?y=v===p?1/0:o(s[v].value,s[p].value):y=v===p?1/0:o(s[v].value[0],s[p].value[0]),l[v][p]=y,l[p][v]=y,y<l[v][u[v]]&&(u[v]=p)}for(var w=Xo(s,f,l,u,a);w;)w=Xo(s,f,l,u,a);var d;return a.mode==="dendrogram"?(d=am(s[0],a.dendrogramDepth,r),a.addDendrogram&&nm(s[0],r)):(d=new Array(s.length),s.forEach(function(g,m){g.key=g.index=null,d[m]=r.collection(g.value)})),d},im={hierarchicalClustering:jo,hca:jo},om=dt({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),sm=function(e){var r=e.damping,n=e.preference;.5<=r&&r<1||Ke("Damping must range on [0.5, 1).  Got: ".concat(r));var a=["median","mean","min","max"];return a.some(function(i){return i===n})||he(n)||Ke("Preference must be one of [".concat(a.map(function(i){return"'".concat(i,"'")}).join(", "),"] or a number.  Got: ").concat(n)),om(e)},lm=function(e,r,n,a){var i=function(s,l){return a[l](s)};return-Fa(e,a.length,function(o){return i(r,o)},function(o){return i(n,o)},r,n)},um=function(e,r){var n=null;return r==="median"?n=sp(e):r==="mean"?n=op(e):r==="min"?n=ap(e):r==="max"?n=ip(e):n=r,n},fm=function(e,r,n){for(var a=[],i=0;i<e;i++)r[i*e+i]+n[i*e+i]>0&&a.push(i);return a},Qo=function(e,r,n){for(var a=[],i=0;i<e;i++){for(var o=-1,s=-1/0,l=0;l<n.length;l++){var u=n[l];r[i*e+u]>s&&(o=u,s=r[i*e+u])}o>0&&a.push(o)}for(var f=0;f<n.length;f++)a[n[f]]=n[f];return a},cm=function(e,r,n){for(var a=Qo(e,r,n),i=0;i<n.length;i++){for(var o=[],s=0;s<a.length;s++)a[s]===n[i]&&o.push(s);for(var l=-1,u=-1/0,f=0;f<o.length;f++){for(var c=0,h=0;h<o.length;h++)c+=r[o[h]*e+o[f]];c>u&&(l=f,u=c)}n[i]=o[l]}return a=Qo(e,r,n),a},Jo=function(e){for(var r=this.cy(),n=this.nodes(),a=sm(e),i={},o=0;o<n.length;o++)i[n[o].id()]=o;var s,l,u,f,c,h;s=n.length,l=s*s,u=new Array(l);for(var v=0;v<l;v++)u[v]=-1/0;for(var p=0;p<s;p++)for(var y=0;y<s;y++)p!==y&&(u[p*s+y]=lm(a.distance,n[p],n[y],a.attributes));f=um(u,a.preference);for(var w=0;w<s;w++)u[w*s+w]=f;c=new Array(l);for(var d=0;d<l;d++)c[d]=0;h=new Array(l);for(var g=0;g<l;g++)h[g]=0;for(var m=new Array(s),b=new Array(s),E=new Array(s),S=0;S<s;S++)m[S]=0,b[S]=0,E[S]=0;for(var C=new Array(s*a.minIterations),T=0;T<C.length;T++)C[T]=0;var _;for(_=0;_<a.maxIterations;_++){for(var P=0;P<s;P++){for(var F=-1/0,k=-1/0,R=-1,x=0,W=0;W<s;W++)m[W]=c[P*s+W],x=h[P*s+W]+u[P*s+W],x>=F?(k=F,F=x,R=W):x>k&&(k=x);for(var O=0;O<s;O++)c[P*s+O]=(1-a.damping)*(u[P*s+O]-F)+a.damping*m[O];c[P*s+R]=(1-a.damping)*(u[P*s+R]-k)+a.damping*m[R]}for(var M=0;M<s;M++){for(var K=0,G=0;G<s;G++)m[G]=h[G*s+M],b[G]=Math.max(0,c[G*s+M]),K+=b[G];K-=b[M],b[M]=c[M*s+M],K+=b[M];for(var H=0;H<s;H++)h[H*s+M]=(1-a.damping)*Math.min(0,K-b[H])+a.damping*m[H];h[M*s+M]=(1-a.damping)*(K-b[M])+a.damping*m[M]}for(var A=0,z=0;z<s;z++){var $=h[z*s+z]+c[z*s+z]>0?1:0;C[_%a.minIterations*s+z]=$,A+=$}if(A>0&&(_>=a.minIterations-1||_==a.maxIterations-1)){for(var I=0,V=0;V<s;V++){E[V]=0;for(var Y=0;Y<a.minIterations;Y++)E[V]+=C[Y*s+V];(E[V]===0||E[V]===a.minIterations)&&I++}if(I===s)break}}for(var U=fm(s,c,h),Q=cm(s,u,U),te={},ae=0;ae<U.length;ae++)te[U[ae]]=[];for(var oe=0;oe<n.length;oe++){var ue=i[n[oe].id()],de=Q[ue];de!=null&&te[de].push(n[oe])}for(var D=new Array(U.length),j=0;j<U.length;j++)D[j]=r.collection(te[U[j]]);return D},dm={affinityPropagation:Jo,ap:Jo},hm=dt({root:void 0,directed:!1}),vm={hierholzer:function(e){if(!_e(e)){var r=arguments;e={root:r[0],directed:r[1]}}var n=hm(e),a=n.root,i=n.directed,o=this,s=!1,l,u,f;a&&(f=me(a)?this.filter(a)[0].id():a[0].id());var c={},h={};i?o.forEach(function(g){var m=g.id();if(g.isNode()){var b=g.indegree(!0),E=g.outdegree(!0),S=b-E,C=E-b;S==1?l?s=!0:l=m:C==1?u?s=!0:u=m:(C>1||S>1)&&(s=!0),c[m]=[],g.outgoers().forEach(function(T){T.isEdge()&&c[m].push(T.id())})}else h[m]=[void 0,g.target().id()]}):o.forEach(function(g){var m=g.id();if(g.isNode()){var b=g.degree(!0);b%2&&(l?u?s=!0:u=m:l=m),c[m]=[],g.connectedEdges().forEach(function(E){return c[m].push(E.id())})}else h[m]=[g.source().id(),g.target().id()]});var v={found:!1,trail:void 0};if(s)return v;if(u&&l)if(i){if(f&&u!=f)return v;f=u}else{if(f&&u!=f&&l!=f)return v;f||(f=u)}else f||(f=o[0].id());var p=function(m){for(var b=m,E=[m],S,C,T;c[b].length;)S=c[b].shift(),C=h[S][0],T=h[S][1],b!=T?(c[T]=c[T].filter(function(_){return _!=S}),b=T):!i&&b!=C&&(c[C]=c[C].filter(function(_){return _!=S}),b=C),E.unshift(S),E.unshift(b);return E},y=[],w=[];for(w=p(f);w.length!=1;)c[w[0]].length==0?(y.unshift(o.getElementById(w.shift())),y.unshift(o.getElementById(w.shift()))):w=p(w.shift()).concat(w);y.unshift(o.getElementById(w.shift()));for(var d in c)if(c[d].length)return v;return v.found=!0,v.trail=this.spawn(y,!0),v}},ea=function(){var e=this,r={},n=0,a=0,i=[],o=[],s={},l=function(h,v){for(var p=o.length-1,y=[],w=e.spawn();o[p].x!=h||o[p].y!=v;)y.push(o.pop().edge),p--;y.push(o.pop().edge),y.forEach(function(d){var g=d.connectedNodes().intersection(e);w.merge(d),g.forEach(function(m){var b=m.id(),E=m.connectedEdges().intersection(e);w.merge(m),r[b].cutVertex?w.merge(E.filter(function(S){return S.isLoop()})):w.merge(E)})}),i.push(w)},u=function c(h,v,p){h===p&&(a+=1),r[v]={id:n,low:n++,cutVertex:!1};var y=e.getElementById(v).connectedEdges().intersection(e);if(y.size()===0)i.push(e.spawn(e.getElementById(v)));else{var w,d,g,m;y.forEach(function(b){w=b.source().id(),d=b.target().id(),g=w===v?d:w,g!==p&&(m=b.id(),s[m]||(s[m]=!0,o.push({x:v,y:g,edge:b})),g in r?r[v].low=Math.min(r[v].low,r[g].id):(c(h,g,v),r[v].low=Math.min(r[v].low,r[g].low),r[v].id<=r[g].low&&(r[v].cutVertex=!0,l(v,g))))})}};e.forEach(function(c){if(c.isNode()){var h=c.id();h in r||(a=0,u(h,h),r[h].cutVertex=a>1)}});var f=Object.keys(r).filter(function(c){return r[c].cutVertex}).map(function(c){return e.getElementById(c)});return{cut:e.spawn(f),components:i}},gm={hopcroftTarjanBiconnected:ea,htbc:ea,htb:ea,hopcroftTarjanBiconnectedComponents:ea},ta=function(){var e=this,r={},n=0,a=[],i=[],o=e.spawn(e),s=function l(u){i.push(u),r[u]={index:n,low:n++,explored:!1};var f=e.getElementById(u).connectedEdges().intersection(e);if(f.forEach(function(y){var w=y.target().id();w!==u&&(w in r||l(w),r[w].explored||(r[u].low=Math.min(r[u].low,r[w].low)))}),r[u].index===r[u].low){for(var c=e.spawn();;){var h=i.pop();if(c.merge(e.getElementById(h)),r[h].low=r[u].index,r[h].explored=!0,h===u)break}var v=c.edgesWith(c),p=c.merge(v);a.push(p),o=o.difference(p)}};return e.forEach(function(l){if(l.isNode()){var u=l.id();u in r||s(u)}}),{cut:o,components:a}},pm={tarjanStronglyConnected:ta,tsc:ta,tscc:ta,tarjanStronglyConnectedComponents:ta},Zl={};[kn,Ug,Kg,Yg,jg,Jg,rp,Dp,Hr,Wr,zi,$p,Jp,im,dm,vm,gm,pm].forEach(function(t){be(Zl,t)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var Yl=0,Xl=1,jl=2,jt=function t(e){if(!(this instanceof t))return new t(e);this.id="Thenable/1.0.7",this.state=Yl,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};jt.prototype={fulfill:function(e){return es(this,Xl,"fulfillValue",e)},reject:function(e){return es(this,jl,"rejectReason",e)},then:function(e,r){var n=this,a=new jt;return n.onFulfilled.push(rs(e,a,"fulfill")),n.onRejected.push(rs(r,a,"reject")),Ql(n),a.proxy}};var es=function(e,r,n,a){return e.state===Yl&&(e.state=r,e[n]=a,Ql(e)),e},Ql=function(e){e.state===Xl?ts(e,"onFulfilled",e.fulfillValue):e.state===jl&&ts(e,"onRejected",e.rejectReason)},ts=function(e,r,n){if(e[r].length!==0){var a=e[r];e[r]=[];var i=function(){for(var s=0;s<a.length;s++)a[s](n)};typeof setImmediate=="function"?setImmediate(i):setTimeout(i,0)}},rs=function(e,r,n){return function(a){if(typeof e!="function")r[n].call(r,a);else{var i;try{i=e(a)}catch(o){r.reject(o);return}mm(r,i)}}},mm=function t(e,r){if(e===r||e.proxy===r){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(rt(r)==="object"&&r!==null||typeof r=="function")try{n=r.then}catch(i){e.reject(i);return}if(typeof n=="function"){var a=!1;try{n.call(r,function(i){a||(a=!0,i===r?e.reject(new TypeError("circular thenable chain")):t(e,i))},function(i){a||(a=!0,e.reject(i))})}catch(i){a||e.reject(i)}return}e.fulfill(r)};jt.all=function(t){return new jt(function(e,r){for(var n=new Array(t.length),a=0,i=function(l,u){n[l]=u,a++,a===t.length&&e(n)},o=0;o<t.length;o++)(function(s){var l=t[s],u=l!=null&&l.then!=null;if(u)l.then(function(c){i(s,c)},function(c){r(c)});else{var f=l;i(s,f)}})(o)})};jt.resolve=function(t){return new jt(function(e,r){e(t)})};jt.reject=function(t){return new jt(function(e,r){r(t)})};var en=typeof Promise<"u"?Promise:jt,Ai=function(e,r,n){var a=Zi(e),i=!a,o=this._private=be({duration:1e3},r,n);if(o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&We(o.complete)&&o.completes.push(o.complete),i){var s=e.position();o.startPosition=o.startPosition||{x:s.x,y:s.y},o.startStyle=o.startStyle||e.cy().style().getAnimationStartStyle(e,o.style)}if(a){var l=e.pan();o.startPan={x:l.x,y:l.y},o.startZoom=e.zoom()}this.length=1,this[0]=this},Er=Ai.prototype;be(Er,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var r,n=e.target._private.animation;e.queue?r=n.queue:r=n.current,r.push(this),zt(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var r=this._private;return e===void 0?r.progress*r.duration:this.progress(e/r.duration)},progress:function(e){var r=this._private,n=r.playing;return e===void 0?r.progress:(n&&this.pause(),r.progress=e,r.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,r=e.playing;r&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(u,f){var c=e[u];c!=null&&(e[u]=e[f],e[f]=c)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var a=0;a<e.style.length;a++){var i=e.style[a],o=i.name,s=e.startStyle[o];e.startStyle[o]=i,e.style[a]=s}return r&&this.play(),this},promise:function(e){var r=this._private,n;switch(e){case"frame":n=r.frames;break;default:case"complete":case"completed":n=r.completes}return new en(function(a,i){n.push(function(){a()})})}});Er.complete=Er.completed;Er.run=Er.play;Er.running=Er.playing;var ym={animated:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return!1;var o=a[0];if(o)return o._private.animation.current.length>0}},clearQueue:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var o=0;o<a.length;o++){var s=a[o];s._private.animation.queue=[]}return this}},delay:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animate({delay:r,duration:r,complete:n}):this}},delayAnimation:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animation({delay:r,duration:r,complete:n}):this}},animation:function(){return function(r,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this,l=!i,u=!l;if(!s.styleEnabled())return this;var f=s.style();r=be({},r,n);var c=Object.keys(r).length===0;if(c)return new Ai(o[0],r);switch(r.duration===void 0&&(r.duration=400),r.duration){case"slow":r.duration=600;break;case"fast":r.duration=200;break}if(u&&(r.style=f.getPropsList(r.style||r.css),r.css=void 0),u&&r.renderedPosition!=null){var h=r.renderedPosition,v=s.pan(),p=s.zoom();r.position=Il(h,p,v)}if(l&&r.panBy!=null){var y=r.panBy,w=s.pan();r.pan={x:w.x+y.x,y:w.y+y.y}}var d=r.center||r.centre;if(l&&d!=null){var g=s.getCenterPan(d.eles,r.zoom);g!=null&&(r.pan=g)}if(l&&r.fit!=null){var m=r.fit,b=s.getFitViewport(m.eles||m.boundingBox,m.padding);b!=null&&(r.pan=b.pan,r.zoom=b.zoom)}if(l&&_e(r.zoom)){var E=s.getZoomedViewport(r.zoom);E!=null?(E.zoomed&&(r.zoom=E.zoom),E.panned&&(r.pan=E.pan)):r.zoom=null}return new Ai(o[0],r)}},animate:function(){return function(r,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this;if(!s.styleEnabled())return this;n&&(r=be({},r,n));for(var l=0;l<o.length;l++){var u=o[l],f=u.animated()&&(r.queue===void 0||r.queue),c=u.animation(r,f?{queue:!0}:void 0);c.play()}return this}},stop:function(){return function(r,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var l=0;l<o.length;l++){for(var u=o[l],f=u._private,c=f.animation.current,h=0;h<c.length;h++){var v=c[h],p=v._private;n&&(p.duration=0)}r&&(f.animation.queue=[]),n||(f.animation.current=[])}return s.notify("draw"),this}}},bm={data:function(e){var r={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(a){},beforeSet:function(a,i){},onSet:function(a){},canSet:function(a){return!0}};return e=be({},r,e),function(a,i){var o=e,s=this,l=s.length!==void 0,u=l?s:[s],f=l?s[0]:s;if(me(a)){var c=a.indexOf(".")!==-1,h=c&&ag.default(a);if(o.allowGetting&&i===void 0){var v;return f&&(o.beforeGet(f),h&&f._private[o.field][a]===void 0?v=rg.default(f._private[o.field],h):v=f._private[o.field][a]),v}else if(o.allowSetting&&i!==void 0){var p=!o.immutableKeys[a];if(p){var y=wl({},a,i);o.beforeSet(s,y);for(var w=0,d=u.length;w<d;w++){var g=u[w];o.canSet(g)&&(h&&f._private[o.field][a]===void 0?ng.default(g._private[o.field],h,i):g._private[o.field][a]=i)}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}}}else if(o.allowSetting&&_e(a)){var m=a,b,E,S=Object.keys(m);o.beforeSet(s,m);for(var C=0;C<S.length;C++){b=S[C],E=m[b];var T=!o.immutableKeys[b];if(T)for(var _=0;_<u.length;_++){var P=u[_];o.canSet(P)&&(P._private[o.field][b]=E)}}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}else if(o.allowBinding&&We(a)){var F=a;s.on(o.bindingEvent,F)}else if(o.allowGetting&&a===void 0){var k;return f&&(o.beforeGet(f),k=f._private[o.field]),k}return s}},removeData:function(e){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=be({},r,e),function(a){var i=e,o=this,s=o.length!==void 0,l=s?o:[o];if(me(a)){for(var u=a.split(/\s+/),f=u.length,c=0;c<f;c++){var h=u[c];if(!lr(h)){var v=!i.immutableKeys[h];if(v)for(var p=0,y=l.length;p<y;p++)l[p]._private[i.field][h]=void 0}}i.triggerEvent&&o[i.triggerFnName](i.event)}else if(a===void 0){for(var w=0,d=l.length;w<d;w++)for(var g=l[w]._private[i.field],m=Object.keys(g),b=0;b<m.length;b++){var E=m[b],S=!i.immutableKeys[E];S&&(g[E]=void 0)}i.triggerEvent&&o[i.triggerFnName](i.event)}return o}}},wm={eventAliasesOn:function(e){var r=e;r.addListener=r.listen=r.bind=r.on,r.unlisten=r.unbind=r.off=r.removeListener,r.trigger=r.emit,r.pon=r.promiseOn=function(n,a){var i=this,o=Array.prototype.slice.call(arguments,0);return new en(function(s,l){var u=function(v){i.off.apply(i,c),s(v)},f=o.concat([u]),c=f.concat([]);i.on.apply(i,f)})}}},Pe={};[ym,bm,wm].forEach(function(t){be(Pe,t)});var xm={animate:Pe.animate(),animation:Pe.animation(),animated:Pe.animated(),clearQueue:Pe.clearQueue(),delay:Pe.delay(),delayAnimation:Pe.delayAnimation(),stop:Pe.stop()},da={classes:function(e){var r=this;if(e===void 0){var n=[];return r[0]._private.classes.forEach(function(p){return n.push(p)}),n}else Oe(e)||(e=(e||"").match(/\S+/g)||[]);for(var a=[],i=new Jr(e),o=0;o<r.length;o++){for(var s=r[o],l=s._private,u=l.classes,f=!1,c=0;c<e.length;c++){var h=e[c],v=u.has(h);if(!v){f=!0;break}}f||(f=u.size!==e.length),f&&(l.classes=i,a.push(s))}return a.length>0&&this.spawn(a).updateStyle().emit("class"),r},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var r=this[0];return r!=null&&r._private.classes.has(e)},toggleClass:function(e,r){Oe(e)||(e=e.match(/\S+/g)||[]);for(var n=this,a=r===void 0,i=[],o=0,s=n.length;o<s;o++)for(var l=n[o],u=l._private.classes,f=!1,c=0;c<e.length;c++){var h=e[c],v=u.has(h),p=!1;r||a&&!v?(u.add(h),p=!0):(!r||a&&v)&&(u.delete(h),p=!0),!f&&p&&(i.push(l),f=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,r){var n=this;if(r==null)r=250;else if(r===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},r),n}};da.className=da.classNames=da.classes;var ke={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:tt,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};ke.variable="(?:[\\w-.]|(?:\\\\"+ke.metaChar+"))+";ke.className="(?:[\\w-]|(?:\\\\"+ke.metaChar+"))+";ke.value=ke.string+"|"+ke.number;ke.id=ke.variable;(function(){var t,e,r;for(t=ke.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],ke.comparatorOp+="|@"+e;for(t=ke.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],!(e.indexOf("!")>=0)&&e!=="="&&(ke.comparatorOp+="|\\!"+e)})();var Ae=function(){return{checks:[]}},ge={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},Li=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(t,e){return kg(t.selector,e.selector)}),Em=function(){for(var t={},e,r=0;r<Li.length;r++)e=Li[r],t[e.selector]=e.matches;return t}(),Cm=function(e,r){return Em[e](r)},Sm="("+Li.map(function(t){return t.selector}).join("|")+")",Lr=function(e){return e.replace(new RegExp("\\\\("+ke.metaChar+")","g"),function(r,n){return n})},rr=function(e,r,n){e[e.length-1]=n},Bi=[{name:"group",query:!0,regex:"("+ke.group+")",populate:function(e,r,n){var a=Zt(n,1),i=a[0];r.checks.push({type:ge.GROUP,value:i==="*"?i:i+"s"})}},{name:"state",query:!0,regex:Sm,populate:function(e,r,n){var a=Zt(n,1),i=a[0];r.checks.push({type:ge.STATE,value:i})}},{name:"id",query:!0,regex:"\\#("+ke.id+")",populate:function(e,r,n){var a=Zt(n,1),i=a[0];r.checks.push({type:ge.ID,value:Lr(i)})}},{name:"className",query:!0,regex:"\\.("+ke.className+")",populate:function(e,r,n){var a=Zt(n,1),i=a[0];r.checks.push({type:ge.CLASS,value:Lr(i)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+ke.variable+")\\s*\\]",populate:function(e,r,n){var a=Zt(n,1),i=a[0];r.checks.push({type:ge.DATA_EXIST,field:Lr(i)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+ke.variable+")\\s*("+ke.comparatorOp+")\\s*("+ke.value+")\\s*\\]",populate:function(e,r,n){var a=Zt(n,3),i=a[0],o=a[1],s=a[2],l=new RegExp("^"+ke.string+"$").exec(s)!=null;l?s=s.substring(1,s.length-1):s=parseFloat(s),r.checks.push({type:ge.DATA_COMPARE,field:Lr(i),operator:o,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+ke.boolOp+")\\s*("+ke.variable+")\\s*\\]",populate:function(e,r,n){var a=Zt(n,2),i=a[0],o=a[1];r.checks.push({type:ge.DATA_BOOL,field:Lr(o),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+ke.meta+")\\s*("+ke.comparatorOp+")\\s*("+ke.number+")\\s*\\]\\]",populate:function(e,r,n){var a=Zt(n,3),i=a[0],o=a[1],s=a[2];r.checks.push({type:ge.META_COMPARE,field:Lr(i),operator:o,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:ke.separator,populate:function(e,r){var n=e.currentSubject,a=e.edgeCount,i=e.compoundCount,o=e[e.length-1];n!=null&&(o.subject=n,e.currentSubject=null),o.edgeCount=a,o.compoundCount=i,e.edgeCount=0,e.compoundCount=0;var s=e[e.length++]=Ae();return s}},{name:"directedEdge",separator:!0,regex:ke.directedEdge,populate:function(e,r){if(e.currentSubject==null){var n=Ae(),a=r,i=Ae();return n.checks.push({type:ge.DIRECTED_EDGE,source:a,target:i}),rr(e,r,n),e.edgeCount++,i}else{var o=Ae(),s=r,l=Ae();return o.checks.push({type:ge.NODE_SOURCE,source:s,target:l}),rr(e,r,o),e.edgeCount++,l}}},{name:"undirectedEdge",separator:!0,regex:ke.undirectedEdge,populate:function(e,r){if(e.currentSubject==null){var n=Ae(),a=r,i=Ae();return n.checks.push({type:ge.UNDIRECTED_EDGE,nodes:[a,i]}),rr(e,r,n),e.edgeCount++,i}else{var o=Ae(),s=r,l=Ae();return o.checks.push({type:ge.NODE_NEIGHBOR,node:s,neighbor:l}),rr(e,r,o),l}}},{name:"child",separator:!0,regex:ke.child,populate:function(e,r){if(e.currentSubject==null){var n=Ae(),a=Ae(),i=e[e.length-1];return n.checks.push({type:ge.CHILD,parent:i,child:a}),rr(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var o=Ae(),s=e[e.length-1],l=Ae(),u=Ae(),f=Ae(),c=Ae();return o.checks.push({type:ge.COMPOUND_SPLIT,left:s,right:l,subject:u}),u.checks=r.checks,r.checks=[{type:ge.TRUE}],c.checks.push({type:ge.TRUE}),l.checks.push({type:ge.PARENT,parent:c,child:f}),rr(e,s,o),e.currentSubject=u,e.compoundCount++,f}else{var h=Ae(),v=Ae(),p=[{type:ge.PARENT,parent:h,child:v}];return h.checks=r.checks,r.checks=p,e.compoundCount++,v}}},{name:"descendant",separator:!0,regex:ke.descendant,populate:function(e,r){if(e.currentSubject==null){var n=Ae(),a=Ae(),i=e[e.length-1];return n.checks.push({type:ge.DESCENDANT,ancestor:i,descendant:a}),rr(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var o=Ae(),s=e[e.length-1],l=Ae(),u=Ae(),f=Ae(),c=Ae();return o.checks.push({type:ge.COMPOUND_SPLIT,left:s,right:l,subject:u}),u.checks=r.checks,r.checks=[{type:ge.TRUE}],c.checks.push({type:ge.TRUE}),l.checks.push({type:ge.ANCESTOR,ancestor:c,descendant:f}),rr(e,s,o),e.currentSubject=u,e.compoundCount++,f}else{var h=Ae(),v=Ae(),p=[{type:ge.ANCESTOR,ancestor:h,descendant:v}];return h.checks=r.checks,r.checks=p,e.compoundCount++,v}}},{name:"subject",modifier:!0,regex:ke.subject,populate:function(e,r){if(e.currentSubject!=null&&e.currentSubject!==r)return ze("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=r;var n=e[e.length-1],a=n.checks[0],i=a==null?null:a.type;i===ge.DIRECTED_EDGE?a.type=ge.NODE_TARGET:i===ge.UNDIRECTED_EDGE&&(a.type=ge.NODE_NEIGHBOR,a.node=a.nodes[1],a.neighbor=a.nodes[0],a.nodes=null)}}];Bi.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var km=function(e){for(var r,n,a,i=0;i<Bi.length;i++){var o=Bi[i],s=o.name,l=e.match(o.regexObj);if(l!=null){n=l,r=o,a=s;var u=l[0];e=e.substring(u.length);break}}return{expr:r,match:n,name:a,remaining:e}},_m=function(e){var r=e.match(/^\s+/);if(r){var n=r[0];e=e.substring(n.length)}return e},Dm=function(e){var r=this,n=r.inputText=e,a=r[0]=Ae();for(r.length=1,n=_m(n);;){var i=km(n);if(i.expr==null)return ze("The selector `"+e+"`is invalid"),!1;var o=i.match.slice(1),s=i.expr.populate(r,a,o);if(s===!1)return!1;if(s!=null&&(a=s),n=i.remaining,n.match(/^\s*$/))break}var l=r[r.length-1];r.currentSubject!=null&&(l.subject=r.currentSubject),l.edgeCount=r.edgeCount,l.compoundCount=r.compoundCount;for(var u=0;u<r.length;u++){var f=r[u];if(f.compoundCount>0&&f.edgeCount>0)return ze("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(f.edgeCount>1)return ze("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;f.edgeCount===1&&ze("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},Tm=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(f){return f??""},r=function(f){return me(f)?'"'+f+'"':e(f)},n=function(f){return" "+f+" "},a=function(f,c){var h=f.type,v=f.value;switch(h){case ge.GROUP:{var p=e(v);return p.substring(0,p.length-1)}case ge.DATA_COMPARE:{var y=f.field,w=f.operator;return"["+y+n(e(w))+r(v)+"]"}case ge.DATA_BOOL:{var d=f.operator,g=f.field;return"["+e(d)+g+"]"}case ge.DATA_EXIST:{var m=f.field;return"["+m+"]"}case ge.META_COMPARE:{var b=f.operator,E=f.field;return"[["+E+n(e(b))+r(v)+"]]"}case ge.STATE:return v;case ge.ID:return"#"+v;case ge.CLASS:return"."+v;case ge.PARENT:case ge.CHILD:return i(f.parent,c)+n(">")+i(f.child,c);case ge.ANCESTOR:case ge.DESCENDANT:return i(f.ancestor,c)+" "+i(f.descendant,c);case ge.COMPOUND_SPLIT:{var S=i(f.left,c),C=i(f.subject,c),T=i(f.right,c);return S+(S.length>0?" ":"")+C+T}case ge.TRUE:return""}},i=function(f,c){return f.checks.reduce(function(h,v,p){return h+(c===f&&p===0?"$":"")+a(v,c)},"")},o="",s=0;s<this.length;s++){var l=this[s];o+=i(l,l.subject),this.length>1&&s<this.length-1&&(o+=", ")}return this.toStringCache=o,o},Pm={parse:Dm,toString:Tm},Jl=function(e,r,n){var a,i=me(e),o=he(e),s=me(n),l,u,f=!1,c=!1,h=!1;switch(r.indexOf("!")>=0&&(r=r.replace("!",""),c=!0),r.indexOf("@")>=0&&(r=r.replace("@",""),f=!0),(i||s||f)&&(l=!i&&!o?"":""+e,u=""+n),f&&(e=l=l.toLowerCase(),n=u=u.toLowerCase()),r){case"*=":a=l.indexOf(u)>=0;break;case"$=":a=l.indexOf(u,l.length-u.length)>=0;break;case"^=":a=l.indexOf(u)===0;break;case"=":a=e===n;break;case">":h=!0,a=e>n;break;case">=":h=!0,a=e>=n;break;case"<":h=!0,a=e<n;break;case"<=":h=!0,a=e<=n;break;default:a=!1;break}return c&&(e!=null||!h)&&(a=!a),a},zm=function(e,r){switch(r){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},Am=function(e){return e!==void 0},no=function(e,r){return e.data(r)},Lm=function(e,r){return e[r]()},Ze=[],Fe=function(e,r){return e.checks.every(function(n){return Ze[n.type](n,r)})};Ze[ge.GROUP]=function(t,e){var r=t.value;return r==="*"||r===e.group()};Ze[ge.STATE]=function(t,e){var r=t.value;return Cm(r,e)};Ze[ge.ID]=function(t,e){var r=t.value;return e.id()===r};Ze[ge.CLASS]=function(t,e){var r=t.value;return e.hasClass(r)};Ze[ge.META_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return Jl(Lm(e,r),n,a)};Ze[ge.DATA_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return Jl(no(e,r),n,a)};Ze[ge.DATA_BOOL]=function(t,e){var r=t.field,n=t.operator;return zm(no(e,r),n)};Ze[ge.DATA_EXIST]=function(t,e){var r=t.field;return t.operator,Am(no(e,r))};Ze[ge.UNDIRECTED_EDGE]=function(t,e){var r=t.nodes[0],n=t.nodes[1],a=e.source(),i=e.target();return Fe(r,a)&&Fe(n,i)||Fe(n,a)&&Fe(r,i)};Ze[ge.NODE_NEIGHBOR]=function(t,e){return Fe(t.node,e)&&e.neighborhood().some(function(r){return r.isNode()&&Fe(t.neighbor,r)})};Ze[ge.DIRECTED_EDGE]=function(t,e){return Fe(t.source,e.source())&&Fe(t.target,e.target())};Ze[ge.NODE_SOURCE]=function(t,e){return Fe(t.source,e)&&e.outgoers().some(function(r){return r.isNode()&&Fe(t.target,r)})};Ze[ge.NODE_TARGET]=function(t,e){return Fe(t.target,e)&&e.incomers().some(function(r){return r.isNode()&&Fe(t.source,r)})};Ze[ge.CHILD]=function(t,e){return Fe(t.child,e)&&Fe(t.parent,e.parent())};Ze[ge.PARENT]=function(t,e){return Fe(t.parent,e)&&e.children().some(function(r){return Fe(t.child,r)})};Ze[ge.DESCENDANT]=function(t,e){return Fe(t.descendant,e)&&e.ancestors().some(function(r){return Fe(t.ancestor,r)})};Ze[ge.ANCESTOR]=function(t,e){return Fe(t.ancestor,e)&&e.descendants().some(function(r){return Fe(t.descendant,r)})};Ze[ge.COMPOUND_SPLIT]=function(t,e){return Fe(t.subject,e)&&Fe(t.left,e)&&Fe(t.right,e)};Ze[ge.TRUE]=function(){return!0};Ze[ge.COLLECTION]=function(t,e){var r=t.value;return r.has(e)};Ze[ge.FILTER]=function(t,e){var r=t.value;return r(e)};var Bm=function(e){var r=this;if(r.length===1&&r[0].checks.length===1&&r[0].checks[0].type===ge.ID)return e.getElementById(r[0].checks[0].value).collection();var n=function(i){for(var o=0;o<r.length;o++){var s=r[o];if(Fe(s,i))return!0}return!1};return r.text()==null&&(n=function(){return!0}),e.filter(n)},Mm=function(e){for(var r=this,n=0;n<r.length;n++){var a=r[n];if(Fe(a,e))return!0}return!1},Om={matches:Mm,filter:Bm},fr=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||me(e)&&e.match(/^\s*$/)||(zt(e)?this.addQuery({checks:[{type:ge.COLLECTION,value:e.collection()}]}):We(e)?this.addQuery({checks:[{type:ge.FILTER,value:e}]}):me(e)?this.parse(e)||(this.invalid=!0):Ke("A selector must be created from a string; found "))},cr=fr.prototype;[Pm,Om].forEach(function(t){return be(cr,t)});cr.text=function(){return this.inputText};cr.size=function(){return this.length};cr.eq=function(t){return this[t]};cr.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()};cr.addQuery=function(t){this[this.length++]=t};cr.selector=cr.toString;var or={allAre:function(e){var r=new fr(e);return this.every(function(n){return r.matches(n)})},is:function(e){var r=new fr(e);return this.some(function(n){return r.matches(n)})},some:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(a)return!0}return!1},every:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(!a)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var r=this.length,n=e.length;return r!==n?!1:r===1?this[0]===e[0]:this.every(function(a){return e.hasElementWithId(a.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(r){return e.hasElementWithId(r.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var r=this.neighborhood();return e.every(function(n){return r.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var r=this;return e.every(function(n){return r.hasElementWithId(n.id())})}};or.allAreNeighbours=or.allAreNeighbors;or.has=or.contains;or.equal=or.equals=or.same;var Bt=function(e,r){return function(a,i,o,s){var l=a,u=this,f;if(l==null?f="":zt(l)&&l.length===1&&(f=l.id()),u.length===1&&f){var c=u[0]._private,h=c.traversalCache=c.traversalCache||{},v=h[r]=h[r]||[],p=wr(f),y=v[p];return y||(v[p]=e.call(u,a,i,o,s))}else return e.call(u,a,i,o,s)}},Yr={parent:function(e){var r=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var a=0;a<this.length;a++){var i=this[a],o=i._private.parent;o&&r.push(o)}return this.spawn(r,!0).filter(e)},parents:function(e){for(var r=[],n=this.parent();n.nonempty();){for(var a=0;a<n.length;a++){var i=n[a];r.push(i)}n=n.parent()}return this.spawn(r,!0).filter(e)},commonAncestors:function(e){for(var r,n=0;n<this.length;n++){var a=this[n],i=a.parents();r=r||i,r=r.intersect(i)}return r.filter(e)},orphans:function(e){return this.stdFilter(function(r){return r.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(r){return r.isChild()}).filter(e)},children:Bt(function(t){for(var e=[],r=0;r<this.length;r++)for(var n=this[r],a=n._private.children,i=0;i<a.length;i++)e.push(a[i]);return this.spawn(e,!0).filter(t)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var r=[];function n(a){for(var i=0;i<a.length;i++){var o=a[i];r.push(o),o.children().nonempty()&&n(o.children())}}return n(this.children()),this.spawn(r,!0).filter(e)}};function ao(t,e,r,n){for(var a=[],i=new Jr,o=t.cy(),s=o.hasCompoundNodes(),l=0;l<t.length;l++){var u=t[l];r?a.push(u):s&&n(a,i,u)}for(;a.length>0;){var f=a.shift();e(f),i.add(f.id()),s&&n(a,i,f)}return t}function eu(t,e,r){if(r.isParent())for(var n=r._private.children,a=0;a<n.length;a++){var i=n[a];e.has(i.id())||t.push(i)}}Yr.forEachDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ao(this,t,e,eu)};function tu(t,e,r){if(r.isChild()){var n=r._private.parent;e.has(n.id())||t.push(n)}}Yr.forEachUp=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ao(this,t,e,tu)};function Im(t,e,r){tu(t,e,r),eu(t,e,r)}Yr.forEachUpAndDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ao(this,t,e,Im)};Yr.ancestors=Yr.parents;var Tn,ru;Tn=ru={data:Pe.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Pe.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Pe.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Pe.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Pe.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Pe.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};Tn.attr=Tn.data;Tn.removeAttr=Tn.removeData;var Rm=ru,$a={};function ii(t){return function(e){var r=this;if(e===void 0&&(e=!0),r.length!==0)if(r.isNode()&&!r.removed()){for(var n=0,a=r[0],i=a._private.edges,o=0;o<i.length;o++){var s=i[o];!e&&s.isLoop()||(n+=t(a,s))}return n}else return}}be($a,{degree:ii(function(t,e){return e.source().same(e.target())?2:1}),indegree:ii(function(t,e){return e.target().same(t)?1:0}),outdegree:ii(function(t,e){return e.source().same(t)?1:0})});function Br(t,e){return function(r){for(var n,a=this.nodes(),i=0;i<a.length;i++){var o=a[i],s=o[t](r);s!==void 0&&(n===void 0||e(s,n))&&(n=s)}return n}}be($a,{minDegree:Br("degree",function(t,e){return t<e}),maxDegree:Br("degree",function(t,e){return t>e}),minIndegree:Br("indegree",function(t,e){return t<e}),maxIndegree:Br("indegree",function(t,e){return t>e}),minOutdegree:Br("outdegree",function(t,e){return t<e}),maxOutdegree:Br("outdegree",function(t,e){return t>e})});be($a,{totalDegree:function(e){for(var r=0,n=this.nodes(),a=0;a<n.length;a++)r+=n[a].degree(e);return r}});var Nt,nu,au=function(e,r,n){for(var a=0;a<e.length;a++){var i=e[a];if(!i.locked()){var o=i._private.position,s={x:r.x!=null?r.x-o.x:0,y:r.y!=null?r.y-o.y:0};i.isParent()&&!(s.x===0&&s.y===0)&&i.children().shift(s,n),i.dirtyBoundingBoxCache()}}},ns={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,r){au(e,r,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};Nt=nu={position:Pe.data(ns),silentPosition:Pe.data(be({},ns,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,r){au(e,r,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,r){if(_e(e))r?this.silentPosition(e):this.position(e);else if(We(e)){var n=e,a=this.cy();a.startBatch();for(var i=0;i<this.length;i++){var o=this[i],s=void 0;(s=n(o,i))&&(r?o.silentPosition(s):o.position(s))}a.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,r,n){var a;if(_e(e)?(a={x:he(e.x)?e.x:0,y:he(e.y)?e.y:0},n=r):me(e)&&he(r)&&(a={x:0,y:0},a[e]=r),a!=null){var i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var s=this[o];if(!(i.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))){var l=s.position(),u={x:l.x+a.x,y:l.y+a.y};n?s.silentPosition(u):s.position(u)}}i.endBatch()}return this},silentShift:function(e,r){return _e(e)?this.shift(e,!0):me(e)&&he(r)&&this.shift(e,r,!0),this},renderedPosition:function(e,r){var n=this[0],a=this.cy(),i=a.zoom(),o=a.pan(),s=_e(e)?e:void 0,l=s!==void 0||r!==void 0&&me(e);if(n&&n.isNode())if(l)for(var u=0;u<this.length;u++){var f=this[u];r!==void 0?f.position(e,(r-o[e])/i):s!==void 0&&f.position(Il(s,i,o))}else{var c=n.position();return s=Na(c,i,o),e===void 0?s:s[e]}else if(!l)return;return this},relativePosition:function(e,r){var n=this[0],a=this.cy(),i=_e(e)?e:void 0,o=i!==void 0||r!==void 0&&me(e),s=a.hasCompoundNodes();if(n&&n.isNode())if(o)for(var l=0;l<this.length;l++){var u=this[l],f=s?u.parent():null,c=f&&f.length>0,h=c;c&&(f=f[0]);var v=h?f.position():{x:0,y:0};r!==void 0?u.position(e,r+v[e]):i!==void 0&&u.position({x:i.x+v.x,y:i.y+v.y})}else{var p=n.position(),y=s?n.parent():null,w=y&&y.length>0,d=w;w&&(y=y[0]);var g=d?y.position():{x:0,y:0};return i={x:p.x-g.x,y:p.y-g.y},e===void 0?i:i[e]}else if(!o)return;return this}};Nt.modelPosition=Nt.point=Nt.position;Nt.modelPositions=Nt.points=Nt.positions;Nt.renderedPoint=Nt.renderedPosition;Nt.relativePoint=Nt.relativePosition;var Nm=nu,Ur,hr;Ur=hr={};hr.renderedBoundingBox=function(t){var e=this.boundingBox(t),r=this.cy(),n=r.zoom(),a=r.pan(),i=e.x1*n+a.x,o=e.x2*n+a.x,s=e.y1*n+a.y,l=e.y2*n+a.y;return{x1:i,x2:o,y1:s,y2:l,w:o-i,h:l-s}};hr.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(r){if(r.isParent()){var n=r._private;n.compoundBoundsClean=!1,n.bbCache=null,t||r.emitAndNotify("bounds")}}),this)};hr.updateCompoundBounds=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function r(o){if(!o.isParent())return;var s=o._private,l=o.children(),u=o.pstyle("compound-sizing-wrt-labels").value==="include",f={width:{val:o.pstyle("min-width").pfValue,left:o.pstyle("min-width-bias-left"),right:o.pstyle("min-width-bias-right")},height:{val:o.pstyle("min-height").pfValue,top:o.pstyle("min-height-bias-top"),bottom:o.pstyle("min-height-bias-bottom")}},c=l.boundingBox({includeLabels:u,includeOverlays:!1,useCache:!1}),h=s.position;(c.w===0||c.h===0)&&(c={w:o.pstyle("width").pfValue,h:o.pstyle("height").pfValue},c.x1=h.x-c.w/2,c.x2=h.x+c.w/2,c.y1=h.y-c.h/2,c.y2=h.y+c.h/2);function v(_,P,F){var k=0,R=0,x=P+F;return _>0&&x>0&&(k=P/x*_,R=F/x*_),{biasDiff:k,biasComplementDiff:R}}function p(_,P,F,k){if(F.units==="%")switch(k){case"width":return _>0?F.pfValue*_:0;case"height":return P>0?F.pfValue*P:0;case"average":return _>0&&P>0?F.pfValue*(_+P)/2:0;case"min":return _>0&&P>0?_>P?F.pfValue*P:F.pfValue*_:0;case"max":return _>0&&P>0?_>P?F.pfValue*_:F.pfValue*P:0;default:return 0}else return F.units==="px"?F.pfValue:0}var y=f.width.left.value;f.width.left.units==="px"&&f.width.val>0&&(y=y*100/f.width.val);var w=f.width.right.value;f.width.right.units==="px"&&f.width.val>0&&(w=w*100/f.width.val);var d=f.height.top.value;f.height.top.units==="px"&&f.height.val>0&&(d=d*100/f.height.val);var g=f.height.bottom.value;f.height.bottom.units==="px"&&f.height.val>0&&(g=g*100/f.height.val);var m=v(f.width.val-c.w,y,w),b=m.biasDiff,E=m.biasComplementDiff,S=v(f.height.val-c.h,d,g),C=S.biasDiff,T=S.biasComplementDiff;s.autoPadding=p(c.w,c.h,o.pstyle("padding"),o.pstyle("padding-relative-to").value),s.autoWidth=Math.max(c.w,f.width.val),h.x=(-b+c.x1+c.x2+E)/2,s.autoHeight=Math.max(c.h,f.height.val),h.y=(-C+c.y1+c.y2+T)/2}for(var n=0;n<this.length;n++){var a=this[n],i=a._private;(!i.compoundBoundsClean||t)&&(r(a),e.batching()||(i.compoundBoundsClean=!0))}return this};var Lt=function(e){return e===1/0||e===-1/0?0:e},It=function(e,r,n,a,i){a-r===0||i-n===0||r==null||n==null||a==null||i==null||(e.x1=r<e.x1?r:e.x1,e.x2=a>e.x2?a:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},yr=function(e,r){return r==null?e:It(e,r.x1,r.y1,r.x2,r.y2)},cn=function(e,r,n){return Rt(e,r,n)},ra=function(e,r,n){if(!r.cy().headless()){var a=r._private,i=a.rstyle,o=i.arrowWidth/2,s=r.pstyle(n+"-arrow-shape").value,l,u;if(s!=="none"){n==="source"?(l=i.srcX,u=i.srcY):n==="target"?(l=i.tgtX,u=i.tgtY):(l=i.midX,u=i.midY);var f=a.arrowBounds=a.arrowBounds||{},c=f[n]=f[n]||{};c.x1=l-o,c.y1=u-o,c.x2=l+o,c.y2=u+o,c.w=c.x2-c.x1,c.h=c.y2-c.y1,ca(c,1),It(e,c.x1,c.y1,c.x2,c.y2)}}},oi=function(e,r,n){if(!r.cy().headless()){var a;n?a=n+"-":a="";var i=r._private,o=i.rstyle,s=r.pstyle(a+"label").strValue;if(s){var l=r.pstyle("text-halign"),u=r.pstyle("text-valign"),f=cn(o,"labelWidth",n),c=cn(o,"labelHeight",n),h=cn(o,"labelX",n),v=cn(o,"labelY",n),p=r.pstyle(a+"text-margin-x").pfValue,y=r.pstyle(a+"text-margin-y").pfValue,w=r.isEdge(),d=r.pstyle(a+"text-rotation"),g=r.pstyle("text-outline-width").pfValue,m=r.pstyle("text-border-width").pfValue,b=m/2,E=r.pstyle("text-background-padding").pfValue,S=2,C=c,T=f,_=T/2,P=C/2,F,k,R,x;if(w)F=h-_,k=h+_,R=v-P,x=v+P;else{switch(l.value){case"left":F=h-T,k=h;break;case"center":F=h-_,k=h+_;break;case"right":F=h,k=h+T;break}switch(u.value){case"top":R=v-C,x=v;break;case"center":R=v-P,x=v+P;break;case"bottom":R=v,x=v+C;break}}F+=p-Math.max(g,b)-E-S,k+=p+Math.max(g,b)+E+S,R+=y-Math.max(g,b)-E-S,x+=y+Math.max(g,b)+E+S;var W=n||"main",O=i.labelBounds,M=O[W]=O[W]||{};M.x1=F,M.y1=R,M.x2=k,M.y2=x,M.w=k-F,M.h=x-R;var K=w&&d.strValue==="autorotate",G=d.pfValue!=null&&d.pfValue!==0;if(K||G){var H=K?cn(i.rstyle,"labelAngle",n):d.pfValue,A=Math.cos(H),z=Math.sin(H),$=(F+k)/2,I=(R+x)/2;if(!w){switch(l.value){case"left":$=k;break;case"right":$=F;break}switch(u.value){case"top":I=x;break;case"bottom":I=R;break}}var V=function(de,D){return de=de-$,D=D-I,{x:de*A-D*z+$,y:de*z+D*A+I}},Y=V(F,R),U=V(F,x),Q=V(k,R),te=V(k,x);F=Math.min(Y.x,U.x,Q.x,te.x),k=Math.max(Y.x,U.x,Q.x,te.x),R=Math.min(Y.y,U.y,Q.y,te.y),x=Math.max(Y.y,U.y,Q.y,te.y)}var ae=W+"Rot",oe=O[ae]=O[ae]||{};oe.x1=F,oe.y1=R,oe.x2=k,oe.y2=x,oe.w=k-F,oe.h=x-R,It(e,F,R,k,x),It(i.labelBounds.all,F,R,k,x)}return e}},Fm=function(e,r){var n=e._private.cy,a=n.styleEnabled(),i=n.headless(),o=Tt(),s=e._private,l=e.isNode(),u=e.isEdge(),f,c,h,v,p,y,w=s.rstyle,d=l&&a?e.pstyle("bounds-expansion").pfValue:[0],g=function(q){return q.pstyle("display").value!=="none"},m=!a||g(e)&&(!u||g(e.source())&&g(e.target()));if(m){var b=0,E=0;a&&r.includeOverlays&&(b=e.pstyle("overlay-opacity").value,b!==0&&(E=e.pstyle("overlay-padding").value));var S=0,C=0;a&&r.includeUnderlays&&(S=e.pstyle("underlay-opacity").value,S!==0&&(C=e.pstyle("underlay-padding").value));var T=Math.max(E,C),_=0,P=0;if(a&&(_=e.pstyle("width").pfValue,P=_/2),l&&r.includeNodes){var F=e.position();p=F.x,y=F.y;var k=e.outerWidth(),R=k/2,x=e.outerHeight(),W=x/2;f=p-R,c=p+R,h=y-W,v=y+W,It(o,f,h,c,v)}else if(u&&r.includeEdges)if(a&&!i){var O=e.pstyle("curve-style").strValue;if(f=Math.min(w.srcX,w.midX,w.tgtX),c=Math.max(w.srcX,w.midX,w.tgtX),h=Math.min(w.srcY,w.midY,w.tgtY),v=Math.max(w.srcY,w.midY,w.tgtY),f-=P,c+=P,h-=P,v+=P,It(o,f,h,c,v),O==="haystack"){var M=w.haystackPts;if(M&&M.length===2){if(f=M[0].x,h=M[0].y,c=M[1].x,v=M[1].y,f>c){var K=f;f=c,c=K}if(h>v){var G=h;h=v,v=G}It(o,f-P,h-P,c+P,v+P)}}else if(O==="bezier"||O==="unbundled-bezier"||O==="segments"||O==="taxi"){var H;switch(O){case"bezier":case"unbundled-bezier":H=w.bezierPts;break;case"segments":case"taxi":H=w.linePts;break}if(H!=null)for(var A=0;A<H.length;A++){var z=H[A];f=z.x-P,c=z.x+P,h=z.y-P,v=z.y+P,It(o,f,h,c,v)}}}else{var $=e.source(),I=$.position(),V=e.target(),Y=V.position();if(f=I.x,c=Y.x,h=I.y,v=Y.y,f>c){var U=f;f=c,c=U}if(h>v){var Q=h;h=v,v=Q}f-=P,c+=P,h-=P,v+=P,It(o,f,h,c,v)}if(a&&r.includeEdges&&u&&(ra(o,e,"mid-source"),ra(o,e,"mid-target"),ra(o,e,"source"),ra(o,e,"target")),a){var te=e.pstyle("ghost").value==="yes";if(te){var ae=e.pstyle("ghost-offset-x").pfValue,oe=e.pstyle("ghost-offset-y").pfValue;It(o,o.x1+ae,o.y1+oe,o.x2+ae,o.y2+oe)}}var ue=s.bodyBounds=s.bodyBounds||{};Vo(ue,o),ri(ue,d),ca(ue,1),a&&(f=o.x1,c=o.x2,h=o.y1,v=o.y2,It(o,f-T,h-T,c+T,v+T));var de=s.overlayBounds=s.overlayBounds||{};Vo(de,o),ri(de,d),ca(de,1);var D=s.labelBounds=s.labelBounds||{};D.all!=null?dp(D.all):D.all=Tt(),a&&r.includeLabels&&(r.includeMainLabels&&oi(o,e,null),u&&(r.includeSourceLabels&&oi(o,e,"source"),r.includeTargetLabels&&oi(o,e,"target")))}return o.x1=Lt(o.x1),o.y1=Lt(o.y1),o.x2=Lt(o.x2),o.y2=Lt(o.y2),o.w=Lt(o.x2-o.x1),o.h=Lt(o.y2-o.y1),o.w>0&&o.h>0&&m&&(ri(o,d),ca(o,1)),o},iu=function(e){var r=0,n=function(o){return(o?1:0)<<r++},a=0;return a+=n(e.incudeNodes),a+=n(e.includeEdges),a+=n(e.includeLabels),a+=n(e.includeMainLabels),a+=n(e.includeSourceLabels),a+=n(e.includeTargetLabels),a+=n(e.includeOverlays),a},ou=function(e){if(e.isEdge()){var r=e.source().position(),n=e.target().position(),a=function(o){return Math.round(o)};return Mg([a(r.x),a(r.y),a(n.x),a(n.y)])}else return 0},as=function(e,r){var n=e._private,a,i=e.isEdge(),o=r==null?is:iu(r),s=o===is,l=ou(e),u=n.bbCachePosKey===l,f=r.useCache&&u,c=function(y){return y._private.bbCache==null||y._private.styleDirty},h=!f||c(e)||i&&c(e.source())||c(e.target());if(h?(u||e.recalculateRenderedStyle(f),a=Fm(e,Pn),n.bbCache=a,n.bbCachePosKey=l):a=n.bbCache,!s){var v=e.isNode();a=Tt(),(r.includeNodes&&v||r.includeEdges&&!v)&&(r.includeOverlays?yr(a,n.overlayBounds):yr(a,n.bodyBounds)),r.includeLabels&&(r.includeMainLabels&&(!i||r.includeSourceLabels&&r.includeTargetLabels)?yr(a,n.labelBounds.all):(r.includeMainLabels&&yr(a,n.labelBounds.mainRot),r.includeSourceLabels&&yr(a,n.labelBounds.sourceRot),r.includeTargetLabels&&yr(a,n.labelBounds.targetRot))),a.w=a.x2-a.x1,a.h=a.y2-a.y1}return a},Pn={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,useCache:!0},is=iu(Pn),os=dt(Pn);hr.boundingBox=function(t){var e;if(this.length===1&&this[0]._private.bbCache!=null&&!this[0]._private.styleDirty&&(t===void 0||t.useCache===void 0||t.useCache===!0))t===void 0?t=Pn:t=os(t),e=as(this[0],t);else{e=Tt(),t=t||Pn;var r=os(t),n=this,a=n.cy(),i=a.styleEnabled();if(i)for(var o=0;o<n.length;o++){var s=n[o],l=s._private,u=ou(s),f=l.bbCachePosKey===u,c=r.useCache&&f&&!l.styleDirty;s.recalculateRenderedStyle(c)}this.updateCompoundBounds(!t.useCache);for(var h=0;h<n.length;h++){var v=n[h];yr(e,as(v,r))}}return e.x1=Lt(e.x1),e.y1=Lt(e.y1),e.x2=Lt(e.x2),e.y2=Lt(e.y2),e.w=Lt(e.x2-e.x1),e.h=Lt(e.y2-e.y1),e};hr.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};hr.boundingBoxAt=function(t){var e=this.nodes(),r=this.cy(),n=r.hasCompoundNodes(),a=r.collection();if(n&&(a=e.filter(function(u){return u.isParent()}),e=e.not(a)),_e(t)){var i=t;t=function(){return i}}var o=function(f,c){return f._private.bbAtOldPos=t(f,c)},s=function(f){return f._private.bbAtOldPos};r.startBatch(),e.forEach(o).silentPositions(t),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var l=cp(this.boundingBox({useCache:!1}));return e.silentPositions(s),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),r.endBatch(),l};Ur.boundingbox=Ur.bb=Ur.boundingBox;Ur.renderedBoundingbox=Ur.renderedBoundingBox;var $m=hr,pn,qn;pn=qn={};var su=function(e){e.uppercaseName=Ro(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=Ro(e.outerName),pn[e.name]=function(){var n=this[0],a=n._private,i=a.cy,o=i._private.styleEnabled;if(n)if(o){if(n.isParent())return n.updateCompoundBounds(),a[e.autoName]||0;var s=n.pstyle(e.name);switch(s.strValue){case"label":return n.recalculateRenderedStyle(),a.rstyle[e.labelName]||0;default:return s.pfValue}}else return 1},pn["outer"+e.uppercaseName]=function(){var n=this[0],a=n._private,i=a.cy,o=i._private.styleEnabled;if(n)if(o){var s=n[e.name](),l=n.pstyle("border-width").pfValue,u=2*n.padding();return s+l+u}else return 1},pn["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var a=n[e.name]();return a*this.cy().zoom()}},pn["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var a=n[e.outerName]();return a*this.cy().zoom()}}};su({name:"width"});su({name:"height"});qn.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue};qn.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()};qn.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var Vm=qn,qm=function(e,r){if(e.isEdge())return r(e)},Gm=function(e,r){if(e.isEdge()){var n=e.cy();return Na(r(e),n.zoom(),n.pan())}},Hm=function(e,r){if(e.isEdge()){var n=e.cy(),a=n.pan(),i=n.zoom();return r(e).map(function(o){return Na(o,i,a)})}},Wm=function(e){return e.renderer().getControlPoints(e)},Um=function(e){return e.renderer().getSegmentPoints(e)},Km=function(e){return e.renderer().getSourceEndpoint(e)},Zm=function(e){return e.renderer().getTargetEndpoint(e)},Ym=function(e){return e.renderer().getEdgeMidpoint(e)},ss={controlPoints:{get:Wm,mult:!0},segmentPoints:{get:Um,mult:!0},sourceEndpoint:{get:Km},targetEndpoint:{get:Zm},midpoint:{get:Ym}},Xm=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},jm=Object.keys(ss).reduce(function(t,e){var r=ss[e],n=Xm(e);return t[e]=function(){return qm(this,r.get)},r.mult?t[n]=function(){return Hm(this,r.get)}:t[n]=function(){return Gm(this,r.get)},t},{}),Qm=be({},Nm,$m,Vm,jm);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var lu=function(e,r){this.recycle(e,r)};function dn(){return!1}function na(){return!0}lu.prototype={instanceString:function(){return"event"},recycle:function(e,r){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=dn,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?na:dn):e!=null&&e.type?r=e:this.type=e,r!=null&&(this.originalEvent=r.originalEvent,this.type=r.type!=null?r.type:this.type,this.cy=r.cy,this.target=r.target,this.position=r.position,this.renderedPosition=r.renderedPosition,this.namespace=r.namespace,this.layout=r.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,a=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*a+i.x,y:n.y*a+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=na;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=na;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=na,this.stopPropagation()},isDefaultPrevented:dn,isPropagationStopped:dn,isImmediatePropagationStopped:dn};var uu=/^([^.]+)(\.(?:[^.]+))?$/,Jm=".*",fu={qualifierCompare:function(e,r){return e===r},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},ls=Object.keys(fu),ey={};function Va(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ey,e=arguments.length>1?arguments[1]:void 0,r=0;r<ls.length;r++){var n=ls[r];this[n]=t[n]||fu[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var dr=Va.prototype,cu=function(e,r,n,a,i,o,s){We(a)&&(i=a,a=null),s&&(o==null?o=s:o=be({},o,s));for(var l=Oe(n)?n:n.split(/\s+/),u=0;u<l.length;u++){var f=l[u];if(!lr(f)){var c=f.match(uu);if(c){var h=c[1],v=c[2]?c[2]:null,p=r(e,f,h,v,a,i,o);if(p===!1)break}}}},us=function(e,r){return e.addEventFields(e.context,r),new lu(r.type,r)},ty=function(e,r,n){if(vg(n)){r(e,n);return}else if(_e(n)){r(e,us(e,n));return}for(var a=Oe(n)?n:n.split(/\s+/),i=0;i<a.length;i++){var o=a[i];if(!lr(o)){var s=o.match(uu);if(s){var l=s[1],u=s[2]?s[2]:null,f=us(e,{type:l,namespace:u,target:e.context});r(e,f)}}}};dr.on=dr.addListener=function(t,e,r,n,a){return cu(this,function(i,o,s,l,u,f,c){We(f)&&i.listeners.push({event:o,callback:f,type:s,namespace:l,qualifier:u,conf:c})},t,e,r,n,a),this};dr.one=function(t,e,r,n){return this.on(t,e,r,n,{one:!0})};dr.removeListener=dr.off=function(t,e,r,n){var a=this;this.emitting!==0&&(this.listeners=Fg(this.listeners));for(var i=this.listeners,o=function(u){var f=i[u];cu(a,function(c,h,v,p,y,w){if((f.type===v||t==="*")&&(!p&&f.namespace!==".*"||f.namespace===p)&&(!y||c.qualifierCompare(f.qualifier,y))&&(!w||f.callback===w))return i.splice(u,1),!1},t,e,r,n)},s=i.length-1;s>=0;s--)o(s);return this};dr.removeAllListeners=function(){return this.removeListener("*")};dr.emit=dr.trigger=function(t,e,r){var n=this.listeners,a=n.length;return this.emitting++,Oe(e)||(e=[e]),ty(this,function(i,o){r!=null&&(n=[{event:o.event,type:o.type,namespace:o.namespace,callback:r}],a=n.length);for(var s=function(f){var c=n[f];if(c.type===o.type&&(!c.namespace||c.namespace===o.namespace||c.namespace===Jm)&&i.eventMatches(i.context,c,o)){var h=[o];e!=null&&Vg(h,e),i.beforeEmit(i.context,c,o),c.conf&&c.conf.one&&(i.listeners=i.listeners.filter(function(y){return y!==c}));var v=i.callbackContext(i.context,c,o),p=c.callback.apply(v,h);i.afterEmit(i.context,c,o),p===!1&&(o.stopPropagation(),o.preventDefault())}},l=0;l<a;l++)s(l);i.bubble(i.context)&&!o.isPropagationStopped()&&i.parent(i.context).emit(o,e)},t),this.emitting--,this};var ry={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&$n(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e.cy(),r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e},beforeEmit:function(e,r){r.conf&&r.conf.once&&r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},aa=function(e){return me(e)?new fr(e):e},du={createEmitter:function(){for(var e=0;e<this.length;e++){var r=this[e],n=r._private;n.emitter||(n.emitter=new Va(ry,r))}return this},emitter:function(){return this._private.emitter},on:function(e,r,n){for(var a=aa(r),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,a,n)}return this},removeListener:function(e,r,n){for(var a=aa(r),i=0;i<this.length;i++){var o=this[i];o.emitter().removeListener(e,a,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var r=this[e];r.emitter().removeAllListeners()}return this},one:function(e,r,n){for(var a=aa(r),i=0;i<this.length;i++){var o=this[i];o.emitter().one(e,a,n)}return this},once:function(e,r,n){for(var a=aa(r),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,a,n,{once:!0,onceCollection:this})}},emit:function(e,r){for(var n=0;n<this.length;n++){var a=this[n];a.emitter().emit(e,r)}return this},emitAndNotify:function(e,r){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,r),this}};Pe.eventAliasesOn(du);var hu={nodes:function(e){return this.filter(function(r){return r.isNode()}).filter(e)},edges:function(e){return this.filter(function(r){return r.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),r=this.spawn(),n=0;n<this.length;n++){var a=this[n];a.isNode()?e.push(a):r.push(a)}return{nodes:e,edges:r}},filter:function(e,r){if(e===void 0)return this;if(me(e)||zt(e))return new fr(e).filter(this);if(We(e)){for(var n=this.spawn(),a=this,i=0;i<a.length;i++){var o=a[i],s=r?e.apply(r,[o,i,a]):e(o,i,a);s&&n.push(o)}return n}return this.spawn()},not:function(e){if(e){me(e)&&(e=this.filter(e));for(var r=this.spawn(),n=0;n<this.length;n++){var a=this[n],i=e.has(a);i||r.push(a)}return r}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(me(e)){var r=e;return this.filter(r)}for(var n=this.spawn(),a=this,i=e,o=this.length<e.length,s=o?a:i,l=o?i:a,u=0;u<s.length;u++){var f=s[u];l.has(f)&&n.push(f)}return n},xor:function(e){var r=this._private.cy;me(e)&&(e=r.$(e));var n=this.spawn(),a=this,i=e,o=function(l,u){for(var f=0;f<l.length;f++){var c=l[f],h=c._private.data.id,v=u.hasElementWithId(h);v||n.push(c)}};return o(a,i),o(i,a),n},diff:function(e){var r=this._private.cy;me(e)&&(e=r.$(e));var n=this.spawn(),a=this.spawn(),i=this.spawn(),o=this,s=e,l=function(f,c,h){for(var v=0;v<f.length;v++){var p=f[v],y=p._private.data.id,w=c.hasElementWithId(y);w?i.merge(p):h.push(p)}};return l(o,s,n),l(s,o,a),{left:n,right:a,both:i}},add:function(e){var r=this._private.cy;if(!e)return this;if(me(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=this.spawnSelf(),i=0;i<e.length;i++){var o=e[i],s=!this.has(o);s&&a.push(o)}return a},merge:function(e){var r=this._private,n=r.cy;if(!e)return this;if(e&&me(e)){var a=e;e=n.mutableElements().filter(a)}for(var i=r.map,o=0;o<e.length;o++){var s=e[o],l=s._private.data.id,u=!i.has(l);if(u){var f=this.length++;this[f]=s,i.set(l,{ele:s,index:f})}}return this},unmergeAt:function(e){var r=this[e],n=r.id(),a=this._private,i=a.map;this[e]=void 0,i.delete(n);var o=e===this.length-1;if(this.length>1&&!o){var s=this.length-1,l=this[s],u=l._private.data.id;this[s]=void 0,this[e]=l,i.set(u,{ele:l,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var r=this._private,n=e._private.data.id,a=r.map,i=a.get(n);if(!i)return this;var o=i.index;return this.unmergeAt(o),this},unmerge:function(e){var r=this._private.cy;if(!e)return this;if(e&&me(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=0;a<e.length;a++)this.unmergeOne(e[a]);return this},unmergeBy:function(e){for(var r=this.length-1;r>=0;r--){var n=this[r];e(n)&&this.unmergeAt(r)}return this},map:function(e,r){for(var n=[],a=this,i=0;i<a.length;i++){var o=a[i],s=r?e.apply(r,[o,i,a]):e(o,i,a);n.push(s)}return n},reduce:function(e,r){for(var n=r,a=this,i=0;i<a.length;i++)n=e(n,a[i],i,a);return n},max:function(e,r){for(var n=-1/0,a,i=this,o=0;o<i.length;o++){var s=i[o],l=r?e.apply(r,[s,o,i]):e(s,o,i);l>n&&(n=l,a=s)}return{value:n,ele:a}},min:function(e,r){for(var n=1/0,a,i=this,o=0;o<i.length;o++){var s=i[o],l=r?e.apply(r,[s,o,i]):e(s,o,i);l<n&&(n=l,a=s)}return{value:n,ele:a}}},Te=hu;Te.u=Te["|"]=Te["+"]=Te.union=Te.or=Te.add;Te["\\"]=Te["!"]=Te["-"]=Te.difference=Te.relativeComplement=Te.subtract=Te.not;Te.n=Te["&"]=Te["."]=Te.and=Te.intersection=Te.intersect;Te["^"]=Te["(+)"]=Te["(-)"]=Te.symmetricDifference=Te.symdiff=Te.xor;Te.fnFilter=Te.filterFn=Te.stdFilter=Te.filter;Te.complement=Te.abscomp=Te.absoluteComplement;var ny={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},vu=function(e,r){var n=e.cy(),a=n.hasCompoundNodes();function i(f){var c=f.pstyle("z-compound-depth");return c.value==="auto"?a?f.zDepth():0:c.value==="bottom"?-1:c.value==="top"?Xi:0}var o=i(e)-i(r);if(o!==0)return o;function s(f){var c=f.pstyle("z-index-compare");return c.value==="auto"&&f.isNode()?1:0}var l=s(e)-s(r);if(l!==0)return l;var u=e.pstyle("z-index").value-r.pstyle("z-index").value;return u!==0?u:e.poolIndex()-r.poolIndex()},Sa={forEach:function(e,r){if(We(e))for(var n=this.length,a=0;a<n;a++){var i=this[a],o=r?e.apply(r,[i,a,this]):e(i,a,this);if(o===!1)break}return this},toArray:function(){for(var e=[],r=0;r<this.length;r++)e.push(this[r]);return e},slice:function(e,r){var n=[],a=this.length;r==null&&(r=a),e==null&&(e=0),e<0&&(e=a+e),r<0&&(r=a+r);for(var i=e;i>=0&&i<r&&i<a;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!We(e))return this;var r=this.toArray().sort(e);return this.spawn(r)},sortByZIndex:function(){return this.sort(vu)},zDepth:function(){var e=this[0];if(e){var r=e._private,n=r.group;if(n==="nodes"){var a=r.data.parent?e.parents().size():0;return e.isParent()?a:Xi-1}else{var i=r.source,o=r.target,s=i.zDepth(),l=o.zDepth();return Math.max(s,l,0)}}}};Sa.each=Sa.forEach;var ay=function(){var e="undefined",r=(typeof Symbol>"u"?"undefined":rt(Symbol))!=e&&rt(Symbol.iterator)!=e;r&&(Sa[Symbol.iterator]=function(){var n=this,a={value:void 0,done:!1},i=0,o=this.length;return wl({next:function(){return i<o?a.value=n[i++]:(a.value=void 0,a.done=!0),a}},Symbol.iterator,function(){return this})})};ay();var iy=dt({nodeDimensionsIncludeLabels:!1}),ha={layoutDimensions:function(e){e=iy(e);var r;if(!this.takesUpSpace())r={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();r={w:n.w,h:n.h}}else r={w:this.outerWidth(),h:this.outerHeight()};return(r.w===0||r.h===0)&&(r.w=r.h=1),r},layoutPositions:function(e,r,n){var a=this.nodes().filter(function(E){return!E.isParent()}),i=this.cy(),o=r.eles,s=function(S){return S.id()},l=En(n,s);e.emit({type:"layoutstart",layout:e}),e.animations=[];var u=function(S,C,T){var _={x:C.x1+C.w/2,y:C.y1+C.h/2},P={x:(T.x-_.x)*S,y:(T.y-_.y)*S};return{x:_.x+P.x,y:_.y+P.y}},f=r.spacingFactor&&r.spacingFactor!==1,c=function(){if(!f)return null;for(var S=Tt(),C=0;C<a.length;C++){var T=a[C],_=l(T,C);vp(S,_.x,_.y)}return S},h=c(),v=En(function(E,S){var C=l(E,S);if(f){var T=Math.abs(r.spacingFactor);C=u(T,h,C)}return r.transform!=null&&(C=r.transform(E,C)),C},s);if(r.animate){for(var p=0;p<a.length;p++){var y=a[p],w=v(y,p),d=r.animateFilter==null||r.animateFilter(y,p);if(d){var g=y.animation({position:w,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(g)}else y.position(w)}if(r.fit){var m=i.animation({fit:{boundingBox:o.boundingBoxAt(v),padding:r.padding},duration:r.animationDuration,easing:r.animationEasing});e.animations.push(m)}else if(r.zoom!==void 0&&r.pan!==void 0){var b=i.animation({zoom:r.zoom,pan:r.pan,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(b)}e.animations.forEach(function(E){return E.play()}),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),en.all(e.animations.map(function(E){return E.promise()})).then(function(){e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e})})}else a.positions(v),r.fit&&i.fit(r.eles,r.padding),r.zoom!=null&&i.zoom(r.zoom),r.pan&&i.pan(r.pan),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var r=this.cy();return r.makeLayout(be({},e,{eles:this}))}};ha.createLayout=ha.makeLayout=ha.layout;function gu(t,e,r){var n=r._private,a=n.styleCache=n.styleCache||[],i;return(i=a[t])!=null||(i=a[t]=e(r)),i}function qa(t,e){return t=wr(t),function(n){return gu(t,e,n)}}function Ga(t,e){t=wr(t);var r=function(a){return e.call(a)};return function(){var a=this[0];if(a)return gu(t,r,a)}}var ft={recalculateRenderedStyle:function(e){var r=this.cy(),n=r.renderer(),a=r.styleEnabled();return n&&a&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),r=function(i){return i._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(r)}else this.forEach(function(a){r(a),a.connectedEdges().forEach(r)});return this},updateStyle:function(e){var r=this._private.cy;if(!r.styleEnabled())return this;if(r.batching()){var n=r._private.batchStyleEles;return n.merge(this),this}var a=r.hasCompoundNodes(),i=this;e=!!(e||e===void 0),a&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=i;return e?o.emitAndNotify("style"):o.emit("style"),i.forEach(function(s){return s._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var r=0;r<this.length;r++){var n=this[r];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],a=n.cy();if(a.styleEnabled()&&n){this.cleanStyle();var i=n._private.style[e];return i??(r?a.style().getDefaultProperty(e):null)}},numericStyle:function(e){var r=this[0];if(r.cy().styleEnabled()&&r){var n=r.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var r=this[0];if(r.cy().styleEnabled()&&r)return r.pstyle(e).units},renderedStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=this[0];if(n)return r.style().getRenderedStyle(n,e)},style:function(e,r){var n=this.cy();if(!n.styleEnabled())return this;var a=!1,i=n.style();if(_e(e)){var o=e;i.applyBypass(this,o,a),this.emitAndNotify("style")}else if(me(e))if(r===void 0){var s=this[0];return s?i.getStylePropertyValue(s,e):void 0}else i.applyBypass(this,e,r,a),this.emitAndNotify("style");else if(e===void 0){var l=this[0];return l?i.getRawStyle(l):void 0}return this},removeStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=!1,a=r.style(),i=this;if(e===void 0)for(var o=0;o<i.length;o++){var s=i[o];a.removeAllBypasses(s,n)}else{e=e.split(/\s+/);for(var l=0;l<i.length;l++){var u=i[l];a.removeBypasses(u,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var r=e.hasCompoundNodes(),n=this[0];if(n){var a=n._private,i=n.pstyle("opacity").value;if(!r)return i;var o=a.data.parent?n.parents():null;if(o)for(var s=0;s<o.length;s++){var l=o[s],u=l.pstyle("opacity").value;i=u*i}return i}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0],n=r.cy().hasCompoundNodes();if(r)return n?r.effectiveOpacity()===0:r.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0];return!!r._private.backgrounding}};function si(t,e){var r=t._private,n=r.data.parent?t.parents():null;if(n)for(var a=0;a<n.length;a++){var i=n[a];if(!e(i))return!1}return!0}function io(t){var e=t.ok,r=t.edgeOkViaNode||t.ok,n=t.parentOk||t.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var i=this[0],o=a.hasCompoundNodes();if(i){var s=i._private;if(!e(i))return!1;if(i.isNode())return!o||si(i,n);var l=s.source,u=s.target;return r(l)&&(!o||si(l,r))&&(l===u||r(u)&&(!o||si(u,r)))}}}var tn=qa("eleTakesUpSpace",function(t){return t.pstyle("display").value==="element"&&t.width()!==0&&(t.isNode()?t.height()!==0:!0)});ft.takesUpSpace=Ga("takesUpSpace",io({ok:tn}));var oy=qa("eleInteractive",function(t){return t.pstyle("events").value==="yes"&&t.pstyle("visibility").value==="visible"&&tn(t)}),sy=qa("parentInteractive",function(t){return t.pstyle("visibility").value==="visible"&&tn(t)});ft.interactive=Ga("interactive",io({ok:oy,parentOk:sy,edgeOkViaNode:tn}));ft.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var ly=qa("eleVisible",function(t){return t.pstyle("visibility").value==="visible"&&t.pstyle("opacity").pfValue!==0&&tn(t)}),uy=tn;ft.visible=Ga("visible",io({ok:ly,edgeOkViaNode:uy}));ft.hidden=function(){var t=this[0];if(t)return!t.visible()};ft.isBundledBezier=Ga("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});ft.bypass=ft.css=ft.style;ft.renderedCss=ft.renderedStyle;ft.removeBypass=ft.removeCss=ft.removeStyle;ft.pstyle=ft.parsedStyle;var sr={};function fs(t){return function(){var e=arguments,r=[];if(e.length===2){var n=e[0],a=e[1];this.on(t.event,n,a)}else if(e.length===1&&We(e[0])){var i=e[0];this.on(t.event,i)}else if(e.length===0||e.length===1&&Oe(e[0])){for(var o=e.length===1?e[0]:null,s=0;s<this.length;s++){var l=this[s],u=!t.ableField||l._private[t.ableField],f=l._private[t.field]!=t.value;if(t.overrideAble){var c=t.overrideAble(l);if(c!==void 0&&(u=c,!c))return this}u&&(l._private[t.field]=t.value,f&&r.push(l))}var h=this.spawn(r);h.updateStyle(),h.emit(t.event),o&&h.emit(o)}return this}}function rn(t){sr[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var r=t.overrideField(e);if(r!==void 0)return r}return e._private[t.field]}},sr[t.on]=fs({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),sr[t.off]=fs({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}rn({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});rn({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});rn({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});rn({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});sr.deselect=sr.unselect;sr.grabbed=function(){var t=this[0];if(t)return t._private.grabbed};rn({field:"active",on:"activate",off:"unactivate"});rn({field:"pannable",on:"panify",off:"unpanify"});sr.inactive=function(){var t=this[0];if(t)return!t._private.active};var mt={},cs=function(e){return function(n){for(var a=this,i=[],o=0;o<a.length;o++){var s=a[o];if(s.isNode()){for(var l=!1,u=s.connectedEdges(),f=0;f<u.length;f++){var c=u[f],h=c.source(),v=c.target();if(e.noIncomingEdges&&v===s&&h!==s||e.noOutgoingEdges&&h===s&&v!==s){l=!0;break}}l||i.push(s)}}return this.spawn(i,!0).filter(n)}},ds=function(e){return function(r){for(var n=this,a=[],i=0;i<n.length;i++){var o=n[i];if(o.isNode())for(var s=o.connectedEdges(),l=0;l<s.length;l++){var u=s[l],f=u.source(),c=u.target();e.outgoing&&f===o?(a.push(u),a.push(c)):e.incoming&&c===o&&(a.push(u),a.push(f))}}return this.spawn(a,!0).filter(r)}},hs=function(e){return function(r){for(var n=this,a=[],i={};;){var o=e.outgoing?n.outgoers():n.incomers();if(o.length===0)break;for(var s=!1,l=0;l<o.length;l++){var u=o[l],f=u.id();i[f]||(i[f]=!0,a.push(u),s=!0)}if(!s)break;n=o}return this.spawn(a,!0).filter(r)}};mt.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null};be(mt,{roots:cs({noIncomingEdges:!0}),leaves:cs({noOutgoingEdges:!0}),outgoers:Bt(ds({outgoing:!0}),"outgoers"),successors:hs({outgoing:!0}),incomers:Bt(ds({incoming:!0}),"incomers"),predecessors:hs({incoming:!0})});be(mt,{neighborhood:Bt(function(t){for(var e=[],r=this.nodes(),n=0;n<r.length;n++)for(var a=r[n],i=a.connectedEdges(),o=0;o<i.length;o++){var s=i[o],l=s.source(),u=s.target(),f=a===l?u:l;f.length>0&&e.push(f[0]),e.push(s[0])}return this.spawn(e,!0).filter(t)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});mt.neighbourhood=mt.neighborhood;mt.closedNeighbourhood=mt.closedNeighborhood;mt.openNeighbourhood=mt.openNeighborhood;be(mt,{source:Bt(function(e){var r=this[0],n;return r&&(n=r._private.source||r.cy().collection()),n&&e?n.filter(e):n},"source"),target:Bt(function(e){var r=this[0],n;return r&&(n=r._private.target||r.cy().collection()),n&&e?n.filter(e):n},"target"),sources:vs({attr:"source"}),targets:vs({attr:"target"})});function vs(t){return function(r){for(var n=[],a=0;a<this.length;a++){var i=this[a],o=i._private[t.attr];o&&n.push(o)}return this.spawn(n,!0).filter(r)}}be(mt,{edgesWith:Bt(gs(),"edgesWith"),edgesTo:Bt(gs({thisIsSrc:!0}),"edgesTo")});function gs(t){return function(r){var n=[],a=this._private.cy,i=t||{};me(r)&&(r=a.$(r));for(var o=0;o<r.length;o++)for(var s=r[o]._private.edges,l=0;l<s.length;l++){var u=s[l],f=u._private.data,c=this.hasElementWithId(f.source)&&r.hasElementWithId(f.target),h=r.hasElementWithId(f.source)&&this.hasElementWithId(f.target),v=c||h;v&&((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!c||i.thisIsTgt&&!h)||n.push(u))}return this.spawn(n,!0)}}be(mt,{connectedEdges:Bt(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];if(a.isNode())for(var i=a._private.edges,o=0;o<i.length;o++){var s=i[o];e.push(s)}}return this.spawn(e,!0).filter(t)},"connectedEdges"),connectedNodes:Bt(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];a.isEdge()&&(e.push(a.source()[0]),e.push(a.target()[0]))}return this.spawn(e,!0).filter(t)},"connectedNodes"),parallelEdges:Bt(ps(),"parallelEdges"),codirectedEdges:Bt(ps({codirected:!0}),"codirectedEdges")});function ps(t){var e={codirected:!1};return t=be({},e,t),function(n){for(var a=[],i=this.edges(),o=t,s=0;s<i.length;s++)for(var l=i[s],u=l._private,f=u.source,c=f._private.data.id,h=u.data.target,v=f._private.edges,p=0;p<v.length;p++){var y=v[p],w=y._private.data,d=w.target,g=w.source,m=d===h&&g===c,b=c===d&&h===g;(o.codirected&&m||!o.codirected&&(m||b))&&a.push(y)}return this.spawn(a,!0).filter(n)}}be(mt,{components:function(e){var r=this,n=r.cy(),a=n.collection(),i=e==null?r.nodes():e.nodes(),o=[];e!=null&&i.empty()&&(i=e.sources());var s=function(f,c){a.merge(f),i.unmerge(f),c.merge(f)};if(i.empty())return r.spawn();var l=function(){var f=n.collection();o.push(f);var c=i[0];s(c,f),r.bfs({directed:!1,roots:c,visit:function(v){return s(v,f)}}),f.forEach(function(h){h.connectedEdges().forEach(function(v){r.has(v)&&f.has(v.source())&&f.has(v.target())&&f.merge(v)})})};do l();while(i.length>0);return o},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});mt.componentsOf=mt.components;var ct=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){Ke("A collection must have a reference to the core");return}var i=new qt,o=!1;if(!r)r=[];else if(r.length>0&&_e(r[0])&&!$n(r[0])){o=!0;for(var s=[],l=new Jr,u=0,f=r.length;u<f;u++){var c=r[u];c.data==null&&(c.data={});var h=c.data;if(h.id==null)h.id=Ml();else if(e.hasElementWithId(h.id)||l.has(h.id))continue;var v=new Ra(e,c,!1);s.push(v),l.add(h.id)}r=s}this.length=0;for(var p=0,y=r.length;p<y;p++){var w=r[p][0];if(w!=null){var d=w._private.data.id;(!n||!i.has(d))&&(n&&i.set(d,{index:this.length,ele:w}),this[this.length]=w,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(g){this.lazyMap=g},rebuildMap:function(){for(var m=this.lazyMap=new qt,b=this.eles,E=0;E<b.length;E++){var S=b[E];m.set(S.id(),{index:E,ele:S})}}},n&&(this._private.map=i),o&&!a&&this.restore()},Re=Ra.prototype=ct.prototype=Object.create(Array.prototype);Re.instanceString=function(){return"collection"};Re.spawn=function(t,e){return new ct(this.cy(),t,e)};Re.spawnSelf=function(){return this.spawn(this)};Re.cy=function(){return this._private.cy};Re.renderer=function(){return this._private.cy.renderer()};Re.element=function(){return this[0]};Re.collection=function(){return El(this)?this:new ct(this._private.cy,[this])};Re.unique=function(){return new ct(this._private.cy,this,!0)};Re.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)};Re.getElementById=function(t){t=""+t;var e=this._private.cy,r=this._private.map.get(t);return r?r.ele:new ct(e)};Re.$id=Re.getElementById;Re.poolIndex=function(){var t=this._private.cy,e=t._private.elements,r=this[0]._private.data.id;return e._private.map.get(r).index};Re.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index};Re.indexOfId=function(t){return t=""+t,this._private.map.get(t).index};Re.json=function(t){var e=this.element(),r=this.cy();if(e==null&&t)return this;if(e!=null){var n=e._private;if(_e(t)){if(r.startBatch(),t.data){e.data(t.data);var a=n.data;if(e.isEdge()){var i=!1,o={},s=t.data.source,l=t.data.target;s!=null&&s!=a.source&&(o.source=""+s,i=!0),l!=null&&l!=a.target&&(o.target=""+l,i=!0),i&&(e=e.move(o))}else{var u="parent"in t.data,f=t.data.parent;u&&(f!=null||a.parent!=null)&&f!=a.parent&&(f===void 0&&(f=null),f!=null&&(f=""+f),e=e.move({parent:f}))}}t.position&&e.position(t.position);var c=function(y,w,d){var g=t[y];g!=null&&g!==n[y]&&(g?e[w]():e[d]())};return c("removed","remove","restore"),c("selected","select","unselect"),c("selectable","selectify","unselectify"),c("locked","lock","unlock"),c("grabbable","grabify","ungrabify"),c("pannable","panify","unpanify"),t.classes!=null&&e.classes(t.classes),r.endBatch(),this}else if(t===void 0){var h={data:Vt(n.data),position:Vt(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};h.classes="";var v=0;return n.classes.forEach(function(p){return h.classes+=v++===0?p:" "+p}),h}}};Re.jsons=function(){for(var t=[],e=0;e<this.length;e++){var r=this[e],n=r.json();t.push(n)}return t};Re.clone=function(){for(var t=this.cy(),e=[],r=0;r<this.length;r++){var n=this[r],a=n.json(),i=new Ra(t,a,!1);e.push(i)}return new ct(t,e)};Re.copy=Re.clone;Re.restore=function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=r.cy(),a=n._private,i=[],o=[],s,l=0,u=r.length;l<u;l++){var f=r[l];e&&!f.removed()||(f.isNode()?i.push(f):o.push(f))}s=i.concat(o);var c,h=function(){s.splice(c,1),c--};for(c=0;c<s.length;c++){var v=s[c],p=v._private,y=p.data;if(v.clearTraversalCache(),!(!e&&!p.removed)){if(y.id===void 0)y.id=Ml();else if(he(y.id))y.id=""+y.id;else if(lr(y.id)||!me(y.id)){Ke("Can not create element with invalid string ID `"+y.id+"`"),h();continue}else if(n.hasElementWithId(y.id)){Ke("Can not create second element with ID `"+y.id+"`"),h();continue}}var w=y.id;if(v.isNode()){var d=p.position;d.x==null&&(d.x=0),d.y==null&&(d.y=0)}if(v.isEdge()){for(var g=v,m=["source","target"],b=m.length,E=!1,S=0;S<b;S++){var C=m[S],T=y[C];he(T)&&(T=y[C]=""+y[C]),T==null||T===""?(Ke("Can not create edge `"+w+"` with unspecified "+C),E=!0):n.hasElementWithId(T)||(Ke("Can not create edge `"+w+"` with nonexistant "+C+" `"+T+"`"),E=!0)}if(E){h();continue}var _=n.getElementById(y.source),P=n.getElementById(y.target);_.same(P)?_._private.edges.push(g):(_._private.edges.push(g),P._private.edges.push(g)),g._private.source=_,g._private.target=P}p.map=new qt,p.map.set(w,{ele:v,index:0}),p.removed=!1,e&&n.addToPool(v)}for(var F=0;F<i.length;F++){var k=i[F],R=k._private.data;he(R.parent)&&(R.parent=""+R.parent);var x=R.parent,W=x!=null;if(W||k._private.parent){var O=k._private.parent?n.collection().merge(k._private.parent):n.getElementById(x);if(O.empty())R.parent=void 0;else if(O[0].removed())ze("Node added with missing parent, reference to parent removed"),R.parent=void 0,k._private.parent=null;else{for(var M=!1,K=O;!K.empty();){if(k.same(K)){M=!0,R.parent=void 0;break}K=K.parent()}M||(O[0]._private.children.push(k),k._private.parent=O[0],a.hasCompoundNodes=!0)}}}if(s.length>0){for(var G=s.length===r.length?r:new ct(n,s),H=0;H<G.length;H++){var A=G[H];A.isNode()||(A.parallelEdges().clearTraversalCache(),A.source().clearTraversalCache(),A.target().clearTraversalCache())}var z;a.hasCompoundNodes?z=n.collection().merge(G).merge(G.connectedNodes()).merge(G.parent()):z=G,z.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(t),t?G.emitAndNotify("add"):e&&G.emit("add")}return r};Re.removed=function(){var t=this[0];return t&&t._private.removed};Re.inside=function(){var t=this[0];return t&&!t._private.removed};Re.remove=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=[],a={},i=r._private.cy;function o(x){for(var W=x._private.edges,O=0;O<W.length;O++)l(W[O])}function s(x){for(var W=x._private.children,O=0;O<W.length;O++)l(W[O])}function l(x){var W=a[x.id()];e&&x.removed()||W||(a[x.id()]=!0,x.isNode()?(n.push(x),o(x),s(x)):n.unshift(x))}for(var u=0,f=r.length;u<f;u++){var c=r[u];l(c)}function h(x,W){var O=x._private.edges;ur(O,W),x.clearTraversalCache()}function v(x){x.clearTraversalCache()}var p=[];p.ids={};function y(x,W){W=W[0],x=x[0];var O=x._private.children,M=x.id();ur(O,W),W._private.parent=null,p.ids[M]||(p.ids[M]=!0,p.push(x))}r.dirtyCompoundBoundsCache(),e&&i.removeFromPool(n);for(var w=0;w<n.length;w++){var d=n[w];if(d.isEdge()){var g=d.source()[0],m=d.target()[0];h(g,d),h(m,d);for(var b=d.parallelEdges(),E=0;E<b.length;E++){var S=b[E];v(S),S.isBundledBezier()&&S.dirtyBoundingBoxCache()}}else{var C=d.parent();C.length!==0&&y(C,d)}e&&(d._private.removed=!0)}var T=i._private.elements;i._private.hasCompoundNodes=!1;for(var _=0;_<T.length;_++){var P=T[_];if(P.isParent()){i._private.hasCompoundNodes=!0;break}}var F=new ct(this.cy(),n);F.size()>0&&(t?F.emitAndNotify("remove"):e&&F.emit("remove"));for(var k=0;k<p.length;k++){var R=p[k];(!e||!R.removed())&&R.updateStyle()}return F};Re.move=function(t){var e=this._private.cy,r=this,n=!1,a=!1,i=function(p){return p==null?p:""+p};if(t.source!==void 0||t.target!==void 0){var o=i(t.source),s=i(t.target),l=o!=null&&e.hasElementWithId(o),u=s!=null&&e.hasElementWithId(s);(l||u)&&(e.batch(function(){r.remove(n,a),r.emitAndNotify("moveout");for(var v=0;v<r.length;v++){var p=r[v],y=p._private.data;p.isEdge()&&(l&&(y.source=o),u&&(y.target=s))}r.restore(n,a)}),r.emitAndNotify("move"))}else if(t.parent!==void 0){var f=i(t.parent),c=f===null||e.hasElementWithId(f);if(c){var h=f===null?void 0:f;e.batch(function(){var v=r.remove(n,a);v.emitAndNotify("moveout");for(var p=0;p<r.length;p++){var y=r[p],w=y._private.data;y.isNode()&&(w.parent=h)}v.restore(n,a)}),r.emitAndNotify("move")}}return this};[Zl,xm,da,or,Yr,Rm,$a,Qm,du,hu,ny,Sa,ha,ft,sr,mt].forEach(function(t){be(Re,t)});var fy={add:function(e){var r,n=this;if(zt(e)){var a=e;if(a._private.cy===n)r=a.restore();else{for(var i=[],o=0;o<a.length;o++){var s=a[o];i.push(s.json())}r=new ct(n,i)}}else if(Oe(e)){var l=e;r=new ct(n,l)}else if(_e(e)&&(Oe(e.nodes)||Oe(e.edges))){for(var u=e,f=[],c=["nodes","edges"],h=0,v=c.length;h<v;h++){var p=c[h],y=u[p];if(Oe(y))for(var w=0,d=y.length;w<d;w++){var g=be({group:p},y[w]);f.push(g)}}r=new ct(n,f)}else{var m=e;r=new Ra(n,m).collection()}return r},remove:function(e){if(!zt(e)){if(me(e)){var r=e;e=this.$(r)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function dy(t,e,r,n){var a=4,i=.001,o=1e-7,s=10,l=11,u=1/(l-1),f=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var c=0;c<4;++c)if(typeof arguments[c]!="number"||isNaN(arguments[c])||!isFinite(arguments[c]))return!1;t=Math.min(t,1),r=Math.min(r,1),t=Math.max(t,0),r=Math.max(r,0);var h=f?new Float32Array(l):new Array(l);function v(P,F){return 1-3*F+3*P}function p(P,F){return 3*F-6*P}function y(P){return 3*P}function w(P,F,k){return((v(F,k)*P+p(F,k))*P+y(F))*P}function d(P,F,k){return 3*v(F,k)*P*P+2*p(F,k)*P+y(F)}function g(P,F){for(var k=0;k<a;++k){var R=d(F,t,r);if(R===0)return F;var x=w(F,t,r)-P;F-=x/R}return F}function m(){for(var P=0;P<l;++P)h[P]=w(P*u,t,r)}function b(P,F,k){var R,x,W=0;do x=F+(k-F)/2,R=w(x,t,r)-P,R>0?k=x:F=x;while(Math.abs(R)>o&&++W<s);return x}function E(P){for(var F=0,k=1,R=l-1;k!==R&&h[k]<=P;++k)F+=u;--k;var x=(P-h[k])/(h[k+1]-h[k]),W=F+x*u,O=d(W,t,r);return O>=i?g(P,W):O===0?W:b(P,F,F+u)}var S=!1;function C(){S=!0,(t!==e||r!==n)&&m()}var T=function(F){return S||C(),t===e&&r===n?F:F===0?0:F===1?1:w(E(F),e,n)};T.getControlPoints=function(){return[{x:t,y:e},{x:r,y:n}]};var _="generateBezier("+[t,e,r,n]+")";return T.toString=function(){return _},T}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var hy=function(){function t(n){return-n.tension*n.x-n.friction*n.v}function e(n,a,i){var o={x:n.x+i.dx*a,v:n.v+i.dv*a,tension:n.tension,friction:n.friction};return{dx:o.v,dv:t(o)}}function r(n,a){var i={dx:n.v,dv:t(n)},o=e(n,a*.5,i),s=e(n,a*.5,o),l=e(n,a,s),u=1/6*(i.dx+2*(o.dx+s.dx)+l.dx),f=1/6*(i.dv+2*(o.dv+s.dv)+l.dv);return n.x=n.x+u*a,n.v=n.v+f*a,n}return function n(a,i,o){var s={x:-1,v:0,tension:null,friction:null},l=[0],u=0,f=1/1e4,c=16/1e3,h,v,p;for(a=parseFloat(a)||500,i=parseFloat(i)||20,o=o||null,s.tension=a,s.friction=i,h=o!==null,h?(u=n(a,i),v=u/o*c):v=c;p=r(p||s,v),l.push(1+p.x),u+=16,Math.abs(p.x)>f&&Math.abs(p.v)>f;);return h?function(y){return l[y*(l.length-1)|0]}:u}}(),Ie=function(e,r,n,a){var i=dy(e,r,n,a);return function(o,s,l){return o+(s-o)*i(l)}},va={linear:function(e,r,n){return e+(r-e)*n},ease:Ie(.25,.1,.25,1),"ease-in":Ie(.42,0,1,1),"ease-out":Ie(0,0,.58,1),"ease-in-out":Ie(.42,0,.58,1),"ease-in-sine":Ie(.47,0,.745,.715),"ease-out-sine":Ie(.39,.575,.565,1),"ease-in-out-sine":Ie(.445,.05,.55,.95),"ease-in-quad":Ie(.55,.085,.68,.53),"ease-out-quad":Ie(.25,.46,.45,.94),"ease-in-out-quad":Ie(.455,.03,.515,.955),"ease-in-cubic":Ie(.55,.055,.675,.19),"ease-out-cubic":Ie(.215,.61,.355,1),"ease-in-out-cubic":Ie(.645,.045,.355,1),"ease-in-quart":Ie(.895,.03,.685,.22),"ease-out-quart":Ie(.165,.84,.44,1),"ease-in-out-quart":Ie(.77,0,.175,1),"ease-in-quint":Ie(.755,.05,.855,.06),"ease-out-quint":Ie(.23,1,.32,1),"ease-in-out-quint":Ie(.86,0,.07,1),"ease-in-expo":Ie(.95,.05,.795,.035),"ease-out-expo":Ie(.19,1,.22,1),"ease-in-out-expo":Ie(1,0,0,1),"ease-in-circ":Ie(.6,.04,.98,.335),"ease-out-circ":Ie(.075,.82,.165,1),"ease-in-out-circ":Ie(.785,.135,.15,.86),spring:function(e,r,n){if(n===0)return va.linear;var a=hy(e,r,n);return function(i,o,s){return i+(o-i)*a(s)}},"cubic-bezier":Ie};function ms(t,e,r,n,a){if(n===1||e===r)return r;var i=a(e,r,n);return t==null||((t.roundValue||t.color)&&(i=Math.round(i)),t.min!==void 0&&(i=Math.max(i,t.min)),t.max!==void 0&&(i=Math.min(i,t.max))),i}function ys(t,e){return t.pfValue!=null||t.value!=null?t.pfValue!=null&&(e==null||e.type.units!=="%")?t.pfValue:t.value:t}function Mr(t,e,r,n,a){var i=a!=null?a.type:null;r<0?r=0:r>1&&(r=1);var o=ys(t,a),s=ys(e,a);if(he(o)&&he(s))return ms(i,o,s,r,n);if(Oe(o)&&Oe(s)){for(var l=[],u=0;u<s.length;u++){var f=o[u],c=s[u];if(f!=null&&c!=null){var h=ms(i,f,c,r,n);l.push(h)}else l.push(c)}return l}}function vy(t,e,r,n){var a=!n,i=t._private,o=e._private,s=o.easing,l=o.startTime,u=n?t:t.cy(),f=u.style();if(!o.easingImpl)if(s==null)o.easingImpl=va.linear;else{var c;if(me(s)){var h=f.parse("transition-timing-function",s);c=h.value}else c=s;var v,p;me(c)?(v=c,p=[]):(v=c[1],p=c.slice(2).map(function(G){return+G})),p.length>0?(v==="spring"&&p.push(o.duration),o.easingImpl=va[v].apply(null,p)):o.easingImpl=va[v]}var y=o.easingImpl,w;if(o.duration===0?w=1:w=(r-l)/o.duration,o.applying&&(w=o.progress),w<0?w=0:w>1&&(w=1),o.delay==null){var d=o.startPosition,g=o.position;if(g&&a&&!t.locked()){var m={};hn(d.x,g.x)&&(m.x=Mr(d.x,g.x,w,y)),hn(d.y,g.y)&&(m.y=Mr(d.y,g.y,w,y)),t.position(m)}var b=o.startPan,E=o.pan,S=i.pan,C=E!=null&&n;C&&(hn(b.x,E.x)&&(S.x=Mr(b.x,E.x,w,y)),hn(b.y,E.y)&&(S.y=Mr(b.y,E.y,w,y)),t.emit("pan"));var T=o.startZoom,_=o.zoom,P=_!=null&&n;P&&(hn(T,_)&&(i.zoom=_n(i.minZoom,Mr(T,_,w,y),i.maxZoom)),t.emit("zoom")),(C||P)&&t.emit("viewport");var F=o.style;if(F&&F.length>0&&a){for(var k=0;k<F.length;k++){var R=F[k],x=R.name,W=R,O=o.startStyle[x],M=f.properties[O.name],K=Mr(O,W,w,y,M);f.overrideBypass(t,x,K)}t.emit("style")}}return o.progress=w,w}function hn(t,e){return t==null||e==null?!1:he(t)&&he(e)?!0:!!(t&&e)}function gy(t,e,r,n){var a=e._private;a.started=!0,a.startTime=r-a.progress*a.duration}function bs(t,e){var r=e._private.aniEles,n=[];function a(f,c){var h=f._private,v=h.animation.current,p=h.animation.queue,y=!1;if(v.length===0){var w=p.shift();w&&v.push(w)}for(var d=function(S){for(var C=S.length-1;C>=0;C--){var T=S[C];T()}S.splice(0,S.length)},g=v.length-1;g>=0;g--){var m=v[g],b=m._private;if(b.stopped){v.splice(g,1),b.hooked=!1,b.playing=!1,b.started=!1,d(b.frames);continue}!b.playing&&!b.applying||(b.playing&&b.applying&&(b.applying=!1),b.started||gy(f,m,t),vy(f,m,t,c),b.applying&&(b.applying=!1),d(b.frames),b.step!=null&&b.step(t),m.completed()&&(v.splice(g,1),b.hooked=!1,b.playing=!1,b.started=!1,d(b.completes)),y=!0)}return!c&&v.length===0&&p.length===0&&n.push(f),y}for(var i=!1,o=0;o<r.length;o++){var s=r[o],l=a(s);i=i||l}var u=a(e,!0);(i||u)&&(r.length>0?e.notify("draw",r):e.notify("draw")),r.unmerge(n),e.emit("step")}var py={animate:Pe.animate(),animation:Pe.animation(),animated:Pe.animated(),clearQueue:Pe.clearQueue(),delay:Pe.delay(),delayAnimation:Pe.delayAnimation(),stop:Pe.stop(),addToAnimationPool:function(e){var r=this;r.styleEnabled()&&r._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function r(){e._private.animationsRunning&&xa(function(i){bs(i,e),r()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(i,o){bs(o,e)},n.beforeRenderPriorities.animations):r()}},my={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&$n(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e,r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e}},ia=function(e){return me(e)?new fr(e):e},pu={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new Va(my,this)),this},emitter:function(){return this._private.emitter},on:function(e,r,n){return this.emitter().on(e,ia(r),n),this},removeListener:function(e,r,n){return this.emitter().removeListener(e,ia(r),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,r,n){return this.emitter().one(e,ia(r),n),this},once:function(e,r,n){return this.emitter().one(e,ia(r),n),this},emit:function(e,r){return this.emitter().emit(e,r),this},emitAndNotify:function(e,r){return this.emit(e),this.notify(e,r),this}};Pe.eventAliasesOn(pu);var Mi={png:function(e){var r=this._private.renderer;return e=e||{},r.png(e)},jpg:function(e){var r=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",r.jpg(e)}};Mi.jpeg=Mi.jpg;var ga={layout:function(e){var r=this;if(e==null){Ke("Layout options must be specified to make a layout");return}if(e.name==null){Ke("A `name` must be specified to make a layout");return}var n=e.name,a=r.extension("layout",n);if(a==null){Ke("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var i;me(e.eles)?i=r.$(e.eles):i=e.eles!=null?e.eles:r.$();var o=new a(be({},e,{cy:r,eles:i}));return o}};ga.createLayout=ga.makeLayout=ga.layout;var yy={notify:function(e,r){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var a=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();r!=null&&a.merge(r);return}if(n.notificationsEnabled){var i=this.renderer();this.destroyed()||!i||i.notify(e,r)}},notifications:function(e){var r=this._private;return e===void 0?r.notificationsEnabled:(r.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var r=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var a=e.batchNotifications[n];a.empty()?r.notify(n):r.notify(n,a)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var r=this;return this.batch(function(){for(var n=Object.keys(e),a=0;a<n.length;a++){var i=n[a],o=e[i],s=r.getElementById(i);s.data(o)}})}},by=dt({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),Oi={renderTo:function(e,r,n,a){var i=this._private.renderer;return i.renderTo(e,r,n,a),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var r=this,n=r.extension("renderer",e.name);if(n==null){Ke("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&ze("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var a=by(e);a.cy=r,r._private.renderer=new n(a),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var r=e.container();if(r)for(r._cyreg=null;r.childNodes.length>0;)r.removeChild(r.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var a=n._private;a.rscratch={},a.rstyle={},a.animation.current=[],a.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};Oi.invalidateDimensions=Oi.resize;var pa={collection:function(e,r){return me(e)?this.$(e):zt(e)?e.collection():Oe(e)?(r||(r={}),new ct(this,e,r.unique,r.removed)):new ct(this)},nodes:function(e){var r=this.$(function(n){return n.isNode()});return e?r.filter(e):r},edges:function(e){var r=this.$(function(n){return n.isEdge()});return e?r.filter(e):r},$:function(e){var r=this._private.elements;return e?r.filter(e):r.spawnSelf()},mutableElements:function(){return this._private.elements}};pa.elements=pa.filter=pa.$;var bt={},bn="t",wy="f";bt.apply=function(t){for(var e=this,r=e._private,n=r.cy,a=n.collection(),i=0;i<t.length;i++){var o=t[i],s=e.getContextMeta(o);if(!s.empty){var l=e.getContextStyle(s),u=e.applyContextStyle(s,l,o);o._private.appliedInitStyle?e.updateTransitions(o,u.diffProps):o._private.appliedInitStyle=!0;var f=e.updateStyleHints(o);f&&a.push(o)}}return a};bt.getPropertiesDiff=function(t,e){var r=this,n=r._private.propDiffs=r._private.propDiffs||{},a=t+"-"+e,i=n[a];if(i)return i;for(var o=[],s={},l=0;l<r.length;l++){var u=r[l],f=t[l]===bn,c=e[l]===bn,h=f!==c,v=u.mappedProperties.length>0;if(h||c&&v){var p=void 0;h&&v||h?p=u.properties:v&&(p=u.mappedProperties);for(var y=0;y<p.length;y++){for(var w=p[y],d=w.name,g=!1,m=l+1;m<r.length;m++){var b=r[m],E=e[m]===bn;if(E&&(g=b.properties[w.name]!=null,g))break}!s[d]&&!g&&(s[d]=!0,o.push(d))}}}return n[a]=o,o};bt.getContextMeta=function(t){for(var e=this,r="",n,a=t._private.styleCxtKey||"",i=0;i<e.length;i++){var o=e[i],s=o.selector&&o.selector.matches(t);s?r+=bn:r+=wy}return n=e.getPropertiesDiff(a,r),t._private.styleCxtKey=r,{key:r,diffPropNames:n,empty:n.length===0}};bt.getContextStyle=function(t){var e=t.key,r=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var a={_private:{key:e}},i=0;i<r.length;i++){var o=r[i],s=e[i]===bn;if(s)for(var l=0;l<o.properties.length;l++){var u=o.properties[l];a[u.name]=u}}return n[e]=a,a};bt.applyContextStyle=function(t,e,r){for(var n=this,a=t.diffPropNames,i={},o=n.types,s=0;s<a.length;s++){var l=a[s],u=e[l],f=r.pstyle(l);if(!u)if(f)f.bypass?u={name:l,deleteBypassed:!0}:u={name:l,delete:!0};else continue;if(f!==u){if(u.mapped===o.fn&&f!=null&&f.mapping!=null&&f.mapping.value===u.value){var c=f.mapping,h=c.fnValue=u.value(r);if(h===c.prevFnValue)continue}var v=i[l]={prev:f};n.applyParsedProperty(r,u),v.next=r.pstyle(l),v.next&&v.next.bypass&&(v.next=v.next.bypassed)}}return{diffProps:i}};bt.updateStyleHints=function(t){var e=t._private,r=this,n=r.propertyGroupNames,a=r.propertyGroupKeys,i=function(ae,oe,ue){return r.getPropertiesHash(ae,oe,ue)},o=e.styleKey;if(t.removed())return!1;var s=e.group==="nodes",l=t._private.style;n=Object.keys(l);for(var u=0;u<a.length;u++){var f=a[u];e.styleKeys[f]=[Fr,vn]}for(var c=function(ae,oe){return e.styleKeys[oe][0]=Cn(ae,e.styleKeys[oe][0])},h=function(ae,oe){return e.styleKeys[oe][1]=Sn(ae,e.styleKeys[oe][1])},v=function(ae,oe){c(ae,oe),h(ae,oe)},p=function(ae,oe){for(var ue=0;ue<ae.length;ue++){var de=ae.charCodeAt(ue);c(de,oe),h(de,oe)}},y=2e9,w=function(ae){return-128<ae&&ae<128&&Math.floor(ae)!==ae?y-(ae*1024|0):ae},d=0;d<n.length;d++){var g=n[d],m=l[g];if(m!=null){var b=this.properties[g],E=b.type,S=b.groupKey,C=void 0;b.hashOverride!=null?C=b.hashOverride(t,m):m.pfValue!=null&&(C=m.pfValue);var T=b.enums==null?m.value:null,_=C!=null,P=T!=null,F=_||P,k=m.units;if(E.number&&F&&!E.multiple){var R=_?C:T;v(w(R),S),!_&&k!=null&&p(k,S)}else p(m.strValue,S)}}for(var x=[Fr,vn],W=0;W<a.length;W++){var O=a[W],M=e.styleKeys[O];x[0]=Cn(M[0],x[0]),x[1]=Sn(M[1],x[1])}e.styleKey=Bg(x[0],x[1]);var K=e.styleKeys;e.labelDimsKey=tr(K.labelDimensions);var G=i(t,["label"],K.labelDimensions);if(e.labelKey=tr(G),e.labelStyleKey=tr(Xn(K.commonLabel,G)),!s){var H=i(t,["source-label"],K.labelDimensions);e.sourceLabelKey=tr(H),e.sourceLabelStyleKey=tr(Xn(K.commonLabel,H));var A=i(t,["target-label"],K.labelDimensions);e.targetLabelKey=tr(A),e.targetLabelStyleKey=tr(Xn(K.commonLabel,A))}if(s){var z=e.styleKeys,$=z.nodeBody,I=z.nodeBorder,V=z.backgroundImage,Y=z.compound,U=z.pie,Q=[$,I,V,Y,U].filter(function(te){return te!=null}).reduce(Xn,[Fr,vn]);e.nodeKey=tr(Q),e.hasPie=U!=null&&U[0]!==Fr&&U[1]!==vn}return o!==e.styleKey};bt.clearStyleHints=function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null};bt.applyParsedProperty=function(t,e){var r=this,n=e,a=t._private.style,i,o=r.types,s=r.properties[n.name].type,l=n.bypass,u=a[n.name],f=u&&u.bypass,c=t._private,h="mapping",v=function($){return $==null?null:$.pfValue!=null?$.pfValue:$.value},p=function(){var $=v(u),I=v(n);r.checkTriggers(t,n.name,$,I)};if(n&&n.name.substr(0,3)==="pie"&&ze("The pie style properties are deprecated.  Create charts using background images instead."),e.name==="curve-style"&&t.isEdge()&&(e.value!=="bezier"&&t.isLoop()||e.value==="haystack"&&(t.source().isParent()||t.target().isParent()))&&(n=e=this.parse(e.name,"bezier",l)),n.delete)return a[n.name]=void 0,p(),!0;if(n.deleteBypassed)return u?u.bypass?(u.bypassed=void 0,p(),!0):!1:(p(),!0);if(n.deleteBypass)return u?u.bypass?(a[n.name]=u.bypassed,p(),!0):!1:(p(),!0);var y=function(){ze("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case o.mapData:{for(var w=n.field.split("."),d=c.data,g=0;g<w.length&&d;g++){var m=w[g];d=d[m]}if(d==null)return y(),!1;var b;if(he(d)){var E=n.fieldMax-n.fieldMin;E===0?b=0:b=(d-n.fieldMin)/E}else return ze("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+d+"` for `"+t.id()+"` is non-numeric)"),!1;if(b<0?b=0:b>1&&(b=1),s.color){var S=n.valueMin[0],C=n.valueMax[0],T=n.valueMin[1],_=n.valueMax[1],P=n.valueMin[2],F=n.valueMax[2],k=n.valueMin[3]==null?1:n.valueMin[3],R=n.valueMax[3]==null?1:n.valueMax[3],x=[Math.round(S+(C-S)*b),Math.round(T+(_-T)*b),Math.round(P+(F-P)*b),Math.round(k+(R-k)*b)];i={bypass:n.bypass,name:n.name,value:x,strValue:"rgb("+x[0]+", "+x[1]+", "+x[2]+")"}}else if(s.number){var W=n.valueMin+(n.valueMax-n.valueMin)*b;i=this.parse(n.name,W,n.bypass,h)}else return!1;if(!i)return y(),!1;i.mapping=n,n=i;break}case o.data:{for(var O=n.field.split("."),M=c.data,K=0;K<O.length&&M;K++){var G=O[K];M=M[G]}if(M!=null&&(i=this.parse(n.name,M,n.bypass,h)),!i)return y(),!1;i.mapping=n,n=i;break}case o.fn:{var H=n.value,A=n.fnValue!=null?n.fnValue:H(t);if(n.prevFnValue=A,A==null)return ze("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+t.id()+"` is null)"),!1;if(i=this.parse(n.name,A,n.bypass,h),!i)return ze("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+t.id()+"` is invalid)"),!1;i.mapping=Vt(n),n=i;break}case void 0:break;default:return!1}return l?(f?n.bypassed=u.bypassed:n.bypassed=u,a[n.name]=n):f?u.bypassed=n:a[n.name]=n,p(),!0};bt.cleanElements=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var a=n._private.style,i=Object.keys(a),o=0;o<i.length;o++){var s=i[o],l=a[s];l!=null&&(l.bypass?l.bypassed=null:a[s]=null)}}};bt.update=function(){var t=this._private.cy,e=t.mutableElements();e.updateStyle()};bt.updateTransitions=function(t,e){var r=this,n=t._private,a=t.pstyle("transition-property").value,i=t.pstyle("transition-duration").pfValue,o=t.pstyle("transition-delay").pfValue;if(a.length>0&&i>0){for(var s={},l=!1,u=0;u<a.length;u++){var f=a[u],c=t.pstyle(f),h=e[f];if(h){var v=h.prev,p=v,y=h.next!=null?h.next:c,w=!1,d=void 0,g=1e-6;p&&(he(p.pfValue)&&he(y.pfValue)?(w=y.pfValue-p.pfValue,d=p.pfValue+g*w):he(p.value)&&he(y.value)?(w=y.value-p.value,d=p.value+g*w):Oe(p.value)&&Oe(y.value)&&(w=p.value[0]!==y.value[0]||p.value[1]!==y.value[1]||p.value[2]!==y.value[2],d=p.strValue),w&&(s[f]=y.strValue,this.applyBypass(t,f,d),l=!0))}}if(!l)return;n.transitioning=!0,new en(function(m){o>0?t.delayAnimation(o).play().promise().then(m):m()}).then(function(){return t.animation({style:s,duration:i,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1)};bt.checkTrigger=function(t,e,r,n,a,i){var o=this.properties[e],s=a(o);s!=null&&s(r,n)&&i(o)};bt.checkZOrderTrigger=function(t,e,r,n){var a=this;this.checkTrigger(t,e,r,n,function(i){return i.triggersZOrder},function(){a._private.cy.notify("zorder",t)})};bt.checkBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBounds},function(a){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache(),a.triggersBoundsOfParallelBeziers&&(e==="curve-style"&&(r==="bezier"||n==="bezier")||e==="display"&&(r==="none"||n==="none"))&&t.parallelEdges().forEach(function(i){i.isBundledBezier()&&i.dirtyBoundingBoxCache()})})};bt.checkTriggers=function(t,e,r,n){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,r,n),this.checkBoundsTrigger(t,e,r,n)};var Gn={};Gn.applyBypass=function(t,e,r,n){var a=this,i=[],o=!0;if(e==="*"||e==="**"){if(r!==void 0)for(var s=0;s<a.properties.length;s++){var l=a.properties[s],u=l.name,f=this.parse(u,r,!0);f&&i.push(f)}}else if(me(e)){var c=this.parse(e,r,!0);c&&i.push(c)}else if(_e(e)){var h=e;n=r;for(var v=Object.keys(h),p=0;p<v.length;p++){var y=v[p],w=h[y];if(w===void 0&&(w=h[Ia(y)]),w!==void 0){var d=this.parse(y,w,!0);d&&i.push(d)}}}else return!1;if(i.length===0)return!1;for(var g=!1,m=0;m<t.length;m++){for(var b=t[m],E={},S=void 0,C=0;C<i.length;C++){var T=i[C];if(n){var _=b.pstyle(T.name);S=E[T.name]={prev:_}}g=this.applyParsedProperty(b,Vt(T))||g,n&&(S.next=b.pstyle(T.name))}g&&this.updateStyleHints(b),n&&this.updateTransitions(b,E,o)}return g};Gn.overrideBypass=function(t,e,r){e=Yi(e);for(var n=0;n<t.length;n++){var a=t[n],i=a._private.style[e],o=this.properties[e].type,s=o.color,l=o.mutiple,u=i?i.pfValue!=null?i.pfValue:i.value:null;!i||!i.bypass?this.applyBypass(a,e,r):(i.value=r,i.pfValue!=null&&(i.pfValue=r),s?i.strValue="rgb("+r.join(",")+")":l?i.strValue=r.join(" "):i.strValue=""+r,this.updateStyleHints(a)),this.checkTriggers(a,e,u,r)}};Gn.removeAllBypasses=function(t,e){return this.removeBypasses(t,this.propertyNames,e)};Gn.removeBypasses=function(t,e,r){for(var n=!0,a=0;a<t.length;a++){for(var i=t[a],o={},s=0;s<e.length;s++){var l=e[s],u=this.properties[l],f=i.pstyle(u.name);if(!(!f||!f.bypass)){var c="",h=this.parse(l,c,!0),v=o[u.name]={prev:f};this.applyParsedProperty(i,h),v.next=i.pstyle(u.name)}}this.updateStyleHints(i),r&&this.updateTransitions(i,o,n)}};var oo={};oo.getEmSizeInPixels=function(){var t=this.containerCss("font-size");return t!=null?parseFloat(t):1};oo.containerCss=function(t){var e=this._private.cy,r=e.container();if(Ve&&r&&Ve.getComputedStyle)return Ve.getComputedStyle(r).getPropertyValue(t)};var Ht={};Ht.getRenderedStyle=function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)};Ht.getRawStyle=function(t,e){var r=this;if(t=t[0],t){for(var n={},a=0;a<r.properties.length;a++){var i=r.properties[a],o=r.getStylePropertyValue(t,i.name,e);o!=null&&(n[i.name]=o,n[Ia(i.name)]=o)}return n}};Ht.getIndexedStyle=function(t,e,r,n){var a=t.pstyle(e)[r][n];return a??t.cy().style().getDefaultProperty(e)[r][0]};Ht.getStylePropertyValue=function(t,e,r){var n=this;if(t=t[0],t){var a=n.properties[e];a.alias&&(a=a.pointsTo);var i=a.type,o=t.pstyle(a.name);if(o){var s=o.value,l=o.units,u=o.strValue;if(r&&i.number&&s!=null&&he(s)){var f=t.cy().zoom(),c=function(w){return w*f},h=function(w,d){return c(w)+d},v=Oe(s),p=v?l.every(function(y){return y!=null}):l!=null;return p?v?s.map(function(y,w){return h(y,l[w])}).join(" "):h(s,l):v?s.map(function(y){return me(y)?y:""+c(y)}).join(" "):""+c(s)}else if(u!=null)return u}return null}};Ht.getAnimationStartStyle=function(t,e){for(var r={},n=0;n<e.length;n++){var a=e[n],i=a.name,o=t.pstyle(i);o!==void 0&&(_e(o)?o=this.parse(i,o.strValue):o=this.parse(i,o)),o&&(r[i]=o)}return r};Ht.getPropsList=function(t){var e=this,r=[],n=t,a=e.properties;if(n)for(var i=Object.keys(n),o=0;o<i.length;o++){var s=i[o],l=n[s],u=a[s]||a[Yi(s)],f=this.parse(u.name,l);f&&r.push(f)}return r};Ht.getNonDefaultPropertiesHash=function(t,e,r){var n=r.slice(),a,i,o,s,l,u;for(l=0;l<e.length;l++)if(a=e[l],i=t.pstyle(a,!1),i!=null)if(i.pfValue!=null)n[0]=Cn(s,n[0]),n[1]=Sn(s,n[1]);else for(o=i.strValue,u=0;u<o.length;u++)s=o.charCodeAt(u),n[0]=Cn(s,n[0]),n[1]=Sn(s,n[1]);return n};Ht.getPropertiesHash=Ht.getNonDefaultPropertiesHash;var Ha={};Ha.appendFromJson=function(t){for(var e=this,r=0;r<t.length;r++){var n=t[r],a=n.selector,i=n.style||n.css,o=Object.keys(i);e.selector(a);for(var s=0;s<o.length;s++){var l=o[s],u=i[l];e.css(l,u)}}return e};Ha.fromJson=function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e};Ha.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var r=this[e],n=r.selector,a=r.properties,i={},o=0;o<a.length;o++){var s=a[o];i[s.name]=s.strValue}t.push({selector:n?n.toString():"core",style:i})}return t};var so={};so.appendFromString=function(t){var e=this,r=this,n=""+t,a,i,o;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function s(){n.length>a.length?n=n.substr(a.length):n=""}function l(){i.length>o.length?i=i.substr(o.length):i=""}for(;;){var u=n.match(/^\s*$/);if(u)break;var f=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!f){ze("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}a=f[0];var c=f[1];if(c!=="core"){var h=new fr(c);if(h.invalid){ze("Skipping parsing of block: Invalid selector found in string stylesheet: "+c),s();continue}}var v=f[2],p=!1;i=v;for(var y=[];;){var w=i.match(/^\s*$/);if(w)break;var d=i.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!d){ze("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+v),p=!0;break}o=d[0];var g=d[1],m=d[2],b=e.properties[g];if(!b){ze("Skipping property: Invalid property name in: "+o),l();continue}var E=r.parse(g,m);if(!E){ze("Skipping property: Invalid property definition in: "+o),l();continue}y.push({name:g,val:m}),l()}if(p){s();break}r.selector(c);for(var S=0;S<y.length;S++){var C=y[S];r.css(C.name,C.val)}s()}return r};so.fromString=function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e};var ut={};(function(){var t=tt,e=wg,r=Eg,n=Cg,a=Sg,i=function(Q){return"^"+Q+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},o=function(Q){var te=t+"|\\w+|"+e+"|"+r+"|"+n+"|"+a;return"^"+Q+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+te+")\\s*\\,\\s*("+te+")\\)$"},s=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];ut.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:i("data")},layoutData:{mapping:!0,regex:i("layoutData")},scratch:{mapping:!0,regex:i("scratch")},mapData:{mapping:!0,regex:o("mapData")},mapLayoutData:{mapping:!0,regex:o("mapLayoutData")},mapScratch:{mapping:!0,regex:o("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(Q,te){switch(Q.length){case 2:return te[0]!=="deg"&&te[0]!=="rad"&&te[1]!=="deg"&&te[1]!=="rad";case 1:return me(Q[0])||te[0]==="deg"||te[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(Q){var te=Q.length;return te===1||te===2||te===4}}};var l={zeroNonZero:function(Q,te){return(Q==null||te==null)&&Q!==te||Q==0&&te!=0?!0:Q!=0&&te==0},any:function(Q,te){return Q!=te},emptyNonEmpty:function(Q,te){var ae=lr(Q),oe=lr(te);return ae&&!oe||!ae&&oe}},u=ut.types,f=[{name:"label",type:u.text,triggersBounds:l.any,triggersZOrder:l.emptyNonEmpty},{name:"text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any}],c=[{name:"source-label",type:u.text,triggersBounds:l.any},{name:"source-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"source-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-offset",type:u.size,triggersBounds:l.any}],h=[{name:"target-label",type:u.text,triggersBounds:l.any},{name:"target-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"target-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-offset",type:u.size,triggersBounds:l.any}],v=[{name:"font-family",type:u.fontFamily,triggersBounds:l.any},{name:"font-style",type:u.fontStyle,triggersBounds:l.any},{name:"font-weight",type:u.fontWeight,triggersBounds:l.any},{name:"font-size",type:u.size,triggersBounds:l.any},{name:"text-transform",type:u.textTransform,triggersBounds:l.any},{name:"text-wrap",type:u.textWrap,triggersBounds:l.any},{name:"text-overflow-wrap",type:u.textOverflowWrap,triggersBounds:l.any},{name:"text-max-width",type:u.size,triggersBounds:l.any},{name:"text-outline-width",type:u.size,triggersBounds:l.any},{name:"line-height",type:u.positiveNumber,triggersBounds:l.any}],p=[{name:"text-valign",type:u.valign,triggersBounds:l.any},{name:"text-halign",type:u.halign,triggersBounds:l.any},{name:"color",type:u.color},{name:"text-outline-color",type:u.color},{name:"text-outline-opacity",type:u.zeroOneNumber},{name:"text-background-color",type:u.color},{name:"text-background-opacity",type:u.zeroOneNumber},{name:"text-background-padding",type:u.size,triggersBounds:l.any},{name:"text-border-opacity",type:u.zeroOneNumber},{name:"text-border-color",type:u.color},{name:"text-border-width",type:u.size,triggersBounds:l.any},{name:"text-border-style",type:u.borderStyle,triggersBounds:l.any},{name:"text-background-shape",type:u.textBackgroundShape,triggersBounds:l.any},{name:"text-justification",type:u.justification}],y=[{name:"events",type:u.bool},{name:"text-events",type:u.bool}],w=[{name:"display",type:u.display,triggersZOrder:l.any,triggersBounds:l.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:u.visibility,triggersZOrder:l.any},{name:"opacity",type:u.zeroOneNumber,triggersZOrder:l.zeroNonZero},{name:"text-opacity",type:u.zeroOneNumber},{name:"min-zoomed-font-size",type:u.size},{name:"z-compound-depth",type:u.zCompoundDepth,triggersZOrder:l.any},{name:"z-index-compare",type:u.zIndexCompare,triggersZOrder:l.any},{name:"z-index",type:u.nonNegativeInt,triggersZOrder:l.any}],d=[{name:"overlay-padding",type:u.size,triggersBounds:l.any},{name:"overlay-color",type:u.color},{name:"overlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"overlay-shape",type:u.overlayShape,triggersBounds:l.any}],g=[{name:"underlay-padding",type:u.size,triggersBounds:l.any},{name:"underlay-color",type:u.color},{name:"underlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"underlay-shape",type:u.overlayShape,triggersBounds:l.any}],m=[{name:"transition-property",type:u.propList},{name:"transition-duration",type:u.time},{name:"transition-delay",type:u.time},{name:"transition-timing-function",type:u.easing}],b=function(Q,te){return te.value==="label"?-Q.poolIndex():te.pfValue},E=[{name:"height",type:u.nodeSize,triggersBounds:l.any,hashOverride:b},{name:"width",type:u.nodeSize,triggersBounds:l.any,hashOverride:b},{name:"shape",type:u.nodeShape,triggersBounds:l.any},{name:"shape-polygon-points",type:u.polygonPointList,triggersBounds:l.any},{name:"background-color",type:u.color},{name:"background-fill",type:u.fill},{name:"background-opacity",type:u.zeroOneNumber},{name:"background-blacken",type:u.nOneOneNumber},{name:"background-gradient-stop-colors",type:u.colors},{name:"background-gradient-stop-positions",type:u.percentages},{name:"background-gradient-direction",type:u.gradientDirection},{name:"padding",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"padding-relative-to",type:u.paddingRelativeTo,triggersBounds:l.any},{name:"bounds-expansion",type:u.boundsExpansion,triggersBounds:l.any}],S=[{name:"border-color",type:u.color},{name:"border-opacity",type:u.zeroOneNumber},{name:"border-width",type:u.size,triggersBounds:l.any},{name:"border-style",type:u.borderStyle}],C=[{name:"background-image",type:u.urls},{name:"background-image-crossorigin",type:u.bgCrossOrigin},{name:"background-image-opacity",type:u.zeroOneNumbers},{name:"background-image-containment",type:u.bgContainment},{name:"background-image-smoothing",type:u.bools},{name:"background-position-x",type:u.bgPos},{name:"background-position-y",type:u.bgPos},{name:"background-width-relative-to",type:u.bgRelativeTo},{name:"background-height-relative-to",type:u.bgRelativeTo},{name:"background-repeat",type:u.bgRepeat},{name:"background-fit",type:u.bgFit},{name:"background-clip",type:u.bgClip},{name:"background-width",type:u.bgWH},{name:"background-height",type:u.bgWH},{name:"background-offset-x",type:u.bgPos},{name:"background-offset-y",type:u.bgPos}],T=[{name:"position",type:u.position,triggersBounds:l.any},{name:"compound-sizing-wrt-labels",type:u.compoundIncludeLabels,triggersBounds:l.any},{name:"min-width",type:u.size,triggersBounds:l.any},{name:"min-width-bias-left",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-width-bias-right",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height",type:u.size,triggersBounds:l.any},{name:"min-height-bias-top",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height-bias-bottom",type:u.sizeMaybePercent,triggersBounds:l.any}],_=[{name:"line-style",type:u.lineStyle},{name:"line-color",type:u.color},{name:"line-fill",type:u.fill},{name:"line-cap",type:u.lineCap},{name:"line-opacity",type:u.zeroOneNumber},{name:"line-dash-pattern",type:u.numbers},{name:"line-dash-offset",type:u.number},{name:"line-gradient-stop-colors",type:u.colors},{name:"line-gradient-stop-positions",type:u.percentages},{name:"curve-style",type:u.curveStyle,triggersBounds:l.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:u.zeroOneNumber,triggersBounds:l.any},{name:"source-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"target-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"control-point-step-size",type:u.size,triggersBounds:l.any},{name:"control-point-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"control-point-weights",type:u.numbers,triggersBounds:l.any},{name:"segment-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"segment-weights",type:u.numbers,triggersBounds:l.any},{name:"taxi-turn",type:u.bidirectionalSizeMaybePercent,triggersBounds:l.any},{name:"taxi-turn-min-distance",type:u.size,triggersBounds:l.any},{name:"taxi-direction",type:u.axisDirection,triggersBounds:l.any},{name:"edge-distances",type:u.edgeDistances,triggersBounds:l.any},{name:"arrow-scale",type:u.positiveNumber,triggersBounds:l.any},{name:"loop-direction",type:u.angle,triggersBounds:l.any},{name:"loop-sweep",type:u.angle,triggersBounds:l.any},{name:"source-distance-from-node",type:u.size,triggersBounds:l.any},{name:"target-distance-from-node",type:u.size,triggersBounds:l.any}],P=[{name:"ghost",type:u.bool,triggersBounds:l.any},{name:"ghost-offset-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-offset-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-opacity",type:u.zeroOneNumber}],F=[{name:"selection-box-color",type:u.color},{name:"selection-box-opacity",type:u.zeroOneNumber},{name:"selection-box-border-color",type:u.color},{name:"selection-box-border-width",type:u.size},{name:"active-bg-color",type:u.color},{name:"active-bg-opacity",type:u.zeroOneNumber},{name:"active-bg-size",type:u.size},{name:"outside-texture-bg-color",type:u.color},{name:"outside-texture-bg-opacity",type:u.zeroOneNumber}],k=[];ut.pieBackgroundN=16,k.push({name:"pie-size",type:u.sizeMaybePercent});for(var R=1;R<=ut.pieBackgroundN;R++)k.push({name:"pie-"+R+"-background-color",type:u.color}),k.push({name:"pie-"+R+"-background-size",type:u.percent}),k.push({name:"pie-"+R+"-background-opacity",type:u.zeroOneNumber});var x=[],W=ut.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:u.arrowShape,triggersBounds:l.any},{name:"arrow-color",type:u.color},{name:"arrow-fill",type:u.arrowFill}].forEach(function(U){W.forEach(function(Q){var te=Q+"-"+U.name,ae=U.type,oe=U.triggersBounds;x.push({name:te,type:ae,triggersBounds:oe})})},{});var O=ut.properties=[].concat(y,m,w,d,g,P,p,v,f,c,h,E,S,C,k,T,_,x,F),M=ut.propertyGroups={behavior:y,transition:m,visibility:w,overlay:d,underlay:g,ghost:P,commonLabel:p,labelDimensions:v,mainLabel:f,sourceLabel:c,targetLabel:h,nodeBody:E,nodeBorder:S,backgroundImage:C,pie:k,compound:T,edgeLine:_,edgeArrow:x,core:F},K=ut.propertyGroupNames={},G=ut.propertyGroupKeys=Object.keys(M);G.forEach(function(U){K[U]=M[U].map(function(Q){return Q.name}),M[U].forEach(function(Q){return Q.groupKey=U})});var H=ut.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];ut.propertyNames=O.map(function(U){return U.name});for(var A=0;A<O.length;A++){var z=O[A];O[z.name]=z}for(var $=0;$<H.length;$++){var I=H[$],V=O[I.pointsTo],Y={name:I.name,alias:!0,pointsTo:V};O.push(Y),O[I.name]=Y}})();ut.getDefaultProperty=function(t){return this.getDefaultProperties()[t]};ut.getDefaultProperties=function(){var t=this._private;if(t.defaultProperties!=null)return t.defaultProperties;for(var e=be({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(l,u){for(var f=1;f<=ut.pieBackgroundN;f++){var c=u.name.replace("{{i}}",f),h=u.value;l[c]=h}return l},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(l,u){return ut.arrowPrefixes.forEach(function(f){var c=f+"-"+u.name,h=u.value;l[c]=h}),l},{})),r={},n=0;n<this.properties.length;n++){var a=this.properties[n];if(!a.pointsTo){var i=a.name,o=e[i],s=this.parse(i,o);r[i]=s}}return t.defaultProperties=r,t.defaultProperties};ut.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Wa={};Wa.parse=function(t,e,r,n){var a=this;if(We(e))return a.parseImplWarn(t,e,r,n);var i=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,o=r?"t":"f",s=""+e,l=Al(t,s,o,i),u=a.propCache=a.propCache||[],f;return(f=u[l])||(f=u[l]=a.parseImplWarn(t,e,r,n)),(r||n==="mapping")&&(f=Vt(f),f&&(f.value=Vt(f.value))),f};Wa.parseImplWarn=function(t,e,r,n){var a=this.parseImpl(t,e,r,n);return!a&&e!=null&&ze("The style property `".concat(t,": ").concat(e,"` is invalid")),a&&(a.name==="width"||a.name==="height")&&e==="label"&&ze("The style value of `label` is deprecated for `"+a.name+"`"),a};Wa.parseImpl=function(t,e,r,n){var a=this;t=Yi(t);var i=a.properties[t],o=e,s=a.types;if(!i||e===void 0)return null;i.alias&&(i=i.pointsTo,t=i.name);var l=me(e);l&&(e=e.trim());var u=i.type;if(!u)return null;if(r&&(e===""||e===null))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(We(e))return{name:t,value:e,strValue:"fn",mapped:s.fn,bypass:r};var f,c;if(!(!l||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(f=new RegExp(s.data.regex).exec(e))){if(r)return!1;var h=s.data;return{name:t,value:f,strValue:""+e,mapped:h,field:f[1],bypass:r}}else if(e.length>=10&&e[0]==="m"&&(c=new RegExp(s.mapData.regex).exec(e))){if(r||u.multiple)return!1;var v=s.mapData;if(!(u.color||u.number))return!1;var p=this.parse(t,c[4]);if(!p||p.mapped)return!1;var y=this.parse(t,c[5]);if(!y||y.mapped)return!1;if(p.pfValue===y.pfValue||p.strValue===y.strValue)return ze("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+p.strValue+"`"),this.parse(t,p.strValue);if(u.color){var w=p.value,d=y.value,g=w[0]===d[0]&&w[1]===d[1]&&w[2]===d[2]&&(w[3]===d[3]||(w[3]==null||w[3]===1)&&(d[3]==null||d[3]===1));if(g)return!1}return{name:t,value:c,strValue:""+e,mapped:v,field:c[1],fieldMin:parseFloat(c[2]),fieldMax:parseFloat(c[3]),valueMin:p.value,valueMax:y.value,bypass:r}}}if(u.multiple&&n!=="multiple"){var m;if(l?m=e.split(/\s+/):Oe(e)?m=e:m=[e],u.evenMultiple&&m.length%2!==0)return null;for(var b=[],E=[],S=[],C="",T=!1,_=0;_<m.length;_++){var P=a.parse(t,m[_],r,"multiple");T=T||me(P.value),b.push(P.value),S.push(P.pfValue!=null?P.pfValue:P.value),E.push(P.units),C+=(_>0?" ":"")+P.strValue}return u.validate&&!u.validate(b,E)?null:u.singleEnum&&T?b.length===1&&me(b[0])?{name:t,value:b[0],strValue:b[0],bypass:r}:null:{name:t,value:b,pfValue:S,strValue:C,bypass:r,units:E}}var F=function(){for(var te=0;te<u.enums.length;te++){var ae=u.enums[te];if(ae===e)return{name:t,value:e,strValue:""+e,bypass:r}}return null};if(u.number){var k,R="px";if(u.units&&(k=u.units),u.implicitUnits&&(R=u.implicitUnits),!u.unitless)if(l){var x="px|em"+(u.allowPercent?"|\\%":"");k&&(x=k);var W=e.match("^("+tt+")("+x+")?$");W&&(e=W[1],k=W[2]||R)}else(!k||u.implicitUnits)&&(k=R);if(e=parseFloat(e),isNaN(e)&&u.enums===void 0)return null;if(isNaN(e)&&u.enums!==void 0)return e=o,F();if(u.integer&&!hg(e)||u.min!==void 0&&(e<u.min||u.strictMin&&e===u.min)||u.max!==void 0&&(e>u.max||u.strictMax&&e===u.max))return null;var O={name:t,value:e,strValue:""+e+(k||""),units:k,bypass:r};return u.unitless||k!=="px"&&k!=="em"?O.pfValue=e:O.pfValue=k==="px"||!k?e:this.getEmSizeInPixels()*e,(k==="ms"||k==="s")&&(O.pfValue=k==="ms"?e:1e3*e),(k==="deg"||k==="rad")&&(O.pfValue=k==="rad"?e:lp(e)),k==="%"&&(O.pfValue=e/100),O}else if(u.propList){var M=[],K=""+e;if(K!=="none"){for(var G=K.split(/\s*,\s*|\s+/),H=0;H<G.length;H++){var A=G[H].trim();a.properties[A]?M.push(A):ze("`"+A+"` is not a valid property name")}if(M.length===0)return null}return{name:t,value:M,strValue:M.length===0?"none":M.join(" "),bypass:r}}else if(u.color){var z=zg(e);return z?{name:t,value:z,pfValue:z,strValue:"rgb("+z[0]+","+z[1]+","+z[2]+")",bypass:r}:null}else if(u.regex||u.regexes){if(u.enums){var $=F();if($)return $}for(var I=u.regexes?u.regexes:[u.regex],V=0;V<I.length;V++){var Y=new RegExp(I[V]),U=Y.exec(e);if(U)return{name:t,value:u.singleRegexMatchValue?U[1]:U,strValue:""+e,bypass:r}}return null}else return u.string?{name:t,value:""+e,strValue:""+e,bypass:r}:u.enums?F():null};var pt=function t(e){if(!(this instanceof t))return new t(e);if(!Zi(e)){Ke("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},yt=pt.prototype;yt.instanceString=function(){return"style"};yt.clear=function(){for(var t=this._private,e=t.cy,r=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(r,!0),r.forEach(function(a){var i=a[0]._private;i.styleDirty=!0,i.appliedInitStyle=!1}),this};yt.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};yt.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)};yt.selector=function(t){var e=t==="core"?null:new fr(t),r=this.length++;return this[r]={selector:e,properties:[],mappedProperties:[],index:r},this};yt.css=function(){var t=this,e=arguments;if(e.length===1)for(var r=e[0],n=0;n<t.properties.length;n++){var a=t.properties[n],i=r[a.name];i===void 0&&(i=r[Ia(a.name)]),i!==void 0&&this.cssRule(a.name,i)}else e.length===2&&this.cssRule(e[0],e[1]);return this};yt.style=yt.css;yt.cssRule=function(t,e){var r=this.parse(t,e);if(r){var n=this.length-1;this[n].properties.push(r),this[n].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.mapped&&this[n].mappedProperties.push(r);var a=!this[n].selector;a&&(this._private.coreStyle[r.name]=r)}return this};yt.append=function(t){return Cl(t)?t.appendToStyle(this):Oe(t)?this.appendFromJson(t):me(t)&&this.appendFromString(t),this};pt.fromJson=function(t,e){var r=new pt(t);return r.fromJson(e),r};pt.fromString=function(t,e){return new pt(t).fromString(e)};[bt,Gn,oo,Ht,Ha,so,ut,Wa].forEach(function(t){be(yt,t)});pt.types=yt.types;pt.properties=yt.properties;pt.propertyGroups=yt.propertyGroups;pt.propertyGroupNames=yt.propertyGroupNames;pt.propertyGroupKeys=yt.propertyGroupKeys;var xy={style:function(e){if(e){var r=this.setStyle(e);r.update()}return this._private.style},setStyle:function(e){var r=this._private;return Cl(e)?r.style=e.generateStyle(this):Oe(e)?r.style=pt.fromJson(this,e):me(e)?r.style=pt.fromString(this,e):r.style=pt(this),r.style},updateStyle:function(){this.mutableElements().updateStyle()}},Ey="single",Cr={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var r=this._private;if(r.selectionType==null&&(r.selectionType=Ey),e!==void 0)(e==="additive"||e==="single")&&(r.selectionType=e);else return r.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,r=this._private.pan,n,a,i,o,s;switch(e.length){case 0:return r;case 1:if(me(e[0]))return n=e[0],r[n];if(_e(e[0])){if(!this._private.panningEnabled)return this;i=e[0],o=i.x,s=i.y,he(o)&&(r.x=o),he(s)&&(r.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],a=e[1],(n==="x"||n==="y")&&he(a)&&(r[n]=a),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,r){var n=arguments,a=this._private.pan,i,o,s,l,u;if(!this._private.panningEnabled)return this;switch(n.length){case 1:_e(e)&&(s=n[0],l=s.x,u=s.y,he(l)&&(a.x+=l),he(u)&&(a.y+=u),this.emit("pan viewport"));break;case 2:i=e,o=r,(i==="x"||i==="y")&&he(o)&&(a[i]+=o),this.emit("pan viewport");break}return this.notify("viewport"),this},fit:function(e,r){var n=this.getFitViewport(e,r);if(n){var a=this._private;a.zoom=n.zoom,a.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,r){if(he(e)&&r===void 0&&(r=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(me(e)){var a=e;e=this.$(a)}else if(pg(e)){var i=e;n={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else zt(e)||(e=this.mutableElements());if(!(zt(e)&&e.empty())){n=n||e.boundingBox();var o=this.width(),s=this.height(),l;if(r=he(r)?r:0,!isNaN(o)&&!isNaN(s)&&o>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){l=Math.min((o-2*r)/n.w,(s-2*r)/n.h),l=l>this._private.maxZoom?this._private.maxZoom:l,l=l<this._private.minZoom?this._private.minZoom:l;var u={x:(o-l*(n.x1+n.x2))/2,y:(s-l*(n.y1+n.y2))/2};return{zoom:l,pan:u}}}}},zoomRange:function(e,r){var n=this._private;if(r==null){var a=e;e=a.min,r=a.max}return he(e)&&he(r)&&e<=r?(n.minZoom=e,n.maxZoom=r):he(e)&&r===void 0&&e<=n.maxZoom?n.minZoom=e:he(r)&&e===void 0&&r>=n.minZoom&&(n.maxZoom=r),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var r=this._private,n=r.pan,a=r.zoom,i,o,s=!1;if(r.zoomingEnabled||(s=!0),he(e)?o=e:_e(e)&&(o=e.level,e.position!=null?i=Na(e.position,a,n):e.renderedPosition!=null&&(i=e.renderedPosition),i!=null&&!r.panningEnabled&&(s=!0)),o=o>r.maxZoom?r.maxZoom:o,o=o<r.minZoom?r.minZoom:o,s||!he(o)||o===a||i!=null&&(!he(i.x)||!he(i.y)))return null;if(i!=null){var l=n,u=a,f=o,c={x:-f/u*(i.x-l.x)+i.x,y:-f/u*(i.y-l.y)+i.y};return{zoomed:!0,panned:!0,zoom:f,pan:c}}else return{zoomed:!0,panned:!1,zoom:o,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var r=this.getZoomedViewport(e),n=this._private;return r==null||!r.zoomed?this:(n.zoom=r.zoom,r.panned&&(n.pan.x=r.pan.x,n.pan.y=r.pan.y),this.emit("zoom"+(r.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var r=this._private,n=!0,a=!0,i=[],o=!1,s=!1;if(!e)return this;if(he(e.zoom)||(n=!1),_e(e.pan)||(a=!1),!n&&!a)return this;if(n){var l=e.zoom;l<r.minZoom||l>r.maxZoom||!r.zoomingEnabled?o=!0:(r.zoom=l,i.push("zoom"))}if(a&&(!o||!e.cancelOnFailedZoom)&&r.panningEnabled){var u=e.pan;he(u.x)&&(r.pan.x=u.x,s=!1),he(u.y)&&(r.pan.y=u.y,s=!1),s||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var r=this.getCenterPan(e);return r&&(this._private.pan=r,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,r){if(this._private.panningEnabled){if(me(e)){var n=e;e=this.mutableElements().filter(n)}else zt(e)||(e=this.mutableElements());if(e.length!==0){var a=e.boundingBox(),i=this.width(),o=this.height();r=r===void 0?this._private.zoom:r;var s={x:(i-r*(a.x1+a.x2))/2,y:(o-r*(a.y1+a.y2))/2};return s}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,r=e.container;return e.sizeCache=e.sizeCache||(r?function(){var n=Ve.getComputedStyle(r),a=function(o){return parseFloat(n.getPropertyValue(o))};return{width:r.clientWidth-a("padding-left")-a("padding-right"),height:r.clientHeight-a("padding-top")-a("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,r=this._private.zoom,n=this.renderedExtent(),a={x1:(n.x1-e.x)/r,x2:(n.x2-e.x)/r,y1:(n.y1-e.y)/r,y2:(n.y2-e.y)/r};return a.w=a.x2-a.x1,a.h=a.y2-a.y1,a},renderedExtent:function(){var e=this.width(),r=this.height();return{x1:0,y1:0,x2:e,y2:r,w:e,h:r}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};Cr.centre=Cr.center;Cr.autolockNodes=Cr.autolock;Cr.autoungrabifyNodes=Cr.autoungrabify;var zn={data:Pe.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Pe.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Pe.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Pe.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};zn.attr=zn.data;zn.removeAttr=zn.removeData;var An=function(e){var r=this;e=be({},e);var n=e.container;n&&!wa(n)&&wa(n[0])&&(n=n[0]);var a=n?n._cyreg:null;a=a||{},a&&a.cy&&(a.cy.destroy(),a={});var i=a.readies=a.readies||[];n&&(n._cyreg=a),a.cy=r;var o=Ve!==void 0&&n!==void 0&&!e.headless,s=e;s.layout=be({name:o?"grid":"null"},s.layout),s.renderer=be({name:o?"canvas":"null"},s.renderer);var l=function(p,y,w){return y!==void 0?y:w!==void 0?w:p},u=this._private={container:n,ready:!1,options:s,elements:new ct(this),listeners:[],aniEles:new ct(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:l(!0,s.zoomingEnabled),userZoomingEnabled:l(!0,s.userZoomingEnabled),panningEnabled:l(!0,s.panningEnabled),userPanningEnabled:l(!0,s.userPanningEnabled),boxSelectionEnabled:l(!0,s.boxSelectionEnabled),autolock:l(!1,s.autolock,s.autolockNodes),autoungrabify:l(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:l(!1,s.autounselectify),styleEnabled:s.styleEnabled===void 0?o:s.styleEnabled,zoom:he(s.zoom)?s.zoom:1,pan:{x:_e(s.pan)&&he(s.pan.x)?s.pan.x:0,y:_e(s.pan)&&he(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:l(250,s.multiClickDebounceTime)};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});var f=function(p,y){var w=p.some(mg);if(w)return en.all(p).then(y);y(p)};u.styleEnabled&&r.setStyle([]);var c=be({},s,s.renderer);r.initRenderer(c);var h=function(p,y,w){r.notifications(!1);var d=r.mutableElements();d.length>0&&d.remove(),p!=null&&(_e(p)||Oe(p))&&r.add(p),r.one("layoutready",function(m){r.notifications(!0),r.emit(m),r.one("load",y),r.emitAndNotify("load")}).one("layoutstop",function(){r.one("done",w),r.emit("done")});var g=be({},r._private.options.layout);g.eles=r.elements(),r.layout(g).run()};f([s.style,s.elements],function(v){var p=v[0],y=v[1];u.styleEnabled&&r.style().append(p),h(y,function(){r.startAnimationLoop(),u.ready=!0,We(s.ready)&&r.on("ready",s.ready);for(var w=0;w<i.length;w++){var d=i[w];r.on("ready",d)}a&&(a.readies=[]),r.emit("ready")},s.done)})},ka=An.prototype;be(ka,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},mount:function(e){if(e!=null){var r=this,n=r._private,a=n.options;return!wa(e)&&wa(e[0])&&(e=e[0]),r.stopAnimationLoop(),r.destroyRenderer(),n.container=e,n.styleEnabled=!0,r.invalidateSize(),r.initRenderer(be({},a,a.renderer,{name:a.renderer.name==="null"?"canvas":a.renderer.name})),r.startAnimationLoop(),r.style(a.style),r.emit("mount"),r}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Vt(this._private.options)},json:function(e){var r=this,n=r._private,a=r.mutableElements(),i=function(b){return r.getElementById(b.id())};if(_e(e)){if(r.startBatch(),e.elements){var o={},s=function(b,E){for(var S=[],C=[],T=0;T<b.length;T++){var _=b[T];if(!_.data.id){ze("cy.json() cannot handle elements without an ID attribute");continue}var P=""+_.data.id,F=r.getElementById(P);o[P]=!0,F.length!==0?C.push({ele:F,json:_}):(E&&(_.group=E),S.push(_))}r.add(S);for(var k=0;k<C.length;k++){var R=C[k],x=R.ele,W=R.json;x.json(W)}};if(Oe(e.elements))s(e.elements);else for(var l=["nodes","edges"],u=0;u<l.length;u++){var f=l[u],c=e.elements[f];Oe(c)&&s(c,f)}var h=r.collection();a.filter(function(m){return!o[m.id()]}).forEach(function(m){m.isParent()?h.merge(m):m.remove()}),h.forEach(function(m){return m.children().move({parent:null})}),h.forEach(function(m){return i(m).remove()})}e.style&&r.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&r.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&r.pan(e.pan),e.data&&r.data(e.data);for(var v=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],p=0;p<v.length;p++){var y=v[p];e[y]!=null&&r[y](e[y])}return r.endBatch(),this}else{var w=!!e,d={};w?d.elements=this.elements().map(function(m){return m.json()}):(d.elements={},a.forEach(function(m){var b=m.group();d.elements[b]||(d.elements[b]=[]),d.elements[b].push(m.json())})),this._private.styleEnabled&&(d.style=r.style().json()),d.data=Vt(r.data());var g=n.options;return d.zoomingEnabled=n.zoomingEnabled,d.userZoomingEnabled=n.userZoomingEnabled,d.zoom=n.zoom,d.minZoom=n.minZoom,d.maxZoom=n.maxZoom,d.panningEnabled=n.panningEnabled,d.userPanningEnabled=n.userPanningEnabled,d.pan=Vt(n.pan),d.boxSelectionEnabled=n.boxSelectionEnabled,d.renderer=Vt(g.renderer),d.hideEdgesOnViewport=g.hideEdgesOnViewport,d.textureOnViewport=g.textureOnViewport,d.wheelSensitivity=g.wheelSensitivity,d.motionBlur=g.motionBlur,d.multiClickDebounceTime=g.multiClickDebounceTime,d}}});ka.$id=ka.getElementById;[fy,py,pu,Mi,ga,yy,Oi,pa,xy,Cr,zn].forEach(function(t){be(ka,t)});var Cy={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}},Sy={maximal:!1,acyclic:!1},Or=function(e){return e.scratch("breadthfirst")},ws=function(e,r){return e.scratch("breadthfirst",r)};function mu(t){this.options=be({},Cy,Sy,t)}mu.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=n.nodes().filter(function(D){return!D.isParent()}),i=n,o=e.directed,s=e.acyclic||e.maximal||e.maximalAdjustments>0,l=Tt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),u;if(zt(e.roots))u=e.roots;else if(Oe(e.roots)){for(var f=[],c=0;c<e.roots.length;c++){var h=e.roots[c],v=r.getElementById(h);f.push(v)}u=r.collection(f)}else if(me(e.roots))u=r.$(e.roots);else if(o)u=a.roots();else{var p=n.components();u=r.collection();for(var y=function(j){var q=p[j],L=q.maxDegree(!1),B=q.filter(function(Z){return Z.degree(!1)===L});u=u.add(B)},w=0;w<p.length;w++)y(w)}var d=[],g={},m=function(j,q){d[q]==null&&(d[q]=[]);var L=d[q].length;d[q].push(j),ws(j,{index:L,depth:q})},b=function(j,q){var L=Or(j),B=L.depth,Z=L.index;d[B][Z]=null,m(j,q)};i.bfs({roots:u,directed:e.directed,visit:function(j,q,L,B,Z){var ne=j[0],se=ne.id();m(ne,Z),g[se]=!0}});for(var E=[],S=0;S<a.length;S++){var C=a[S];g[C.id()]||E.push(C)}var T=function(j){for(var q=d[j],L=0;L<q.length;L++){var B=q[L];if(B==null){q.splice(L,1),L--;continue}ws(B,{depth:j,index:L})}},_=function(){for(var j=0;j<d.length;j++)T(j)},P=function(j,q){for(var L=Or(j),B=j.incomers().filter(function(X){return X.isNode()&&n.has(X)}),Z=-1,ne=j.id(),se=0;se<B.length;se++){var ee=B[se],J=Or(ee);Z=Math.max(Z,J.depth)}if(L.depth<=Z){if(!e.acyclic&&q[ne])return null;var N=Z+1;return b(j,N),q[ne]=N,!0}return!1};if(o&&s){var F=[],k={},R=function(j){return F.push(j)},x=function(){return F.shift()};for(a.forEach(function(D){return F.push(D)});F.length>0;){var W=x(),O=P(W,k);if(O)W.outgoers().filter(function(D){return D.isNode()&&n.has(D)}).forEach(R);else if(O===null){ze("Detected double maximal shift for node `"+W.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}_();var M=0;if(e.avoidOverlap)for(var K=0;K<a.length;K++){var G=a[K],H=G.layoutDimensions(e),A=H.w,z=H.h;M=Math.max(M,A,z)}var $={},I=function(j){if($[j.id()])return $[j.id()];for(var q=Or(j).depth,L=j.neighborhood(),B=0,Z=0,ne=0;ne<L.length;ne++){var se=L[ne];if(!(se.isEdge()||se.isParent()||!a.has(se))){var ee=Or(se);if(ee!=null){var J=ee.index,N=ee.depth;if(!(J==null||N==null)){var X=d[N].length;N<q&&(B+=J/X,Z++)}}}}return Z=Math.max(1,Z),B=B/Z,Z===0&&(B=0),$[j.id()]=B,B},V=function(j,q){var L=I(j),B=I(q),Z=L-B;return Z===0?kl(j.id(),q.id()):Z};e.depthSort!==void 0&&(V=e.depthSort);for(var Y=0;Y<d.length;Y++)d[Y].sort(V),T(Y);for(var U=[],Q=0;Q<E.length;Q++)U.push(E[Q]);d.unshift(U),_();for(var te=0,ae=0;ae<d.length;ae++)te=Math.max(d[ae].length,te);var oe={x:l.x1+l.w/2,y:l.x1+l.h/2},ue=d.reduce(function(D,j){return Math.max(D,j.length)},0),de=function(j){var q=Or(j),L=q.depth,B=q.index,Z=d[L].length,ne=Math.max(l.w/((e.grid?ue:Z)+1),M),se=Math.max(l.h/(d.length+1),M),ee=Math.min(l.w/2/d.length,l.h/2/d.length);if(ee=Math.max(ee,M),e.circle){var N=ee*L+ee-(d.length>0&&d[0].length<=3?ee/2:0),X=2*Math.PI/d[L].length*B;return L===0&&d[0].length===1&&(N=1),{x:oe.x+N*Math.cos(X),y:oe.y+N*Math.sin(X)}}else{var J={x:oe.x+(B+1-(Z+1)/2)*ne,y:(L+1)*se};return J}};return n.nodes().layoutPositions(this,e,de),this};var ky={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function yu(t){this.options=be({},ky,t)}yu.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));for(var o=Tt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},l=e.sweep===void 0?2*Math.PI-2*Math.PI/i.length:e.sweep,u=l/Math.max(1,i.length-1),f,c=0,h=0;h<i.length;h++){var v=i[h],p=v.layoutDimensions(e),y=p.w,w=p.h;c=Math.max(c,y,w)}if(he(e.radius)?f=e.radius:i.length<=1?f=0:f=Math.min(o.h,o.w)/2-c,i.length>1&&e.avoidOverlap){c*=1.75;var d=Math.cos(u)-Math.cos(0),g=Math.sin(u)-Math.sin(0),m=Math.sqrt(c*c/(d*d+g*g));f=Math.max(m,f)}var b=function(S,C){var T=e.startAngle+C*u*(a?1:-1),_=f*Math.cos(T),P=f*Math.sin(T),F={x:s.x+_,y:s.y+P};return F};return n.nodes().layoutPositions(this,e,b),this};var _y={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function bu(t){this.options=be({},_y,t)}bu.prototype.run=function(){for(var t=this.options,e=t,r=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=t.cy,a=e.eles,i=a.nodes().not(":parent"),o=Tt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},l=[],u=0,f=0;f<i.length;f++){var c=i[f],h=void 0;h=e.concentric(c),l.push({value:h,node:c}),c._private.scratch.concentric=h}i.updateStyle();for(var v=0;v<i.length;v++){var p=i[v],y=p.layoutDimensions(e);u=Math.max(u,y.w,y.h)}l.sort(function(D,j){return j.value-D.value});for(var w=e.levelWidth(i),d=[[]],g=d[0],m=0;m<l.length;m++){var b=l[m];if(g.length>0){var E=Math.abs(g[0].value-b.value);E>=w&&(g=[],d.push(g))}g.push(b)}var S=u+e.minNodeSpacing;if(!e.avoidOverlap){var C=d.length>0&&d[0].length>1,T=Math.min(o.w,o.h)/2-S,_=T/(d.length+C?1:0);S=Math.min(S,_)}for(var P=0,F=0;F<d.length;F++){var k=d[F],R=e.sweep===void 0?2*Math.PI-2*Math.PI/k.length:e.sweep,x=k.dTheta=R/Math.max(1,k.length-1);if(k.length>1&&e.avoidOverlap){var W=Math.cos(x)-Math.cos(0),O=Math.sin(x)-Math.sin(0),M=Math.sqrt(S*S/(W*W+O*O));P=Math.max(M,P)}k.r=P,P+=S}if(e.equidistant){for(var K=0,G=0,H=0;H<d.length;H++){var A=d[H],z=A.r-G;K=Math.max(K,z)}G=0;for(var $=0;$<d.length;$++){var I=d[$];$===0&&(G=I.r),I.r=G,G+=K}}for(var V={},Y=0;Y<d.length;Y++)for(var U=d[Y],Q=U.dTheta,te=U.r,ae=0;ae<U.length;ae++){var oe=U[ae],ue=e.startAngle+(r?1:-1)*Q*ae,de={x:s.x+te*Math.cos(ue),y:s.y+te*Math.sin(ue)};V[oe.node.id()]=de}return a.nodes().layoutPositions(this,e,function(D){var j=D.id();return V[j]}),this};var li,Dy={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,r){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Ua(t){this.options=be({},Dy,t),this.options.layout=this}Ua.prototype.run=function(){var t=this.options,e=t.cy,r=this;r.stopped=!1,(t.animate===!0||t.animate===!1)&&r.emit({type:"layoutstart",layout:r}),t.debug===!0?li=!0:li=!1;var n=Ty(e,r,t);li&&Ay(n),t.randomize&&Ly(n);var a=Yt(),i=function(){By(n,e,t),t.fit===!0&&e.fit(t.padding)},o=function(h){return!(r.stopped||h>=t.numIter||(My(n,t),n.temperature=n.temperature*t.coolingFactor,n.temperature<t.minTemp))},s=function(){if(t.animate===!0||t.animate===!1)i(),r.one("layoutstop",t.stop),r.emit({type:"layoutstop",layout:r});else{var h=t.eles.nodes(),v=wu(n,t,h);h.layoutPositions(r,t,v)}},l=0,u=!0;if(t.animate===!0){var f=function c(){for(var h=0;u&&h<t.refresh;)u=o(l),l++,h++;if(!u)Es(n,t),s();else{var v=Yt();v-a>=t.animationThreshold&&i(),xa(c)}};f()}else{for(;u;)u=o(l),l++;Es(n,t),s()}return this};Ua.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};Ua.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var Ty=function(e,r,n){for(var a=n.eles.edges(),i=n.eles.nodes(),o=Tt(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),s={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:a.size(),temperature:n.initialTemp,clientWidth:o.w,clientHeight:o.h,boundingBox:o},l=n.eles.components(),u={},f=0;f<l.length;f++)for(var c=l[f],h=0;h<c.length;h++){var v=c[h];u[v.id()]=f}for(var f=0;f<s.nodeSize;f++){var p=i[f],y=p.layoutDimensions(n),w={};w.isLocked=p.locked(),w.id=p.data("id"),w.parentId=p.data("parent"),w.cmptId=u[p.id()],w.children=[],w.positionX=p.position("x"),w.positionY=p.position("y"),w.offsetX=0,w.offsetY=0,w.height=y.w,w.width=y.h,w.maxX=w.positionX+w.width/2,w.minX=w.positionX-w.width/2,w.maxY=w.positionY+w.height/2,w.minY=w.positionY-w.height/2,w.padLeft=parseFloat(p.style("padding")),w.padRight=parseFloat(p.style("padding")),w.padTop=parseFloat(p.style("padding")),w.padBottom=parseFloat(p.style("padding")),w.nodeRepulsion=We(n.nodeRepulsion)?n.nodeRepulsion(p):n.nodeRepulsion,s.layoutNodes.push(w),s.idToIndex[w.id]=f}for(var d=[],g=0,m=-1,b=[],f=0;f<s.nodeSize;f++){var p=s.layoutNodes[f],E=p.parentId;E!=null?s.layoutNodes[s.idToIndex[E]].children.push(p.id):(d[++m]=p.id,b.push(p.id))}for(s.graphSet.push(b);g<=m;){var S=d[g++],C=s.idToIndex[S],v=s.layoutNodes[C],T=v.children;if(T.length>0){s.graphSet.push(T);for(var f=0;f<T.length;f++)d[++m]=T[f]}}for(var f=0;f<s.graphSet.length;f++)for(var _=s.graphSet[f],h=0;h<_.length;h++){var P=s.idToIndex[_[h]];s.indexToGraph[P]=f}for(var f=0;f<s.edgeSize;f++){var F=a[f],k={};k.id=F.data("id"),k.sourceId=F.data("source"),k.targetId=F.data("target");var R=We(n.idealEdgeLength)?n.idealEdgeLength(F):n.idealEdgeLength,x=We(n.edgeElasticity)?n.edgeElasticity(F):n.edgeElasticity,W=s.idToIndex[k.sourceId],O=s.idToIndex[k.targetId],M=s.indexToGraph[W],K=s.indexToGraph[O];if(M!=K){for(var G=Py(k.sourceId,k.targetId,s),H=s.graphSet[G],A=0,w=s.layoutNodes[W];H.indexOf(w.id)===-1;)w=s.layoutNodes[s.idToIndex[w.parentId]],A++;for(w=s.layoutNodes[O];H.indexOf(w.id)===-1;)w=s.layoutNodes[s.idToIndex[w.parentId]],A++;R*=A*n.nestingFactor}k.idealLength=R,k.elasticity=x,s.layoutEdges.push(k)}return s},Py=function(e,r,n){var a=zy(e,r,0,n);return 2>a.count?0:a.graph},zy=function t(e,r,n,a){var i=a.graphSet[n];if(-1<i.indexOf(e)&&-1<i.indexOf(r))return{count:2,graph:n};for(var o=0,s=0;s<i.length;s++){var l=i[s],u=a.idToIndex[l],f=a.layoutNodes[u].children;if(f.length!==0){var c=a.indexToGraph[a.idToIndex[f[0]]],h=t(e,r,c,a);if(h.count!==0)if(h.count===1){if(o++,o===2)break}else return h}}return{count:o,graph:n}},Ay,Ly=function(e,r){for(var n=e.clientWidth,a=e.clientHeight,i=0;i<e.nodeSize;i++){var o=e.layoutNodes[i];o.children.length===0&&!o.isLocked&&(o.positionX=Math.random()*n,o.positionY=Math.random()*a)}},wu=function(e,r,n){var a=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return r.boundingBox&&(n.forEach(function(o){var s=e.layoutNodes[e.idToIndex[o.data("id")]];i.x1=Math.min(i.x1,s.positionX),i.x2=Math.max(i.x2,s.positionX),i.y1=Math.min(i.y1,s.positionY),i.y2=Math.max(i.y2,s.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(o,s){var l=e.layoutNodes[e.idToIndex[o.data("id")]];if(r.boundingBox){var u=(l.positionX-i.x1)/i.w,f=(l.positionY-i.y1)/i.h;return{x:a.x1+u*a.w,y:a.y1+f*a.h}}else return{x:l.positionX,y:l.positionY}}},By=function(e,r,n){var a=n.layout,i=n.eles.nodes(),o=wu(e,n,i);i.positions(o),e.ready!==!0&&(e.ready=!0,a.one("layoutready",n.ready),a.emit({type:"layoutready",layout:this}))},My=function(e,r,n){Oy(e,r),Ny(e),Fy(e,r),$y(e),Vy(e)},Oy=function(e,r){for(var n=0;n<e.graphSet.length;n++)for(var a=e.graphSet[n],i=a.length,o=0;o<i;o++)for(var s=e.layoutNodes[e.idToIndex[a[o]]],l=o+1;l<i;l++){var u=e.layoutNodes[e.idToIndex[a[l]]];Iy(s,u,e,r)}},xs=function(e){return-e+2*e*Math.random()},Iy=function(e,r,n,a){var i=e.cmptId,o=r.cmptId;if(!(i!==o&&!n.isCompound)){var s=r.positionX-e.positionX,l=r.positionY-e.positionY,u=1;s===0&&l===0&&(s=xs(u),l=xs(u));var f=Ry(e,r,s,l);if(f>0)var c=a.nodeOverlap*f,h=Math.sqrt(s*s+l*l),v=c*s/h,p=c*l/h;else var y=_a(e,s,l),w=_a(r,-1*s,-1*l),d=w.x-y.x,g=w.y-y.y,m=d*d+g*g,h=Math.sqrt(m),c=(e.nodeRepulsion+r.nodeRepulsion)/m,v=c*d/h,p=c*g/h;e.isLocked||(e.offsetX-=v,e.offsetY-=p),r.isLocked||(r.offsetX+=v,r.offsetY+=p)}},Ry=function(e,r,n,a){if(n>0)var i=e.maxX-r.minX;else var i=r.maxX-e.minX;if(a>0)var o=e.maxY-r.minY;else var o=r.maxY-e.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},_a=function(e,r,n){var a=e.positionX,i=e.positionY,o=e.height||1,s=e.width||1,l=n/r,u=o/s,f={};return r===0&&0<n||r===0&&0>n?(f.x=a,f.y=i+o/2,f):0<r&&-1*u<=l&&l<=u?(f.x=a+s/2,f.y=i+s*n/2/r,f):0>r&&-1*u<=l&&l<=u?(f.x=a-s/2,f.y=i-s*n/2/r,f):0<n&&(l<=-1*u||l>=u)?(f.x=a+o*r/2/n,f.y=i+o/2,f):(0>n&&(l<=-1*u||l>=u)&&(f.x=a-o*r/2/n,f.y=i-o/2),f)},Ny=function(e,r){for(var n=0;n<e.edgeSize;n++){var a=e.layoutEdges[n],i=e.idToIndex[a.sourceId],o=e.layoutNodes[i],s=e.idToIndex[a.targetId],l=e.layoutNodes[s],u=l.positionX-o.positionX,f=l.positionY-o.positionY;if(!(u===0&&f===0)){var c=_a(o,u,f),h=_a(l,-1*u,-1*f),v=h.x-c.x,p=h.y-c.y,y=Math.sqrt(v*v+p*p),w=Math.pow(a.idealLength-y,2)/a.elasticity;if(y!==0)var d=w*v/y,g=w*p/y;else var d=0,g=0;o.isLocked||(o.offsetX+=d,o.offsetY+=g),l.isLocked||(l.offsetX-=d,l.offsetY-=g)}}},Fy=function(e,r){if(r.gravity!==0)for(var n=1,a=0;a<e.graphSet.length;a++){var i=e.graphSet[a],o=i.length;if(a===0)var s=e.clientHeight/2,l=e.clientWidth/2;else var u=e.layoutNodes[e.idToIndex[i[0]]],f=e.layoutNodes[e.idToIndex[u.parentId]],s=f.positionX,l=f.positionY;for(var c=0;c<o;c++){var h=e.layoutNodes[e.idToIndex[i[c]]];if(!h.isLocked){var v=s-h.positionX,p=l-h.positionY,y=Math.sqrt(v*v+p*p);if(y>n){var w=r.gravity*v/y,d=r.gravity*p/y;h.offsetX+=w,h.offsetY+=d}}}}},$y=function(e,r){var n=[],a=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;a<=i;){var o=n[a++],s=e.idToIndex[o],l=e.layoutNodes[s],u=l.children;if(0<u.length&&!l.isLocked){for(var f=l.offsetX,c=l.offsetY,h=0;h<u.length;h++){var v=e.layoutNodes[e.idToIndex[u[h]]];v.offsetX+=f,v.offsetY+=c,n[++i]=u[h]}l.offsetX=0,l.offsetY=0}}},Vy=function(e,r){for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&(a.maxX=void 0,a.minX=void 0,a.maxY=void 0,a.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];if(!(0<a.children.length||a.isLocked)){var i=qy(a.offsetX,a.offsetY,e.temperature);a.positionX+=i.x,a.positionY+=i.y,a.offsetX=0,a.offsetY=0,a.minX=a.positionX-a.width,a.maxX=a.positionX+a.width,a.minY=a.positionY-a.height,a.maxY=a.positionY+a.height,Gy(a,e)}}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&!a.isLocked&&(a.positionX=(a.maxX+a.minX)/2,a.positionY=(a.maxY+a.minY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY)}},qy=function(e,r,n){var a=Math.sqrt(e*e+r*r);if(a>n)var i={x:n*e/a,y:n*r/a};else var i={x:e,y:r};return i},Gy=function t(e,r){var n=e.parentId;if(n!=null){var a=r.layoutNodes[r.idToIndex[n]],i=!1;if((a.maxX==null||e.maxX+a.padRight>a.maxX)&&(a.maxX=e.maxX+a.padRight,i=!0),(a.minX==null||e.minX-a.padLeft<a.minX)&&(a.minX=e.minX-a.padLeft,i=!0),(a.maxY==null||e.maxY+a.padBottom>a.maxY)&&(a.maxY=e.maxY+a.padBottom,i=!0),(a.minY==null||e.minY-a.padTop<a.minY)&&(a.minY=e.minY-a.padTop,i=!0),i)return t(a,r)}},Es=function(e,r){for(var n=e.layoutNodes,a=[],i=0;i<n.length;i++){var o=n[i],s=o.cmptId,l=a[s]=a[s]||[];l.push(o)}for(var u=0,i=0;i<a.length;i++){var f=a[i];if(f){f.x1=1/0,f.x2=-1/0,f.y1=1/0,f.y2=-1/0;for(var c=0;c<f.length;c++){var h=f[c];f.x1=Math.min(f.x1,h.positionX-h.width/2),f.x2=Math.max(f.x2,h.positionX+h.width/2),f.y1=Math.min(f.y1,h.positionY-h.height/2),f.y2=Math.max(f.y2,h.positionY+h.height/2)}f.w=f.x2-f.x1,f.h=f.y2-f.y1,u+=f.w*f.h}}a.sort(function(g,m){return m.w*m.h-g.w*g.h});for(var v=0,p=0,y=0,w=0,d=Math.sqrt(u)*e.clientWidth/e.clientHeight,i=0;i<a.length;i++){var f=a[i];if(f){for(var c=0;c<f.length;c++){var h=f[c];h.isLocked||(h.positionX+=v-f.x1,h.positionY+=p-f.y1)}v+=f.w+r.componentSpacing,y+=f.w+r.componentSpacing,w=Math.max(w,f.h),y>d&&(p+=w+r.componentSpacing,v=0,y=0,w=0)}}},Hy={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function xu(t){this.options=be({},Hy,t)}xu.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));var i=Tt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(i.h===0||i.w===0)n.nodes().layoutPositions(this,e,function($){return{x:i.x1,y:i.y1}});else{var o=a.size(),s=Math.sqrt(o*i.h/i.w),l=Math.round(s),u=Math.round(i.w/i.h*s),f=function(I){if(I==null)return Math.min(l,u);var V=Math.min(l,u);V==l?l=I:u=I},c=function(I){if(I==null)return Math.max(l,u);var V=Math.max(l,u);V==l?l=I:u=I},h=e.rows,v=e.cols!=null?e.cols:e.columns;if(h!=null&&v!=null)l=h,u=v;else if(h!=null&&v==null)l=h,u=Math.ceil(o/l);else if(h==null&&v!=null)u=v,l=Math.ceil(o/u);else if(u*l>o){var p=f(),y=c();(p-1)*y>=o?f(p-1):(y-1)*p>=o&&c(y-1)}else for(;u*l<o;){var w=f(),d=c();(d+1)*w>=o?c(d+1):f(w+1)}var g=i.w/u,m=i.h/l;if(e.condense&&(g=0,m=0),e.avoidOverlap)for(var b=0;b<a.length;b++){var E=a[b],S=E._private.position;(S.x==null||S.y==null)&&(S.x=0,S.y=0);var C=E.layoutDimensions(e),T=e.avoidOverlapPadding,_=C.w+T,P=C.h+T;g=Math.max(g,_),m=Math.max(m,P)}for(var F={},k=function(I,V){return!!F["c-"+I+"-"+V]},R=function(I,V){F["c-"+I+"-"+V]=!0},x=0,W=0,O=function(){W++,W>=u&&(W=0,x++)},M={},K=0;K<a.length;K++){var G=a[K],H=e.position(G);if(H&&(H.row!==void 0||H.col!==void 0)){var A={row:H.row,col:H.col};if(A.col===void 0)for(A.col=0;k(A.row,A.col);)A.col++;else if(A.row===void 0)for(A.row=0;k(A.row,A.col);)A.row++;M[G.id()]=A,R(A.row,A.col)}}var z=function(I,V){var Y,U;if(I.locked()||I.isParent())return!1;var Q=M[I.id()];if(Q)Y=Q.col*g+g/2+i.x1,U=Q.row*m+m/2+i.y1;else{for(;k(x,W);)O();Y=W*g+g/2+i.x1,U=x*m+m/2+i.y1,R(x,W),O()}return{x:Y,y:U}};a.layoutPositions(this,e,z)}return this};var Wy={ready:function(){},stop:function(){}};function lo(t){this.options=be({},Wy,t)}lo.prototype.run=function(){var t=this.options,e=t.eles,r=this;return t.cy,r.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),r.one("layoutready",t.ready),r.emit("layoutready"),r.one("layoutstop",t.stop),r.emit("layoutstop"),this};lo.prototype.stop=function(){return this};var Uy={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Eu(t){this.options=be({},Uy,t)}Eu.prototype.run=function(){var t=this.options,e=t.eles,r=e.nodes(),n=We(t.positions);function a(i){if(t.positions==null)return np(i.position());if(n)return t.positions(i);var o=t.positions[i._private.data.id];return o??null}return r.layoutPositions(this,t,function(i,o){var s=a(i);return i.locked()||s==null?!1:s}),this};var Ky={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function Cu(t){this.options=be({},Ky,t)}Cu.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=Tt(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),a=function(o,s){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return r.nodes().layoutPositions(this,t,a),this};var Zy=[{name:"breadthfirst",impl:mu},{name:"circle",impl:yu},{name:"concentric",impl:bu},{name:"cose",impl:Ua},{name:"grid",impl:xu},{name:"null",impl:lo},{name:"preset",impl:Eu},{name:"random",impl:Cu}];function Su(t){this.options=t,this.notifications=0}var Cs=function(){},Ss=function(){throw new Error("A headless instance can not render images")};Su.prototype={recalculateRenderedStyle:Cs,notify:function(){this.notifications++},init:Cs,isHeadless:function(){return!0},png:Ss,jpg:Ss};var uo={};uo.arrowShapeWidth=.3;uo.registerArrowShapes=function(){var t=this.arrowShapes={},e=this,r=function(u,f,c,h,v,p,y){var w=v.x-c/2-y,d=v.x+c/2+y,g=v.y-c/2-y,m=v.y+c/2+y,b=w<=u&&u<=d&&g<=f&&f<=m;return b},n=function(u,f,c,h,v){var p=u*Math.cos(h)-f*Math.sin(h),y=u*Math.sin(h)+f*Math.cos(h),w=p*c,d=y*c,g=w+v.x,m=d+v.y;return{x:g,y:m}},a=function(u,f,c,h){for(var v=[],p=0;p<u.length;p+=2){var y=u[p],w=u[p+1];v.push(n(y,w,f,c,h))}return v},i=function(u){for(var f=[],c=0;c<u.length;c++){var h=u[c];f.push(h.x,h.y)}return f},o=function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").pfValue*2},s=function(u,f){me(f)&&(f=t[f]),t[u]=be({name:u,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(h,v,p,y,w,d){var g=i(a(this.points,p+2*d,y,w)),m=_t(h,v,g);return m},roughCollide:r,draw:function(h,v,p,y){var w=a(this.points,v,p,y);e.arrowShapeImpl("polygon")(h,w)},spacing:function(h){return 0},gap:o},f)};s("none",{collide:Ea,roughCollide:Ea,draw:ji,spacing:Fo,gap:Fo}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(u,f,c,h,v){var p=a(this.points,f,c,h),y=this.controlPoint,w=n(y[0],y[1],f,c,h);e.arrowShapeImpl(this.name)(u,p,w)},gap:function(u){return o(u)*.8}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(u,f,c,h,v,p,y){var w=i(a(this.points,c+2*y,h,v)),d=i(a(this.pointsTee,c+2*y,h,v)),g=_t(u,f,w)||_t(u,f,d);return g},draw:function(u,f,c,h,v){var p=a(this.points,f,c,h),y=a(this.pointsTee,f,c,h);e.arrowShapeImpl(this.name)(u,p,y)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(u,f,c,h,v,p,y){var w=v,d=Math.pow(w.x-u,2)+Math.pow(w.y-f,2)<=Math.pow((c+2*y)*this.radius,2),g=i(a(this.points,c+2*y,h,v));return _t(u,f,g)||d},draw:function(u,f,c,h,v){var p=a(this.pointsTr,f,c,h);e.arrowShapeImpl(this.name)(u,p,h.x,h.y,this.radius*f)},spacing:function(u){return e.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(u,f){var c=this.baseCrossLinePts.slice(),h=f/u,v=3,p=5;return c[v]=c[v]-h,c[p]=c[p]-h,c},collide:function(u,f,c,h,v,p,y){var w=i(a(this.points,c+2*y,h,v)),d=i(a(this.crossLinePts(c,p),c+2*y,h,v)),g=_t(u,f,w)||_t(u,f,d);return g},draw:function(u,f,c,h,v){var p=a(this.points,f,c,h),y=a(this.crossLinePts(f,v),f,c,h);e.arrowShapeImpl(this.name)(u,p,y)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(u){return o(u)*.525}}),s("circle",{radius:.15,collide:function(u,f,c,h,v,p,y){var w=v,d=Math.pow(w.x-u,2)+Math.pow(w.y-f,2)<=Math.pow((c+2*y)*this.radius,2);return d},draw:function(u,f,c,h,v){e.arrowShapeImpl(this.name)(u,h.x,h.y,this.radius*f)},spacing:function(u){return e.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(u){return 1},gap:function(u){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(u){return .95*u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}})};var Dr={};Dr.projectIntoViewport=function(t,e){var r=this.cy,n=this.findContainerClientCoords(),a=n[0],i=n[1],o=n[4],s=r.pan(),l=r.zoom(),u=((t-a)/o-s.x)/l,f=((e-i)/o-s.y)/l;return[u,f]};Dr.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),r=Ve.getComputedStyle(t),n=function(d){return parseFloat(r.getPropertyValue(d))},a={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},i={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},o=t.clientWidth,s=t.clientHeight,l=a.left+a.right,u=a.top+a.bottom,f=i.left+i.right,c=e.width/(o+f),h=o-l,v=s-u,p=e.left+a.left+i.left,y=e.top+a.top+i.top;return this.containerBB=[p,y,h,v,c]};Dr.invalidateContainerClientCoordsCache=function(){this.containerBB=null};Dr.findNearestElement=function(t,e,r,n){return this.findNearestElements(t,e,r,n)[0]};Dr.findNearestElements=function(t,e,r,n){var a=this,i=this,o=i.getCachedZSortedEles(),s=[],l=i.cy.zoom(),u=i.cy.hasCompoundNodes(),f=(n?24:8)/l,c=(n?8:2)/l,h=(n?8:2)/l,v=1/0,p,y;r&&(o=o.interactive);function w(C,T){if(C.isNode()){if(y)return;y=C,s.push(C)}if(C.isEdge()&&(T==null||T<v))if(p){if(p.pstyle("z-compound-depth").value===C.pstyle("z-compound-depth").value&&p.pstyle("z-compound-depth").value===C.pstyle("z-compound-depth").value){for(var _=0;_<s.length;_++)if(s[_].isEdge()){s[_]=C,p=C,v=T??v;break}}}else s.push(C),p=C,v=T??v}function d(C){var T=C.outerWidth()+2*c,_=C.outerHeight()+2*c,P=T/2,F=_/2,k=C.position();if(k.x-P<=t&&t<=k.x+P&&k.y-F<=e&&e<=k.y+F){var R=i.nodeShapes[a.getNodeShape(C)];if(R.checkPoint(t,e,0,T,_,k.x,k.y))return w(C,0),!0}}function g(C){var T=C._private,_=T.rscratch,P=C.pstyle("width").pfValue,F=C.pstyle("arrow-scale").value,k=P/2+f,R=k*k,x=k*2,K=T.source,G=T.target,W;if(_.edgeType==="segments"||_.edgeType==="straight"||_.edgeType==="haystack"){for(var O=_.allpts,M=0;M+3<O.length;M+=2)if(pp(t,e,O[M],O[M+1],O[M+2],O[M+3],x)&&R>(W=xp(t,e,O[M],O[M+1],O[M+2],O[M+3])))return w(C,W),!0}else if(_.edgeType==="bezier"||_.edgeType==="multibezier"||_.edgeType==="self"||_.edgeType==="compound"){for(var O=_.allpts,M=0;M+5<_.allpts.length;M+=4)if(mp(t,e,O[M],O[M+1],O[M+2],O[M+3],O[M+4],O[M+5],x)&&R>(W=wp(t,e,O[M],O[M+1],O[M+2],O[M+3],O[M+4],O[M+5])))return w(C,W),!0}for(var K=K||T.source,G=G||T.target,H=a.getArrowWidth(P,F),A=[{name:"source",x:_.arrowStartX,y:_.arrowStartY,angle:_.srcArrowAngle},{name:"target",x:_.arrowEndX,y:_.arrowEndY,angle:_.tgtArrowAngle},{name:"mid-source",x:_.midX,y:_.midY,angle:_.midsrcArrowAngle},{name:"mid-target",x:_.midX,y:_.midY,angle:_.midtgtArrowAngle}],M=0;M<A.length;M++){var z=A[M],$=i.arrowShapes[C.pstyle(z.name+"-arrow-shape").value],I=C.pstyle("width").pfValue;if($.roughCollide(t,e,H,z.angle,{x:z.x,y:z.y},I,f)&&$.collide(t,e,H,z.angle,{x:z.x,y:z.y},I,f))return w(C),!0}u&&s.length>0&&(d(K),d(G))}function m(C,T,_){return Rt(C,T,_)}function b(C,T){var _=C._private,P=h,F;T?F=T+"-":F="",C.boundingBox();var k=_.labelBounds[T||"main"],R=C.pstyle(F+"label").value,x=C.pstyle("text-events").strValue==="yes";if(!(!x||!R)){var W=m(_.rscratch,"labelX",T),O=m(_.rscratch,"labelY",T),M=m(_.rscratch,"labelAngle",T),K=C.pstyle(F+"text-margin-x").pfValue,G=C.pstyle(F+"text-margin-y").pfValue,H=k.x1-P-K,A=k.x2+P-K,z=k.y1-P-G,$=k.y2+P-G;if(M){var I=Math.cos(M),V=Math.sin(M),Y=function(de,D){return de=de-W,D=D-O,{x:de*I-D*V+W,y:de*V+D*I+O}},U=Y(H,z),Q=Y(H,$),te=Y(A,z),ae=Y(A,$),oe=[U.x+K,U.y+G,te.x+K,te.y+G,ae.x+K,ae.y+G,Q.x+K,Q.y+G];if(_t(t,e,oe))return w(C),!0}else if(Kr(k,t,e))return w(C),!0}}for(var E=o.length-1;E>=0;E--){var S=o[E];S.isNode()?d(S)||b(S):g(S)||b(S)||b(S,"source")||b(S,"target")}return s};Dr.getAllInBox=function(t,e,r,n){var a=this.getCachedZSortedEles().interactive,i=[],o=Math.min(t,r),s=Math.max(t,r),l=Math.min(e,n),u=Math.max(e,n);t=o,r=s,e=l,n=u;for(var f=Tt({x1:t,y1:e,x2:r,y2:n}),c=0;c<a.length;c++){var h=a[c];if(h.isNode()){var v=h,p=v.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});eo(f,p)&&!Nl(p,f)&&i.push(v)}else{var y=h,w=y._private,d=w.rscratch;if(d.startX!=null&&d.startY!=null&&!Kr(f,d.startX,d.startY)||d.endX!=null&&d.endY!=null&&!Kr(f,d.endX,d.endY))continue;if(d.edgeType==="bezier"||d.edgeType==="multibezier"||d.edgeType==="self"||d.edgeType==="compound"||d.edgeType==="segments"||d.edgeType==="haystack"){for(var g=w.rstyle.bezierPts||w.rstyle.linePts||w.rstyle.haystackPts,m=!0,b=0;b<g.length;b++)if(!gp(f,g[b])){m=!1;break}m&&i.push(y)}else(d.edgeType==="haystack"||d.edgeType==="straight")&&i.push(y)}}return i};var Da={};Da.calculateArrowAngles=function(t){var e=t._private.rscratch,r=e.edgeType==="haystack",n=e.edgeType==="bezier",a=e.edgeType==="multibezier",i=e.edgeType==="segments",o=e.edgeType==="compound",s=e.edgeType==="self",l,u,f,c,h,v,d,g;if(r?(f=e.haystackPts[0],c=e.haystackPts[1],h=e.haystackPts[2],v=e.haystackPts[3]):(f=e.arrowStartX,c=e.arrowStartY,h=e.arrowEndX,v=e.arrowEndY),d=e.midX,g=e.midY,i)l=f-e.segpts[0],u=c-e.segpts[1];else if(a||o||s||n){var p=e.allpts,y=ot(p[0],p[2],p[4],.1),w=ot(p[1],p[3],p[5],.1);l=f-y,u=c-w}else l=f-d,u=c-g;e.srcArrowAngle=jn(l,u);var d=e.midX,g=e.midY;if(r&&(d=(f+h)/2,g=(c+v)/2),l=h-f,u=v-c,i){var p=e.allpts;if(p.length/2%2===0){var m=p.length/2,b=m-2;l=p[m]-p[b],u=p[m+1]-p[b+1]}else{var m=p.length/2-1,b=m-2,E=m+2;l=p[m]-p[b],u=p[m+1]-p[b+1]}}else if(a||o||s){var p=e.allpts,S=e.ctrlpts,C,T,_,P;if(S.length/2%2===0){var F=p.length/2-1,k=F+2,R=k+2;C=ot(p[F],p[k],p[R],0),T=ot(p[F+1],p[k+1],p[R+1],0),_=ot(p[F],p[k],p[R],1e-4),P=ot(p[F+1],p[k+1],p[R+1],1e-4)}else{var k=p.length/2-1,F=k-2,R=k+2;C=ot(p[F],p[k],p[R],.4999),T=ot(p[F+1],p[k+1],p[R+1],.4999),_=ot(p[F],p[k],p[R],.5),P=ot(p[F+1],p[k+1],p[R+1],.5)}l=_-C,u=P-T}if(e.midtgtArrowAngle=jn(l,u),e.midDispX=l,e.midDispY=u,l*=-1,u*=-1,i){var p=e.allpts;if(p.length/2%2!==0){var m=p.length/2-1,E=m+2;l=-(p[E]-p[m]),u=-(p[E+1]-p[m+1])}}if(e.midsrcArrowAngle=jn(l,u),i)l=h-e.segpts[e.segpts.length-2],u=v-e.segpts[e.segpts.length-1];else if(a||o||s||n){var p=e.allpts,x=p.length,y=ot(p[x-6],p[x-4],p[x-2],.9),w=ot(p[x-5],p[x-3],p[x-1],.9);l=h-y,u=v-w}else l=h-d,u=v-g;e.tgtArrowAngle=jn(l,u)};Da.getArrowWidth=Da.getArrowHeight=function(t,e){var r=this.arrowWidthCache=this.arrowWidthCache||{},n=r[t+", "+e];return n||(n=Math.max(Math.pow(t*13.37,.9),29)*e,r[t+", "+e]=n,n)};var Et={};Et.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var r=t[e],n=r._private,a=n.rscratch;if(!a.haystack){var i=Math.random()*2*Math.PI;a.source={x:Math.cos(i),y:Math.sin(i)},i=Math.random()*2*Math.PI,a.target={x:Math.cos(i),y:Math.sin(i)}}var o=n.source,s=n.target,l=o.position(),u=s.position(),f=o.width(),c=s.width(),h=o.height(),v=s.height(),p=r.pstyle("haystack-radius").value,y=p/2;a.haystackPts=a.allpts=[a.source.x*f*y+l.x,a.source.y*h*y+l.y,a.target.x*c*y+u.x,a.target.y*v*y+u.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}};Et.findSegmentsPoints=function(t,e){var r=t._private.rscratch,n=e.posPts,a=e.intersectionPts,i=e.vectorNormInverse,o=t.pstyle("edge-distances").value,s=t.pstyle("segment-weights"),l=t.pstyle("segment-distances"),u=Math.min(s.pfValue.length,l.pfValue.length);r.edgeType="segments",r.segpts=[];for(var f=0;f<u;f++){var c=s.pfValue[f],h=l.pfValue[f],v=1-c,p=c,y=o==="node-position"?n:a,w={x:y.x1*v+y.x2*p,y:y.y1*v+y.y2*p};r.segpts.push(w.x+i.x*h,w.y+i.y*h)}};Et.findLoopPoints=function(t,e,r,n){var a=t._private.rscratch,i=e.dirCounts,o=e.srcPos,s=t.pstyle("control-point-distances"),l=s?s.pfValue[0]:void 0,u=t.pstyle("loop-direction").pfValue,f=t.pstyle("loop-sweep").pfValue,c=t.pstyle("control-point-step-size").pfValue;a.edgeType="self";var h=r,v=c;n&&(h=0,v=l);var p=u-Math.PI/2,y=p-f/2,w=p+f/2,d=u+"_"+f;h=i[d]===void 0?i[d]=0:++i[d],a.ctrlpts=[o.x+Math.cos(y)*1.4*v*(h/3+1),o.y+Math.sin(y)*1.4*v*(h/3+1),o.x+Math.cos(w)*1.4*v*(h/3+1),o.y+Math.sin(w)*1.4*v*(h/3+1)]};Et.findCompoundLoopPoints=function(t,e,r,n){var a=t._private.rscratch;a.edgeType="compound";var i=e.srcPos,o=e.tgtPos,s=e.srcW,l=e.srcH,u=e.tgtW,f=e.tgtH,c=t.pstyle("control-point-step-size").pfValue,h=t.pstyle("control-point-distances"),v=h?h.pfValue[0]:void 0,p=r,y=c;n&&(p=0,y=v);var w=50,d={x:i.x-s/2,y:i.y-l/2},g={x:o.x-u/2,y:o.y-f/2},m={x:Math.min(d.x,g.x),y:Math.min(d.y,g.y)},b=.5,E=Math.max(b,Math.log(s*.01)),S=Math.max(b,Math.log(u*.01));a.ctrlpts=[m.x,m.y-(1+Math.pow(w,1.12)/100)*y*(p/3+1)*E,m.x-(1+Math.pow(w,1.12)/100)*y*(p/3+1)*S,m.y]};Et.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"};Et.findBezierPoints=function(t,e,r,n,a){var i=t._private.rscratch,o=e.vectorNormInverse,s=e.posPts,l=e.intersectionPts,u=t.pstyle("edge-distances").value,f=t.pstyle("control-point-step-size").pfValue,c=t.pstyle("control-point-distances"),h=t.pstyle("control-point-weights"),v=c&&h?Math.min(c.value.length,h.value.length):1,p=c?c.pfValue[0]:void 0,y=h.value[0],w=n;i.edgeType=w?"multibezier":"bezier",i.ctrlpts=[];for(var d=0;d<v;d++){var g=(.5-e.eles.length/2+r)*f*(a?-1:1),m=void 0,b=Rl(g);w&&(p=c?c.pfValue[d]:f,y=h.value[d]),n?m=p:m=p!==void 0?b*p:void 0;var E=m!==void 0?m:g,S=1-y,C=y,T=u==="node-position"?s:l,_={x:T.x1*S+T.x2*C,y:T.y1*S+T.y2*C};i.ctrlpts.push(_.x+o.x*E,_.y+o.y*E)}};Et.findTaxiPoints=function(t,e){var r=t._private.rscratch;r.edgeType="segments";var n="vertical",a="horizontal",i="leftward",o="rightward",s="downward",l="upward",u="auto",f=e.posPts,c=e.srcW,h=e.srcH,v=e.tgtW,p=e.tgtH,y=t.pstyle("edge-distances").value,w=y!=="node-position",d=t.pstyle("taxi-direction").value,g=d,m=t.pstyle("taxi-turn"),b=m.units==="%",E=m.pfValue,S=E<0,C=t.pstyle("taxi-turn-min-distance").pfValue,T=w?(c+v)/2:0,_=w?(h+p)/2:0,P=f.x2-f.x1,F=f.y2-f.y1,k=function(ce,xe){return ce>0?Math.max(ce-xe,0):Math.min(ce+xe,0)},R=k(P,T),x=k(F,_),W=!1;g===u?d=Math.abs(R)>Math.abs(x)?a:n:g===l||g===s?(d=n,W=!0):(g===i||g===o)&&(d=a,W=!0);var O=d===n,M=O?x:R,K=O?F:P,G=Rl(K),H=!1;!(W&&(b||S))&&(g===s&&K<0||g===l&&K>0||g===i&&K>0||g===o&&K<0)&&(G*=-1,M=G*Math.abs(M),H=!0);var A;if(b){var z=E<0?1+E:E;A=z*M}else{var $=E<0?M:0;A=$+E*G}var I=function(ce){return Math.abs(ce)<C||Math.abs(ce)>=Math.abs(M)},V=I(A),Y=I(Math.abs(M)-Math.abs(A)),U=V||Y;if(U&&!H)if(O){var Q=Math.abs(K)<=h/2,te=Math.abs(P)<=v/2;if(Q){var ae=(f.x1+f.x2)/2,oe=f.y1,ue=f.y2;r.segpts=[ae,oe,ae,ue]}else if(te){var de=(f.y1+f.y2)/2,D=f.x1,j=f.x2;r.segpts=[D,de,j,de]}else r.segpts=[f.x1,f.y2]}else{var q=Math.abs(K)<=c/2,L=Math.abs(F)<=p/2;if(q){var B=(f.y1+f.y2)/2,Z=f.x1,ne=f.x2;r.segpts=[Z,B,ne,B]}else if(L){var se=(f.x1+f.x2)/2,ee=f.y1,J=f.y2;r.segpts=[se,ee,se,J]}else r.segpts=[f.x2,f.y1]}else if(O){var N=f.y1+A+(w?h/2*G:0),X=f.x1,re=f.x2;r.segpts=[X,N,re,N]}else{var le=f.x1+A+(w?c/2*G:0),ie=f.y1,ve=f.y2;r.segpts=[le,ie,le,ve]}};Et.tryToCorrectInvalidPoints=function(t,e){var r=t._private.rscratch;if(r.edgeType==="bezier"){var n=e.srcPos,a=e.tgtPos,i=e.srcW,o=e.srcH,s=e.tgtW,l=e.tgtH,u=e.srcShape,f=e.tgtShape,c=!he(r.startX)||!he(r.startY),h=!he(r.arrowStartX)||!he(r.arrowStartY),v=!he(r.endX)||!he(r.endY),p=!he(r.arrowEndX)||!he(r.arrowEndY),y=3,w=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth,d=y*w,g=xr({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),m=g<d,b=xr({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),E=b<d,S=!1;if(c||h||m){S=!0;var C={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},T=Math.sqrt(C.x*C.x+C.y*C.y),_={x:C.x/T,y:C.y/T},P=Math.max(i,o),F={x:r.ctrlpts[0]+_.x*2*P,y:r.ctrlpts[1]+_.y*2*P},k=u.intersectLine(n.x,n.y,i,o,F.x,F.y,0);m?(r.ctrlpts[0]=r.ctrlpts[0]+_.x*(d-g),r.ctrlpts[1]=r.ctrlpts[1]+_.y*(d-g)):(r.ctrlpts[0]=k[0]+_.x*d,r.ctrlpts[1]=k[1]+_.y*d)}if(v||p||E){S=!0;var R={x:r.ctrlpts[0]-a.x,y:r.ctrlpts[1]-a.y},x=Math.sqrt(R.x*R.x+R.y*R.y),W={x:R.x/x,y:R.y/x},O=Math.max(i,o),M={x:r.ctrlpts[0]+W.x*2*O,y:r.ctrlpts[1]+W.y*2*O},K=f.intersectLine(a.x,a.y,s,l,M.x,M.y,0);E?(r.ctrlpts[0]=r.ctrlpts[0]+W.x*(d-b),r.ctrlpts[1]=r.ctrlpts[1]+W.y*(d-b)):(r.ctrlpts[0]=K[0]+W.x*d,r.ctrlpts[1]=K[1]+W.y*d)}S&&this.findEndpoints(t)}};Et.storeAllpts=function(t){var e=t._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var r=0;r+1<e.ctrlpts.length;r+=2)e.allpts.push(e.ctrlpts[r],e.ctrlpts[r+1]),r+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[r]+e.ctrlpts[r+2])/2,(e.ctrlpts[r+1]+e.ctrlpts[r+3])/2);e.allpts.push(e.endX,e.endY);var n,a;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,a=.5,e.midX=ot(e.allpts[n],e.allpts[n+2],e.allpts[n+4],a),e.midY=ot(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],a))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments")if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.segpts.length%4===0){var i=e.segpts.length/2,o=i-2;e.midX=(e.segpts[o]+e.segpts[i])/2,e.midY=(e.segpts[o+1]+e.segpts[i+1])/2}else{var s=e.segpts.length/2-1;e.midX=e.segpts[s],e.midY=e.segpts[s+1]}};Et.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||he(e.startX)&&he(e.startY)&&he(e.endX)&&he(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,ze("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};Et.findEdgeControlPoints=function(t){var e=this;if(!(!t||t.length===0)){for(var r=this,n=r.cy,a=n.hasCompoundNodes(),i={map:new qt,get:function(C){var T=this.map.get(C[0]);return T!=null?T.get(C[1]):null},set:function(C,T){var _=this.map.get(C[0]);_==null&&(_=new qt,this.map.set(C[0],_)),_.set(C[1],T)}},o=[],s=[],l=0;l<t.length;l++){var u=t[l],f=u._private,c=u.pstyle("curve-style").value;if(!(u.removed()||!u.takesUpSpace())){if(c==="haystack"){s.push(u);continue}var h=c==="unbundled-bezier"||c==="segments"||c==="straight"||c==="straight-triangle"||c==="taxi",v=c==="unbundled-bezier"||c==="bezier",p=f.source,y=f.target,w=p.poolIndex(),d=y.poolIndex(),g=[w,d].sort(),m=i.get(g);m==null&&(m={eles:[]},i.set(g,m),o.push(g)),m.eles.push(u),h&&(m.hasUnbundled=!0),v&&(m.hasBezier=!0)}}for(var b=function(C){var T=o[C],_=i.get(T),P=void 0;if(!_.hasUnbundled){var F=_.eles[0].parallelEdges().filter(function(J){return J.isBundledBezier()});Qi(_.eles),F.forEach(function(J){return _.eles.push(J)}),_.eles.sort(function(J,N){return J.poolIndex()-N.poolIndex()})}var k=_.eles[0],R=k.source(),x=k.target();if(R.poolIndex()>x.poolIndex()){var W=R;R=x,x=W}var O=_.srcPos=R.position(),M=_.tgtPos=x.position(),K=_.srcW=R.outerWidth(),G=_.srcH=R.outerHeight(),H=_.tgtW=x.outerWidth(),A=_.tgtH=x.outerHeight(),z=_.srcShape=r.nodeShapes[e.getNodeShape(R)],$=_.tgtShape=r.nodeShapes[e.getNodeShape(x)];_.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var I=0;I<_.eles.length;I++){var V=_.eles[I],Y=V[0]._private.rscratch,U=V.pstyle("curve-style").value,Q=U==="unbundled-bezier"||U==="segments"||U==="taxi",te=!R.same(V.source());if(!_.calculatedIntersection&&R!==x&&(_.hasBezier||_.hasUnbundled)){_.calculatedIntersection=!0;var ae=z.intersectLine(O.x,O.y,K,G,M.x,M.y,0),oe=_.srcIntn=ae,ue=$.intersectLine(M.x,M.y,H,A,O.x,O.y,0),de=_.tgtIntn=ue,D=_.intersectionPts={x1:ae[0],x2:ue[0],y1:ae[1],y2:ue[1]},j=_.posPts={x1:O.x,x2:M.x,y1:O.y,y2:M.y},q=ue[1]-ae[1],L=ue[0]-ae[0],B=Math.sqrt(L*L+q*q),Z=_.vector={x:L,y:q},ne=_.vectorNorm={x:Z.x/B,y:Z.y/B},se={x:-ne.y,y:ne.x};_.nodesOverlap=!he(B)||$.checkPoint(ae[0],ae[1],0,H,A,M.x,M.y)||z.checkPoint(ue[0],ue[1],0,K,G,O.x,O.y),_.vectorNormInverse=se,P={nodesOverlap:_.nodesOverlap,dirCounts:_.dirCounts,calculatedIntersection:!0,hasBezier:_.hasBezier,hasUnbundled:_.hasUnbundled,eles:_.eles,srcPos:M,tgtPos:O,srcW:H,srcH:A,tgtW:K,tgtH:G,srcIntn:de,tgtIntn:oe,srcShape:$,tgtShape:z,posPts:{x1:j.x2,y1:j.y2,x2:j.x1,y2:j.y1},intersectionPts:{x1:D.x2,y1:D.y2,x2:D.x1,y2:D.y1},vector:{x:-Z.x,y:-Z.y},vectorNorm:{x:-ne.x,y:-ne.y},vectorNormInverse:{x:-se.x,y:-se.y}}}var ee=te?P:_;Y.nodesOverlap=ee.nodesOverlap,Y.srcIntn=ee.srcIntn,Y.tgtIntn=ee.tgtIntn,a&&(R.isParent()||R.isChild()||x.isParent()||x.isChild())&&(R.parents().anySame(x)||x.parents().anySame(R)||R.same(x)&&R.isParent())?e.findCompoundLoopPoints(V,ee,I,Q):R===x?e.findLoopPoints(V,ee,I,Q):U==="segments"?e.findSegmentsPoints(V,ee):U==="taxi"?e.findTaxiPoints(V,ee):U==="straight"||!Q&&_.eles.length%2===1&&I===Math.floor(_.eles.length/2)?e.findStraightEdgePoints(V):e.findBezierPoints(V,ee,I,Q,te),e.findEndpoints(V),e.tryToCorrectInvalidPoints(V,ee),e.checkForInvalidEdgeWarning(V),e.storeAllpts(V),e.storeEdgeProjections(V),e.calculateArrowAngles(V),e.recalculateEdgeLabelProjections(V),e.calculateLabelAngles(V)}},E=0;E<o.length;E++)b(E);this.findHaystackPoints(s)}};function ku(t){var e=[];if(t!=null){for(var r=0;r<t.length;r+=2){var n=t[r],a=t[r+1];e.push({x:n,y:a})}return e}}Et.getSegmentPoints=function(t){var e=t[0]._private.rscratch,r=e.edgeType;if(r==="segments")return this.recalculateRenderedStyle(t),ku(e.segpts)};Et.getControlPoints=function(t){var e=t[0]._private.rscratch,r=e.edgeType;if(r==="bezier"||r==="multibezier"||r==="self"||r==="compound")return this.recalculateRenderedStyle(t),ku(e.ctrlpts)};Et.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var Hn={};Hn.manualEndptToPx=function(t,e){var r=this,n=t.position(),a=t.outerWidth(),i=t.outerHeight();if(e.value.length===2){var o=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(o[0]=o[0]*a),e.units[1]==="%"&&(o[1]=o[1]*i),o[0]+=n.x,o[1]+=n.y,o}else{var s=e.pfValue[0];s=-Math.PI/2+s;var l=2*Math.max(a,i),u=[n.x+Math.cos(s)*l,n.y+Math.sin(s)*l];return r.nodeShapes[this.getNodeShape(t)].intersectLine(n.x,n.y,a,i,u[0],u[1],0)}};Hn.findEndpoints=function(t){var e=this,r,n=t.source()[0],a=t.target()[0],i=n.position(),o=a.position(),s=t.pstyle("target-arrow-shape").value,l=t.pstyle("source-arrow-shape").value,u=t.pstyle("target-distance-from-node").pfValue,f=t.pstyle("source-distance-from-node").pfValue,c=t.pstyle("curve-style").value,h=t._private.rscratch,v=h.edgeType,p=c==="taxi",y=v==="self"||v==="compound",w=v==="bezier"||v==="multibezier"||y,d=v!=="bezier",g=v==="straight"||v==="segments",m=v==="segments",b=w||d||g,E=y||p,S=t.pstyle("source-endpoint"),C=E?"outside-to-node":S.value,T=t.pstyle("target-endpoint"),_=E?"outside-to-node":T.value;h.srcManEndpt=S,h.tgtManEndpt=T;var P,F,k,R;if(w){var x=[h.ctrlpts[0],h.ctrlpts[1]],W=d?[h.ctrlpts[h.ctrlpts.length-2],h.ctrlpts[h.ctrlpts.length-1]]:x;P=W,F=x}else if(g){var O=m?h.segpts.slice(0,2):[o.x,o.y],M=m?h.segpts.slice(h.segpts.length-2):[i.x,i.y];P=M,F=O}if(_==="inside-to-node")r=[o.x,o.y];else if(T.units)r=this.manualEndptToPx(a,T);else if(_==="outside-to-line")r=h.tgtIntn;else if(_==="outside-to-node"||_==="outside-to-node-or-label"?k=P:(_==="outside-to-line"||_==="outside-to-line-or-label")&&(k=[i.x,i.y]),r=e.nodeShapes[this.getNodeShape(a)].intersectLine(o.x,o.y,a.outerWidth(),a.outerHeight(),k[0],k[1],0),_==="outside-to-node-or-label"||_==="outside-to-line-or-label"){var K=a._private.rscratch,G=K.labelWidth,H=K.labelHeight,A=K.labelX,z=K.labelY,$=G/2,I=H/2,V=a.pstyle("text-valign").value;V==="top"?z-=I:V==="bottom"&&(z+=I);var Y=a.pstyle("text-halign").value;Y==="left"?A-=$:Y==="right"&&(A+=$);var U=Dn(k[0],k[1],[A-$,z-I,A+$,z-I,A+$,z+I,A-$,z+I],o.x,o.y);if(U.length>0){var Q=i,te=mr(Q,$r(r)),ae=mr(Q,$r(U)),oe=te;if(ae<te&&(r=U,oe=ae),U.length>2){var ue=mr(Q,{x:U[2],y:U[3]});ue<oe&&(r=[U[2],U[3]])}}}var de=Qn(r,P,e.arrowShapes[s].spacing(t)+u),D=Qn(r,P,e.arrowShapes[s].gap(t)+u);if(h.endX=D[0],h.endY=D[1],h.arrowEndX=de[0],h.arrowEndY=de[1],C==="inside-to-node")r=[i.x,i.y];else if(S.units)r=this.manualEndptToPx(n,S);else if(C==="outside-to-line")r=h.srcIntn;else if(C==="outside-to-node"||C==="outside-to-node-or-label"?R=F:(C==="outside-to-line"||C==="outside-to-line-or-label")&&(R=[o.x,o.y]),r=e.nodeShapes[this.getNodeShape(n)].intersectLine(i.x,i.y,n.outerWidth(),n.outerHeight(),R[0],R[1],0),C==="outside-to-node-or-label"||C==="outside-to-line-or-label"){var j=n._private.rscratch,q=j.labelWidth,L=j.labelHeight,B=j.labelX,Z=j.labelY,ne=q/2,se=L/2,ee=n.pstyle("text-valign").value;ee==="top"?Z-=se:ee==="bottom"&&(Z+=se);var J=n.pstyle("text-halign").value;J==="left"?B-=ne:J==="right"&&(B+=ne);var N=Dn(R[0],R[1],[B-ne,Z-se,B+ne,Z-se,B+ne,Z+se,B-ne,Z+se],i.x,i.y);if(N.length>0){var X=o,re=mr(X,$r(r)),le=mr(X,$r(N)),ie=re;if(le<re&&(r=[N[0],N[1]],ie=le),N.length>2){var ve=mr(X,{x:N[2],y:N[3]});ve<ie&&(r=[N[2],N[3]])}}}var fe=Qn(r,F,e.arrowShapes[l].spacing(t)+f),ce=Qn(r,F,e.arrowShapes[l].gap(t)+f);h.startX=ce[0],h.startY=ce[1],h.arrowStartX=fe[0],h.arrowStartY=fe[1],b&&(!he(h.startX)||!he(h.startY)||!he(h.endX)||!he(h.endY)?h.badLine=!0:h.badLine=!1)};Hn.getSourceEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};Hn.getTargetEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var fo={};function Yy(t,e,r){for(var n=function(u,f,c,h){return ot(u,f,c,h)},a=e._private,i=a.rstyle.bezierPts,o=0;o<t.bezierProjPcts.length;o++){var s=t.bezierProjPcts[o];i.push({x:n(r[0],r[2],r[4],s),y:n(r[1],r[3],r[5],s)})}}fo.storeEdgeProjections=function(t){var e=t._private,r=e.rscratch,n=r.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var a=0;a+5<r.allpts.length;a+=4)Yy(this,t,r.allpts.slice(a,a+6))}else if(n==="segments")for(var i=e.rstyle.linePts=[],a=0;a+1<r.allpts.length;a+=2)i.push({x:r.allpts[a],y:r.allpts[a+1]});else if(n==="haystack"){var o=r.haystackPts;e.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth};fo.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var Wt={};Wt.recalculateNodeLabelProjection=function(t){var e=t.pstyle("label").strValue;if(!lr(e)){var r,n,a=t._private,i=t.width(),o=t.height(),s=t.padding(),l=t.position(),u=t.pstyle("text-halign").strValue,f=t.pstyle("text-valign").strValue,c=a.rscratch,h=a.rstyle;switch(u){case"left":r=l.x-i/2-s;break;case"right":r=l.x+i/2+s;break;default:r=l.x}switch(f){case"top":n=l.y-o/2-s;break;case"bottom":n=l.y+o/2+s;break;default:n=l.y}c.labelX=r,c.labelY=n,h.labelX=r,h.labelY=n,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}};var _u=function(e,r){var n=Math.atan(r/e);return e===0&&n<0&&(n=n*-1),n},Du=function(e,r){var n=r.x-e.x,a=r.y-e.y;return _u(n,a)},Xy=function(e,r,n,a){var i=_n(0,a-.001,1),o=_n(0,a+.001,1),s=Gr(e,r,n,i),l=Gr(e,r,n,o);return Du(s,l)};Wt.recalculateEdgeLabelProjections=function(t){var e,r=t._private,n=r.rscratch,a=this,i={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(i.mid||i.source||i.target){e={x:n.midX,y:n.midY};var o=function(c,h,v){nr(r.rscratch,c,h,v),nr(r.rstyle,c,h,v)};o("labelX",null,e.x),o("labelY",null,e.y);var s=_u(n.midDispX,n.midDispY);o("labelAutoAngle",null,s);var l=function f(){if(f.cache)return f.cache;for(var c=[],h=0;h+5<n.allpts.length;h+=4){var v={x:n.allpts[h],y:n.allpts[h+1]},p={x:n.allpts[h+2],y:n.allpts[h+3]},y={x:n.allpts[h+4],y:n.allpts[h+5]};c.push({p0:v,p1:p,p2:y,startDist:0,length:0,segments:[]})}var w=r.rstyle.bezierPts,d=a.bezierProjPcts.length;function g(C,T,_,P,F){var k=xr(T,_),R=C.segments[C.segments.length-1],x={p0:T,p1:_,t0:P,t1:F,startDist:R?R.startDist+R.length:0,length:k};C.segments.push(x),C.length+=k}for(var m=0;m<c.length;m++){var b=c[m],E=c[m-1];E&&(b.startDist=E.startDist+E.length),g(b,b.p0,w[m*d],0,a.bezierProjPcts[0]);for(var S=0;S<d-1;S++)g(b,w[m*d+S],w[m*d+S+1],a.bezierProjPcts[S],a.bezierProjPcts[S+1]);g(b,w[m*d+d-1],b.p2,a.bezierProjPcts[d-1],1)}return f.cache=c},u=function(c){var h,v=c==="source";if(i[c]){var p=t.pstyle(c+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var y=l(),w,d=0,g=0,m=0;m<y.length;m++){for(var b=y[v?m:y.length-1-m],E=0;E<b.segments.length;E++){var S=b.segments[v?E:b.segments.length-1-E],C=m===y.length-1&&E===b.segments.length-1;if(d=g,g+=S.length,g>=p||C){w={cp:b,segment:S};break}}if(w)break}var T=w.cp,_=w.segment,P=(p-d)/_.length,F=_.t1-_.t0,k=v?_.t0+F*P:_.t1-F*P;k=_n(0,k,1),e=Gr(T.p0,T.p1,T.p2,k),h=Xy(T.p0,T.p1,T.p2,k);break}case"straight":case"segments":case"haystack":{for(var R=0,x,W,O,M,K=n.allpts.length,G=0;G+3<K&&(v?(O={x:n.allpts[G],y:n.allpts[G+1]},M={x:n.allpts[G+2],y:n.allpts[G+3]}):(O={x:n.allpts[K-2-G],y:n.allpts[K-1-G]},M={x:n.allpts[K-4-G],y:n.allpts[K-3-G]}),x=xr(O,M),W=R,R+=x,!(R>=p));G+=2);var H=p-W,A=H/x;A=_n(0,A,1),e=fp(O,M,A),h=Du(O,M);break}}o("labelX",c,e.x),o("labelY",c,e.y),o("labelAutoAngle",c,h)}};u("source"),u("target"),this.applyLabelDimensions(t)}};Wt.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))};Wt.applyPrefixedLabelDimensions=function(t,e){var r=t._private,n=this.getLabelText(t,e),a=this.calculateLabelDimensions(t,n),i=t.pstyle("line-height").pfValue,o=t.pstyle("text-wrap").strValue,s=Rt(r.rscratch,"labelWrapCachedLines",e)||[],l=o!=="wrap"?1:Math.max(s.length,1),u=a.height/l,f=u*i,c=a.width,h=a.height+(l-1)*(i-1)*u;nr(r.rstyle,"labelWidth",e,c),nr(r.rscratch,"labelWidth",e,c),nr(r.rstyle,"labelHeight",e,h),nr(r.rscratch,"labelHeight",e,h),nr(r.rscratch,"labelLineHeight",e,f)};Wt.getLabelText=function(t,e){var r=t._private,n=e?e+"-":"",a=t.pstyle(n+"label").strValue,i=t.pstyle("text-transform").value,o=function(H,A){return A?(nr(r.rscratch,H,e,A),A):Rt(r.rscratch,H,e)};if(!a)return"";i=="none"||(i=="uppercase"?a=a.toUpperCase():i=="lowercase"&&(a=a.toLowerCase()));var s=t.pstyle("text-wrap").value;if(s==="wrap"){var l=o("labelKey");if(l!=null&&o("labelWrapKey")===l)return o("labelWrapCachedText");for(var u="​",f=a.split(`
`),c=t.pstyle("text-max-width").pfValue,h=t.pstyle("text-overflow-wrap").value,v=h==="anywhere",p=[],y=/[\s\u200b]+/,w=v?"":" ",d=0;d<f.length;d++){var g=f[d],m=this.calculateLabelDimensions(t,g),b=m.width;if(v){var E=g.split("").join(u);g=E}if(b>c){for(var S=g.split(y),C="",T=0;T<S.length;T++){var _=S[T],P=C.length===0?_:C+w+_,F=this.calculateLabelDimensions(t,P),k=F.width;k<=c?C+=_+w:(C&&p.push(C),C=_+w)}C.match(/^[\s\u200b]+$/)||p.push(C)}else p.push(g)}o("labelWrapCachedLines",p),a=o("labelWrapCachedText",p.join(`
`)),o("labelWrapKey",l)}else if(s==="ellipsis"){var R=t.pstyle("text-max-width").pfValue,x="",W="…",O=!1;if(this.calculateLabelDimensions(t,a).width<R)return a;for(var M=0;M<a.length;M++){var K=this.calculateLabelDimensions(t,x+a[M]+W).width;if(K>R)break;x+=a[M],M===a.length-1&&(O=!0)}return O||(x+=W),x}return a};Wt.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,r=t.pstyle("text-halign").strValue;if(e==="auto")if(t.isNode())switch(r){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};Wt.calculateLabelDimensions=function(t,e){var r=this,n=wr(e,t._private.labelDimsKey),a=r.labelDimCache||(r.labelDimCache=[]),i=a[n];if(i!=null)return i;var o=0,s=t.pstyle("font-style").strValue,l=t.pstyle("font-size").pfValue,u=t.pstyle("font-family").strValue,f=t.pstyle("font-weight").strValue,c=this.labelCalcCanvas,h=this.labelCalcCanvasContext;if(!c){c=this.labelCalcCanvas=document.createElement("canvas"),h=this.labelCalcCanvasContext=c.getContext("2d");var v=c.style;v.position="absolute",v.left="-9999px",v.top="-9999px",v.zIndex="-1",v.visibility="hidden",v.pointerEvents="none"}h.font="".concat(s," ").concat(f," ").concat(l,"px ").concat(u);for(var p=0,y=0,w=e.split(`
`),d=0;d<w.length;d++){var g=w[d],m=h.measureText(g),b=Math.ceil(m.width),E=l;p=Math.max(b,p),y+=E}return p+=o,y+=o,a[n]={width:p,height:y}};Wt.calculateLabelAngle=function(t,e){var r=t._private,n=r.rscratch,a=t.isEdge(),i=e?e+"-":"",o=t.pstyle(i+"text-rotation"),s=o.strValue;return s==="none"?0:a&&s==="autorotate"?n.labelAutoAngle:s==="autorotate"?0:o.pfValue};Wt.calculateLabelAngles=function(t){var e=this,r=t.isEdge(),n=t._private,a=n.rscratch;a.labelAngle=e.calculateLabelAngle(t),r&&(a.sourceLabelAngle=e.calculateLabelAngle(t,"source"),a.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var Tu={},ks=28,_s=!1;Tu.getNodeShape=function(t){var e=this,r=t.pstyle("shape").value;if(r==="cutrectangle"&&(t.width()<ks||t.height()<ks))return _s||(ze("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),_s=!0),"rectangle";if(t.isParent())return r==="rectangle"||r==="roundrectangle"||r==="round-rectangle"||r==="cutrectangle"||r==="cut-rectangle"||r==="barrel"?r:"rectangle";if(r==="polygon"){var n=t.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return r};var Ka={};Ka.registerCalculationListeners=function(){var t=this.cy,e=t.collection(),r=this,n=function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(o),s)for(var l=0;l<o.length;l++){var u=o[l],f=u._private,c=f.rstyle;c.clean=!1,c.cleanConnected=!1}};r.binder(t).on("bounds.* dirty.*",function(o){var s=o.target;n(s)}).on("style.* background.*",function(o){var s=o.target;n(s,!1)});var a=function(o){if(o){var s=r.onUpdateEleCalcsFns;e.cleanStyle();for(var l=0;l<e.length;l++){var u=e[l],f=u._private.rstyle;u.isNode()&&!f.cleanConnected&&(n(u.connectedEdges()),f.cleanConnected=!0)}if(s)for(var c=0;c<s.length;c++){var h=s[c];h(o,e)}r.recalculateRenderedStyle(e),e=t.collection()}};r.flushRenderedStyleQueue=function(){a(!0)},r.beforeRender(a,r.beforeRenderPriorities.eleCalcs)};Ka.onUpdateEleCalcs=function(t){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(t)};Ka.recalculateRenderedStyle=function(t,e){var r=function(b){return b._private.rstyle.cleanConnected},n=[],a=[];if(!this.destroyed){e===void 0&&(e=!0);for(var i=0;i<t.length;i++){var o=t[i],s=o._private,l=s.rstyle;o.isEdge()&&(!r(o.source())||!r(o.target()))&&(l.clean=!1),!(e&&l.clean||o.removed())&&o.pstyle("display").value!=="none"&&(s.group==="nodes"?a.push(o):n.push(o),l.clean=!0)}for(var u=0;u<a.length;u++){var f=a[u],c=f._private,h=c.rstyle,v=f.position();this.recalculateNodeLabelProjection(f),h.nodeX=v.x,h.nodeY=v.y,h.nodeW=f.pstyle("width").pfValue,h.nodeH=f.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var p=0;p<n.length;p++){var y=n[p],w=y._private,d=w.rstyle,g=w.rscratch;d.srcX=g.arrowStartX,d.srcY=g.arrowStartY,d.tgtX=g.arrowEndX,d.tgtY=g.arrowEndY,d.midX=g.midX,d.midY=g.midY,d.labelAngle=g.labelAngle,d.sourceLabelAngle=g.sourceLabelAngle,d.targetLabelAngle=g.targetLabelAngle}}};var Za={};Za.updateCachedGrabbedEles=function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],r=0;r<t.length;r++){var n=t[r],a=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):a.inDragLayer?t.drag.push(n):t.nondrag.push(n)}for(var r=0;r<e.length;r++){var n=e[r];t.drag.push(n)}}};Za.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};Za.getCachedZSortedEles=function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(vu),e.interactive=e.filter(function(r){return r.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var Pu={};[Dr,Da,Et,Hn,fo,Wt,Tu,Ka,Za].forEach(function(t){be(Pu,t)});var zu={};zu.getCachedImage=function(t,e,r){var n=this,a=n.imageCache=n.imageCache||{},i=a[t];if(i)return i.image.complete||i.image.addEventListener("load",r),i.image;i=a[t]=a[t]||{};var o=i.image=new Image;o.addEventListener("load",r),o.addEventListener("error",function(){o.error=!0});var s="data:",l=t.substring(0,s.length).toLowerCase()===s;return l||(e=e==="null"?null:e,o.crossOrigin=e),o.src=t,o};var nn={};nn.registerBinding=function(t,e,r,n){var a=Array.prototype.slice.apply(arguments,[1]),i=this.binder(t);return i.on.apply(i,a)};nn.binder=function(t){var e=this,r=t===window||t===document||t===document.body||gg(t);if(e.supportsPassiveEvents==null){var n=!1;try{var a=Object.defineProperty({},"passive",{get:function(){return n=!0,!0}});window.addEventListener("test",null,a)}catch{}e.supportsPassiveEvents=n}var i=function(s,l,u){var f=Array.prototype.slice.call(arguments);return r&&e.supportsPassiveEvents&&(f[2]={capture:u??!1,passive:!1,once:!1}),e.bindings.push({target:t,args:f}),(t.addEventListener||t.on).apply(t,f),this};return{on:i,addEventListener:i,addListener:i,bind:i}};nn.nodeIsDraggable=function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()};nn.nodeIsGrabbable=function(t){return this.nodeIsDraggable(t)&&t.interactive()};nn.load=function(){var t=this,e=function(N){return N.selected()},r=function(N,X,re,le){N==null&&(N=t.cy);for(var ie=0;ie<X.length;ie++){var ve=X[ie];N.emit({originalEvent:re,type:ve,position:le})}},n=function(N){return N.shiftKey||N.metaKey||N.ctrlKey},a=function(N,X){var re=!0;if(t.cy.hasCompoundNodes()&&N&&N.pannable())for(var le=0;X&&le<X.length;le++){var N=X[le];if(N.isNode()&&N.isParent()&&!N.pannable()){re=!1;break}}else re=!0;return re},i=function(N){N[0]._private.grabbed=!0},o=function(N){N[0]._private.grabbed=!1},s=function(N){N[0]._private.rscratch.inDragLayer=!0},l=function(N){N[0]._private.rscratch.inDragLayer=!1},u=function(N){N[0]._private.rscratch.isGrabTarget=!0},f=function(N){N[0]._private.rscratch.isGrabTarget=!1},c=function(N,X){var re=X.addToList,le=re.has(N);!le&&N.grabbable()&&!N.locked()&&(re.merge(N),i(N))},h=function(N,X){if(N.cy().hasCompoundNodes()&&!(X.inDragLayer==null&&X.addToList==null)){var re=N.descendants();X.inDragLayer&&(re.forEach(s),re.connectedEdges().forEach(s)),X.addToList&&c(re,X)}},v=function(N,X){X=X||{};var re=N.cy().hasCompoundNodes();X.inDragLayer&&(N.forEach(s),N.neighborhood().stdFilter(function(le){return!re||le.isEdge()}).forEach(s)),X.addToList&&N.forEach(function(le){c(le,X)}),h(N,X),w(N,{inDragLayer:X.inDragLayer}),t.updateCachedGrabbedEles()},p=v,y=function(N){N&&(t.getCachedZSortedEles().forEach(function(X){o(X),l(X),f(X)}),t.updateCachedGrabbedEles())},w=function(N,X){if(!(X.inDragLayer==null&&X.addToList==null)&&N.cy().hasCompoundNodes()){var re=N.ancestors().orphans();if(!re.same(N)){var le=re.descendants().spawnSelf().merge(re).unmerge(N).unmerge(N.descendants()),ie=le.connectedEdges();X.inDragLayer&&(ie.forEach(s),le.forEach(s)),X.addToList&&le.forEach(function(ve){c(ve,X)})}}},d=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},g=typeof MutationObserver<"u",m=typeof ResizeObserver<"u";g?(t.removeObserver=new MutationObserver(function(J){for(var N=0;N<J.length;N++){var X=J[N],re=X.removedNodes;if(re)for(var le=0;le<re.length;le++){var ie=re[le];if(ie===t.container){t.destroy();break}}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(J){t.destroy()});var b=Oa.default(function(){t.cy.resize()},100);g&&(t.styleObserver=new MutationObserver(b),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(window,"resize",b),m&&(t.resizeObserver=new ResizeObserver(b),t.resizeObserver.observe(t.container));var E=function(N,X){for(;N!=null;)X(N),N=N.parentNode},S=function(){t.invalidateContainerClientCoordsCache()};E(t.container,function(J){t.registerBinding(J,"transitionend",S),t.registerBinding(J,"animationend",S),t.registerBinding(J,"scroll",S)}),t.registerBinding(t.container,"contextmenu",function(J){J.preventDefault()});var C=function(){return t.selection[4]!==0},T=function(N){for(var X=t.findContainerClientCoords(),re=X[0],le=X[1],ie=X[2],ve=X[3],fe=N.touches?N.touches:[N],ce=!1,xe=0;xe<fe.length;xe++){var pe=fe[xe];if(re<=pe.clientX&&pe.clientX<=re+ie&&le<=pe.clientY&&pe.clientY<=le+ve){ce=!0;break}}if(!ce)return!1;for(var we=t.container,Se=N.target,ye=Se.parentNode,Ee=!1;ye;){if(ye===we){Ee=!0;break}ye=ye.parentNode}return!!Ee};t.registerBinding(t.container,"mousedown",function(N){if(T(N)){N.preventDefault(),d(),t.hoverData.capture=!0,t.hoverData.which=N.which;var X=t.cy,re=[N.clientX,N.clientY],le=t.projectIntoViewport(re[0],re[1]),ie=t.selection,ve=t.findNearestElements(le[0],le[1],!0,!1),fe=ve[0],ce=t.dragData.possibleDragElements;t.hoverData.mdownPos=le,t.hoverData.mdownGPos=re;var xe=function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var $e=t.hoverData.down;$e?$e.emit({originalEvent:N,type:"taphold",position:{x:le[0],y:le[1]}}):X.emit({originalEvent:N,type:"taphold",position:{x:le[0],y:le[1]}})}},t.tapholdDuration)};if(N.which==3){t.hoverData.cxtStarted=!0;var pe={originalEvent:N,type:"cxttapstart",position:{x:le[0],y:le[1]}};fe?(fe.activate(),fe.emit(pe),t.hoverData.down=fe):X.emit(pe),t.hoverData.downTime=new Date().getTime(),t.hoverData.cxtDragged=!1}else if(N.which==1){fe&&fe.activate();{if(fe!=null&&t.nodeIsGrabbable(fe)){var we=function($e){return{originalEvent:N,type:$e,position:{x:le[0],y:le[1]}}},Se=function($e){$e.emit(we("grab"))};if(u(fe),!fe.selected())ce=t.dragData.possibleDragElements=X.collection(),p(fe,{addToList:ce}),fe.emit(we("grabon")).emit(we("grab"));else{ce=t.dragData.possibleDragElements=X.collection();var ye=X.$(function(Ee){return Ee.isNode()&&Ee.selected()&&t.nodeIsGrabbable(Ee)});v(ye,{addToList:ce}),fe.emit(we("grabon")),ye.forEach(Se)}t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=fe,t.hoverData.downs=ve,t.hoverData.downTime=new Date().getTime()}r(fe,["mousedown","tapstart","vmousedown"],N,{x:le[0],y:le[1]}),fe==null?(ie[4]=1,t.data.bgActivePosistion={x:le[0],y:le[1]},t.redrawHint("select",!0),t.redraw()):fe.pannable()&&(ie[4]=1),xe()}ie[0]=ie[2]=le[0],ie[1]=ie[3]=le[1]}},!1),t.registerBinding(window,"mousemove",function(N){var X=t.hoverData.capture;if(!(!X&&!T(N))){var re=!1,le=t.cy,ie=le.zoom(),ve=[N.clientX,N.clientY],fe=t.projectIntoViewport(ve[0],ve[1]),ce=t.hoverData.mdownPos,xe=t.hoverData.mdownGPos,pe=t.selection,we=null;!t.hoverData.draggingEles&&!t.hoverData.dragging&&!t.hoverData.selecting&&(we=t.findNearestElement(fe[0],fe[1],!0,!1));var Se=t.hoverData.last,ye=t.hoverData.down,Ee=[fe[0]-pe[2],fe[1]-pe[3]],$e=t.dragData.possibleDragElements,et;if(xe){var Pt=ve[0]-xe[0],Ct=Pt*Pt,qe=ve[1]-xe[1],lt=qe*qe,wt=Ct+lt;t.hoverData.isOverThresholdDrag=et=wt>=t.desktopTapThreshold2}var Kt=n(N);et&&(t.hoverData.tapholdCancelled=!0);var er=function(){var $t=t.hoverData.dragDelta=t.hoverData.dragDelta||[];$t.length===0?($t.push(Ee[0]),$t.push(Ee[1])):($t[0]+=Ee[0],$t[1]+=Ee[1])};re=!0,r(we,["mousemove","vmousemove","tapdrag"],N,{x:fe[0],y:fe[1]});var Pr=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||le.emit({originalEvent:N,type:"boxstart",position:{x:fe[0],y:fe[1]}}),pe[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(t.hoverData.which===3){if(et){var gr={originalEvent:N,type:"cxtdrag",position:{x:fe[0],y:fe[1]}};ye?ye.emit(gr):le.emit(gr),t.hoverData.cxtDragged=!0,(!t.hoverData.cxtOver||we!==t.hoverData.cxtOver)&&(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:N,type:"cxtdragout",position:{x:fe[0],y:fe[1]}}),t.hoverData.cxtOver=we,we&&we.emit({originalEvent:N,type:"cxtdragover",position:{x:fe[0],y:fe[1]}}))}}else if(t.hoverData.dragging){if(re=!0,le.panningEnabled()&&le.userPanningEnabled()){var zr;if(t.hoverData.justStartedPan){var Kn=t.hoverData.mdownPos;zr={x:(fe[0]-Kn[0])*ie,y:(fe[1]-Kn[1])*ie},t.hoverData.justStartedPan=!1}else zr={x:Ee[0]*ie,y:Ee[1]*ie};le.panBy(zr),le.emit("dragpan"),t.hoverData.dragged=!0}fe=t.projectIntoViewport(N.clientX,N.clientY)}else if(pe[4]==1&&(ye==null||ye.pannable())){if(et){if(!t.hoverData.dragging&&le.boxSelectionEnabled()&&(Kt||!le.panningEnabled()||!le.userPanningEnabled()))Pr();else if(!t.hoverData.selecting&&le.panningEnabled()&&le.userPanningEnabled()){var pr=a(ye,t.hoverData.downs);pr&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,pe[4]=0,t.data.bgActivePosistion=$r(ce),t.redrawHint("select",!0),t.redraw())}ye&&ye.pannable()&&ye.active()&&ye.unactivate()}}else{if(ye&&ye.pannable()&&ye.active()&&ye.unactivate(),(!ye||!ye.grabbed())&&we!=Se&&(Se&&r(Se,["mouseout","tapdragout"],N,{x:fe[0],y:fe[1]}),we&&r(we,["mouseover","tapdragover"],N,{x:fe[0],y:fe[1]}),t.hoverData.last=we),ye)if(et){if(le.boxSelectionEnabled()&&Kt)ye&&ye.grabbed()&&(y($e),ye.emit("freeon"),$e.emit("free"),t.dragData.didDrag&&(ye.emit("dragfreeon"),$e.emit("dragfree"))),Pr();else if(ye&&ye.grabbed()&&t.nodeIsDraggable(ye)){var St=!t.dragData.didDrag;St&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||v($e,{inDragLayer:!0});var vt={x:0,y:0};if(he(Ee[0])&&he(Ee[1])&&(vt.x+=Ee[0],vt.y+=Ee[1],St)){var kt=t.hoverData.dragDelta;kt&&he(kt[0])&&he(kt[1])&&(vt.x+=kt[0],vt.y+=kt[1])}t.hoverData.draggingEles=!0,$e.silentShift(vt).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else er();re=!0}if(pe[2]=fe[0],pe[3]=fe[1],re)return N.stopPropagation&&N.stopPropagation(),N.preventDefault&&N.preventDefault(),!1}},!1);var _,P,F;t.registerBinding(window,"mouseup",function(N){var X=t.hoverData.capture;if(X){t.hoverData.capture=!1;var re=t.cy,le=t.projectIntoViewport(N.clientX,N.clientY),ie=t.selection,ve=t.findNearestElement(le[0],le[1],!0,!1),fe=t.dragData.possibleDragElements,ce=t.hoverData.down,xe=n(N);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,ce&&ce.unactivate(),t.hoverData.which===3){var pe={originalEvent:N,type:"cxttapend",position:{x:le[0],y:le[1]}};if(ce?ce.emit(pe):re.emit(pe),!t.hoverData.cxtDragged){var we={originalEvent:N,type:"cxttap",position:{x:le[0],y:le[1]}};ce?ce.emit(we):re.emit(we)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(t.hoverData.which===1){if(r(ve,["mouseup","tapend","vmouseup"],N,{x:le[0],y:le[1]}),!t.dragData.didDrag&&!t.hoverData.dragged&&!t.hoverData.selecting&&!t.hoverData.isOverThresholdDrag&&(r(ce,["click","tap","vclick"],N,{x:le[0],y:le[1]}),P=!1,N.timeStamp-F<=re.multiClickDebounceTime()?(_&&clearTimeout(_),P=!0,F=null,r(ce,["dblclick","dbltap","vdblclick"],N,{x:le[0],y:le[1]})):(_=setTimeout(function(){P||r(ce,["oneclick","onetap","voneclick"],N,{x:le[0],y:le[1]})},re.multiClickDebounceTime()),F=N.timeStamp)),ce==null&&!t.dragData.didDrag&&!t.hoverData.selecting&&!t.hoverData.dragged&&!n(N)&&(re.$(e).unselect(["tapunselect"]),fe.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=fe=re.collection()),ve==ce&&!t.dragData.didDrag&&!t.hoverData.selecting&&ve!=null&&ve._private.selectable&&(t.hoverData.dragging||(re.selectionType()==="additive"||xe?ve.selected()?ve.unselect(["tapunselect"]):ve.select(["tapselect"]):xe||(re.$(e).unmerge(ve).unselect(["tapunselect"]),ve.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var Se=re.collection(t.getAllInBox(ie[0],ie[1],ie[2],ie[3]));t.redrawHint("select",!0),Se.length>0&&t.redrawHint("eles",!0),re.emit({type:"boxend",originalEvent:N,position:{x:le[0],y:le[1]}});var ye=function(et){return et.selectable()&&!et.selected()};re.selectionType()==="additive"||xe||re.$(e).unmerge(Se).unselect(),Se.emit("box").stdFilter(ye).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!ie[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var Ee=ce&&ce.grabbed();y(fe),Ee&&(ce.emit("freeon"),fe.emit("free"),t.dragData.didDrag&&(ce.emit("dragfreeon"),fe.emit("dragfree")))}}ie[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null}},!1);var k=function(N){if(!t.scrollingPage){var X=t.cy,re=X.zoom(),le=X.pan(),ie=t.projectIntoViewport(N.clientX,N.clientY),ve=[ie[0]*re+le.x,ie[1]*re+le.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||C()){N.preventDefault();return}if(X.panningEnabled()&&X.userPanningEnabled()&&X.zoomingEnabled()&&X.userZoomingEnabled()){N.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150);var fe;N.deltaY!=null?fe=N.deltaY/-250:N.wheelDeltaY!=null?fe=N.wheelDeltaY/1e3:fe=N.wheelDelta/1e3,fe=fe*t.wheelSensitivity;var ce=N.deltaMode===1;ce&&(fe*=33);var xe=X.zoom()*Math.pow(10,fe);N.type==="gesturechange"&&(xe=t.gestureStartZoom*N.scale),X.zoom({level:xe,renderedPosition:{x:ve[0],y:ve[1]}}),X.emit(N.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};t.registerBinding(t.container,"wheel",k,!0),t.registerBinding(window,"scroll",function(N){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(N){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||N.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(J){t.hasTouchStarted||k(J)},!0),t.registerBinding(t.container,"mouseout",function(N){var X=t.projectIntoViewport(N.clientX,N.clientY);t.cy.emit({originalEvent:N,type:"mouseout",position:{x:X[0],y:X[1]}})},!1),t.registerBinding(t.container,"mouseover",function(N){var X=t.projectIntoViewport(N.clientX,N.clientY);t.cy.emit({originalEvent:N,type:"mouseover",position:{x:X[0],y:X[1]}})},!1);var R,x,W,O,M,K,G,H,A,z,$,I,V,Y=function(N,X,re,le){return Math.sqrt((re-N)*(re-N)+(le-X)*(le-X))},U=function(N,X,re,le){return(re-N)*(re-N)+(le-X)*(le-X)},Q;t.registerBinding(t.container,"touchstart",Q=function(N){if(t.hasTouchStarted=!0,!!T(N)){d(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var X=t.cy,re=t.touchData.now,le=t.touchData.earlier;if(N.touches[0]){var ie=t.projectIntoViewport(N.touches[0].clientX,N.touches[0].clientY);re[0]=ie[0],re[1]=ie[1]}if(N.touches[1]){var ie=t.projectIntoViewport(N.touches[1].clientX,N.touches[1].clientY);re[2]=ie[0],re[3]=ie[1]}if(N.touches[2]){var ie=t.projectIntoViewport(N.touches[2].clientX,N.touches[2].clientY);re[4]=ie[0],re[5]=ie[1]}if(N.touches[1]){t.touchData.singleTouchMoved=!0,y(t.dragData.touchDragEles);var ve=t.findContainerClientCoords();A=ve[0],z=ve[1],$=ve[2],I=ve[3],R=N.touches[0].clientX-A,x=N.touches[0].clientY-z,W=N.touches[1].clientX-A,O=N.touches[1].clientY-z,V=0<=R&&R<=$&&0<=W&&W<=$&&0<=x&&x<=I&&0<=O&&O<=I;var fe=X.pan(),ce=X.zoom();M=Y(R,x,W,O),K=U(R,x,W,O),G=[(R+W)/2,(x+O)/2],H=[(G[0]-fe.x)/ce,(G[1]-fe.y)/ce];var xe=200,pe=xe*xe;if(K<pe&&!N.touches[2]){var we=t.findNearestElement(re[0],re[1],!0,!0),Se=t.findNearestElement(re[2],re[3],!0,!0);we&&we.isNode()?(we.activate().emit({originalEvent:N,type:"cxttapstart",position:{x:re[0],y:re[1]}}),t.touchData.start=we):Se&&Se.isNode()?(Se.activate().emit({originalEvent:N,type:"cxttapstart",position:{x:re[0],y:re[1]}}),t.touchData.start=Se):X.emit({originalEvent:N,type:"cxttapstart",position:{x:re[0],y:re[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,t.redraw();return}}if(N.touches[2])X.boxSelectionEnabled()&&N.preventDefault();else if(!N.touches[1]){if(N.touches[0]){var ye=t.findNearestElements(re[0],re[1],!0,!0),Ee=ye[0];if(Ee!=null&&(Ee.activate(),t.touchData.start=Ee,t.touchData.starts=ye,t.nodeIsGrabbable(Ee))){var $e=t.dragData.touchDragEles=X.collection(),et=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),Ee.selected()?(et=X.$(function(wt){return wt.selected()&&t.nodeIsGrabbable(wt)}),v(et,{addToList:$e})):p(Ee,{addToList:$e}),u(Ee);var Pt=function(Kt){return{originalEvent:N,type:Kt,position:{x:re[0],y:re[1]}}};Ee.emit(Pt("grabon")),et?et.forEach(function(wt){wt.emit(Pt("grab"))}):Ee.emit(Pt("grab"))}r(Ee,["touchstart","tapstart","vmousedown"],N,{x:re[0],y:re[1]}),Ee==null&&(t.data.bgActivePosistion={x:ie[0],y:ie[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){t.touchData.singleTouchMoved===!1&&!t.pinching&&!t.touchData.selecting&&r(t.touchData.start,["taphold"],N,{x:re[0],y:re[1]})},t.tapholdDuration)}}if(N.touches.length>=1){for(var Ct=t.touchData.startPosition=[],qe=0;qe<re.length;qe++)Ct[qe]=le[qe]=re[qe];var lt=N.touches[0];t.touchData.startGPosition=[lt.clientX,lt.clientY]}}},!1);var te;t.registerBinding(window,"touchmove",te=function(N){var X=t.touchData.capture;if(!(!X&&!T(N))){var re=t.selection,le=t.cy,ie=t.touchData.now,ve=t.touchData.earlier,fe=le.zoom();if(N.touches[0]){var ce=t.projectIntoViewport(N.touches[0].clientX,N.touches[0].clientY);ie[0]=ce[0],ie[1]=ce[1]}if(N.touches[1]){var ce=t.projectIntoViewport(N.touches[1].clientX,N.touches[1].clientY);ie[2]=ce[0],ie[3]=ce[1]}if(N.touches[2]){var ce=t.projectIntoViewport(N.touches[2].clientX,N.touches[2].clientY);ie[4]=ce[0],ie[5]=ce[1]}var xe=t.touchData.startGPosition,pe;if(X&&N.touches[0]&&xe){for(var we=[],Se=0;Se<ie.length;Se++)we[Se]=ie[Se]-ve[Se];var ye=N.touches[0].clientX-xe[0],Ee=ye*ye,$e=N.touches[0].clientY-xe[1],et=$e*$e,Pt=Ee+et;pe=Pt>=t.touchTapThreshold2}if(X&&t.touchData.cxt){N.preventDefault();var Ct=N.touches[0].clientX-A,qe=N.touches[0].clientY-z,lt=N.touches[1].clientX-A,wt=N.touches[1].clientY-z,Kt=U(Ct,qe,lt,wt),er=Kt/K,Pr=150,gr=Pr*Pr,zr=1.5,Kn=zr*zr;if(er>=Kn||Kt>=gr){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var pr={originalEvent:N,type:"cxttapend",position:{x:ie[0],y:ie[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(pr),t.touchData.start=null):le.emit(pr)}}if(X&&t.touchData.cxt){var pr={originalEvent:N,type:"cxtdrag",position:{x:ie[0],y:ie[1]}};t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(pr):le.emit(pr),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var St=t.findNearestElement(ie[0],ie[1],!0,!0);(!t.touchData.cxtOver||St!==t.touchData.cxtOver)&&(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:N,type:"cxtdragout",position:{x:ie[0],y:ie[1]}}),t.touchData.cxtOver=St,St&&St.emit({originalEvent:N,type:"cxtdragover",position:{x:ie[0],y:ie[1]}}))}else if(X&&N.touches[2]&&le.boxSelectionEnabled())N.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||le.emit({originalEvent:N,type:"boxstart",position:{x:ie[0],y:ie[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,re[4]=1,!re||re.length===0||re[0]===void 0?(re[0]=(ie[0]+ie[2]+ie[4])/3,re[1]=(ie[1]+ie[3]+ie[5])/3,re[2]=(ie[0]+ie[2]+ie[4])/3+1,re[3]=(ie[1]+ie[3]+ie[5])/3+1):(re[2]=(ie[0]+ie[2]+ie[4])/3,re[3]=(ie[1]+ie[3]+ie[5])/3),t.redrawHint("select",!0),t.redraw();else if(X&&N.touches[1]&&!t.touchData.didSelect&&le.zoomingEnabled()&&le.panningEnabled()&&le.userZoomingEnabled()&&le.userPanningEnabled()){N.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var vt=t.dragData.touchDragEles;if(vt){t.redrawHint("drag",!0);for(var kt=0;kt<vt.length;kt++){var Zn=vt[kt]._private;Zn.grabbed=!1,Zn.rscratch.inDragLayer=!1}}var $t=t.touchData.start,Ct=N.touches[0].clientX-A,qe=N.touches[0].clientY-z,lt=N.touches[1].clientX-A,wt=N.touches[1].clientY-z,vo=Y(Ct,qe,lt,wt),tf=vo/M;if(V){var rf=Ct-R,nf=qe-x,af=lt-W,of=wt-O,sf=(rf+af)/2,lf=(nf+of)/2,sn=le.zoom(),Ya=sn*tf,Yn=le.pan(),go=H[0]*sn+Yn.x,po=H[1]*sn+Yn.y,uf={x:-Ya/sn*(go-Yn.x-sf)+go,y:-Ya/sn*(po-Yn.y-lf)+po};if($t&&$t.active()){var vt=t.dragData.touchDragEles;y(vt),t.redrawHint("drag",!0),t.redrawHint("eles",!0),$t.unactivate().emit("freeon"),vt.emit("free"),t.dragData.didDrag&&($t.emit("dragfreeon"),vt.emit("dragfree"))}le.viewport({zoom:Ya,pan:uf,cancelOnFailedZoom:!0}),le.emit("pinchzoom"),M=vo,R=Ct,x=qe,W=lt,O=wt,t.pinching=!0}if(N.touches[0]){var ce=t.projectIntoViewport(N.touches[0].clientX,N.touches[0].clientY);ie[0]=ce[0],ie[1]=ce[1]}if(N.touches[1]){var ce=t.projectIntoViewport(N.touches[1].clientX,N.touches[1].clientY);ie[2]=ce[0],ie[3]=ce[1]}if(N.touches[2]){var ce=t.projectIntoViewport(N.touches[2].clientX,N.touches[2].clientY);ie[4]=ce[0],ie[5]=ce[1]}}else if(N.touches[0]&&!t.touchData.didSelect){var Mt=t.touchData.start,Xa=t.touchData.last,St;if(!t.hoverData.draggingEles&&!t.swipePanning&&(St=t.findNearestElement(ie[0],ie[1],!0,!0)),X&&Mt!=null&&N.preventDefault(),X&&Mt!=null&&t.nodeIsDraggable(Mt))if(pe){var vt=t.dragData.touchDragEles,mo=!t.dragData.didDrag;mo&&v(vt,{inDragLayer:!0}),t.dragData.didDrag=!0;var ln={x:0,y:0};if(he(we[0])&&he(we[1])&&(ln.x+=we[0],ln.y+=we[1],mo)){t.redrawHint("eles",!0);var Ot=t.touchData.dragDelta;Ot&&he(Ot[0])&&he(Ot[1])&&(ln.x+=Ot[0],ln.y+=Ot[1])}t.hoverData.draggingEles=!0,vt.silentShift(ln).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==ve[0]&&t.touchData.startPosition[1]==ve[1]&&t.redrawHint("eles",!0),t.redraw()}else{var Ot=t.touchData.dragDelta=t.touchData.dragDelta||[];Ot.length===0?(Ot.push(we[0]),Ot.push(we[1])):(Ot[0]+=we[0],Ot[1]+=we[1])}if(r(Mt||St,["touchmove","tapdrag","vmousemove"],N,{x:ie[0],y:ie[1]}),(!Mt||!Mt.grabbed())&&St!=Xa&&(Xa&&Xa.emit({originalEvent:N,type:"tapdragout",position:{x:ie[0],y:ie[1]}}),St&&St.emit({originalEvent:N,type:"tapdragover",position:{x:ie[0],y:ie[1]}})),t.touchData.last=St,X)for(var kt=0;kt<ie.length;kt++)ie[kt]&&t.touchData.startPosition[kt]&&pe&&(t.touchData.singleTouchMoved=!0);if(X&&(Mt==null||Mt.pannable())&&le.panningEnabled()&&le.userPanningEnabled()){var ff=a(Mt,t.touchData.starts);ff&&(N.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=$r(t.touchData.startPosition)),t.swipePanning?(le.panBy({x:we[0]*fe,y:we[1]*fe}),le.emit("dragpan")):pe&&(t.swipePanning=!0,le.panBy({x:ye*fe,y:$e*fe}),le.emit("dragpan"),Mt&&(Mt.unactivate(),t.redrawHint("select",!0),t.touchData.start=null)));var ce=t.projectIntoViewport(N.touches[0].clientX,N.touches[0].clientY);ie[0]=ce[0],ie[1]=ce[1]}}for(var Se=0;Se<ie.length;Se++)ve[Se]=ie[Se];X&&N.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&t.data.bgActivePosistion!=null&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1);var ae;t.registerBinding(window,"touchcancel",ae=function(N){var X=t.touchData.start;t.touchData.capture=!1,X&&X.unactivate()});var oe,ue,de,D;if(t.registerBinding(window,"touchend",oe=function(N){var X=t.touchData.start,re=t.touchData.capture;if(re)N.touches.length===0&&(t.touchData.capture=!1),N.preventDefault();else return;var le=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var ie=t.cy,ve=ie.zoom(),fe=t.touchData.now,ce=t.touchData.earlier;if(N.touches[0]){var xe=t.projectIntoViewport(N.touches[0].clientX,N.touches[0].clientY);fe[0]=xe[0],fe[1]=xe[1]}if(N.touches[1]){var xe=t.projectIntoViewport(N.touches[1].clientX,N.touches[1].clientY);fe[2]=xe[0],fe[3]=xe[1]}if(N.touches[2]){var xe=t.projectIntoViewport(N.touches[2].clientX,N.touches[2].clientY);fe[4]=xe[0],fe[5]=xe[1]}X&&X.unactivate();var pe;if(t.touchData.cxt){if(pe={originalEvent:N,type:"cxttapend",position:{x:fe[0],y:fe[1]}},X?X.emit(pe):ie.emit(pe),!t.touchData.cxtDragged){var we={originalEvent:N,type:"cxttap",position:{x:fe[0],y:fe[1]}};X?X.emit(we):ie.emit(we)}t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,t.redraw();return}if(!N.touches[2]&&ie.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var Se=ie.collection(t.getAllInBox(le[0],le[1],le[2],le[3]));le[0]=void 0,le[1]=void 0,le[2]=void 0,le[3]=void 0,le[4]=0,t.redrawHint("select",!0),ie.emit({type:"boxend",originalEvent:N,position:{x:fe[0],y:fe[1]}});var ye=function(gr){return gr.selectable()&&!gr.selected()};Se.emit("box").stdFilter(ye).select().emit("boxselect"),Se.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(X!=null&&X.unactivate(),N.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!N.touches[1]){if(!N.touches[0]){if(!N.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Ee=t.dragData.touchDragEles;if(X!=null){var $e=X._private.grabbed;y(Ee),t.redrawHint("drag",!0),t.redrawHint("eles",!0),$e&&(X.emit("freeon"),Ee.emit("free"),t.dragData.didDrag&&(X.emit("dragfreeon"),Ee.emit("dragfree"))),r(X,["touchend","tapend","vmouseup","tapdragout"],N,{x:fe[0],y:fe[1]}),X.unactivate(),t.touchData.start=null}else{var et=t.findNearestElement(fe[0],fe[1],!0,!0);r(et,["touchend","tapend","vmouseup","tapdragout"],N,{x:fe[0],y:fe[1]})}var Pt=t.touchData.startPosition[0]-fe[0],Ct=Pt*Pt,qe=t.touchData.startPosition[1]-fe[1],lt=qe*qe,wt=Ct+lt,Kt=wt*ve*ve;t.touchData.singleTouchMoved||(X||ie.$(":selected").unselect(["tapunselect"]),r(X,["tap","vclick"],N,{x:fe[0],y:fe[1]}),ue=!1,N.timeStamp-D<=ie.multiClickDebounceTime()?(de&&clearTimeout(de),ue=!0,D=null,r(X,["dbltap","vdblclick"],N,{x:fe[0],y:fe[1]})):(de=setTimeout(function(){ue||r(X,["onetap","voneclick"],N,{x:fe[0],y:fe[1]})},ie.multiClickDebounceTime()),D=N.timeStamp)),X!=null&&!t.dragData.didDrag&&X._private.selectable&&Kt<t.touchTapThreshold2&&!t.pinching&&(ie.selectionType()==="single"?(ie.$(e).unmerge(X).unselect(["tapunselect"]),X.select(["tapselect"])):X.selected()?X.unselect(["tapunselect"]):X.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}}}for(var er=0;er<fe.length;er++)ce[er]=fe[er];t.dragData.didDrag=!1,N.touches.length===0&&(t.touchData.dragDelta=[],t.touchData.startPosition=null,t.touchData.startGPosition=null,t.touchData.didSelect=!1),N.touches.length<2&&(N.touches.length===1&&(t.touchData.startGPosition=[N.touches[0].clientX,N.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())},!1),typeof TouchEvent>"u"){var j=[],q=function(N){return{clientX:N.clientX,clientY:N.clientY,force:1,identifier:N.pointerId,pageX:N.pageX,pageY:N.pageY,radiusX:N.width/2,radiusY:N.height/2,screenX:N.screenX,screenY:N.screenY,target:N.target}},L=function(N){return{event:N,touch:q(N)}},B=function(N){j.push(L(N))},Z=function(N){for(var X=0;X<j.length;X++){var re=j[X];if(re.event.pointerId===N.pointerId){j.splice(X,1);return}}},ne=function(N){var X=j.filter(function(re){return re.event.pointerId===N.pointerId})[0];X.event=N,X.touch=q(N)},se=function(N){N.touches=j.map(function(X){return X.touch})},ee=function(N){return N.pointerType==="mouse"||N.pointerType===4};t.registerBinding(t.container,"pointerdown",function(J){ee(J)||(J.preventDefault(),B(J),se(J),Q(J))}),t.registerBinding(t.container,"pointerup",function(J){ee(J)||(Z(J),se(J),oe(J))}),t.registerBinding(t.container,"pointercancel",function(J){ee(J)||(Z(J),se(J),ae(J))}),t.registerBinding(t.container,"pointermove",function(J){ee(J)||(J.preventDefault(),ne(J),se(J),te(J))})}};var Qt={};Qt.generatePolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(n,a,i,o,s){this.renderer.nodeShapeImpl("polygon",n,a,i,o,s,this.points)},intersectLine:function(n,a,i,o,s,l,u){return Dn(s,l,this.points,n,a,i/2,o/2,u)},checkPoint:function(n,a,i,o,s,l,u){return Xt(n,a,this.points,l,u,o,s,[0,-1],i)}}};Qt.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,r,n,a,i){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,o,s){return Cp(i,o,e,r,n/2+s,a/2+s)},checkPoint:function(e,r,n,a,i,o,s){return br(e,r,a,i,o,s,n)}}};Qt.generateRoundPolygon=function(t,e){for(var r=new Array(e.length*2),n=0;n<e.length/2;n++){var a=n*2,i=void 0;n<e.length/2-1?i=(n+1)*2:i=0,r[n*4]=e[a],r[n*4+1]=e[a+1];var o=e[i]-e[a],s=e[i+1]-e[a+1],l=Math.sqrt(o*o+s*s);r[n*4+2]=o/l,r[n*4+3]=s/l}return this.nodeShapes[t]={renderer:this,name:t,points:r,draw:function(f,c,h,v,p){this.renderer.nodeShapeImpl("round-polygon",f,c,h,v,p,this.points)},intersectLine:function(f,c,h,v,p,y,w){return Sp(p,y,this.points,f,c,h,v)},checkPoint:function(f,c,h,v,p,y,w){return Ep(f,c,this.points,y,w,v,p)}}};Qt.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:xt(4,0),draw:function(e,r,n,a,i){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,o,s){return Fl(i,o,e,r,n,a,s)},checkPoint:function(e,r,n,a,i,o,s){var l=Vn(a,i),u=l*2;return!!(Xt(e,r,this.points,o,s,a,i-u,[0,-1],n)||Xt(e,r,this.points,o,s,a-u,i,[0,-1],n)||br(e,r,u,u,o-a/2+l,s-i/2+l,n)||br(e,r,u,u,o+a/2-l,s-i/2+l,n)||br(e,r,u,u,o+a/2-l,s+i/2-l,n)||br(e,r,u,u,o-a/2+l,s+i/2-l,n))}}};Qt.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:Gl(),points:xt(4,0),draw:function(e,r,n,a,i){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},generateCutTrianglePts:function(e,r,n,a){var i=this.cornerLength,o=r/2,s=e/2,l=n-s,u=n+s,f=a-o,c=a+o;return{topLeft:[l,f+i,l+i,f,l+i,f+i],topRight:[u-i,f,u,f+i,u-i,f+i],bottomRight:[u,c-i,u-i,c,u-i,c-i],bottomLeft:[l+i,c,l,c-i,l+i,c-i]}},intersectLine:function(e,r,n,a,i,o,s){var l=this.generateCutTrianglePts(n+2*s,a+2*s,e,r),u=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return Dn(i,o,u,e,r)},checkPoint:function(e,r,n,a,i,o,s){if(Xt(e,r,this.points,o,s,a,i-2*this.cornerLength,[0,-1],n)||Xt(e,r,this.points,o,s,a-2*this.cornerLength,i,[0,-1],n))return!0;var l=this.generateCutTrianglePts(a,i,o,s);return _t(e,r,l.topLeft)||_t(e,r,l.topRight)||_t(e,r,l.bottomRight)||_t(e,r,l.bottomLeft)}}};Qt.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:xt(4,0),draw:function(e,r,n,a,i){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,o,s){var l=.15,u=.5,f=.85,c=this.generateBarrelBezierPts(n+2*s,a+2*s,e,r),h=function(y){var w=Gr({x:y[0],y:y[1]},{x:y[2],y:y[3]},{x:y[4],y:y[5]},l),d=Gr({x:y[0],y:y[1]},{x:y[2],y:y[3]},{x:y[4],y:y[5]},u),g=Gr({x:y[0],y:y[1]},{x:y[2],y:y[3]},{x:y[4],y:y[5]},f);return[y[0],y[1],w.x,w.y,d.x,d.y,g.x,g.y,y[4],y[5]]},v=[].concat(h(c.topLeft),h(c.topRight),h(c.bottomRight),h(c.bottomLeft));return Dn(i,o,v,e,r)},generateBarrelBezierPts:function(e,r,n,a){var i=r/2,o=e/2,s=n-o,l=n+o,u=a-i,f=a+i,c=Pi(e,r),h=c.heightOffset,v=c.widthOffset,p=c.ctrlPtOffsetPct*e,y={topLeft:[s,u+h,s+p,u,s+v,u],topRight:[l-v,u,l-p,u,l,u+h],bottomRight:[l,f-h,l-p,f,l-v,f],bottomLeft:[s+v,f,s+p,f,s,f-h]};return y.topLeft.isTop=!0,y.topRight.isTop=!0,y.bottomLeft.isBottom=!0,y.bottomRight.isBottom=!0,y},checkPoint:function(e,r,n,a,i,o,s){var l=Pi(a,i),u=l.heightOffset,f=l.widthOffset;if(Xt(e,r,this.points,o,s,a,i-2*u,[0,-1],n)||Xt(e,r,this.points,o,s,a-2*f,i,[0,-1],n))return!0;for(var c=this.generateBarrelBezierPts(a,i,o,s),h=function(C,T,_){var P=_[4],F=_[2],k=_[0],R=_[5],x=_[1],W=Math.min(P,k),O=Math.max(P,k),M=Math.min(R,x),K=Math.max(R,x);if(W<=C&&C<=O&&M<=T&&T<=K){var G=kp(P,F,k),H=yp(G[0],G[1],G[2],C),A=H.filter(function(z){return 0<=z&&z<=1});if(A.length>0)return A[0]}return null},v=Object.keys(c),p=0;p<v.length;p++){var y=v[p],w=c[y],d=h(e,r,w);if(d!=null){var g=w[5],m=w[3],b=w[1],E=ot(g,m,b,d);if(w.isTop&&E<=r||w.isBottom&&r<=E)return!0}}return!1}}};Qt.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:xt(4,0),draw:function(e,r,n,a,i){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,o,s){var l=e-(n/2+s),u=r-(a/2+s),f=u,c=e+(n/2+s),h=ar(i,o,e,r,l,u,c,f,!1);return h.length>0?h:Fl(i,o,e,r,n,a,s)},checkPoint:function(e,r,n,a,i,o,s){var l=Vn(a,i),u=2*l;if(Xt(e,r,this.points,o,s,a,i-u,[0,-1],n)||Xt(e,r,this.points,o,s,a-u,i,[0,-1],n))return!0;var f=a/2+2*n,c=i/2+2*n,h=[o-f,s-c,o-f,s,o+f,s,o+f,s-c];return!!(_t(e,r,h)||br(e,r,u,u,o+a/2-l,s+i/2-l,n)||br(e,r,u,u,o-a/2+l,s+i/2-l,n))}}};Qt.registerNodeShapes=function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",xt(3,0)),this.generateRoundPolygon("round-triangle",xt(3,0)),this.generatePolygon("rectangle",xt(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r)}this.generatePolygon("pentagon",xt(5,0)),this.generateRoundPolygon("round-pentagon",xt(5,0)),this.generatePolygon("hexagon",xt(6,0)),this.generateRoundPolygon("round-hexagon",xt(6,0)),this.generatePolygon("heptagon",xt(7,0)),this.generateRoundPolygon("round-heptagon",xt(7,0)),this.generatePolygon("octagon",xt(8,0)),this.generateRoundPolygon("round-octagon",xt(8,0));var n=new Array(20);{var a=Ti(5,0),i=Ti(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var s=0;s<i.length/2;s++)i[s*2]*=o,i[s*2+1]*=o;for(var s=0;s<20/4;s++)n[s*4]=a[s*2],n[s*4+1]=a[s*2+1],n[s*4+2]=i[s*2],n[s*4+3]=i[s*2+1]}n=ql(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l)}t.makePolygon=function(u){var f=u.join("$"),c="polygon-"+f,h;return(h=this[c])?h:e.generatePolygon(c,u)}};var Wn={};Wn.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};Wn.redraw=function(t){t=t||Ol();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t};Wn.beforeRender=function(t,e){if(!this.destroyed){e==null&&Ke("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:t,priority:e}),r.sort(function(n,a){return a.priority-n.priority})}};var Ds=function(e,r,n){for(var a=e.beforeRenderCallbacks,i=0;i<a.length;i++)a[i].fn(r,n)};Wn.startRenderLoop=function(){var t=this,e=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;var r=function n(a){if(!t.destroyed){if(!e.batching())if(t.requestedFrame&&!t.skipFrame){Ds(t,!0,a);var i=Yt();t.render(t.renderOptions);var o=t.lastDrawTime=Yt();t.averageRedrawTime===void 0&&(t.averageRedrawTime=o-i),t.redrawCount===void 0&&(t.redrawCount=0),t.redrawCount++,t.redrawTotalTime===void 0&&(t.redrawTotalTime=0);var s=o-i;t.redrawTotalTime+=s,t.lastRedrawTime=s,t.averageRedrawTime=t.averageRedrawTime/2+s/2,t.requestedFrame=!1}else Ds(t,!1,a);t.skipFrame=!1,xa(n)}};xa(r)}};var jy=function(e){this.init(e)},Au=jy,an=Au.prototype;an.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];an.init=function(t){var e=this;e.options=t,e.cy=t.cy;var r=e.container=t.cy.container();if(Ve){var n=Ve.document,a=n.head,i="__________cytoscape_stylesheet",o="__________cytoscape_container",s=n.getElementById(i)!=null;if(r.className.indexOf(o)<0&&(r.className=(r.className||"")+" "+o),!s){var l=n.createElement("style");l.id=i,l.textContent="."+o+" { position: relative; }",a.insertBefore(l,a.children[0])}var u=Ve.getComputedStyle(r),f=u.getPropertyValue("position");f==="static"&&ze("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=he(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};an.notify=function(t,e){var r=this,n=r.cy;if(!this.destroyed){if(t==="init"){r.load();return}if(t==="destroy"){r.destroy();return}(t==="add"||t==="remove"||t==="move"&&n.hasCompoundNodes()||t==="load"||t==="zorder"||t==="mount")&&r.invalidateCachedZSortedEles(),t==="viewport"&&r.redrawHint("select",!0),(t==="load"||t==="resize"||t==="mount")&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};an.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var r=t.bindings[e],n=r,a=n.target;(a.off||a.removeEventListener).apply(a,n.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch{}};an.isHeadless=function(){return!1};[uo,Pu,zu,nn,Qt,Wn].forEach(function(t){be(an,t)});var ui=1e3/60,Lu={setupDequeueing:function(e){return function(){var n=this,a=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var i=Oa.default(function(){a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},e.deqRedrawThreshold),o=function(u,f){var c=Yt(),h=a.averageRedrawTime,v=a.lastRedrawTime,p=[],y=a.cy.extent(),w=a.getPixelRatio();for(u||a.flushRenderedStyleQueue();;){var d=Yt(),g=d-c,m=d-f;if(v<ui){var b=ui-(u?h:0);if(m>=e.deqFastCost*b)break}else if(u){if(g>=e.deqCost*v||g>=e.deqAvgCost*h)break}else if(m>=e.deqNoDrawCost*ui)break;var E=e.deq(n,w,y);if(E.length>0)for(var S=0;S<E.length;S++)p.push(E[S]);else break}p.length>0&&(e.onDeqd(n,p),!u&&e.shouldRedraw(n,p,w,y)&&i())},s=e.priority||ji;a.beforeRender(o,s(n))}}}},Qy=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ea;Ui(this,t),this.idsByKey=new qt,this.keyForId=new qt,this.cachesByLvl=new qt,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=r}return Ki(t,[{key:"getIdsFor",value:function(r){r==null&&Ke("Can not get id list for null key");var n=this.idsByKey,a=this.idsByKey.get(r);return a||(a=new Jr,n.set(r,a)),a}},{key:"addIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).add(n)}},{key:"deleteIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).delete(n)}},{key:"getNumberOfIdsForKey",value:function(r){return r==null?0:this.getIdsFor(r).size}},{key:"updateKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);this.deleteIdForKey(a,n),this.addIdForKey(i,n),this.keyForId.set(n,i)}},{key:"deleteKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteIdForKey(a,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);return a!==i}},{key:"isInvalid",value:function(r){return this.keyHasChangedFor(r)||this.doesEleInvalidateKey(r)}},{key:"getCachesAt",value:function(r){var n=this.cachesByLvl,a=this.lvls,i=n.get(r);return i||(i=new qt,n.set(r,i),a.push(r)),i}},{key:"getCache",value:function(r,n){return this.getCachesAt(n).get(r)}},{key:"get",value:function(r,n){var a=this.getKey(r),i=this.getCache(a,n);return i!=null&&this.updateKeyMappingFor(r),i}},{key:"getForCachedKey",value:function(r,n){var a=this.keyForId.get(r.id()),i=this.getCache(a,n);return i}},{key:"hasCache",value:function(r,n){return this.getCachesAt(n).has(r)}},{key:"has",value:function(r,n){var a=this.getKey(r);return this.hasCache(a,n)}},{key:"setCache",value:function(r,n,a){a.key=r,this.getCachesAt(n).set(r,a)}},{key:"set",value:function(r,n,a){var i=this.getKey(r);this.setCache(i,n,a),this.updateKeyMappingFor(r)}},{key:"deleteCache",value:function(r,n){this.getCachesAt(n).delete(r)}},{key:"delete",value:function(r,n){var a=this.getKey(r);this.deleteCache(a,n)}},{key:"invalidateKey",value:function(r){var n=this;this.lvls.forEach(function(a){return n.deleteCache(r,a)})}},{key:"invalidate",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteKeyMappingFor(r);var i=this.doesEleInvalidateKey(r);return i&&this.invalidateKey(a),i||this.getNumberOfIdsForKey(a)===0}}]),t}(),Ts=25,oa=50,ma=-4,Ii=3,Jy=7.99,e0=8,t0=1024,r0=1024,n0=1024,a0=.2,i0=.8,o0=10,s0=.15,l0=.1,u0=.9,f0=.9,c0=100,d0=1,Vr={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},h0=dt({getKey:null,doesEleInvalidateKey:Ea,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Ll,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),mn=function(e,r){var n=this;n.renderer=e,n.onDequeues=[];var a=h0(r);be(n,a),n.lookup=new Qy(a.getKey,a.doesEleInvalidateKey),n.setupDequeueing()},it=mn.prototype;it.reasons=Vr;it.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]};it.getRetiredTextureQueue=function(t){var e=this,r=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=r[t]=r[t]||[];return n};it.getElementQueue=function(){var t=this,e=t.eleCacheQueue=t.eleCacheQueue||new Nn.default(function(r,n){return n.reqs-r.reqs});return e};it.getElementKeyToQueue=function(){var t=this,e=t.eleKeyToCacheQueue=t.eleKeyToCacheQueue||{};return e};it.getElement=function(t,e,r,n,a){var i=this,o=this.renderer,s=o.cy.zoom(),l=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed()||!i.allowEdgeTxrCaching&&t.isEdge()||!i.allowParentTxrCaching&&t.isParent())return null;if(n==null&&(n=Math.ceil(Ji(s*r))),n<ma)n=ma;else if(s>=Jy||n>Ii)return null;var u=Math.pow(2,n),f=e.h*u,c=e.w*u,h=o.eleTextBiggerThanMin(t,u);if(!this.isVisible(t,h))return null;var v=l.get(t,n);if(v&&v.invalidated&&(v.invalidated=!1,v.texture.invalidatedWidth-=v.width),v)return v;var p;if(f<=Ts?p=Ts:f<=oa?p=oa:p=Math.ceil(f/oa)*oa,f>n0||c>r0)return null;var y=i.getTextureQueue(p),w=y[y.length-2],d=function(){return i.recycleTexture(p,c)||i.addTexture(p,c)};w||(w=y[y.length-1]),w||(w=d()),w.width-w.usedWidth<c&&(w=d());for(var g=function(O){return O&&O.scaledLabelShown===h},m=a&&a===Vr.dequeue,b=a&&a===Vr.highQuality,E=a&&a===Vr.downscale,S,C=n+1;C<=Ii;C++){var T=l.get(t,C);if(T){S=T;break}}var _=S&&S.level===n+1?S:null,P=function(){w.context.drawImage(_.texture.canvas,_.x,0,_.width,_.height,w.usedWidth,0,c,f)};if(w.context.setTransform(1,0,0,1,0,0),w.context.clearRect(w.usedWidth,0,c,p),g(_))P();else if(g(S))if(b){for(var F=S.level;F>n;F--)_=i.getElement(t,e,r,F,Vr.downscale);P()}else return i.queueElement(t,S.level-1),S;else{var k;if(!m&&!b&&!E)for(var R=n-1;R>=ma;R--){var x=l.get(t,R);if(x){k=x;break}}if(g(k))return i.queueElement(t,n),k;w.context.translate(w.usedWidth,0),w.context.scale(u,u),this.drawElement(w.context,t,e,h,!1),w.context.scale(1/u,1/u),w.context.translate(-w.usedWidth,0)}return v={x:w.usedWidth,texture:w,level:n,scale:u,width:c,height:f,scaledLabelShown:h},w.usedWidth+=Math.ceil(c+e0),w.eleCaches.push(v),l.set(t,n,v),i.checkTextureFullness(w),v};it.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])};it.invalidateElement=function(t){var e=this,r=e.lookup,n=[],a=r.isInvalid(t);if(a){for(var i=ma;i<=Ii;i++){var o=r.getForCachedKey(t,i);o&&n.push(o)}var s=r.invalidate(t);if(s)for(var l=0;l<n.length;l++){var u=n[l],f=u.texture;f.invalidatedWidth+=u.width,u.invalidated=!0,e.checkTextureUtility(f)}e.removeFromQueue(t)}};it.checkTextureUtility=function(t){t.invalidatedWidth>=a0*t.width&&this.retireTexture(t)};it.checkTextureFullness=function(t){var e=this,r=e.getTextureQueue(t.height);t.usedWidth/t.width>i0&&t.fullnessChecks>=o0?ur(r,t):t.fullnessChecks++};it.retireTexture=function(t){var e=this,r=t.height,n=e.getTextureQueue(r),a=this.lookup;ur(n,t),t.retired=!0;for(var i=t.eleCaches,o=0;o<i.length;o++){var s=i[o];a.deleteCache(s.key,s.level)}Qi(i);var l=e.getRetiredTextureQueue(r);l.push(t)};it.addTexture=function(t,e){var r=this,n=r.getTextureQueue(t),a={};return n.push(a),a.eleCaches=[],a.height=t,a.width=Math.max(t0,e),a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,a.canvas=r.renderer.makeOffscreenCanvas(a.width,a.height),a.context=a.canvas.getContext("2d"),a};it.recycleTexture=function(t,e){for(var r=this,n=r.getTextureQueue(t),a=r.getRetiredTextureQueue(t),i=0;i<a.length;i++){var o=a[i];if(o.width>=e)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,Qi(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),ur(a,o),n.push(o),o}};it.queueElement=function(t,e){var r=this,n=r.getElementQueue(),a=r.getElementKeyToQueue(),i=this.getKey(t),o=a[i];if(o)o.level=Math.max(o.level,e),o.eles.merge(t),o.reqs++,n.updateItem(o);else{var s={eles:t.spawn().merge(t),level:e,reqs:1,key:i};n.push(s),a[i]=s}};it.dequeue=function(t){for(var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=[],i=e.lookup,o=0;o<d0&&r.size()>0;o++){var s=r.pop(),l=s.key,u=s.eles[0],f=i.hasCache(u,s.level);if(n[l]=null,f)continue;a.push(s);var c=e.getBoundingBox(u);e.getElement(u,c,t,s.level,Vr.dequeue)}return a};it.removeFromQueue=function(t){var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=this.getKey(t),i=n[a];i!=null&&(i.eles.length===1?(i.reqs=Xi,r.updateItem(i),r.pop(),n[a]=null):i.eles.unmerge(t))};it.onDequeue=function(t){this.onDequeues.push(t)};it.offDequeue=function(t){ur(this.onDequeues,t)};it.setupDequeueing=Lu.setupDequeueing({deqRedrawThreshold:c0,deqCost:s0,deqAvgCost:l0,deqNoDrawCost:u0,deqFastCost:f0,deq:function(e,r,n){return e.dequeue(r,n)},onDeqd:function(e,r){for(var n=0;n<e.onDequeues.length;n++){var a=e.onDequeues[n];a(r)}},shouldRedraw:function(e,r,n,a){for(var i=0;i<r.length;i++)for(var o=r[i].eles,s=0;s<o.length;s++){var l=o[s].boundingBox();if(eo(l,a))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var v0=1,wn=-4,Ta=2,g0=3.99,p0=50,m0=50,y0=.15,b0=.1,w0=.9,x0=.9,E0=1,Ps=250,C0=4e3*4e3,S0=!0,Bu=function(e){var r=this,n=r.renderer=e,a=n.cy;r.layersByLevel={},r.firstGet=!0,r.lastInvalidationTime=Yt()-2*Ps,r.skipping=!1,r.eleTxrDeqs=a.collection(),r.scheduleElementRefinement=Oa.default(function(){r.refineElementTextures(r.eleTxrDeqs),r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},m0),n.beforeRender(function(o,s){s-r.lastInvalidationTime<=Ps?r.skipping=!0:r.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var i=function(s,l){return l.reqs-s.reqs};r.layersQueue=new Nn.default(i),r.setupDequeueing()},ht=Bu.prototype,zs=0,k0=Math.pow(2,53)-1;ht.makeLayer=function(t,e){var r=Math.pow(2,e),n=Math.ceil(t.w*r),a=Math.ceil(t.h*r),i=this.renderer.makeOffscreenCanvas(n,a),o={id:zs=++zs%k0,bb:t,level:e,width:n,height:a,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=o.context,l=-o.bb.x1,u=-o.bb.y1;return s.scale(r,r),s.translate(l,u),o};ht.getLayers=function(t,e,r){var n=this,a=n.renderer,i=a.cy,o=i.zoom(),s=n.firstGet;if(n.firstGet=!1,r==null){if(r=Math.ceil(Ji(o*e)),r<wn)r=wn;else if(o>=g0||r>Ta)return null}n.validateLayersElesOrdering(r,t);var l=n.layersByLevel,u=Math.pow(2,r),f=l[r]=l[r]||[],c,h=n.levelIsComplete(r,t),v,p=function(){var P=function(W){if(n.validateLayersElesOrdering(W,t),n.levelIsComplete(W,t))return v=l[W],!0},F=function(W){if(!v)for(var O=r+W;wn<=O&&O<=Ta&&!P(O);O+=W);};F(1),F(-1);for(var k=f.length-1;k>=0;k--){var R=f[k];R.invalid&&ur(f,R)}};if(!h)p();else return f;var y=function(){if(!c){c=Tt();for(var P=0;P<t.length;P++)hp(c,t[P].boundingBox())}return c},w=function(P){P=P||{};var F=P.after;y();var k=c.w*u*(c.h*u);if(k>C0)return null;var R=n.makeLayer(c,r);if(F!=null){var x=f.indexOf(F)+1;f.splice(x,0,R)}else(P.insert===void 0||P.insert)&&f.unshift(R);return R};if(n.skipping&&!s)return null;for(var d=null,g=t.length/v0,m=!s,b=0;b<t.length;b++){var E=t[b],S=E._private.rscratch,C=S.imgLayerCaches=S.imgLayerCaches||{},T=C[r];if(T){d=T;continue}if((!d||d.eles.length>=g||!Nl(d.bb,E.boundingBox()))&&(d=w({insert:!0,after:d}),!d))return null;v||m?n.queueLayer(d,E):n.drawEleInLayer(d,E,r,e),d.eles.push(E),C[r]=d}return v||(m?null:f)};ht.getEleLevelForLayerLevel=function(t,e){return t};ht.drawEleInLayer=function(t,e,r,n){var a=this,i=this.renderer,o=t.context,s=e.boundingBox();s.w===0||s.h===0||!e.visible()||(r=a.getEleLevelForLayerLevel(r,n),i.setImgSmoothing(o,!1),i.drawCachedElement(o,e,null,null,r,S0),i.setImgSmoothing(o,!0))};ht.levelIsComplete=function(t,e){var r=this,n=r.layersByLevel[t];if(!n||n.length===0)return!1;for(var a=0,i=0;i<n.length;i++){var o=n[i];if(o.reqs>0||o.invalid)return!1;a+=o.eles.length}return a===e.length};ht.validateLayersElesOrdering=function(t,e){var r=this.layersByLevel[t];if(r)for(var n=0;n<r.length;n++){for(var a=r[n],i=-1,o=0;o<e.length;o++)if(a.eles[0]===e[o]){i=o;break}if(i<0){this.invalidateLayer(a);continue}for(var s=i,o=0;o<a.eles.length;o++)if(a.eles[o]!==e[s+o]){this.invalidateLayer(a);break}}};ht.updateElementsInLayers=function(t,e){for(var r=this,n=$n(t[0]),a=0;a<t.length;a++)for(var i=n?null:t[a],o=n?t[a]:t[a].ele,s=o._private.rscratch,l=s.imgLayerCaches=s.imgLayerCaches||{},u=wn;u<=Ta;u++){var f=l[u];f&&(i&&r.getEleLevelForLayerLevel(f.level)!==i.level||e(f,o,i))}};ht.haveLayers=function(){for(var t=this,e=!1,r=wn;r<=Ta;r++){var n=t.layersByLevel[r];if(n&&n.length>0){e=!0;break}}return e};ht.invalidateElements=function(t){var e=this;t.length!==0&&(e.lastInvalidationTime=Yt(),!(t.length===0||!e.haveLayers())&&e.updateElementsInLayers(t,function(n,a,i){e.invalidateLayer(n)}))};ht.invalidateLayer=function(t){if(this.lastInvalidationTime=Yt(),!t.invalid){var e=t.level,r=t.eles,n=this.layersByLevel[e];ur(n,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var a=0;a<r.length;a++){var i=r[a]._private.rscratch.imgLayerCaches;i&&(i[e]=null)}}};ht.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(n,a,i){var o=n.replacement;if(o||(o=n.replacement=e.makeLayer(n.bb,n.level),o.replaces=n,o.eles=n.eles),!o.reqs)for(var s=0;s<o.eles.length;s++)e.queueLayer(o,o.eles[s])})};ht.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()};ht.queueLayer=function(t,e){var r=this,n=r.layersQueue,a=t.elesQueue,i=a.hasId=a.hasId||{};if(!t.replacement){if(e){if(i[e.id()])return;a.push(e),i[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}};ht.dequeue=function(t){for(var e=this,r=e.layersQueue,n=[],a=0;a<E0&&r.size()!==0;){var i=r.peek();if(i.replacement){r.pop();continue}if(i.replaces&&i!==i.replaces.replacement){r.pop();continue}if(i.invalid){r.pop();continue}var o=i.elesQueue.shift();o&&(e.drawEleInLayer(i,o,i.level,t),a++),n.length===0&&n.push(!0),i.elesQueue.length===0&&(r.pop(),i.reqs=0,i.replaces&&e.applyLayerReplacement(i),e.requestRedraw())}return n};ht.applyLayerReplacement=function(t){var e=this,r=e.layersByLevel[t.level],n=t.replaces,a=r.indexOf(n);if(!(a<0||n.invalid)){r[a]=t;for(var i=0;i<t.eles.length;i++){var o=t.eles[i]._private,s=o.imgLayerCaches=o.imgLayerCaches||{};s&&(s[t.level]=t)}e.requestRedraw()}};ht.requestRedraw=Oa.default(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100);ht.setupDequeueing=Lu.setupDequeueing({deqRedrawThreshold:p0,deqCost:y0,deqAvgCost:b0,deqNoDrawCost:w0,deqFastCost:x0,deq:function(e,r){return e.dequeue(r)},onDeqd:ji,shouldRedraw:Ll,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var Mu={},As;function _0(t,e){for(var r=0;r<e.length;r++){var n=e[r];t.lineTo(n.x,n.y)}}function D0(t,e,r){for(var n,a=0;a<e.length;a++){var i=e[a];a===0&&(n=i),t.lineTo(i.x,i.y)}t.quadraticCurveTo(r.x,r.y,n.x,n.y)}function Ls(t,e,r){t.beginPath&&t.beginPath();for(var n=e,a=0;a<n.length;a++){var i=n[a];t.lineTo(i.x,i.y)}var o=r,s=r[0];t.moveTo(s.x,s.y);for(var a=1;a<o.length;a++){var i=o[a];t.lineTo(i.x,i.y)}t.closePath&&t.closePath()}function T0(t,e,r,n,a){t.beginPath&&t.beginPath(),t.arc(r,n,a,0,Math.PI*2,!1);var i=e,o=i[0];t.moveTo(o.x,o.y);for(var s=0;s<i.length;s++){var l=i[s];t.lineTo(l.x,l.y)}t.closePath&&t.closePath()}function P0(t,e,r,n){t.arc(e,r,n,0,Math.PI*2,!1)}Mu.arrowShapeImpl=function(t){return(As||(As={polygon:_0,"triangle-backcurve":D0,"triangle-tee":Ls,"circle-triangle":T0,"triangle-cross":Ls,circle:P0}))[t]};var Ut={};Ut.drawElement=function(t,e,r,n,a,i){var o=this;e.isNode()?o.drawNode(t,e,r,n,a,i):o.drawEdge(t,e,r,n,a,i)};Ut.drawElementOverlay=function(t,e){var r=this;e.isNode()?r.drawNodeOverlay(t,e):r.drawEdgeOverlay(t,e)};Ut.drawElementUnderlay=function(t,e){var r=this;e.isNode()?r.drawNodeUnderlay(t,e):r.drawEdgeUnderlay(t,e)};Ut.drawCachedElementPortion=function(t,e,r,n,a,i,o,s){var l=this,u=r.getBoundingBox(e);if(!(u.w===0||u.h===0)){var f=r.getElement(e,u,n,a,i);if(f!=null){var c=s(l,e);if(c===0)return;var h=o(l,e),v=u.x1,p=u.y1,y=u.w,w=u.h,d,g,m,b,E;if(h!==0){var S=r.getRotationPoint(e);m=S.x,b=S.y,t.translate(m,b),t.rotate(h),E=l.getImgSmoothing(t),E||l.setImgSmoothing(t,!0);var C=r.getRotationOffset(e);d=C.x,g=C.y}else d=v,g=p;var T;c!==1&&(T=t.globalAlpha,t.globalAlpha=T*c),t.drawImage(f.texture.canvas,f.x,0,f.width,f.height,d,g,y,w),c!==1&&(t.globalAlpha=T),h!==0&&(t.rotate(-h),t.translate(-m,-b),E||l.setImgSmoothing(t,!1))}else r.drawElement(t,e)}};var z0=function(){return 0},A0=function(e,r){return e.getTextAngle(r,null)},L0=function(e,r){return e.getTextAngle(r,"source")},B0=function(e,r){return e.getTextAngle(r,"target")},M0=function(e,r){return r.effectiveOpacity()},fi=function(e,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()};Ut.drawCachedElement=function(t,e,r,n,a,i){var o=this,s=o.data,l=s.eleTxrCache,u=s.lblTxrCache,f=s.slbTxrCache,c=s.tlbTxrCache,h=e.boundingBox(),v=i===!0?l.reasons.highQuality:null;if(!(h.w===0||h.h===0||!e.visible())&&(!n||eo(h,n))){var p=e.isEdge(),y=e.element()._private.rscratch.badLine;o.drawElementUnderlay(t,e),o.drawCachedElementPortion(t,e,l,r,a,v,z0,M0),(!p||!y)&&o.drawCachedElementPortion(t,e,u,r,a,v,A0,fi),p&&!y&&(o.drawCachedElementPortion(t,e,f,r,a,v,L0,fi),o.drawCachedElementPortion(t,e,c,r,a,v,B0,fi)),o.drawElementOverlay(t,e)}};Ut.drawElements=function(t,e){for(var r=this,n=0;n<e.length;n++){var a=e[n];r.drawElement(t,a)}};Ut.drawCachedElements=function(t,e,r,n){for(var a=this,i=0;i<e.length;i++){var o=e[i];a.drawCachedElement(t,o,r,n)}};Ut.drawCachedNodes=function(t,e,r,n){for(var a=this,i=0;i<e.length;i++){var o=e[i];o.isNode()&&a.drawCachedElement(t,o,r,n)}};Ut.drawLayeredElements=function(t,e,r,n){var a=this,i=a.data.lyrTxrCache.getLayers(e,r);if(i)for(var o=0;o<i.length;o++){var s=i[o],l=s.bb;l.w===0||l.h===0||t.drawImage(s.canvas,l.x1,l.y1,l.w,l.h)}else a.drawCachedElements(t,e,r,n)};var Jt={};Jt.drawEdge=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s=e._private.rscratch;if(!(i&&!e.visible())&&!(s.badLine||s.allpts==null||isNaN(s.allpts[0]))){var l;r&&(l=r,t.translate(-l.x1,-l.y1));var u=i?e.pstyle("opacity").value:1,f=i?e.pstyle("line-opacity").value:1,c=e.pstyle("curve-style").value,h=e.pstyle("line-style").value,v=e.pstyle("width").pfValue,p=e.pstyle("line-cap").value,y=u*f,w=u*f,d=function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y;c==="straight-triangle"?(o.eleStrokeStyle(t,e,k),o.drawEdgeTrianglePath(e,t,s.allpts)):(t.lineWidth=v,t.lineCap=p,o.eleStrokeStyle(t,e,k),o.drawEdgePath(e,t,s.allpts,h),t.lineCap="butt")},g=function(){a&&o.drawEdgeOverlay(t,e)},m=function(){a&&o.drawEdgeUnderlay(t,e)},b=function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:w;o.drawArrowheads(t,e,k)},E=function(){o.drawElementText(t,e,null,n)};t.lineJoin="round";var S=e.pstyle("ghost").value==="yes";if(S){var C=e.pstyle("ghost-offset-x").pfValue,T=e.pstyle("ghost-offset-y").pfValue,_=e.pstyle("ghost-opacity").value,P=y*_;t.translate(C,T),d(P),b(P),t.translate(-C,-T)}m(),d(),b(),g(),E(),r&&t.translate(l.x1,l.y1)}};var Ou=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n){if(n.visible()){var a=n.pstyle("".concat(e,"-opacity")).value;if(a!==0){var i=this,o=i.usePaths(),s=n._private.rscratch,l=n.pstyle("".concat(e,"-padding")).pfValue,u=2*l,f=n.pstyle("".concat(e,"-color")).value;r.lineWidth=u,s.edgeType==="self"&&!o?r.lineCap="butt":r.lineCap="round",i.colorStrokeStyle(r,f[0],f[1],f[2],a),i.drawEdgePath(n,r,s.allpts,"solid")}}}};Jt.drawEdgeOverlay=Ou("overlay");Jt.drawEdgeUnderlay=Ou("underlay");Jt.drawEdgePath=function(t,e,r,n){var a=t._private.rscratch,i=e,o,s=!1,l=this.usePaths(),u=t.pstyle("line-dash-pattern").pfValue,f=t.pstyle("line-dash-offset").pfValue;if(l){var c=r.join("$"),h=a.pathCacheKey&&a.pathCacheKey===c;h?(o=e=a.pathCache,s=!0):(o=e=new Path2D,a.pathCacheKey=c,a.pathCache=o)}if(i.setLineDash)switch(n){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(u),i.lineDashOffset=f;break;case"solid":i.setLineDash([]);break}if(!s&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(r[0],r[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var v=2;v+3<r.length;v+=4)e.quadraticCurveTo(r[v],r[v+1],r[v+2],r[v+3]);break;case"straight":case"segments":case"haystack":for(var p=2;p+1<r.length;p+=2)e.lineTo(r[p],r[p+1]);break}e=i,l?e.stroke(o):e.stroke(),e.setLineDash&&e.setLineDash([])};Jt.drawEdgeTrianglePath=function(t,e,r){e.fillStyle=e.strokeStyle;for(var n=t.pstyle("width").pfValue,a=0;a+1<r.length;a+=2){var i=[r[a+2]-r[a],r[a+3]-r[a+1]],o=Math.sqrt(i[0]*i[0]+i[1]*i[1]),s=[i[1]/o,-i[0]/o],l=[s[0]*n/2,s[1]*n/2];e.beginPath(),e.moveTo(r[a]-l[0],r[a+1]-l[1]),e.lineTo(r[a]+l[0],r[a+1]+l[1]),e.lineTo(r[a+2],r[a+3]),e.closePath(),e.fill()}};Jt.drawArrowheads=function(t,e,r){var n=e._private.rscratch,a=n.edgeType==="haystack";a||this.drawArrowhead(t,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,r),this.drawArrowhead(t,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,r),this.drawArrowhead(t,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,r),a||this.drawArrowhead(t,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,r)};Jt.drawArrowhead=function(t,e,r,n,a,i,o){if(!(isNaN(n)||n==null||isNaN(a)||a==null||isNaN(i)||i==null)){var s=this,l=e.pstyle(r+"-arrow-shape").value;if(l!=="none"){var u=e.pstyle(r+"-arrow-fill").value==="hollow"?"both":"filled",f=e.pstyle(r+"-arrow-fill").value,c=e.pstyle("width").pfValue,h=e.pstyle("opacity").value;o===void 0&&(o=h);var v=t.globalCompositeOperation;(o!==1||f==="hollow")&&(t.globalCompositeOperation="destination-out",s.colorFillStyle(t,255,255,255,1),s.colorStrokeStyle(t,255,255,255,1),s.drawArrowShape(e,t,u,c,l,n,a,i),t.globalCompositeOperation=v);var p=e.pstyle(r+"-arrow-color").value;s.colorFillStyle(t,p[0],p[1],p[2],o),s.colorStrokeStyle(t,p[0],p[1],p[2],o),s.drawArrowShape(e,t,f,c,l,n,a,i)}}};Jt.drawArrowShape=function(t,e,r,n,a,i,o,s){var l=this,u=this.usePaths()&&a!=="triangle-cross",f=!1,c,h=e,v={x:i,y:o},p=t.pstyle("arrow-scale").value,y=this.getArrowWidth(n,p),w=l.arrowShapes[a];if(u){var d=l.arrowPathCache=l.arrowPathCache||[],g=wr(a),m=d[g];m!=null?(c=e=m,f=!0):(c=e=new Path2D,d[g]=c)}f||(e.beginPath&&e.beginPath(),u?w.draw(e,1,0,{x:0,y:0},1):w.draw(e,y,s,v,n),e.closePath&&e.closePath()),e=h,u&&(e.translate(i,o),e.rotate(s),e.scale(y,y)),(r==="filled"||r==="both")&&(u?e.fill(c):e.fill()),(r==="hollow"||r==="both")&&(e.lineWidth=(w.matchEdgeWidth?n:1)/(u?y:1),e.lineJoin="miter",u?e.stroke(c):e.stroke()),u&&(e.scale(1/y,1/y),e.rotate(-s),e.translate(-i,-o))};var co={};co.safeDrawImage=function(t,e,r,n,a,i,o,s,l,u){if(!(a<=0||i<=0||l<=0||u<=0))try{t.drawImage(e,r,n,a,i,o,s,l,u)}catch(f){ze(f)}};co.drawInscribedImage=function(t,e,r,n,a){var i=this,o=r.position(),s=o.x,l=o.y,u=r.cy().style(),f=u.getIndexedStyle.bind(u),c=f(r,"background-fit","value",n),h=f(r,"background-repeat","value",n),v=r.width(),p=r.height(),y=r.padding()*2,w=v+(f(r,"background-width-relative-to","value",n)==="inner"?0:y),d=p+(f(r,"background-height-relative-to","value",n)==="inner"?0:y),g=r._private.rscratch,m=f(r,"background-clip","value",n),b=m==="node",E=f(r,"background-image-opacity","value",n)*a,S=f(r,"background-image-smoothing","value",n),C=e.width||e.cachedW,T=e.height||e.cachedH;(C==null||T==null)&&(document.body.appendChild(e),C=e.cachedW=e.width||e.offsetWidth,T=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var _=C,P=T;if(f(r,"background-width","value",n)!=="auto"&&(f(r,"background-width","units",n)==="%"?_=f(r,"background-width","pfValue",n)*w:_=f(r,"background-width","pfValue",n)),f(r,"background-height","value",n)!=="auto"&&(f(r,"background-height","units",n)==="%"?P=f(r,"background-height","pfValue",n)*d:P=f(r,"background-height","pfValue",n)),!(_===0||P===0)){if(c==="contain"){var F=Math.min(w/_,d/P);_*=F,P*=F}else if(c==="cover"){var F=Math.max(w/_,d/P);_*=F,P*=F}var k=s-w/2,R=f(r,"background-position-x","units",n),x=f(r,"background-position-x","pfValue",n);R==="%"?k+=(w-_)*x:k+=x;var W=f(r,"background-offset-x","units",n),O=f(r,"background-offset-x","pfValue",n);W==="%"?k+=(w-_)*O:k+=O;var M=l-d/2,K=f(r,"background-position-y","units",n),G=f(r,"background-position-y","pfValue",n);K==="%"?M+=(d-P)*G:M+=G;var H=f(r,"background-offset-y","units",n),A=f(r,"background-offset-y","pfValue",n);H==="%"?M+=(d-P)*A:M+=A,g.pathCache&&(k-=s,M-=l,s=0,l=0);var z=t.globalAlpha;t.globalAlpha=E;var $=i.getImgSmoothing(t),I=!1;if(S==="no"&&$?(i.setImgSmoothing(t,!1),I=!0):S==="yes"&&!$&&(i.setImgSmoothing(t,!0),I=!0),h==="no-repeat")b&&(t.save(),g.pathCache?t.clip(g.pathCache):(i.nodeShapes[i.getNodeShape(r)].draw(t,s,l,w,d),t.clip())),i.safeDrawImage(t,e,0,0,C,T,k,M,_,P),b&&t.restore();else{var V=t.createPattern(e,h);t.fillStyle=V,i.nodeShapes[i.getNodeShape(r)].draw(t,s,l,w,d),t.translate(k,M),t.fill(),t.translate(-k,-M)}t.globalAlpha=z,I&&i.setImgSmoothing(t,$)}};var Tr={};Tr.eleTextBiggerThanMin=function(t,e){if(!e){var r=t.cy().zoom(),n=this.getPixelRatio(),a=Math.ceil(Ji(r*n));e=Math.pow(2,a)}var i=t.pstyle("font-size").pfValue*e,o=t.pstyle("min-zoomed-font-size").pfValue;return!(i<o)};Tr.drawElementText=function(t,e,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this;if(n==null){if(i&&!o.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var l=o.getLabelJustification(e);t.textAlign=l,t.textBaseline="bottom"}else{var u=e.element()._private.rscratch.badLine,f=e.pstyle("label"),c=e.pstyle("source-label"),h=e.pstyle("target-label");if(u||(!f||!f.value)&&(!c||!c.value)&&(!h||!h.value))return;t.textAlign="center",t.textBaseline="bottom"}var v=!r,p;r&&(p=r,t.translate(-p.x1,-p.y1)),a==null?(o.drawText(t,e,null,v,i),e.isEdge()&&(o.drawText(t,e,"source",v,i),o.drawText(t,e,"target",v,i))):o.drawText(t,e,a,v,i),r&&t.translate(p.x1,p.y1)};Tr.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if(e=this.fontCaches[r],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e};Tr.setupTextStyle=function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,a=e.pstyle("font-size").pfValue+"px",i=e.pstyle("font-family").strValue,o=e.pstyle("font-weight").strValue,s=r?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,l=e.pstyle("text-outline-opacity").value*s,u=e.pstyle("color").value,f=e.pstyle("text-outline-color").value;t.font=n+" "+o+" "+a+" "+i,t.lineJoin="round",this.colorFillStyle(t,u[0],u[1],u[2],s),this.colorStrokeStyle(t,f[0],f[1],f[2],l)};function O0(t,e,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5;t.beginPath(),t.moveTo(e+i,r),t.lineTo(e+n-i,r),t.quadraticCurveTo(e+n,r,e+n,r+i),t.lineTo(e+n,r+a-i),t.quadraticCurveTo(e+n,r+a,e+n-i,r+a),t.lineTo(e+i,r+a),t.quadraticCurveTo(e,r+a,e,r+a-i),t.lineTo(e,r+i),t.quadraticCurveTo(e,r,e+i,r),t.closePath(),t.fill()}Tr.getTextAngle=function(t,e){var r,n=t._private,a=n.rscratch,i=e?e+"-":"",o=t.pstyle(i+"text-rotation"),s=Rt(a,"labelAngle",e);return o.strValue==="autorotate"?r=t.isEdge()?s:0:o.strValue==="none"?r=0:r=o.pfValue,r};Tr.drawText=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=e._private,o=i.rscratch,s=a?e.effectiveOpacity():1;if(!(a&&(s===0||e.pstyle("text-opacity").value===0))){r==="main"&&(r=null);var l=Rt(o,"labelX",r),u=Rt(o,"labelY",r),f,c,h=this.getLabelText(e,r);if(h!=null&&h!==""&&!isNaN(l)&&!isNaN(u)){this.setupTextStyle(t,e,a);var v=r?r+"-":"",p=Rt(o,"labelWidth",r),y=Rt(o,"labelHeight",r),w=e.pstyle(v+"text-margin-x").pfValue,d=e.pstyle(v+"text-margin-y").pfValue,g=e.isEdge(),m=e.pstyle("text-halign").value,b=e.pstyle("text-valign").value;g&&(m="center",b="center"),l+=w,u+=d;var E;switch(n?E=this.getTextAngle(e,r):E=0,E!==0&&(f=l,c=u,t.translate(f,c),t.rotate(E),l=0,u=0),b){case"top":break;case"center":u+=y/2;break;case"bottom":u+=y;break}var S=e.pstyle("text-background-opacity").value,C=e.pstyle("text-border-opacity").value,T=e.pstyle("text-border-width").pfValue,_=e.pstyle("text-background-padding").pfValue;if(S>0||T>0&&C>0){var P=l-_;switch(m){case"left":P-=p;break;case"center":P-=p/2;break}var F=u-y-_,k=p+2*_,R=y+2*_;if(S>0){var x=t.fillStyle,W=e.pstyle("text-background-color").value;t.fillStyle="rgba("+W[0]+","+W[1]+","+W[2]+","+S*s+")";var O=e.pstyle("text-background-shape").strValue;O.indexOf("round")===0?O0(t,P,F,k,R,2):t.fillRect(P,F,k,R),t.fillStyle=x}if(T>0&&C>0){var M=t.strokeStyle,K=t.lineWidth,G=e.pstyle("text-border-color").value,H=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+G[0]+","+G[1]+","+G[2]+","+C*s+")",t.lineWidth=T,t.setLineDash)switch(H){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=T/4,t.setLineDash([]);break;case"solid":t.setLineDash([]);break}if(t.strokeRect(P,F,k,R),H==="double"){var A=T/2;t.strokeRect(P+A,F+A,k-A*2,R-A*2)}t.setLineDash&&t.setLineDash([]),t.lineWidth=K,t.strokeStyle=M}}var z=2*e.pstyle("text-outline-width").pfValue;if(z>0&&(t.lineWidth=z),e.pstyle("text-wrap").value==="wrap"){var $=Rt(o,"labelWrapCachedLines",r),I=Rt(o,"labelLineHeight",r),V=p/2,Y=this.getLabelJustification(e);switch(Y==="auto"||(m==="left"?Y==="left"?l+=-p:Y==="center"&&(l+=-V):m==="center"?Y==="left"?l+=-V:Y==="right"&&(l+=V):m==="right"&&(Y==="center"?l+=V:Y==="right"&&(l+=p))),b){case"top":u-=($.length-1)*I;break;case"center":case"bottom":u-=($.length-1)*I;break}for(var U=0;U<$.length;U++)z>0&&t.strokeText($[U],l,u),t.fillText($[U],l,u),u+=I}else z>0&&t.strokeText(h,l,u),t.fillText(h,l,u);E!==0&&(t.rotate(-E),t.translate(-f,-c))}}};var on={};on.drawNode=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s,l,u=e._private,f=u.rscratch,c=e.position();if(!(!he(c.x)||!he(c.y))&&!(i&&!e.visible())){var h=i?e.effectiveOpacity():1,v=o.usePaths(),p,y=!1,w=e.padding();s=e.width()+2*w,l=e.height()+2*w;var d;r&&(d=r,t.translate(-d.x1,-d.y1));for(var g=e.pstyle("background-image"),m=g.value,b=new Array(m.length),E=new Array(m.length),S=0,C=0;C<m.length;C++){var T=m[C],_=b[C]=T!=null&&T!=="none";if(_){var P=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",C);S++,E[C]=o.getCachedImage(T,P,function(){u.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var F=e.pstyle("background-blacken").value,k=e.pstyle("border-width").pfValue,R=e.pstyle("background-opacity").value*h,x=e.pstyle("border-color").value,W=e.pstyle("border-style").value,O=e.pstyle("border-opacity").value*h;t.lineJoin="miter";var M=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:R;o.eleFillStyle(t,e,B)},K=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:O;o.colorStrokeStyle(t,x[0],x[1],x[2],B)},G=e.pstyle("shape").strValue,H=e.pstyle("shape-polygon-points").pfValue;if(v){t.translate(c.x,c.y);var A=o.nodePathCache=o.nodePathCache||[],z=Al(G==="polygon"?G+","+H.join(","):G,""+l,""+s),$=A[z];$!=null?(p=$,y=!0,f.pathCache=p):(p=new Path2D,A[z]=f.pathCache=p)}var I=function(){if(!y){var B=c;v&&(B={x:0,y:0}),o.nodeShapes[o.getNodeShape(e)].draw(p||t,B.x,B.y,s,l)}v?t.fill(p):t.fill()},V=function(){for(var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h,Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,ne=u.backgrounding,se=0,ee=0;ee<E.length;ee++){var J=e.cy().style().getIndexedStyle(e,"background-image-containment","value",ee);if(Z&&J==="over"||!Z&&J==="inside"){se++;continue}b[ee]&&E[ee].complete&&!E[ee].error&&(se++,o.drawInscribedImage(t,E[ee],e,ee,B))}u.backgrounding=se!==S,ne!==u.backgrounding&&e.updateStyle(!1)},Y=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h;o.hasPie(e)&&(o.drawPie(t,e,Z),B&&(v||o.nodeShapes[o.getNodeShape(e)].draw(t,c.x,c.y,s,l)))},U=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h,Z=(F>0?F:-F)*B,ne=F>0?0:255;F!==0&&(o.colorFillStyle(t,ne,ne,ne,Z),v?t.fill(p):t.fill())},Q=function(){if(k>0){if(t.lineWidth=k,t.lineCap="butt",t.setLineDash)switch(W){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([]);break}if(v?t.stroke(p):t.stroke(),W==="double"){t.lineWidth=k/3;var B=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",v?t.stroke(p):t.stroke(),t.globalCompositeOperation=B}t.setLineDash&&t.setLineDash([])}},te=function(){a&&o.drawNodeOverlay(t,e,c,s,l)},ae=function(){a&&o.drawNodeUnderlay(t,e,c,s,l)},oe=function(){o.drawElementText(t,e,null,n)},ue=e.pstyle("ghost").value==="yes";if(ue){var de=e.pstyle("ghost-offset-x").pfValue,D=e.pstyle("ghost-offset-y").pfValue,j=e.pstyle("ghost-opacity").value,q=j*h;t.translate(de,D),M(j*R),I(),V(q,!0),K(j*O),Q(),Y(F!==0||k!==0),V(q,!1),U(q),t.translate(-de,-D)}v&&t.translate(-c.x,-c.y),ae(),v&&t.translate(c.x,c.y),M(),I(),V(h,!0),K(),Q(),Y(F!==0||k!==0),V(h,!1),U(),v&&t.translate(-c.x,-c.y),oe(),te(),r&&t.translate(d.x1,d.y1)}};var Iu=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n,a,i,o){var s=this;if(n.visible()){var l=n.pstyle("".concat(e,"-padding")).pfValue,u=n.pstyle("".concat(e,"-opacity")).value,f=n.pstyle("".concat(e,"-color")).value,c=n.pstyle("".concat(e,"-shape")).value;if(u>0){if(a=a||n.position(),i==null||o==null){var h=n.padding();i=n.width()+2*h,o=n.height()+2*h}s.colorFillStyle(r,f[0],f[1],f[2],u),s.nodeShapes[c].draw(r,a.x,a.y,i+l*2,o+l*2),r.fill()}}}};on.drawNodeOverlay=Iu("overlay");on.drawNodeUnderlay=Iu("underlay");on.hasPie=function(t){return t=t[0],t._private.hasPie};on.drawPie=function(t,e,r,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=e.pstyle("pie-size"),o=n.x,s=n.y,l=e.width(),u=e.height(),f=Math.min(l,u)/2,c=0,h=this.usePaths();h&&(o=0,s=0),i.units==="%"?f=f*i.pfValue:i.pfValue!==void 0&&(f=i.pfValue/2);for(var v=1;v<=a.pieBackgroundN;v++){var p=e.pstyle("pie-"+v+"-background-size").value,y=e.pstyle("pie-"+v+"-background-color").value,w=e.pstyle("pie-"+v+"-background-opacity").value*r,d=p/100;d+c>1&&(d=1-c);var g=1.5*Math.PI+2*Math.PI*c,m=2*Math.PI*d,b=g+m;p===0||c>=1||c+d>1||(t.beginPath(),t.moveTo(o,s),t.arc(o,s,f,g,b),t.closePath(),this.colorFillStyle(t,y[0],y[1],y[2],w),t.fill(),c+=d)}};var At={},I0=100;At.getPixelRatio=function(){var t=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e};At.paintCache=function(t){for(var e=this.paintCaches=this.paintCaches||[],r=!0,n,a=0;a<e.length;a++)if(n=e[a],n.context===t){r=!1;break}return r&&(n={context:t},e.push(n)),n};At.createGradientStyleFor=function(t,e,r,n,a){var i,o=this.usePaths(),s=r.pstyle(e+"-gradient-stop-colors").value,l=r.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(r.isEdge()){var u=r.sourceEndpoint(),f=r.targetEndpoint(),c=r.midpoint(),h=xr(u,c),v=xr(f,c);i=t.createRadialGradient(c.x,c.y,0,c.x,c.y,Math.max(h,v))}else{var p=o?{x:0,y:0}:r.position(),y=r.paddedWidth(),w=r.paddedHeight();i=t.createRadialGradient(p.x,p.y,0,p.x,p.y,Math.max(y,w))}else if(r.isEdge()){var d=r.sourceEndpoint(),g=r.targetEndpoint();i=t.createLinearGradient(d.x,d.y,g.x,g.y)}else{var m=o?{x:0,y:0}:r.position(),b=r.paddedWidth(),E=r.paddedHeight(),S=b/2,C=E/2,T=r.pstyle("background-gradient-direction").value;switch(T){case"to-bottom":i=t.createLinearGradient(m.x,m.y-C,m.x,m.y+C);break;case"to-top":i=t.createLinearGradient(m.x,m.y+C,m.x,m.y-C);break;case"to-left":i=t.createLinearGradient(m.x+S,m.y,m.x-S,m.y);break;case"to-right":i=t.createLinearGradient(m.x-S,m.y,m.x+S,m.y);break;case"to-bottom-right":case"to-right-bottom":i=t.createLinearGradient(m.x-S,m.y-C,m.x+S,m.y+C);break;case"to-top-right":case"to-right-top":i=t.createLinearGradient(m.x-S,m.y+C,m.x+S,m.y-C);break;case"to-bottom-left":case"to-left-bottom":i=t.createLinearGradient(m.x+S,m.y-C,m.x-S,m.y+C);break;case"to-top-left":case"to-left-top":i=t.createLinearGradient(m.x+S,m.y+C,m.x-S,m.y-C);break}}if(!i)return null;for(var _=l.length===s.length,P=s.length,F=0;F<P;F++)i.addColorStop(_?l[F]:F/(P-1),"rgba("+s[F][0]+","+s[F][1]+","+s[F][2]+","+a+")");return i};At.gradientFillStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"background",e,r,n);if(!a)return null;t.fillStyle=a};At.colorFillStyle=function(t,e,r,n,a){t.fillStyle="rgba("+e+","+r+","+n+","+a+")"};At.eleFillStyle=function(t,e,r){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(t,e,n,r);else{var a=e.pstyle("background-color").value;this.colorFillStyle(t,a[0],a[1],a[2],r)}};At.gradientStrokeStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"line",e,r,n);if(!a)return null;t.strokeStyle=a};At.colorStrokeStyle=function(t,e,r,n,a){t.strokeStyle="rgba("+e+","+r+","+n+","+a+")"};At.eleStrokeStyle=function(t,e,r){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(t,e,n,r);else{var a=e.pstyle("line-color").value;this.colorStrokeStyle(t,a[0],a[1],a[2],r)}};At.matchCanvasSize=function(t){var e=this,r=e.data,n=e.findContainerClientCoords(),a=n[2],i=n[3],o=e.getPixelRatio(),s=e.motionBlurPxRatio;(t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(o=s);var l=a*o,u=i*o,f;if(!(l===e.canvasWidth&&u===e.canvasHeight)){e.fontCaches=null;var c=r.canvasContainer;c.style.width=a+"px",c.style.height=i+"px";for(var h=0;h<e.CANVAS_LAYERS;h++)f=r.canvases[h],f.width=l,f.height=u,f.style.width=a+"px",f.style.height=i+"px";for(var h=0;h<e.BUFFER_COUNT;h++)f=r.bufferCanvases[h],f.width=l,f.height=u,f.style.width=a+"px",f.style.height=i+"px";e.textureMult=1,o<=1&&(f=r.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,f.width=l*e.textureMult,f.height=u*e.textureMult),e.canvasWidth=l,e.canvasHeight=u}};At.renderTo=function(t,e,r,n){this.render({forcedContext:t,forcedZoom:e,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})};At.render=function(t){t=t||Ol();var e=t.forcedContext,r=t.drawAllLayers,n=t.drawOnlyNodeLayer,a=t.forcedZoom,i=t.forcedPan,o=this,s=t.forcedPxRatio===void 0?this.getPixelRatio():t.forcedPxRatio,l=o.cy,u=o.data,f=u.canvasNeedsRedraw,c=o.textureOnViewport&&!e&&(o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming),h=t.motionBlur!==void 0?t.motionBlur:o.motionBlur,v=o.motionBlurPxRatio,p=l.hasCompoundNodes(),y=o.hoverData.draggingEles,w=!!(o.hoverData.selecting||o.touchData.selecting);h=h&&!e&&o.motionBlurEnabled&&!w;var d=h;e||(o.prevPxRatio!==s&&(o.invalidateContainerClientCoordsCache(),o.matchCanvasSize(o.container),o.redrawHint("eles",!0),o.redrawHint("drag",!0)),o.prevPxRatio=s),!e&&o.motionBlurTimeout&&clearTimeout(o.motionBlurTimeout),h&&(o.mbFrames==null&&(o.mbFrames=0),o.mbFrames++,o.mbFrames<3&&(d=!1),o.mbFrames>o.minMbLowQualFrames&&(o.motionBlurPxRatio=o.mbPxRBlurry)),o.clearingMotionBlur&&(o.motionBlurPxRatio=1),o.textureDrawLastFrame&&!c&&(f[o.NODE]=!0,f[o.SELECT_BOX]=!0);var g=l.style(),m=l.zoom(),b=a!==void 0?a:m,E=l.pan(),S={x:E.x,y:E.y},C={zoom:m,pan:{x:E.x,y:E.y}},T=o.prevViewport,_=T===void 0||C.zoom!==T.zoom||C.pan.x!==T.pan.x||C.pan.y!==T.pan.y;!_&&!(y&&!p)&&(o.motionBlurPxRatio=1),i&&(S=i),b*=s,S.x*=s,S.y*=s;var P=o.getCachedZSortedEles();function F(D,j,q,L,B){var Z=D.globalCompositeOperation;D.globalCompositeOperation="destination-out",o.colorFillStyle(D,255,255,255,o.motionBlurTransparency),D.fillRect(j,q,L,B),D.globalCompositeOperation=Z}function k(D,j){var q,L,B,Z;!o.clearingMotionBlur&&(D===u.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]||D===u.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG])?(q={x:E.x*v,y:E.y*v},L=m*v,B=o.canvasWidth*v,Z=o.canvasHeight*v):(q=S,L=b,B=o.canvasWidth,Z=o.canvasHeight),D.setTransform(1,0,0,1,0,0),j==="motionBlur"?F(D,0,0,B,Z):!e&&(j===void 0||j)&&D.clearRect(0,0,B,Z),r||(D.translate(q.x,q.y),D.scale(L,L)),i&&D.translate(i.x,i.y),a&&D.scale(a,a)}if(c||(o.textureDrawLastFrame=!1),c){if(o.textureDrawLastFrame=!0,!o.textureCache){o.textureCache={},o.textureCache.bb=l.mutableElements().boundingBox(),o.textureCache.texture=o.data.bufferCanvases[o.TEXTURE_BUFFER];var R=o.data.bufferContexts[o.TEXTURE_BUFFER];R.setTransform(1,0,0,1,0,0),R.clearRect(0,0,o.canvasWidth*o.textureMult,o.canvasHeight*o.textureMult),o.render({forcedContext:R,drawOnlyNodeLayer:!0,forcedPxRatio:s*o.textureMult});var C=o.textureCache.viewport={zoom:l.zoom(),pan:l.pan(),width:o.canvasWidth,height:o.canvasHeight};C.mpan={x:(0-C.pan.x)/C.zoom,y:(0-C.pan.y)/C.zoom}}f[o.DRAG]=!1,f[o.NODE]=!1;var x=u.contexts[o.NODE],W=o.textureCache.texture,C=o.textureCache.viewport;x.setTransform(1,0,0,1,0,0),h?F(x,0,0,C.width,C.height):x.clearRect(0,0,C.width,C.height);var O=g.core("outside-texture-bg-color").value,M=g.core("outside-texture-bg-opacity").value;o.colorFillStyle(x,O[0],O[1],O[2],M),x.fillRect(0,0,C.width,C.height);var m=l.zoom();k(x,!1),x.clearRect(C.mpan.x,C.mpan.y,C.width/C.zoom/s,C.height/C.zoom/s),x.drawImage(W,C.mpan.x,C.mpan.y,C.width/C.zoom/s,C.height/C.zoom/s)}else o.textureOnViewport&&!e&&(o.textureCache=null);var K=l.extent(),G=o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming||o.hoverData.draggingEles||o.cy.animated(),H=o.hideEdgesOnViewport&&G,A=[];if(A[o.NODE]=!f[o.NODE]&&h&&!o.clearedForMotionBlur[o.NODE]||o.clearingMotionBlur,A[o.NODE]&&(o.clearedForMotionBlur[o.NODE]=!0),A[o.DRAG]=!f[o.DRAG]&&h&&!o.clearedForMotionBlur[o.DRAG]||o.clearingMotionBlur,A[o.DRAG]&&(o.clearedForMotionBlur[o.DRAG]=!0),f[o.NODE]||r||n||A[o.NODE]){var z=h&&!A[o.NODE]&&v!==1,x=e||(z?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]:u.contexts[o.NODE]),$=h&&!z?"motionBlur":void 0;k(x,$),H?o.drawCachedNodes(x,P.nondrag,s,K):o.drawLayeredElements(x,P.nondrag,s,K),o.debug&&o.drawDebugPoints(x,P.nondrag),!r&&!h&&(f[o.NODE]=!1)}if(!n&&(f[o.DRAG]||r||A[o.DRAG])){var z=h&&!A[o.DRAG]&&v!==1,x=e||(z?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG]:u.contexts[o.DRAG]);k(x,h&&!z?"motionBlur":void 0),H?o.drawCachedNodes(x,P.drag,s,K):o.drawCachedElements(x,P.drag,s,K),o.debug&&o.drawDebugPoints(x,P.drag),!r&&!h&&(f[o.DRAG]=!1)}if(o.showFps||!n&&f[o.SELECT_BOX]&&!r){var x=e||u.contexts[o.SELECT_BOX];if(k(x),o.selection[4]==1&&(o.hoverData.selecting||o.touchData.selecting)){var m=o.cy.zoom(),I=g.core("selection-box-border-width").value/m;x.lineWidth=I,x.fillStyle="rgba("+g.core("selection-box-color").value[0]+","+g.core("selection-box-color").value[1]+","+g.core("selection-box-color").value[2]+","+g.core("selection-box-opacity").value+")",x.fillRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]),I>0&&(x.strokeStyle="rgba("+g.core("selection-box-border-color").value[0]+","+g.core("selection-box-border-color").value[1]+","+g.core("selection-box-border-color").value[2]+","+g.core("selection-box-opacity").value+")",x.strokeRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]))}if(u.bgActivePosistion&&!o.hoverData.selecting){var m=o.cy.zoom(),V=u.bgActivePosistion;x.fillStyle="rgba("+g.core("active-bg-color").value[0]+","+g.core("active-bg-color").value[1]+","+g.core("active-bg-color").value[2]+","+g.core("active-bg-opacity").value+")",x.beginPath(),x.arc(V.x,V.y,g.core("active-bg-size").pfValue/m,0,2*Math.PI),x.fill()}var Y=o.lastRedrawTime;if(o.showFps&&Y){Y=Math.round(Y);var U=Math.round(1e3/Y);x.setTransform(1,0,0,1,0,0),x.fillStyle="rgba(255, 0, 0, 0.75)",x.strokeStyle="rgba(255, 0, 0, 0.75)",x.lineWidth=1,x.fillText("1 frame = "+Y+" ms = "+U+" fps",0,20);var Q=60;x.strokeRect(0,30,250,20),x.fillRect(0,30,250*Math.min(U/Q,1),20)}r||(f[o.SELECT_BOX]=!1)}if(h&&v!==1){var te=u.contexts[o.NODE],ae=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_NODE],oe=u.contexts[o.DRAG],ue=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_DRAG],de=function(j,q,L){j.setTransform(1,0,0,1,0,0),L||!d?j.clearRect(0,0,o.canvasWidth,o.canvasHeight):F(j,0,0,o.canvasWidth,o.canvasHeight);var B=v;j.drawImage(q,0,0,o.canvasWidth*B,o.canvasHeight*B,0,0,o.canvasWidth,o.canvasHeight)};(f[o.NODE]||A[o.NODE])&&(de(te,ae,A[o.NODE]),f[o.NODE]=!1),(f[o.DRAG]||A[o.DRAG])&&(de(oe,ue,A[o.DRAG]),f[o.DRAG]=!1)}o.prevViewport=C,o.clearingMotionBlur&&(o.clearingMotionBlur=!1,o.motionBlurCleared=!0,o.motionBlur=!0),h&&(o.motionBlurTimeout=setTimeout(function(){o.motionBlurTimeout=null,o.clearedForMotionBlur[o.NODE]=!1,o.clearedForMotionBlur[o.DRAG]=!1,o.motionBlur=!1,o.clearingMotionBlur=!c,o.mbFrames=0,f[o.NODE]=!0,f[o.DRAG]=!0,o.redraw()},I0)),e||l.emit("render")};var vr={};vr.drawPolygonPath=function(t,e,r,n,a,i){var o=n/2,s=a/2;t.beginPath&&t.beginPath(),t.moveTo(e+o*i[0],r+s*i[1]);for(var l=1;l<i.length/2;l++)t.lineTo(e+o*i[l*2],r+s*i[l*2+1]);t.closePath()};vr.drawRoundPolygonPath=function(t,e,r,n,a,i){var o=n/2,s=a/2,l=to(n,a);t.beginPath&&t.beginPath();for(var u=0;u<i.length/4;u++){var f=void 0,c=void 0;u===0?f=i.length-2:f=u*4-2,c=u*4+2;var h=e+o*i[u*4],v=r+s*i[u*4+1],p=-i[f]*i[c]-i[f+1]*i[c+1],y=l/Math.tan(Math.acos(p)/2),w=h-y*i[f],d=v-y*i[f+1],g=h+y*i[c],m=v+y*i[c+1];u===0?t.moveTo(w,d):t.lineTo(w,d),t.arcTo(h,v,g,m,l)}t.closePath()};vr.drawRoundRectanglePath=function(t,e,r,n,a){var i=n/2,o=a/2,s=Vn(n,a);t.beginPath&&t.beginPath(),t.moveTo(e,r-o),t.arcTo(e+i,r-o,e+i,r,s),t.arcTo(e+i,r+o,e,r+o,s),t.arcTo(e-i,r+o,e-i,r,s),t.arcTo(e-i,r-o,e,r-o,s),t.lineTo(e,r-o),t.closePath()};vr.drawBottomRoundRectanglePath=function(t,e,r,n,a){var i=n/2,o=a/2,s=Vn(n,a);t.beginPath&&t.beginPath(),t.moveTo(e,r-o),t.lineTo(e+i,r-o),t.lineTo(e+i,r),t.arcTo(e+i,r+o,e,r+o,s),t.arcTo(e-i,r+o,e-i,r,s),t.lineTo(e-i,r-o),t.lineTo(e,r-o),t.closePath()};vr.drawCutRectanglePath=function(t,e,r,n,a){var i=n/2,o=a/2,s=Gl();t.beginPath&&t.beginPath(),t.moveTo(e-i+s,r-o),t.lineTo(e+i-s,r-o),t.lineTo(e+i,r-o+s),t.lineTo(e+i,r+o-s),t.lineTo(e+i-s,r+o),t.lineTo(e-i+s,r+o),t.lineTo(e-i,r+o-s),t.lineTo(e-i,r-o+s),t.closePath()};vr.drawBarrelPath=function(t,e,r,n,a){var i=n/2,o=a/2,s=e-i,l=e+i,u=r-o,f=r+o,c=Pi(n,a),h=c.widthOffset,v=c.heightOffset,p=c.ctrlPtOffsetPct*h;t.beginPath&&t.beginPath(),t.moveTo(s,u+v),t.lineTo(s,f-v),t.quadraticCurveTo(s+p,f,s+h,f),t.lineTo(l-h,f),t.quadraticCurveTo(l-p,f,l,f-v),t.lineTo(l,u+v),t.quadraticCurveTo(l-p,u,l-h,u),t.lineTo(s+h,u),t.quadraticCurveTo(s+p,u,s,u+v),t.closePath()};var Bs=Math.sin(0),Ms=Math.cos(0),Ri={},Ni={},Ru=Math.PI/40;for(var Ir=0*Math.PI;Ir<2*Math.PI;Ir+=Ru)Ri[Ir]=Math.sin(Ir),Ni[Ir]=Math.cos(Ir);vr.drawEllipsePath=function(t,e,r,n,a){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,r,n/2,a/2,0,0,2*Math.PI);else for(var i,o,s=n/2,l=a/2,u=0*Math.PI;u<2*Math.PI;u+=Ru)i=e-s*Ri[u]*Bs+s*Ni[u]*Ms,o=r+l*Ni[u]*Bs+l*Ri[u]*Ms,u===0?t.moveTo(i,o):t.lineTo(i,o);t.closePath()};var Un={};Un.createBuffer=function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,[r,r.getContext("2d")]};Un.bufferCanvasImage=function(t){var e=this.cy,r=e.mutableElements(),n=r.boundingBox(),a=this.findContainerClientCoords(),i=t.full?Math.ceil(n.w):a[2],o=t.full?Math.ceil(n.h):a[3],s=he(t.maxWidth)||he(t.maxHeight),l=this.getPixelRatio(),u=1;if(t.scale!==void 0)i*=t.scale,o*=t.scale,u=t.scale;else if(s){var f=1/0,c=1/0;he(t.maxWidth)&&(f=u*t.maxWidth/i),he(t.maxHeight)&&(c=u*t.maxHeight/o),u=Math.min(f,c),i*=u,o*=u}s||(i*=l,o*=l,u*=l);var h=document.createElement("canvas");h.width=i,h.height=o,h.style.width=i+"px",h.style.height=o+"px";var v=h.getContext("2d");if(i>0&&o>0){v.clearRect(0,0,i,o),v.globalCompositeOperation="source-over";var p=this.getCachedZSortedEles();if(t.full)v.translate(-n.x1*u,-n.y1*u),v.scale(u,u),this.drawElements(v,p),v.scale(1/u,1/u),v.translate(n.x1*u,n.y1*u);else{var y=e.pan(),w={x:y.x*u,y:y.y*u};u*=e.zoom(),v.translate(w.x,w.y),v.scale(u,u),this.drawElements(v,p),v.scale(1/u,1/u),v.translate(-w.x,-w.y)}t.bg&&(v.globalCompositeOperation="destination-over",v.fillStyle=t.bg,v.rect(0,0,i,o),v.fill())}return h};function R0(t,e){for(var r=atob(t),n=new ArrayBuffer(r.length),a=new Uint8Array(n),i=0;i<r.length;i++)a[i]=r.charCodeAt(i);return new Blob([n],{type:e})}function Os(t){var e=t.indexOf(",");return t.substr(e+1)}function Nu(t,e,r){var n=function(){return e.toDataURL(r,t.quality)};switch(t.output){case"blob-promise":return new en(function(a,i){try{e.toBlob(function(o){o!=null?a(o):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},r,t.quality)}catch(o){i(o)}});case"blob":return R0(Os(n()),r);case"base64":return Os(n());case"base64uri":default:return n()}}Un.png=function(t){return Nu(t,this.bufferCanvasImage(t),"image/png")};Un.jpg=function(t){return Nu(t,this.bufferCanvasImage(t),"image/jpeg")};var Fu={};Fu.nodeShapeImpl=function(t,e,r,n,a,i,o){switch(t){case"ellipse":return this.drawEllipsePath(e,r,n,a,i);case"polygon":return this.drawPolygonPath(e,r,n,a,i,o);case"round-polygon":return this.drawRoundPolygonPath(e,r,n,a,i,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,r,n,a,i);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,r,n,a,i);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,r,n,a,i);case"barrel":return this.drawBarrelPath(e,r,n,a,i)}};var N0=$u,De=$u.prototype;De.CANVAS_LAYERS=3;De.SELECT_BOX=0;De.DRAG=1;De.NODE=2;De.BUFFER_COUNT=3;De.TEXTURE_BUFFER=0;De.MOTIONBLUR_BUFFER_NODE=1;De.MOTIONBLUR_BUFFER_DRAG=2;function $u(t){var e=this;e.data={canvases:new Array(De.CANVAS_LAYERS),contexts:new Array(De.CANVAS_LAYERS),canvasNeedsRedraw:new Array(De.CANVAS_LAYERS),bufferCanvases:new Array(De.BUFFER_COUNT),bufferContexts:new Array(De.CANVAS_LAYERS)};var r="-webkit-tap-highlight-color",n="rgba(0,0,0,0)";e.data.canvasContainer=document.createElement("div");var a=e.data.canvasContainer.style;e.data.canvasContainer.style[r]=n,a.position="relative",a.zIndex="0",a.overflow="hidden";var i=t.cy.container();i.appendChild(e.data.canvasContainer),i.style[r]=n;var o={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};yg()&&(o["-ms-touch-action"]="none",o["touch-action"]="none");for(var s=0;s<De.CANVAS_LAYERS;s++){var l=e.data.canvases[s]=document.createElement("canvas");e.data.contexts[s]=l.getContext("2d"),Object.keys(o).forEach(function(Y){l.style[Y]=o[Y]}),l.style.position="absolute",l.setAttribute("data-id","layer"+s),l.style.zIndex=String(De.CANVAS_LAYERS-s),e.data.canvasContainer.appendChild(l),e.data.canvasNeedsRedraw[s]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[De.NODE].setAttribute("data-id","layer"+De.NODE+"-node"),e.data.canvases[De.SELECT_BOX].setAttribute("data-id","layer"+De.SELECT_BOX+"-selectbox"),e.data.canvases[De.DRAG].setAttribute("data-id","layer"+De.DRAG+"-drag");for(var s=0;s<De.BUFFER_COUNT;s++)e.data.bufferCanvases[s]=document.createElement("canvas"),e.data.bufferContexts[s]=e.data.bufferCanvases[s].getContext("2d"),e.data.bufferCanvases[s].style.position="absolute",e.data.bufferCanvases[s].setAttribute("data-id","buffer"+s),e.data.bufferCanvases[s].style.zIndex=String(-s-1),e.data.bufferCanvases[s].style.visibility="hidden";e.pathsEnabled=!0;var u=Tt(),f=function(U){return{x:(U.x1+U.x2)/2,y:(U.y1+U.y2)/2}},c=function(U){return{x:-U.w/2,y:-U.h/2}},h=function(U){var Q=U[0]._private,te=Q.oldBackgroundTimestamp===Q.backgroundTimestamp;return!te},v=function(U){return U[0]._private.nodeKey},p=function(U){return U[0]._private.labelStyleKey},y=function(U){return U[0]._private.sourceLabelStyleKey},w=function(U){return U[0]._private.targetLabelStyleKey},d=function(U,Q,te,ae,oe){return e.drawElement(U,Q,te,!1,!1,oe)},g=function(U,Q,te,ae,oe){return e.drawElementText(U,Q,te,ae,"main",oe)},m=function(U,Q,te,ae,oe){return e.drawElementText(U,Q,te,ae,"source",oe)},b=function(U,Q,te,ae,oe){return e.drawElementText(U,Q,te,ae,"target",oe)},E=function(U){return U.boundingBox(),U[0]._private.bodyBounds},S=function(U){return U.boundingBox(),U[0]._private.labelBounds.main||u},C=function(U){return U.boundingBox(),U[0]._private.labelBounds.source||u},T=function(U){return U.boundingBox(),U[0]._private.labelBounds.target||u},_=function(U,Q){return Q},P=function(U){return f(E(U))},F=function(U,Q,te){var ae=U?U+"-":"";return{x:Q.x+te.pstyle(ae+"text-margin-x").pfValue,y:Q.y+te.pstyle(ae+"text-margin-y").pfValue}},k=function(U,Q,te){var ae=U[0]._private.rscratch;return{x:ae[Q],y:ae[te]}},R=function(U){return F("",k(U,"labelX","labelY"),U)},x=function(U){return F("source",k(U,"sourceLabelX","sourceLabelY"),U)},W=function(U){return F("target",k(U,"targetLabelX","targetLabelY"),U)},O=function(U){return c(E(U))},M=function(U){return c(C(U))},K=function(U){return c(T(U))},G=function(U){var Q=S(U),te=c(S(U));if(U.isNode()){switch(U.pstyle("text-halign").value){case"left":te.x=-Q.w;break;case"right":te.x=0;break}switch(U.pstyle("text-valign").value){case"top":te.y=-Q.h;break;case"bottom":te.y=0;break}}return te},H=e.data.eleTxrCache=new mn(e,{getKey:v,doesEleInvalidateKey:h,drawElement:d,getBoundingBox:E,getRotationPoint:P,getRotationOffset:O,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),A=e.data.lblTxrCache=new mn(e,{getKey:p,drawElement:g,getBoundingBox:S,getRotationPoint:R,getRotationOffset:G,isVisible:_}),z=e.data.slbTxrCache=new mn(e,{getKey:y,drawElement:m,getBoundingBox:C,getRotationPoint:x,getRotationOffset:M,isVisible:_}),$=e.data.tlbTxrCache=new mn(e,{getKey:w,drawElement:b,getBoundingBox:T,getRotationPoint:W,getRotationOffset:K,isVisible:_}),I=e.data.lyrTxrCache=new Bu(e);e.onUpdateEleCalcs(function(U,Q){H.invalidateElements(Q),A.invalidateElements(Q),z.invalidateElements(Q),$.invalidateElements(Q),I.invalidateElements(Q);for(var te=0;te<Q.length;te++){var ae=Q[te]._private;ae.oldBackgroundTimestamp=ae.backgroundTimestamp}});var V=function(U){for(var Q=0;Q<U.length;Q++)I.enqueueElementRefinement(U[Q].ele)};H.onDequeue(V),A.onDequeue(V),z.onDequeue(V),$.onDequeue(V)}De.redrawHint=function(t,e){var r=this;switch(t){case"eles":r.data.canvasNeedsRedraw[De.NODE]=e;break;case"drag":r.data.canvasNeedsRedraw[De.DRAG]=e;break;case"select":r.data.canvasNeedsRedraw[De.SELECT_BOX]=e;break}};var F0=typeof Path2D<"u";De.path2dEnabled=function(t){if(t===void 0)return this.pathsEnabled;this.pathsEnabled=!!t};De.usePaths=function(){return F0&&this.pathsEnabled};De.setImgSmoothing=function(t,e){t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)};De.getImgSmoothing=function(t){return t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled};De.makeOffscreenCanvas=function(t,e){var r;return(typeof OffscreenCanvas>"u"?"undefined":rt(OffscreenCanvas))!=="undefined"?r=new OffscreenCanvas(t,e):(r=document.createElement("canvas"),r.width=t,r.height=e),r};[Mu,Ut,Jt,co,Tr,on,At,vr,Un,Fu].forEach(function(t){be(De,t)});var $0=[{name:"null",impl:Su},{name:"base",impl:Au},{name:"canvas",impl:N0}],V0=[{type:"layout",extensions:Zy},{type:"renderer",extensions:$0}],Vu={},qu={};function Gu(t,e,r){var n=r,a=function(T){ze("Can not register `"+e+"` for `"+t+"` since `"+T+"` already exists in the prototype and can not be overridden")};if(t==="core"){if(An.prototype[e])return a(e);An.prototype[e]=r}else if(t==="collection"){if(ct.prototype[e])return a(e);ct.prototype[e]=r}else if(t==="layout"){for(var i=function(T){this.options=T,r.call(this,T),_e(this._private)||(this._private={}),this._private.cy=T.cy,this._private.listeners=[],this.createEmitter()},o=i.prototype=Object.create(r.prototype),s=[],l=0;l<s.length;l++){var u=s[l];o[u]=o[u]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var f=r.prototype.stop;o.stop=function(){var C=this.options;if(C&&C.animate){var T=this.animations;if(T)for(var _=0;_<T.length;_++)T[_].stop()}return f?f.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var c=function(T){return T._private.cy},h={addEventFields:function(T,_){_.layout=T,_.cy=c(T),_.target=T},bubble:function(){return!0},parent:function(T){return c(T)}};be(o,{createEmitter:function(){return this._private.emitter=new Va(h,this),this},emitter:function(){return this._private.emitter},on:function(T,_){return this.emitter().on(T,_),this},one:function(T,_){return this.emitter().one(T,_),this},once:function(T,_){return this.emitter().one(T,_),this},removeListener:function(T,_){return this.emitter().removeListener(T,_),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(T,_){return this.emitter().emit(T,_),this}}),Pe.eventAliasesOn(o),n=i}else if(t==="renderer"&&e!=="null"&&e!=="base"){var v=Hu("renderer","base"),p=v.prototype,y=r,w=r.prototype,d=function(){v.apply(this,arguments),y.apply(this,arguments)},g=d.prototype;for(var m in p){var b=p[m],E=w[m]!=null;if(E)return a(m);g[m]=b}for(var S in w)g[S]=w[S];p.clientFunctions.forEach(function(C){g[C]=g[C]||function(){Ke("Renderer does not implement `renderer."+C+"()` on its prototype")}}),n=d}else if(t==="__proto__"||t==="constructor"||t==="prototype")return Ke(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return _l({map:Vu,keys:[t,e],value:n})}function Hu(t,e){return Dl({map:Vu,keys:[t,e]})}function q0(t,e,r,n,a){return _l({map:qu,keys:[t,e,r,n],value:a})}function G0(t,e,r,n){return Dl({map:qu,keys:[t,e,r,n]})}var Fi=function(){if(arguments.length===2)return Hu.apply(null,arguments);if(arguments.length===3)return Gu.apply(null,arguments);if(arguments.length===4)return G0.apply(null,arguments);if(arguments.length===5)return q0.apply(null,arguments);Ke("Invalid extension access syntax")};An.prototype.extension=Fi;V0.forEach(function(t){t.extensions.forEach(function(e){Gu(t.type,e.name,e.impl)})});var Wu=function t(){if(!(this instanceof t))return new t;this.length=0},Sr=Wu.prototype;Sr.instanceString=function(){return"stylesheet"};Sr.selector=function(t){var e=this.length++;return this[e]={selector:t,properties:[]},this};Sr.css=function(t,e){var r=this.length-1;if(me(t))this[r].properties.push({name:t,value:e});else if(_e(t))for(var n=t,a=Object.keys(n),i=0;i<a.length;i++){var o=a[i],s=n[o];if(s!=null){var l=pt.properties[o]||pt.properties[Ia(o)];if(l!=null){var u=l.name,f=s;this[r].properties.push({name:u,value:f})}}}return this};Sr.style=Sr.css;Sr.generateStyle=function(t){var e=new pt(t);return this.appendToStyle(e)};Sr.appendToStyle=function(t){for(var e=0;e<this.length;e++){var r=this[e],n=r.selector,a=r.properties;t.selector(n);for(var i=0;i<a.length;i++){var o=a[i];t.css(o.name,o.value)}}return t};var H0="3.25.0",kr=function(e){if(e===void 0&&(e={}),_e(e))return new An(e);if(me(e))return Fi.apply(Fi,arguments)};kr.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(kr),t.apply(null,e),this};kr.warnings=function(t){return Bl(t)};kr.version=H0;kr.stylesheet=kr.Stylesheet=Wu;var W0=kr;const Pa=Mn(W0);var Uu={exports:{}},Is={},Rs;function U0(){return Rs||(Rs=1,Object.extend=function(t){t=t||{};for(var e=1;e<arguments.length;e++){var r=arguments[e];if(r)for(var n in r)r.hasOwnProperty(n)&&(Array.isArray(r[n])?t[n]=r[n].slice():typeof r[n]=="object"?t[n]=Object.extend(t[n],r[n]):t[n]=r[n])}return t}),Is}var ci,Ns;function K0(){return Ns||(Ns=1,ci=function(t,e,r){var n={};n.changeOptions=function(i){e=i.gridSpacing,r=i.snapToGridCenter?.5:0};var a=function(i){return i.scratch("_gridGuide")||i.scratch("_gridGuide",{}),i.scratch("_gridGuide")};return n.snapPos=function(i){var o=r?Math.floor(i.x/e):Math.round(i.x/e),s=r?Math.floor(i.y/e):Math.round(i.y/e),l={x:(o+r)*e,y:(s+r)*e};return l},n.snapNode=function(i){var o=i.position(),s=n.snapPos(o);i.position(s)},n.snapNodesTopDown=function(i){t.startBatch(),i.union(i.descendants()).filter(":childless").positions(function(o,s){typeof o=="number"&&(o=s);var l=o.position();return n.snapPos(l)}),t.endBatch()},n.onFreeNode=function(i){var o,s=i.target||i.cyTarget;s.selected()?o=i.cy.$(":selected"):o=s,n.snapNodesTopDown(o)},n.recoverSnapNode=function(i){var o=a(i).snap;o&&i.position(o.oldPos)},n}),ci}var di,Fs;function Z0(){return Fs||(Fs=1,di=function(t,e){var r={},n,a,i,o;r.onTapStartNode=function(f){if(!(f.originalEvent.altKey||f.originalEvent.ctrlKey||f.originalEvent.metaKey||f.originalEvent.shiftKey)){var c=f.target||f.cyTarget;c.selected()?a=f.cy.$(":selected"):a=c,i=f.position||f.cyPosition,c.grabbable()&&!c.locked()&&(n=c,n.lock(),t.on("tapdrag",u),t.on("tapend",s))}};var s=function(f){t.off("tapdrag",u),t.off("tapend",s),n.unlock(),f.preventDefault()},l=function(){return{x:o.x-i.x,y:o.y-i.y}},u=function(f){n.position(),o=f.position||f.cyPosition,o=e.snapPos(o);var c=l();if(c.x!=0||c.y!=0){n.unlock();var h=a.union(a.descendants());h.filter(":childless").positions(function(v,p){typeof v=="number"&&(v=p);var y=v.position();return e.snapPos({x:y.x+c.x,y:y.y+c.y})}),i=o,n.lock(),n.trigger("drag")}};return r}),di}var hi,$s;function Y0(){return $s||($s=1,hi=function(t,e,r){var n=t,a=function(v){n=v},i=function(v){var p=v.getBoundingClientRect();return{top:p.top+document.documentElement.scrollTop,left:p.left+document.documentElement.scrollLeft}},o=document.createElement("canvas"),s=e.container(),l=o.getContext("2d");s.appendChild(o);var u=function(){o.height=0,o.width=0,o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.zIndex=n.gridStackOrder};u();var f=function(){var v=e.zoom(),p=e.width(),y=e.height(),w=n.gridSpacing*v,d=e.pan(),g=d.x%w,m=d.y%w;l.strokeStyle=n.gridColor,l.lineWidth=n.lineWidth;var b='	<svg width="'+p+'" height="'+y+`" xmlns="http://www.w3.org/2000/svg">
	            <defs>
	                <pattern id="horizontalLines" width="`+w+'" height="'+w+`" patternUnits="userSpaceOnUse">
	                    <path d="M `+w+' 0 L 0 0 0 0" fill="none" stroke="'+n.gridColor+'" stroke-width="'+n.lineWidth+`" />
	                </pattern>
	                <pattern id="verticalLines" width="`+w+'" height="'+w+`" patternUnits="userSpaceOnUse">
	                    <path d="M 0 0 L 0 0 0 `+w+'" fill="none" stroke="'+n.gridColor+'" stroke-width="'+n.lineWidth+`" />
	                </pattern>
	            </defs>
	            <rect width="100%" height="100%" fill="url(#horizontalLines)" transform="translate(0, `+m+`)" />
	            <rect width="100%" height="100%" fill="url(#verticalLines)" transform="translate(`+g+`, 0)" />
	        </svg>
`,E=new Image;b=encodeURIComponent(b),E.onload=function(){c(),l.drawImage(E,0,0)},E.src="data:image/svg+xml,"+b},c=function(){var v=e.width(),p=e.height();l.clearRect(0,0,v,p)},h=r(function(){o.height=e.height(),o.width=e.width(),o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.zIndex=n.gridStackOrder,setTimeout(function(){o.height=e.height(),o.width=e.width();var v=i(o),p=i(s);o.style.top=-(v.top-p.top),o.style.left=-(v.left-p.left),f()},0)},250);return{initCanvas:h,resizeCanvas:h,resetCanvas:u,clearCanvas:c,drawGrid:f,changeOptions:a,sizeCanvas:f}}),hi}var vi,Vs;function X0(){return Vs||(Vs=1,vi=function(t){var e=function(i){t=Number(i.gridSpacing)},r=function(i){return i.scratch("_gridGuide")||i.scratch("_gridGuide",{}),i.scratch("_gridGuide")};function n(i){var o=i.width(),s=i.height(),l=Math.round((o-t)/(t*2))*(t*2),u=Math.round((s-t)/(t*2))*(t*2);l=l>0?l+t:t,u=u>0?u+t:t,(o!=l||s!=u)&&(i.style({width:l,height:u}),r(i).resize={oldWidth:o,oldHeight:s})}function a(i){var o=r(i).resize;o&&i.style({width:o.oldWidth,height:o.oldHeight})}return{resizeNode:n,recoverNodeDimensions:a,changeOptions:e}}),vi}var gi,qs;function j0(){return qs||(qs=1,gi=function(t,e,r,n,a,i,o,s){var l=function(I){return function(V){I(V)}},u={snapToGridDuringDrag:new l(p),resize:new l(d),snapToGridOnRelease:new l(E),drawGrid:new l(T),guidelines:new l(O),parentPadding:new l(G)};function f(I,V){return function(Y){var U=Y.target||Y.cyTarget;(!U.is(":parent")||V)&&I(U)}}function c(I){return function(){t.nodes().not(":parent").each(function(V,Y){typeof V=="number"&&(V=Y),I(V)})}}function h(I){return function(){t.nodes().each(function(V,Y){typeof V=="number"&&(V=Y),I(V)})}}function v(I){return I?"on":"off"}function p(I){t[v(I)]("tapstart","node",n.onTapStartNode)}var y=c(r.resizeNode);f(r.resizeNode);var w=c(r.recoverNodeDimensions);function d(I){t[v(I)]("ready",y),I?y():w()}var g=h(e.snapNodesTopDown),m=h(e.recoverSnapNode),b=f(e.snapNode,!0);function E(I){t[v(I)]("add","node",b),t[v(I)]("ready",g),t[v(I)]("free","node",e.onFreeNode),I?g():m()}var S=function(){A.zoomDash&&a.drawGrid()},C=function(){A.panGrid&&a.drawGrid()};function T(I){t[v(I)]("zoom",S),t[v(I)]("pan",C),I?(a.initCanvas(),t.on("resize",a.resizeCanvas)):(a.clearCanvas(),a.resetCanvas(),t.off("resize",a.resizeCanvas))}var _=null,P=function(I){var V=I.target||I.cyTarget,Y=V.selected()?I.cy.$(":selected"):V;_=i.getTopMostNodes(Y.nodes()),i.lines.init(_)},F=function(I){this.id()==_.id()&&(i.lines.update(_),A.snapToAlignmentLocationDuringDrag&&i.lines.snapToAlignmentLocation(_))},k=function(I){A.snapToAlignmentLocationOnRelease&&i.lines.snapToAlignmentLocation(_),i.lines.destroy(),_=null},R=function(I){i.lines.resize()},x=function(I){i.getMousePos(I)},W=function(I){_&&(i.setMousePos(t.pan()),i.lines.init(_))};function O(I){I?(i.resizeCanvas(),t.on("tapstart","node",x),t.on("grab",P),t.on("pan",W),t.on("drag","node",F),t.on("free",k),window.addEventListener("resize",R)):(t.off("tapstart","node",x),t.off("grab",P),t.off("pan",W),t.off("drag","node",F),t.off("free",k),i.resetCanvas(),window.removeEventListener("resize",R))}var M=function(I){o.setPaddingOfParent(t.nodes(":parent"),I)},K=function(I){o.setPaddingOfParent(I,!0)};function G(I){M(I),t[v(I)]("ready",M),t[v(I)]("add","node:parent",f(K,!0))}var H={},A,z={drawGrid:["gridSpacing","zoomDash","panGrid","gridStackOrder","gridColor","lineWidth","lineDash"],guidelines:["gridSpacing","guidelinesStackOrder","guidelinesTolerance","guidelinesStyle","distributionGuidelines","range","minDistRange","geometricGuidelineRange"],resize:["gridSpacing"],parentPadding:["gridSpacing","parentSpacing"],snapToGridOnRelease:["gridSpacing","snapToGridCenter"]};function $(I){A=Object.extend({},I),I.guidelines=I.initPosAlignment||I.distributionGuidelines||I.geometricGuideline;for(var V in I)if(H[V]!=I[V])if(u.hasOwnProperty(V))u[V](I[V]);else for(var Y in z){var U=z[Y];U.indexOf(V)>=0&&(Y=="drawGrid"&&(a.changeOptions(I),I.drawGrid&&a.resizeCanvas()),Y=="snapToGridOnRelease"&&(e.changeOptions(I),I.snapToGridOnRelease&&g()),Y=="guidelines"&&i.changeOptions(I),Y=="resize"&&(r.changeOptions(I),I.resize&&y()),Y=="parentPadding"&&o.changeOptions(I))}H=Object.extend({},H,I)}return{init:$,syncWithOptions:$}}),gi}var pi,Gs;function Q0(){if(Gs)return pi;Gs=1,pi=w;var t=0,e=1;function r(d,g,m,b,E,S){this._color=d,this.key=g,this.value=m,this.left=b,this.right=E,this._count=S}function n(d){return new r(d._color,d.key,d.value,d.left,d.right,d._count)}function a(d,g){return new r(d,g.key,g.value,g.left,g.right,g._count)}function i(d){d._count=1+(d.left?d.left._count:0)+(d.right?d.right._count:0)}function o(d,g){this._compare=d,this.root=g}var s=o.prototype;Object.defineProperty(s,"keys",{get:function(){var d=[];return this.forEach(function(g,m){d.push(g)}),d}}),Object.defineProperty(s,"values",{get:function(){var d=[];return this.forEach(function(g,m){d.push(m)}),d}}),Object.defineProperty(s,"length",{get:function(){return this.root?this.root._count:0}}),s.insert=function(d,g){for(var m=this._compare,b=this.root,E=[],S=[];b;){var C=m(d,b.key);E.push(b),S.push(C),C<=0?b=b.left:b=b.right}E.push(new r(t,d,g,null,null,1));for(var T=E.length-2;T>=0;--T){var b=E[T];S[T]<=0?E[T]=new r(b._color,b.key,b.value,E[T+1],b.right,b._count+1):E[T]=new r(b._color,b.key,b.value,b.left,E[T+1],b._count+1)}for(var T=E.length-1;T>1;--T){var _=E[T-1],b=E[T];if(_._color===e||b._color===e)break;var P=E[T-2];if(P.left===_)if(_.left===b){var F=P.right;if(F&&F._color===t)_._color=e,P.right=a(e,F),P._color=t,T-=1;else{if(P._color=t,P.left=_.right,_._color=e,_.right=P,E[T-2]=_,E[T-1]=b,i(P),i(_),T>=3){var k=E[T-3];k.left===P?k.left=_:k.right=_}break}}else{var F=P.right;if(F&&F._color===t)_._color=e,P.right=a(e,F),P._color=t,T-=1;else{if(_.right=b.left,P._color=t,P.left=b.right,b._color=e,b.left=_,b.right=P,E[T-2]=b,E[T-1]=_,i(P),i(_),i(b),T>=3){var k=E[T-3];k.left===P?k.left=b:k.right=b}break}}else if(_.right===b){var F=P.left;if(F&&F._color===t)_._color=e,P.left=a(e,F),P._color=t,T-=1;else{if(P._color=t,P.right=_.left,_._color=e,_.left=P,E[T-2]=_,E[T-1]=b,i(P),i(_),T>=3){var k=E[T-3];k.right===P?k.right=_:k.left=_}break}}else{var F=P.left;if(F&&F._color===t)_._color=e,P.left=a(e,F),P._color=t,T-=1;else{if(_.left=b.right,P._color=t,P.right=b.left,b._color=e,b.right=_,b.left=P,E[T-2]=b,E[T-1]=_,i(P),i(_),i(b),T>=3){var k=E[T-3];k.right===P?k.right=b:k.left=b}break}}}return E[0]._color=e,new o(m,E[0])};function l(d,g){if(g.left){var m=l(d,g.left);if(m)return m}var m=d(g.key,g.value);if(m)return m;if(g.right)return l(d,g.right)}function u(d,g,m,b){var E=g(d,b.key);if(E<=0){if(b.left){var S=u(d,g,m,b.left);if(S)return S}var S=m(b.key,b.value);if(S)return S}if(b.right)return u(d,g,m,b.right)}function f(d,g,m,b,E){var S=m(d,E.key),C=m(g,E.key),T;if(S<=0&&(E.left&&(T=f(d,g,m,b,E.left),T)||C>0&&(T=b(E.key,E.value),T)))return T;if(C>0&&E.right)return f(d,g,m,b,E.right)}s.forEach=function(g,m,b){if(this.root)switch(arguments.length){case 1:return l(g,this.root);case 2:return u(m,this._compare,g,this.root);case 3:return this._compare(m,b)>=0?void 0:f(m,b,this._compare,g,this.root)}},Object.defineProperty(s,"begin",{get:function(){for(var d=[],g=this.root;g;)d.push(g),g=g.left;return new c(this,d)}}),Object.defineProperty(s,"end",{get:function(){for(var d=[],g=this.root;g;)d.push(g),g=g.right;return new c(this,d)}}),s.at=function(d){if(d<0)return new c(this,[]);for(var g=this.root,m=[];;){if(m.push(g),g.left){if(d<g.left._count){g=g.left;continue}d-=g.left._count}if(!d)return new c(this,m);if(d-=1,g.right){if(d>=g.right._count)break;g=g.right}else break}return new c(this,[])},s.ge=function(d){for(var g=this._compare,m=this.root,b=[],E=0;m;){var S=g(d,m.key);b.push(m),S<=0&&(E=b.length),S<=0?m=m.left:m=m.right}return b.length=E,new c(this,b)},s.gt=function(d){for(var g=this._compare,m=this.root,b=[],E=0;m;){var S=g(d,m.key);b.push(m),S<0&&(E=b.length),S<0?m=m.left:m=m.right}return b.length=E,new c(this,b)},s.lt=function(d){for(var g=this._compare,m=this.root,b=[],E=0;m;){var S=g(d,m.key);b.push(m),S>0&&(E=b.length),S<=0?m=m.left:m=m.right}return b.length=E,new c(this,b)},s.le=function(d){for(var g=this._compare,m=this.root,b=[],E=0;m;){var S=g(d,m.key);b.push(m),S>=0&&(E=b.length),S<0?m=m.left:m=m.right}return b.length=E,new c(this,b)},s.find=function(d){for(var g=this._compare,m=this.root,b=[];m;){var E=g(d,m.key);if(b.push(m),E===0)return new c(this,b);E<=0?m=m.left:m=m.right}return new c(this,[])},s.remove=function(d){var g=this.find(d);return g?g.remove():this},s.get=function(d){for(var g=this._compare,m=this.root;m;){var b=g(d,m.key);if(b===0)return m.value;b<=0?m=m.left:m=m.right}};function c(d,g){this.tree=d,this._stack=g}var h=c.prototype;Object.defineProperty(h,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(h,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),h.clone=function(){return new c(this.tree,this._stack.slice())};function v(d,g){d.key=g.key,d.value=g.value,d.left=g.left,d.right=g.right,d._color=g._color,d._count=g._count}function p(d){for(var g,m,b,E,S=d.length-1;S>=0;--S){if(g=d[S],S===0){g._color=e;return}if(m=d[S-1],m.left===g){if(b=m.right,b.right&&b.right._color===t){if(b=m.right=n(b),E=b.right=n(b.right),m.right=b.left,b.left=m,b.right=E,b._color=m._color,g._color=e,m._color=e,E._color=e,i(m),i(b),S>1){var C=d[S-2];C.left===m?C.left=b:C.right=b}d[S-1]=b;return}else if(b.left&&b.left._color===t){if(b=m.right=n(b),E=b.left=n(b.left),m.right=E.left,b.left=E.right,E.left=m,E.right=b,E._color=m._color,m._color=e,b._color=e,g._color=e,i(m),i(b),i(E),S>1){var C=d[S-2];C.left===m?C.left=E:C.right=E}d[S-1]=E;return}if(b._color===e)if(m._color===t){m._color=e,m.right=a(t,b);return}else{m.right=a(t,b);continue}else{if(b=n(b),m.right=b.left,b.left=m,b._color=m._color,m._color=t,i(m),i(b),S>1){var C=d[S-2];C.left===m?C.left=b:C.right=b}d[S-1]=b,d[S]=m,S+1<d.length?d[S+1]=g:d.push(g),S=S+2}}else{if(b=m.left,b.left&&b.left._color===t){if(b=m.left=n(b),E=b.left=n(b.left),m.left=b.right,b.right=m,b.left=E,b._color=m._color,g._color=e,m._color=e,E._color=e,i(m),i(b),S>1){var C=d[S-2];C.right===m?C.right=b:C.left=b}d[S-1]=b;return}else if(b.right&&b.right._color===t){if(b=m.left=n(b),E=b.right=n(b.right),m.left=E.right,b.right=E.left,E.right=m,E.left=b,E._color=m._color,m._color=e,b._color=e,g._color=e,i(m),i(b),i(E),S>1){var C=d[S-2];C.right===m?C.right=E:C.left=E}d[S-1]=E;return}if(b._color===e)if(m._color===t){m._color=e,m.left=a(t,b);return}else{m.left=a(t,b);continue}else{if(b=n(b),m.left=b.right,b.right=m,b._color=m._color,m._color=t,i(m),i(b),S>1){var C=d[S-2];C.right===m?C.right=b:C.left=b}d[S-1]=b,d[S]=m,S+1<d.length?d[S+1]=g:d.push(g),S=S+2}}}}h.remove=function(){var d=this._stack;if(d.length===0)return this.tree;var g=new Array(d.length),m=d[d.length-1];g[g.length-1]=new r(m._color,m.key,m.value,m.left,m.right,m._count);for(var b=d.length-2;b>=0;--b){var m=d[b];m.left===d[b+1]?g[b]=new r(m._color,m.key,m.value,g[b+1],m.right,m._count):g[b]=new r(m._color,m.key,m.value,m.left,g[b+1],m._count)}if(m=g[g.length-1],m.left&&m.right){var E=g.length;for(m=m.left;m.right;)g.push(m),m=m.right;var S=g[E-1];g.push(new r(m._color,S.key,S.value,m.left,m.right,m._count)),g[E-1].key=m.key,g[E-1].value=m.value;for(var b=g.length-2;b>=E;--b)m=g[b],g[b]=new r(m._color,m.key,m.value,m.left,g[b+1],m._count);g[E-1].left=g[E]}if(m=g[g.length-1],m._color===t){var C=g[g.length-2];C.left===m?C.left=null:C.right===m&&(C.right=null),g.pop();for(var b=0;b<g.length;++b)g[b]._count--;return new o(this.tree._compare,g[0])}else if(m.left||m.right){m.left?v(m,m.left):m.right&&v(m,m.right),m._color=e;for(var b=0;b<g.length-1;++b)g[b]._count--;return new o(this.tree._compare,g[0])}else{if(g.length===1)return new o(this.tree._compare,null);for(var b=0;b<g.length;++b)g[b]._count--;var T=g[g.length-2];p(g),T.left===m?T.left=null:T.right=null}return new o(this.tree._compare,g[0])},Object.defineProperty(h,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(h,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(h,"index",{get:function(){var d=0,g=this._stack;if(g.length===0){var m=this.tree.root;return m?m._count:0}else g[g.length-1].left&&(d=g[g.length-1].left._count);for(var b=g.length-2;b>=0;--b)g[b+1]===g[b].right&&(++d,g[b].left&&(d+=g[b].left._count));return d},enumerable:!0}),h.next=function(){var d=this._stack;if(d.length!==0){var g=d[d.length-1];if(g.right)for(g=g.right;g;)d.push(g),g=g.left;else for(d.pop();d.length>0&&d[d.length-1].right===g;)g=d[d.length-1],d.pop()}},Object.defineProperty(h,"hasNext",{get:function(){var d=this._stack;if(d.length===0)return!1;if(d[d.length-1].right)return!0;for(var g=d.length-1;g>0;--g)if(d[g-1].left===d[g])return!0;return!1}}),h.update=function(d){var g=this._stack;if(g.length===0)throw new Error("Can't update empty node!");var m=new Array(g.length),b=g[g.length-1];m[m.length-1]=new r(b._color,b.key,d,b.left,b.right,b._count);for(var E=g.length-2;E>=0;--E)b=g[E],b.left===g[E+1]?m[E]=new r(b._color,b.key,b.value,m[E+1],b.right,b._count):m[E]=new r(b._color,b.key,b.value,b.left,m[E+1],b._count);return new o(this.tree._compare,m[0])},h.prev=function(){var d=this._stack;if(d.length!==0){var g=d[d.length-1];if(g.left)for(g=g.left;g;)d.push(g),g=g.right;else for(d.pop();d.length>0&&d[d.length-1].left===g;)g=d[d.length-1],d.pop()}},Object.defineProperty(h,"hasPrev",{get:function(){var d=this._stack;if(d.length===0)return!1;if(d[d.length-1].left)return!0;for(var g=d.length-1;g>0;--g)if(d[g-1].right===d[g])return!0;return!1}});function y(d,g){return d<g?-1:d>g?1:0}function w(d){return new o(d||y,null)}return pi}var mi,Hs;function J0(){return Hs||(Hs=1,mi=function(t,e,r){var n=Q0(),a=t,i=function(O){a=O,a.guidelinesTolerance==0&&(a.guidelinesTolerance=.001)},o=function(O){var M=O.getBoundingClientRect();return{top:M.top+document.documentElement.scrollTop,left:M.left+document.documentElement.scrollLeft}},s=r(function(){l(),u.height=e.height(),u.width=e.width(),u.style.position="absolute",u.style.top=0,u.style.left=0,u.style.zIndex=a.guidelinesStackOrder,setTimeout(function(){u.height=e.height(),u.width=e.width();var O=o(u),M=o(f);u.style.top=-(O.top-M.top),u.style.left=-(O.left-M.left)},0)},250),l=function(){var O=e.width(),M=e.height();c.clearRect(0,0,O,M)},u=document.createElement("canvas"),f=e.container(),c=u.getContext("2d");f.appendChild(u);var h=function(){u.height=0,u.width=0,u.style.position="absolute",u.style.top=0,u.style.left=0,u.style.zIndex=a.guidelinesStackOrder};h();var v=null,p=null,y,w,d={},g={},m={h:null,v:null};d.getDims=function(O){var M=O.renderedPosition(),K=O.renderedWidth(),G=O.renderedHeight(),H={left:Number(O.renderedStyle("padding-left").replace("px","")),right:Number(O.renderedStyle("padding-right").replace("px","")),top:Number(O.renderedStyle("padding-top").replace("px","")),bottom:Number(O.renderedStyle("padding-bottom").replace("px",""))};return{horizontal:{center:M.x,left:Math.round(M.x-(H.left+K/2)),right:Math.round(M.x+(H.right+K/2))},vertical:{center:M.y,top:Math.round(M.y-(H.top+G/2)),bottom:Math.round(M.y+(H.bottom+G/2))}}},d.init=function(O){v=n(),p=n(),y||(g.x=e.pan("x"),g.y=e.pan("y"),y=O.renderedPosition());var M=e.nodes(":visible");w=O.union(O.ancestors()),w=w.union(O.descendants()),M.not(w).each(function(K,G){typeof K=="number"&&(K=G);var H=d.getDims(K);["left","center","right"].forEach(function(A){var z=H.horizontal[A];p.get(z)?p.get(z).push(K):p=p.insert(z,[K])}),["top","center","bottom"].forEach(function(A){var z=H.vertical[A];v.get(z)?v.get(z).push(K):v=v.insert(z,[K])})}),c.lineWidth=a.lineWidth,d.update(O)},d.destroy=function(){d.clear(),v=null,p=null,y=null,S={},m={h:null,v:null},W&&(W.unlock(),W=void 0)},d.clear=l,d.drawLine=function(O,M,K,G){c.setLineDash(G),c.beginPath(),c.moveTo(O.x,O.y),c.lineTo(M.x,M.y),c.strokeStyle=K,c.stroke()},d.drawArrow=function(O,M){M=="right"?(c.setLineDash([]),c.beginPath(),c.moveTo(O.x-5,O.y-5),c.lineTo(O.x,O.y),c.lineTo(O.x-5,O.y+5),c.stroke()):M=="left"?(c.setLineDash([]),c.beginPath(),c.moveTo(O.x+5,O.y-5),c.lineTo(O.x,O.y),c.lineTo(O.x+5,O.y+5),c.stroke()):M=="top"?(c.setLineDash([]),c.beginPath(),c.moveTo(O.x-5,O.y+5),c.lineTo(O.x,O.y),c.lineTo(O.x+5,O.y+5),c.stroke()):M=="bottom"&&(c.setLineDash([]),c.beginPath(),c.moveTo(O.x-5,O.y-5),c.lineTo(O.x,O.y),c.lineTo(O.x+5,O.y-5),c.stroke())},d.drawCross=function(O){c.setLineDash([]),c.beginPath(),c.moveTo(O.x-5,O.y+5),c.lineTo(O.x+5,O.y-5),c.moveTo(O.x-5,O.y-5),c.lineTo(O.x+5,O.y+5),c.stroke()};var b=function(O,M){for(var K=O[0],G=d.getDims(K)[M].center,H=O[0],A=d.getDims(H)[M].center,z=0;z<O.length;z++){var $=O[z];d.getDims($)[M].center<G&&(G=d.getDims($)[M].center,K=$),d.getDims($)[M].center>A&&(A=d.getDims($)[M].center,H=$)}if(M=="horizontal")var I=(G+A)/2<d.getDims(O[1])[M].center?A+(.5*H.width()+a.guidelinesStyle.distGuidelineOffset)*e.zoom():G-(.5*K.width()+a.guidelinesStyle.distGuidelineOffset)*e.zoom();else var I=(G+A)/2<d.getDims(O[1])[M].center?A+(.5*H.height()+a.guidelinesStyle.distGuidelineOffset)*e.zoom():G-(.5*K.height()+a.guidelinesStyle.distGuidelineOffset)*e.zoom();return I};d.horizontalDistribution=function(O){var M=null,K=null,G=d.getDims(O),H=G.horizontal.center,A=G.vertical.center;if(p.forEach(function(I,V){for(var Y=0;Y<V.length;Y++){var U=V[Y],Q=d.getDims(U);if(Math.abs(Q.vertical.center-G.vertical.center)<a.guidelinesStyle.range*e.zoom()&&Q.horizontal.right==I&&G.horizontal.left-Q.horizontal.right>a.guidelinesStyle.minDistRange){var te=Math.round(2*H)-I;p.forEach(function(ae,oe){for(var ue=0;ue<oe.length;ue++){var de=oe[ue];Math.abs(d.getDims(de).vertical.center-A)<a.guidelinesStyle.range*e.zoom()&&Math.abs(te-d.getDims(de).horizontal.left)<2*a.guidelinesTolerance&&(M=U,K=de)}},te-a.guidelinesTolerance,te+a.guidelinesTolerance)}}},H-a.guidelinesStyle.range*e.zoom(),H),M){m.hd=H-(d.getDims(K).horizontal.left+d.getDims(M).horizontal.right)/2,(!a.geometricGuideline||m.h==null||Math.abs(m.h)>Math.abs(m.hd))&&(m.h=m.hd);var z=b([M,O,K],"vertical");d.drawLine({x:d.getDims(M).horizontal.right,y:z},{x:G.horizontal.left,y:z},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),d.drawLine({x:d.getDims(K).horizontal.left,y:z},{x:G.horizontal.right,y:z},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),d.drawLine({x:d.getDims(M).horizontal.right,y:z},{x:d.getDims(M).horizontal.right,y:d.getDims(M).vertical.center},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),d.drawLine({x:d.getDims(K).horizontal.left,y:z},{x:d.getDims(K).horizontal.left,y:d.getDims(K).vertical.center},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),d.drawLine({x:G.horizontal.left,y:z},{x:G.horizontal.left,y:A},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),d.drawLine({x:G.horizontal.right,y:z},{x:G.horizontal.right,y:A},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),d.drawArrow({x:d.getDims(M).horizontal.right,y:z},"left"),d.drawArrow({x:G.horizontal.left,y:z},"right"),d.drawArrow({x:G.horizontal.right,y:z},"left"),d.drawArrow({x:d.getDims(K).horizontal.left,y:z},"right")}else{var $=d.horizontalDistributionNext(O,"left");$||d.horizontalDistributionNext(O,"right")}},d.verticalDistribution=function(O){var M=null,K=null,G=d.getDims(O),H=G.horizontal.center,A=G.vertical.center;if(v.forEach(function(I,V){for(var Y=0;Y<V.length;Y++){var U=V[Y],Q=d.getDims(U);if(Math.abs(Q.horizontal.center-G.horizontal.center)<a.guidelinesStyle.range*e.zoom()&&Q.vertical.bottom==I&&G.vertical.top-Q.vertical.bottom>a.guidelinesStyle.minDistRange){var te=Math.round(2*A-I);v.forEach(function(ae,oe){for(var ue=0;ue<oe.length;ue++){var de=oe[ue];Math.abs(d.getDims(de).horizontal.center-H)<a.guidelinesStyle.range*e.zoom()&&Math.abs(te-d.getDims(de).vertical.top)<2*a.guidelinesTolerance&&(M=U,K=de)}},te-a.guidelinesTolerance,te+a.guidelinesTolerance)}}},A-a.guidelinesStyle.range*e.zoom(),A),M){m.vd=A-(d.getDims(M).vertical.bottom+d.getDims(K).vertical.top)/2,(!a.geometricGuideline||m.v==null||Math.abs(m.v)>Math.abs(m.vd))&&(m.v=m.vd);var z=b([M,O,K],"horizontal");d.drawLine({y:d.getDims(M).vertical.bottom,x:z},{y:G.vertical.top,x:z},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),d.drawLine({y:d.getDims(K).vertical.top,x:z},{y:G.vertical.bottom,x:z},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),d.drawLine({y:d.getDims(M).vertical.bottom,x:z},{y:d.getDims(M).vertical.bottom,x:d.getDims(M).horizontal.center},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),d.drawLine({y:d.getDims(K).vertical.top,x:z},{y:d.getDims(K).vertical.top,x:d.getDims(K).horizontal.center},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),d.drawLine({y:G.vertical.bottom,x:z},{y:G.vertical.bottom,x:H},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),d.drawLine({y:G.vertical.top,x:z},{y:G.vertical.top,x:H},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),d.drawArrow({x:z,y:d.getDims(M).vertical.bottom},"top"),d.drawArrow({x:z,y:G.vertical.top},"bottom"),d.drawArrow({x:z,y:d.getDims(K).vertical.top},"bottom"),d.drawArrow({x:z,y:G.vertical.bottom},"top")}else{var $=d.verticalDistributionNext(O,"below");$||d.verticalDistributionNext(O,"above")}},d.searchForLine=function(O,M){var K,G,H,A,z,$,I,V=d.getDims(M)[O],Y=Number.MAX_SAFE_INTEGER;O=="horizontal"?($=p,A="y",z="x",m.h=null):($=v,A="x",z="y",m.v=null),H=M.renderedPosition(A);for(var U in V)if(K=V[U],$.forEach(function(Q,te){for(var ae=0;ae<te.length;ae++){var oe=te[ae];if(a.centerToEdgeAlignment||U!="center"&&oe.renderedPosition(z)!=Q||U=="center"&&oe.renderedPosition(z)==Q){var ue=Math.abs(H-oe.renderedPosition(A));ue<Y&&ue<a.guidelinesStyle.geometricGuidelineRange*e.zoom()&&(G=oe,Y=ue,I=Q)}}},K-Number(a.guidelinesTolerance),K+Number(a.guidelinesTolerance)),G){Y=d.getDims(M)[O][U],O=="horizontal"?(m.h=Y-I,d.drawLine({x:Y,y:M.renderedPosition("y")},{x:Y,y:G.renderedPosition("y")},a.guidelinesStyle.strokeStyle,a.guidelinesStyle.lineDash)):(m.v=Y-I,d.drawLine({x:M.renderedPosition("x"),y:Y},{x:G.renderedPosition("x"),y:Y},a.guidelinesStyle.strokeStyle,a.guidelinesStyle.lineDash));break}},d.horizontalDistributionNext=function(O,M){var K=null,G=null,H=d.getDims(O),A=H.horizontal.center,z=H.vertical.center,$="right",I="left",V=A;if(M=="left"){$="left",I="right";var V=A-a.guidelinesStyle.range*e.zoom()}var Y={left:function(U,Q){return Q-U>a.guidelinesStyle.minDistRange},right:function(U,Q){return U-Q>a.guidelinesStyle.minDistRange}};return p.forEach(function(U,Q){for(var te=0;te<Q.length;te++){var ae=Q[te],oe=d.getDims(ae);if(Math.abs(oe.vertical.center-H.vertical.center)<a.guidelinesStyle.range*e.zoom()&&oe.horizontal[I]==U&&Y[M](oe.horizontal[I],H.horizontal[$])){var ue=oe.horizontal[$]-(H.horizontal[$]-U);p.forEach(function(de,D){for(var j=0;j<D.length;j++){var q=D[j];Math.abs(d.getDims(q).vertical.center-z)<a.guidelinesStyle.range*e.zoom()&&Math.abs(ue-d.getDims(q).horizontal[I])<2*a.guidelinesTolerance&&(K=ae,G=q)}},ue-a.guidelinesTolerance,ue+a.guidelinesTolerance)}}},V,V+a.guidelinesStyle.range*e.zoom()),K?(m.hd=d.getDims(O).horizontal[$]-d.getDims(K).horizontal[I]-(d.getDims(K).horizontal[$]-d.getDims(G).horizontal[I]),(!a.geometricGuideline||m.h==null||Math.abs(m.h)>Math.abs(m.hd))&&(m.h=m.hd),d.drawDH(O,K,G,M),!0):(a.geometricGuideline||(m.h=null),!1)},d.drawDH=function(O,M,K,G){var H=d.getDims(O).vertical.center,A="right",z="left";G=="left"&&(A="left",z="right");var $=b([M,O,K],"vertical");d.drawLine({x:d.getDims(M).horizontal[z],y:$},{x:d.getDims(O).horizontal[A],y:$},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),d.drawLine({x:d.getDims(O).horizontal[A],y:$},{x:d.getDims(O).horizontal[A],y:H},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),d.drawLine({x:d.getDims(K).horizontal[z],y:$},{x:d.getDims(M).horizontal[A],y:$},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),d.drawLine({x:d.getDims(K).horizontal[z],y:$},{x:d.getDims(K).horizontal[z],y:d.getDims(K).vertical.center},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),d.drawLine({x:d.getDims(M).horizontal[z],y:$},{x:d.getDims(M).horizontal[z],y:d.getDims(M).vertical.center},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),d.drawLine({x:d.getDims(M).horizontal[A],y:$},{x:d.getDims(M).horizontal[A],y:d.getDims(M).vertical.center},a.guidelinesStyle.horizontalDistColor,a.guidelinesStyle.horizontalDistLine),d.drawArrow({x:d.getDims(O).horizontal[A],y:$},z),d.drawArrow({x:d.getDims(M).horizontal[z],y:$},A),d.drawArrow({x:d.getDims(M).horizontal[A],y:$},z),d.drawArrow({x:d.getDims(K).horizontal[z],y:$},A)},d.verticalDistributionNext=function(O,M){var K=null,G=null,H=d.getDims(O),A=H.horizontal.center,z=H.vertical.center,$="top",I="bottom",V=z-a.guidelinesStyle.range*e.zoom();M=="above"&&($="bottom",I="top",V=z);var Y={below:function(U,Q){return Q-U>a.guidelinesStyle.minDistRange},above:function(U,Q){return U-Q>a.guidelinesStyle.minDistRange}};return v.forEach(function(U,Q){for(var te=0;te<Q.length;te++){var ae=Q[te],oe=d.getDims(ae);if(Math.abs(oe.horizontal.center-H.horizontal.center)<a.guidelinesStyle.range*e.zoom()&&oe.vertical[I]==U&&Y[M](oe.vertical[I],H.vertical[$])){var ue=oe.vertical[$]-(H.vertical[$]-U);v.forEach(function(de,D){for(var j=0;j<D.length;j++){var q=D[j];Math.abs(d.getDims(q).horizontal.center-A)<a.guidelinesStyle.range*e.zoom()&&Math.abs(ue-d.getDims(q).vertical[I])<2*a.guidelinesTolerance&&(K=ae,G=q)}},ue-a.guidelinesTolerance,ue+a.guidelinesTolerance)}}},V,V+a.guidelinesStyle.range*e.zoom()),K?(m.vd=d.getDims(O).vertical[$]-d.getDims(K).vertical[I]-(d.getDims(K).vertical[$]-d.getDims(G).vertical[I]),(!a.geometricGuideline||m.v==null||Math.abs(m.v)>Math.abs(m.vd))&&(m.v=m.vd),d.drawDV(O,K,G,M),!0):(a.geometricGuideline||(m.v=null),!1)},d.drawDV=function(O,M,K,G){var H=d.getDims(O),A=H.horizontal.center,z="top",$="bottom";G=="above"&&(z="bottom",$="top");var I=b([M,O,K],"horizontal");d.drawLine({x:I,y:H.vertical[z]},{x:I,y:d.getDims(M).vertical[$]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),d.drawLine({x:I,y:d.getDims(M).vertical[z]},{x:I,y:d.getDims(K).vertical[$]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),d.drawLine({x:A,y:H.vertical[z]},{x:I,y:H.vertical[z]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),d.drawLine({x:d.getDims(M).horizontal.center,y:d.getDims(M).vertical[$]},{x:I,y:d.getDims(M).vertical[$]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),d.drawLine({x:d.getDims(M).horizontal.center,y:d.getDims(M).vertical[z]},{x:I,y:d.getDims(M).vertical[z]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),d.drawLine({x:I,y:d.getDims(K).vertical[$]},{x:d.getDims(K).horizontal.center,y:d.getDims(K).vertical[$]},a.guidelinesStyle.verticalDistColor,a.guidelinesStyle.verticalDistLine),d.drawArrow({x:I,y:H.vertical[z]},$),d.drawArrow({x:I,y:d.getDims(M).vertical[$]},z),d.drawArrow({x:I,y:d.getDims(M).vertical[z]},$),d.drawArrow({x:I,y:d.getDims(K).vertical[$]},z)},d.update=function(O){d.clear(),a.initPosAlignment&&P(O),O.each(function(M,K){typeof M=="number"&&(M=K),a.geometricGuideline&&(d.searchForLine("horizontal",M),d.searchForLine("vertical",M)),a.distributionGuidelines&&(d.horizontalDistribution(M),d.verticalDistribution(M))})},d.resize=function(){s()};function E(O){for(var M={},K=0;K<O.length;K++)M[O[K].id()]=!0;var G=O.filter(function(H,A){typeof H=="number"&&(H=A);for(var z=H.parent()[0];z!=null;){if(M[z.id()])return!1;z=z.parent()[0]}return!0});return G}var S={},C={},T=function(O){S=O.renderedPosition||O.cyRenderedPosition,C.x=S.x,C.y=S.y},_=function(O){C.x+=O.x-g.x,C.y+=O.y-g.y,g.x=O.x,g.y=O.y},P=function(O){var M=O.renderedPosition();Math.abs(y.y-M.y)<a.guidelinesTolerance?(d.drawLine({x:C.x,y:S.y},{x:M.x,y:S.y},a.guidelinesStyle.initPosAlignmentColor,a.guidelinesStyle.initPosAlignmentLine),S.y==C.y?d.drawCross(C):d.drawCross(S)):Math.abs(y.x-M.x)<a.guidelinesTolerance&&(d.drawLine({x:S.x,y:C.y},{x:S.x,y:M.y},a.guidelinesStyle.initPosAlignmentColor,a.guidelinesStyle.initPosAlignmentLine),S.x==C.x?d.drawCross(C):d.drawCross(S))};function F(O,M){var K=E(M),G=K.union(K.descendants());G.filter(":childless").forEach(function(H,A){typeof H=="number"&&(H=A);var z={x:O.x+H.renderedPosition("x"),y:O.y+H.renderedPosition("y")};H.renderedPosition(z)})}var k;e.on("tapstart","node",function(){k=this});var R,x={x:0,y:0};e.on("mousemove",function(O){R=O.renderedPosition||O.cyRenderedPosition,W&&W.each(function(M,K){if(typeof M=="number"&&(M=K),M.locked()&&(Math.abs(R.x-x.x)>2*a.guidelinesTolerance||Math.abs(R.y-x.y)>2*a.guidelinesTolerance)){M.unlock();var G={};G.x=R.x-k.renderedPosition("x"),G.y=R.y-k.renderedPosition("y"),F(G,M)}})});var W;return d.snapToAlignmentLocation=function(O){W=O,O.each(function(M,K){typeof M=="number"&&(M=K);var G=M.renderedPosition();m.h&&(x=R,G.x-=m.h,M.renderedPosition(G)),m.v&&(x=R,G.y-=m.v,M.renderedPosition(G)),(m.v||m.h)&&(m.h=null,m.v=null,W.lock())}),d.update(O)},{changeOptions:i,lines:d,getTopMostNodes:E,getMousePos:T,setMousePos:_,resizeCanvas:s,resetCanvas:h}}),mi}var yi,Ws;function eb(){return Ws||(Ws=1,yi=function(t,e){var r=t,n="_gridParentPadding",a;function i(){e.style().selector("."+n).style("compound-sizing-wrt-labels","exclude").style("padding-left",a).style("padding-right",a).style("padding-top",a).style("padding-bottom",a).update()}function o(l){r=l,a=r.parentSpacing<0?r.gridSpacing:r.parentSpacing,i()}function s(l,u){u?l.addClass(n):l.removeClass(n)}return{changeOptions:o,setPaddingOfParent:s}}),yi}var bi,Us;function tb(){return Us||(Us=1,bi=function(t,e,r){function n(l,u,f){var c=l.union(l.descendants());c.filter(":childless").positions(function(h,v){typeof h=="number"&&(h=v);var p=h.position();return{x:p.x+u,y:p.y+f}})}function a(l){for(var u={},f=0;f<l.length;f++)u[l[f].id()]=!0;var c=l.filter(function(h,v){typeof h=="number"&&(h=v);for(var p=h.parent()[0];p!=null;){if(u[p.id()])return!1;p=p.parent()[0]}return!0});return c}if(r||t("collection","align",function(l,u,f){var c=a(this.nodes(":visible")),h=f||c[0];c=c.not(h),l=l||"none",u=u||"none";var v=0,p=0;u=="left"?v=-1:u=="right"&&(v=1),l=="top"?p=-1:l=="bottom"&&(p=1);for(var y=0;y<c.length;y++){var w=c[y],d=Object.assign({},w.position()),g=Object.assign({},w.position());u!="none"&&(g.x=h.position("x")+v*(h.outerWidth()-w.outerWidth())/2),l!="none"&&(g.y=h.position("y")+p*(h.outerHeight()-w.outerHeight())/2),n(w,g.x-d.x,g.y-d.y)}return this}),e.undoRedo){let l=function(){for(var f={},c=e.nodes(),h=0;h<c.length;h++){var v=c[h];f[v.id()]={x:v.position("x"),y:v.position("y")}}return f},u=function(f){var c={};return e.nodes().not(":parent").positions(function(h,v){typeof h=="number"&&(h=v),c[h.id()]={x:h.position("x"),y:h.position("y")};var p=f[h.id()];return{x:p.x,y:p.y}}),c};var o=l,s=u,i=e.undoRedo(null,!0);i.action("align",function(f){var c;return f.firstTime?(c=l(),f.nodes.align(f.horizontal,f.vertical,f.alignTo)):c=u(f),c},function(f){return u(f)})}}),bi}var wi,Ks;function rb(){if(Ks)return wi;Ks=1;var t=function(){var e="Expected a function",r=Math.max,n=Date.now,a=n||function(){return new Date().getTime()};function i(s,l,u){var f,c,h,v,p,y,w,d=0,g=!1,m=!0;if(typeof s!="function")throw new TypeError(e);if(l=l<0?0:+l||0,u===!0){var b=!0;m=!1}else o(u)&&(b=!!u.leading,g="maxWait"in u&&r(+u.maxWait||0,l),m="trailing"in u?!!u.trailing:m);function E(){y&&clearTimeout(y),c&&clearTimeout(c),d=0,c=y=w=void 0}function S(P,F){F&&clearTimeout(F),c=y=w=void 0,P&&(d=a(),h=s.apply(p,f),!y&&!c&&(f=p=void 0))}function C(){var P=l-(a()-v);P<=0||P>l?S(w,c):y=setTimeout(C,P)}function T(){S(m,y)}function _(){if(f=arguments,v=a(),p=this,w=m&&(y||!b),g===!1)var P=b&&!y;else{!c&&!b&&(d=v);var F=g-(v-d),k=F<=0||F>g;k?(c&&(c=clearTimeout(c)),d=v,h=s.apply(p,f)):c||(c=setTimeout(T,F))}return k&&y?y=clearTimeout(y):!y&&l!==g&&(y=setTimeout(C,l)),P&&(k=!0,h=s.apply(p,f)),k&&!y&&!c&&(f=p=void 0),h}return _.cancel=E,_}function o(s){var l=typeof s;return!!s&&(l=="object"||l=="function")}return i}();return wi=t,wi}(function(t){(function(){var e=function(r){if(!r)return;U0();var n=!1,a={snapToGridOnRelease:!0,snapToGridDuringDrag:!1,snapToAlignmentLocationOnRelease:!1,snapToAlignmentLocationDuringDrag:!1,distributionGuidelines:!1,geometricGuideline:!1,initPosAlignment:!1,centerToEdgeAlignment:!1,resize:!1,parentPadding:!1,drawGrid:!0,gridSpacing:20,snapToGridCenter:!0,zoomDash:!0,panGrid:!1,gridStackOrder:-1,gridColor:"#dedede",lineWidth:1,guidelinesStackOrder:4,guidelinesTolerance:2,guidelinesStyle:{strokeStyle:"#8b7d6b",geometricGuidelineRange:400,range:100,minDistRange:10,distGuidelineOffset:10,horizontalDistColor:"#ff0000",verticalDistColor:"#00ff00",initPosAlignmentColor:"#0000ff",lineDash:[0,0],horizontalDistLine:[0,0],verticalDistLine:[0,0],initPosAlignmentLine:[0,0]},parentSpacing:-1},i=K0(),o=Z0(),s=Y0(),l=X0(),u=j0(),f=J0(),c=eb(),h=tb(),v=rb();function p(y){return y.scratch("_gridGuide")||y.scratch("_gridGuide",{}),y.scratch("_gridGuide")}r("core","gridGuide",function(y){var w=this,d=p(w),g=Object.extend({},d.options||a,y);if(d.options=g,d.initialized){var C=d.eventsController;C.syncWithOptions(g)}else{var m,b,E,S,C,T,_;m=i(w,g.gridSpacing,g.snapToGridCenter),b=l(g.gridSpacing),E=o(w,m),S=s(g,w,v),T=f(g,w,v),_=c(g,w),C=u(w,m,b,E,S,T,_,g),h(r,w,n),n=!0,C.init(g),d.initialized=!0,d.eventsController=C}return this})};t.exports&&(t.exports=e),typeof cytoscape<"u"&&e(cytoscape)})()})(Uu);var nb=Uu.exports;const ab=Mn(nb),Rr=[];function ho(t,e=Be){let r;const n=new Set;function a(s){if(Je(t,s)&&(t=s,r)){const l=!Rr.length;for(const u of n)u[1](),Rr.push(u,t);if(l){for(let u=0;u<Rr.length;u+=2)Rr[u][0](Rr[u+1]);Rr.length=0}}}function i(s){a(s(t))}function o(s,l=Be){const u=[s,l];return n.add(u),n.size===1&&(r=e(a)||Be),s(t),()=>{n.delete(u),n.size===0&&r&&(r(),r=null)}}return{set:a,update:i,subscribe:o}}const Ft=ho(0),Ku=ho(0),gt=ho({columnNames:null,loadedFileName:null,loadingMode:!1,runCounter:0,modelEmpty:!0,dataAvail:!1});function ib(t){ab(Pa);let e=Dt(Ft);var r={snapToGridOnRelease:!1,snapToGridDuringDrag:!1,snapToAlignmentLocationOnRelease:!1,snapToAlignmentLocationDuringDrag:!1,distributionGuidelines:!0,geometricGuideline:!0,initPosAlignment:!1,centerToEdgeAlignment:!1,resize:!1,parentPadding:!1,drawGrid:!1,guidelinesStackOrder:4,guidelinesTolerance:.5,guidelinesStyle:{strokeStyle:"#8b7d6b",geometricGuidelineRange:400,range:100,minDistRange:10,distGuidelineOffset:10,horizontalDistColor:"#ff0000",verticalDistColor:"#00ff00",initPosAlignmentColor:"#0000ff",lineDash:[0,0],horizontalDistLine:[0,0],verticalDistLine:[0,0],initPosAlignmentLine:[0,0]},parentSpacing:-1};return Vi(()=>{e.gridGuide(r)}),[]}class ob extends at{constructor(e){super(),nt(this,e,ib,null,Je,{})}}const Zu=[{selector:"node",style:{width:"80",height:"80","background-color":"white","border-color":"grey","border-width":"2px",label:"data(label)","text-valign":"center","text-halign":"center"}},{selector:"node.observed-variable",style:{shape:"rectangle"}},{selector:"node.latent-variable",style:{shape:"ellipse","border-color":"black"}},{selector:"node.constant",style:{shape:"triangle",label:"1","text-valign":"center","text-margin-y":"10px","border-color":"black"}},{selector:"node.linked",style:{"border-color":"black"}},{selector:"edge",style:{width:3,"line-color":"#000","target-arrow-color":"#000","source-arrow-color":"#000","target-arrow-shape":"triangle","curve-style":"bezier","text-valign":"center","text-halign":"center","text-wrap":"wrap","text-max-width":80,"font-size":"14px","z-index":10,color:"#000","text-outline-color":"#fff","text-outline-width":"2px","text-background-color":"#fff","text-background-opacity":1,"text-background-padding":"4px"}},{selector:"edge.loop",style:{"curve-style":"unbundled-bezier","control-point-distances":[50],"control-point-weights":[.5],"loop-direction":"0","loop-sweep":"0.8","target-arrow-shape":"triangle","source-arrow-shape":"triangle","target-arrow-fill":"filled","source-arrow-fill":"filled","target-arrow-color":"#000","source-arrow-color":"#000"}},{selector:"edge.undirected",style:{"curve-style":"unbundled-bezier","control-point-distances":[-100],"control-point-weights":[.5],"target-arrow-shape":"triangle","source-arrow-shape":"triangle"}},{selector:"edge.free.label, edge.forcefree.label",style:{label:function(t){return t.data("label")}}},{selector:"edge.fixed.label",style:{label:function(t){return t.data("label")+"@"+t.data("value")}}},{selector:"edge.fixed.nolabel",style:{label:function(t){return"@"+t.data("value")}}},{selector:"edge.hasEst.free.nolabel, edge.hasEst.forcefree.nolabel",style:{label:function(t){return t.data("est")}}},{selector:"edge.hasEst.free.label, edge.hasEst.forcefree.label",style:{label:function(t){return t.data("label")+"="+t.data("est")}}},{selector:"edge.forcefree",style:{"line-color":"blue"}},{selector:"edge:selected",style:{"line-color":"red","target-arrow-color":"red","source-arrow-color":"red"}},{selector:"node:selected",style:{"border-color":"red"}}];var Yu={exports:{}},xi,Zs;function sb(){if(Zs)return xi;Zs=1;var t="Expected a function",e="__lodash_hash_undefined__",r="[object Function]",n="[object GeneratorFunction]",a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=typeof st=="object"&&st&&st.Object===Object&&st,s=typeof self=="object"&&self&&self.Object===Object&&self,l=o||s||Function("return this")();function u(q,L){return q==null?void 0:q[L]}function f(q){var L=!1;if(q!=null&&typeof q.toString!="function")try{L=!!(q+"")}catch{}return L}var c=Array.prototype,h=Function.prototype,v=Object.prototype,p=l["__core-js_shared__"],y=function(){var q=/[^.]+$/.exec(p&&p.keys&&p.keys.IE_PROTO||"");return q?"Symbol(src)_1."+q:""}(),w=h.toString,d=v.hasOwnProperty,g=v.toString,m=RegExp("^"+w.call(d).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),b=c.splice,E=Q(l,"Map"),S=Q(Object,"create");function C(q){var L=-1,B=q?q.length:0;for(this.clear();++L<B;){var Z=q[L];this.set(Z[0],Z[1])}}function T(){this.__data__=S?S(null):{}}function _(q){return this.has(q)&&delete this.__data__[q]}function P(q){var L=this.__data__;if(S){var B=L[q];return B===e?void 0:B}return d.call(L,q)?L[q]:void 0}function F(q){var L=this.__data__;return S?L[q]!==void 0:d.call(L,q)}function k(q,L){var B=this.__data__;return B[q]=S&&L===void 0?e:L,this}C.prototype.clear=T,C.prototype.delete=_,C.prototype.get=P,C.prototype.has=F,C.prototype.set=k;function R(q){var L=-1,B=q?q.length:0;for(this.clear();++L<B;){var Z=q[L];this.set(Z[0],Z[1])}}function x(){this.__data__=[]}function W(q){var L=this.__data__,B=V(L,q);if(B<0)return!1;var Z=L.length-1;return B==Z?L.pop():b.call(L,B,1),!0}function O(q){var L=this.__data__,B=V(L,q);return B<0?void 0:L[B][1]}function M(q){return V(this.__data__,q)>-1}function K(q,L){var B=this.__data__,Z=V(B,q);return Z<0?B.push([q,L]):B[Z][1]=L,this}R.prototype.clear=x,R.prototype.delete=W,R.prototype.get=O,R.prototype.has=M,R.prototype.set=K;function G(q){var L=-1,B=q?q.length:0;for(this.clear();++L<B;){var Z=q[L];this.set(Z[0],Z[1])}}function H(){this.__data__={hash:new C,map:new(E||R),string:new C}}function A(q){return U(this,q).delete(q)}function z(q){return U(this,q).get(q)}function $(q){return U(this,q).has(q)}function I(q,L){return U(this,q).set(q,L),this}G.prototype.clear=H,G.prototype.delete=A,G.prototype.get=z,G.prototype.has=$,G.prototype.set=I;function V(q,L){for(var B=q.length;B--;)if(de(q[B][0],L))return B;return-1}function Y(q){if(!j(q)||ae(q))return!1;var L=D(q)||f(q)?m:i;return L.test(oe(q))}function U(q,L){var B=q.__data__;return te(L)?B[typeof L=="string"?"string":"hash"]:B.map}function Q(q,L){var B=u(q,L);return Y(B)?B:void 0}function te(q){var L=typeof q;return L=="string"||L=="number"||L=="symbol"||L=="boolean"?q!=="__proto__":q===null}function ae(q){return!!y&&y in q}function oe(q){if(q!=null){try{return w.call(q)}catch{}try{return q+""}catch{}}return""}function ue(q,L){if(typeof q!="function"||L&&typeof L!="function")throw new TypeError(t);var B=function(){var Z=arguments,ne=L?L.apply(this,Z):Z[0],se=B.cache;if(se.has(ne))return se.get(ne);var ee=q.apply(this,Z);return B.cache=se.set(ne,ee),ee};return B.cache=new(ue.Cache||G),B}ue.Cache=G;function de(q,L){return q===L||q!==q&&L!==L}function D(q){var L=j(q)?g.call(q):"";return L==r||L==n}function j(q){var L=typeof q;return!!q&&(L=="object"||L=="function")}return xi=ue,xi}var Ei,Ys;function lb(){if(Ys)return Ei;Ys=1;var t="Expected a function",e=0/0,r="[object Symbol]",n=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,l=typeof st=="object"&&st&&st.Object===Object&&st,u=typeof self=="object"&&self&&self.Object===Object&&self,f=l||u||Function("return this")(),c=Object.prototype,h=c.toString,v=Math.max,p=Math.min,y=function(){return f.Date.now()};function w(S,C,T){var _,P,F,k,R,x,W=0,O=!1,M=!1,K=!0;if(typeof S!="function")throw new TypeError(t);C=E(C)||0,g(T)&&(O=!!T.leading,M="maxWait"in T,F=M?v(E(T.maxWait)||0,C):F,K="trailing"in T?!!T.trailing:K);function G(Q){var te=_,ae=P;return _=P=void 0,W=Q,k=S.apply(ae,te),k}function H(Q){return W=Q,R=setTimeout($,C),O?G(Q):k}function A(Q){var te=Q-x,ae=Q-W,oe=C-te;return M?p(oe,F-ae):oe}function z(Q){var te=Q-x,ae=Q-W;return x===void 0||te>=C||te<0||M&&ae>=F}function $(){var Q=y();if(z(Q))return I(Q);R=setTimeout($,A(Q))}function I(Q){return R=void 0,K&&_?G(Q):(_=P=void 0,k)}function V(){R!==void 0&&clearTimeout(R),W=0,_=x=P=R=void 0}function Y(){return R===void 0?k:I(y())}function U(){var Q=y(),te=z(Q);if(_=arguments,P=this,x=Q,te){if(R===void 0)return H(x);if(M)return R=setTimeout($,C),G(x)}return R===void 0&&(R=setTimeout($,C)),k}return U.cancel=V,U.flush=Y,U}function d(S,C,T){var _=!0,P=!0;if(typeof S!="function")throw new TypeError(t);return g(T)&&(_="leading"in T?!!T.leading:_,P="trailing"in T?!!T.trailing:P),w(S,C,{leading:_,maxWait:C,trailing:P})}function g(S){var C=typeof S;return!!S&&(C=="object"||C=="function")}function m(S){return!!S&&typeof S=="object"}function b(S){return typeof S=="symbol"||m(S)&&h.call(S)==r}function E(S){if(typeof S=="number")return S;if(b(S))return e;if(g(S)){var C=typeof S.valueOf=="function"?S.valueOf():S;S=g(C)?C+"":C}if(typeof S!="string")return S===0?S:+S;S=S.replace(n,"");var T=i.test(S);return T||o.test(S)?s(S.slice(2),T?2:8):a.test(S)?e:+S}return Ei=d,Ei}(function(t,e){(function(n,a){t.exports=a(sb(),lb())})(st,function(r,n){return function(a){var i={};function o(s){if(i[s])return i[s].exports;var l=i[s]={i:s,l:!1,exports:{}};return a[s].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=a,o.c=i,o.i=function(s){return s},o.d=function(s,l,u){o.o(s,l)||Object.defineProperty(s,l,{configurable:!1,enumerable:!0,get:u})},o.n=function(s){var l=s&&s.__esModule?function(){return s.default}:function(){return s};return o.d(l,"a",l),l},o.o=function(s,l){return Object.prototype.hasOwnProperty.call(s,l)},o.p="",o(o.s=12)}([function(a,i,o){a.exports=Object.assign!=null?Object.assign.bind(Object):function(s){for(var l=arguments.length,u=Array(l>1?l-1:0),f=1;f<l;f++)u[f-1]=arguments[f];return u.filter(function(c){return c!=null}).forEach(function(c){Object.keys(c).forEach(function(h){return s[h]=c[h]})}),s}},function(a,i,o){var s=o(10),l=o(0);a.exports=function(u){var f=this;return new s(l({cy:f},u))}},function(a,i,o){function s(){if(this.saveGestureState(),this.cy.zoomingEnabled(!1).panningEnabled(!1).boxSelectionEnabled(!1),this.options.disableBrowserGestures){var f=this.windowListenerOptions;window.addEventListener("touchstart",this.preventDefault,f),window.addEventListener("touchmove",this.preventDefault,f),window.addEventListener("wheel",this.preventDefault,f)}return this}function l(){if(this.cy.zoomingEnabled(this.lastZoomingEnabled).panningEnabled(this.lastPanningEnabled).boxSelectionEnabled(this.lastBoxSelectionEnabled),this.options.disableBrowserGestures){var f=this.windowListenerOptions;window.removeEventListener("touchstart",this.preventDefault,f),window.removeEventListener("touchmove",this.preventDefault,f),window.removeEventListener("wheel",this.preventDefault,f)}return this}function u(){var f=this.cy;return this.lastPanningEnabled=f.panningEnabled(),this.lastZoomingEnabled=f.zoomingEnabled(),this.lastBoxSelectionEnabled=f.boxSelectionEnabled(),this}a.exports={disableGestures:s,resetGestures:l,saveGestureState:u}},function(a,i,o){function s(){var l=this,u=this.cy,f=this.options;return this.addListener(u,"drag",function(){return l.grabbingNode=!0}),this.addListener(u,"free",function(){return l.grabbingNode=!1}),this.addListener(u,"tapstart","node",function(c){var h=c.target;l.drawMode&&l.start(h)}),this.addListener(u,"tapdrag",function(c){l.update(c.position)}),this.addListener(u,"tapdragover","node",function(c){f.snap||l.preview(c.target)}),this.addListener(u,"tapdragout","node",function(c){f.snap||l.unpreview(c.target)}),this.addListener(u,"tapend",function(){l.stop()}),this}a.exports={addCytoscapeListeners:s}},function(a,i,o){var s={canConnect:function(u,f){return!u.same(f)},edgeParams:function(u,f){return{}},hoverDelay:150,snap:!0,snapThreshold:50,snapFrequency:15,noEdgeEventsInDraw:!0,disableBrowserGestures:!0};a.exports=s},function(a,i,o){function s(f){var c=this.cy;return this.drawMode=f??!this.drawMode,this.drawMode?(this.prevUngrabifyState=c.autoungrabify(),c.autoungrabify(!0),this.emit("drawon")):(c.autoungrabify(this.prevUngrabifyState),this.emit("drawoff")),this}function l(){return this.toggleDrawMode(!0)}function u(){return this.toggleDrawMode(!1)}a.exports={toggleDrawMode:s,enableDrawMode:l,disableDrawMode:u}},function(a,i,o){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},l=o(0),u=function(g){return(typeof g>"u"?"undefined":s(g))===s("")},f=function(g){return(typeof g>"u"?"undefined":s(g))===s([])&&g.length!=null};function c(d,g,m){var b={};return l(b,g,d),l(b.data,g.data,d.data),u(g.classes)?b.classes=g.classes+" "+m:f(g.classes)?b.classes=g.classes.join(" ")+" "+m:b.classes=m,b}function h(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,g=this.cy;this.options;var m=this.presumptiveTargets,b=this.previewEles,E=this.active,S=this.sourceNode,C=this.targetNode,T=d?"eh-preview":"",_=g.collection(),P=this.canConnect(C);if(E&&P){if(!C||C.size()===0){b.remove(),this.emit("cancel",this.mp(),S,m);return}if(!d){b.removeClass("eh-preview").style("events",""),this.emit("complete",this.mp(),S,C,b);return}var F=g.add(c({group:"edges",data:{source:S.id(),target:C.id()}},this.edgeParams(C),T));return _=_.merge(F),d?(this.previewEles=_,_.style("events","no")):(_.style("events",""),this.emit("complete",this.mp(),S,C,_)),this}}function v(){return this.makeEdges(!0),this}function p(){return this.previewEles.nonempty()&&this.previewEles.inside()}function y(){return this.previewShown()&&this.previewEles.remove(),this}function w(){var d=this,g=this.sourceNode,m=this.ghostNode,b=this.cy,E=this.mx,S=this.my,C=E,T=S,_=void 0,P=void 0;if(g)return(!m||m.length===0||m.removed())&&(P=this.ghostEles=b.collection(),b.batch(function(){m=d.ghostNode=b.add({group:"nodes",classes:"eh-ghost eh-ghost-node",position:{x:0,y:0}}),m.style({"background-color":"blue",width:1e-4,height:1e-4,opacity:0,events:"no"});var F={};_=b.add(l({},F,{group:"edges",data:l({},F.data,{source:g.id(),target:m.id()}),classes:"eh-ghost eh-ghost-edge"})),_.style({events:"no"})}),P.merge(m).merge(_)),m.position({x:C,y:T}),this}a.exports={makeEdges:h,makePreview:v,removePreview:y,previewShown:p,updateEdge:w}},function(a,i,o){function s(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events","no"),this}function l(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events",""),this}a.exports={disableEdgeEvents:s,enableEdgeEvents:l}},function(a,i,o){function s(){return this.enabled=!0,this.emit("enable"),this}function l(){return this.enabled=!1,this.emit("disable"),this}a.exports={enable:s,disable:l}},function(a,i,o){var s=o(13),l=Math.sqrt(2);function u(g){var m=this.previewEles,b=this.ghostEles,E=function(k){return m.anySame(k)},S=function(k){return b.anySame(k)},C=function(k){return E(k)||S(k)},T=this.enabled,_=this.active,P=this.grabbingNode;return T&&!_&&!P&&g!=null&&g.nonempty()&&!C(g)}function f(g){return this.canStartOn(g)&&this.drawMode}function c(g){return this.canStartOn(g)&&!this.drawMode}function h(g){var m=this;if(this.canStartOn(g)){this.active=!0,this.sourceNode=g,this.sourceNode.addClass("eh-source"),this.disableGestures(),this.disableEdgeEvents();var b=function(S){return S.id()};this.canConnect=s(function(E){return m.options.canConnect(m.sourceNode,E)},b),this.edgeParams=s(function(E){return m.options.edgeParams(m.sourceNode,E)},b),this.emit("start",this.hp(),g)}}function v(g){if(this.active){var m=g;return this.mx=m.x,this.my=m.y,this.updateEdge(),this.throttledSnap(),this}}function p(){if(!this.active||!this.options.snap)return!1;var g=this.cy,m=this.targetNode,b=this.options.snapThreshold,E=this.mp(),S=this.previewEles,C=this.ghostNode,T=function(V){return l*Math.max(V.outerWidth(),V.outerHeight())/2},_=function(V,Y,U,Q){var te=U-V,ae=Q-Y;return te*te+ae*ae},P=function(V,Y){return _(V.x,V.y,Y.x,Y.y)},F=function(V){return P(V.position(),E)},k=function(V){var Y=T(V),U=Y+b;return U*U},R=function(V){return F(V)<=k(V)},x=function(V){var Y=V.position(),U=V.outerWidth()/2,Q=V.outerHeight()/2,te=Y.x,ae=Y.y,oe=E.x,ue=E.y,de=te-U,D=te+U,j=ae-Q,q=ae+Q,L=de<=oe&&oe<=D,B=j<=ue&&ue<=q;if(L&&B)return 0;if(L){var Z=ue-j,ne=ue-q;return Math.min(Z*Z,ne*ne)}else if(B){var se=oe-de,ee=oe-D;return Math.min(se*se,ee*ee)}else return oe<de&&ue<j?_(oe,ue,de,j):oe>D&&ue<j?_(oe,ue,D,j):oe<de&&ue>q?_(oe,ue,de,q):_(oe,ue,D,q)},W=function(V,Y){return x(V)-x(Y)},O=W,M=!1,K=function(V){var Y=E,U=V.outerWidth(),Q=U/2,te=V.outerHeight(),ae=te/2,oe=V.position(),ue=oe.x-Q,de=oe.x+Q,D=oe.y-ae,j=oe.y+ae;return ue<=Y.x&&Y.x<=de&&D<=Y.y&&Y.y<=j},G=function(V){return V.same(S)||V.same(C)},H=g.nodes(function(I){return!G(I)&&R(I)}).sort(O),A=!1;m.nonempty()&&!R(m)&&this.unpreview(m);for(var z=0;z<H.length;z++){var $=H[z];if(!($.isParent()&&K($))&&!($.isChild()&&!K($.parent()))&&($.same(m)||this.preview($,M))){A=!0;break}}return A}function y(g){var m=this,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,E=this.options,S=this.sourceNode,C=this.ghostNode,T=this.ghostEles,_=this.presumptiveTargets,P=this.previewEles,F=this.active,k=S,R=g.same(C),x=!this.canConnect(g),W=g.same(this.targetNode);if(!F||R||x||W)return!1;this.targetNode.nonempty()&&this.unpreview(this.targetNode),clearTimeout(this.previewTimeout);var O=function(){m.targetNode=g,_.merge(g),g.addClass("eh-presumptive-target"),g.addClass("eh-target"),m.emit("hoverover",m.mp(),k,g),g.addClass("eh-preview"),T.addClass("eh-preview-active"),S.addClass("eh-preview-active"),g.addClass("eh-preview-active"),m.makePreview(),m.emit("previewon",m.mp(),k,g,P)};return b&&E.hoverDelay>0?this.previewTimeout=setTimeout(O,E.hoverDelay):O(),!0}function w(g){if(this.active){var m=this.previewTimeout,b=this.sourceNode,E=this.previewEles,S=this.ghostEles,C=this.cy;clearTimeout(m),this.previewTimeout=null;var T=b;return g.removeClass("eh-preview eh-target eh-presumptive-target eh-preview-active"),S.removeClass("eh-preview-active"),b.removeClass("eh-preview-active"),this.targetNode=C.collection(),this.removePreview(T,g),this.emit("hoverout",this.mp(),T,g),this.emit("previewoff",this.mp(),T,g,E),this}}function d(){if(this.active){var g=this.sourceNode,m=this.targetNode,b=this.ghostEles,E=this.presumptiveTargets;return clearTimeout(this.previewTimeout),g.removeClass("eh-source eh-preview-active"),m.removeClass("eh-target eh-preview eh-hover eh-preview-active"),E.removeClass("eh-presumptive-target"),this.makeEdges(),b.remove(),this.clearCollections(),this.resetGestures(),this.enableEdgeEvents(),this.active=!1,this.emit("stop",this.mp(),g),this}}a.exports={start:h,update:v,preview:y,unpreview:w,stop:d,snap:p,canStartOn:u,canStartDrawModeOn:f,canStartNonDrawModeOn:c}},function(a,i,o){var s=o(4),l=o(0),u=o(14),f=o(2),c=o(3),h=o(5),v=o(6),p=o(8),y=o(9),w=o(11),d=o(7);function g(E){var S=E.cy;this.cy=S,this.listeners=[],this.enabled=!0,this.drawMode=!1,this.active=!1,this.grabbingNode=!1,this.clearCollections(),this.mx=0,this.my=0,this.options=l({},s,E),this.saveGestureState(),this.addListeners(),this.throttledSnap=u(this.snap.bind(this),1e3/E.snapFrequency),this.preventDefault=function(_){return _.preventDefault()},this.canConnect=function(){return!1};var C=!1;try{var T=Object.defineProperty({},"passive",{get:function(){C=!0}});window.addEventListener("test",null,T)}catch{}C?this.windowListenerOptions={capture:!0,passive:!1}:this.windowListenerOptions=!0}var m=g.prototype={},b=function(S){return l(m,S)};m.destroy=function(){this.removeListeners()},m.setOptions=function(E){l(this.options,E)},m.mp=function(){return{x:this.mx,y:this.my}},m.hp=function(){return{x:this.hx,y:this.hy}},m.clearCollections=function(){var E=this.cy;this.previewEles=E.collection(),this.ghostEles=E.collection(),this.ghostNode=E.collection(),this.sourceNode=E.collection(),this.targetNode=E.collection(),this.presumptiveTargets=E.collection()},[f,c,h,v,p,y,w,d].forEach(b),a.exports=g},function(a,i,o){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y};function l(){var y=this;return this.addCytoscapeListeners(),this.addListener(this.cy,"destroy",function(){return y.destroy()}),this}function u(){for(var y=this.listeners.length-1;y>=0;y--){var w=this.listeners[y];this.removeListener(w.target,w.event,w.selector,w.callback,w.options)}return this}function f(y,w,d,g,m){return(typeof d>"u"?"undefined":s(d))!==s("")&&(g=d,m=g,d=null),m==null&&(m=!1),{target:y,event:w,selector:d,callback:g,options:m}}function c(y){return y instanceof Element}function h(y,w,d,g,m){var b=f(y,w,d,g,m);return this.listeners.push(b),c(b.target)?b.target.addEventListener(b.event,b.callback,b.options):b.selector?b.target.addListener(b.event,b.selector,b.callback,b.options):b.target.addListener(b.event,b.callback,b.options),this}function v(y,w,d,g,m){for(var b=f(y,w,d,g,m),E=this.listeners.length-1;E>=0;E--){var S=this.listeners[E];if(b.target===S.target&&b.event===S.event&&(b.selector==null||b.selector===S.selector)&&(b.callback==null||b.callback===S.callback)){this.listeners.splice(E,1),c(b.target)?b.target.removeEventListener(b.event,b.callback,b.options):b.selector?b.target.removeListener(b.event,b.selector,b.callback,b.options):b.target.removeListener(b.event,b.callback,b.options);break}}return this}function p(y,w){for(var d=this.cy,g=arguments.length,m=Array(g>2?g-2:0),b=2;b<g;b++)m[b-2]=arguments[b];return d.emit({type:"eh"+y,position:w},m),this}a.exports={addListener:h,addListeners:l,removeListener:v,removeListeners:u,emit:p}},function(a,i,o){var s=o(1),l=function(f){f&&f("core","edgehandles",s)};typeof cytoscape<"u"&&l(cytoscape),a.exports=l},function(a,i){a.exports=r},function(a,i){a.exports=n}])})})(Yu);var ub=Yu.exports;const fb=Mn(ub);function cb(t){Pa.use(fb);var e=Pa({autoungrabify:!1,autolock:!1,style:Zu});return Ft.set(e),Ku.set(e.edgehandles({preview:!1,hoverDelay:150,handleNodes:"node",snap:!0,handleColor:"#ff0000",handleSize:10,canConnect(r,n){return!e.elements('edge[source = "'+r.id()+'"][target = "'+n.id()+'"]').length}})),[]}class db extends at{constructor(e){super(),nt(this,e,cb,null,Je,{})}}let Ci=0;function ya(t,e,r){let n="node"+Ci++,a="x"+Ci,i=r||{x:Math.random()*400+50,y:Math.random()*400+50};t.add({group:"nodes",data:{id:n,label:a},classes:e,position:i}),console.log(Ci)}function hb(t){let e,r,n;return{c(){e=Ne("div"),Ce(e,"id","cy"),Ce(e,"class","graph svelte-gij75z")},m(a,i){Me(a,e,i),t[4](e),r||(n=[Gt(e,"mouseover",t[1]),Gt(e,"mouseout",t[2]),Gt(e,"mousemove",t[3])],r=!0)},p:Be,i:Be,o:Be,d(a){a&&Le(e),t[4](null),r=!1,_r(n)}}}function vb(t,e,r){let n=Dt(Ft),a=Dt(Ku),i,o={x:0,y:0};Vi(()=>{n.mount(i)});function s(p){if((p.key==="Meta"||p.key==="Control")&&a.enableDrawMode(),p.key==="Backspace"&&n.$(":selected").forEach(function(w){(w.isNode()||w.isEdge())&&w.remove()}),["l","o","c"].includes(p.key.toLowerCase())){let y;switch(p.key.toLowerCase()){case"l":y="latent-variable";break;case"o":y="observed-variable";break;case"c":y="constant";break}ya(n,y,{...o})}}function l(){n.autoungrabify(!1),n.nodes().grabify()}function u(){(event.key==="Meta"||event.key==="Control")&&(a.disableDrawMode(),l())}function f(){document.addEventListener("keydown",s),document.addEventListener("keyup",u)}function c(){document.removeEventListener("keydown",s,!1),document.removeEventListener("keyup",u,!1)}function h(p){o.x=p.offsetX,o.y=p.offsetY}function v(p){ki[p?"unshift":"push"](()=>{i=p,r(0,i)})}return[i,f,c,h,v]}class gb extends at{constructor(e){super(),nt(this,e,vb,hb,Je,{})}}function ba(t){const e=pb(t);mb(t,e)}function pb(t){const e=cy.getElementById(t);if(e.length===0){console.error(`Node with ID ${t} does not exist.`);return}let r=0,n=0;const a=e.position(),i=e.height();return e.connectedEdges().forEach(o=>{const s=o.source(),l=o.target(),u=s.id()===e.id()?l:s,f=u.position();e.id()!==u.id()&&(f.y<a.y-i/2?r++:f.y>a.y+i/2&&n++)}),r>0&&n===0?"bottom":r===0&&n>0?"top":"keep"}function mb(t,e){var r=cy.getElementById(t);if(r.length===0){console.log("Node with ID "+t+" does not exist.");return}var n=null;r.connectedEdges().forEach(function(a){var i=a.source(),o=a.target();if(i.id()===t&&o.id()===t){n=a;return}}),yb(n,e)}function yb(t,e){if(t!=null){var r=t.style("loop-direction");e=="bottom"&&r=="0rad"?t.style("loop-direction","3.14"):e=="top"&&r=="3.14rad"&&t.style("loop-direction","0")}}function sa(t){return/^node\d+$/.test(t)}function bb(t,e,r){let n;Ln(t,gt,i=>r(0,n=i));let a=Dt(Ft);return a.on("add","node",function(i){const o=i.target;if(o.hasClass("observed-variable")){let s=n.columnNames;s&&s.includes(o.data("label"))&&(o.addClass("linked"),n.loadingMode&&bootbox.alert("Variable connected with data set"))}n.modelEmpty&&a.nodes().length>0&&ir(gt,n.modelEmpty=!1,n)}),a.on("remove","node",function(i){a.nodes().length==0&&ir(gt,n.modelEmpty=!0,n)}),a.on("add","edge",function(i){if(!n.loadingMode){const o=i.target,s=o.source().id(),l=o.target().id();o.addClass("free"),o.addClass("nolabel"),s!==l&&sa(s)&&sa(l)?(ba(s),ba(l),o.addClass("directed")):s===l&&sa(s)&&sa(l)&&o.addClass("loop"),(o.hasClass("undirected")||o.hasClass("loop"))&&(o.source().hasClass("constant")||o.target().hasClass("constant"))&&a.remove(o),o.hasClass("directed")&&o.target().hasClass("constant")&&a.remove(o),o.hasClass("directed")&&o.source().hasClass("constant")&&o.target().connectedEdges(c=>c.source().hasClass("constant")).length>1&&a.remove(o),o.hasClass("directed")&&o.source().hasClass("constant")?o.data("isMean","1"):o.data("isMean","0")}}),a.on("position","node",function(i){i.target.neighborhood().nodes().forEach(l=>{const u=l.id();ba(u)})}),[]}class wb extends at{constructor(e){super(),nt(this,e,bb,null,Je,{})}}function xb(t){let e,r,n,a,i,o;return{c(){e=Ne("li"),r=Ne("a"),r.textContent="Help",n=Qe(),a=Ne("div"),a.innerHTML=`<div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button> 
        <h4 class="modal-title">Help</h4></div> 
      <div class="modal-body" id="help-content"><table class="table"><thead><tr><th>Command</th> 
              <th>Action</th></tr></thead> 
          <tbody><tr><td>Hold command/ctrl</td> 
              <td>Draw directed arrows</td></tr> 
            <tr><td>Hold space</td> 
              <td>Draw undirected arrows (currently disabled because of bug)</td></tr> 
            <tr><td>Backspace</td> 
              <td>Delete selected elements</td></tr> 
            <tr><td>o</td> 
              <td>Create observed variable at mouse location</td></tr> 
            <tr><td>l</td> 
              <td>Create latent variable at mouse location</td></tr> 
            <tr><td>c</td> 
              <td>Create constant variable at mouse location</td></tr></tbody></table></div></div></div>`,Ce(r,"href","#"),Ce(r,"id","help-menu-item"),Ce(a,"class","modal fade"),Ce(a,"tabindex","-1"),Ce(a,"role","dialog"),Ce(a,"id","help")},m(s,l){Me(s,e,l),He(e,r),Me(s,n,l),Me(s,a,l),i||(o=Gt(r,"click",Eb),i=!0)},p:Be,i:Be,o:Be,d(s){s&&Le(e),s&&Le(n),s&&Le(a),i=!1,o()}}}function Eb(){window.$("#help").modal()}class Xu extends at{constructor(e){super(),nt(this,e,null,xb,Je,{})}}function Cb(t){let e,r,n,a;const i=t[1].default,o=rl(i,t,t[0],null);return{c(){e=Ne("nav"),r=Ne("div"),n=Ne("ul"),o&&o.c(),Ce(n,"class","nav navbar-nav navbar-left"),Ce(r,"class","container"),Ce(e,"class","navbar navbar-default navbar-fixed-top navbar-left")},m(s,l){Me(s,e,l),He(e,r),He(r,n),o&&o.m(n,null),a=!0},p(s,[l]){o&&o.p&&(!a||l&1)&&il(o,i,s,s[0],a?al(i,s[0],l,null):ol(s[0]),null)},i(s){a||(Ge(o,s),a=!0)},o(s){Ue(o,s),a=!1},d(s){s&&Le(e),o&&o.d(s)}}}function Sb(t,e,r){let{$$slots:n={},$$scope:a}=e;return t.$$set=i=>{"$$scope"in i&&r(0,a=i.$$scope)},[a,n]}class kb extends at{constructor(e){super(),nt(this,e,Sb,Cb,Je,{})}}function ju(t,e){cy=Dt(Ft);const r=cy.nodes(function(a){return a.hasClass("observed-variable")});if(r.length>0){let a=!0;for(var n=0;n<r.length;n++){const i=r[n],o=i.data("label");e&&i.removeClass("linked"),t.includes(o)?e&&i.addClass("linked"):a=!1}a&&bootbox.alert("All observed variables were linked with data")}}function la(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Qu={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(r){t.exports=r()})(function(){return function r(n,a,i){function o(u,f){if(!a[u]){if(!n[u]){var c=typeof la=="function"&&la;if(!f&&c)return c(u,!0);if(s)return s(u,!0);var h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h}var v=a[u]={exports:{}};n[u][0].call(v.exports,function(p){var y=n[u][1][p];return o(y||p)},v,v.exports,r,n,a,i)}return a[u].exports}for(var s=typeof la=="function"&&la,l=0;l<i.length;l++)o(i[l]);return o}({1:[function(r,n,a){var i=r("./utils"),o=r("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(l){for(var u,f,c,h,v,p,y,w=[],d=0,g=l.length,m=g,b=i.getTypeOf(l)!=="string";d<l.length;)m=g-d,c=b?(u=l[d++],f=d<g?l[d++]:0,d<g?l[d++]:0):(u=l.charCodeAt(d++),f=d<g?l.charCodeAt(d++):0,d<g?l.charCodeAt(d++):0),h=u>>2,v=(3&u)<<4|f>>4,p=1<m?(15&f)<<2|c>>6:64,y=2<m?63&c:64,w.push(s.charAt(h)+s.charAt(v)+s.charAt(p)+s.charAt(y));return w.join("")},a.decode=function(l){var u,f,c,h,v,p,y=0,w=0,d="data:";if(l.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var g,m=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===s.charAt(64)&&m--,l.charAt(l.length-2)===s.charAt(64)&&m--,m%1!=0)throw new Error("Invalid base64 input, bad content length.");for(g=o.uint8array?new Uint8Array(0|m):new Array(0|m);y<l.length;)u=s.indexOf(l.charAt(y++))<<2|(h=s.indexOf(l.charAt(y++)))>>4,f=(15&h)<<4|(v=s.indexOf(l.charAt(y++)))>>2,c=(3&v)<<6|(p=s.indexOf(l.charAt(y++))),g[w++]=u,v!==64&&(g[w++]=f),p!==64&&(g[w++]=c);return g}},{"./support":30,"./utils":32}],2:[function(r,n,a){var i=r("./external"),o=r("./stream/DataWorker"),s=r("./stream/Crc32Probe"),l=r("./stream/DataLengthProbe");function u(f,c,h,v,p){this.compressedSize=f,this.uncompressedSize=c,this.crc32=h,this.compression=v,this.compressedContent=p}u.prototype={getContentWorker:function(){var f=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),c=this;return f.on("end",function(){if(this.streamInfo.data_length!==c.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(f,c,h){return f.pipe(new s).pipe(new l("uncompressedSize")).pipe(c.compressWorker(h)).pipe(new l("compressedSize")).withStreamInfo("compression",c)},n.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,n,a){var i=r("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,n,a){var i=r("./utils"),o=function(){for(var s,l=[],u=0;u<256;u++){s=u;for(var f=0;f<8;f++)s=1&s?3988292384^s>>>1:s>>>1;l[u]=s}return l}();n.exports=function(s,l){return s!==void 0&&s.length?i.getTypeOf(s)!=="string"?function(u,f,c,h){var v=o,p=h+c;u^=-1;for(var y=h;y<p;y++)u=u>>>8^v[255&(u^f[y])];return-1^u}(0|l,s,s.length,0):function(u,f,c,h){var v=o,p=h+c;u^=-1;for(var y=h;y<p;y++)u=u>>>8^v[255&(u^f.charCodeAt(y))];return-1^u}(0|l,s,s.length,0):0}},{"./utils":32}],5:[function(r,n,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(r,n,a){var i=null;i=typeof Promise<"u"?Promise:r("lie"),n.exports={Promise:i}},{lie:37}],7:[function(r,n,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=r("pako"),s=r("./utils"),l=r("./stream/GenericWorker"),u=i?"uint8array":"array";function f(c,h){l.call(this,"FlateWorker/"+c),this._pako=null,this._pakoAction=c,this._pakoOptions=h,this.meta={}}a.magic="\b\0",s.inherits(f,l),f.prototype.processChunk=function(c){this.meta=c.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(u,c.data),!1)},f.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var c=this;this._pako.onData=function(h){c.push({data:h,meta:c.meta})}},a.compressWorker=function(c){return new f("Deflate",c)},a.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,n,a){function i(v,p){var y,w="";for(y=0;y<p;y++)w+=String.fromCharCode(255&v),v>>>=8;return w}function o(v,p,y,w,d,g){var m,b,E=v.file,S=v.compression,C=g!==u.utf8encode,T=s.transformTo("string",g(E.name)),_=s.transformTo("string",u.utf8encode(E.name)),P=E.comment,F=s.transformTo("string",g(P)),k=s.transformTo("string",u.utf8encode(P)),R=_.length!==E.name.length,x=k.length!==P.length,W="",O="",M="",K=E.dir,G=E.date,H={crc32:0,compressedSize:0,uncompressedSize:0};p&&!y||(H.crc32=v.crc32,H.compressedSize=v.compressedSize,H.uncompressedSize=v.uncompressedSize);var A=0;p&&(A|=8),C||!R&&!x||(A|=2048);var z=0,$=0;K&&(z|=16),d==="UNIX"?($=798,z|=function(V,Y){var U=V;return V||(U=Y?16893:33204),(65535&U)<<16}(E.unixPermissions,K)):($=20,z|=function(V){return 63&(V||0)}(E.dosPermissions)),m=G.getUTCHours(),m<<=6,m|=G.getUTCMinutes(),m<<=5,m|=G.getUTCSeconds()/2,b=G.getUTCFullYear()-1980,b<<=4,b|=G.getUTCMonth()+1,b<<=5,b|=G.getUTCDate(),R&&(O=i(1,1)+i(f(T),4)+_,W+="up"+i(O.length,2)+O),x&&(M=i(1,1)+i(f(F),4)+k,W+="uc"+i(M.length,2)+M);var I="";return I+=`
\0`,I+=i(A,2),I+=S.magic,I+=i(m,2),I+=i(b,2),I+=i(H.crc32,4),I+=i(H.compressedSize,4),I+=i(H.uncompressedSize,4),I+=i(T.length,2),I+=i(W.length,2),{fileRecord:c.LOCAL_FILE_HEADER+I+T+W,dirRecord:c.CENTRAL_FILE_HEADER+i($,2)+I+i(F.length,2)+"\0\0\0\0"+i(z,4)+i(w,4)+T+W+F}}var s=r("../utils"),l=r("../stream/GenericWorker"),u=r("../utf8"),f=r("../crc32"),c=r("../signature");function h(v,p,y,w){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=y,this.encodeFileName=w,this.streamFiles=v,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(h,l),h.prototype.push=function(v){var p=v.meta.percent||0,y=this.entriesCount,w=this._sources.length;this.accumulate?this.contentBuffer.push(v):(this.bytesWritten+=v.data.length,l.prototype.push.call(this,{data:v.data,meta:{currentFile:this.currentFile,percent:y?(p+100*(y-w-1))/y:100}}))},h.prototype.openedSource=function(v){this.currentSourceOffset=this.bytesWritten,this.currentFile=v.file.name;var p=this.streamFiles&&!v.file.dir;if(p){var y=o(v,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:y.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(v){this.accumulate=!1;var p=this.streamFiles&&!v.file.dir,y=o(v,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(y.dirRecord),p)this.push({data:function(w){return c.DATA_DESCRIPTOR+i(w.crc32,4)+i(w.compressedSize,4)+i(w.uncompressedSize,4)}(v),meta:{percent:100}});else for(this.push({data:y.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var v=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var y=this.bytesWritten-v,w=function(d,g,m,b,E){var S=s.transformTo("string",E(b));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(d,2)+i(d,2)+i(g,4)+i(m,4)+i(S.length,2)+S}(this.dirRecords.length,y,v,this.zipComment,this.encodeFileName);this.push({data:w,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(v){this._sources.push(v);var p=this;return v.on("data",function(y){p.processChunk(y)}),v.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),v.on("error",function(y){p.error(y)}),this},h.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(v){var p=this._sources;if(!l.prototype.error.call(this,v))return!1;for(var y=0;y<p.length;y++)try{p[y].error(v)}catch{}return!0},h.prototype.lock=function(){l.prototype.lock.call(this);for(var v=this._sources,p=0;p<v.length;p++)v[p].lock()},n.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,n,a){var i=r("../compressions"),o=r("./ZipFileWorker");a.generateWorker=function(s,l,u){var f=new o(l.streamFiles,u,l.platform,l.encodeFileName),c=0;try{s.forEach(function(h,v){c++;var p=function(g,m){var b=g||m,E=i[b];if(!E)throw new Error(b+" is not a valid compression method !");return E}(v.options.compression,l.compression),y=v.options.compressionOptions||l.compressionOptions||{},w=v.dir,d=v.date;v._compressWorker(p,y).withStreamInfo("file",{name:h,dir:w,date:d,comment:v.comment||"",unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions}).pipe(f)}),f.entriesCount=c}catch(h){f.error(h)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,n,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var s in this)typeof this[s]!="function"&&(o[s]=this[s]);return o}}(i.prototype=r("./object")).loadAsync=r("./load"),i.support=r("./support"),i.defaults=r("./defaults"),i.version="3.10.1",i.loadAsync=function(o,s){return new i().loadAsync(o,s)},i.external=r("./external"),n.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,n,a){var i=r("./utils"),o=r("./external"),s=r("./utf8"),l=r("./zipEntries"),u=r("./stream/Crc32Probe"),f=r("./nodejsUtils");function c(h){return new o.Promise(function(v,p){var y=h.decompressed.getContentWorker().pipe(new u);y.on("error",function(w){p(w)}).on("end",function(){y.streamInfo.crc32!==h.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):v()}).resume()})}n.exports=function(h,v){var p=this;return v=i.extend(v||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),f.isNode&&f.isStream(h)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",h,!0,v.optimizedBinaryString,v.base64).then(function(y){var w=new l(v);return w.load(y),w}).then(function(y){var w=[o.Promise.resolve(y)],d=y.files;if(v.checkCRC32)for(var g=0;g<d.length;g++)w.push(c(d[g]));return o.Promise.all(w)}).then(function(y){for(var w=y.shift(),d=w.files,g=0;g<d.length;g++){var m=d[g],b=m.fileNameStr,E=i.resolve(m.fileNameStr);p.file(E,m.decompressed,{binary:!0,optimizedBinaryString:!0,date:m.date,dir:m.dir,comment:m.fileCommentStr.length?m.fileCommentStr:null,unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions,createFolders:v.createFolders}),m.dir||(p.file(E).unsafeOriginalName=b)}return w.zipComment.length&&(p.comment=w.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,n,a){var i=r("../utils"),o=r("../stream/GenericWorker");function s(l,u){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}i.inherits(s,o),s.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(f){u.push({data:f,meta:{percent:0}})}).on("error",function(f){u.isPaused?this.generatedError=f:u.error(f)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},s.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,n,a){var i=r("readable-stream").Readable;function o(s,l,u){i.call(this,l),this._helper=s;var f=this;s.on("data",function(c,h){f.push(c)||f._helper.pause(),u&&u(h)}).on("error",function(c){f.emit("error",c)}).on("end",function(){f.push(null)})}r("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},n.exports=o},{"../utils":32,"readable-stream":16}],14:[function(r,n,a){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(r,n,a){function i(E,S,C){var T,_=s.getTypeOf(S),P=s.extend(C||{},f);P.date=P.date||new Date,P.compression!==null&&(P.compression=P.compression.toUpperCase()),typeof P.unixPermissions=="string"&&(P.unixPermissions=parseInt(P.unixPermissions,8)),P.unixPermissions&&16384&P.unixPermissions&&(P.dir=!0),P.dosPermissions&&16&P.dosPermissions&&(P.dir=!0),P.dir&&(E=d(E)),P.createFolders&&(T=w(E))&&g.call(this,T,!0);var F=_==="string"&&P.binary===!1&&P.base64===!1;C&&C.binary!==void 0||(P.binary=!F),(S instanceof c&&S.uncompressedSize===0||P.dir||!S||S.length===0)&&(P.base64=!1,P.binary=!0,S="",P.compression="STORE",_="string");var k=null;k=S instanceof c||S instanceof l?S:p.isNode&&p.isStream(S)?new y(E,S):s.prepareContent(E,S,P.binary,P.optimizedBinaryString,P.base64);var R=new h(E,k,P);this.files[E]=R}var o=r("./utf8"),s=r("./utils"),l=r("./stream/GenericWorker"),u=r("./stream/StreamHelper"),f=r("./defaults"),c=r("./compressedObject"),h=r("./zipObject"),v=r("./generate"),p=r("./nodejsUtils"),y=r("./nodejs/NodejsStreamInputAdapter"),w=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var S=E.lastIndexOf("/");return 0<S?E.substring(0,S):""},d=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},g=function(E,S){return S=S!==void 0?S:f.createFolders,E=d(E),this.files[E]||i.call(this,E,null,{dir:!0,createFolders:S}),this.files[E]};function m(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var b={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var S,C,T;for(S in this.files)T=this.files[S],(C=S.slice(this.root.length,S.length))&&S.slice(0,this.root.length)===this.root&&E(C,T)},filter:function(E){var S=[];return this.forEach(function(C,T){E(C,T)&&S.push(T)}),S},file:function(E,S,C){if(arguments.length!==1)return E=this.root+E,i.call(this,E,S,C),this;if(m(E)){var T=E;return this.filter(function(P,F){return!F.dir&&T.test(P)})}var _=this.files[this.root+E];return _&&!_.dir?_:null},folder:function(E){if(!E)return this;if(m(E))return this.filter(function(_,P){return P.dir&&E.test(_)});var S=this.root+E,C=g.call(this,S),T=this.clone();return T.root=C.name,T},remove:function(E){E=this.root+E;var S=this.files[E];if(S||(E.slice(-1)!=="/"&&(E+="/"),S=this.files[E]),S&&!S.dir)delete this.files[E];else for(var C=this.filter(function(_,P){return P.name.slice(0,E.length)===E}),T=0;T<C.length;T++)delete this.files[C[T].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var S,C={};try{if((C=s.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=C.type.toLowerCase(),C.compression=C.compression.toUpperCase(),C.type==="binarystring"&&(C.type="string"),!C.type)throw new Error("No output type specified.");s.checkSupport(C.type),C.platform!=="darwin"&&C.platform!=="freebsd"&&C.platform!=="linux"&&C.platform!=="sunos"||(C.platform="UNIX"),C.platform==="win32"&&(C.platform="DOS");var T=C.comment||this.comment||"";S=v.generateWorker(this,C,T)}catch(_){(S=new l("error")).error(_)}return new u(S,C.type||"string",C.mimeType)},generateAsync:function(E,S){return this.generateInternalStream(E).accumulate(S)},generateNodeStream:function(E,S){return(E=E||{}).type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(S)}};n.exports=b},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,n,a){n.exports=r("stream")},{stream:void 0}],17:[function(r,n,a){var i=r("./DataReader");function o(s){i.call(this,s);for(var l=0;l<this.data.length;l++)s[l]=255&s[l]}r("../utils").inherits(o,i),o.prototype.byteAt=function(s){return this.data[this.zero+s]},o.prototype.lastIndexOfSignature=function(s){for(var l=s.charCodeAt(0),u=s.charCodeAt(1),f=s.charCodeAt(2),c=s.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===l&&this.data[h+1]===u&&this.data[h+2]===f&&this.data[h+3]===c)return h-this.zero;return-1},o.prototype.readAndCheckSignature=function(s){var l=s.charCodeAt(0),u=s.charCodeAt(1),f=s.charCodeAt(2),c=s.charCodeAt(3),h=this.readData(4);return l===h[0]&&u===h[1]&&f===h[2]&&c===h[3]},o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},n.exports=o},{"../utils":32,"./DataReader":18}],18:[function(r,n,a){var i=r("../utils");function o(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var l,u=0;for(this.checkOffset(s),l=this.index+s-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=s,u},readString:function(s){return i.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},n.exports=o},{"../utils":32}],19:[function(r,n,a){var i=r("./Uint8ArrayReader");function o(s){i.call(this,s)}r("../utils").inherits(o,i),o.prototype.readData=function(s){this.checkOffset(s);var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},n.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,n,a){var i=r("./DataReader");function o(s){i.call(this,s)}r("../utils").inherits(o,i),o.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},o.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},o.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},o.prototype.readData=function(s){this.checkOffset(s);var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},n.exports=o},{"../utils":32,"./DataReader":18}],21:[function(r,n,a){var i=r("./ArrayReader");function o(s){i.call(this,s)}r("../utils").inherits(o,i),o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},n.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(r,n,a){var i=r("../utils"),o=r("../support"),s=r("./ArrayReader"),l=r("./StringReader"),u=r("./NodeBufferReader"),f=r("./Uint8ArrayReader");n.exports=function(c){var h=i.getTypeOf(c);return i.checkSupport(h),h!=="string"||o.uint8array?h==="nodebuffer"?new u(c):o.uint8array?new f(i.transformTo("uint8array",c)):new s(i.transformTo("array",c)):new l(c)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,n,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,n,a){var i=r("./GenericWorker"),o=r("../utils");function s(l){i.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(s,i),s.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},n.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(r,n,a){var i=r("./GenericWorker"),o=r("../crc32");function s(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(s,i),s.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},n.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,n,a){var i=r("../utils"),o=r("./GenericWorker");function s(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(s,o),s.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}o.prototype.processChunk.call(this,l)},n.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(r,n,a){var i=r("../utils"),o=r("./GenericWorker");function s(l){o.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(f){u.dataIsReady=!0,u.data=f,u.max=f&&f.length||0,u.type=i.getTypeOf(f),u.isPaused||u._tickAndRepeat()},function(f){u.error(f)})}i.inherits(s,o),s.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(r,n,a){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,s){return this._listeners[o].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,s){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,s)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var s=this;return o.on("data",function(l){s.processChunk(l)}),o.on("end",function(){s.end()}),o.on("error",function(l){s.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,s){return this.extraStreamInfo[o]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},n.exports=i},{}],29:[function(r,n,a){var i=r("../utils"),o=r("./ConvertWorker"),s=r("./GenericWorker"),l=r("../base64"),u=r("../support"),f=r("../external"),c=null;if(u.nodestream)try{c=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(p,y){return new f.Promise(function(w,d){var g=[],m=p._internalType,b=p._outputType,E=p._mimeType;p.on("data",function(S,C){g.push(S),y&&y(C)}).on("error",function(S){g=[],d(S)}).on("end",function(){try{var S=function(C,T,_){switch(C){case"blob":return i.newBlob(i.transformTo("arraybuffer",T),_);case"base64":return l.encode(T);default:return i.transformTo(C,T)}}(b,function(C,T){var _,P=0,F=null,k=0;for(_=0;_<T.length;_++)k+=T[_].length;switch(C){case"string":return T.join("");case"array":return Array.prototype.concat.apply([],T);case"uint8array":for(F=new Uint8Array(k),_=0;_<T.length;_++)F.set(T[_],P),P+=T[_].length;return F;case"nodebuffer":return Buffer.concat(T);default:throw new Error("concat : unsupported type '"+C+"'")}}(m,g),E);w(S)}catch(C){d(C)}g=[]}).resume()})}function v(p,y,w){var d=y;switch(y){case"blob":case"arraybuffer":d="uint8array";break;case"base64":d="string"}try{this._internalType=d,this._outputType=y,this._mimeType=w,i.checkSupport(d),this._worker=p.pipe(new o(d)),p.lock()}catch(g){this._worker=new s("error"),this._worker.error(g)}}v.prototype={accumulate:function(p){return h(this,p)},on:function(p,y){var w=this;return p==="data"?this._worker.on(p,function(d){y.call(w,d.data,d.meta)}):this._worker.on(p,function(){i.delay(y,arguments,w)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:this._outputType!=="nodebuffer"},p)}},n.exports=v},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,n,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),a.blob=o.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!r("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(r,n,a){for(var i=r("./utils"),o=r("./support"),s=r("./nodejsUtils"),l=r("./stream/GenericWorker"),u=new Array(256),f=0;f<256;f++)u[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;u[254]=u[254]=1;function c(){l.call(this,"utf-8 decode"),this.leftOver=null}function h(){l.call(this,"utf-8 encode")}a.utf8encode=function(v){return o.nodebuffer?s.newBufferFrom(v,"utf-8"):function(p){var y,w,d,g,m,b=p.length,E=0;for(g=0;g<b;g++)(64512&(w=p.charCodeAt(g)))==55296&&g+1<b&&(64512&(d=p.charCodeAt(g+1)))==56320&&(w=65536+(w-55296<<10)+(d-56320),g++),E+=w<128?1:w<2048?2:w<65536?3:4;for(y=o.uint8array?new Uint8Array(E):new Array(E),g=m=0;m<E;g++)(64512&(w=p.charCodeAt(g)))==55296&&g+1<b&&(64512&(d=p.charCodeAt(g+1)))==56320&&(w=65536+(w-55296<<10)+(d-56320),g++),w<128?y[m++]=w:(w<2048?y[m++]=192|w>>>6:(w<65536?y[m++]=224|w>>>12:(y[m++]=240|w>>>18,y[m++]=128|w>>>12&63),y[m++]=128|w>>>6&63),y[m++]=128|63&w);return y}(v)},a.utf8decode=function(v){return o.nodebuffer?i.transformTo("nodebuffer",v).toString("utf-8"):function(p){var y,w,d,g,m=p.length,b=new Array(2*m);for(y=w=0;y<m;)if((d=p[y++])<128)b[w++]=d;else if(4<(g=u[d]))b[w++]=65533,y+=g-1;else{for(d&=g===2?31:g===3?15:7;1<g&&y<m;)d=d<<6|63&p[y++],g--;1<g?b[w++]=65533:d<65536?b[w++]=d:(d-=65536,b[w++]=55296|d>>10&1023,b[w++]=56320|1023&d)}return b.length!==w&&(b.subarray?b=b.subarray(0,w):b.length=w),i.applyFromCharCode(b)}(v=i.transformTo(o.uint8array?"uint8array":"array",v))},i.inherits(c,l),c.prototype.processChunk=function(v){var p=i.transformTo(o.uint8array?"uint8array":"array",v.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var y=p;(p=new Uint8Array(y.length+this.leftOver.length)).set(this.leftOver,0),p.set(y,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var w=function(g,m){var b;for((m=m||g.length)>g.length&&(m=g.length),b=m-1;0<=b&&(192&g[b])==128;)b--;return b<0||b===0?m:b+u[g[b]]>m?b:m}(p),d=p;w!==p.length&&(o.uint8array?(d=p.subarray(0,w),this.leftOver=p.subarray(w,p.length)):(d=p.slice(0,w),this.leftOver=p.slice(w,p.length))),this.push({data:a.utf8decode(d),meta:v.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=c,i.inherits(h,l),h.prototype.processChunk=function(v){this.push({data:a.utf8encode(v.data),meta:v.meta})},a.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,n,a){var i=r("./support"),o=r("./base64"),s=r("./nodejsUtils"),l=r("./external");function u(y){return y}function f(y,w){for(var d=0;d<y.length;++d)w[d]=255&y.charCodeAt(d);return w}r("setimmediate"),a.newBlob=function(y,w){a.checkSupport("blob");try{return new Blob([y],{type:w})}catch{try{var d=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return d.append(y),d.getBlob(w)}catch{throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(y,w,d){var g=[],m=0,b=y.length;if(b<=d)return String.fromCharCode.apply(null,y);for(;m<b;)w==="array"||w==="nodebuffer"?g.push(String.fromCharCode.apply(null,y.slice(m,Math.min(m+d,b)))):g.push(String.fromCharCode.apply(null,y.subarray(m,Math.min(m+d,b)))),m+=d;return g.join("")},stringifyByChar:function(y){for(var w="",d=0;d<y.length;d++)w+=String.fromCharCode(y[d]);return w},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function h(y){var w=65536,d=a.getTypeOf(y),g=!0;if(d==="uint8array"?g=c.applyCanBeUsed.uint8array:d==="nodebuffer"&&(g=c.applyCanBeUsed.nodebuffer),g)for(;1<w;)try{return c.stringifyByChunk(y,d,w)}catch{w=Math.floor(w/2)}return c.stringifyByChar(y)}function v(y,w){for(var d=0;d<y.length;d++)w[d]=y[d];return w}a.applyFromCharCode=h;var p={};p.string={string:u,array:function(y){return f(y,new Array(y.length))},arraybuffer:function(y){return p.string.uint8array(y).buffer},uint8array:function(y){return f(y,new Uint8Array(y.length))},nodebuffer:function(y){return f(y,s.allocBuffer(y.length))}},p.array={string:h,array:u,arraybuffer:function(y){return new Uint8Array(y).buffer},uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return s.newBufferFrom(y)}},p.arraybuffer={string:function(y){return h(new Uint8Array(y))},array:function(y){return v(new Uint8Array(y),new Array(y.byteLength))},arraybuffer:u,uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return s.newBufferFrom(new Uint8Array(y))}},p.uint8array={string:h,array:function(y){return v(y,new Array(y.length))},arraybuffer:function(y){return y.buffer},uint8array:u,nodebuffer:function(y){return s.newBufferFrom(y)}},p.nodebuffer={string:h,array:function(y){return v(y,new Array(y.length))},arraybuffer:function(y){return p.nodebuffer.uint8array(y).buffer},uint8array:function(y){return v(y,new Uint8Array(y.length))},nodebuffer:u},a.transformTo=function(y,w){if(w=w||"",!y)return w;a.checkSupport(y);var d=a.getTypeOf(w);return p[d][y](w)},a.resolve=function(y){for(var w=y.split("/"),d=[],g=0;g<w.length;g++){var m=w[g];m==="."||m===""&&g!==0&&g!==w.length-1||(m===".."?d.pop():d.push(m))}return d.join("/")},a.getTypeOf=function(y){return typeof y=="string"?"string":Object.prototype.toString.call(y)==="[object Array]"?"array":i.nodebuffer&&s.isBuffer(y)?"nodebuffer":i.uint8array&&y instanceof Uint8Array?"uint8array":i.arraybuffer&&y instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(y){if(!i[y.toLowerCase()])throw new Error(y+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(y){var w,d,g="";for(d=0;d<(y||"").length;d++)g+="\\x"+((w=y.charCodeAt(d))<16?"0":"")+w.toString(16).toUpperCase();return g},a.delay=function(y,w,d){setImmediate(function(){y.apply(d||null,w||[])})},a.inherits=function(y,w){function d(){}d.prototype=w.prototype,y.prototype=new d},a.extend=function(){var y,w,d={};for(y=0;y<arguments.length;y++)for(w in arguments[y])Object.prototype.hasOwnProperty.call(arguments[y],w)&&d[w]===void 0&&(d[w]=arguments[y][w]);return d},a.prepareContent=function(y,w,d,g,m){return l.Promise.resolve(w).then(function(b){return i.blob&&(b instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(b))!==-1)&&typeof FileReader<"u"?new l.Promise(function(E,S){var C=new FileReader;C.onload=function(T){E(T.target.result)},C.onerror=function(T){S(T.target.error)},C.readAsArrayBuffer(b)}):b}).then(function(b){var E=a.getTypeOf(b);return E?(E==="arraybuffer"?b=a.transformTo("uint8array",b):E==="string"&&(m?b=o.decode(b):d&&g!==!0&&(b=function(S){return f(S,i.uint8array?new Uint8Array(S.length):new Array(S.length))}(b))),b):l.Promise.reject(new Error("Can't read the data of '"+y+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,n,a){var i=r("./reader/readerFor"),o=r("./utils"),s=r("./signature"),l=r("./zipEntry"),u=r("./support");function f(c){this.files=[],this.loadOptions=c}f.prototype={checkSignature:function(c){if(!this.reader.readAndCheckSignature(c)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(h)+", expected "+o.pretty(c)+")")}},isSignature:function(c,h){var v=this.reader.index;this.reader.setIndex(c);var p=this.reader.readString(4)===h;return this.reader.setIndex(v),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var c=this.reader.readData(this.zipCommentLength),h=u.uint8array?"uint8array":"array",v=o.transformTo(h,c);this.zipComment=this.loadOptions.decodeFileName(v)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var c,h,v,p=this.zip64EndOfCentralSize-44;0<p;)c=this.reader.readInt(2),h=this.reader.readInt(4),v=this.reader.readData(h),this.zip64ExtensibleData[c]={id:c,length:h,value:v}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var c,h;for(c=0;c<this.files.length;c++)h=this.files[c],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var c;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(c=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(c);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var c=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(c<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(c);var h=c;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(c=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(c),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var v=this.centralDirOffset+this.centralDirSize;this.zip64&&(v+=20,v+=12+this.zip64EndOfCentralSize);var p=h-v;if(0<p)this.isSignature(h,s.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(c){this.reader=i(c)},load:function(c){this.prepareReader(c),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,n,a){var i=r("./reader/readerFor"),o=r("./utils"),s=r("./compressedObject"),l=r("./crc32"),u=r("./utf8"),f=r("./compressions"),c=r("./support");function h(v,p){this.options=v,this.loadOptions=p}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(v){var p,y;if(v.skip(22),this.fileNameLength=v.readInt(2),y=v.readInt(2),this.fileName=v.readData(this.fileNameLength),v.skip(y),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=function(w){for(var d in f)if(Object.prototype.hasOwnProperty.call(f,d)&&f[d].magic===w)return f[d];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,p,v.readData(this.compressedSize))},readCentralPart:function(v){this.versionMadeBy=v.readInt(2),v.skip(2),this.bitFlag=v.readInt(2),this.compressionMethod=v.readString(2),this.date=v.readDate(),this.crc32=v.readInt(4),this.compressedSize=v.readInt(4),this.uncompressedSize=v.readInt(4);var p=v.readInt(2);if(this.extraFieldsLength=v.readInt(2),this.fileCommentLength=v.readInt(2),this.diskNumberStart=v.readInt(2),this.internalFileAttributes=v.readInt(2),this.externalFileAttributes=v.readInt(4),this.localHeaderOffset=v.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");v.skip(p),this.readExtraFields(v),this.parseZIP64ExtraField(v),this.fileComment=v.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var v=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),v==0&&(this.dosPermissions=63&this.externalFileAttributes),v==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var v=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=v.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=v.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=v.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=v.readInt(4))}},readExtraFields:function(v){var p,y,w,d=v.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});v.index+4<d;)p=v.readInt(2),y=v.readInt(2),w=v.readData(y),this.extraFields[p]={id:p,length:y,value:w};v.setIndex(d)},handleUTF8:function(){var v=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var y=o.transformTo(v,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(y)}var w=this.findExtraFieldUnicodeComment();if(w!==null)this.fileCommentStr=w;else{var d=o.transformTo(v,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(d)}}},findExtraFieldUnicodePath:function(){var v=this.extraFields[28789];if(v){var p=i(v.value);return p.readInt(1)!==1||l(this.fileName)!==p.readInt(4)?null:u.utf8decode(p.readData(v.length-5))}return null},findExtraFieldUnicodeComment:function(){var v=this.extraFields[25461];if(v){var p=i(v.value);return p.readInt(1)!==1||l(this.fileComment)!==p.readInt(4)?null:u.utf8decode(p.readData(v.length-5))}return null}},n.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,n,a){function i(p,y,w){this.name=p,this.dir=w.dir,this.date=w.date,this.comment=w.comment,this.unixPermissions=w.unixPermissions,this.dosPermissions=w.dosPermissions,this._data=y,this._dataBinary=w.binary,this.options={compression:w.compression,compressionOptions:w.compressionOptions}}var o=r("./stream/StreamHelper"),s=r("./stream/DataWorker"),l=r("./utf8"),u=r("./compressedObject"),f=r("./stream/GenericWorker");i.prototype={internalStream:function(p){var y=null,w="string";try{if(!p)throw new Error("No output type specified.");var d=(w=p.toLowerCase())==="string"||w==="text";w!=="binarystring"&&w!=="text"||(w="string"),y=this._decompressWorker();var g=!this._dataBinary;g&&!d&&(y=y.pipe(new l.Utf8EncodeWorker)),!g&&d&&(y=y.pipe(new l.Utf8DecodeWorker))}catch(m){(y=new f("error")).error(m)}return new o(y,w,"")},async:function(p,y){return this.internalStream(p).accumulate(y)},nodeStream:function(p,y){return this.internalStream(p||"nodebuffer").toNodejsStream(y)},_compressWorker:function(p,y){if(this._data instanceof u&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var w=this._decompressWorker();return this._dataBinary||(w=w.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(w,p,y)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof f?this._data:new s(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},v=0;v<c.length;v++)i.prototype[c[v]]=h;n.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,n,a){(function(i){var o,s,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var u=0,f=new l(p),c=i.document.createTextNode("");f.observe(c,{characterData:!0}),o=function(){c.data=u=++u%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var y=i.document.createElement("script");y.onreadystatechange=function(){p(),y.onreadystatechange=null,y.parentNode.removeChild(y),y=null},i.document.documentElement.appendChild(y)}:function(){setTimeout(p,0)};else{var h=new i.MessageChannel;h.port1.onmessage=p,o=function(){h.port2.postMessage(0)}}var v=[];function p(){var y,w;s=!0;for(var d=v.length;d;){for(w=v,v=[],y=-1;++y<d;)w[y]();d=v.length}s=!1}n.exports=function(y){v.push(y)!==1||s||o()}}).call(this,typeof st<"u"?st:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,n,a){var i=r("immediate");function o(){}var s={},l=["REJECTED"],u=["FULFILLED"],f=["PENDING"];function c(d){if(typeof d!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,d!==o&&y(this,d)}function h(d,g,m){this.promise=d,typeof g=="function"&&(this.onFulfilled=g,this.callFulfilled=this.otherCallFulfilled),typeof m=="function"&&(this.onRejected=m,this.callRejected=this.otherCallRejected)}function v(d,g,m){i(function(){var b;try{b=g(m)}catch(E){return s.reject(d,E)}b===d?s.reject(d,new TypeError("Cannot resolve promise with itself")):s.resolve(d,b)})}function p(d){var g=d&&d.then;if(d&&(typeof d=="object"||typeof d=="function")&&typeof g=="function")return function(){g.apply(d,arguments)}}function y(d,g){var m=!1;function b(C){m||(m=!0,s.reject(d,C))}function E(C){m||(m=!0,s.resolve(d,C))}var S=w(function(){g(E,b)});S.status==="error"&&b(S.value)}function w(d,g){var m={};try{m.value=d(g),m.status="success"}catch(b){m.status="error",m.value=b}return m}(n.exports=c).prototype.finally=function(d){if(typeof d!="function")return this;var g=this.constructor;return this.then(function(m){return g.resolve(d()).then(function(){return m})},function(m){return g.resolve(d()).then(function(){throw m})})},c.prototype.catch=function(d){return this.then(null,d)},c.prototype.then=function(d,g){if(typeof d!="function"&&this.state===u||typeof g!="function"&&this.state===l)return this;var m=new this.constructor(o);return this.state!==f?v(m,this.state===u?d:g,this.outcome):this.queue.push(new h(m,d,g)),m},h.prototype.callFulfilled=function(d){s.resolve(this.promise,d)},h.prototype.otherCallFulfilled=function(d){v(this.promise,this.onFulfilled,d)},h.prototype.callRejected=function(d){s.reject(this.promise,d)},h.prototype.otherCallRejected=function(d){v(this.promise,this.onRejected,d)},s.resolve=function(d,g){var m=w(p,g);if(m.status==="error")return s.reject(d,m.value);var b=m.value;if(b)y(d,b);else{d.state=u,d.outcome=g;for(var E=-1,S=d.queue.length;++E<S;)d.queue[E].callFulfilled(g)}return d},s.reject=function(d,g){d.state=l,d.outcome=g;for(var m=-1,b=d.queue.length;++m<b;)d.queue[m].callRejected(g);return d},c.resolve=function(d){return d instanceof this?d:s.resolve(new this(o),d)},c.reject=function(d){var g=new this(o);return s.reject(g,d)},c.all=function(d){var g=this;if(Object.prototype.toString.call(d)!=="[object Array]")return this.reject(new TypeError("must be an array"));var m=d.length,b=!1;if(!m)return this.resolve([]);for(var E=new Array(m),S=0,C=-1,T=new this(o);++C<m;)_(d[C],C);return T;function _(P,F){g.resolve(P).then(function(k){E[F]=k,++S!==m||b||(b=!0,s.resolve(T,E))},function(k){b||(b=!0,s.reject(T,k))})}},c.race=function(d){var g=this;if(Object.prototype.toString.call(d)!=="[object Array]")return this.reject(new TypeError("must be an array"));var m=d.length,b=!1;if(!m)return this.resolve([]);for(var E=-1,S=new this(o);++E<m;)C=d[E],g.resolve(C).then(function(T){b||(b=!0,s.resolve(S,T))},function(T){b||(b=!0,s.reject(S,T))});var C;return S}},{immediate:36}],38:[function(r,n,a){var i={};(0,r("./lib/utils/common").assign)(i,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),n.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,n,a){var i=r("./zlib/deflate"),o=r("./utils/common"),s=r("./utils/strings"),l=r("./zlib/messages"),u=r("./zlib/zstream"),f=Object.prototype.toString,c=0,h=-1,v=0,p=8;function y(d){if(!(this instanceof y))return new y(d);this.options=o.assign({level:h,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},d||{});var g=this.options;g.raw&&0<g.windowBits?g.windowBits=-g.windowBits:g.gzip&&0<g.windowBits&&g.windowBits<16&&(g.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var m=i.deflateInit2(this.strm,g.level,g.method,g.windowBits,g.memLevel,g.strategy);if(m!==c)throw new Error(l[m]);if(g.header&&i.deflateSetHeader(this.strm,g.header),g.dictionary){var b;if(b=typeof g.dictionary=="string"?s.string2buf(g.dictionary):f.call(g.dictionary)==="[object ArrayBuffer]"?new Uint8Array(g.dictionary):g.dictionary,(m=i.deflateSetDictionary(this.strm,b))!==c)throw new Error(l[m]);this._dict_set=!0}}function w(d,g){var m=new y(g);if(m.push(d,!0),m.err)throw m.msg||l[m.err];return m.result}y.prototype.push=function(d,g){var m,b,E=this.strm,S=this.options.chunkSize;if(this.ended)return!1;b=g===~~g?g:g===!0?4:0,typeof d=="string"?E.input=s.string2buf(d):f.call(d)==="[object ArrayBuffer]"?E.input=new Uint8Array(d):E.input=d,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new o.Buf8(S),E.next_out=0,E.avail_out=S),(m=i.deflate(E,b))!==1&&m!==c)return this.onEnd(m),!(this.ended=!0);E.avail_out!==0&&(E.avail_in!==0||b!==4&&b!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(o.shrinkBuf(E.output,E.next_out))):this.onData(o.shrinkBuf(E.output,E.next_out)))}while((0<E.avail_in||E.avail_out===0)&&m!==1);return b===4?(m=i.deflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===c):b!==2||(this.onEnd(c),!(E.avail_out=0))},y.prototype.onData=function(d){this.chunks.push(d)},y.prototype.onEnd=function(d){d===c&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=d,this.msg=this.strm.msg},a.Deflate=y,a.deflate=w,a.deflateRaw=function(d,g){return(g=g||{}).raw=!0,w(d,g)},a.gzip=function(d,g){return(g=g||{}).gzip=!0,w(d,g)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,n,a){var i=r("./zlib/inflate"),o=r("./utils/common"),s=r("./utils/strings"),l=r("./zlib/constants"),u=r("./zlib/messages"),f=r("./zlib/zstream"),c=r("./zlib/gzheader"),h=Object.prototype.toString;function v(y){if(!(this instanceof v))return new v(y);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},y||{});var w=this.options;w.raw&&0<=w.windowBits&&w.windowBits<16&&(w.windowBits=-w.windowBits,w.windowBits===0&&(w.windowBits=-15)),!(0<=w.windowBits&&w.windowBits<16)||y&&y.windowBits||(w.windowBits+=32),15<w.windowBits&&w.windowBits<48&&!(15&w.windowBits)&&(w.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var d=i.inflateInit2(this.strm,w.windowBits);if(d!==l.Z_OK)throw new Error(u[d]);this.header=new c,i.inflateGetHeader(this.strm,this.header)}function p(y,w){var d=new v(w);if(d.push(y,!0),d.err)throw d.msg||u[d.err];return d.result}v.prototype.push=function(y,w){var d,g,m,b,E,S,C=this.strm,T=this.options.chunkSize,_=this.options.dictionary,P=!1;if(this.ended)return!1;g=w===~~w?w:w===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof y=="string"?C.input=s.binstring2buf(y):h.call(y)==="[object ArrayBuffer]"?C.input=new Uint8Array(y):C.input=y,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new o.Buf8(T),C.next_out=0,C.avail_out=T),(d=i.inflate(C,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&_&&(S=typeof _=="string"?s.string2buf(_):h.call(_)==="[object ArrayBuffer]"?new Uint8Array(_):_,d=i.inflateSetDictionary(this.strm,S)),d===l.Z_BUF_ERROR&&P===!0&&(d=l.Z_OK,P=!1),d!==l.Z_STREAM_END&&d!==l.Z_OK)return this.onEnd(d),!(this.ended=!0);C.next_out&&(C.avail_out!==0&&d!==l.Z_STREAM_END&&(C.avail_in!==0||g!==l.Z_FINISH&&g!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(m=s.utf8border(C.output,C.next_out),b=C.next_out-m,E=s.buf2string(C.output,m),C.next_out=b,C.avail_out=T-b,b&&o.arraySet(C.output,C.output,m,b,0),this.onData(E)):this.onData(o.shrinkBuf(C.output,C.next_out)))),C.avail_in===0&&C.avail_out===0&&(P=!0)}while((0<C.avail_in||C.avail_out===0)&&d!==l.Z_STREAM_END);return d===l.Z_STREAM_END&&(g=l.Z_FINISH),g===l.Z_FINISH?(d=i.inflateEnd(this.strm),this.onEnd(d),this.ended=!0,d===l.Z_OK):g!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(C.avail_out=0))},v.prototype.onData=function(y){this.chunks.push(y)},v.prototype.onEnd=function(y){y===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},a.Inflate=v,a.inflate=p,a.inflateRaw=function(y,w){return(w=w||{}).raw=!0,p(y,w)},a.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,n,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var f=u.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var c in f)f.hasOwnProperty(c)&&(l[c]=f[c])}}return l},a.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var o={arraySet:function(l,u,f,c,h){if(u.subarray&&l.subarray)l.set(u.subarray(f,f+c),h);else for(var v=0;v<c;v++)l[h+v]=u[f+v]},flattenChunks:function(l){var u,f,c,h,v,p;for(u=c=0,f=l.length;u<f;u++)c+=l[u].length;for(p=new Uint8Array(c),u=h=0,f=l.length;u<f;u++)v=l[u],p.set(v,h),h+=v.length;return p}},s={arraySet:function(l,u,f,c,h){for(var v=0;v<c;v++)l[h+v]=u[f+v]},flattenChunks:function(l){return[].concat.apply([],l)}};a.setTyped=function(l){l?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,o)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,s))},a.setTyped(i)},{}],42:[function(r,n,a){var i=r("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var l=new i.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function f(c,h){if(h<65537&&(c.subarray&&s||!c.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(c,h));for(var v="",p=0;p<h;p++)v+=String.fromCharCode(c[p]);return v}l[254]=l[254]=1,a.string2buf=function(c){var h,v,p,y,w,d=c.length,g=0;for(y=0;y<d;y++)(64512&(v=c.charCodeAt(y)))==55296&&y+1<d&&(64512&(p=c.charCodeAt(y+1)))==56320&&(v=65536+(v-55296<<10)+(p-56320),y++),g+=v<128?1:v<2048?2:v<65536?3:4;for(h=new i.Buf8(g),y=w=0;w<g;y++)(64512&(v=c.charCodeAt(y)))==55296&&y+1<d&&(64512&(p=c.charCodeAt(y+1)))==56320&&(v=65536+(v-55296<<10)+(p-56320),y++),v<128?h[w++]=v:(v<2048?h[w++]=192|v>>>6:(v<65536?h[w++]=224|v>>>12:(h[w++]=240|v>>>18,h[w++]=128|v>>>12&63),h[w++]=128|v>>>6&63),h[w++]=128|63&v);return h},a.buf2binstring=function(c){return f(c,c.length)},a.binstring2buf=function(c){for(var h=new i.Buf8(c.length),v=0,p=h.length;v<p;v++)h[v]=c.charCodeAt(v);return h},a.buf2string=function(c,h){var v,p,y,w,d=h||c.length,g=new Array(2*d);for(v=p=0;v<d;)if((y=c[v++])<128)g[p++]=y;else if(4<(w=l[y]))g[p++]=65533,v+=w-1;else{for(y&=w===2?31:w===3?15:7;1<w&&v<d;)y=y<<6|63&c[v++],w--;1<w?g[p++]=65533:y<65536?g[p++]=y:(y-=65536,g[p++]=55296|y>>10&1023,g[p++]=56320|1023&y)}return f(g,p)},a.utf8border=function(c,h){var v;for((h=h||c.length)>c.length&&(h=c.length),v=h-1;0<=v&&(192&c[v])==128;)v--;return v<0||v===0?h:v+l[c[v]]>h?v:h}},{"./common":41}],43:[function(r,n,a){n.exports=function(i,o,s,l){for(var u=65535&i|0,f=i>>>16&65535|0,c=0;s!==0;){for(s-=c=2e3<s?2e3:s;f=f+(u=u+o[l++]|0)|0,--c;);u%=65521,f%=65521}return u|f<<16|0}},{}],44:[function(r,n,a){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,n,a){var i=function(){for(var o,s=[],l=0;l<256;l++){o=l;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;s[l]=o}return s}();n.exports=function(o,s,l,u){var f=i,c=u+l;o^=-1;for(var h=u;h<c;h++)o=o>>>8^f[255&(o^s[h])];return-1^o}},{}],46:[function(r,n,a){var i,o=r("../utils/common"),s=r("./trees"),l=r("./adler32"),u=r("./crc32"),f=r("./messages"),c=0,h=4,v=0,p=-2,y=-1,w=4,d=2,g=8,m=9,b=286,E=30,S=19,C=2*b+1,T=15,_=3,P=258,F=P+_+1,k=42,R=113,x=1,W=2,O=3,M=4;function K(D,j){return D.msg=f[j],j}function G(D){return(D<<1)-(4<D?9:0)}function H(D){for(var j=D.length;0<=--j;)D[j]=0}function A(D){var j=D.state,q=j.pending;q>D.avail_out&&(q=D.avail_out),q!==0&&(o.arraySet(D.output,j.pending_buf,j.pending_out,q,D.next_out),D.next_out+=q,j.pending_out+=q,D.total_out+=q,D.avail_out-=q,j.pending-=q,j.pending===0&&(j.pending_out=0))}function z(D,j){s._tr_flush_block(D,0<=D.block_start?D.block_start:-1,D.strstart-D.block_start,j),D.block_start=D.strstart,A(D.strm)}function $(D,j){D.pending_buf[D.pending++]=j}function I(D,j){D.pending_buf[D.pending++]=j>>>8&255,D.pending_buf[D.pending++]=255&j}function V(D,j){var q,L,B=D.max_chain_length,Z=D.strstart,ne=D.prev_length,se=D.nice_match,ee=D.strstart>D.w_size-F?D.strstart-(D.w_size-F):0,J=D.window,N=D.w_mask,X=D.prev,re=D.strstart+P,le=J[Z+ne-1],ie=J[Z+ne];D.prev_length>=D.good_match&&(B>>=2),se>D.lookahead&&(se=D.lookahead);do if(J[(q=j)+ne]===ie&&J[q+ne-1]===le&&J[q]===J[Z]&&J[++q]===J[Z+1]){Z+=2,q++;do;while(J[++Z]===J[++q]&&J[++Z]===J[++q]&&J[++Z]===J[++q]&&J[++Z]===J[++q]&&J[++Z]===J[++q]&&J[++Z]===J[++q]&&J[++Z]===J[++q]&&J[++Z]===J[++q]&&Z<re);if(L=P-(re-Z),Z=re-P,ne<L){if(D.match_start=j,se<=(ne=L))break;le=J[Z+ne-1],ie=J[Z+ne]}}while((j=X[j&N])>ee&&--B!=0);return ne<=D.lookahead?ne:D.lookahead}function Y(D){var j,q,L,B,Z,ne,se,ee,J,N,X=D.w_size;do{if(B=D.window_size-D.lookahead-D.strstart,D.strstart>=X+(X-F)){for(o.arraySet(D.window,D.window,X,X,0),D.match_start-=X,D.strstart-=X,D.block_start-=X,j=q=D.hash_size;L=D.head[--j],D.head[j]=X<=L?L-X:0,--q;);for(j=q=X;L=D.prev[--j],D.prev[j]=X<=L?L-X:0,--q;);B+=X}if(D.strm.avail_in===0)break;if(ne=D.strm,se=D.window,ee=D.strstart+D.lookahead,J=B,N=void 0,N=ne.avail_in,J<N&&(N=J),q=N===0?0:(ne.avail_in-=N,o.arraySet(se,ne.input,ne.next_in,N,ee),ne.state.wrap===1?ne.adler=l(ne.adler,se,N,ee):ne.state.wrap===2&&(ne.adler=u(ne.adler,se,N,ee)),ne.next_in+=N,ne.total_in+=N,N),D.lookahead+=q,D.lookahead+D.insert>=_)for(Z=D.strstart-D.insert,D.ins_h=D.window[Z],D.ins_h=(D.ins_h<<D.hash_shift^D.window[Z+1])&D.hash_mask;D.insert&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[Z+_-1])&D.hash_mask,D.prev[Z&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=Z,Z++,D.insert--,!(D.lookahead+D.insert<_)););}while(D.lookahead<F&&D.strm.avail_in!==0)}function U(D,j){for(var q,L;;){if(D.lookahead<F){if(Y(D),D.lookahead<F&&j===c)return x;if(D.lookahead===0)break}if(q=0,D.lookahead>=_&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+_-1])&D.hash_mask,q=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),q!==0&&D.strstart-q<=D.w_size-F&&(D.match_length=V(D,q)),D.match_length>=_)if(L=s._tr_tally(D,D.strstart-D.match_start,D.match_length-_),D.lookahead-=D.match_length,D.match_length<=D.max_lazy_match&&D.lookahead>=_){for(D.match_length--;D.strstart++,D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+_-1])&D.hash_mask,q=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart,--D.match_length!=0;);D.strstart++}else D.strstart+=D.match_length,D.match_length=0,D.ins_h=D.window[D.strstart],D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+1])&D.hash_mask;else L=s._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++;if(L&&(z(D,!1),D.strm.avail_out===0))return x}return D.insert=D.strstart<_-1?D.strstart:_-1,j===h?(z(D,!0),D.strm.avail_out===0?O:M):D.last_lit&&(z(D,!1),D.strm.avail_out===0)?x:W}function Q(D,j){for(var q,L,B;;){if(D.lookahead<F){if(Y(D),D.lookahead<F&&j===c)return x;if(D.lookahead===0)break}if(q=0,D.lookahead>=_&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+_-1])&D.hash_mask,q=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),D.prev_length=D.match_length,D.prev_match=D.match_start,D.match_length=_-1,q!==0&&D.prev_length<D.max_lazy_match&&D.strstart-q<=D.w_size-F&&(D.match_length=V(D,q),D.match_length<=5&&(D.strategy===1||D.match_length===_&&4096<D.strstart-D.match_start)&&(D.match_length=_-1)),D.prev_length>=_&&D.match_length<=D.prev_length){for(B=D.strstart+D.lookahead-_,L=s._tr_tally(D,D.strstart-1-D.prev_match,D.prev_length-_),D.lookahead-=D.prev_length-1,D.prev_length-=2;++D.strstart<=B&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+_-1])&D.hash_mask,q=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),--D.prev_length!=0;);if(D.match_available=0,D.match_length=_-1,D.strstart++,L&&(z(D,!1),D.strm.avail_out===0))return x}else if(D.match_available){if((L=s._tr_tally(D,0,D.window[D.strstart-1]))&&z(D,!1),D.strstart++,D.lookahead--,D.strm.avail_out===0)return x}else D.match_available=1,D.strstart++,D.lookahead--}return D.match_available&&(L=s._tr_tally(D,0,D.window[D.strstart-1]),D.match_available=0),D.insert=D.strstart<_-1?D.strstart:_-1,j===h?(z(D,!0),D.strm.avail_out===0?O:M):D.last_lit&&(z(D,!1),D.strm.avail_out===0)?x:W}function te(D,j,q,L,B){this.good_length=D,this.max_lazy=j,this.nice_length=q,this.max_chain=L,this.func=B}function ae(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*C),this.dyn_dtree=new o.Buf16(2*(2*E+1)),this.bl_tree=new o.Buf16(2*(2*S+1)),H(this.dyn_ltree),H(this.dyn_dtree),H(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(T+1),this.heap=new o.Buf16(2*b+1),H(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*b+1),H(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function oe(D){var j;return D&&D.state?(D.total_in=D.total_out=0,D.data_type=d,(j=D.state).pending=0,j.pending_out=0,j.wrap<0&&(j.wrap=-j.wrap),j.status=j.wrap?k:R,D.adler=j.wrap===2?0:1,j.last_flush=c,s._tr_init(j),v):K(D,p)}function ue(D){var j=oe(D);return j===v&&function(q){q.window_size=2*q.w_size,H(q.head),q.max_lazy_match=i[q.level].max_lazy,q.good_match=i[q.level].good_length,q.nice_match=i[q.level].nice_length,q.max_chain_length=i[q.level].max_chain,q.strstart=0,q.block_start=0,q.lookahead=0,q.insert=0,q.match_length=q.prev_length=_-1,q.match_available=0,q.ins_h=0}(D.state),j}function de(D,j,q,L,B,Z){if(!D)return p;var ne=1;if(j===y&&(j=6),L<0?(ne=0,L=-L):15<L&&(ne=2,L-=16),B<1||m<B||q!==g||L<8||15<L||j<0||9<j||Z<0||w<Z)return K(D,p);L===8&&(L=9);var se=new ae;return(D.state=se).strm=D,se.wrap=ne,se.gzhead=null,se.w_bits=L,se.w_size=1<<se.w_bits,se.w_mask=se.w_size-1,se.hash_bits=B+7,se.hash_size=1<<se.hash_bits,se.hash_mask=se.hash_size-1,se.hash_shift=~~((se.hash_bits+_-1)/_),se.window=new o.Buf8(2*se.w_size),se.head=new o.Buf16(se.hash_size),se.prev=new o.Buf16(se.w_size),se.lit_bufsize=1<<B+6,se.pending_buf_size=4*se.lit_bufsize,se.pending_buf=new o.Buf8(se.pending_buf_size),se.d_buf=1*se.lit_bufsize,se.l_buf=3*se.lit_bufsize,se.level=j,se.strategy=Z,se.method=q,ue(D)}i=[new te(0,0,0,0,function(D,j){var q=65535;for(q>D.pending_buf_size-5&&(q=D.pending_buf_size-5);;){if(D.lookahead<=1){if(Y(D),D.lookahead===0&&j===c)return x;if(D.lookahead===0)break}D.strstart+=D.lookahead,D.lookahead=0;var L=D.block_start+q;if((D.strstart===0||D.strstart>=L)&&(D.lookahead=D.strstart-L,D.strstart=L,z(D,!1),D.strm.avail_out===0)||D.strstart-D.block_start>=D.w_size-F&&(z(D,!1),D.strm.avail_out===0))return x}return D.insert=0,j===h?(z(D,!0),D.strm.avail_out===0?O:M):(D.strstart>D.block_start&&(z(D,!1),D.strm.avail_out),x)}),new te(4,4,8,4,U),new te(4,5,16,8,U),new te(4,6,32,32,U),new te(4,4,16,16,Q),new te(8,16,32,32,Q),new te(8,16,128,128,Q),new te(8,32,128,256,Q),new te(32,128,258,1024,Q),new te(32,258,258,4096,Q)],a.deflateInit=function(D,j){return de(D,j,g,15,8,0)},a.deflateInit2=de,a.deflateReset=ue,a.deflateResetKeep=oe,a.deflateSetHeader=function(D,j){return D&&D.state?D.state.wrap!==2?p:(D.state.gzhead=j,v):p},a.deflate=function(D,j){var q,L,B,Z;if(!D||!D.state||5<j||j<0)return D?K(D,p):p;if(L=D.state,!D.output||!D.input&&D.avail_in!==0||L.status===666&&j!==h)return K(D,D.avail_out===0?-5:p);if(L.strm=D,q=L.last_flush,L.last_flush=j,L.status===k)if(L.wrap===2)D.adler=0,$(L,31),$(L,139),$(L,8),L.gzhead?($(L,(L.gzhead.text?1:0)+(L.gzhead.hcrc?2:0)+(L.gzhead.extra?4:0)+(L.gzhead.name?8:0)+(L.gzhead.comment?16:0)),$(L,255&L.gzhead.time),$(L,L.gzhead.time>>8&255),$(L,L.gzhead.time>>16&255),$(L,L.gzhead.time>>24&255),$(L,L.level===9?2:2<=L.strategy||L.level<2?4:0),$(L,255&L.gzhead.os),L.gzhead.extra&&L.gzhead.extra.length&&($(L,255&L.gzhead.extra.length),$(L,L.gzhead.extra.length>>8&255)),L.gzhead.hcrc&&(D.adler=u(D.adler,L.pending_buf,L.pending,0)),L.gzindex=0,L.status=69):($(L,0),$(L,0),$(L,0),$(L,0),$(L,0),$(L,L.level===9?2:2<=L.strategy||L.level<2?4:0),$(L,3),L.status=R);else{var ne=g+(L.w_bits-8<<4)<<8;ne|=(2<=L.strategy||L.level<2?0:L.level<6?1:L.level===6?2:3)<<6,L.strstart!==0&&(ne|=32),ne+=31-ne%31,L.status=R,I(L,ne),L.strstart!==0&&(I(L,D.adler>>>16),I(L,65535&D.adler)),D.adler=1}if(L.status===69)if(L.gzhead.extra){for(B=L.pending;L.gzindex<(65535&L.gzhead.extra.length)&&(L.pending!==L.pending_buf_size||(L.gzhead.hcrc&&L.pending>B&&(D.adler=u(D.adler,L.pending_buf,L.pending-B,B)),A(D),B=L.pending,L.pending!==L.pending_buf_size));)$(L,255&L.gzhead.extra[L.gzindex]),L.gzindex++;L.gzhead.hcrc&&L.pending>B&&(D.adler=u(D.adler,L.pending_buf,L.pending-B,B)),L.gzindex===L.gzhead.extra.length&&(L.gzindex=0,L.status=73)}else L.status=73;if(L.status===73)if(L.gzhead.name){B=L.pending;do{if(L.pending===L.pending_buf_size&&(L.gzhead.hcrc&&L.pending>B&&(D.adler=u(D.adler,L.pending_buf,L.pending-B,B)),A(D),B=L.pending,L.pending===L.pending_buf_size)){Z=1;break}Z=L.gzindex<L.gzhead.name.length?255&L.gzhead.name.charCodeAt(L.gzindex++):0,$(L,Z)}while(Z!==0);L.gzhead.hcrc&&L.pending>B&&(D.adler=u(D.adler,L.pending_buf,L.pending-B,B)),Z===0&&(L.gzindex=0,L.status=91)}else L.status=91;if(L.status===91)if(L.gzhead.comment){B=L.pending;do{if(L.pending===L.pending_buf_size&&(L.gzhead.hcrc&&L.pending>B&&(D.adler=u(D.adler,L.pending_buf,L.pending-B,B)),A(D),B=L.pending,L.pending===L.pending_buf_size)){Z=1;break}Z=L.gzindex<L.gzhead.comment.length?255&L.gzhead.comment.charCodeAt(L.gzindex++):0,$(L,Z)}while(Z!==0);L.gzhead.hcrc&&L.pending>B&&(D.adler=u(D.adler,L.pending_buf,L.pending-B,B)),Z===0&&(L.status=103)}else L.status=103;if(L.status===103&&(L.gzhead.hcrc?(L.pending+2>L.pending_buf_size&&A(D),L.pending+2<=L.pending_buf_size&&($(L,255&D.adler),$(L,D.adler>>8&255),D.adler=0,L.status=R)):L.status=R),L.pending!==0){if(A(D),D.avail_out===0)return L.last_flush=-1,v}else if(D.avail_in===0&&G(j)<=G(q)&&j!==h)return K(D,-5);if(L.status===666&&D.avail_in!==0)return K(D,-5);if(D.avail_in!==0||L.lookahead!==0||j!==c&&L.status!==666){var se=L.strategy===2?function(ee,J){for(var N;;){if(ee.lookahead===0&&(Y(ee),ee.lookahead===0)){if(J===c)return x;break}if(ee.match_length=0,N=s._tr_tally(ee,0,ee.window[ee.strstart]),ee.lookahead--,ee.strstart++,N&&(z(ee,!1),ee.strm.avail_out===0))return x}return ee.insert=0,J===h?(z(ee,!0),ee.strm.avail_out===0?O:M):ee.last_lit&&(z(ee,!1),ee.strm.avail_out===0)?x:W}(L,j):L.strategy===3?function(ee,J){for(var N,X,re,le,ie=ee.window;;){if(ee.lookahead<=P){if(Y(ee),ee.lookahead<=P&&J===c)return x;if(ee.lookahead===0)break}if(ee.match_length=0,ee.lookahead>=_&&0<ee.strstart&&(X=ie[re=ee.strstart-1])===ie[++re]&&X===ie[++re]&&X===ie[++re]){le=ee.strstart+P;do;while(X===ie[++re]&&X===ie[++re]&&X===ie[++re]&&X===ie[++re]&&X===ie[++re]&&X===ie[++re]&&X===ie[++re]&&X===ie[++re]&&re<le);ee.match_length=P-(le-re),ee.match_length>ee.lookahead&&(ee.match_length=ee.lookahead)}if(ee.match_length>=_?(N=s._tr_tally(ee,1,ee.match_length-_),ee.lookahead-=ee.match_length,ee.strstart+=ee.match_length,ee.match_length=0):(N=s._tr_tally(ee,0,ee.window[ee.strstart]),ee.lookahead--,ee.strstart++),N&&(z(ee,!1),ee.strm.avail_out===0))return x}return ee.insert=0,J===h?(z(ee,!0),ee.strm.avail_out===0?O:M):ee.last_lit&&(z(ee,!1),ee.strm.avail_out===0)?x:W}(L,j):i[L.level].func(L,j);if(se!==O&&se!==M||(L.status=666),se===x||se===O)return D.avail_out===0&&(L.last_flush=-1),v;if(se===W&&(j===1?s._tr_align(L):j!==5&&(s._tr_stored_block(L,0,0,!1),j===3&&(H(L.head),L.lookahead===0&&(L.strstart=0,L.block_start=0,L.insert=0))),A(D),D.avail_out===0))return L.last_flush=-1,v}return j!==h?v:L.wrap<=0?1:(L.wrap===2?($(L,255&D.adler),$(L,D.adler>>8&255),$(L,D.adler>>16&255),$(L,D.adler>>24&255),$(L,255&D.total_in),$(L,D.total_in>>8&255),$(L,D.total_in>>16&255),$(L,D.total_in>>24&255)):(I(L,D.adler>>>16),I(L,65535&D.adler)),A(D),0<L.wrap&&(L.wrap=-L.wrap),L.pending!==0?v:1)},a.deflateEnd=function(D){var j;return D&&D.state?(j=D.state.status)!==k&&j!==69&&j!==73&&j!==91&&j!==103&&j!==R&&j!==666?K(D,p):(D.state=null,j===R?K(D,-3):v):p},a.deflateSetDictionary=function(D,j){var q,L,B,Z,ne,se,ee,J,N=j.length;if(!D||!D.state||(Z=(q=D.state).wrap)===2||Z===1&&q.status!==k||q.lookahead)return p;for(Z===1&&(D.adler=l(D.adler,j,N,0)),q.wrap=0,N>=q.w_size&&(Z===0&&(H(q.head),q.strstart=0,q.block_start=0,q.insert=0),J=new o.Buf8(q.w_size),o.arraySet(J,j,N-q.w_size,q.w_size,0),j=J,N=q.w_size),ne=D.avail_in,se=D.next_in,ee=D.input,D.avail_in=N,D.next_in=0,D.input=j,Y(q);q.lookahead>=_;){for(L=q.strstart,B=q.lookahead-(_-1);q.ins_h=(q.ins_h<<q.hash_shift^q.window[L+_-1])&q.hash_mask,q.prev[L&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=L,L++,--B;);q.strstart=L,q.lookahead=_-1,Y(q)}return q.strstart+=q.lookahead,q.block_start=q.strstart,q.insert=q.lookahead,q.lookahead=0,q.match_length=q.prev_length=_-1,q.match_available=0,D.next_in=se,D.input=ee,D.avail_in=ne,q.wrap=Z,v},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,n,a){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,n,a){n.exports=function(i,o){var s,l,u,f,c,h,v,p,y,w,d,g,m,b,E,S,C,T,_,P,F,k,R,x,W;s=i.state,l=i.next_in,x=i.input,u=l+(i.avail_in-5),f=i.next_out,W=i.output,c=f-(o-i.avail_out),h=f+(i.avail_out-257),v=s.dmax,p=s.wsize,y=s.whave,w=s.wnext,d=s.window,g=s.hold,m=s.bits,b=s.lencode,E=s.distcode,S=(1<<s.lenbits)-1,C=(1<<s.distbits)-1;e:do{m<15&&(g+=x[l++]<<m,m+=8,g+=x[l++]<<m,m+=8),T=b[g&S];t:for(;;){if(g>>>=_=T>>>24,m-=_,(_=T>>>16&255)===0)W[f++]=65535&T;else{if(!(16&_)){if(!(64&_)){T=b[(65535&T)+(g&(1<<_)-1)];continue t}if(32&_){s.mode=12;break e}i.msg="invalid literal/length code",s.mode=30;break e}P=65535&T,(_&=15)&&(m<_&&(g+=x[l++]<<m,m+=8),P+=g&(1<<_)-1,g>>>=_,m-=_),m<15&&(g+=x[l++]<<m,m+=8,g+=x[l++]<<m,m+=8),T=E[g&C];r:for(;;){if(g>>>=_=T>>>24,m-=_,!(16&(_=T>>>16&255))){if(!(64&_)){T=E[(65535&T)+(g&(1<<_)-1)];continue r}i.msg="invalid distance code",s.mode=30;break e}if(F=65535&T,m<(_&=15)&&(g+=x[l++]<<m,(m+=8)<_&&(g+=x[l++]<<m,m+=8)),v<(F+=g&(1<<_)-1)){i.msg="invalid distance too far back",s.mode=30;break e}if(g>>>=_,m-=_,(_=f-c)<F){if(y<(_=F-_)&&s.sane){i.msg="invalid distance too far back",s.mode=30;break e}if(R=d,(k=0)===w){if(k+=p-_,_<P){for(P-=_;W[f++]=d[k++],--_;);k=f-F,R=W}}else if(w<_){if(k+=p+w-_,(_-=w)<P){for(P-=_;W[f++]=d[k++],--_;);if(k=0,w<P){for(P-=_=w;W[f++]=d[k++],--_;);k=f-F,R=W}}}else if(k+=w-_,_<P){for(P-=_;W[f++]=d[k++],--_;);k=f-F,R=W}for(;2<P;)W[f++]=R[k++],W[f++]=R[k++],W[f++]=R[k++],P-=3;P&&(W[f++]=R[k++],1<P&&(W[f++]=R[k++]))}else{for(k=f-F;W[f++]=W[k++],W[f++]=W[k++],W[f++]=W[k++],2<(P-=3););P&&(W[f++]=W[k++],1<P&&(W[f++]=W[k++]))}break}}break}}while(l<u&&f<h);l-=P=m>>3,g&=(1<<(m-=P<<3))-1,i.next_in=l,i.next_out=f,i.avail_in=l<u?u-l+5:5-(l-u),i.avail_out=f<h?h-f+257:257-(f-h),s.hold=g,s.bits=m}},{}],49:[function(r,n,a){var i=r("../utils/common"),o=r("./adler32"),s=r("./crc32"),l=r("./inffast"),u=r("./inftrees"),f=1,c=2,h=0,v=-2,p=1,y=852,w=592;function d(k){return(k>>>24&255)+(k>>>8&65280)+((65280&k)<<8)+((255&k)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function m(k){var R;return k&&k.state?(R=k.state,k.total_in=k.total_out=R.total=0,k.msg="",R.wrap&&(k.adler=1&R.wrap),R.mode=p,R.last=0,R.havedict=0,R.dmax=32768,R.head=null,R.hold=0,R.bits=0,R.lencode=R.lendyn=new i.Buf32(y),R.distcode=R.distdyn=new i.Buf32(w),R.sane=1,R.back=-1,h):v}function b(k){var R;return k&&k.state?((R=k.state).wsize=0,R.whave=0,R.wnext=0,m(k)):v}function E(k,R){var x,W;return k&&k.state?(W=k.state,R<0?(x=0,R=-R):(x=1+(R>>4),R<48&&(R&=15)),R&&(R<8||15<R)?v:(W.window!==null&&W.wbits!==R&&(W.window=null),W.wrap=x,W.wbits=R,b(k))):v}function S(k,R){var x,W;return k?(W=new g,(k.state=W).window=null,(x=E(k,R))!==h&&(k.state=null),x):v}var C,T,_=!0;function P(k){if(_){var R;for(C=new i.Buf32(512),T=new i.Buf32(32),R=0;R<144;)k.lens[R++]=8;for(;R<256;)k.lens[R++]=9;for(;R<280;)k.lens[R++]=7;for(;R<288;)k.lens[R++]=8;for(u(f,k.lens,0,288,C,0,k.work,{bits:9}),R=0;R<32;)k.lens[R++]=5;u(c,k.lens,0,32,T,0,k.work,{bits:5}),_=!1}k.lencode=C,k.lenbits=9,k.distcode=T,k.distbits=5}function F(k,R,x,W){var O,M=k.state;return M.window===null&&(M.wsize=1<<M.wbits,M.wnext=0,M.whave=0,M.window=new i.Buf8(M.wsize)),W>=M.wsize?(i.arraySet(M.window,R,x-M.wsize,M.wsize,0),M.wnext=0,M.whave=M.wsize):(W<(O=M.wsize-M.wnext)&&(O=W),i.arraySet(M.window,R,x-W,O,M.wnext),(W-=O)?(i.arraySet(M.window,R,x-W,W,0),M.wnext=W,M.whave=M.wsize):(M.wnext+=O,M.wnext===M.wsize&&(M.wnext=0),M.whave<M.wsize&&(M.whave+=O))),0}a.inflateReset=b,a.inflateReset2=E,a.inflateResetKeep=m,a.inflateInit=function(k){return S(k,15)},a.inflateInit2=S,a.inflate=function(k,R){var x,W,O,M,K,G,H,A,z,$,I,V,Y,U,Q,te,ae,oe,ue,de,D,j,q,L,B=0,Z=new i.Buf8(4),ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!k||!k.state||!k.output||!k.input&&k.avail_in!==0)return v;(x=k.state).mode===12&&(x.mode=13),K=k.next_out,O=k.output,H=k.avail_out,M=k.next_in,W=k.input,G=k.avail_in,A=x.hold,z=x.bits,$=G,I=H,j=h;e:for(;;)switch(x.mode){case p:if(x.wrap===0){x.mode=13;break}for(;z<16;){if(G===0)break e;G--,A+=W[M++]<<z,z+=8}if(2&x.wrap&&A===35615){Z[x.check=0]=255&A,Z[1]=A>>>8&255,x.check=s(x.check,Z,2,0),z=A=0,x.mode=2;break}if(x.flags=0,x.head&&(x.head.done=!1),!(1&x.wrap)||(((255&A)<<8)+(A>>8))%31){k.msg="incorrect header check",x.mode=30;break}if((15&A)!=8){k.msg="unknown compression method",x.mode=30;break}if(z-=4,D=8+(15&(A>>>=4)),x.wbits===0)x.wbits=D;else if(D>x.wbits){k.msg="invalid window size",x.mode=30;break}x.dmax=1<<D,k.adler=x.check=1,x.mode=512&A?10:12,z=A=0;break;case 2:for(;z<16;){if(G===0)break e;G--,A+=W[M++]<<z,z+=8}if(x.flags=A,(255&x.flags)!=8){k.msg="unknown compression method",x.mode=30;break}if(57344&x.flags){k.msg="unknown header flags set",x.mode=30;break}x.head&&(x.head.text=A>>8&1),512&x.flags&&(Z[0]=255&A,Z[1]=A>>>8&255,x.check=s(x.check,Z,2,0)),z=A=0,x.mode=3;case 3:for(;z<32;){if(G===0)break e;G--,A+=W[M++]<<z,z+=8}x.head&&(x.head.time=A),512&x.flags&&(Z[0]=255&A,Z[1]=A>>>8&255,Z[2]=A>>>16&255,Z[3]=A>>>24&255,x.check=s(x.check,Z,4,0)),z=A=0,x.mode=4;case 4:for(;z<16;){if(G===0)break e;G--,A+=W[M++]<<z,z+=8}x.head&&(x.head.xflags=255&A,x.head.os=A>>8),512&x.flags&&(Z[0]=255&A,Z[1]=A>>>8&255,x.check=s(x.check,Z,2,0)),z=A=0,x.mode=5;case 5:if(1024&x.flags){for(;z<16;){if(G===0)break e;G--,A+=W[M++]<<z,z+=8}x.length=A,x.head&&(x.head.extra_len=A),512&x.flags&&(Z[0]=255&A,Z[1]=A>>>8&255,x.check=s(x.check,Z,2,0)),z=A=0}else x.head&&(x.head.extra=null);x.mode=6;case 6:if(1024&x.flags&&(G<(V=x.length)&&(V=G),V&&(x.head&&(D=x.head.extra_len-x.length,x.head.extra||(x.head.extra=new Array(x.head.extra_len)),i.arraySet(x.head.extra,W,M,V,D)),512&x.flags&&(x.check=s(x.check,W,V,M)),G-=V,M+=V,x.length-=V),x.length))break e;x.length=0,x.mode=7;case 7:if(2048&x.flags){if(G===0)break e;for(V=0;D=W[M+V++],x.head&&D&&x.length<65536&&(x.head.name+=String.fromCharCode(D)),D&&V<G;);if(512&x.flags&&(x.check=s(x.check,W,V,M)),G-=V,M+=V,D)break e}else x.head&&(x.head.name=null);x.length=0,x.mode=8;case 8:if(4096&x.flags){if(G===0)break e;for(V=0;D=W[M+V++],x.head&&D&&x.length<65536&&(x.head.comment+=String.fromCharCode(D)),D&&V<G;);if(512&x.flags&&(x.check=s(x.check,W,V,M)),G-=V,M+=V,D)break e}else x.head&&(x.head.comment=null);x.mode=9;case 9:if(512&x.flags){for(;z<16;){if(G===0)break e;G--,A+=W[M++]<<z,z+=8}if(A!==(65535&x.check)){k.msg="header crc mismatch",x.mode=30;break}z=A=0}x.head&&(x.head.hcrc=x.flags>>9&1,x.head.done=!0),k.adler=x.check=0,x.mode=12;break;case 10:for(;z<32;){if(G===0)break e;G--,A+=W[M++]<<z,z+=8}k.adler=x.check=d(A),z=A=0,x.mode=11;case 11:if(x.havedict===0)return k.next_out=K,k.avail_out=H,k.next_in=M,k.avail_in=G,x.hold=A,x.bits=z,2;k.adler=x.check=1,x.mode=12;case 12:if(R===5||R===6)break e;case 13:if(x.last){A>>>=7&z,z-=7&z,x.mode=27;break}for(;z<3;){if(G===0)break e;G--,A+=W[M++]<<z,z+=8}switch(x.last=1&A,z-=1,3&(A>>>=1)){case 0:x.mode=14;break;case 1:if(P(x),x.mode=20,R!==6)break;A>>>=2,z-=2;break e;case 2:x.mode=17;break;case 3:k.msg="invalid block type",x.mode=30}A>>>=2,z-=2;break;case 14:for(A>>>=7&z,z-=7&z;z<32;){if(G===0)break e;G--,A+=W[M++]<<z,z+=8}if((65535&A)!=(A>>>16^65535)){k.msg="invalid stored block lengths",x.mode=30;break}if(x.length=65535&A,z=A=0,x.mode=15,R===6)break e;case 15:x.mode=16;case 16:if(V=x.length){if(G<V&&(V=G),H<V&&(V=H),V===0)break e;i.arraySet(O,W,M,V,K),G-=V,M+=V,H-=V,K+=V,x.length-=V;break}x.mode=12;break;case 17:for(;z<14;){if(G===0)break e;G--,A+=W[M++]<<z,z+=8}if(x.nlen=257+(31&A),A>>>=5,z-=5,x.ndist=1+(31&A),A>>>=5,z-=5,x.ncode=4+(15&A),A>>>=4,z-=4,286<x.nlen||30<x.ndist){k.msg="too many length or distance symbols",x.mode=30;break}x.have=0,x.mode=18;case 18:for(;x.have<x.ncode;){for(;z<3;){if(G===0)break e;G--,A+=W[M++]<<z,z+=8}x.lens[ne[x.have++]]=7&A,A>>>=3,z-=3}for(;x.have<19;)x.lens[ne[x.have++]]=0;if(x.lencode=x.lendyn,x.lenbits=7,q={bits:x.lenbits},j=u(0,x.lens,0,19,x.lencode,0,x.work,q),x.lenbits=q.bits,j){k.msg="invalid code lengths set",x.mode=30;break}x.have=0,x.mode=19;case 19:for(;x.have<x.nlen+x.ndist;){for(;te=(B=x.lencode[A&(1<<x.lenbits)-1])>>>16&255,ae=65535&B,!((Q=B>>>24)<=z);){if(G===0)break e;G--,A+=W[M++]<<z,z+=8}if(ae<16)A>>>=Q,z-=Q,x.lens[x.have++]=ae;else{if(ae===16){for(L=Q+2;z<L;){if(G===0)break e;G--,A+=W[M++]<<z,z+=8}if(A>>>=Q,z-=Q,x.have===0){k.msg="invalid bit length repeat",x.mode=30;break}D=x.lens[x.have-1],V=3+(3&A),A>>>=2,z-=2}else if(ae===17){for(L=Q+3;z<L;){if(G===0)break e;G--,A+=W[M++]<<z,z+=8}z-=Q,D=0,V=3+(7&(A>>>=Q)),A>>>=3,z-=3}else{for(L=Q+7;z<L;){if(G===0)break e;G--,A+=W[M++]<<z,z+=8}z-=Q,D=0,V=11+(127&(A>>>=Q)),A>>>=7,z-=7}if(x.have+V>x.nlen+x.ndist){k.msg="invalid bit length repeat",x.mode=30;break}for(;V--;)x.lens[x.have++]=D}}if(x.mode===30)break;if(x.lens[256]===0){k.msg="invalid code -- missing end-of-block",x.mode=30;break}if(x.lenbits=9,q={bits:x.lenbits},j=u(f,x.lens,0,x.nlen,x.lencode,0,x.work,q),x.lenbits=q.bits,j){k.msg="invalid literal/lengths set",x.mode=30;break}if(x.distbits=6,x.distcode=x.distdyn,q={bits:x.distbits},j=u(c,x.lens,x.nlen,x.ndist,x.distcode,0,x.work,q),x.distbits=q.bits,j){k.msg="invalid distances set",x.mode=30;break}if(x.mode=20,R===6)break e;case 20:x.mode=21;case 21:if(6<=G&&258<=H){k.next_out=K,k.avail_out=H,k.next_in=M,k.avail_in=G,x.hold=A,x.bits=z,l(k,I),K=k.next_out,O=k.output,H=k.avail_out,M=k.next_in,W=k.input,G=k.avail_in,A=x.hold,z=x.bits,x.mode===12&&(x.back=-1);break}for(x.back=0;te=(B=x.lencode[A&(1<<x.lenbits)-1])>>>16&255,ae=65535&B,!((Q=B>>>24)<=z);){if(G===0)break e;G--,A+=W[M++]<<z,z+=8}if(te&&!(240&te)){for(oe=Q,ue=te,de=ae;te=(B=x.lencode[de+((A&(1<<oe+ue)-1)>>oe)])>>>16&255,ae=65535&B,!(oe+(Q=B>>>24)<=z);){if(G===0)break e;G--,A+=W[M++]<<z,z+=8}A>>>=oe,z-=oe,x.back+=oe}if(A>>>=Q,z-=Q,x.back+=Q,x.length=ae,te===0){x.mode=26;break}if(32&te){x.back=-1,x.mode=12;break}if(64&te){k.msg="invalid literal/length code",x.mode=30;break}x.extra=15&te,x.mode=22;case 22:if(x.extra){for(L=x.extra;z<L;){if(G===0)break e;G--,A+=W[M++]<<z,z+=8}x.length+=A&(1<<x.extra)-1,A>>>=x.extra,z-=x.extra,x.back+=x.extra}x.was=x.length,x.mode=23;case 23:for(;te=(B=x.distcode[A&(1<<x.distbits)-1])>>>16&255,ae=65535&B,!((Q=B>>>24)<=z);){if(G===0)break e;G--,A+=W[M++]<<z,z+=8}if(!(240&te)){for(oe=Q,ue=te,de=ae;te=(B=x.distcode[de+((A&(1<<oe+ue)-1)>>oe)])>>>16&255,ae=65535&B,!(oe+(Q=B>>>24)<=z);){if(G===0)break e;G--,A+=W[M++]<<z,z+=8}A>>>=oe,z-=oe,x.back+=oe}if(A>>>=Q,z-=Q,x.back+=Q,64&te){k.msg="invalid distance code",x.mode=30;break}x.offset=ae,x.extra=15&te,x.mode=24;case 24:if(x.extra){for(L=x.extra;z<L;){if(G===0)break e;G--,A+=W[M++]<<z,z+=8}x.offset+=A&(1<<x.extra)-1,A>>>=x.extra,z-=x.extra,x.back+=x.extra}if(x.offset>x.dmax){k.msg="invalid distance too far back",x.mode=30;break}x.mode=25;case 25:if(H===0)break e;if(V=I-H,x.offset>V){if((V=x.offset-V)>x.whave&&x.sane){k.msg="invalid distance too far back",x.mode=30;break}Y=V>x.wnext?(V-=x.wnext,x.wsize-V):x.wnext-V,V>x.length&&(V=x.length),U=x.window}else U=O,Y=K-x.offset,V=x.length;for(H<V&&(V=H),H-=V,x.length-=V;O[K++]=U[Y++],--V;);x.length===0&&(x.mode=21);break;case 26:if(H===0)break e;O[K++]=x.length,H--,x.mode=21;break;case 27:if(x.wrap){for(;z<32;){if(G===0)break e;G--,A|=W[M++]<<z,z+=8}if(I-=H,k.total_out+=I,x.total+=I,I&&(k.adler=x.check=x.flags?s(x.check,O,I,K-I):o(x.check,O,I,K-I)),I=H,(x.flags?A:d(A))!==x.check){k.msg="incorrect data check",x.mode=30;break}z=A=0}x.mode=28;case 28:if(x.wrap&&x.flags){for(;z<32;){if(G===0)break e;G--,A+=W[M++]<<z,z+=8}if(A!==(4294967295&x.total)){k.msg="incorrect length check",x.mode=30;break}z=A=0}x.mode=29;case 29:j=1;break e;case 30:j=-3;break e;case 31:return-4;case 32:default:return v}return k.next_out=K,k.avail_out=H,k.next_in=M,k.avail_in=G,x.hold=A,x.bits=z,(x.wsize||I!==k.avail_out&&x.mode<30&&(x.mode<27||R!==4))&&F(k,k.output,k.next_out,I-k.avail_out)?(x.mode=31,-4):($-=k.avail_in,I-=k.avail_out,k.total_in+=$,k.total_out+=I,x.total+=I,x.wrap&&I&&(k.adler=x.check=x.flags?s(x.check,O,I,k.next_out-I):o(x.check,O,I,k.next_out-I)),k.data_type=x.bits+(x.last?64:0)+(x.mode===12?128:0)+(x.mode===20||x.mode===15?256:0),($==0&&I===0||R===4)&&j===h&&(j=-5),j)},a.inflateEnd=function(k){if(!k||!k.state)return v;var R=k.state;return R.window&&(R.window=null),k.state=null,h},a.inflateGetHeader=function(k,R){var x;return k&&k.state&&2&(x=k.state).wrap?((x.head=R).done=!1,h):v},a.inflateSetDictionary=function(k,R){var x,W=R.length;return k&&k.state?(x=k.state).wrap!==0&&x.mode!==11?v:x.mode===11&&o(1,R,W,0)!==x.check?-3:F(k,R,W,W)?(x.mode=31,-4):(x.havedict=1,h):v},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,n,a){var i=r("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(f,c,h,v,p,y,w,d){var g,m,b,E,S,C,T,_,P,F=d.bits,k=0,R=0,x=0,W=0,O=0,M=0,K=0,G=0,H=0,A=0,z=null,$=0,I=new i.Buf16(16),V=new i.Buf16(16),Y=null,U=0;for(k=0;k<=15;k++)I[k]=0;for(R=0;R<v;R++)I[c[h+R]]++;for(O=F,W=15;1<=W&&I[W]===0;W--);if(W<O&&(O=W),W===0)return p[y++]=20971520,p[y++]=20971520,d.bits=1,0;for(x=1;x<W&&I[x]===0;x++);for(O<x&&(O=x),k=G=1;k<=15;k++)if(G<<=1,(G-=I[k])<0)return-1;if(0<G&&(f===0||W!==1))return-1;for(V[1]=0,k=1;k<15;k++)V[k+1]=V[k]+I[k];for(R=0;R<v;R++)c[h+R]!==0&&(w[V[c[h+R]]++]=R);if(C=f===0?(z=Y=w,19):f===1?(z=o,$-=257,Y=s,U-=257,256):(z=l,Y=u,-1),k=x,S=y,K=R=A=0,b=-1,E=(H=1<<(M=O))-1,f===1&&852<H||f===2&&592<H)return 1;for(;;){for(T=k-K,P=w[R]<C?(_=0,w[R]):w[R]>C?(_=Y[U+w[R]],z[$+w[R]]):(_=96,0),g=1<<k-K,x=m=1<<M;p[S+(A>>K)+(m-=g)]=T<<24|_<<16|P|0,m!==0;);for(g=1<<k-1;A&g;)g>>=1;if(g!==0?(A&=g-1,A+=g):A=0,R++,--I[k]==0){if(k===W)break;k=c[h+w[R]]}if(O<k&&(A&E)!==b){for(K===0&&(K=O),S+=x,G=1<<(M=k-K);M+K<W&&!((G-=I[M+K])<=0);)M++,G<<=1;if(H+=1<<M,f===1&&852<H||f===2&&592<H)return 1;p[b=A&E]=O<<24|M<<16|S-y|0}}return A!==0&&(p[S+A]=k-K<<24|64<<16|0),d.bits=O,0}},{"../utils/common":41}],51:[function(r,n,a){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,n,a){var i=r("../utils/common"),o=0,s=1;function l(B){for(var Z=B.length;0<=--Z;)B[Z]=0}var u=0,f=29,c=256,h=c+1+f,v=30,p=19,y=2*h+1,w=15,d=16,g=7,m=256,b=16,E=17,S=18,C=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],T=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],_=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=new Array(2*(h+2));l(F);var k=new Array(2*v);l(k);var R=new Array(512);l(R);var x=new Array(256);l(x);var W=new Array(f);l(W);var O,M,K,G=new Array(v);function H(B,Z,ne,se,ee){this.static_tree=B,this.extra_bits=Z,this.extra_base=ne,this.elems=se,this.max_length=ee,this.has_stree=B&&B.length}function A(B,Z){this.dyn_tree=B,this.max_code=0,this.stat_desc=Z}function z(B){return B<256?R[B]:R[256+(B>>>7)]}function $(B,Z){B.pending_buf[B.pending++]=255&Z,B.pending_buf[B.pending++]=Z>>>8&255}function I(B,Z,ne){B.bi_valid>d-ne?(B.bi_buf|=Z<<B.bi_valid&65535,$(B,B.bi_buf),B.bi_buf=Z>>d-B.bi_valid,B.bi_valid+=ne-d):(B.bi_buf|=Z<<B.bi_valid&65535,B.bi_valid+=ne)}function V(B,Z,ne){I(B,ne[2*Z],ne[2*Z+1])}function Y(B,Z){for(var ne=0;ne|=1&B,B>>>=1,ne<<=1,0<--Z;);return ne>>>1}function U(B,Z,ne){var se,ee,J=new Array(w+1),N=0;for(se=1;se<=w;se++)J[se]=N=N+ne[se-1]<<1;for(ee=0;ee<=Z;ee++){var X=B[2*ee+1];X!==0&&(B[2*ee]=Y(J[X]++,X))}}function Q(B){var Z;for(Z=0;Z<h;Z++)B.dyn_ltree[2*Z]=0;for(Z=0;Z<v;Z++)B.dyn_dtree[2*Z]=0;for(Z=0;Z<p;Z++)B.bl_tree[2*Z]=0;B.dyn_ltree[2*m]=1,B.opt_len=B.static_len=0,B.last_lit=B.matches=0}function te(B){8<B.bi_valid?$(B,B.bi_buf):0<B.bi_valid&&(B.pending_buf[B.pending++]=B.bi_buf),B.bi_buf=0,B.bi_valid=0}function ae(B,Z,ne,se){var ee=2*Z,J=2*ne;return B[ee]<B[J]||B[ee]===B[J]&&se[Z]<=se[ne]}function oe(B,Z,ne){for(var se=B.heap[ne],ee=ne<<1;ee<=B.heap_len&&(ee<B.heap_len&&ae(Z,B.heap[ee+1],B.heap[ee],B.depth)&&ee++,!ae(Z,se,B.heap[ee],B.depth));)B.heap[ne]=B.heap[ee],ne=ee,ee<<=1;B.heap[ne]=se}function ue(B,Z,ne){var se,ee,J,N,X=0;if(B.last_lit!==0)for(;se=B.pending_buf[B.d_buf+2*X]<<8|B.pending_buf[B.d_buf+2*X+1],ee=B.pending_buf[B.l_buf+X],X++,se===0?V(B,ee,Z):(V(B,(J=x[ee])+c+1,Z),(N=C[J])!==0&&I(B,ee-=W[J],N),V(B,J=z(--se),ne),(N=T[J])!==0&&I(B,se-=G[J],N)),X<B.last_lit;);V(B,m,Z)}function de(B,Z){var ne,se,ee,J=Z.dyn_tree,N=Z.stat_desc.static_tree,X=Z.stat_desc.has_stree,re=Z.stat_desc.elems,le=-1;for(B.heap_len=0,B.heap_max=y,ne=0;ne<re;ne++)J[2*ne]!==0?(B.heap[++B.heap_len]=le=ne,B.depth[ne]=0):J[2*ne+1]=0;for(;B.heap_len<2;)J[2*(ee=B.heap[++B.heap_len]=le<2?++le:0)]=1,B.depth[ee]=0,B.opt_len--,X&&(B.static_len-=N[2*ee+1]);for(Z.max_code=le,ne=B.heap_len>>1;1<=ne;ne--)oe(B,J,ne);for(ee=re;ne=B.heap[1],B.heap[1]=B.heap[B.heap_len--],oe(B,J,1),se=B.heap[1],B.heap[--B.heap_max]=ne,B.heap[--B.heap_max]=se,J[2*ee]=J[2*ne]+J[2*se],B.depth[ee]=(B.depth[ne]>=B.depth[se]?B.depth[ne]:B.depth[se])+1,J[2*ne+1]=J[2*se+1]=ee,B.heap[1]=ee++,oe(B,J,1),2<=B.heap_len;);B.heap[--B.heap_max]=B.heap[1],function(ie,ve){var fe,ce,xe,pe,we,Se,ye=ve.dyn_tree,Ee=ve.max_code,$e=ve.stat_desc.static_tree,et=ve.stat_desc.has_stree,Pt=ve.stat_desc.extra_bits,Ct=ve.stat_desc.extra_base,qe=ve.stat_desc.max_length,lt=0;for(pe=0;pe<=w;pe++)ie.bl_count[pe]=0;for(ye[2*ie.heap[ie.heap_max]+1]=0,fe=ie.heap_max+1;fe<y;fe++)qe<(pe=ye[2*ye[2*(ce=ie.heap[fe])+1]+1]+1)&&(pe=qe,lt++),ye[2*ce+1]=pe,Ee<ce||(ie.bl_count[pe]++,we=0,Ct<=ce&&(we=Pt[ce-Ct]),Se=ye[2*ce],ie.opt_len+=Se*(pe+we),et&&(ie.static_len+=Se*($e[2*ce+1]+we)));if(lt!==0){do{for(pe=qe-1;ie.bl_count[pe]===0;)pe--;ie.bl_count[pe]--,ie.bl_count[pe+1]+=2,ie.bl_count[qe]--,lt-=2}while(0<lt);for(pe=qe;pe!==0;pe--)for(ce=ie.bl_count[pe];ce!==0;)Ee<(xe=ie.heap[--fe])||(ye[2*xe+1]!==pe&&(ie.opt_len+=(pe-ye[2*xe+1])*ye[2*xe],ye[2*xe+1]=pe),ce--)}}(B,Z),U(J,le,B.bl_count)}function D(B,Z,ne){var se,ee,J=-1,N=Z[1],X=0,re=7,le=4;for(N===0&&(re=138,le=3),Z[2*(ne+1)+1]=65535,se=0;se<=ne;se++)ee=N,N=Z[2*(se+1)+1],++X<re&&ee===N||(X<le?B.bl_tree[2*ee]+=X:ee!==0?(ee!==J&&B.bl_tree[2*ee]++,B.bl_tree[2*b]++):X<=10?B.bl_tree[2*E]++:B.bl_tree[2*S]++,J=ee,le=(X=0)===N?(re=138,3):ee===N?(re=6,3):(re=7,4))}function j(B,Z,ne){var se,ee,J=-1,N=Z[1],X=0,re=7,le=4;for(N===0&&(re=138,le=3),se=0;se<=ne;se++)if(ee=N,N=Z[2*(se+1)+1],!(++X<re&&ee===N)){if(X<le)for(;V(B,ee,B.bl_tree),--X!=0;);else ee!==0?(ee!==J&&(V(B,ee,B.bl_tree),X--),V(B,b,B.bl_tree),I(B,X-3,2)):X<=10?(V(B,E,B.bl_tree),I(B,X-3,3)):(V(B,S,B.bl_tree),I(B,X-11,7));J=ee,le=(X=0)===N?(re=138,3):ee===N?(re=6,3):(re=7,4)}}l(G);var q=!1;function L(B,Z,ne,se){I(B,(u<<1)+(se?1:0),3),function(ee,J,N,X){te(ee),X&&($(ee,N),$(ee,~N)),i.arraySet(ee.pending_buf,ee.window,J,N,ee.pending),ee.pending+=N}(B,Z,ne,!0)}a._tr_init=function(B){q||(function(){var Z,ne,se,ee,J,N=new Array(w+1);for(ee=se=0;ee<f-1;ee++)for(W[ee]=se,Z=0;Z<1<<C[ee];Z++)x[se++]=ee;for(x[se-1]=ee,ee=J=0;ee<16;ee++)for(G[ee]=J,Z=0;Z<1<<T[ee];Z++)R[J++]=ee;for(J>>=7;ee<v;ee++)for(G[ee]=J<<7,Z=0;Z<1<<T[ee]-7;Z++)R[256+J++]=ee;for(ne=0;ne<=w;ne++)N[ne]=0;for(Z=0;Z<=143;)F[2*Z+1]=8,Z++,N[8]++;for(;Z<=255;)F[2*Z+1]=9,Z++,N[9]++;for(;Z<=279;)F[2*Z+1]=7,Z++,N[7]++;for(;Z<=287;)F[2*Z+1]=8,Z++,N[8]++;for(U(F,h+1,N),Z=0;Z<v;Z++)k[2*Z+1]=5,k[2*Z]=Y(Z,5);O=new H(F,C,c+1,h,w),M=new H(k,T,0,v,w),K=new H(new Array(0),_,0,p,g)}(),q=!0),B.l_desc=new A(B.dyn_ltree,O),B.d_desc=new A(B.dyn_dtree,M),B.bl_desc=new A(B.bl_tree,K),B.bi_buf=0,B.bi_valid=0,Q(B)},a._tr_stored_block=L,a._tr_flush_block=function(B,Z,ne,se){var ee,J,N=0;0<B.level?(B.strm.data_type===2&&(B.strm.data_type=function(X){var re,le=4093624447;for(re=0;re<=31;re++,le>>>=1)if(1&le&&X.dyn_ltree[2*re]!==0)return o;if(X.dyn_ltree[18]!==0||X.dyn_ltree[20]!==0||X.dyn_ltree[26]!==0)return s;for(re=32;re<c;re++)if(X.dyn_ltree[2*re]!==0)return s;return o}(B)),de(B,B.l_desc),de(B,B.d_desc),N=function(X){var re;for(D(X,X.dyn_ltree,X.l_desc.max_code),D(X,X.dyn_dtree,X.d_desc.max_code),de(X,X.bl_desc),re=p-1;3<=re&&X.bl_tree[2*P[re]+1]===0;re--);return X.opt_len+=3*(re+1)+5+5+4,re}(B),ee=B.opt_len+3+7>>>3,(J=B.static_len+3+7>>>3)<=ee&&(ee=J)):ee=J=ne+5,ne+4<=ee&&Z!==-1?L(B,Z,ne,se):B.strategy===4||J===ee?(I(B,2+(se?1:0),3),ue(B,F,k)):(I(B,4+(se?1:0),3),function(X,re,le,ie){var ve;for(I(X,re-257,5),I(X,le-1,5),I(X,ie-4,4),ve=0;ve<ie;ve++)I(X,X.bl_tree[2*P[ve]+1],3);j(X,X.dyn_ltree,re-1),j(X,X.dyn_dtree,le-1)}(B,B.l_desc.max_code+1,B.d_desc.max_code+1,N+1),ue(B,B.dyn_ltree,B.dyn_dtree)),Q(B),se&&te(B)},a._tr_tally=function(B,Z,ne){return B.pending_buf[B.d_buf+2*B.last_lit]=Z>>>8&255,B.pending_buf[B.d_buf+2*B.last_lit+1]=255&Z,B.pending_buf[B.l_buf+B.last_lit]=255&ne,B.last_lit++,Z===0?B.dyn_ltree[2*ne]++:(B.matches++,Z--,B.dyn_ltree[2*(x[ne]+c+1)]++,B.dyn_dtree[2*z(Z)]++),B.last_lit===B.lit_bufsize-1},a._tr_align=function(B){I(B,2,3),V(B,m,F),function(Z){Z.bi_valid===16?($(Z,Z.bi_buf),Z.bi_buf=0,Z.bi_valid=0):8<=Z.bi_valid&&(Z.pending_buf[Z.pending++]=255&Z.bi_buf,Z.bi_buf>>=8,Z.bi_valid-=8)}(B)}},{"../utils/common":41}],53:[function(r,n,a){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,n,a){(function(i){(function(o,s){if(!o.setImmediate){var l,u,f,c,h=1,v={},p=!1,y=o.document,w=Object.getPrototypeOf&&Object.getPrototypeOf(o);w=w&&w.setTimeout?w:o,l={}.toString.call(o.process)==="[object process]"?function(b){process.nextTick(function(){g(b)})}:function(){if(o.postMessage&&!o.importScripts){var b=!0,E=o.onmessage;return o.onmessage=function(){b=!1},o.postMessage("","*"),o.onmessage=E,b}}()?(c="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",m,!1):o.attachEvent("onmessage",m),function(b){o.postMessage(c+b,"*")}):o.MessageChannel?((f=new MessageChannel).port1.onmessage=function(b){g(b.data)},function(b){f.port2.postMessage(b)}):y&&"onreadystatechange"in y.createElement("script")?(u=y.documentElement,function(b){var E=y.createElement("script");E.onreadystatechange=function(){g(b),E.onreadystatechange=null,u.removeChild(E),E=null},u.appendChild(E)}):function(b){setTimeout(g,0,b)},w.setImmediate=function(b){typeof b!="function"&&(b=new Function(""+b));for(var E=new Array(arguments.length-1),S=0;S<E.length;S++)E[S]=arguments[S+1];var C={callback:b,args:E};return v[h]=C,l(h),h++},w.clearImmediate=d}function d(b){delete v[b]}function g(b){if(p)setTimeout(g,0,b);else{var E=v[b];if(E){p=!0;try{(function(S){var C=S.callback,T=S.args;switch(T.length){case 0:C();break;case 1:C(T[0]);break;case 2:C(T[0],T[1]);break;case 3:C(T[0],T[1],T[2]);break;default:C.apply(s,T)}})(E)}finally{d(b),p=!1}}}}function m(b){b.source===o&&typeof b.data=="string"&&b.data.indexOf(c)===0&&g(+b.data.slice(c.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof st<"u"?st:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Qu);var _b=Qu.exports;const Db=Mn(_b);function Tb(t){let e,r,n,a,i,o,s;const l=t[2].default,u=rl(l,t,t[1],null);return{c(){e=Ne("li"),r=Ne("a"),n=Bn(t[0]),a=Ne("span"),i=Qe(),o=Ne("ul"),u&&u.c(),Ce(a,"class","caret"),Ce(r,"href","#"),Ce(r,"class","dropdown-toggle"),Ce(r,"data-toggle","dropdown"),Ce(r,"role","button"),Ce(r,"aria-haspopup","true"),Ce(r,"aria-expanded","false"),Ce(o,"class","dropdown-menu"),Ce(e,"class","dropdown")},m(f,c){Me(f,e,c),He(e,r),He(r,n),He(r,a),He(e,i),He(e,o),u&&u.m(o,null),s=!0},p(f,[c]){(!s||c&1)&&ll(n,f[0]),u&&u.p&&(!s||c&2)&&il(u,l,f,f[1],s?al(l,f[1],c,null):ol(f[1]),null)},i(f){s||(Ge(u,f),s=!0)},o(f){Ue(u,f),s=!1},d(f){f&&Le(e),u&&u.d(f)}}}function Pb(t,e,r){let{$$slots:n={},$$scope:a}=e,{name:i}=e;return t.$$set=o=>{"name"in o&&r(0,i=o.name),"$$scope"in o&&r(1,a=o.$$scope)},[i,a,n]}class zb extends at{constructor(e){super(),nt(this,e,Pb,Tb,Je,{name:0})}}function Xs(t,e,r){const n=t.slice();return n[1]=e[r].name,n[2]=e[r].action,n[3]=e[r].divider,n}function js(t){let e;return{c(){e=Ne("li"),Ce(e,"class","divider")},m(r,n){Me(r,e,n)},d(r){r&&Le(e)}}}function Qs(t){let e,r,n=t[1]+"",a,i,o,s,l,u=t[3]&&js();return{c(){e=Ne("li"),r=Ne("a"),a=Bn(n),i=Qe(),u&&u.c(),o=sl(),Ce(r,"href","#")},m(f,c){Me(f,e,c),He(e,r),He(r,a),Me(f,i,c),u&&u.m(f,c),Me(f,o,c),s||(l=Gt(r,"click",function(){$i(t[2])&&t[2].apply(this,arguments)}),s=!0)},p(f,c){t=f,c&1&&n!==(n=t[1]+"")&&ll(a,n),t[3]?u||(u=js(),u.c(),u.m(o.parentNode,o)):u&&(u.d(1),u=null)},d(f){f&&Le(e),f&&Le(i),u&&u.d(f),f&&Le(o),s=!1,l()}}}function Ab(t){let e,r=t[0],n=[];for(let a=0;a<r.length;a+=1)n[a]=Qs(Xs(t,r,a));return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=sl()},m(a,i){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(a,i);Me(a,e,i)},p(a,i){if(i&1){r=a[0];let o;for(o=0;o<r.length;o+=1){const s=Xs(a,r,o);n[o]?n[o].p(s,i):(n[o]=Qs(s),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=r.length}},d(a){hf(n,a),a&&Le(e)}}}function Lb(t){let e,r;return e=new zb({props:{name:t[1],$$slots:{default:[Ab]},$$scope:{ctx:t}}}),{c(){je(e.$$.fragment)},m(n,a){Ye(e,n,a),r=!0},p(n,[a]){const i={};a&2&&(i.name=n[1]),a&65&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(n){r||(Ge(e.$$.fragment,n),r=!0)},o(n){Ue(e.$$.fragment,n),r=!1},d(n){Xe(e,n)}}}function Bb(t,e,r){let{menuItems:n}=e,{name:a}=e;return t.$$set=i=>{"menuItems"in i&&r(0,n=i.menuItems),"name"in i&&r(1,a=i.name)},[n,a]}class Ju extends at{constructor(e){super(),nt(this,e,Bb,Lb,Je,{menuItems:0,name:1})}}function Mb(t){let e,r;return e=new Ju({props:{name:"File",menuItems:t[0]}}),{c(){je(e.$$.fragment)},m(n,a){Ye(e,n,a),r=!0},p:Be,i(n){r||(Ge(e.$$.fragment,n),r=!0)},o(n){Ue(e.$$.fragment,n),r=!1},d(n){Xe(e,n)}}}function Ob(){window.$("#fileInput").click()}function Js(t,e){let r=document.createElement("a");r.href=t,r.download="model."+e,r.click()}function Ib(t,e,r){let n;Ln(t,gt,d=>r(1,n=d));let a=Dt(Ft);function i(){n.modelEmpty||bootbox.confirm("Are you sure you want to create a new model? This will delete the current model.",function(d){d&&a.elements().remove()})}function o(d){let g=JSON.parse(d);ir(gt,n.loadingMode=!0,n),a.json(g),a.style(Zu);let m=a.nodes();for(let b=0;b<m.length;b++)console.log(m[b].data("label")),ba(m[b].id());n.columnNames!=null&&ju(n.columnNames,!1)}function s(){let d=window.$("<input>").attr({type:"file",accept:".json"});d.on("change",function(g){let m=g.target.files[0],b=new FileReader;b.readAsText(m,"UTF-8"),b.onload=function(E){let S=E.target.result;o(S)}}),d.click()}function l(){n.modelEmpty?s():bootbox.confirm("Are you sure you want to load a model? This will delete the current model.",function(d){confirm&&s()})}function u(){window.$("<input>").attr({type:"file",accept:".zip"}).on("change",function(g){let m=g.target.files[0],b=new FileReader;b.readAsArrayBuffer(m),b.onload=function(E){Db.loadAsync(E.target.result).then(function(S){S.file("model.json").async("text").then(function(C){o(C)}),S.file("data.csv").async("base64").then(function(C){Shiny.setInputValue("fileInput",{content:C})})})}})}function f(){let d=a;d.nodes().removeClass("linked");const g=d.json();return JSON.stringify(g)}function c(){const d=f();let g=new Blob([d],{type:"application/json;charset=utf-8"}),m=URL.createObjectURL(g);window.$("<a>").attr({href:m,download:"diagram.json"})[0].click()}function h(){const d=f();Shiny.setInputValue("model",d),Shiny.setInputValue("triggerDownload",Math.random())}function v(){ir(gt,n.dataAvail=!1,n),bootbox.alert("Data removed"),cy_save.nodes().removeClass("linked")}function p(){Js(a.png(),"png")}function y(){Js(a.jpg(),"jpg")}return[[{name:"New Model",action:i,divider:!1},{name:"Load Model",action:l,divider:!1},{name:"Load Data",action:Ob,divider:!1},{name:"Load Model and Data",action:u,divider:!0},{name:"Download Model",action:c,divider:!1},{name:"Download Model and Data",action:h,divider:!0},{name:"Remove Data",action:v,divider:!1},{name:"Export Model to PNG",action:p,divider:!1},{name:"Export Model to JPG",action:y,divider:!1}]]}class Rb extends at{constructor(e){super(),nt(this,e,Ib,Mb,Je,{})}}function Nb(t){let e,r;return e=new Ju({props:{name:"Edit",menuItems:t[0]}}),{c(){je(e.$$.fragment)},m(n,a){Ye(e,n,a),r=!0},p:Be,i(n){r||(Ge(e.$$.fragment,n),r=!0)},o(n){Ue(e.$$.fragment,n),r=!1},d(n){Xe(e,n)}}}function Si(){}function Fb(t){return[[{name:"Cut",action:Si,divider:!1},{name:"Copy",action:Si,divider:!1},{name:"Paste",action:Si,divider:!1}]]}class $b extends at{constructor(e){super(),nt(this,e,Fb,Nb,Je,{})}}function Vb(t){let e,r,n,a,i,o;return e=new Rb({}),n=new $b({}),i=new Xu({}),{c(){je(e.$$.fragment),r=Qe(),je(n.$$.fragment),a=Qe(),je(i.$$.fragment)},m(s,l){Ye(e,s,l),Me(s,r,l),Ye(n,s,l),Me(s,a,l),Ye(i,s,l),o=!0},i(s){o||(Ge(e.$$.fragment,s),Ge(n.$$.fragment,s),Ge(i.$$.fragment,s),o=!0)},o(s){Ue(e.$$.fragment,s),Ue(n.$$.fragment,s),Ue(i.$$.fragment,s),o=!1},d(s){Xe(e,s),s&&Le(r),Xe(n,s),s&&Le(a),Xe(i,s)}}}function qb(t){let e,r,n,a;return e=new Xu({}),n=new kb({props:{$$slots:{default:[Vb]},$$scope:{ctx:t}}}),{c(){je(e.$$.fragment),r=Qe(),je(n.$$.fragment)},m(i,o){Ye(e,i,o),Me(i,r,o),Ye(n,i,o),a=!0},p(i,[o]){const s={};o&1&&(s.$$scope={dirty:o,ctx:i}),n.$set(s)},i(i){a||(Ge(e.$$.fragment,i),Ge(n.$$.fragment,i),a=!0)},o(i){Ue(e.$$.fragment,i),Ue(n.$$.fragment,i),a=!1},d(i){Xe(e,i),i&&Le(r),Xe(n,i)}}}class Gb extends at{constructor(e){super(),nt(this,e,null,qb,Je,{})}}function Hb(t){let e;return{c(){e=Ne("div"),Ce(e,"id","lavaan_syntax_R"),Ce(e,"class","shiny-html-output svelte-x6eofz")},m(r,n){Me(r,e,n)},p:Be,i:Be,o:Be,d(r){r&&Le(e)}}}class Wb extends at{constructor(e){super(),nt(this,e,null,Hb,Je,{})}}function Ub(t){let e,r,n,a,i,o,s,l;return{c(){e=Ne("div"),r=Ne("button"),n=Qe(),a=Ne("button"),i=Qe(),o=Ne("button"),Ce(r,"id","add-manifest-variable"),Ce(r,"title","Create Observed Variable"),Ce(r,"class","svelte-anklhz"),Ce(a,"id","add-latent-variable"),Ce(a,"title","Create Latent Variable"),Ce(a,"class","svelte-anklhz"),Ce(o,"id","add-constant-variable"),Ce(o,"title","Create Constant Variable"),Ce(o,"class","svelte-anklhz"),Ce(e,"class","toolbox svelte-anklhz")},m(u,f){Me(u,e,f),He(e,r),He(e,n),He(e,a),He(e,i),He(e,o),s||(l=[Gt(r,"click",t[1]),Gt(a,"click",t[2]),Gt(o,"click",t[3])],s=!0)},p:Be,i:Be,o:Be,d(u){u&&Le(e),s=!1,_r(l)}}}function Kb(t){let e=Dt(Ft);return[e,()=>{ya(e,"observed-variable")},()=>{ya(e,"latent-variable")},()=>{ya(e,"constant")}]}class Zb extends at{constructor(e){super(),nt(this,e,Kb,Ub,Je,{})}}function Yb(t){return window.cy=Dt(Ft),[]}class Xb extends at{constructor(e){super(),nt(this,e,Yb,null,Je,{})}}var ef={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(self,function(){return(()=>{var r={621:(i,o,s)=>{function l(H,A){(A==null||A>H.length)&&(A=H.length);for(var z=0,$=new Array(A);z<A;z++)$[z]=H[z];return $}function u(H){for(var A="",z=0;z<H.length;z++)A+=H[z],z!==H.length-1&&(A+=" ");return A}function f(H,A,z){z?H.setAttribute(A,""):H.removeAttribute(A)}function c(H,A,z){customElements.get(H)===void 0&&customElements.define(H,A,{extends:z})}s.r(o),s.d(o,{contextMenus:()=>G});var h="cy-context-menus-divider",v={evtType:"cxttap",menuItems:[],menuItemClasses:["cy-context-menus-cxt-menuitem"],contextMenuClasses:["cy-context-menus-cxt-menu"],submenuIndicator:{src:"assets/submenu-indicator-default.svg",width:12,height:12}};function p(H){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(H)}function y(H,A){var z;if(typeof Symbol>"u"||H[Symbol.iterator]==null){if(Array.isArray(H)||(z=function(Q,te){if(Q){if(typeof Q=="string")return w(Q,te);var ae=Object.prototype.toString.call(Q).slice(8,-1);return ae==="Object"&&Q.constructor&&(ae=Q.constructor.name),ae==="Map"||ae==="Set"?Array.from(Q):ae==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ae)?w(Q,te):void 0}}(H))||A&&H&&typeof H.length=="number"){z&&(H=z);var $=0,I=function(){};return{s:I,n:function(){return $>=H.length?{done:!0}:{done:!1,value:H[$++]}},e:function(Q){throw Q},f:I}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var V,Y=!0,U=!1;return{s:function(){z=H[Symbol.iterator]()},n:function(){var Q=z.next();return Y=Q.done,Q},e:function(Q){U=!0,V=Q},f:function(){try{Y||z.return==null||z.return()}finally{if(U)throw V}}}}function w(H,A){(A==null||A>H.length)&&(A=H.length);for(var z=0,$=new Array(A);z<A;z++)$[z]=H[z];return $}function d(H,A){if(!(H instanceof A))throw new TypeError("Cannot call a class as a function")}function g(H,A){for(var z=0;z<A.length;z++){var $=A[z];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(H,$.key,$)}}function m(H,A,z){return A&&g(H.prototype,A),z&&g(H,z),H}function b(H,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function");H.prototype=Object.create(A&&A.prototype,{constructor:{value:H,writable:!0,configurable:!0}}),A&&k(H,A)}function E(H){var A=F();return function(){var z,$=R(H);if(A){var I=R(this).constructor;z=Reflect.construct($,arguments,I)}else z=$.apply(this,arguments);return S(this,z)}}function S(H,A){return!A||p(A)!=="object"&&typeof A!="function"?C(H):A}function C(H){if(H===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H}function T(H,A,z){return(T=typeof Reflect<"u"&&Reflect.get?Reflect.get:function($,I,V){var Y=function(Q,te){for(;!Object.prototype.hasOwnProperty.call(Q,te)&&(Q=R(Q))!==null;);return Q}($,I);if(Y){var U=Object.getOwnPropertyDescriptor(Y,I);return U.get?U.get.call(V):U.value}})(H,A,z||H)}function _(H){var A=typeof Map=="function"?new Map:void 0;return(_=function(z){if(z===null||($=z,Function.toString.call($).indexOf("[native code]")===-1))return z;var $;if(typeof z!="function")throw new TypeError("Super expression must either be null or a function");if(A!==void 0){if(A.has(z))return A.get(z);A.set(z,I)}function I(){return P(z,arguments,R(this).constructor)}return I.prototype=Object.create(z.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),k(I,z)})(H)}function P(H,A,z){return(P=F()?Reflect.construct:function($,I,V){var Y=[null];Y.push.apply(Y,I);var U=new(Function.bind.apply($,Y));return V&&k(U,V.prototype),U}).apply(null,arguments)}function F(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function k(H,A){return(k=Object.setPrototypeOf||function(z,$){return z.__proto__=$,z})(H,A)}function R(H){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(A){return A.__proto__||Object.getPrototypeOf(A)})(H)}function x(H){H.preventDefault(),H.stopPropagation()}var W=function(H){b(z,H);var A=E(z);function z($,I,V){var Y,U,Q,te,ae,oe,ue,de,D,j;d(this,z),T((U=C(j=A.call(this)),R(z.prototype)),"setAttribute",U).call(U,"id",$.id);var q=j._getMenuItemClassStr(V.cxtMenuItemClasses,$.hasTrailingDivider);if(T((Q=C(j),R(z.prototype)),"setAttribute",Q).call(Q,"class",q),T((te=C(j),R(z.prototype)),"setAttribute",te).call(te,"title",(Y=$.tooltipText)!==null&&Y!==void 0?Y:""),$.disabled&&f(C(j),"disabled",!0),$.image){var L=document.createElement("img");L.src=$.image.src,L.width=$.image.width,L.height=$.image.height,L.style.position="absolute",L.style.top=$.image.y+"px",L.style.left=$.image.x+"px",T((ae=C(j),R(z.prototype)),"appendChild",ae).call(ae,L)}if(j.innerHTML+=$.content,j.onMenuItemClick=I,j.data={},j.clickFns=[],j.selector=$.selector,j.hasTrailingDivider=$.hasTrailingDivider,j.show=$.show===void 0||$.show,j.coreAsWell=$.coreAsWell||!1,j.scratchpad=V,$.onClickFunction===void 0&&$.submenu===void 0)throw new Error("A menu item must either have click function or a submenu or both");return j.onClickFunction=$.onClickFunction,$.submenu instanceof Array&&j._createSubmenu($.submenu),T((oe=C(j),R(z.prototype)),"addEventListener",oe).call(oe,"mousedown",x),T((ue=C(j),R(z.prototype)),"addEventListener",ue).call(ue,"mouseup",x),T((de=C(j),R(z.prototype)),"addEventListener",de).call(de,"touchstart",x),T((D=C(j),R(z.prototype)),"addEventListener",D).call(D,"touchend",x),j}return m(z,[{key:"bindOnClickFunction",value:function($){this.clickFns.push($),T(R(z.prototype),"addEventListener",this).call(this,"click",$)}},{key:"unbindOnClickFunctions",value:function(){var $,I=y(this.clickFns);try{for(I.s();!($=I.n()).done;){var V=$.value;T(R(z.prototype),"removeEventListener",this).call(this,"click",V)}}catch(Y){I.e(Y)}finally{I.f()}this.clickFns=[]}},{key:"enable",value:function(){f(this,"disabled",!1),this.hasSubmenu()&&this.addEventListener("mouseenter",this.mouseEnterHandler)}},{key:"disable",value:function(){f(this,"disabled",!0),this.hasSubmenu()&&this.removeEventListener("mouseenter",this.mouseEnterHandler)}},{key:"hide",value:function(){this.show=!1,this.style.display="none"}},{key:"getHasTrailingDivider",value:function(){return!!this.hasTrailingDivider}},{key:"setHasTrailingDivider",value:function($){this.hasTrailingDivider=$}},{key:"hasSubmenu",value:function(){return this.submenu instanceof O}},{key:"appendSubmenuItem",value:function($){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.hasSubmenu()||this._createSubmenu(),this.submenu.appendMenuItem($,I)}},{key:"isClickable",value:function(){return this.onClickFunction!==void 0}},{key:"display",value:function(){this.show=!0,this.style.display="block"}},{key:"isVisible",value:function(){return this.show===!0&&this.style.display!=="none"}},{key:"removeSubmenu",value:function(){this.hasSubmenu()&&(this.submenu.removeAllMenuItems(),this.detachSubmenu())}},{key:"detachSubmenu",value:function(){this.hasSubmenu()&&(this.removeChild(this.submenu),this.removeChild(this.indicator),this.removeEventListener("mouseenter",this.mouseEnterHandler),this.removeEventListener("mouseleave",this.mouseLeaveHandler),this.submenu=void 0,this.indicator=void 0)}},{key:"_onMouseEnter",value:function($){var I=this.getBoundingClientRect(),V=function(ae){ae.style.opacity="0",ae.style.display="block";var oe=ae.getBoundingClientRect();return ae.style.opacity="1",ae.style.display="none",oe}(this.submenu),Y=I.right+V.width>window.innerWidth,U=I.top+V.height>window.innerHeight;Y||U?Y&&!U?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.left="auto",this.submenu.style.bottom="auto"):Y&&U?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.top="auto",this.submenu.style.left="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.right="auto",this.submenu.style.top="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.right="auto",this.submenu.style.bottom="auto"),this.submenu.display();var Q=Array.from(this.submenu.children).filter(function(ae){if(ae instanceof z)return ae.isVisible()}),te=Q.length;Q.forEach(function(ae,oe){ae instanceof z&&(oe<te-1&&ae.getHasTrailingDivider()?ae.classList.add(h):ae.getHasTrailingDivider()&&ae.classList.remove(h))})}},{key:"_onMouseLeave",value:function($){var I,V,Y,U,Q;I={x:$.clientX,y:$.clientY},V=this.submenu,U=I.y,(Y=I.x)>=(Q=V.getBoundingClientRect()).left&&Y<=Q.right&&U>=Q.top&&U<=Q.bottom||this.submenu.hide()}},{key:"_createSubmenu",value:function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.indicator=this.scratchpad.submenuIndicatorGen(),this.submenu=new O(this.onMenuItemClick,this.scratchpad),this.appendChild(this.indicator),this.appendChild(this.submenu);var I,V=y($);try{for(V.s();!(I=V.n()).done;){var Y=I.value,U=new z(Y,this.onMenuItemClick,this.scratchpad);this.submenu.appendMenuItem(U)}}catch(Q){V.e(Q)}finally{V.f()}this.mouseEnterHandler=this._onMouseEnter.bind(this),this.mouseLeaveHandler=this._onMouseLeave.bind(this),this.addEventListener("mouseenter",this.mouseEnterHandler),this.addEventListener("mouseleave",this.mouseLeaveHandler)}},{key:"_getMenuItemClassStr",value:function($,I){return I?$+" "+h:$}}],[{key:"define",value:function(){c("ctx-menu-item",z,"button")}}]),z}(_(HTMLButtonElement)),O=function(H){b(z,H);var A=E(z);function z($,I){var V,Y;return d(this,z),T((V=C(Y=A.call(this)),R(z.prototype)),"setAttribute",V).call(V,"class",I.cxtMenuClasses),Y.style.position="absolute",Y.onMenuItemClick=$,Y.scratchpad=I,Y}return m(z,[{key:"hide",value:function(){this.isVisible()&&(this.hideSubmenus(),this.style.display="none")}},{key:"display",value:function(){this.style.display="block"}},{key:"isVisible",value:function(){return this.style.display!=="none"}},{key:"hideMenuItems",value:function(){var $,I=y(this.children);try{for(I.s();!($=I.n()).done;){var V=$.value;V instanceof HTMLElement?V.style.display="none":console.warn("".concat(V," is not a HTMLElement"))}}catch(Y){I.e(Y)}finally{I.f()}}},{key:"hideSubmenus",value:function(){var $,I=y(this.children);try{for(I.s();!($=I.n()).done;){var V=$.value;V instanceof W&&V.submenu&&V.submenu.hide()}}catch(Y){I.e(Y)}finally{I.f()}}},{key:"appendMenuItem",value:function($){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(I!==void 0){if(I.parentNode!==this)throw new Error("The item with id='".concat(I.id,"' is not a child of the context menu"));this.insertBefore($,I)}else this.appendChild($);$.isClickable()&&this._performBindings($)}},{key:"moveBefore",value:function($,I){if($.parentNode!==this)throw new Error("The item with id='".concat($.id,"' is not a child of context menu"));if(I.parentNode!==this)throw new Error("The item with id='".concat(I.id,"' is not a child of context menu"));this.removeChild($),this.insertBefore($,I)}},{key:"removeAllMenuItems",value:function(){for(;this.firstChild;){var $=this.lastChild;$ instanceof W?this._removeImmediateMenuItem($):(console.warn("Found non menu item in the context menu: ",$),this.removeChild($))}}},{key:"_removeImmediateMenuItem",value:function($){if(!this._detachImmediateMenuItem($))throw new Error("menu item(id=".concat($.id,") is not in the context menu"));$.detachSubmenu(),$.unbindOnClickFunctions()}},{key:"_detachImmediateMenuItem",value:function($){if($.parentNode===this){if(this.removeChild($),this.children.length<=0){var I=this.parentNode;I instanceof W&&I.detachSubmenu()}return!0}return!1}},{key:"_performBindings",value:function($){var I=this._bindOnClick($.onClickFunction);$.bindOnClickFunction(I),$.bindOnClickFunction(this.onMenuItemClick)}},{key:"_bindOnClick",value:function($){var I=this;return function(){var V=I.scratchpad.currentCyEvent;$(V)}}}],[{key:"define",value:function(){c("menu-item-list",z,"div")}}]),z}(_(HTMLDivElement)),M=function(H){b(z,H);var A=E(z);function z($,I){var V;return d(this,z),(V=A.call(this,$,I)).onMenuItemClick=function(Y){x(Y),V.hide(),$()},V}return m(z,[{key:"removeMenuItem",value:function($){var I=$.parentElement;I instanceof O&&this.contains(I)&&I._removeImmediateMenuItem($)}},{key:"appendMenuItem",value:function($){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.ensureDoesntContain($.id),T(R(z.prototype),"appendMenuItem",this).call(this,$,I)}},{key:"insertMenuItem",value:function($){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},V=I.before,Y=I.parent;if(this.ensureDoesntContain($.id),V!==void 0){if(!this.contains(V))throw new Error("before(id=".concat(V.id,") is not in the context menu"));var U=V.parentNode;if(!(U instanceof O))throw new Error("Parent of before(id=".concat(V.id,") is not a submenu"));U.appendMenuItem($,V)}else if(Y!==void 0){if(!this.contains(Y))throw new Error("parent(id=".concat(Y.id,") is not a descendant of the context menu"));Y.appendSubmenuItem($)}else this.appendMenuItem($)}},{key:"moveBefore",value:function($,I){var V=$.parentElement;if(!this.contains(V))throw new Error("parent(id=".concat(V.id,") is not in the contex menu"));if(!this.contains(I))throw new Error("before(id=".concat(I.id,") is not in the context menu"));V.removeChild($),this.insertMenuItem($,{before:I})}},{key:"moveToSubmenu",value:function($){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,Y=$.parentElement;if(!(Y instanceof O))throw new Error("current parent(id=".concat(Y.id,") is not a submenu"));if(!this.contains(Y))throw new Error("parent of the menu item(id=".concat(Y.id,") is not in the context menu"));if(I!==null){if(!this.contains(I))throw new Error("parent(id=".concat(I.id,") is not in the context menu"));Y._detachImmediateMenuItem($),I.appendSubmenuItem($)}else V!==null&&($.selector=V.selector,$.coreAsWell=V.coreAsWell),Y._detachImmediateMenuItem($),this.appendMenuItem($)}},{key:"ensureDoesntContain",value:function($){var I=document.getElementById($);if(I!==void 0&&this.contains(I))throw new Error("There is already an element with id=".concat($," in the context menu"))}}],[{key:"define",value:function(){c("ctx-menu",z,"div")}}]),z}(O);function K(H,A){(A==null||A>H.length)&&(A=H.length);for(var z=0,$=new Array(A);z<A;z++)$[z]=H[z];return $}function G(H){var A=this;A.scratch("cycontextmenus")||A.scratch("cycontextmenus",{});var z,$,I=function(q){return A.scratch("cycontextmenus")[q]},V=function(q,L){return A.scratch("cycontextmenus")[q]=L},Y=I("options"),U=I("cxtMenu"),Q=function(q){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,B=ae(q);if(L!==void 0){var Z=ue(L);U.insertMenuItem(B,{parent:Z})}else U.insertMenuItem(B)},te=function(q){for(var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,B=0;B<q.length;B++)Q(q[B],L)},ae=function(q){var L=A.scratch("cycontextmenus");return new W(q,U.onMenuItemClick,L)},oe=function(){I("active")&&(U.removeAllMenuItems(),A.off("tapstart",I("eventCyTapStart")),A.off(Y.evtType,I("onCxttap")),A.off("viewport",I("onViewport")),document.removeEventListener("mouseup",I("hideOnNonCyClick")),U.parentNode.removeChild(U),U=void 0,V("cxtMenu",void 0),V("active",!1),V("anyVisibleChild",!1),V("onCxttap",void 0),V("onViewport",void 0),V("hideOnNonCyClick",void 0))},ue=function(q){var L=document.getElementById(q);if(L instanceof W)return L;throw new Error("The item with id=".concat(q," is not a menu item"))};if(H!=="get"){W.define(),O.define(),M.define(),Y=function(q,L){var B={};for(var Z in q)B[Z]=q[Z];for(var ne in L)B[ne]instanceof Array?B[ne]=B[ne].concat(L[ne]):B[ne]=L[ne];return B}(v,H),V("options",Y),I("active")&&oe(),V("active",!0),V("submenuIndicatorGen",function(q){var L=document.createElement("img");return L.src=q.src,L.width=q.width,L.height=q.height,L.classList.add("cy-context-menus-submenu-indicator"),L}.bind(void 0,Y.submenuIndicator));var de=u(Y.contextMenuClasses);V("cxtMenuClasses",de);var D=A.scratch("cycontextmenus");U=new M(function(){return V("cxtMenuPosition",void 0)},D),V("cxtMenu",U),A.container().appendChild(U),V("cxtMenuItemClasses",u(Y.menuItemClasses));var j=Y.menuItems;te(j),$=function(q){V("currentCyEvent",q),function(J){var N,X=A.container(),re=I("cxtMenuPosition"),le=J.position||J.cyPosition;if(re!=le){U.hideMenuItems(),V("anyVisibleChild",!1),V("cxtMenuPosition",le);var ie={top:(N=X.getBoundingClientRect()).top,left:N.left},ve=J.renderedPosition||J.cyRenderedPosition,fe=getComputedStyle(X)["border-width"],ce=parseInt(fe.replace("px",""))||0;ce>0&&(ie.top+=ce,ie.left+=ce);var xe=X.clientHeight,pe=X.clientWidth,we=xe/2,Se=pe/2;ve.y>we&&ve.x<=Se?(U.style.left=ve.x+"px",U.style.bottom=xe-ve.y+"px",U.style.right="auto",U.style.top="auto"):ve.y>we&&ve.x>Se?(U.style.right=pe-ve.x+"px",U.style.bottom=xe-ve.y+"px",U.style.left="auto",U.style.top="auto"):ve.y<=we&&ve.x<=Se?(U.style.left=ve.x+"px",U.style.top=ve.y+"px",U.style.right="auto",U.style.bottom="auto"):(U.style.right=pe-ve.x+"px",U.style.top=ve.y+"px",U.style.left="auto",U.style.bottom="auto")}}(q);var L,B=q.target||q.cyTarget,Z=function(J,N){var X;if(typeof Symbol>"u"||J[Symbol.iterator]==null){if(Array.isArray(J)||(X=function(ce,xe){if(ce){if(typeof ce=="string")return K(ce,xe);var pe=Object.prototype.toString.call(ce).slice(8,-1);return pe==="Object"&&ce.constructor&&(pe=ce.constructor.name),pe==="Map"||pe==="Set"?Array.from(ce):pe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(pe)?K(ce,xe):void 0}}(J))||N&&J&&typeof J.length=="number"){X&&(J=X);var re=0,le=function(){};return{s:le,n:function(){return re>=J.length?{done:!0}:{done:!1,value:J[re++]}},e:function(ce){throw ce},f:le}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ie,ve=!0,fe=!1;return{s:function(){X=J[Symbol.iterator]()},n:function(){var ce=X.next();return ve=ce.done,ce},e:function(ce){fe=!0,ie=ce},f:function(){try{ve||X.return==null||X.return()}finally{if(fe)throw ie}}}}(U.children);try{for(Z.s();!(L=Z.n()).done;){var ne=L.value;ne instanceof W&&(B===A?ne.coreAsWell:B.is(ne.selector))&&ne.show&&(U.display(),V("anyVisibleChild",!0),ne.display())}}catch(J){Z.e(J)}finally{Z.f()}var se=Array.from(U.children).filter(function(J){if(J instanceof W)return J.isVisible()}),ee=se.length;se.forEach(function(J,N){J instanceof W&&(N<ee-1&&J.getHasTrailingDivider()?J.classList.add(h):J.getHasTrailingDivider()&&J.classList.remove(h))}),!I("anyVisibleChild")&&!function(J){return J.offsetWidth<=0&&J.offsetHeight<=0||J.style&&J.style.display||getComputedStyle(J).display}(U)&&U.hide()},A.on(Y.evtType,$),V("onCxttap",$),function(){var q=function(B){if(U.contains(B.originalEvent.target))return!1;U.hide(),V("cxtMenuPosition",void 0),V("currentCyEvent",void 0)};A.on("tapstart",q),V("eventCyTapStart",q);var L=function(){U.hide()};A.on("viewport",L),V("onViewport",L)}(),z=function(q){A.container().contains(q.target)||U.contains(q.target)||(U.hide(),V("cxtMenuPosition",void 0))},document.addEventListener("mouseup",z),V("hideOnNonCyClick",z),function(){var q,L=function(B,Z){var ne;if(typeof Symbol>"u"||B[Symbol.iterator]==null){if(Array.isArray(B)||(ne=function(re,le){if(re){if(typeof re=="string")return l(re,le);var ie=Object.prototype.toString.call(re).slice(8,-1);return ie==="Object"&&re.constructor&&(ie=re.constructor.name),ie==="Map"||ie==="Set"?Array.from(re):ie==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ie)?l(re,le):void 0}}(B))||Z&&B&&typeof B.length=="number"){ne&&(B=ne);var se=0,ee=function(){};return{s:ee,n:function(){return se>=B.length?{done:!0}:{done:!1,value:B[se++]}},e:function(re){throw re},f:ee}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var J,N=!0,X=!1;return{s:function(){ne=B[Symbol.iterator]()},n:function(){var re=ne.next();return N=re.done,re},e:function(re){X=!0,J=re},f:function(){try{N||ne.return==null||ne.return()}finally{if(X)throw J}}}}(document.getElementsByClassName("cy-context-menus-cxt-menu"));try{for(L.s();!(q=L.n()).done;)q.value.addEventListener("contextmenu",function(B){return B.preventDefault()})}catch(B){L.e(B)}finally{L.f()}}()}return function(q){return{isActive:function(){return I("active")},appendMenuItem:function(L){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return Q(L,B),q},appendMenuItems:function(L){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return te(L,B),q},removeMenuItem:function(L){var B=ue(L);return U.removeMenuItem(B),q},setTrailingDivider:function(L,B){var Z=ue(L);return Z.setHasTrailingDivider(B),B?Z.classList.add(h):Z.classList.remove(h),q},insertBeforeMenuItem:function(L,B){var Z=ae(L),ne=ue(B);return U.insertMenuItem(Z,{before:ne}),q},moveToSubmenu:function(L){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Z=ue(L);if(B===null)U.moveToSubmenu(Z);else if(typeof B=="string"){var ne=ue(B.toString());U.moveToSubmenu(Z,ne)}else B.coreAsWell!==void 0||B.selector!==void 0?U.moveToSubmenu(Z,null,B):console.warn("options neither has coreAsWell nor selector property but it is an object. Are you sure that this is what you want to do?");return q},moveBeforeOtherMenuItem:function(L,B){var Z=ue(L),ne=ue(B);return U.moveBefore(Z,ne),q},disableMenuItem:function(L){return ue(L).disable(),q},enableMenuItem:function(L){return ue(L).enable(),q},hideMenuItem:function(L){return ue(L).hide(),q},showMenuItem:function(L){return ue(L).display(),q},destroy:function(){return oe(),q}}}(this)}},579:(i,o,s)=>{var l=s(621).contextMenus,u=function(f){f&&f("core","contextMenus",l)};typeof cytoscape<"u"&&u(cytoscape),i.exports=u}},n={};function a(i){var o=n[i];if(o!==void 0)return o.exports;var s=n[i]={exports:{}};return r[i](s,s.exports,a),s.exports}return a.d=(i,o)=>{for(var s in o)a.o(o,s)&&!a.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:o[s]})},a.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),a.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},a(579)})()})})(ef);var jb=ef.exports;const Qb=Mn(jb);function Jb(t,e,r){let n;Ln(t,gt,o=>r(0,n=o));let a=Dt(Ft);Pa.use(Qb);let i=[{id:"add-observed",content:"Add Observed Variable",coreAsWell:!0,onClickFunction(o){const s=o.position||o.cyPosition;addNode("observed-variable",s)}},{id:"add-latent",content:"Add Latent Variable",coreAsWell:!0,onClickFunction(o){const s=o.position||o.cyPosition;addNode("latent-variable",s)}},{id:"add-constant",content:"Add Constant Variable",coreAsWell:!0,onClickFunction(o){const s=o.position||o.cyPosition;addNode("constant",s)}},{id:"label-para",content:"Give Label",selector:"edge",onClickFunction(o){const s=o.target||o.cyTarget;bootbox.prompt({title:"Please enter a label",callback(l){l!==null&&(s.data("label",l),s.addClass("label"),s.removeClass("nolabel"))}})},hasTrailingDivider:!1},{id:"label-remove",content:"Remove Label",selector:"edge.label",onClickFunction(o){const s=o.target||o.cyTarget;s.removeClass("label"),s.addClass("nolabel"),s.data("label",void 0)},hasTrailingDivider:!1},{id:"remove-edge",content:"Delete edge",selector:"edge",onClickFunction(o){(o.target||o.cyTarget).remove()},hasTrailingDivider:!0},{id:"fix-para",content:"Fix Parameter",selector:"edge.free, edge.forcefree",onClickFunction(o){const s=o.target||o.cyTarget;bootbox.prompt({title:"Please enter a value",inputType:"number",callback(l){l!==null&&(s.data("value",l),s.removeClass("free"),s.removeClass("forcefree"),s.addClass("fixed"))}})},hasTrailingDivider:!1},{id:"free-para",content:"Free Parameter",selector:"edge.fixed, edge.forcefree",onClickFunction(o){var s=o.target||o.cyTarget;s.removeClass("fixed"),s.removeClass("forcefree"),s.addClass("free")},hasTrailingDivider:!1},{id:"free-force-para",content:"Force Parameter Free",selector:"edge.free, edge.fixed",onClickFunction(o){const s=o.target||o.cyTarget;s.removeClass("free"),s.removeClass("fixed"),s.addClass("forcefree")},hasTrailingDivider:!0},{id:"revert-arrow",content:"Revert Direction",selector:'edge[isMean="0"].directed',onClickFunction(o){const s=o.target||o.cyTarget,l=s.source().id(),u=s.target().id();s.move({source:u,target:l})},hasTrailingDivider:!1},{id:"set-undirected",content:"Set Undirected",selector:'edge[isMean="0"].directed',onClickFunction(o){const s=o.target||o.cyTarget;s.removeClass("directed"),s.addClass("undirected")},hasTrailingDivider:!0},{id:"set-arrow",content:"Set Directed",selector:"edge.undirected",onClickFunction(o){const s=o.target||o.cyTarget;s.removeClass("undirected"),s.addClass("directed")},hasTrailingDivider:!0},{id:"change-curve",content:"Change Curvature",selector:"edge.undirected",onClickFunction(o){const s=o.target||o.cyTarget;bootbox.prompt({title:"Please enter new value. Larger absolute values result in more curvature. Positive values revert the curvature.",inputType:"number",value:parseInt(s.style().controlPointDistances),callback(l){l!==null&&s.style("controlPointDistances",l)}})},hasTrailingDivider:!1},{id:"rename-node",content:"Rename Variable",selector:"node.latent-variable, node.observed-variable",onClickFunction(o){const s=o.target||o.cyTarget;s.data("label");let l=document.createElement("div");l.style.position="fixed",l.style.top=0,l.style.left=0,l.style.width="100vw",l.style.height="100vh",l.style.backgroundColor="rgba(0, 0, 0, 0.5)",l.style.zIndex=1e3;let u=document.createElement("div");u.style.position="fixed",u.style.top="50%",u.style.left="50%",u.style.transform="translate(-50%, -50%)",u.style.backgroundColor="white",u.style.padding="20px",u.style.border="1px solid #ccc",u.style.zIndex=1001;let f=!1;if(typeof columnNamesGlobal<"u"&&s.hasClass("observed-variable")){f=!0;let m=document.createElement("label");m.textContent="Available Variables",m.setAttribute("for","variables-select"),m.style.marginRight="10px",u.appendChild(m);let b=document.createElement("select");b.id="variables-select";const E=a.nodes().map(C=>C.data("label"));columnNamesGlobal.forEach(function(C){if(!E.includes(C)){var T=document.createElement("option");T.value=C,T.textContent=C,b.appendChild(T)}}),u.appendChild(b);const S=document.createElement("br");u.appendChild(S)}let c=document.createElement("label");c.style.marginRight="10px",c.textContent="New label",c.setAttribute("for","new-label-input"),u.appendChild(c);var h=document.createElement("input");h.type="text",h.value="",h.id="rename-input",u.appendChild(h);const v=document.createElement("br");u.appendChild(v);let p=document.createElement("button");p.textContent="Submit",u.appendChild(p);let y=document.createElement("button");y.textContent="Cancel",y.style.marginLeft="10px",u.appendChild(y),document.body.appendChild(l),document.body.appendChild(u),document.getElementById("rename-input").focus(),p.addEventListener("click",function(){d()}),y.addEventListener("click",function(){g()}),h.addEventListener("keydown",function(m){m.key==="Enter"&&d()});function d(){if(h.value!==""||f){let m;if(h.value!==""?m=h.value:m=selectBox.value,s.data("label",m),s.hasClass("observed-variable")){const b=n.getColumnNamesGlobal();b&&b.includes(m)?(s.addClass("linked"),bootbox.alert("Variable connected with data set")):s.hasClass("linked")&&(s.removeClass("linked"),bootbox.alert("Variable disconnected"))}}g()}function g(){document.body.removeChild(u),document.body.removeChild(l)}}},{id:"remove-node",content:"Delete Variable",selector:"node",onClickFunction(o){(o.target||o.cyTarget).remove()},hasTrailingDivider:!0},{id:"change-latent",content:"Change to Latent",selector:"node.observed-variable",onClickFunction(o){const s=o.target||o.cyTarget;s.removeClass("observed-variable"),s.addClass("latent-variable")},hasTrailingDivider:!1},{id:"change-observed",content:"Change to Observed",selector:"node.latent-variable",onClickFunction(o){const s=o.target||o.cyTarget;s.removeClass("latent-variable"),s.addClass("observed-variable")}}];return Vi(()=>{a.contextMenus({menuItems:i})}),[]}class e1 extends at{constructor(e){super(),nt(this,e,Jb,null,Je,{})}}function t1(t){let e;return{c(){e=Ne("div"),e.innerHTML=`<label class="control-label shiny-label-null" for="fileInput" id="fileInput-label"></label> 
  <div class="input-group svelte-1qxcvef"><label class="input-group-btn input-group-prepend"><span class="btn btn-default btn-file">Browse...
        <input id="fileInput" name="fileInput" type="file" style="position: absolute !important; top: -99999px !important; left: -99999px !important;" accept=".csv"/></span></label> 
    <input type="text" class="form-control" placeholder="No file selected" readonly="readonly"/></div> 
  <div id="fileInput_progress" class="progress active shiny-file-input-progress svelte-1qxcvef"><div class="progress-bar svelte-1qxcvef"></div></div>`,Ce(e,"class","form-group shiny-input-container svelte-1qxcvef")},m(r,n){Me(r,e,n)},p:Be,i:Be,o:Be,d(r){r&&Le(e)}}}class r1 extends at{constructor(e){super(),nt(this,e,null,t1,Je,{})}}function n1(t,e){for(let r=0;r<t.length;r++)if(t[r]===e)return!0;return!1}function ua(t,e){let r;t==null?r="1":r=t.data("label");let n=!1,a;return e.hasClass("fixed")?(a=e.data("value")+"*"+r,n=!0):e.hasClass("forcefree")&&(a="NA*"+r,n=!0),e.hasClass("label")?(label=e.data("label"),n?a+=" + "+label+"*"+r:a=label+"*"+r):n?a+=" + "+r:a=r,a}function a1(t){let e=Dt(Ft),r="",n="";t||(Dt(gt).loadedFileName==null||Dt(gt).loadedFileName,n+=`library(lavaan)
`,n+="data <- read.csv("+Dt(gt).loadedFileName+`)
`);const a=e.nodes(function(h){return h.hasClass("latent-variable")});let i=!1;for(let h=0;h<a.length;h++){const v=a[h];let p="";const y=v.connectedEdges(function(w){return w.hasClass("directed")&&w.source().id()==v.id()&&w.target().hasClass("observed-variable")});if(y.length>0){i||(r+=`# measurement model
 `,i=!0);const w=y.map((d,g)=>({index:g,x:d.target().position().x})).sort((d,g)=>g.x-d.x).map(d=>d.index);console.log(w);for(let d=0;d<y.length;d++){const g=y[d].target();d>0&&(p+=" + "),p+=ua(g,y[w[d]])}r+=v.data("label")+" =~ "+p+`
 `}}let o=e.edges(function(h){return h.hasClass("directed")&&!h.source().hasClass("constant")&&!(h.source().hasClass("latent-variable")&&h.target().hasClass("observed-variable"))}),s=[];for(let h=0;h<o.length;h++)n1(s,o[h].target())||s.push(o[h].target());if(s.length>0){r+=`
# regressions
`;for(let h=0;h<s.length;h++){const v=s[h],p=v.connectedEdges(function(y){return y.hasClass("directed")&&y.target().id()==v.id()});if(p.length>0){let y="";for(var l=0;l<p.length;l++){var u=p[l].source();l>0&&(y+=" + "),y+=ua(u,p[l])}r+=v.data("label")+" ~ "+y+`
 `}}}let f=e.edges(function(h){return h.hasClass("undirected")||h.hasClass("loop")});if(f.length>0){r+=`
# residual (co)variances
`;for(let h=0;h<f.length;h++){let v=f[h].source().data("label");f[h].target().data("label"),r+=v+" ~~ "+ua(f[h].target(),f[h])+`
 `}}const c=e.nodes(function(h){return h.hasClass("constant")});for(let h=0;h<c.length;h++){c_node=c[h];const v=c_node.connectedEdges();if(v.length>0){r+=`# intercepts
 `;for(var l=0;l<v.length;l++){var u=v[l].target();r+=u.data("label")+" ~ "+ua(void 0,v[l])+`
`}}}return n+=`model = '
`+r+`'
 `,n+="result <- sem(model, data)",n}function i1(t,e,r){let n,a,i;return e==="=~"?(n="directed",a=t,i=r):(i=t,a=r,e==="~~"?t===r?n="loop":n="undirected":e==="~"&&(n="directed")),{directed:n,source:a,target:i}}function o1(t,e,r){const n=i1(t,e,r);return cy=Dt(Ft),cy.edges(function(i){let o=i.source().data("label")==n.source&&i.target().data("label")==n.target;return n.directed=="undirected"&&(o=o||i.source().data("label")==n.target&&i.target().data("label")==n.source),o})}function s1(){return typeof Shiny=="object"&&Shiny!==null}s1()&&(console.log("should not happen"),Shiny.addCustomMessageHandler("lav_results",function(t){for(let e=0;e<t.lhs.length;e++){const r=o1(t.lhs[e],t.op[e],t.rhs[e]);t.se[e]!==0?(r.data("est",t.est[e].toFixed(2)),r.addClass("hasEst"),r.data("p-value",t.pvalue[e].toFixed(2)),r.data("se",t.se[e].toFixed(2))):Math.abs(t.est[e]-1)<1e-9?(r.addClass("fixed"),r.removeClass("free"),r.data("value",1)):console.error("should never happen")}}));function l1(t){let e,r,n,a,i,o,s,l;return{c(){e=Bn(`'\r
`),r=Ne("div"),n=Ne("div"),a=Ne("button"),a.textContent="Create Script",i=Qe(),o=Ne("button"),o.textContent="Run lavaan",Ce(a,"type","button"),Ce(a,"class","btn btn-default"),Ce(o,"type","button"),Ce(o,"class","btn btn-default"),Ce(n,"class","btn-group svelte-zo4imv"),Ce(n,"role","group"),Ce(r,"class","toolbar svelte-zo4imv")},m(u,f){Me(u,e,f),Me(u,r,f),He(r,n),He(n,a),He(n,i),He(n,o),s||(l=[Gt(a,"click",t[1]),Gt(o,"click",t[2])],s=!0)},p:Be,i:Be,o:Be,d(u){u&&Le(e),u&&Le(r),s=!1,_r(l)}}}function u1(t,e,r){let n;Ln(t,gt,s=>r(3,n=s));function a(s){if(s){const f=cy.nodes(function(h){return h.hasClass("observed-variable")});for(var l=0;l<f.length;l++){const h=f[l];if(!h.hasClass("linked")){bootbox.alert("Observed variable "+h.data("label")+" is not linked to data. Cannot run.");return}}const c=cy.edges();for(var l=0;l<c.length;l++)c[l].removeData("est"),c[l].removeClass("hasEst")}let u=a1(s);Shiny.setInputValue("run",s),Shiny.setInputValue("R_script",u),ir(gt,n.runCounter=n.runCounter+1,n),Shiny.setInputValue("runCounter",n.runCounter)}return[a,()=>{a(!1)},()=>{a(!0)}]}class f1 extends at{constructor(e){super(),nt(this,e,u1,l1,Je,{})}}function c1(){return typeof Shiny=="object"&&Shiny!==null}function d1(t,e,r){let n;return Ln(t,gt,a=>r(0,n=a)),c1&&(console.log("handlers added"),Shiny.addCustomMessageHandler("columnNames",function(a){console.log("in handler"),ju(a,!0),ir(gt,n.columnNames=a,n),ir(gt,n.dataAvail=!0,n)}),Shiny.addCustomMessageHandler("fname",function(a){ir(gt,n.loadedFileName=a,n)})),[]}class h1 extends at{constructor(e){super(),nt(this,e,d1,null,Je,{})}}function v1(t){let e,r,n,a,i,o,s,l,u,f,c,h,v,p,y,w,d,g,m,b,E,S,C,T,_;return e=new db({}),n=new Gb({}),i=new Zb({}),l=new gb({}),f=new ob({}),h=new e1({}),p=new wb({}),w=new Wb({}),g=new Xb({}),b=new r1({}),S=new h1({}),T=new f1({}),{c(){je(e.$$.fragment),r=Qe(),je(n.$$.fragment),a=Qe(),je(i.$$.fragment),o=Qe(),s=Ne("div"),je(l.$$.fragment),u=Qe(),je(f.$$.fragment),c=Qe(),je(h.$$.fragment),v=Qe(),je(p.$$.fragment),y=Qe(),je(w.$$.fragment),d=Qe(),je(g.$$.fragment),m=Qe(),je(b.$$.fragment),E=Qe(),je(S.$$.fragment),C=Qe(),je(T.$$.fragment),Ce(s,"class","svelte-zdlqda")},m(P,F){Ye(e,P,F),Me(P,r,F),Ye(n,P,F),Me(P,a,F),Ye(i,P,F),Me(P,o,F),Me(P,s,F),Ye(l,s,null),He(s,u),Ye(f,s,null),He(s,c),Ye(h,s,null),He(s,v),Ye(p,s,null),He(s,y),Ye(w,s,null),Me(P,d,F),Ye(g,P,F),Me(P,m,F),Ye(b,P,F),Me(P,E,F),Ye(S,P,F),Me(P,C,F),Ye(T,P,F),_=!0},p:Be,i(P){_||(Ge(e.$$.fragment,P),Ge(n.$$.fragment,P),Ge(i.$$.fragment,P),Ge(l.$$.fragment,P),Ge(f.$$.fragment,P),Ge(h.$$.fragment,P),Ge(p.$$.fragment,P),Ge(w.$$.fragment,P),Ge(g.$$.fragment,P),Ge(b.$$.fragment,P),Ge(S.$$.fragment,P),Ge(T.$$.fragment,P),_=!0)},o(P){Ue(e.$$.fragment,P),Ue(n.$$.fragment,P),Ue(i.$$.fragment,P),Ue(l.$$.fragment,P),Ue(f.$$.fragment,P),Ue(h.$$.fragment,P),Ue(p.$$.fragment,P),Ue(w.$$.fragment,P),Ue(g.$$.fragment,P),Ue(b.$$.fragment,P),Ue(S.$$.fragment,P),Ue(T.$$.fragment,P),_=!1},d(P){Xe(e,P),P&&Le(r),Xe(n,P),P&&Le(a),Xe(i,P),P&&Le(o),P&&Le(s),Xe(l),Xe(f),Xe(h),Xe(p),Xe(w),P&&Le(d),Xe(g,P),P&&Le(m),Xe(b,P),P&&Le(E),Xe(S,P),P&&Le(C),Xe(T,P)}}}class g1 extends at{constructor(e){super(),nt(this,e,null,v1,Je,{})}}new g1({target:document.getElementById("app")});
