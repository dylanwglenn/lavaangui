import{g as pt}from"./core-js-bbf708ea.js";var ut={exports:{}};(function(ht,xt){(function(Ye,Re){ht.exports=Re()})(self,function(){return(()=>{var Ye={347:(K,f,e)=>{var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},r=e(218),o=e(259),c=e(171),g=e(961),l=0;K.exports=function(a,n){var v=a;o.options=a;var m,h,x,A,S,T,P,w,I,F,V,ce,ge,N,j,G,De,b,le,Z="cy-edge-bend-editing-cxt-add-bend-point"+l,se="cy-edge-bend-editing-cxt-remove-bend-point"+l,Ee="cy-edge-bend-editing-cxt-remove-multiple-bend-point"+l,Q="cy-edge-control-editing-cxt-add-control-point"+l,q="cy-edge-control-editing-cxt-remove-control-point"+l,J="cy-edge-bend-editing-cxt-remove-multiple-control-point"+l,pe=null,fe=null,Te=!1,Ne={init:function(){g(n,o,a);var R=a,_=$(this),Le="cy-node-edge-editing-stage"+l;l++;var Ue,k,Oe=$('<div id="'+Le+'"></div>');_.find("#"+Le).length<1&&_.append(Oe),(Ue=Konva.stages.length<l?new Konva.Stage({id:"node-edge-editing-stage",container:Le,width:_.width(),height:_.height()}):Konva.stages[l-1]).getChildren().length<1?(k=new Konva.Layer,Ue.add(k)):k=Ue.getChildren()[0];var E={edge:void 0,edgeType:"none",anchors:[],touchedAnchor:void 0,touchedAnchorIndex:void 0,bindListeners:function(s){s.on("mousedown touchstart",this.eMouseDown)},unbindListeners:function(s){s.off("mousedown touchstart",this.eMouseDown)},eMouseDown:function(s){n.autounselectify(!1),Te=!0,E.touchedAnchor=s.target,le=!1,E.edge.unselect();var t=o.syntax[E.edgeType].weight,d=o.syntax[E.edgeType].distance,u=E.edge;he={edge:u,type:E.edgeType,weights:u.data(t)?[].concat(u.data(t)):[],distances:u.data(d)?[].concat(u.data(d)):[]},De=n.style()._private.coreStyle["active-bg-opacity"]?n.style()._private.coreStyle["active-bg-opacity"].value:.15,n.style().selector("core").style("active-bg-opacity",0).update(),$e(),n.autoungrabify(!0),k.getStage().on("contentTouchend contentMouseup",E.eMouseUp),k.getStage().on("contentMouseout",E.eMouseOut)},eMouseUp:function(s){Te=!1,E.touchedAnchor=void 0,le=!1,E.edge.select(),n.style().selector("core").style("active-bg-opacity",De).update(),ct(),n.autounselectify(!0),n.autoungrabify(!1),k.getStage().off("contentTouchend contentMouseup",E.eMouseUp),k.getStage().off("contentMouseout",E.eMouseOut)},eMouseOut:function(s){le=!0},clearAnchorsExcept:function(){var s=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,d=!1;this.anchors.forEach(function(u,p){t&&u===t?d=!0:(s.unbindListeners(u),u.destroy())}),d?this.anchors=[t]:(this.anchors=[],this.edge=void 0,this.edgeType="none")},renderAnchorShapes:function(s){if(this.edge=s,this.edgeType=o.getEdgeType(s),s.hasClass("edgebendediting-hasbendpoints")||s.hasClass("edgecontrolediting-hascontrolpoints")){for(var t=o.getAnchorsAsArray(s),d=.65*Ke(s),u=(s.source().position(),s.target().position(),0);t&&u<t.length;u+=2){var p=t[u],y=t[u+1];this.renderAnchorShape(p,y,d)}k.draw()}},renderAnchorShape:function(s,t,d){var u=ue({x:s-d/2,y:t-d/2});d*=n.zoom();var p=new Konva.Rect({x:u.x,y:u.y,width:d,height:d,fill:"black",strokeWidth:0,draggable:!0});this.anchors.push(p),this.bindListeners(p),k.add(p)}},Ze=function(s,t){var d=s.target||s.cyTarget;if(!o.isIgnoredEdge(d)){var u,p,y,M,B=o.getEdgeType(d);B==="none"?(u=[],p=[]):(y=o.syntax[B].weight,M=o.syntax[B].distance,u=d.data(y)?[].concat(d.data(y)):d.data(y),p=d.data(M)?[].concat(d.data(M)):d.data(M));var W={edge:d,type:B,weights:u,distances:p};o.addAnchorPoint(void 0,void 0,t),D().undoable&&n.undoRedo().do("changeAnchorPoints",W)}z(),d.select()},Je=function(s){var t=E.edge,d=o.getEdgeType(t);if(!o.edgeTypeNoneShouldntHappen(d,"UiUtilities.js, cxtRemoveAnchorFcn")){var u={edge:t,type:d,weights:[].concat(t.data(o.syntax[d].weight)),distances:[].concat(t.data(o.syntax[d].distance))};o.removeAnchor(),D().undoable&&n.undoRedo().do("changeAnchorPoints",u),setTimeout(function(){z(),t.select()},50)}},et=function(s){var t=E.edge,d=o.getEdgeType(t),u={edge:t,type:d,weights:[].concat(t.data(o.syntax[d].weight)),distances:[].concat(t.data(o.syntax[d].distance))};o.removeAllAnchors(),D().undoable&&n.undoRedo().do("changeAnchorPoints",u),setTimeout(function(){z(),t.select()},50)},tt=R.handleReconnectEdge,nt=R.validateEdge,ot=R.actOnUnsuccessfulReconnection,it=[{id:Z,content:R.addBendMenuItemTitle,selector:"edge",onClickFunction:function(s){Ze(s,"bend")},hasTrailingDivider:R.useTrailingDividersAfterContextMenuOptions},{id:se,content:R.removeBendMenuItemTitle,selector:"edge",onClickFunction:Je,hasTrailingDivider:R.useTrailingDividersAfterContextMenuOptions},{id:Ee,content:R.removeAllBendMenuItemTitle,selector:R.enableMultipleAnchorRemovalOption&&":selected.edgebendediting-hasmultiplebendpoints",onClickFunction:et,hasTrailingDivider:R.useTrailingDividersAfterContextMenuOptions},{id:Q,content:R.addControlMenuItemTitle,selector:"edge",coreAsWell:!0,onClickFunction:function(s){Ze(s,"control")},hasTrailingDivider:R.useTrailingDividersAfterContextMenuOptions},{id:q,content:R.removeControlMenuItemTitle,selector:"edge",coreAsWell:!0,onClickFunction:Je,hasTrailingDivider:R.useTrailingDividersAfterContextMenuOptions},{id:J,content:R.removeAllControlMenuItemTitle,selector:R.enableMultipleAnchorRemovalOption&&":selected.edgecontrolediting-hasmultiplecontrolpoints",onClickFunction:et,hasTrailingDivider:R.useTrailingDividersAfterContextMenuOptions}];if(n.contextMenus){var st=n.contextMenus("get");st.isActive()?st.appendMenuItems(it):n.contextMenus({menuItems:it})}var yt=r(function(){Oe.attr("height",_.height()).attr("width",_.width()).css({position:"absolute",top:0,left:0,"z-index":D().zIndex}),setTimeout(function(){var s=Oe.offset(),t=_.offset();Oe.css({top:-(s.top-t.top),left:-(s.left-t.left)}),k.getStage().setWidth(_.width()),k.getStage().setHeight(_.height()),n&&z()},0)},250);function at(){yt()}at(),$(window).bind("resize",function(){at()});var dt,Be=_.data("cyedgeediting");function D(){return dt||(dt=_.data("cyedgeediting").options)}function ue(s){var t=n.pan(),d=n.zoom();return{x:s.x*d+t.x,y:s.y*d+t.y}}function z(){E.clearAnchorsExcept(E.touchedAnchor),pe!==null&&(pe.destroy(),pe=null),fe!==null&&(fe.destroy(),fe=null),k.draw(),b&&(E.renderAnchorShapes(b),function(s){if(s){var t=o.getAnchorsAsArray(s);t===void 0&&(t=[]);var d=s.sourceEndpoint(),u=s.targetEndpoint();if(d.x&&u.x&&(t.unshift(d.y),t.unshift(d.x),t.push(u.x),t.push(u.y),t)){var p={x:t[0],y:t[1]},y={x:t[t.length-2],y:t[t.length-1]},M={x:t[2],y:t[3]},B={x:t[t.length-4],y:t[t.length-3]};(function(W,O,C,U,Se){var ne=O.x-C/2,oe=O.y-C/2,Ie=U.x-C/2,Pe=U.y-C/2,We=Se.x-C/2,Xe=Se.y-C/2,ie=ue({x:W.x-C/2,y:W.y-C/2}),de=ue({x:ne,y:oe});C=C*n.zoom()/2;var H=ue({x:Ie,y:Pe}),re=ue({x:We,y:Xe}),Ce=C,we=Math.sqrt(Math.pow(H.x-ie.x,2)+Math.pow(H.y-ie.y,2)),Fe=ie.x+Ce/we*(H.x-ie.x),Y=ie.y+Ce/we*(H.y-ie.y),ze=Math.sqrt(Math.pow(re.x-de.x,2)+Math.pow(re.y-de.y,2)),Ge=de.x+Ce/ze*(re.x-de.x),Qe=de.y+Ce/ze*(re.y-de.y);pe===null&&(pe=new Konva.Circle({x:Fe+C,y:Y+C,radius:C,fill:"black"})),fe===null&&(fe=new Konva.Circle({x:Ge+C,y:Qe+C,radius:C,fill:"black"})),k.add(pe),k.add(fe),k.draw()})(p,y,.65*Ke(s),M,B)}}}(b))}function Ke(s){var t=D().anchorShapeSizeFactor;return parseFloat(s.css("width"))<=2.5?2.5*t:parseFloat(s.css("width"))*t}function je(s,t,d,u,p){return s>=u-d/2&&s<=u+d/2&&t>=p-d/2&&t<=p+d/2}function rt(s,t,d){var u=o.getEdgeType(d);if(u==="none"||d.data(o.syntax[u].weight)==null||d.data(o.syntax[u].weight).length==0)return-1;for(var p=o.getAnchorsAsArray(d),y=Ke(d),M=0;p&&M<p.length;M+=2)if(je(s,t,y,p[M],p[M+1]))return M/2;return-1}function $e(){N=n.panningEnabled(),j=n.zoomingEnabled(),G=n.boxSelectionEnabled(),n.zoomingEnabled(!1).panningEnabled(!1).boxSelectionEnabled(!1)}function ct(){n.zoomingEnabled(j).panningEnabled(N).boxSelectionEnabled(G)}Be==null&&(Be={}),Be.options=R;var gt=r(function(s,t,d,u){var p=s.data(o.syntax[t].weight),y=s.data(o.syntax[t].distance),M=o.convertToRelativePosition(s,u);p[d]=M.weight,y[d]=M.distance,s.data(o.syntax[t].weight,p),s.data(o.syntax[t].distance,y)},5);N=n.panningEnabled(),j=n.zoomingEnabled(),G=n.boxSelectionEnabled();var xe,ae,X,he,Me,L,me,ee,Ae,te=(ve=n.edges(":selected")).length;te===1&&(b=ve[0]),n.bind("zoom pan",A=function(){b&&z()}),n.on("data","edge",ge=function(){b&&z()}),n.on("style","edge.edgebendediting-hasbendpoints:selected, edge.edgecontrolediting-hascontrolpoints:selected",m=function(){setTimeout(function(){z()},50)}),n.on("remove","edge",h=function(){if(this.selected()){if(te-=1,n.startBatch(),b&&b.removeClass("cy-edge-editing-highlight"),te===1){var s=n.edges(":selected");s.length===1?(b=s[0]).addClass("cy-edge-editing-highlight"):b=void 0}else b=void 0;n.endBatch()}z()}),n.on("add","edge",x=function(){this.selected()&&(te+=1,n.startBatch(),b&&b.removeClass("cy-edge-editing-highlight"),te===1?(b=this).addClass("cy-edge-editing-highlight"):b=void 0,n.endBatch()),z()}),n.on("select","edge",S=function(){var s=this;s.target().connectedEdges().length!=0&&s.source().connectedEdges().length!=0&&(te+=1,n.startBatch(),b&&b.removeClass("cy-edge-editing-highlight"),te===1?(b=s).addClass("cy-edge-editing-highlight"):b=void 0,n.endBatch(),z())}),n.on("unselect","edge",T=function(){if(te-=1,n.startBatch(),b&&b.removeClass("cy-edge-editing-highlight"),te===1){var s=n.edges(":selected");s.length===1?(b=s[0]).addClass("cy-edge-editing-highlight"):b=void 0}else b=void 0;n.endBatch(),z()});var ye,qe,_e,He,ve,ke=!1;n.on("tapstart",P=function(s){ae=s.position||s.cyPosition}),n.on("tapstart","edge",w=function(s){var t=this;if(b&&b.id()===t.id()){X=t,o.getEdgeType(t);var d=function(y,M,B){var W=Ke(B),O=B._private.rscratch.allpts,C={x:O[0],y:O[1]},U={x:O[O.length-2],y:O[O.length-1]};return ue(C),ue(U),je(y,M,W,C.x,C.y)?0:je(y,M,W,U.x,U.y)?1:-1}(ae.x,ae.y,t);if(d==0||d==1){t.unselect(),L=d,ee=d==0?X.source():X.target();var u=d==0?"source":"target",p=c.disconnectEdge(X,n,s.renderedPosition,u);me=p.dummyNode,X=p.edge,$e()}else xe=void 0,Me=!0}else Me=!1}),n.on("drag","node",ce=function(){b&&z()}),n.on("tapdrag",I=function(s){n.edges(":selected").length>0&&n.autounselectify(!1);var t=X;if(X===void 0||!o.isIgnoredEdge(t)){var d=o.getEdgeType(t);if(Me&&R.enableCreateAnchorOnDrag&&!Te&&d!=="none"){var u=o.syntax[d].weight,p=o.syntax[d].distance;he={edge:t,type:d,weights:t.data(u)?[].concat(t.data(u)):[],distances:t.data(p)?[].concat(t.data(p)):[]},t.unselect(),xe=o.addAnchorPoint(t,ae),X=t,Me=void 0,ke=!0,$e()}if(Te||X!==void 0&&(xe!==void 0||L!==void 0)){var y=s.position||s.cyPosition;L!=-1&&me?me.position(y):xe!=null?gt(t,d,xe,y):Te&&(E.touchedAnchorIndex===void 0&&ae&&(E.touchedAnchorIndex=rt(ae.x,ae.y,E.edge)),E.touchedAnchorIndex!==void 0&&gt(E.edge,E.edgeType,E.touchedAnchorIndex,y)),s.target&&s.target[0]&&s.target.isNode()&&(Ae=s.target)}}}),n.on("tapend",F=function(s){le&&k.getStage().fire("contentMouseup");var t=X||E.edge;if(t!==void 0){var d=E.touchedAnchorIndex;if(d!=null){var u,p=t.source().position("x"),y=t.source().position("y"),M=t.target().position("x"),B=t.target().position("y"),W=o.getAnchorsAsArray(t),O=[p,y].concat(W).concat([M,B]),C=d+1,U=C-1,Se=C+1,ne={x:O[2*C],y:O[2*C+1]},oe={x:O[2*U],y:O[2*U+1]},Ie={x:O[2*Se],y:O[2*Se+1]};if(ne.x===oe.x&&ne.y===oe.y||ne.x===oe.x&&ne.y===oe.y)u=!0;else{var Pe,We=(oe.y-Ie.y)/(oe.x-Ie.x),Xe={srcPoint:oe,tgtPoint:Ie,m1:We,m2:-1/We},ie=o.getIntersection(t,ne,Xe),de=Math.sqrt(Math.pow(ne.x-ie.x,2)+Math.pow(ne.y-ie.y,2));(Pe=o.getEdgeType(t))==="bend"&&de<D().bendRemovalSensitivity&&(u=!0)}u&&o.removeAnchor(t,d)}else if(me!=null&&(L==0||L==1)){var H=ee,re="valid",Ce=L==0?"source":"target";if(Ae){var we=L==0?Ae:t.source(),Fe=L==1?Ae:t.target();typeof nt=="function"&&(re=nt(t,we,Fe)),H=re==="valid"?Ae:ee}if(we=L==0?H:t.source(),Fe=L==1?H:t.target(),t=c.connectEdge(t,ee,Ce),ee.id()!==H.id())if(typeof tt=="function"){var Y=tt(we.id(),Fe.id(),t.data());if(Y&&(c.copyEdge(t,Y),o.initAnchorPoints(D().bendPositionsFunction,D().controlPositionsFunction,[Y])),Y&&D().undoable){var ze={newEdge:Y,oldEdge:t};n.undoRedo().do("removeReconnectedEdge",ze),t=Y}else Y&&(n.remove(t),t=Y)}else{var Ge=L==0?{source:H.id()}:{target:H.id()},Qe=L==0?{source:ee.id()}:{target:ee.id()};if(D().undoable&&H.id()!==ee.id()){var vt={edge:t,location:Ge,oldLoc:Qe};t=n.undoRedo().do("reconnectEdge",vt).edge}}re!=="valid"&&typeof ot=="function"&&ot(),t.select(),n.remove(me)}}(Pe=o.getEdgeType(t))==="none"&&(Pe="bend"),E.touchedAnchorIndex!==void 0||ke||(he=void 0);var lt=o.syntax[Pe].weight;t!==void 0&&he!==void 0&&(t.data(lt)?t.data(lt).toString():null)!=he.weights.toString()&&(ke&&(t.select(),n.autounselectify(!0)),D().undoable&&n.undoRedo().do("changeAnchorPoints",he)),xe=void 0,X=void 0,he=void 0,Me=void 0,L=void 0,me=void 0,ee=void 0,Ae=void 0,ae=void 0,ke=!1,E.touchedAnchorIndex=void 0,ct(),setTimeout(function(){z()},50)}),n.on("edgeediting.movestart",function(s,t){He=!1,t[0]!=null&&t.forEach(function(d){o.getAnchorsAsArray(d)==null||He||(qe={x:o.getAnchorsAsArray(d)[0],y:o.getAnchorsAsArray(d)[1]},ye={firstTime:!0,firstAnchorPosition:{x:qe.x,y:qe.y},edges:t},_e=d,He=!0)})}),n.on("edgeediting.moveend",function(s,t){if(ye!=null){var d=ye.firstAnchorPosition,u={x:o.getAnchorsAsArray(_e)[0],y:o.getAnchorsAsArray(_e)[1]};ye.positionDiff={x:-u.x+d.x,y:-u.y+d.y},delete ye.firstAnchorPosition,D().undoable&&n.undoRedo().do("moveAnchorPoints",ye),ye=void 0}}),n.on("cxttap",V=function(s){var t,d,u=s.target||s.cyTarget,p=!1;try{p=u.isEdge()}catch{}p?(t=u,d=o.getEdgeType(t)):(t=E.edge,d=E.edgeType);var y=n.contextMenus("get");if(!b||b.id()!=t.id()||o.isIgnoredEdge(t)||b!==t)return y.hideMenuItem(se),y.hideMenuItem(Z),y.hideMenuItem(q),void y.hideMenuItem(Q);var M=s.position||s.cyPosition,B=rt(M.x,M.y,t);B==-1?(y.hideMenuItem(se),y.hideMenuItem(q),d==="control"&&p?(y.showMenuItem(Q),y.hideMenuItem(Z)):d==="bend"&&p?(y.showMenuItem(Z),y.hideMenuItem(Q)):p?(y.showMenuItem(Z),y.showMenuItem(Q)):(y.hideMenuItem(Z),y.hideMenuItem(Q)),o.currentCtxPos=M):(y.hideMenuItem(Z),y.hideMenuItem(Q),d==="control"?(y.showMenuItem(q),y.hideMenuItem(se),R.enableMultipleAnchorRemovalOption&&t.hasClass("edgecontrolediting-hasmultiplecontrolpoints")&&y.showMenuItem(J)):d==="bend"?(y.showMenuItem(se),y.hideMenuItem(q)):(y.hideMenuItem(se),y.hideMenuItem(q),y.hideMenuItem(J)),o.currentAnchorIndex=B),o.currentCtxEdge=t}),n.on("cyedgeediting.changeAnchorPoints","edge",function(){n.startBatch(),n.edges().unselect(),n.trigger("bendPointMovement"),n.endBatch(),z()});var Ve=!1,be={37:!1,38:!1,39:!1,40:!1};document.addEventListener("keydown",function(s){if(typeof D().moveSelectedAnchorsOnKeyEvents=="function"?D().moveSelectedAnchorsOnKeyEvents():D().moveSelectedAnchorsOnKeyEvents){var t,d,u=document.activeElement.tagName;if(u!="TEXTAREA"&&u!="INPUT"){switch(s.keyCode){case 37:case 39:case 38:case 40:case 32:s.preventDefault()}if(s.keyCode<"37"||s.keyCode>"40"||(be[s.keyCode]=!0,n.edges(":selected").length!=n.elements(":selected").length||n.edges(":selected").length!=1))return;Ve||(ve=n.edges(":selected"),n.trigger("edgeediting.movestart",[ve]),Ve=!0);var p=3;if(s.altKey&&s.shiftKey)return;s.altKey?p=1:s.shiftKey&&(p=10);var y=0,M=0;y+=be[39]?p:0,y-=be[37]?p:0,M+=be[40]?p:0,M-=be[38]?p:0,t={x:y,y:M},(d=ve).forEach(function(B){var W=o.getAnchorsAsArray(B),O=[];if(W!=null){for(var C=0;C<W.length;C+=2)O.push({x:W[C]+t.x,y:W[C+1]+t.y});var U=o.getEdgeType(B);if(o.edgeTypeNoneShouldntHappen(U,"UiUtilities.js, moveAnchorPoints"))return;U==="bend"?a.bendPointPositionsSetterFunction(B,O):U==="control"&&a.controlPointPositionsSetterFunction(B,O)}}),o.initAnchorPoints(D().bendPositionsFunction,D().controlPositionsFunction,d),n.trigger("bendPointMovement")}}},!0),document.addEventListener("keyup",function(s){s.keyCode<"37"||s.keyCode>"40"||(s.preventDefault(),be[s.keyCode]=!1,(typeof D().moveSelectedAnchorsOnKeyEvents=="function"?D().moveSelectedAnchorsOnKeyEvents():D().moveSelectedAnchorsOnKeyEvents)&&(n.trigger("edgeediting.moveend",[ve]),ve=void 0,Ve=!1))},!0),_.data("cyedgeediting",Be)},unbind:function(){n.off("remove","node",h).off("add","node",x).off("style","edge.edgebendediting-hasbendpoints:selected, edge.edgecontrolediting-hascontrolpoints:selected",m).off("select","edge",S).off("unselect","edge",T).off("tapstart",P).off("tapstart","edge",w).off("tapdrag",I).off("tapend",F).off("cxttap",V).off("drag","node",ce).off("data","edge",ge),n.unbind("zoom pan",A)}};return Ne[v]?Ne[v].apply($(n.container()),Array.prototype.slice.call(arguments,1)):(v===void 0?"undefined":i(v))!="object"&&v?($.error("No such function `"+v+"` for cytoscape.js-edge-editing"),$(this)):Ne.init.apply($(n.container()),arguments)}},259:K=>{var f={options:void 0,currentCtxEdge:void 0,currentCtxPos:void 0,currentAnchorIndex:void 0,ignoredClasses:void 0,setIgnoredClasses:function(e){this.ignoredClasses=e},syntax:{bend:{edge:"segments",class:"edgebendediting-hasbendpoints",multiClass:"edgebendediting-hasmultiplebendpoints",weight:"cyedgebendeditingWeights",distance:"cyedgebendeditingDistances",weightCss:"segment-weights",distanceCss:"segment-distances"},control:{edge:"unbundled-bezier",class:"edgecontrolediting-hascontrolpoints",multiClass:"edgecontrolediting-hasmultiplecontrolpoints",weight:"cyedgecontroleditingWeights",distance:"cyedgecontroleditingDistances",weightCss:"control-point-weights",distanceCss:"control-point-distances"}},getEdgeType:function(e){return e?e.hasClass(this.syntax.bend.class)?"bend":e.hasClass(this.syntax.control.class)?"control":e.css("curve-style")===this.syntax.bend.edge?"bend":e.css("curve-style")===this.syntax.control.edge?"control":this.options.bendPositionsFunction(e)&&this.options.bendPositionsFunction(e).length>0?"bend":this.options.controlPositionsFunction(e)&&this.options.controlPositionsFunction(e).length>0?"control":"none":"none"},initAnchorPoints:function(e,i,r){for(var o=0;o<r.length;o++){var c=r[o],g=this.getEdgeType(c);if(g!=="none"&&!this.isIgnoredEdge(c)){var l;g==="bend"?l=e.apply(this,c):g==="control"&&(l=i.apply(this,c));var a={weights:[],distances:[]};if(l)a=this.convertToRelativePositions(c,l);else{var n=c.data(this.syntax[g].weight),v=c.data(this.syntax[g].distance);n&&v&&(a={weights:n,distances:v})}a.distances.length>0?(c.data(this.syntax[g].weight,a.weights),c.data(this.syntax[g].distance,a.distances),c.addClass(this.syntax[g].class),a.distances.length>1&&c.addClass(this.syntax[g].multiClass)):(c.data(this.syntax[g].weight,[]),c.data(this.syntax[g].distance,[]),c.hasClass(this.syntax[g].class)&&c.removeClass(this.syntax[g].class),c.hasClass(this.syntax[g].multiClass)&&c.removeClass(this.syntax[g].multiClass))}}},isIgnoredEdge:function(e){var i=e.source().position("x"),r=e.source().position("y"),o=e.target().position("x"),c=e.target().position("y");if(i==o&&r==c||e.source().id()==e.target().id())return!0;for(var g=0;this.ignoredClasses&&g<this.ignoredClasses.length;g++)if(e.hasClass(this.ignoredClasses[g]))return!0;return!1},getLineDirection:function(e,i){return e.y==i.y&&e.x<i.x?1:e.y<i.y&&e.x<i.x?2:e.y<i.y&&e.x==i.x?3:e.y<i.y&&e.x>i.x?4:e.y==i.y&&e.x>i.x?5:e.y>i.y&&e.x>i.x?6:e.y>i.y&&e.x==i.x?7:8},getSrcTgtPointsAndTangents:function(e){var i=e.source(),r=e.target(),o=(r.position(),i.position(),i.position()),c=r.position(),g=(c.y-o.y)/(c.x-o.x);return{m1:g,m2:-1/g,srcPoint:o,tgtPoint:c}},getIntersection:function(e,i,r){r===void 0&&(r=this.getSrcTgtPointsAndTangents(e));var o,c,g=r.srcPoint,l=(r.tgtPoint,r.m1),a=r.m2;if(l==1/0||l==-1/0)o=g.x,c=i.y;else if(l==0)o=i.x,c=g.y;else{var n=g.y-l*g.x;c=l*(o=(i.y-a*i.x-n)/(l-a))+n}return{x:o,y:c}},getAnchorsAsArray:function(e){var i=this.getEdgeType(e);if(i!=="none"&&e.css("curve-style")===this.syntax[i].edge){for(var r=[],o=e.pstyle(this.syntax[i].weightCss)?e.pstyle(this.syntax[i].weightCss).pfValue:[],c=e.pstyle(this.syntax[i].distanceCss)?e.pstyle(this.syntax[i].distanceCss).pfValue:[],g=Math.min(o.length,c.length),l=e.source().position(),a=e.target().position(),n=a.y-l.y,v=a.x-l.x,m=Math.sqrt(v*v+n*n),h={x:v/m,y:n/m},x=-h.y,A=h.x,S=0;S<g;S++){var T=o[S],P=c[S],w=1-T,I=T,F={x1:l.x,x2:a.x,y1:l.y,y2:a.y},V={x:F.x1*w+F.x2*I,y:F.y1*w+F.y2*I};r.push(V.x+x*P,V.y+A*P)}return r}},convertToRelativePosition:function(e,i,r){r===void 0&&(r=this.getSrcTgtPointsAndTangents(e));var o,c=this.getIntersection(e,i,r),g=c.x,l=c.y,a=r.srcPoint,n=r.tgtPoint;o=g!=a.x?(g-a.x)/(n.x-a.x):l!=a.y?(l-a.y)/(n.y-a.y):0;var v=Math.sqrt(Math.pow(l-i.y,2)+Math.pow(g-i.x,2)),m=this.getLineDirection(a,n),h=this.getLineDirection(c,i);return m-h!=-2&&m-h!=6&&v!=0&&(v*=-1),{weight:o,distance:v}},convertToRelativePositions:function(e,i){for(var r=this.getSrcTgtPointsAndTangents(e),o=[],c=[],g=0;i&&g<i.length;g++){var l=i[g],a=this.convertToRelativePosition(e,l,r);o.push(a.weight),c.push(a.distance)}return{weights:o,distances:c}},getDistancesString:function(e,i){for(var r="",o=e.data(this.syntax[i].distance),c=0;o&&c<o.length;c++)r=r+" "+o[c];return r},getWeightsString:function(e,i){for(var r="",o=e.data(this.syntax[i].weight),c=0;o&&c<o.length;c++)r=r+" "+o[c];return r},addAnchorPoint:function(e,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;e!==void 0&&i!==void 0||(e=this.currentCtxEdge,i=this.currentCtxPos),r===void 0&&(r=this.getEdgeType(e));for(var o,c=this.syntax[r].weight,g=this.syntax[r].distance,l=this.convertToRelativePosition(e,i),a=l.weight,n=e.source().position("x"),v=e.source().position("y"),m=e.target().position("x"),h=e.target().position("y"),x=this.convertToRelativePosition(e,{x:n,y:v}).weight,A=this.convertToRelativePosition(e,{x:m,y:h}).weight,S=[x].concat(e.data(c)?e.data(c):[]).concat([A]),T=this.getAnchorsAsArray(e),P=1/0,w=[n,v].concat(T||[]).concat([m,h]),I=-1,F=0;F<S.length-1;F++){var V=S[F],ce=S[F+1],ge=this.compareWithPrecision(a,V,!0),N=this.compareWithPrecision(a,ce),j=this.compareWithPrecision(a,ce,!0),G=this.compareWithPrecision(a,V);if(ge&&N||j&&G){var De={x:n=w[2*F],y:v=w[2*F+1]},b={x:m=w[2*F+2],y:h=w[2*F+3]},le=(v-h)/(n-m),Z=-1/le,se={srcPoint:De,tgtPoint:b,m1:le,m2:Z},Ee=this.getIntersection(e,i,se),Q=Math.sqrt(Math.pow(i.x-Ee.x,2)+Math.pow(i.y-Ee.y,2));Q<P&&(P=Q,o=Ee,I=F)}}o!==void 0&&(i=o),l=this.convertToRelativePosition(e,i),o===void 0&&(l.distance=0);var q=e.data(c),J=e.data(g);return J=J||[],(q=q||[]).length===0&&(I=0),I!=-1&&(q.splice(I,0,l.weight),J.splice(I,0,l.distance)),e.data(c,q),e.data(g,J),e.addClass(this.syntax[r].class),(q.length>1||J.length>1)&&e.addClass(this.syntax[r].multiClass),I},removeAnchor:function(e,i){e!==void 0&&i!==void 0||(e=this.currentCtxEdge,i=this.currentAnchorIndex);var r=this.getEdgeType(e);if(!this.edgeTypeNoneShouldntHappen(r,"anchorPointUtilities.js, removeAnchor")){var o,c=this.syntax[r].weight,g=this.syntax[r].distance,l=e.data(c),a=e.data(g);r==="bend"?o=this.options.bendPositionsFunction(e):r==="control"&&(o=this.options.controlPositionsFunction(e)),l.splice(i,1),a.splice(i,1),o&&o.splice(i,1),l.length==1||a.length==1?e.removeClass(this.syntax[r].multiClass):l.length==0||a.length==0?(e.removeClass(this.syntax[r].class),e.data(c,[]),e.data(g,[])):(e.data(c,l),e.data(g,a))}},removeAllAnchors:function(e){e===void 0&&(e=this.currentCtxEdge);var i=this.getEdgeType(e);if(!this.edgeTypeNoneShouldntHappen(i,"anchorPointUtilities.js, removeAllAnchors")){e.removeClass(this.syntax[i].class),e.removeClass(this.syntax[i].multiClass);var r=this.syntax[i].weight,o=this.syntax[i].distance;e.data(r,[]),e.data(o,[]),i==="bend"&&this.options.bendPositionsFunction(e)?this.options.bendPointPositionsSetterFunction(e,[]):i==="control"&&this.options.controlPositionsFunction(e)&&this.options.controlPointPositionsSetterFunction(e,[])}},calculateDistance:function(e,i){var r=e.x-i.x,o=e.y-i.y;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))},compareWithPrecision:function(e,i){var r=arguments.length>2&&arguments[2]!==void 0&&arguments[2],o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.01,c=e-i;return Math.abs(c)<=o||(r?e<i:e>i)},edgeTypeNoneShouldntHappen:function(e,i){return e==="none"&&(console.log("In "+i+": edge type none should never happen here!!"),!0)}};K.exports=f},218:K=>{var f,e,i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},r=(f=Math.max,e=Date.now||function(){return new Date().getTime()},function(o,c,g){var l,a,n,v,m,h,x,A,S,T=0,P=!1,w=!0;if(typeof o!="function")throw new TypeError("Expected a function");if(c=c<0?0:+c||0,g===!0){var I=!0;w=!1}else S=(A=g)===void 0?"undefined":i(A),!A||S!="object"&&S!="function"||(I=!!g.leading,P="maxWait"in g&&f(+g.maxWait||0,c),w="trailing"in g?!!g.trailing:w);function F(N,j){j&&clearTimeout(j),a=h=x=void 0,N&&(T=e(),n=o.apply(m,l),h||a||(l=m=void 0))}function V(){var N=c-(e()-v);N<=0||N>c?F(x,a):h=setTimeout(V,N)}function ce(){F(w,h)}function ge(){if(l=arguments,v=e(),m=this,x=w&&(h||!I),P===!1)var N=I&&!h;else{a||I||(T=v);var j=P-(v-T),G=j<=0||j>P;G?(a&&(a=clearTimeout(a)),T=v,n=o.apply(m,l)):a||(a=setTimeout(ce,j))}return G&&h?h=clearTimeout(h):h||c===P||(h=setTimeout(V,c)),N&&(G=!0,n=o.apply(m,l)),!G||h||a||(l=m=void 0),n}return ge.cancel=function(){h&&clearTimeout(h),a&&clearTimeout(a),T=0,a=h=x=void 0},ge});K.exports=r},579:(K,f,e)=>{var i,r,o;r=e(259),e(218),o=function(c,g,l){var a=e(347);if(c&&g&&l){var n,v={bendPositionsFunction:function(h){return h.data("bendPointPositions")},controlPositionsFunction:function(h){return h.data("controlPointPositions")},bendPointPositionsSetterFunction:function(h,x){h.data("bendPointPositions",x)},controlPointPositionsSetterFunction:function(h,x){h.data("controlPointPositions",x)},initAnchorsAutomatically:!0,ignoredClasses:[],undoable:!1,anchorShapeSizeFactor:3,zIndex:999,bendRemovalSensitivity:8,addBendMenuItemTitle:"Add Bend Point",removeBendMenuItemTitle:"Remove Bend Point",removeAllBendMenuItemTitle:"Remove All Bend Points",addControlMenuItemTitle:"Add Control Point",removeControlMenuItemTitle:"Remove Control Point",removeAllControlMenuItemTitle:"Remove All Control Points",moveSelectedAnchorsOnKeyEvents:function(){return!0},enableMultipleAnchorRemovalOption:!1,useTrailingDividersAfterContextMenuOptions:!1,enableCreateAnchorOnDrag:!0},m=!1;c("core","edgeEditing",function(h){var x=this;return h==="initialized"?m:(h!=="get"&&(n=function(A,S){var T={};for(var P in A)T[P]=A[P];for(var P in S)if(P=="bendRemovalSensitivity"){var w=S[P];isNaN(w)||(T[P]=w>=0&&w<=20?S[P]:w<0?0:20)}else T[P]=S[P];return T}(v,h),m=!0,x.style().selector(".edgebendediting-hasbendpoints").css({"curve-style":"segments","segment-distances":function(A){return r.getDistancesString(A,"bend")},"segment-weights":function(A){return r.getWeightsString(A,"bend")},"edge-distances":"node-position"}),x.style().selector(".edgecontrolediting-hascontrolpoints").css({"curve-style":"unbundled-bezier","control-point-distances":function(A){return r.getDistancesString(A,"control")},"control-point-weights":function(A){return r.getWeightsString(A,"control")},"edge-distances":"node-position"}),x.style().selector("#nwt_reconnectEdge_dummy").css({width:"1",height:"1",visibility:"hidden"}),r.setIgnoredClasses(n.ignoredClasses),n.initAnchorsAutomatically&&r.initAnchorPoints(n.bendPositionsFunction,n.controlPositionsFunction,x.edges(),n.ignoredClasses),a(n,x)),m?{getAnchorsAsArray:function(A){return r.getAnchorsAsArray(A)},initAnchorPoints:function(A){r.initAnchorPoints(n.bendPositionsFunction,n.controlPositionsFunction,A)},deleteSelectedAnchor:function(A,S){r.removeAnchor(A,S)},getEdgeType:function(A){return r.getEdgeType(A)}}:void 0)})}},K.exports&&(K.exports=o),(i=(function(){return o}).call(f,e,f,K))===void 0||(K.exports=i),typeof cytoscape<"u"&&$&&Konva&&o(cytoscape,$,Konva)},171:K=>{K.exports={disconnectEdge:function(f,e,i,r){var o={data:{id:"nwt_reconnectEdge_dummy",ports:[]},renderedPosition:i};e.add(o);var c=r==="source"?{source:o.data.id}:{target:o.data.id};return f=f.move(c)[0],{dummyNode:e.nodes("#"+o.data.id)[0],edge:f}},connectEdge:function(f,e,i){if(f.isEdge()&&e.isNode()){var r={};if(i==="source")r.source=e.id();else{if(i!=="target")return;r.target=e.id()}return f.move(r)[0]}},copyEdge:function(f,e){this.copyAnchors(f,e),this.copyStyle(f,e)},copyStyle:function(f,e){f&&e&&(e.data("line-color",f.data("line-color")),e.data("width",f.data("width")),e.data("cardinality",f.data("cardinality")))},copyAnchors:function(f,e){if(f.hasClass("edgebendediting-hasbendpoints")){var i=f.data("cyedgebendeditingDistances"),r=f.data("cyedgebendeditingWeights");e.data("cyedgebendeditingDistances",i),e.data("cyedgebendeditingWeights",r),e.addClass("edgebendediting-hasbendpoints")}else f.hasClass("edgecontrolediting-hascontrolpoints")&&(i=f.data("cyedgecontroleditingDistances"),r=f.data("cyedgecontroleditingWeights"),e.data("cyedgecontroleditingDistances",i),e.data("cyedgecontroleditingWeights",r),e.addClass("edgecontrolediting-hascontrolpoints"));f.hasClass("edgebendediting-hasmultiplebendpoints")?e.addClass("edgebendediting-hasmultiplebendpoints"):f.hasClass("edgecontrolediting-hasmultiplecontrolpoints")&&e.addClass("edgecontrolediting-hasmultiplecontrolpoints")}}},961:K=>{K.exports=function(f,e,i){if(f.undoRedo!=null){var r=f.undoRedo({defaultActions:!1,isDebug:!0});r.action("changeAnchorPoints",o,o),r.action("moveAnchorPoints",c,c),r.action("reconnectEdge",g,g),r.action("removeReconnectedEdge",l,l)}function o(a){var n,v,m,h,x=f.getElementById(a.edge.id()),A=a.type!=="none"?a.type:e.getEdgeType(x);a.type!=="none"||a.set?(m=e.syntax[A].weight,h=e.syntax[A].distance,n=a.set?x.data(m):a.weights,v=a.set?x.data(h):a.distances):(n=[],v=[]);var S={edge:x,type:A,weights:n,distances:v,set:!0};if(a.set){var T=a.weights&&a.weights.length>0,P=T&&a.weights.length>1;T&&(x.data(m,a.weights),x.data(h,a.distances));var w=e.syntax[A].class,I=e.syntax[A].multiClass;T||P?T&&!P?(x.addClass(w),x.removeClass(I)):x.addClass(w+" "+I):x.removeClass(w+" "+I),T||(x.data(m,[]),x.data(h,[])),x.selected()&&x.unselect(),x.select()}return x.trigger("cyedgeediting.changeAnchorPoints"),S}function c(a){if(a.firstTime)return delete a.firstTime,a;var n=a.edges,v=a.positionDiff,m={edges:n,positionDiff:{x:-v.x,y:-v.y}};return function(h,x){x.forEach(function(A){var S=e.getEdgeType(A),T=e.getAnchorsAsArray(A),P=[];if(T!=null){for(var w=0;w<T.length;w+=2)P.push({x:T[w]+h.x,y:T[w+1]+h.y});S==="bend"?i.bendPointPositionsSetterFunction(A,P):S==="control"&&i.controlPointPositionsSetterFunction(A,P)}}),e.initAnchorPoints(i.bendPositionsFunction,i.controlPositionsFunction,x)}(v,n),m}function g(a){var n=a.edge,v=a.location,m=a.oldLoc,h={edge:n=n.move(v)[0],location:m,oldLoc:v};return n.unselect(),h}function l(a){var n=a.oldEdge;(v=f.getElementById(n.data("id")))&&v.length>0&&(n=v);var v,m=a.newEdge;return(v=f.getElementById(m.data("id")))&&v.length>0&&(m=v),n.inside()&&(n=n.remove()[0]),m.removed()&&(m=m.restore()).unselect(),{oldEdge:m,newEdge:n}}}}},Re={};return function K(f){var e=Re[f];if(e!==void 0)return e.exports;var i=Re[f]={exports:{}};return Ye[f](i,i.exports,K),i.exports}(579)})()})})(ut);var ft=ut.exports;const At=pt(ft);export{At as e};
