import{g as pt}from"./core-js-93797867.js";var ut={exports:{}};(function(ht,mt){(function(Ge,De){ht.exports=De()})(self,()=>(()=>{var Ge={167:(z,x,e)=>{var d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},a=e(630),o=e(926),l=e(42),g=e(861),u=0;z.exports=function(s,n){var y=s;o.options=s;var v,p,f,P,E,b,S,F,B,D,_,ae,ce,k,U,Y,Pe,T,ie,J="cy-edge-bend-editing-cxt-add-bend-point"+u,j="cy-edge-bend-editing-cxt-remove-bend-point"+u,le="cy-edge-bend-editing-cxt-remove-multiple-bend-point"+u,ge="cy-edge-control-editing-cxt-add-control-point"+u,fe="cy-edge-control-editing-cxt-remove-control-point"+u,He="cy-edge-bend-editing-cxt-remove-multiple-control-point"+u,me=null,xe=null,Ee=!1,ke={init:function(){g(n,o,s);var c=s,Z=n.container(),Le=null,Ne="cy-node-edge-editing-stage"+u;u++;var Ue,K,V=document.createElement("div");V.setAttribute("id",Ne),Z.querySelector("#"+Ne)||Z.append(V),(Ue=Konva.stages.length<u?new Konva.Stage({id:"node-edge-editing-stage",container:Ne,width:Z.clientWidth,height:Z.clientHeight}):Konva.stages[u-1]).getChildren().length<1?(K=new Konva.Layer,Ue.add(K)):K=Ue.getChildren()[0];var M={edge:void 0,edgeType:"none",anchors:[],touchedAnchor:void 0,touchedAnchorIndex:void 0,bindListeners:function(i){i.on("mousedown touchstart",this.eMouseDown)},unbindListeners:function(i){i.off("mousedown touchstart",this.eMouseDown)},eMouseDown:function(i){n.autounselectify(!1),Ee=!0,M.touchedAnchor=i.target,ie=!1,M.edge.unselect();var t=o.syntax[M.edgeType].weight,r=o.syntax[M.edgeType].distance,h=M.edge;he={edge:h,type:M.edgeType,weights:h.data(t)?[].concat(h.data(t)):[],distances:h.data(r)?[].concat(h.data(r)):[]},Pe=n.style()._private.coreStyle["active-bg-opacity"]?n.style()._private.coreStyle["active-bg-opacity"].value:.15,n.style().selector("core").style("active-bg-opacity",0).update(),_e(),n.autoungrabify(!0),K.getStage().on("contentTouchend contentMouseup",M.eMouseUp),K.getStage().on("contentMouseout",M.eMouseOut)},eMouseUp:function(i){Ee=!1,M.touchedAnchor=void 0,ie=!1,M.edge.select(),n.style().selector("core").style("active-bg-opacity",Pe).update(),ct(),n.autounselectify(!0),n.autoungrabify(!1),K.getStage().off("contentTouchend contentMouseup",M.eMouseUp),K.getStage().off("contentMouseout",M.eMouseOut)},eMouseOut:function(i){ie=!0},clearAnchorsExcept:function(){var i=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,r=!1;this.anchors.forEach(function(h,m){t&&h===t?r=!0:(i.unbindListeners(h),h.destroy())}),r?this.anchors=[t]:(this.anchors=[],this.edge=void 0,this.edgeType="none")},renderAnchorShapes:function(i){if(this.edge=i,this.edgeType=o.getEdgeType(i),c.handleAnchors&&(i.hasClass("edgebendediting-hasbendpoints")||i.hasClass("edgecontrolediting-hascontrolpoints"))){for(var t=o.getAnchorsAsArray(i),r=.65*Oe(i),h=0;t&&h<t.length;h+=2){var m=t[h],w=t[h+1];this.renderAnchorShape(m,w,r)}K.draw()}},renderAnchorShape:function(i,t,r){var h=ue({x:i-r/2,y:t-r/2});r*=n.zoom();var m=new Konva.Rect({x:h.x,y:h.y,width:r,height:r,fill:c.anchorColor,strokeWidth:0,draggable:!0});this.anchors.push(m),this.bindListeners(m),K.add(m)}},et=function(i,t){var r=i.target||i.cyTarget;if(!o.isIgnoredEdge(r)){var h,m,w,I,A=o.getEdgeType(r);A==="none"?(h=[],m=[]):(w=o.syntax[A].weight,I=o.syntax[A].distance,h=r.data(w)?[].concat(r.data(w)):r.data(w),m=r.data(I)?[].concat(r.data(I)):r.data(I));var W={edge:r,type:A,weights:h,distances:m};o.addAnchorPoint(void 0,void 0,t),O().undoable&&n.undoRedo().do("changeAnchorPoints",W)}H(),r.select()},tt=function(i){var t=M.edge,r=o.getEdgeType(t);if(!o.edgeTypeNoneShouldntHappen(r,"UiUtilities.js, cxtRemoveAnchorFcn")){var h={edge:t,type:r,weights:[].concat(t.data(o.syntax[r].weight)),distances:[].concat(t.data(o.syntax[r].distance))};o.removeAnchor(),O().undoable&&n.undoRedo().do("changeAnchorPoints",h),setTimeout(function(){H(),t.select()},50)}},nt=function(i){var t=M.edge,r=o.getEdgeType(t),h={edge:t,type:r,weights:[].concat(t.data(o.syntax[r].weight)),distances:[].concat(t.data(o.syntax[r].distance))};o.removeAllAnchors(),O().undoable&&n.undoRedo().do("changeAnchorPoints",h),setTimeout(function(){H(),t.select()},50)},ot=c.validateEdge,it=c.actOnUnsuccessfulReconnection,$=[];if(c.addBendMenuItemTitle&&$.push({id:J,content:c.addBendMenuItemTitle,selector:"edge",onClickFunction:function(i){et(i,"bend")},hasTrailingDivider:c.useTrailingDividersAfterContextMenuOptions}),c.removeBendMenuItemTitle&&$.push({id:j,content:c.removeBendMenuItemTitle,selector:"edge",onClickFunction:tt,hasTrailingDivider:c.useTrailingDividersAfterContextMenuOptions}),c.addControlMenuItemTitle&&$.push({id:ge,content:c.addControlMenuItemTitle,selector:"edge",onClickFunction:function(i){et(i,"control")},hasTrailingDivider:c.useTrailingDividersAfterContextMenuOptions}),c.removeControlMenuItemTitle&&$.push({id:fe,content:c.removeControlMenuItemTitle,selector:"edge",onClickFunction:tt,hasTrailingDivider:c.useTrailingDividersAfterContextMenuOptions}),c.removeAllBendMenuItemTitle&&$.push({id:le,content:c.removeAllBendMenuItemTitle,selector:":selected.edgebendediting-hasmultiplebendpoints",onClickFunction:nt,hasTrailingDivider:c.useTrailingDividersAfterContextMenuOptions}),c.removeAllControlMenuItemTitle&&$.push({id:He,content:c.removeAllControlMenuItemTitle,selector:":selected.edgecontrolediting-hasmultiplecontrolpoints",onClickFunction:nt,hasTrailingDivider:c.useTrailingDividersAfterContextMenuOptions}),c.handleAnchors||($=[],c.removeAllControlMenuItemTitle=!1,c.removeAllBendMenuItemTitle=!1,c.removeControlMenuItemTitle=!1,c.addControlMenuItemTitle=!1,c.removeBendMenuItemTitle=!1,c.addBendMenuItemTitle=!1),n.contextMenus){var je=n.contextMenus("get");c.contexMenuShowEvent=je.getOptions().evtType,je.isActive()?je.appendMenuItems($):n.contextMenus({evtType:c.contexMenuShowEvent,menuItems:$})}var yt=a(function(){V.setAttribute("height",Z.clientHeight),V.setAttribute("width",Z.clientWidth),V.style.position="absolute",V.style.top="0",V.style.left="0",V.style.zIndex=O().zIndex,setTimeout(function(){var i=st(V),t=st(Z);V.style.top=""+-(i.top-t.top),V.style.left=""+-(i.left-t.left),K.getStage().setWidth(Z.clientWidth),K.getStage().setHeight(Z.clientHeight),n&&H()},0)},250);function st(i){var t=i.getBoundingClientRect();return{top:t.top+window.scrollY,left:t.left+window.scrollX}}function dt(){yt()}dt(),window.addEventListener("resize",function(){dt()});var rt,Re=Le;function O(){return rt||(rt=Le.options)}function ue(i){var t=n.pan(),r=n.zoom();return{x:i.x*r+t.x,y:i.y*r+t.y}}function H(){M.clearAnchorsExcept(M.touchedAnchor),me!==null&&(me.destroy(),me=null),xe!==null&&(xe.destroy(),xe=null),K.draw(),T&&(M.renderAnchorShapes(T),function(i){if(i&&c.handleReconnectEdge){var t=o.getAnchorsAsArray(i);t===void 0&&(t=[]);var r=i.sourceEndpoint(),h=i.targetEndpoint();if(r.x&&h.x&&(t.unshift(r.y),t.unshift(r.x),t.push(h.x),t.push(h.y),t)){var m={x:t[0],y:t[1]},w={x:t[t.length-2],y:t[t.length-1]},I={x:t[2],y:t[3]},A={x:t[t.length-4],y:t[t.length-3]};(function(W,R,C,N,Se){var te=R.x-C/2,ne=R.y-C/2,Fe=N.x-C/2,Me=N.y-C/2,Ke=Se.x-C/2,Qe=Se.y-C/2,oe=ue({x:W.x-C/2,y:W.y-C/2}),de=ue({x:te,y:ne});C=C*n.zoom()/2;var q=ue({x:Fe,y:Me}),re=ue({x:Ke,y:Qe}),pe=C,we=Math.sqrt(Math.pow(q.x-oe.x,2)+Math.pow(q.y-oe.y,2)),Be=oe.x+pe/we*(q.x-oe.x),Q=oe.y+pe/we*(q.y-oe.y),We=Math.sqrt(Math.pow(re.x-de.x,2)+Math.pow(re.y-de.y,2)),Ze=de.x+pe/We*(re.x-de.x),$e=de.y+pe/We*(re.y-de.y);me===null&&(me=new Konva.Circle({x:Be+C,y:Q+C,radius:C,fill:c.endPointColor})),xe===null&&(xe=new Konva.Circle({x:Ze+C,y:$e+C,radius:C,fill:c.endPointColor})),K.add(me),K.add(xe),K.draw()})(m,w,.65*Oe(i),I,A)}}}(T))}function Oe(i){var t,r=c.anchorShapeSizeFactor;return t=c.enableFixedAnchorSize?r/n.zoom():r,parseFloat(i.css("width"))<=2.5?2.5*t:parseFloat(i.css("width"))*t}function qe(i,t,r,h,m){return i>=h-r/2&&i<=h+r/2&&t>=m-r/2&&t<=m+r/2}function at(i,t,r){var h=o.getEdgeType(r);if(h==="none"||r.data(o.syntax[h].weight)==null||r.data(o.syntax[h].weight).length==0)return-1;for(var m=o.getAnchorsAsArray(r),w=Oe(r),I=0;m&&I<m.length;I+=2)if(qe(i,t,w,m[I],m[I+1]))return I/2;return-1}function _e(){k=n.panningEnabled(),U=n.zoomingEnabled(),Y=n.boxSelectionEnabled(),n.zoomingEnabled(!1).panningEnabled(!1).boxSelectionEnabled(!1)}function ct(){n.zoomingEnabled(U).panningEnabled(k).boxSelectionEnabled(Y)}Re==null&&(Re={}),Re.options=c;var lt=a(function(i,t,r,h){var m=i.data(o.syntax[t].weight),w=i.data(o.syntax[t].distance),I=o.convertToRelativePosition(i,h);m[r]=I.weight,w[r]=I.distance,i.data(o.syntax[t].weight,m),i.data(o.syntax[t].distance,w)},5);k=n.panningEnabled(),U=n.zoomingEnabled(),Y=n.boxSelectionEnabled();var Ae,se,X,he,Ie,L,be,G,Te,ee=(ve=n.edges(":selected")).length;ee===1&&(T=ve[0]),n.bind("zoom pan",P=function(){T&&H()}),n.on("data","edge",ce=function(){T&&H()}),n.on("style","edge.edgebendediting-hasbendpoints:selected, edge.edgecontrolediting-hascontrolpoints:selected",v=function(){setTimeout(function(){H()},50)}),n.on("remove","edge",p=function(){if(this.selected()){if(ee-=1,n.startBatch(),T&&T.removeClass("cy-edge-editing-highlight"),ee===1){var i=n.edges(":selected");i.length===1?(T=i[0]).addClass("cy-edge-editing-highlight"):T=void 0}else T=void 0;n.endBatch()}H()}),n.on("add","edge",f=function(){this.selected()&&(ee+=1,n.startBatch(),T&&T.removeClass("cy-edge-editing-highlight"),ee===1?(T=this).addClass("cy-edge-editing-highlight"):T=void 0,n.endBatch()),H()}),E=function(i){i.target().connectedEdges().length!=0&&i.source().connectedEdges().length!=0&&(ee+=1,n.startBatch(),T&&T.removeClass("cy-edge-editing-highlight"),ee===1?(T=i).addClass("cy-edge-editing-highlight"):T=void 0,n.endBatch(),H())},n.on("select","edge",function(i){c.isShowHandleOnHover||E(i.target)}),b=function(){if(ee-=1,n.startBatch(),T&&T.removeClass("cy-edge-editing-highlight"),ee===1){var i=n.edges(":selected");i.length===1?(T=i[0]).addClass("cy-edge-editing-highlight"):T=void 0}else T=void 0;n.endBatch(),H()},n.on("unselect","edge",function(){c.isShowHandleOnHover||b()}),n.on("mouseover","edge",function(i){c.isShowHandleOnHover&&E(i.target)}),n.on("mouseout","edge",function(){c.isShowHandleOnHover&&b()});var ye,Ve,Xe,Ye,ve,ze=!1;n.on("tapstart",S=function(i){se=i.position||i.cyPosition}),n.on("tapstart","edge",F=function(i){var t=this;if(T&&T.id()===t.id()){X=t,o.getEdgeType(t);var r=function(w,I,A){var W=Oe(A),R=A._private.rscratch.allpts,C={x:R[0],y:R[1]},N={x:R[R.length-2],y:R[R.length-1]};return ue(C),ue(N),qe(w,I,W,C.x,C.y)?0:qe(w,I,W,N.x,N.y)?1:-1}(se.x,se.y,t);if(!c.handleReconnectEdge||r!=0&&r!=1)c.handleAnchors&&(Ae=void 0,Ie=!0);else{t.unselect(),L=r,G=r==0?X.source():X.target();var h=r==0?"source":"target",m=l.disconnectEdge(X,n,i.renderedPosition,h);be=m.dummyNode,X=m.edge,_e()}}else Ie=!1}),n.on("drag","node",ae=function(){T&&H()}),n.on("tapdrag",B=function(i){n.edges(":selected").length>0&&n.autounselectify(!1);var t=X;if(X===void 0||!o.isIgnoredEdge(t)){var r=o.getEdgeType(t);if(Ie&&c.enableCreateAnchorOnDrag&&!Ee&&r!=="none"){var h=o.syntax[r].weight,m=o.syntax[r].distance;he={edge:t,type:r,weights:t.data(h)?[].concat(t.data(h)):[],distances:t.data(m)?[].concat(t.data(m)):[]},t.unselect(),Ae=o.addAnchorPoint(t,se),X=t,Ie=void 0,ze=!0,_e()}if(Ee||X!==void 0&&(Ae!==void 0||L!==void 0)){var w=i.position||i.cyPosition;L!=-1&&be?be.position(w):Ae!=null?lt(t,r,Ae,w):Ee&&(M.touchedAnchorIndex===void 0&&se&&(M.touchedAnchorIndex=at(se.x,se.y,M.edge)),M.touchedAnchorIndex!==void 0&&lt(M.edge,M.edgeType,M.touchedAnchorIndex,w)),i.target&&i.target[0]&&i.target.isNode()&&(Te=i.target)}}}),n.on("tapend",D=function(i){ie&&K.getStage().fire("contentMouseup");var t=X||M.edge;if(t!==void 0){var r=M.touchedAnchorIndex;if(r!=null){var h,m=t.source().position("x"),w=t.source().position("y"),I=t.target().position("x"),A=t.target().position("y"),W=o.getAnchorsAsArray(t),R=[m,w].concat(W).concat([I,A]),C=r+1,N=C-1,Se=C+1,te={x:R[2*C],y:R[2*C+1]},ne={x:R[2*N],y:R[2*N+1]},Fe={x:R[2*Se],y:R[2*Se+1]};if(te.x===ne.x&&te.y===ne.y||te.x===ne.x&&te.y===ne.y)h=!0;else{var Me,Ke=(ne.y-Fe.y)/(ne.x-Fe.x),Qe={srcPoint:ne,tgtPoint:Fe,m1:Ke,m2:-1/Ke},oe=o.getIntersection(t,te,Qe),de=Math.sqrt(Math.pow(te.x-oe.x,2)+Math.pow(te.y-oe.y,2));(Me=o.getEdgeType(t))==="bend"&&de<O().bendRemovalSensitivity&&(h=!0)}c.enableRemoveAnchorMidOfNearLine&&h&&o.removeAnchor(t,r)}else if(be!=null&&(L==0||L==1)){var q=G,re="valid",pe=L==0?"source":"target";if(Te){var we=L==0?Te:t.source(),Be=L==1?Te:t.target();typeof ot=="function"&&(re=ot(t,we,Be)),q=re==="valid"?Te:G}if(we=L==0?q:t.source(),Be=L==1?q:t.target(),t=l.connectEdge(t,G,pe),G.id()!==q.id())if(typeof c.handleReconnectEdge=="function"){var Q=c.handleReconnectEdge(we.id(),Be.id(),t.data(),pe);if(Q&&(l.copyEdge(t,Q),o.initAnchorPoints(O().bendPositionsFunction,O().controlPositionsFunction,[Q])),Q&&O().undoable){var We={newEdge:Q,oldEdge:t};n.undoRedo().do("removeReconnectedEdge",We),t=Q}else Q&&(n.remove(t),t=Q)}else{var Ze=L==0?{source:q.id()}:{target:q.id()},$e=L==0?{source:G.id()}:{target:G.id()};if(O().undoable&&q.id()!==G.id()){var vt={edge:t,location:Ze,oldLoc:$e};t=n.undoRedo().do("reconnectEdge",vt).edge}}re!=="valid"&&typeof it=="function"&&it(t),t.select(),n.remove(be)}}(Me=o.getEdgeType(t))==="none"&&(Me="bend"),M.touchedAnchorIndex!==void 0||ze||(he=void 0);var gt=o.syntax[Me].weight;t!==void 0&&he!==void 0&&(t.data(gt)?t.data(gt).toString():null)!=he.weights.toString()&&(ze&&(t.select(),n.autounselectify(!0)),O().undoable&&n.undoRedo().do("changeAnchorPoints",he)),Ae=void 0,X=void 0,he=void 0,Ie=void 0,L=void 0,be=void 0,G=void 0,Te=void 0,se=void 0,ze=!1,M.touchedAnchorIndex=void 0,ct(),setTimeout(function(){H()},50)}),n.on("edgeediting.movestart",function(i,t){Ye=!1,t[0]!=null&&t.forEach(function(r){o.getAnchorsAsArray(r)==null||Ye||(Ve={x:o.getAnchorsAsArray(r)[0],y:o.getAnchorsAsArray(r)[1]},ye={firstTime:!0,firstAnchorPosition:{x:Ve.x,y:Ve.y},edges:t},Xe=r,Ye=!0)})}),n.on("edgeediting.moveend",function(i,t){if(ye!=null){var r=ye.firstAnchorPosition,h={x:o.getAnchorsAsArray(Xe)[0],y:o.getAnchorsAsArray(Xe)[1]};ye.positionDiff={x:-h.x+r.x,y:-h.y+r.y},delete ye.firstAnchorPosition,O().undoable&&n.undoRedo().do("moveAnchorPoints",ye),ye=void 0}}),n.on(c.contexMenuShowEvent,_=function(i){var t,r,h=i.target||i.cyTarget,m=!1;try{m=h.isEdge()}catch{}m?(t=h,r=o.getEdgeType(t)):(t=M.edge,r=M.edgeType);var w=i.position||i.cyPosition,I=at(w.x,w.y,t);if(I==-1?o.currentCtxPos=w:o.currentAnchorIndex=I,o.currentCtxEdge=t,n.contextMenus){var A=n.contextMenus("get");if(!T||T.id()!=t.id()||o.isIgnoredEdge(t)||T!==t)return c.removeBendMenuItemTitle&&A.hideMenuItem(j),c.addBendMenuItemTitle&&A.hideMenuItem(J),c.removeControlMenuItemTitle&&A.hideMenuItem(fe),void(c.addControlMenuItemTitle&&A.hideMenuItem(ge));I==-1?(c.removeBendMenuItemTitle&&A.hideMenuItem(j),c.removeControlMenuItemTitle&&A.hideMenuItem(fe),r==="control"&&m?(c.addControlMenuItemTitle&&A.showMenuItem(ge),c.addBendMenuItemTitle&&A.hideMenuItem(J)):r==="bend"&&m?(c.addBendMenuItemTitle&&A.showMenuItem(J),c.addControlMenuItemTitle&&A.hideMenuItem(ge)):m?(c.addBendMenuItemTitle&&A.showMenuItem(J),c.addControlMenuItemTitle&&A.showMenuItem(ge)):(c.addBendMenuItemTitle&&A.hideMenuItem(J),c.addControlMenuItemTitle&&A.hideMenuItem(ge))):(c.addBendMenuItemTitle&&A.hideMenuItem(J),c.addControlMenuItemTitle&&A.hideMenuItem(ge),r==="control"?(c.removeControlMenuItemTitle&&A.showMenuItem(fe),c.removeBendMenuItemTitle&&A.hideMenuItem(j),c.removeAllControlMenuItemTitle&&t.hasClass("edgecontrolediting-hasmultiplecontrolpoints")&&A.showMenuItem(He)):r==="bend"?(c.removeBendMenuItemTitle&&A.showMenuItem(j),c.removeControlMenuItemTitle&&A.hideMenuItem(fe)):(c.removeBendMenuItemTitle&&A.hideMenuItem(j),c.removeControlMenuItemTitle&&A.hideMenuItem(fe),c.removeAllControlMenuItemTitle&&A.hideMenuItem(He)))}}),n.on("cyedgeediting.changeAnchorPoints","edge",function(){n.startBatch(),n.edges().unselect(),n.trigger("bendPointMovement"),n.endBatch(),H()});var Je=!1,Ce={37:!1,38:!1,39:!1,40:!1};document.addEventListener("keydown",function(i){if(typeof O().moveSelectedAnchorsOnKeyEvents=="function"?O().moveSelectedAnchorsOnKeyEvents():O().moveSelectedAnchorsOnKeyEvents){var t,r,h=document.activeElement.tagName;if(h!="TEXTAREA"&&h!="INPUT"){switch(i.keyCode){case 37:case 39:case 38:case 40:case 32:i.preventDefault()}if(i.keyCode<"37"||i.keyCode>"40"||(Ce[i.keyCode]=!0,n.edges(":selected").length!=n.elements(":selected").length||n.edges(":selected").length!=1))return;Je||(ve=n.edges(":selected"),n.trigger("edgeediting.movestart",[ve]),Je=!0);var m=3;if(i.altKey&&i.shiftKey)return;i.altKey?m=1:i.shiftKey&&(m=10);var w=0,I=0;w+=Ce[39]?m:0,w-=Ce[37]?m:0,I+=Ce[40]?m:0,I-=Ce[38]?m:0,t={x:w,y:I},(r=ve).forEach(function(A){var W=o.getAnchorsAsArray(A),R=[];if(W!=null){for(var C=0;C<W.length;C+=2)R.push({x:W[C]+t.x,y:W[C+1]+t.y});var N=o.getEdgeType(A);if(o.edgeTypeNoneShouldntHappen(N,"UiUtilities.js, moveAnchorPoints"))return;N==="bend"?s.bendPointPositionsSetterFunction(A,R):N==="control"&&s.controlPointPositionsSetterFunction(A,R)}}),o.initAnchorPoints(O().bendPositionsFunction,O().controlPositionsFunction,r),n.trigger("bendPointMovement")}}},!0),document.addEventListener("keyup",function(i){i.keyCode<"37"||i.keyCode>"40"||(i.preventDefault(),Ce[i.keyCode]=!1,(typeof O().moveSelectedAnchorsOnKeyEvents=="function"?O().moveSelectedAnchorsOnKeyEvents():O().moveSelectedAnchorsOnKeyEvents)&&(n.trigger("edgeediting.moveend",[ve]),ve=void 0,Je=!1))},!0),Le=Re},unbind:function(){n.off("remove","node",p).off("add","node",f).off("style","edge.edgebendediting-hasbendpoints:selected, edge.edgecontrolediting-hascontrolpoints:selected",v).off("select","edge",E).off("unselect","edge",b).off("mouseover","edge",E).off("mouseout","edge",b).off("tapstart",S).off("tapstart","edge",F).off("tapdrag",B).off("tapend",D).off("cxttap",_).off("drag","node",ae).off("data","edge",ce),n.unbind("zoom pan",P)}};return ke[y]?ke[y].apply(n.container(),Array.prototype.slice.call(arguments,1)):(y===void 0?"undefined":d(y))!="object"&&y?(console.error("No such function `"+y+"` for cytoscape.js-edge-editing"),this):ke.init.apply(n.container(),arguments)}},926:z=>{var x={options:void 0,currentCtxEdge:void 0,currentCtxPos:void 0,currentAnchorIndex:void 0,ignoredClasses:void 0,setIgnoredClasses:function(e){this.ignoredClasses=e},syntax:{bend:{edge:"segments",class:"edgebendediting-hasbendpoints",multiClass:"edgebendediting-hasmultiplebendpoints",weight:"cyedgebendeditingWeights",distance:"cyedgebendeditingDistances",weightCss:"segment-weights",distanceCss:"segment-distances"},control:{edge:"unbundled-bezier",class:"edgecontrolediting-hascontrolpoints",multiClass:"edgecontrolediting-hasmultiplecontrolpoints",weight:"cyedgecontroleditingWeights",distance:"cyedgecontroleditingDistances",weightCss:"control-point-weights",distanceCss:"control-point-distances"}},getEdgeType:function(e){return e?e.hasClass(this.syntax.bend.class)?"bend":e.hasClass(this.syntax.control.class)?"control":e.css("curve-style").includes(this.syntax.bend.edge)?"bend":e.css("curve-style")===this.syntax.control.edge?"control":this.options.bendPositionsFunction(e)&&this.options.bendPositionsFunction(e).length>0?"bend":this.options.controlPositionsFunction(e)&&this.options.controlPositionsFunction(e).length>0?"control":"none":"none"},initAnchorPoints:function(e,d,a){for(var o=0;o<a.length;o++){var l=a[o],g=this.getEdgeType(l);if(g!=="none"&&!this.isIgnoredEdge(l)){var u;g==="bend"?u=e.apply(this,l):g==="control"&&(u=d.apply(this,l));var s={weights:[],distances:[]};if(u)s=this.convertToRelativePositions(l,u);else{var n=l.data(this.syntax[g].weight),y=l.data(this.syntax[g].distance);n&&y&&(s={weights:n,distances:y})}s.distances.length>0?(l.data(this.syntax[g].weight,s.weights),l.data(this.syntax[g].distance,s.distances),l.addClass(this.syntax[g].class),s.distances.length>1&&l.addClass(this.syntax[g].multiClass)):(l.data(this.syntax[g].weight,[]),l.data(this.syntax[g].distance,[]),l.hasClass(this.syntax[g].class)&&l.removeClass(this.syntax[g].class),l.hasClass(this.syntax[g].multiClass)&&l.removeClass(this.syntax[g].multiClass))}}},isIgnoredEdge:function(e){var d=e.source().position("x"),a=e.source().position("y"),o=e.target().position("x"),l=e.target().position("y");if(d==o&&a==l||e.source().id()==e.target().id())return!0;for(var g=0;this.ignoredClasses&&g<this.ignoredClasses.length;g++)if(e.hasClass(this.ignoredClasses[g]))return!0;return!1},getLineDirection:function(e,d){return e.y==d.y&&e.x<d.x?1:e.y<d.y&&e.x<d.x?2:e.y<d.y&&e.x==d.x?3:e.y<d.y&&e.x>d.x?4:e.y==d.y&&e.x>d.x?5:e.y>d.y&&e.x>d.x?6:e.y>d.y&&e.x==d.x?7:8},getSrcTgtPointsAndTangents:function(e){var d=e.source(),a=e.target(),o=(a.position(),d.position(),d.position()),l=a.position(),g=(l.y-o.y)/(l.x-o.x);return{m1:g,m2:-1/g,srcPoint:o,tgtPoint:l}},getIntersection:function(e,d,a){a===void 0&&(a=this.getSrcTgtPointsAndTangents(e));var o,l,g=a.srcPoint,u=(a.tgtPoint,a.m1),s=a.m2;if(u==1/0||u==-1/0)o=g.x,l=d.y;else if(u==0)o=d.x,l=g.y;else{var n=g.y-u*g.x;l=u*(o=(d.y-s*d.x-n)/(u-s))+n}return{x:o,y:l}},getAnchorsAsArray:function(e){var d=this.getEdgeType(e);if(d!=="none"&&e.css("curve-style").includes(this.syntax[d].edge)){for(var a=[],o=e.pstyle(this.syntax[d].weightCss)?e.pstyle(this.syntax[d].weightCss).pfValue:[],l=e.pstyle(this.syntax[d].distanceCss)?e.pstyle(this.syntax[d].distanceCss).pfValue:[],g=Math.min(o.length,l.length),u=e.source().position(),s=e.target().position(),n=s.y-u.y,y=s.x-u.x,v=Math.sqrt(y*y+n*n),p={x:y/v,y:n/v},f=-p.y,P=p.x,E=0;E<g;E++){var b=o[E],S=l[E],F=1-b,B=b,D={x1:u.x,x2:s.x,y1:u.y,y2:s.y},_={x:D.x1*F+D.x2*B,y:D.y1*F+D.y2*B};a.push(_.x+f*S,_.y+P*S)}return a}},convertToRelativePosition:function(e,d,a){a===void 0&&(a=this.getSrcTgtPointsAndTangents(e));var o,l=this.getIntersection(e,d,a),g=l.x,u=l.y,s=a.srcPoint,n=a.tgtPoint;o=g!=s.x?(g-s.x)/(n.x-s.x):u!=s.y?(u-s.y)/(n.y-s.y):0;var y=Math.sqrt(Math.pow(u-d.y,2)+Math.pow(g-d.x,2)),v=this.getLineDirection(s,n),p=this.getLineDirection(l,d);return v-p!=-2&&v-p!=6&&y!=0&&(y*=-1),{weight:o,distance:y}},convertToRelativePositions:function(e,d){for(var a=this.getSrcTgtPointsAndTangents(e),o=[],l=[],g=0;d&&g<d.length;g++){var u=d[g],s=this.convertToRelativePosition(e,u,a);o.push(s.weight),l.push(s.distance)}return{weights:o,distances:l}},addAnchorPoint:function(e,d){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;e!==void 0&&d!==void 0||(e=this.currentCtxEdge,d=this.currentCtxPos),a===void 0&&(a=this.getEdgeType(e));for(var o,l=this.syntax[a].weight,g=this.syntax[a].distance,u=this.convertToRelativePosition(e,d),s=u.weight,n=e.source().position("x"),y=e.source().position("y"),v=e.target().position("x"),p=e.target().position("y"),f=this.convertToRelativePosition(e,{x:n,y}).weight,P=this.convertToRelativePosition(e,{x:v,y:p}).weight,E=[f].concat(e.data(l)?e.data(l):[]).concat([P]),b=this.getAnchorsAsArray(e),S=1/0,F=[n,y].concat(b||[]).concat([v,p]),B=-1,D=0;D<E.length-1;D++){var _=E[D],ae=E[D+1],ce=this.compareWithPrecision(s,_,!0),k=this.compareWithPrecision(s,ae),U=this.compareWithPrecision(s,ae,!0),Y=this.compareWithPrecision(s,_);if(ce&&k||U&&Y){n=F[2*D],y=F[2*D+1],v=F[2*D+2];var Pe=(y-(p=F[2*D+3]))/(n-v),T={srcPoint:{x:n,y},tgtPoint:{x:v,y:p},m1:Pe,m2:-1/Pe},ie=this.getIntersection(e,d,T),J=Math.sqrt(Math.pow(d.x-ie.x,2)+Math.pow(d.y-ie.y,2));J<S&&(S=J,o=ie,B=D)}}o!==void 0&&(d=o),u=this.convertToRelativePosition(e,d),o===void 0&&(u.distance=0);var j=e.data(l),le=e.data(g);return le=le||[],(j=j||[]).length===0&&(B=0),B!=-1&&(j.splice(B,0,u.weight),le.splice(B,0,u.distance)),e.data(l,j),e.data(g,le),e.addClass(this.syntax[a].class),(j.length>1||le.length>1)&&e.addClass(this.syntax[a].multiClass),B},removeAnchor:function(e,d){e!==void 0&&d!==void 0||(e=this.currentCtxEdge,d=this.currentAnchorIndex);var a=this.getEdgeType(e);if(!this.edgeTypeNoneShouldntHappen(a,"anchorPointUtilities.js, removeAnchor")){var o,l=this.syntax[a].weight,g=this.syntax[a].distance,u=e.data(l),s=e.data(g);a==="bend"?o=this.options.bendPositionsFunction(e):a==="control"&&(o=this.options.controlPositionsFunction(e)),u.splice(d,1),s.splice(d,1),o&&o.splice(d,1),u.length==1||s.length==1?e.removeClass(this.syntax[a].multiClass):u.length==0||s.length==0?(e.removeClass(this.syntax[a].class),e.data(l,[]),e.data(g,[])):(e.data(l,u),e.data(g,s))}},removeAllAnchors:function(e){e===void 0&&(e=this.currentCtxEdge);var d=this.getEdgeType(e);if(!this.edgeTypeNoneShouldntHappen(d,"anchorPointUtilities.js, removeAllAnchors")){e.removeClass(this.syntax[d].class),e.removeClass(this.syntax[d].multiClass);var a=this.syntax[d].weight,o=this.syntax[d].distance;e.data(a,[]),e.data(o,[]),d==="bend"&&this.options.bendPositionsFunction(e)?this.options.bendPointPositionsSetterFunction(e,[]):d==="control"&&this.options.controlPositionsFunction(e)&&this.options.controlPointPositionsSetterFunction(e,[])}},calculateDistance:function(e,d){var a=e.x-d.x,o=e.y-d.y;return Math.sqrt(Math.pow(a,2)+Math.pow(o,2))},compareWithPrecision:function(e,d){var a=arguments.length>2&&arguments[2]!==void 0&&arguments[2],o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.01,l=e-d;return Math.abs(l)<=o||(a?e<d:e>d)},edgeTypeNoneShouldntHappen:function(e,d){return e==="none"&&(console.log("In "+d+": edge type none should never happen here!!"),!0)}};z.exports=x},630:z=>{var x,e,d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},a=(x=Math.max,e=Date.now||function(){return new Date().getTime()},function(o,l,g){var u,s,n,y,v,p,f,P,E,b=0,S=!1,F=!0;if(typeof o!="function")throw new TypeError("Expected a function");if(l=l<0?0:+l||0,g===!0){var B=!0;F=!1}else E=(P=g)===void 0?"undefined":d(P),!P||E!="object"&&E!="function"||(B=!!g.leading,S="maxWait"in g&&x(+g.maxWait||0,l),F="trailing"in g?!!g.trailing:F);function D(k,U){U&&clearTimeout(U),s=p=f=void 0,k&&(b=e(),n=o.apply(v,u),p||s||(u=v=void 0))}function _(){var k=l-(e()-y);k<=0||k>l?D(f,s):p=setTimeout(_,k)}function ae(){D(F,p)}function ce(){if(u=arguments,y=e(),v=this,f=F&&(p||!B),S===!1)var k=B&&!p;else{s||B||(b=y);var U=S-(y-b),Y=U<=0||U>S;Y?(s&&(s=clearTimeout(s)),b=y,n=o.apply(v,u)):s||(s=setTimeout(ae,U))}return Y&&p?p=clearTimeout(p):p||l===S||(p=setTimeout(_,l)),k&&(Y=!0,n=o.apply(v,u)),!Y||p||s||(u=v=void 0),n}return ce.cancel=function(){p&&clearTimeout(p),s&&clearTimeout(s),b=0,s=p=f=void 0},ce});z.exports=a},497:(z,x,e)=>{var d,a,o;a=e(926),e(630),o=function(l,g){var u=e(167);if(l&&g){var s,n={bendPositionsFunction:function(v){return v.data("bendPointPositions")},bendCornersIsRoundFunction:function(v){return!1},controlPositionsFunction:function(v){return v.data("controlPointPositions")},bendPointPositionsSetterFunction:function(v,p){v.data("bendPointPositions",p)},controlPointPositionsSetterFunction:function(v,p){v.data("controlPointPositions",p)},initAnchorsAutomatically:!0,ignoredClasses:[],undoable:!1,anchorShapeSizeFactor:3,zIndex:999,bendRemovalSensitivity:8,addBendMenuItemTitle:"Add Bend Point",removeBendMenuItemTitle:"Remove Bend Point",removeAllBendMenuItemTitle:"Remove All Bend Points",addControlMenuItemTitle:"Add Control Point",removeControlMenuItemTitle:"Remove Control Point",removeAllControlMenuItemTitle:"Remove All Control Points",moveSelectedAnchorsOnKeyEvents:function(){return!0},useTrailingDividersAfterContextMenuOptions:!1,enableCreateAnchorOnDrag:!0,handleReconnectEdge:!0,handleAnchors:!0,enableFixedAnchorSize:!1,enableRemoveAnchorMidOfNearLine:!0,isShowHandleOnHover:!1,anchorColor:"#000000",endPointColor:"#000000",contexMenuShowEvent:"cxttap"},y=!1;l("core","edgeEditing",function(v){var p=this;return v==="initialized"?y:(v!=="get"&&(s=function(f,P){var E={};for(var b in f)E[b]=f[b];for(var b in P)if(b=="bendRemovalSensitivity"){var S=P[b];isNaN(S)||(E[b]=S>=0&&S<=20?P[b]:S<0?0:20)}else E[b]=P[b];return E}(n,v),y=!0,p.style().selector(".edgebendediting-hasbendpoints").css({"curve-style":function(f){return s.bendCornersIsRoundFunction(f)?"round-segments":"segments"},"segment-distances":"data(cyedgebendeditingDistances)","segment-weights":"data(cyedgebendeditingWeights)","edge-distances":"node-position"}),p.style().selector(".edgecontrolediting-hascontrolpoints").css({"curve-style":"unbundled-bezier","control-point-distances":"data(cyedgecontroleditingDistances)","control-point-weights":"data(cyedgecontroleditingWeights)","edge-distances":"node-position"}),p.style().selector("#nwt_reconnectEdge_dummy").css({width:"1",height:"1",visibility:"hidden"}),a.setIgnoredClasses(s.ignoredClasses),s.initAnchorsAutomatically&&a.initAnchorPoints(s.bendPositionsFunction,s.controlPositionsFunction,p.edges(),s.ignoredClasses),u(s,p)),y?{getAnchorsAsArray:function(f){return a.getAnchorsAsArray(f)},initAnchorPoints:function(f){a.initAnchorPoints(s.bendPositionsFunction,s.controlPositionsFunction,f)},deleteSelectedAnchor:function(f,P){a.removeAnchor(f,P)},getEdgeType:function(f){return a.getEdgeType(f)}}:void 0)})}},z.exports&&(z.exports=o),(d=(function(){return o}).call(x,e,x,z))===void 0||(z.exports=d),typeof cytoscape<"u"&&Konva&&o(cytoscape,Konva)},42:z=>{z.exports={disconnectEdge:function(x,e,d,a){var o={data:{id:"nwt_reconnectEdge_dummy",ports:[]},renderedPosition:d};e.add(o);var l=a==="source"?{source:o.data.id}:{target:o.data.id};return x=x.move(l)[0],{dummyNode:e.nodes("#"+o.data.id)[0],edge:x}},connectEdge:function(x,e,d){if(x.isEdge()&&e.isNode()){var a={};if(d==="source")a.source=e.id();else{if(d!=="target")return;a.target=e.id()}return x.move(a)[0]}},copyEdge:function(x,e){this.copyAnchors(x,e),this.copyStyle(x,e)},copyStyle:function(x,e){x&&e&&(e.data("line-color",x.data("line-color")),e.data("width",x.data("width")),e.data("cardinality",x.data("cardinality")))},copyAnchors:function(x,e){if(x.hasClass("edgebendediting-hasbendpoints")){var d=x.data("cyedgebendeditingDistances"),a=x.data("cyedgebendeditingWeights");e.data("cyedgebendeditingDistances",d),e.data("cyedgebendeditingWeights",a),e.addClass("edgebendediting-hasbendpoints")}else x.hasClass("edgecontrolediting-hascontrolpoints")&&(d=x.data("cyedgecontroleditingDistances"),a=x.data("cyedgecontroleditingWeights"),e.data("cyedgecontroleditingDistances",d),e.data("cyedgecontroleditingWeights",a),e.addClass("edgecontrolediting-hascontrolpoints"));x.hasClass("edgebendediting-hasmultiplebendpoints")?e.addClass("edgebendediting-hasmultiplebendpoints"):x.hasClass("edgecontrolediting-hasmultiplecontrolpoints")&&e.addClass("edgecontrolediting-hasmultiplecontrolpoints")}}},861:z=>{z.exports=function(x,e,d){if(x.undoRedo!=null){var a=x.undoRedo({defaultActions:!1,isDebug:!0});a.action("changeAnchorPoints",o,o),a.action("moveAnchorPoints",l,l),a.action("reconnectEdge",g,g),a.action("removeReconnectedEdge",u,u)}function o(s){var n,y,v,p,f=x.getElementById(s.edge.id()),P=s.type!=="none"?s.type:e.getEdgeType(f);s.type!=="none"||s.set?(v=e.syntax[P].weight,p=e.syntax[P].distance,n=s.set?f.data(v):s.weights,y=s.set?f.data(p):s.distances):(n=[],y=[]);var E={edge:f,type:P,weights:n,distances:y,set:!0};if(s.set){var b=s.weights&&s.weights.length>0,S=b&&s.weights.length>1;b&&(f.data(v,s.weights),f.data(p,s.distances));var F=e.syntax[P].class,B=e.syntax[P].multiClass;b||S?b&&!S?(f.addClass(F),f.removeClass(B)):f.addClass(F+" "+B):f.removeClass(F+" "+B),b||(f.data(v,[]),f.data(p,[])),f.selected()&&f.unselect(),f.select()}return f.trigger("cyedgeediting.changeAnchorPoints"),E}function l(s){if(s.firstTime)return delete s.firstTime,s;var n=s.edges,y=s.positionDiff,v={edges:n,positionDiff:{x:-y.x,y:-y.y}};return function(p,f){f.forEach(function(P){var E=e.getEdgeType(P),b=e.getAnchorsAsArray(P),S=[];if(b!=null){for(var F=0;F<b.length;F+=2)S.push({x:b[F]+p.x,y:b[F+1]+p.y});E==="bend"?d.bendPointPositionsSetterFunction(P,S):E==="control"&&d.controlPointPositionsSetterFunction(P,S)}}),e.initAnchorPoints(d.bendPositionsFunction,d.controlPositionsFunction,f)}(y,n),v}function g(s){var n=s.edge,y=s.location,v=s.oldLoc,p={edge:n=n.move(y)[0],location:v,oldLoc:y};return n.unselect(),p}function u(s){var n=s.oldEdge;(y=x.getElementById(n.data("id")))&&y.length>0&&(n=y);var y,v=s.newEdge;return(y=x.getElementById(v.data("id")))&&y.length>0&&(v=y),n.inside()&&(n=n.remove()[0]),v.removed()&&(v=v.restore()).unselect(),{oldEdge:v,newEdge:n}}}}},De={};return function z(x){var e=De[x];if(e!==void 0)return e.exports;var d=De[x]={exports:{}};return Ge[x](d,d.exports,z),d.exports}(497)})())})(ut);var ft=ut.exports;const At=pt(ft);export{At as e};
