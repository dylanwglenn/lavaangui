import{c as K}from"./core-js-93797867.js";var vt={},it={},gt={},$={},xt;function Bt(){if(xt)return $;xt=1,Object.defineProperty($,"__esModule",{value:!0});var C=function(){function t(e,o,n){this.source=e,this.target=o,this.type=n}return t}();$.PowerEdge=C;var M=function(){function t(e,o,n,r){var s=this;if(this.linkAccessor=n,this.modules=new Array(e),this.roots=[],r)this.initModulesFromGroup(r);else{this.roots.push(new f);for(var a=0;a<e;++a)this.roots[0].add(this.modules[a]=new b(a))}this.R=o.length,o.forEach(function(l){var x=s.modules[n.getSourceIndex(l)],E=s.modules[n.getTargetIndex(l)],w=n.getType(l);x.outgoing.add(w,E),E.incoming.add(w,x)})}return t.prototype.initModulesFromGroup=function(e){var o=new f;this.roots.push(o);for(var n=0;n<e.leaves.length;++n){var r=e.leaves[n],s=new b(r.id);this.modules[r.id]=s,o.add(s)}if(e.groups)for(var a=0;a<e.groups.length;++a){var l=e.groups[a],x={};for(var E in l)E!=="leaves"&&E!=="groups"&&l.hasOwnProperty(E)&&(x[E]=l[E]);o.add(new b(-1-a,new u,new u,this.initModulesFromGroup(l),x))}return o},t.prototype.merge=function(e,o,n){n===void 0&&(n=0);var r=e.incoming.intersection(o.incoming),s=e.outgoing.intersection(o.outgoing),a=new f;a.add(e),a.add(o);var l=new b(this.modules.length,s,r,a);this.modules.push(l);var x=function(E,w,S){E.forAll(function(I,G){I.forAll(function(O){var T=O[w];T.add(G,l),T.remove(G,e),T.remove(G,o),e[S].remove(G,O),o[S].remove(G,O)})})};return x(s,"incoming","outgoing"),x(r,"outgoing","incoming"),this.R-=r.count()+s.count(),this.roots[n].remove(e),this.roots[n].remove(o),this.roots[n].add(l),l},t.prototype.rootMerges=function(e){e===void 0&&(e=0);for(var o=this.roots[e].modules(),n=o.length,r=new Array(n*(n-1)),s=0,a=0,l=n-1;a<l;++a)for(var x=a+1;x<n;++x){var E=o[a],w=o[x];r[s]={id:s,nEdges:this.nEdges(E,w),a:E,b:w},s++}return r},t.prototype.greedyMerge=function(){for(var e=0;e<this.roots.length;++e)if(!(this.roots[e].modules().length<2)){var o=this.rootMerges(e).sort(function(r,s){return r.nEdges==s.nEdges?r.id-s.id:r.nEdges-s.nEdges}),n=o[0];if(!(n.nEdges>=this.R))return this.merge(n.a,n.b,e),!0}},t.prototype.nEdges=function(e,o){var n=e.incoming.intersection(o.incoming),r=e.outgoing.intersection(o.outgoing);return this.R-n.count()-r.count()},t.prototype.getGroupHierarchy=function(e){var o=this,n=[],r={};D(this.roots[0],r,n);var s=this.allEdges();return s.forEach(function(a){var l=o.modules[a.source],x=o.modules[a.target];e.push(new C(typeof l.gid>"u"?a.source:n[l.gid],typeof x.gid>"u"?a.target:n[x.gid],a.type))}),n},t.prototype.allEdges=function(){var e=[];return t.getEdges(this.roots[0],e),e},t.getEdges=function(e,o){e.forAll(function(n){n.getEdges(o),t.getEdges(n.children,o)})},t}();$.Configuration=M;function D(t,e,o){t.forAll(function(n){if(n.isLeaf())e.leaves||(e.leaves=[]),e.leaves.push(n.id);else{var r=e;if(n.gid=o.length,!n.isIsland()||n.isPredefined()){if(r={id:n.gid},n.isPredefined())for(var s in n.definition)r[s]=n.definition[s];e.groups||(e.groups=[]),e.groups.push(n.gid),o.push(r)}D(n.children,r,o)}})}var b=function(){function t(e,o,n,r,s){o===void 0&&(o=new u),n===void 0&&(n=new u),r===void 0&&(r=new f),this.id=e,this.outgoing=o,this.incoming=n,this.children=r,this.definition=s}return t.prototype.getEdges=function(e){var o=this;this.outgoing.forAll(function(n,r){n.forAll(function(s){e.push(new C(o.id,s.id,r))})})},t.prototype.isLeaf=function(){return this.children.count()===0},t.prototype.isIsland=function(){return this.outgoing.count()===0&&this.incoming.count()===0},t.prototype.isPredefined=function(){return typeof this.definition<"u"},t}();$.Module=b;function v(t,e){var o={};for(var n in t)n in e&&(o[n]=t[n]);return o}var f=function(){function t(){this.table={}}return t.prototype.count=function(){return Object.keys(this.table).length},t.prototype.intersection=function(e){var o=new t;return o.table=v(this.table,e.table),o},t.prototype.intersectionCount=function(e){return this.intersection(e).count()},t.prototype.contains=function(e){return e in this.table},t.prototype.add=function(e){this.table[e.id]=e},t.prototype.remove=function(e){delete this.table[e.id]},t.prototype.forAll=function(e){for(var o in this.table)e(this.table[o])},t.prototype.modules=function(){var e=[];return this.forAll(function(o){o.isPredefined()||e.push(o)}),e},t}();$.ModuleSet=f;var u=function(){function t(){this.sets={},this.n=0}return t.prototype.count=function(){return this.n},t.prototype.contains=function(e){var o=!1;return this.forAllModules(function(n){!o&&n.id==e&&(o=!0)}),o},t.prototype.add=function(e,o){var n=e in this.sets?this.sets[e]:this.sets[e]=new f;n.add(o),++this.n},t.prototype.remove=function(e,o){var n=this.sets[e];n.remove(o),n.count()===0&&delete this.sets[e],--this.n},t.prototype.forAll=function(e){for(var o in this.sets)e(this.sets[o],Number(o))},t.prototype.forAllModules=function(e){this.forAll(function(o,n){return o.forAll(e)})},t.prototype.intersection=function(e){var o=new t;return this.forAll(function(n,r){if(r in e.sets){var s=n.intersection(e.sets[r]),a=s.count();a>0&&(o.sets[r]=s,o.n+=a)}}),o},t}();$.LinkSets=u;function i(t,e,o,n){for(var r=t.length,s=new M(r,e,o,n);s.greedyMerge(););var a=[],l=s.getGroupHierarchy(a);return a.forEach(function(x){var E=function(w){var S=x[w];typeof S=="number"&&(x[w]=t[S])};E("source"),E("target")}),{groups:l,powerEdges:a}}return $.getGroups=i,$}var W={},bt;function yt(){if(bt)return W;bt=1,Object.defineProperty(W,"__esModule",{value:!0});function C(t,e){var o={};for(var n in t)o[n]={};for(var n in e)o[n]={};return Object.keys(o).length}function M(t,e){var o=0;for(var n in t)typeof e[n]<"u"&&++o;return o}function D(t,e){var o={},n=function(r,s){typeof o[r]>"u"&&(o[r]={}),o[r][s]={}};return t.forEach(function(r){var s=e.getSourceIndex(r),a=e.getTargetIndex(r);n(s,a),n(a,s)}),o}function b(t,e,o,n){var r=D(t,n);t.forEach(function(s){var a=r[n.getSourceIndex(s)],l=r[n.getTargetIndex(s)];n.setLength(s,1+e*o(a,l))})}function v(t,e,o){o===void 0&&(o=1),b(t,o,function(n,r){return Math.sqrt(C(n,r)-M(n,r))},e)}W.symmetricDiffLinkLengths=v;function f(t,e,o){o===void 0&&(o=1),b(t,o,function(n,r){return Math.min(Object.keys(n).length,Object.keys(r).length)<1.1?0:M(n,r)/C(n,r)},e)}W.jaccardLinkLengths=f;function u(t,e,o,n){var r=i(t,e,n),s={};r.forEach(function(l,x){return l.forEach(function(E){return s[E]=x})});var a=[];return e.forEach(function(l){var x=n.getSourceIndex(l),E=n.getTargetIndex(l),w=s[x],S=s[E];w!==S&&a.push({axis:o,left:x,right:E,gap:n.getMinSeparation(l)})}),a}W.generateDirectedEdgeConstraints=u;function i(t,e,o){var n=[],r=0,s=[],a=[];function l(p){p.index=p.lowlink=r++,s.push(p),p.onStack=!0;for(var k=0,y=p.out;k<y.length;k++){var g=y[k];typeof g.index>"u"?(l(g),p.lowlink=Math.min(p.lowlink,g.lowlink)):g.onStack&&(p.lowlink=Math.min(p.lowlink,g.index))}if(p.lowlink===p.index){for(var c=[];s.length&&(g=s.pop(),g.onStack=!1,c.push(g),g!==p););a.push(c.map(function(h){return h.id}))}}for(var x=0;x<t;x++)n.push({id:x,out:[]});for(var E=0,w=e;E<w.length;E++){var S=w[E],I=n[o.getSourceIndex(S)],G=n[o.getTargetIndex(S)];I.out.push(G)}for(var O=0,T=n;O<T.length;O++){var d=T[O];typeof d.index>"u"&&l(d)}return a}return W.stronglyConnectedComponents=i,W}var et={},kt;function _t(){if(kt)return et;kt=1,Object.defineProperty(et,"__esModule",{value:!0});var C=function(){function b(){this.locks={}}return b.prototype.add=function(v,f){this.locks[v]=f},b.prototype.clear=function(){this.locks={}},b.prototype.isEmpty=function(){for(var v in this.locks)return!1;return!0},b.prototype.apply=function(v){for(var f in this.locks)v(Number(f),this.locks[f])},b}();et.Locks=C;var M=function(){function b(v,f,u){u===void 0&&(u=null),this.D=f,this.G=u,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new D,this.project=null,this.x=v,this.k=v.length;var i=this.n=v[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new C,this.minD=Number.MAX_VALUE;for(var t=i,e;t--;)for(e=i;--e>t;){var o=f[t][e];o>0&&o<this.minD&&(this.minD=o)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),t=this.k;t--;){for(this.g[t]=new Array(i),this.H[t]=new Array(i),e=i;e--;)this.H[t][e]=new Array(i);this.Hd[t]=new Array(i),this.a[t]=new Array(i),this.b[t]=new Array(i),this.c[t]=new Array(i),this.d[t]=new Array(i),this.e[t]=new Array(i),this.ia[t]=new Array(i),this.ib[t]=new Array(i),this.xtmp[t]=new Array(i)}}return b.createSquareMatrix=function(v,f){for(var u=new Array(v),i=0;i<v;++i){u[i]=new Array(v);for(var t=0;t<v;++t)u[i][t]=f(i,t)}return u},b.prototype.offsetDir=function(){for(var v=this,f=new Array(this.k),u=0,i=0;i<this.k;++i){var t=f[i]=this.random.getNextBetween(.01,1)-.5;u+=t*t}return u=Math.sqrt(u),f.map(function(e){return e*=v.minD/u})},b.prototype.computeDerivatives=function(v){var f=this,u=this.n;if(!(u<1)){for(var i,t=new Array(this.k),e=new Array(this.k),o=new Array(this.k),n=0,r=0;r<u;++r){for(i=0;i<this.k;++i)o[i]=this.g[i][r]=0;for(var s=0;s<u;++s)if(r!==s){for(var a=u;a--;){var l=0;for(i=0;i<this.k;++i){var x=t[i]=v[i][r]-v[i][s];l+=e[i]=x*x}if(l>1e-9)break;var E=this.offsetDir();for(i=0;i<this.k;++i)v[i][s]+=E[i]}var w=Math.sqrt(l),S=this.D[r][s],I=this.G!=null?this.G[r][s]:1;if(I>1&&w>S||!isFinite(S)){for(i=0;i<this.k;++i)this.H[i][r][s]=0;continue}I>1&&(I=1);var G=S*S,O=2*I*(w-S)/(G*w),T=w*w*w,d=2*-I/(G*T);for(isFinite(O)||console.log(O),i=0;i<this.k;++i)this.g[i][r]+=t[i]*O,o[i]-=this.H[i][r][s]=d*(T+S*(e[i]-l)+w*l)}for(i=0;i<this.k;++i)n=Math.max(n,this.H[i][r][r]=o[i])}for(var p=this.snapGridSize/2,k=this.snapGridSize,y=this.snapStrength,g=y/(p*p),c=this.numGridSnapNodes,r=0;r<c;++r)for(i=0;i<this.k;++i){var h=this.x[i][r],_=h/k,m=_%1,L=_-m,A=Math.abs(m),x=A<=.5?h-L*k:h>0?h-(L+1)*k:h-(L-1)*k;-p<x&&x<=p&&(this.scaleSnapByMaxH?(this.g[i][r]+=n*g*x,this.H[i][r][r]+=n*g):(this.g[i][r]+=g*x,this.H[i][r][r]+=g))}this.locks.isEmpty()||this.locks.apply(function(P,N){for(i=0;i<f.k;++i)f.H[i][P][P]+=n,f.g[i][P]-=n*(N[i]-v[i][P])})}},b.dotProd=function(v,f){for(var u=0,i=v.length;i--;)u+=v[i]*f[i];return u},b.rightMultiply=function(v,f,u){for(var i=v.length;i--;)u[i]=b.dotProd(v[i],f)},b.prototype.computeStepSize=function(v){for(var f=0,u=0,i=0;i<this.k;++i)f+=b.dotProd(this.g[i],v[i]),b.rightMultiply(this.H[i],v[i],this.Hd[i]),u+=b.dotProd(v[i],this.Hd[i]);return u===0||!isFinite(u)?0:1*f/u},b.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var v=this.computeStepSize(this.g),f=0;f<this.k;++f)this.takeDescentStep(this.x[f],this.g[f],v);return this.computeStress()},b.copy=function(v,f){for(var u=v.length,i=f[0].length,t=0;t<u;++t)for(var e=0;e<i;++e)f[t][e]=v[t][e]},b.prototype.stepAndProject=function(v,f,u,i){b.copy(v,f),this.takeDescentStep(f[0],u[0],i),this.project&&this.project[0](v[0],v[1],f[0]),this.takeDescentStep(f[1],u[1],i),this.project&&this.project[1](f[0],v[1],f[1]);for(var t=2;t<this.k;t++)this.takeDescentStep(f[t],u[t],i)},b.mApply=function(v,f,u){for(var i=v;i-- >0;)for(var t=f;t-- >0;)u(i,t)},b.prototype.matrixApply=function(v){b.mApply(this.k,this.n,v)},b.prototype.computeNextPosition=function(v,f){var u=this;this.computeDerivatives(v);var i=this.computeStepSize(this.g);if(this.stepAndProject(v,f,this.g,i),this.project){this.matrixApply(function(e,o){return u.e[e][o]=v[e][o]-f[e][o]});var t=this.computeStepSize(this.e);t=Math.max(.2,Math.min(t,1)),this.stepAndProject(v,f,this.e,t)}},b.prototype.run=function(v){for(var f=Number.MAX_VALUE,u=!1;!u&&v-- >0;){var i=this.rungeKutta();u=Math.abs(f/i-1)<this.threshold,f=i}return f},b.prototype.rungeKutta=function(){var v=this;this.computeNextPosition(this.x,this.a),b.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),b.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var f=0;return this.matrixApply(function(u,i){var t=(v.a[u][i]+2*v.b[u][i]+2*v.c[u][i]+v.d[u][i])/6,e=v.x[u][i]-t;f+=e*e,v.x[u][i]=t}),f},b.mid=function(v,f,u){b.mApply(v.length,v[0].length,function(i,t){return u[i][t]=v[i][t]+(f[i][t]-v[i][t])/2})},b.prototype.takeDescentStep=function(v,f,u){for(var i=0;i<this.n;++i)v[i]=v[i]-u*f[i]},b.prototype.computeStress=function(){for(var v=0,f=0,u=this.n-1;f<u;++f)for(var i=f+1,t=this.n;i<t;++i){for(var e=0,o=0;o<this.k;++o){var n=this.x[o][f]-this.x[o][i];e+=n*n}e=Math.sqrt(e);var r=this.D[f][i];if(isFinite(r)){var s=r-e,a=r*r;v+=s*s/a}}return v},b.zeroDistance=1e-10,b}();et.Descent=M;var D=function(){function b(v){v===void 0&&(v=1),this.seed=v,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return b.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},b.prototype.getNextBetween=function(v,f){return v+this.getNext()*(f-v)},b}();return et.PseudoRandom=D,et}var j={},Z={},wt;function mt(){if(wt)return Z;wt=1,Object.defineProperty(Z,"__esModule",{value:!0});var C=function(){function i(t){this.scale=t,this.AB=0,this.AD=0,this.A2=0}return i.prototype.addVariable=function(t){var e=this.scale/t.scale,o=t.offset/t.scale,n=t.weight;this.AB+=n*e*o,this.AD+=n*e*t.desiredPosition,this.A2+=n*e*e},i.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},i}();Z.PositionStats=C;var M=function(){function i(t,e,o,n){n===void 0&&(n=!1),this.left=t,this.right=e,this.gap=o,this.equality=n,this.active=!1,this.unsatisfiable=!1,this.left=t,this.right=e,this.gap=o,this.equality=n}return i.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},i}();Z.Constraint=M;var D=function(){function i(t,e,o){e===void 0&&(e=1),o===void 0&&(o=1),this.desiredPosition=t,this.weight=e,this.scale=o,this.offset=0}return i.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},i.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},i.prototype.visitNeighbours=function(t,e){var o=function(n,r){return n.active&&t!==r&&e(n,r)};this.cOut.forEach(function(n){return o(n,n.right)}),this.cIn.forEach(function(n){return o(n,n.left)})},i}();Z.Variable=D;var b=function(){function i(t){this.vars=[],t.offset=0,this.ps=new C(t.scale),this.addVariable(t)}return i.prototype.addVariable=function(t){t.block=this,this.vars.push(t),this.ps.addVariable(t),this.posn=this.ps.getPosn()},i.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var t=0,e=this.vars.length;t<e;++t)this.ps.addVariable(this.vars[t]);this.posn=this.ps.getPosn()},i.prototype.compute_lm=function(t,e,o){var n=this,r=t.dfdv();return t.visitNeighbours(e,function(s,a){var l=n.compute_lm(a,t,o);a===s.right?(r+=l*s.left.scale,s.lm=l):(r+=l*s.right.scale,s.lm=-l),o(s)}),r/t.scale},i.prototype.populateSplitBlock=function(t,e){var o=this;t.visitNeighbours(e,function(n,r){r.offset=t.offset+(r===n.right?n.gap:-n.gap),o.addVariable(r),o.populateSplitBlock(r,t)})},i.prototype.traverse=function(t,e,o,n){var r=this;o===void 0&&(o=this.vars[0]),n===void 0&&(n=null),o.visitNeighbours(n,function(s,a){e.push(t(s)),r.traverse(t,e,a,o)})},i.prototype.findMinLM=function(){var t=null;return this.compute_lm(this.vars[0],null,function(e){!e.equality&&(t===null||e.lm<t.lm)&&(t=e)}),t},i.prototype.findMinLMBetween=function(t,e){this.compute_lm(t,null,function(){});var o=null;return this.findPath(t,null,e,function(n,r){!n.equality&&n.right===r&&(o===null||n.lm<o.lm)&&(o=n)}),o},i.prototype.findPath=function(t,e,o,n){var r=this,s=!1;return t.visitNeighbours(e,function(a,l){!s&&(l===o||r.findPath(l,t,o,n))&&(s=!0,n(a,l))}),s},i.prototype.isActiveDirectedPathBetween=function(t,e){if(t===e)return!0;for(var o=t.cOut.length;o--;){var n=t.cOut[o];if(n.active&&this.isActiveDirectedPathBetween(n.right,e))return!0}return!1},i.split=function(t){return t.active=!1,[i.createSplitBlock(t.left),i.createSplitBlock(t.right)]},i.createSplitBlock=function(t){var e=new i(t);return e.populateSplitBlock(t,null),e},i.prototype.splitBetween=function(t,e){var o=this.findMinLMBetween(t,e);if(o!==null){var n=i.split(o);return{constraint:o,lb:n[0],rb:n[1]}}return null},i.prototype.mergeAcross=function(t,e,o){e.active=!0;for(var n=0,r=t.vars.length;n<r;++n){var s=t.vars[n];s.offset+=o,this.addVariable(s)}this.posn=this.ps.getPosn()},i.prototype.cost=function(){for(var t=0,e=this.vars.length;e--;){var o=this.vars[e],n=o.position()-o.desiredPosition;t+=n*n*o.weight}return t},i}();Z.Block=b;var v=function(){function i(t){this.vs=t;var e=t.length;for(this.list=new Array(e);e--;){var o=new b(t[e]);this.list[e]=o,o.blockInd=e}}return i.prototype.cost=function(){for(var t=0,e=this.list.length;e--;)t+=this.list[e].cost();return t},i.prototype.insert=function(t){t.blockInd=this.list.length,this.list.push(t)},i.prototype.remove=function(t){var e=this.list.length-1,o=this.list[e];this.list.length=e,t!==o&&(this.list[t.blockInd]=o,o.blockInd=t.blockInd)},i.prototype.merge=function(t){var e=t.left.block,o=t.right.block,n=t.right.offset-t.left.offset-t.gap;e.vars.length<o.vars.length?(o.mergeAcross(e,t,n),this.remove(e)):(e.mergeAcross(o,t,-n),this.remove(o))},i.prototype.forEach=function(t){this.list.forEach(t)},i.prototype.updateBlockPositions=function(){this.list.forEach(function(t){return t.updateWeightedPosition()})},i.prototype.split=function(t){var e=this;this.updateBlockPositions(),this.list.forEach(function(o){var n=o.findMinLM();n!==null&&n.lm<f.LAGRANGIAN_TOLERANCE&&(o=n.left.block,b.split(n).forEach(function(r){return e.insert(r)}),e.remove(o),t.push(n))})},i}();Z.Blocks=v;var f=function(){function i(t,e){this.vs=t,this.cs=e,this.vs=t,t.forEach(function(o){o.cIn=[],o.cOut=[]}),this.cs=e,e.forEach(function(o){o.left.cOut.push(o),o.right.cIn.push(o)}),this.inactive=e.map(function(o){return o.active=!1,o}),this.bs=null}return i.prototype.cost=function(){return this.bs.cost()},i.prototype.setStartingPositions=function(t){this.inactive=this.cs.map(function(e){return e.active=!1,e}),this.bs=new v(this.vs),this.bs.forEach(function(e,o){return e.posn=t[o]})},i.prototype.setDesiredPositions=function(t){this.vs.forEach(function(e,o){return e.desiredPosition=t[o]})},i.prototype.mostViolated=function(){for(var t=Number.MAX_VALUE,e=null,o=this.inactive,n=o.length,r=n,s=0;s<n;++s){var a=o[s];if(!a.unsatisfiable){var l=a.slack();if((a.equality||l<t)&&(t=l,e=a,r=s,a.equality))break}}return r!==n&&(t<i.ZERO_UPPERBOUND&&!e.active||e.equality)&&(o[r]=o[n-1],o.length=n-1),e},i.prototype.satisfy=function(){this.bs==null&&(this.bs=new v(this.vs)),this.bs.split(this.inactive);for(var t=null;(t=this.mostViolated())&&(t.equality||t.slack()<i.ZERO_UPPERBOUND&&!t.active);){var e=t.left.block,o=t.right.block;if(e!==o)this.bs.merge(t);else{if(e.isActiveDirectedPathBetween(t.right,t.left)){t.unsatisfiable=!0;continue}var n=e.splitBetween(t.left,t.right);if(n!==null)this.bs.insert(n.lb),this.bs.insert(n.rb),this.bs.remove(e),this.inactive.push(n.constraint);else{t.unsatisfiable=!0;continue}t.slack()>=0?this.inactive.push(t):this.bs.merge(t)}}},i.prototype.solve=function(){this.satisfy();for(var t=Number.MAX_VALUE,e=this.bs.cost();Math.abs(t-e)>1e-4;)this.satisfy(),t=e,e=this.bs.cost();return e},i.LAGRANGIAN_TOLERANCE=-1e-4,i.ZERO_UPPERBOUND=-1e-10,i}();Z.Solver=f;function u(i,t,e){for(var o=i.map(function(T){return new D(T.desiredCenter)}),n=[],r=i.length,s=0;s<r-1;s++){var a=i[s],l=i[s+1];n.push(new M(o[s],o[s+1],(a.size+l.size)/2))}var x=o[0],E=o[r-1],w=i[0].size/2,S=i[r-1].size/2,I=null,G=null;t&&(I=new D(t,x.weight*1e3),o.push(I),n.push(new M(I,x,w))),e&&(G=new D(e,E.weight*1e3),o.push(G),n.push(new M(E,G,S)));var O=new f(o,n);return O.solve(),{newCenters:o.slice(0,i.length).map(function(T){return T.position()}),lowerBound:I?I.position():x.position()-w,upperBound:G?G.position():E.position()+S}}return Z.removeOverlapInOneDimension=u,Z}var nt={},Et;function Vt(){if(Et)return nt;Et=1;var C=K&&K.__extends||function(){var f=function(u,i){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},f(u,i)};return function(u,i){f(u,i);function t(){this.constructor=u}u.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}();Object.defineProperty(nt,"__esModule",{value:!0});var M=function(){function f(){this.findIter=function(u){for(var i=this._root,t=this.iterator();i!==null;){var e=this._comparator(u,i.data);if(e===0)return t._cursor=i,t;t._ancestors.push(i),i=i.get_child(e>0)}return null}}return f.prototype.clear=function(){this._root=null,this.size=0},f.prototype.find=function(u){for(var i=this._root;i!==null;){var t=this._comparator(u,i.data);if(t===0)return i.data;i=i.get_child(t>0)}return null},f.prototype.lowerBound=function(u){return this._bound(u,this._comparator)},f.prototype.upperBound=function(u){var i=this._comparator;function t(e,o){return i(o,e)}return this._bound(u,t)},f.prototype.min=function(){var u=this._root;if(u===null)return null;for(;u.left!==null;)u=u.left;return u.data},f.prototype.max=function(){var u=this._root;if(u===null)return null;for(;u.right!==null;)u=u.right;return u.data},f.prototype.iterator=function(){return new D(this)},f.prototype.each=function(u){for(var i=this.iterator(),t;(t=i.next())!==null;)u(t)},f.prototype.reach=function(u){for(var i=this.iterator(),t;(t=i.prev())!==null;)u(t)},f.prototype._bound=function(u,i){for(var t=this._root,e=this.iterator();t!==null;){var o=this._comparator(u,t.data);if(o===0)return e._cursor=t,e;e._ancestors.push(t),t=t.get_child(o>0)}for(var n=e._ancestors.length-1;n>=0;--n)if(t=e._ancestors[n],i(u,t.data)>0)return e._cursor=t,e._ancestors.length=n,e;return e._ancestors.length=0,e},f}();nt.TreeBase=M;var D=function(){function f(u){this._tree=u,this._ancestors=[],this._cursor=null}return f.prototype.data=function(){return this._cursor!==null?this._cursor.data:null},f.prototype.next=function(){if(this._cursor===null){var u=this._tree._root;u!==null&&this._minNode(u)}else if(this._cursor.right===null){var i;do if(i=this._cursor,this._ancestors.length)this._cursor=this._ancestors.pop();else{this._cursor=null;break}while(this._cursor.right===i)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return this._cursor!==null?this._cursor.data:null},f.prototype.prev=function(){if(this._cursor===null){var u=this._tree._root;u!==null&&this._maxNode(u)}else if(this._cursor.left===null){var i;do if(i=this._cursor,this._ancestors.length)this._cursor=this._ancestors.pop();else{this._cursor=null;break}while(this._cursor.left===i)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return this._cursor!==null?this._cursor.data:null},f.prototype._minNode=function(u){for(;u.left!==null;)this._ancestors.push(u),u=u.left;this._cursor=u},f.prototype._maxNode=function(u){for(;u.right!==null;)this._ancestors.push(u),u=u.right;this._cursor=u},f}();nt.Iterator=D;var b=function(){function f(u){this.data=u,this.left=null,this.right=null,this.red=!0}return f.prototype.get_child=function(u){return u?this.right:this.left},f.prototype.set_child=function(u,i){u?this.right=i:this.left=i},f}(),v=function(f){C(u,f);function u(i){var t=f.call(this)||this;return t._root=null,t._comparator=i,t.size=0,t}return u.prototype.insert=function(i){var t=!1;if(this._root===null)this._root=new b(i),t=!0,this.size++;else{var e=new b(void 0),o=!1,n=!1,r=null,s=e,a=null,l=this._root;for(s.right=this._root;;){if(l===null?(l=new b(i),a.set_child(o,l),t=!0,this.size++):u.is_red(l.left)&&u.is_red(l.right)&&(l.red=!0,l.left.red=!1,l.right.red=!1),u.is_red(l)&&u.is_red(a)){var x=s.right===r;l===a.get_child(n)?s.set_child(x,u.single_rotate(r,!n)):s.set_child(x,u.double_rotate(r,!n))}var E=this._comparator(l.data,i);if(E===0)break;n=o,o=E<0,r!==null&&(s=r),r=a,a=l,l=l.get_child(o)}this._root=e.right}return this._root.red=!1,t},u.prototype.remove=function(i){if(this._root===null)return!1;var t=new b(void 0),e=t;e.right=this._root;for(var o=null,n=null,r=null,s=!0;e.get_child(s)!==null;){var a=s;n=o,o=e,e=e.get_child(s);var l=this._comparator(i,e.data);if(s=l>0,l===0&&(r=e),!u.is_red(e)&&!u.is_red(e.get_child(s))){if(u.is_red(e.get_child(!s))){var x=u.single_rotate(e,s);o.set_child(a,x),o=x}else if(!u.is_red(e.get_child(!s))){var E=o.get_child(!a);if(E!==null)if(!u.is_red(E.get_child(!a))&&!u.is_red(E.get_child(a)))o.red=!1,E.red=!0,e.red=!0;else{var w=n.right===o;u.is_red(E.get_child(a))?n.set_child(w,u.double_rotate(o,a)):u.is_red(E.get_child(!a))&&n.set_child(w,u.single_rotate(o,a));var S=n.get_child(w);S.red=!0,e.red=!0,S.left.red=!1,S.right.red=!1}}}}return r!==null&&(r.data=e.data,o.set_child(o.right===e,e.get_child(e.left===null)),this.size--),this._root=t.right,this._root!==null&&(this._root.red=!1),r!==null},u.is_red=function(i){return i!==null&&i.red},u.single_rotate=function(i,t){var e=i.get_child(!t);return i.set_child(!t,e.get_child(t)),e.set_child(t,i),i.red=!0,e.red=!1,e},u.double_rotate=function(i,t){return i.set_child(!t,u.single_rotate(i.get_child(!t),!t)),u.single_rotate(i,t)},u}(M);return nt.RBTree=v,nt}var Lt;function ht(){if(Lt)return j;Lt=1;var C=K&&K.__extends||function(){var d=function(p,k){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,g){y.__proto__=g}||function(y,g){for(var c in g)g.hasOwnProperty(c)&&(y[c]=g[c])},d(p,k)};return function(p,k){d(p,k);function y(){this.constructor=p}p.prototype=k===null?Object.create(k):(y.prototype=k.prototype,new y)}}();Object.defineProperty(j,"__esModule",{value:!0});var M=mt(),D=Vt();function b(d){return d.bounds=typeof d.leaves<"u"?d.leaves.reduce(function(p,k){return k.bounds.union(p)},v.empty()):v.empty(),typeof d.groups<"u"&&(d.bounds=d.groups.reduce(function(p,k){return b(k).union(p)},d.bounds)),d.bounds=d.bounds.inflate(d.padding),d.bounds}j.computeGroupBounds=b;var v=function(){function d(p,k,y,g){this.x=p,this.X=k,this.y=y,this.Y=g}return d.empty=function(){return new d(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},d.prototype.cx=function(){return(this.x+this.X)/2},d.prototype.cy=function(){return(this.y+this.Y)/2},d.prototype.overlapX=function(p){var k=this.cx(),y=p.cx();return k<=y&&p.x<this.X?this.X-p.x:y<=k&&this.x<p.X?p.X-this.x:0},d.prototype.overlapY=function(p){var k=this.cy(),y=p.cy();return k<=y&&p.y<this.Y?this.Y-p.y:y<=k&&this.y<p.Y?p.Y-this.y:0},d.prototype.setXCentre=function(p){var k=p-this.cx();this.x+=k,this.X+=k},d.prototype.setYCentre=function(p){var k=p-this.cy();this.y+=k,this.Y+=k},d.prototype.width=function(){return this.X-this.x},d.prototype.height=function(){return this.Y-this.y},d.prototype.union=function(p){return new d(Math.min(this.x,p.x),Math.max(this.X,p.X),Math.min(this.y,p.y),Math.max(this.Y,p.Y))},d.prototype.lineIntersections=function(p,k,y,g){for(var c=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],h=[],_=0;_<4;++_){var m=d.lineIntersection(p,k,y,g,c[_][0],c[_][1],c[_][2],c[_][3]);m!==null&&h.push({x:m.x,y:m.y})}return h},d.prototype.rayIntersection=function(p,k){var y=this.lineIntersections(this.cx(),this.cy(),p,k);return y.length>0?y[0]:null},d.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y}]},d.lineIntersection=function(p,k,y,g,c,h,_,m){var L=y-p,A=_-c,P=g-k,N=m-h,R=N*L-A*P;if(R==0)return null;var Y=p-c,z=k-h,q=A*z-N*Y,B=q/R,X=L*z-P*Y,H=X/R;return B>=0&&B<=1&&H>=0&&H<=1?{x:p+B*L,y:k+B*P}:null},d.prototype.inflate=function(p){return new d(this.x-p,this.X+p,this.y-p,this.Y+p)},d}();j.Rectangle=v;function f(d,p,k){var y=d.rayIntersection(p.cx(),p.cy())||{x:d.cx(),y:d.cy()},g=p.rayIntersection(d.cx(),d.cy())||{x:p.cx(),y:p.cy()},c=g.x-y.x,h=g.y-y.y,_=Math.sqrt(c*c+h*h),m=_-k;return{sourceIntersection:y,targetIntersection:g,arrowStart:{x:y.x+m*c/_,y:y.y+m*h/_}}}j.makeEdgeBetween=f;function u(d,p,k){var y=p.rayIntersection(d.x,d.y);y||(y={x:p.cx(),y:p.cy()});var g=y.x-d.x,c=y.y-d.y,h=Math.sqrt(g*g+c*c);return{x:y.x-k*g/h,y:y.y-k*c/h}}j.makeEdgeTo=u;var i=function(){function d(p,k,y){this.v=p,this.r=k,this.pos=y,this.prev=o(),this.next=o()}return d}(),t=function(){function d(p,k,y){this.isOpen=p,this.v=k,this.pos=y}return d}();function e(d,p){return d.pos>p.pos?1:d.pos<p.pos||d.isOpen?-1:p.isOpen?1:0}function o(){return new D.RBTree(function(d,p){return d.pos-p.pos})}var n={getCentre:function(d){return d.cx()},getOpen:function(d){return d.y},getClose:function(d){return d.Y},getSize:function(d){return d.width()},makeRect:function(d,p,k,y){return new v(k-y/2,k+y/2,d,p)},findNeighbours:l},r={getCentre:function(d){return d.cy()},getOpen:function(d){return d.x},getClose:function(d){return d.X},getSize:function(d){return d.height()},makeRect:function(d,p,k,y){return new v(d,p,k-y/2,k+y/2)},findNeighbours:x};function s(d,p,k,y){y===void 0&&(y=!1);var g=d.padding,c=typeof d.groups<"u"?d.groups.length:0,h=typeof d.leaves<"u"?d.leaves.length:0,_=c?d.groups.reduce(function(V,U){return V.concat(s(U,p,k,!0))},[]):[],m=(y?2:0)+h+c,L=new Array(m),A=new Array(m),P=0,N=function(V,U){A[P]=V,L[P++]=U};if(y){var R=d.bounds,Y=p.getCentre(R),z=p.getSize(R)/2,q=p.getOpen(R),B=p.getClose(R),X=Y-z+g/2,H=Y+z-g/2;d.minVar.desiredPosition=X,N(p.makeRect(q,B,X,g),d.minVar),d.maxVar.desiredPosition=H,N(p.makeRect(q,B,H,g),d.maxVar)}h&&d.leaves.forEach(function(V){return N(V.bounds,V.variable)}),c&&d.groups.forEach(function(V){var U=V.bounds;N(p.makeRect(p.getOpen(U),p.getClose(U),p.getCentre(U),p.getSize(U)),V.minVar)});var Q=a(A,L,p,k);return c&&(L.forEach(function(V){V.cOut=[],V.cIn=[]}),Q.forEach(function(V){V.left.cOut.push(V),V.right.cIn.push(V)}),d.groups.forEach(function(V){var U=(V.padding-p.getSize(V.bounds))/2;V.minVar.cIn.forEach(function(J){return J.gap+=U}),V.minVar.cOut.forEach(function(J){J.left=V.maxVar,J.gap+=U})})),_.concat(Q)}function a(d,p,k,y){var g,c=d.length,h=2*c;console.assert(p.length>=c);var _=new Array(h);for(g=0;g<c;++g){var m=d[g],L=new i(p[g],m,k.getCentre(m));_[g]=new t(!0,L,k.getOpen(m)),_[g+c]=new t(!1,L,k.getClose(m))}_.sort(e);var A=new Array,P=o();for(g=0;g<h;++g){var N=_[g],L=N.v;if(N.isOpen)P.insert(L),k.findNeighbours(L,P);else{P.remove(L);var R=function(q,B){var X=(k.getSize(q.r)+k.getSize(B.r))/2+y;A.push(new M.Constraint(q.v,B.v,X))},Y=function(q,B,X){for(var H,Q=L[q].iterator();(H=Q[q]())!==null;)X(H,L),H[B].remove(L)};Y("prev","next",function(q,B){return R(q,B)}),Y("next","prev",function(q,B){return R(B,q)})}}return console.assert(P.size===0),A}function l(d,p){var k=function(y,g){for(var c=p.findIter(d),h;(h=c[y]())!==null;){var _=h.r.overlapX(d.r);if((_<=0||_<=h.r.overlapY(d.r))&&(d[y].insert(h),h[g].insert(d)),_<=0)break}};k("next","prev"),k("prev","next")}function x(d,p){var k=function(y,g){var c=p.findIter(d)[y]();c!==null&&c.r.overlapX(d.r)>0&&(d[y].insert(c),c[g].insert(d))};k("next","prev"),k("prev","next")}function E(d,p){return a(d,p,n,1e-6)}j.generateXConstraints=E;function w(d,p){return a(d,p,r,1e-6)}j.generateYConstraints=w;function S(d){return s(d,n,1e-6)}j.generateXGroupConstraints=S;function I(d){return s(d,r,1e-6)}j.generateYGroupConstraints=I;function G(d){var p=d.map(function(g){return new M.Variable(g.cx())}),k=E(d,p),y=new M.Solver(p,k);y.solve(),p.forEach(function(g,c){return d[c].setXCentre(g.position())}),p=d.map(function(g){return new M.Variable(g.cy())}),k=w(d,p),y=new M.Solver(p,k),y.solve(),p.forEach(function(g,c){return d[c].setYCentre(g.position())})}j.removeOverlaps=G;var O=function(d){C(p,d);function p(k,y){var g=d.call(this,0,y)||this;return g.index=k,g}return p}(M.Variable);j.IndexedVariable=O;var T=function(){function d(p,k,y,g,c){var h=this;if(y===void 0&&(y=null),g===void 0&&(g=null),c===void 0&&(c=!1),this.nodes=p,this.groups=k,this.rootGroup=y,this.avoidOverlaps=c,this.variables=p.map(function(m,L){return m.variable=new O(L,1)}),g&&this.createConstraints(g),c&&y&&typeof y.groups<"u"){p.forEach(function(m){if(!m.width||!m.height){m.bounds=new v(m.x,m.x,m.y,m.y);return}var L=m.width/2,A=m.height/2;m.bounds=new v(m.x-L,m.x+L,m.y-A,m.y+A)}),b(y);var _=p.length;k.forEach(function(m){h.variables[_]=m.minVar=new O(_++,typeof m.stiffness<"u"?m.stiffness:.01),h.variables[_]=m.maxVar=new O(_++,typeof m.stiffness<"u"?m.stiffness:.01)})}}return d.prototype.createSeparation=function(p){return new M.Constraint(this.nodes[p.left].variable,this.nodes[p.right].variable,p.gap,typeof p.equality<"u"?p.equality:!1)},d.prototype.makeFeasible=function(p){var k=this;if(this.avoidOverlaps){var y="x",g="width";p.axis==="x"&&(y="y",g="height");var c=p.offsets.map(function(_){return k.nodes[_.node]}).sort(function(_,m){return _[y]-m[y]}),h=null;c.forEach(function(_){if(h){var m=h[y]+h[g];m>_[y]&&(_[y]=m)}h=_})}},d.prototype.createAlignment=function(p){var k=this,y=this.nodes[p.offsets[0].node].variable;this.makeFeasible(p);var g=p.axis==="x"?this.xConstraints:this.yConstraints;p.offsets.slice(1).forEach(function(c){var h=k.nodes[c.node].variable;g.push(new M.Constraint(y,h,c.offset,!0))})},d.prototype.createConstraints=function(p){var k=this,y=function(g){return typeof g.type>"u"||g.type==="separation"};this.xConstraints=p.filter(function(g){return g.axis==="x"&&y(g)}).map(function(g){return k.createSeparation(g)}),this.yConstraints=p.filter(function(g){return g.axis==="y"&&y(g)}).map(function(g){return k.createSeparation(g)}),p.filter(function(g){return g.type==="alignment"}).forEach(function(g){return k.createAlignment(g)})},d.prototype.setupVariablesAndBounds=function(p,k,y,g){this.nodes.forEach(function(c,h){c.fixed?(c.variable.weight=c.fixedWeight?c.fixedWeight:1e3,y[h]=g(c)):c.variable.weight=1;var _=(c.width||0)/2,m=(c.height||0)/2,L=p[h],A=k[h];c.bounds=new v(L-_,L+_,A-m,A+m)})},d.prototype.xProject=function(p,k,y){!this.rootGroup&&!(this.avoidOverlaps||this.xConstraints)||this.project(p,k,p,y,function(g){return g.px},this.xConstraints,S,function(g){return g.bounds.setXCentre(y[g.variable.index]=g.variable.position())},function(g){var c=y[g.minVar.index]=g.minVar.position(),h=y[g.maxVar.index]=g.maxVar.position(),_=g.padding/2;g.bounds.x=c-_,g.bounds.X=h+_})},d.prototype.yProject=function(p,k,y){!this.rootGroup&&!this.yConstraints||this.project(p,k,k,y,function(g){return g.py},this.yConstraints,I,function(g){return g.bounds.setYCentre(y[g.variable.index]=g.variable.position())},function(g){var c=y[g.minVar.index]=g.minVar.position(),h=y[g.maxVar.index]=g.maxVar.position(),_=g.padding/2;g.bounds.y=c-_,g.bounds.Y=h+_})},d.prototype.projectFunctions=function(){var p=this;return[function(k,y,g){return p.xProject(k,y,g)},function(k,y,g){return p.yProject(k,y,g)}]},d.prototype.project=function(p,k,y,g,c,h,_,m,L){this.setupVariablesAndBounds(p,k,g,c),this.rootGroup&&this.avoidOverlaps&&(b(this.rootGroup),h=h.concat(_(this.rootGroup))),this.solve(this.variables,h,y,g),this.nodes.forEach(m),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(L),b(this.rootGroup))},d.prototype.solve=function(p,k,y,g){var c=new M.Solver(p,k);c.setStartingPositions(y),c.setDesiredPositions(g),c.solve()},d}();return j.Projection=T,j}var ct={},ot={},Pt;function Xt(){if(Pt)return ot;Pt=1,Object.defineProperty(ot,"__esModule",{value:!0});var C=function(){function D(b){this.elem=b,this.subheaps=[]}return D.prototype.toString=function(b){for(var v="",f=!1,u=0;u<this.subheaps.length;++u){var i=this.subheaps[u];if(!i.elem){f=!1;continue}f&&(v=v+","),v=v+i.toString(b),f=!0}return v!==""&&(v="("+v+")"),(this.elem?b(this.elem):"")+v},D.prototype.forEach=function(b){this.empty()||(b(this.elem,this),this.subheaps.forEach(function(v){return v.forEach(b)}))},D.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce(function(b,v){return b+v.count()},0)},D.prototype.min=function(){return this.elem},D.prototype.empty=function(){return this.elem==null},D.prototype.contains=function(b){if(this===b)return!0;for(var v=0;v<this.subheaps.length;v++)if(this.subheaps[v].contains(b))return!0;return!1},D.prototype.isHeap=function(b){var v=this;return this.subheaps.every(function(f){return b(v.elem,f.elem)&&f.isHeap(b)})},D.prototype.insert=function(b,v){return this.merge(new D(b),v)},D.prototype.merge=function(b,v){return this.empty()?b:b.empty()?this:v(this.elem,b.elem)?(this.subheaps.push(b),this):(b.subheaps.push(this),b)},D.prototype.removeMin=function(b){return this.empty()?null:this.mergePairs(b)},D.prototype.mergePairs=function(b){if(this.subheaps.length==0)return new D(null);if(this.subheaps.length==1)return this.subheaps[0];var v=this.subheaps.pop().merge(this.subheaps.pop(),b),f=this.mergePairs(b);return v.merge(f,b)},D.prototype.decreaseKey=function(b,v,f,u){var i=b.removeMin(u);b.elem=i.elem,b.subheaps=i.subheaps,f!==null&&i.elem!==null&&f(b.elem,b);var t=new D(v);return f!==null&&f(v,t),this.merge(t,u)},D}();ot.PairingHeap=C;var M=function(){function D(b){this.lessThan=b}return D.prototype.top=function(){return this.empty()?null:this.root.elem},D.prototype.push=function(){for(var b=[],v=0;v<arguments.length;v++)b[v]=arguments[v];for(var f,u=0,i;i=b[u];++u)f=new C(i),this.root=this.empty()?f:this.root.merge(f,this.lessThan);return f},D.prototype.empty=function(){return!this.root||!this.root.elem},D.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},D.prototype.forEach=function(b){this.root.forEach(b)},D.prototype.pop=function(){if(this.empty())return null;var b=this.root.min();return this.root=this.root.removeMin(this.lessThan),b},D.prototype.reduceKey=function(b,v,f){f===void 0&&(f=null),this.root=this.root.decreaseKey(b,v,f,this.lessThan)},D.prototype.toString=function(b){return this.root.toString(b)},D.prototype.count=function(){return this.root.count()},D}();return ot.PriorityQueue=M,ot}var At;function dt(){if(At)return ct;At=1,Object.defineProperty(ct,"__esModule",{value:!0});var C=Xt(),M=function(){function f(u,i){this.id=u,this.distance=i}return f}(),D=function(){function f(u){this.id=u,this.neighbours=[]}return f}(),b=function(){function f(u,i,t){this.node=u,this.prev=i,this.d=t}return f}(),v=function(){function f(u,i,t,e,o){this.n=u,this.es=i,this.neighbours=new Array(this.n);for(var n=this.n;n--;)this.neighbours[n]=new D(n);for(n=this.es.length;n--;){var r=this.es[n],s=t(r),a=e(r),l=o(r);this.neighbours[s].neighbours.push(new M(a,l)),this.neighbours[a].neighbours.push(new M(s,l))}}return f.prototype.DistanceMatrix=function(){for(var u=new Array(this.n),i=0;i<this.n;++i)u[i]=this.dijkstraNeighbours(i);return u},f.prototype.DistancesFromNode=function(u){return this.dijkstraNeighbours(u)},f.prototype.PathFromNodeToNode=function(u,i){return this.dijkstraNeighbours(u,i)},f.prototype.PathFromNodeToNodeWithPrevCost=function(u,i,t){var e=new C.PriorityQueue(function(I,G){return I.d<=G.d}),o=this.neighbours[u],n=new b(o,null,0),r={};for(e.push(n);!e.empty()&&(n=e.pop(),o=n.node,o.id!==i);)for(var s=o.neighbours.length;s--;){var a=o.neighbours[s],l=this.neighbours[a.id];if(!(n.prev&&l.id===n.prev.node.id)){var x=l.id+","+o.id;if(!(x in r&&r[x]<=n.d)){var E=n.prev?t(n.prev.node.id,o.id,l.id):0,w=n.d+a.distance+E;r[x]=w,e.push(new b(l,n,w))}}}for(var S=[];n.prev;)n=n.prev,S.push(n.node.id);return S},f.prototype.dijkstraNeighbours=function(u,i){i===void 0&&(i=-1);for(var t=new C.PriorityQueue(function(E,w){return E.d<=w.d}),e=this.neighbours.length,o=new Array(e);e--;){var n=this.neighbours[e];n.d=e===u?0:Number.POSITIVE_INFINITY,n.q=t.push(n)}for(;!t.empty();){var r=t.pop();if(o[r.id]=r.d,r.id===i){for(var s=[],a=r;typeof a.prev<"u";)s.push(a.prev.id),a=a.prev;return s}for(e=r.neighbours.length;e--;){var l=r.neighbours[e],a=this.neighbours[l.id],x=r.d+l.distance;r.d!==Number.MAX_VALUE&&a.d>x&&(a.d=x,a.prev=r,t.reduceKey(a.q,a,function(w,S){return w.q=S}))}}return o},f}();return ct.Calculator=v,ct}var F={},St;function zt(){if(St)return F;St=1;var C=K&&K.__extends||function(){var c=function(h,_){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,L){m.__proto__=L}||function(m,L){for(var A in L)L.hasOwnProperty(A)&&(m[A]=L[A])},c(h,_)};return function(h,_){c(h,_);function m(){this.constructor=h}h.prototype=_===null?Object.create(_):(m.prototype=_.prototype,new m)}}();Object.defineProperty(F,"__esModule",{value:!0});var M=ht(),D=function(){function c(){}return c}();F.Point=D;var b=function(){function c(h,_,m,L){this.x1=h,this.y1=_,this.x2=m,this.y2=L}return c}();F.LineSegment=b;var v=function(c){C(h,c);function h(){return c!==null&&c.apply(this,arguments)||this}return h}(D);F.PolyPoint=v;function f(c,h,_){return(h.x-c.x)*(_.y-c.y)-(_.x-c.x)*(h.y-c.y)}F.isLeft=f;function u(c,h,_){return f(c,h,_)>0}function i(c,h,_){return f(c,h,_)<0}function t(c){var h=c.slice(0).sort(function(B,X){return B.x!==X.x?X.x-B.x:X.y-B.y}),_=c.length,m,L=0,A=h[0].x;for(m=1;m<_&&h[m].x===A;++m);var P=m-1,N=[];if(N.push(h[L]),P===_-1)h[P].y!==h[L].y&&N.push(h[P]);else{var R,Y=_-1,z=h[_-1].x;for(m=_-2;m>=0&&h[m].x===z;m--);for(R=m+1,m=P;++m<=R;)if(!(f(h[L],h[R],h[m])>=0&&m<R)){for(;N.length>1&&!(f(N[N.length-2],N[N.length-1],h[m])>0);)N.length-=1;m!=L&&N.push(h[m])}Y!=R&&N.push(h[Y]);var q=N.length;for(m=R;--m>=P;)if(!(f(h[Y],h[P],h[m])>=0&&m>P)){for(;N.length>q&&!(f(N[N.length-2],N[N.length-1],h[m])>0);)N.length-=1;m!=L&&N.push(h[m])}}return N}F.ConvexHull=t;function e(c,h,_){h.slice(0).sort(function(m,L){return Math.atan2(m.y-c.y,m.x-c.x)-Math.atan2(L.y-c.y,L.x-c.x)}).forEach(_)}F.clockwiseRadialSweep=e;function o(c,h){var _=h.slice(0);return _.push(h[0]),{rtan:n(c,_),ltan:r(c,_)}}function n(c,h){var _=h.length-1,m,L,A,P,N;if(i(c,h[1],h[0])&&!u(c,h[_-1],h[0]))return 0;for(m=0,L=_;;){if(L-m===1)return u(c,h[m],h[L])?m:L;if(A=Math.floor((m+L)/2),N=i(c,h[A+1],h[A]),N&&!u(c,h[A-1],h[A]))return A;P=u(c,h[m+1],h[m]),P?N||u(c,h[m],h[A])?L=A:m=A:N&&i(c,h[m],h[A])?L=A:m=A}}function r(c,h){var _=h.length-1,m,L,A,P,N;if(u(c,h[_-1],h[0])&&!i(c,h[1],h[0]))return 0;for(m=0,L=_;;){if(L-m===1)return i(c,h[m],h[L])?m:L;if(A=Math.floor((m+L)/2),N=i(c,h[A+1],h[A]),u(c,h[A-1],h[A])&&!N)return A;P=i(c,h[m+1],h[m]),P?N?i(c,h[m],h[A])?L=A:m=A:L=A:N?m=A:u(c,h[m],h[A])?L=A:m=A}}function s(c,h,_,m,L,A){var P,N;P=_(h[0],c),N=m(c[P],h);for(var R=!1;!R;){for(R=!0;P===c.length-1&&(P=0),!L(h[N],c[P],c[P+1]);)++P;for(;N===0&&(N=h.length-1),!A(c[P],h[N],h[N-1]);)--N,R=!1}return{t1:P,t2:N}}F.tangent_PolyPolyC=s;function a(c,h){var _=l(h,c);return{t1:_.t2,t2:_.t1}}F.LRtangent_PolyPolyC=a;function l(c,h){return s(c,h,n,r,u,i)}F.RLtangent_PolyPolyC=l;function x(c,h){return s(c,h,r,r,i,i)}F.LLtangent_PolyPolyC=x;function E(c,h){return s(c,h,n,n,u,u)}F.RRtangent_PolyPolyC=E;var w=function(){function c(h,_){this.t1=h,this.t2=_}return c}();F.BiTangent=w;var S=function(){function c(){}return c}();F.BiTangents=S;var I=function(c){C(h,c);function h(){return c!==null&&c.apply(this,arguments)||this}return h}(D);F.TVGPoint=I;var G=function(){function c(h,_,m,L){this.id=h,this.polyid=_,this.polyvertid=m,this.p=L,L.vv=this}return c}();F.VisibilityVertex=G;var O=function(){function c(h,_){this.source=h,this.target=_}return c.prototype.length=function(){var h=this.source.p.x-this.target.p.x,_=this.source.p.y-this.target.p.y;return Math.sqrt(h*h+_*_)},c}();F.VisibilityEdge=O;var T=function(){function c(h,_){if(this.P=h,this.V=[],this.E=[],_)this.V=_.V.slice(0),this.E=_.E.slice(0);else{for(var m=h.length,L=0;L<m;L++){for(var A=h[L],P=0;P<A.length;++P){var N=A[P],R=new G(this.V.length,L,P,N);this.V.push(R),P>0&&this.E.push(new O(A[P-1].vv,R))}A.length>1&&this.E.push(new O(A[0].vv,A[A.length-1].vv))}for(var L=0;L<m-1;L++)for(var Y=h[L],P=L+1;P<m;P++){var z=h[P],q=p(Y,z);for(var B in q){var X=q[B],H=Y[X.t1],Q=z[X.t2];this.addEdgeIfVisible(H,Q,L,P)}}}}return c.prototype.addEdgeIfVisible=function(h,_,m,L){this.intersectsPolys(new b(h.x,h.y,_.x,_.y),m,L)||this.E.push(new O(h.vv,_.vv))},c.prototype.addPoint=function(h,_){var m=this.P.length;this.V.push(new G(this.V.length,m,0,h));for(var L=0;L<m;++L)if(L!==_){var A=this.P[L],P=o(h,A);this.addEdgeIfVisible(h,A[P.ltan],_,L),this.addEdgeIfVisible(h,A[P.rtan],_,L)}return h.vv},c.prototype.intersectsPolys=function(h,_,m){for(var L=0,A=this.P.length;L<A;++L)if(L!=_&&L!=m&&d(h,this.P[L]).length>0)return!0;return!1},c}();F.TangentVisibilityGraph=T;function d(c,h){for(var _=[],m=1,L=h.length;m<L;++m){var A=M.Rectangle.lineIntersection(c.x1,c.y1,c.x2,c.y2,h[m-1].x,h[m-1].y,h[m].x,h[m].y);A&&_.push(A)}return _}function p(c,h){for(var _=c.length-1,m=h.length-1,L=new S,A=0;A<_;++A)for(var P=0;P<m;++P){var N=c[A==0?_-1:A-1],R=c[A],Y=c[A+1],z=h[P==0?m-1:P-1],q=h[P],B=h[P+1],X=f(N,R,q),H=f(R,z,q),Q=f(R,q,B),V=f(z,q,R),U=f(q,N,R),J=f(q,R,Y);X>=0&&H>=0&&Q<0&&V>=0&&U>=0&&J<0?L.ll=new w(A,P):X<=0&&H<=0&&Q>0&&V<=0&&U<=0&&J>0?L.rr=new w(A,P):X<=0&&H>0&&Q<=0&&V>=0&&U<0&&J>=0?L.rl=new w(A,P):X>=0&&H<0&&Q>=0&&V<=0&&U>0&&J<=0&&(L.lr=new w(A,P))}return L}F.tangents=p;function k(c,h){for(var _=1,m=h.length;_<m;++_)if(i(h[_-1],h[_],c))return!1;return!0}function y(c,h){return!c.every(function(_){return!k(_,h)})}function g(c,h){if(y(c,h)||y(h,c))return!0;for(var _=1,m=c.length;_<m;++_){var L=c[_],A=c[_-1];if(d(new b(A.x,A.y,L.x,L.y),h).length>0)return!0}return!1}return F.polysOverlap=g,F}var st={},Mt;function Yt(){if(Mt)return st;Mt=1,Object.defineProperty(st,"__esModule",{value:!0});var C={PADDING:10,GOLDEN_SECTION:(1+Math.sqrt(5))/2,FLOAT_EPSILON:1e-4,MAX_INERATIONS:100};function M(b,v,f,a,s,t){s===void 0&&(s=1),t===void 0&&(t=!0);var e=0,o=0,n=v,r=f,s=typeof s<"u"?s:1,a=typeof a<"u"?a:0,l=0,x=0,E=0,w=0,S=[];if(b.length==0)return;I(b),O(b),t&&G(b);function I(y){y.forEach(function(c){g(c)});function g(c){var h=Number.MAX_VALUE,_=Number.MAX_VALUE,m=0,L=0;c.array.forEach(function(A){var P=typeof A.width<"u"?A.width:a,N=typeof A.height<"u"?A.height:a;P/=2,N/=2,m=Math.max(A.x+P,m),h=Math.min(A.x-P,h),L=Math.max(A.y+N,L),_=Math.min(A.y-N,_)}),c.width=m-h,c.height=L-_}}function G(y){y.forEach(function(g){var c={x:0,y:0};g.array.forEach(function(m){c.x+=m.x,c.y+=m.y}),c.x/=g.array.length,c.y/=g.array.length;var h={x:c.x-g.width/2,y:c.y-g.height/2},_={x:g.x-h.x+n/2-l/2,y:g.y-h.y+r/2-x/2};g.array.forEach(function(m){m.x+=_.x,m.y+=_.y})})}function O(y,g){var c=Number.POSITIVE_INFINITY,h=0;y.sort(function(B,X){return X.height-B.height}),E=y.reduce(function(B,X){return B.width<X.width?B.width:X.width});for(var _=z=E,m=q=p(y),L=0,A=Number.MAX_VALUE,P=Number.MAX_VALUE,N=-1,R=Number.MAX_VALUE,Y=Number.MAX_VALUE;R>E||Y>C.FLOAT_EPSILON;){if(N!=1)var z=m-(m-_)/C.GOLDEN_SECTION,A=T(y,z);if(N!=0)var q=_+(m-_)/C.GOLDEN_SECTION,P=T(y,q);if(R=Math.abs(z-q),Y=Math.abs(A-P),A<c&&(c=A,h=z),P<c&&(c=P,h=q),A>P?(_=z,z=q,A=P,N=1):(m=q,q=z,P=A,N=0),L++>100)break}T(y,h)}function T(y,g){S=[],l=0,x=0,w=o;for(var c=0;c<y.length;c++){var h=y[c];d(h,g)}return Math.abs(k()-s)}function d(y,g){for(var c=void 0,h=0;h<S.length;h++)if(S[h].space_left>=y.height&&S[h].x+S[h].width+y.width+C.PADDING-g<=C.FLOAT_EPSILON){c=S[h];break}S.push(y),c!==void 0?(y.x=c.x+c.width+C.PADDING,y.y=c.bottom,y.space_left=y.height,y.bottom=y.y,c.space_left-=y.height+C.PADDING,c.bottom+=y.height+C.PADDING):(y.y=w,w+=y.height+C.PADDING,y.x=e,y.bottom=y.y,y.space_left=y.height),y.y+y.height-x>-C.FLOAT_EPSILON&&(x=y.y+y.height-o),y.x+y.width-l>-C.FLOAT_EPSILON&&(l=y.x+y.width-e)}function p(y){var g=0;return y.forEach(function(c){return g+=c.width+C.PADDING}),g}function k(){return l/x}}st.applyPacking=M;function D(b,v){for(var f={},u={},i=[],t=0,e=0;e<v.length;e++){var o=v[e],n=o.source,r=o.target;u[n.index]?u[n.index].push(r):u[n.index]=[r],u[r.index]?u[r.index].push(n):u[r.index]=[n]}for(var e=0;e<b.length;e++){var s=b[e];f[s.index]||a(s,!0)}function a(l,x){if(f[l.index]===void 0){x&&(t++,i.push({array:[]})),f[l.index]=t,i[t-1].array.push(l);var E=u[l.index];if(E)for(var w=0;w<E.length;w++)a(E[w],!1)}}return i}return st.separateGraphs=D,st}var Ot;function ft(){return Ot||(Ot=1,function(C){Object.defineProperty(C,"__esModule",{value:!0});var M=Bt(),D=yt(),b=_t(),v=ht(),f=dt(),u=zt(),i=Yt(),t;(function(n){n[n.start=0]="start",n[n.tick=1]="tick",n[n.end=2]="end"})(t=C.EventType||(C.EventType={}));function e(n){return typeof n.leaves<"u"||typeof n.groups<"u"}var o=function(){function n(){var r=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:n.getSourceIndex,getTargetIndex:n.getTargetIndex,setLength:n.setLinkLength,getType:function(s){return typeof r._linkType=="function"?r._linkType(s):0}}}return n.prototype.on=function(r,s){return this.event||(this.event={}),typeof r=="string"?this.event[t[r]]=s:this.event[r]=s,this},n.prototype.trigger=function(r){this.event&&typeof this.event[r.type]<"u"&&this.event[r.type](r)},n.prototype.kick=function(){for(;!this.tick(););},n.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:t.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var r=this._nodes.length;this._links.length;var s,a;for(this._descent.locks.clear(),a=0;a<r;++a)if(s=this._nodes[a],s.fixed){(typeof s.px>"u"||typeof s.py>"u")&&(s.px=s.x,s.py=s.y);var l=[s.px,s.py];this._descent.locks.add(a,l)}var x=this._descent.rungeKutta();return x===0?this._alpha=0:typeof this._lastStress<"u"&&(this._alpha=x),this._lastStress=x,this.updateNodePositions(),this.trigger({type:t.tick,alpha:this._alpha,stress:this._lastStress}),!1},n.prototype.updateNodePositions=function(){for(var r=this._descent.x[0],s=this._descent.x[1],a,l=this._nodes.length;l--;)a=this._nodes[l],a.x=r[l],a.y=s[l]},n.prototype.nodes=function(r){if(!r){if(this._nodes.length===0&&this._links.length>0){var s=0;this._links.forEach(function(l){s=Math.max(s,l.source,l.target)}),this._nodes=new Array(++s);for(var a=0;a<s;++a)this._nodes[a]={}}return this._nodes}return this._nodes=r,this},n.prototype.groups=function(r){var s=this;return r?(this._groups=r,this._rootGroup={},this._groups.forEach(function(a){typeof a.padding>"u"&&(a.padding=1),typeof a.leaves<"u"&&a.leaves.forEach(function(l,x){typeof l=="number"&&((a.leaves[x]=s._nodes[l]).parent=a)}),typeof a.groups<"u"&&a.groups.forEach(function(l,x){typeof l=="number"&&((a.groups[x]=s._groups[l]).parent=a)})}),this._rootGroup.leaves=this._nodes.filter(function(a){return typeof a.parent>"u"}),this._rootGroup.groups=this._groups.filter(function(a){return typeof a.parent>"u"}),this):this._groups},n.prototype.powerGraphGroups=function(r){var s=M.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(s.groups),r(s),this},n.prototype.avoidOverlaps=function(r){return arguments.length?(this._avoidOverlaps=r,this):this._avoidOverlaps},n.prototype.handleDisconnected=function(r){return arguments.length?(this._handleDisconnected=r,this):this._handleDisconnected},n.prototype.flowLayout=function(r,s){return arguments.length||(r="y"),this._directedLinkConstraints={axis:r,getMinSeparation:typeof s=="number"?function(){return s}:s},this},n.prototype.links=function(r){return arguments.length?(this._links=r,this):this._links},n.prototype.constraints=function(r){return arguments.length?(this._constraints=r,this):this._constraints},n.prototype.distanceMatrix=function(r){return arguments.length?(this._distanceMatrix=r,this):this._distanceMatrix},n.prototype.size=function(r){return r?(this._canvasSize=r,this):this._canvasSize},n.prototype.defaultNodeSize=function(r){return r?(this._defaultNodeSize=r,this):this._defaultNodeSize},n.prototype.groupCompactness=function(r){return r?(this._groupCompactness=r,this):this._groupCompactness},n.prototype.linkDistance=function(r){return r?(this._linkDistance=typeof r=="function"?r:+r,this._linkLengthCalculator=null,this):this._linkDistance},n.prototype.linkType=function(r){return this._linkType=r,this},n.prototype.convergenceThreshold=function(r){return r?(this._threshold=typeof r=="function"?r:+r,this):this._threshold},n.prototype.alpha=function(r){return arguments.length?(r=+r,this._alpha?r>0?this._alpha=r:this._alpha=0:r>0&&(this._running||(this._running=!0,this.trigger({type:t.start,alpha:this._alpha=r}),this.kick())),this):this._alpha},n.prototype.getLinkLength=function(r){return typeof this._linkDistance=="function"?+this._linkDistance(r):this._linkDistance},n.setLinkLength=function(r,s){r.length=s},n.prototype.getLinkType=function(r){return typeof this._linkType=="function"?this._linkType(r):0},n.prototype.symmetricDiffLinkLengths=function(r,s){var a=this;return s===void 0&&(s=1),this.linkDistance(function(l){return r*l.length}),this._linkLengthCalculator=function(){return D.symmetricDiffLinkLengths(a._links,a.linkAccessor,s)},this},n.prototype.jaccardLinkLengths=function(r,s){var a=this;return s===void 0&&(s=1),this.linkDistance(function(l){return r*l.length}),this._linkLengthCalculator=function(){return D.jaccardLinkLengths(a._links,a.linkAccessor,s)},this},n.prototype.start=function(r,s,a,l,x,E){var w=this;r===void 0&&(r=0),s===void 0&&(s=0),a===void 0&&(a=0),l===void 0&&(l=0),x===void 0&&(x=!0),E===void 0&&(E=!0);var S,I=this.nodes().length,G=I+2*this._groups.length;this._links.length;var O=this._canvasSize[0],T=this._canvasSize[1],d=new Array(G),p=new Array(G),k=null,y=this._avoidOverlaps;this._nodes.forEach(function(P,N){P.index=N,typeof P.x>"u"&&(P.x=O/2,P.y=T/2),d[N]=P.x,p[N]=P.y}),this._linkLengthCalculator&&this._linkLengthCalculator();var g;this._distanceMatrix?g=this._distanceMatrix:(g=new f.Calculator(G,this._links,n.getSourceIndex,n.getTargetIndex,function(P){return w.getLinkLength(P)}).DistanceMatrix(),k=b.Descent.createSquareMatrix(G,function(){return 2}),this._links.forEach(function(P){typeof P.source=="number"&&(P.source=w._nodes[P.source]),typeof P.target=="number"&&(P.target=w._nodes[P.target])}),this._links.forEach(function(P){var N=n.getSourceIndex(P),R=n.getTargetIndex(P);k[N][R]=k[R][N]=P.weight||1}));var c=b.Descent.createSquareMatrix(G,function(P,N){return g[P][N]});if(this._rootGroup&&typeof this._rootGroup.groups<"u"){var S=I,h=function(N,R,Y,z){k[N][R]=k[R][N]=Y,c[N][R]=c[R][N]=z};this._groups.forEach(function(N){h(S,S+1,w._groupCompactness,.1),d[S]=0,p[S++]=0,d[S]=0,p[S++]=0})}else this._rootGroup={leaves:this._nodes,groups:[]};var _=this._constraints||[];this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,_=_.concat(D.generateDirectedEdgeConstraints(I,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new b.Descent([d,p],c),this._descent.locks.clear();for(var S=0;S<I;++S){var m=this._nodes[S];if(m.fixed){m.px=m.x,m.py=m.y;var L=[m.x,m.y];this._descent.locks.add(S,L)}}if(this._descent.threshold=this._threshold,this.initialLayout(r,d,p),_.length>0&&(this._descent.project=new v.Projection(this._nodes,this._groups,this._rootGroup,_).projectFunctions()),this._descent.run(s),this.separateOverlappingComponents(O,T,E),this.avoidOverlaps(y),y&&(this._nodes.forEach(function(P,N){P.x=d[N],P.y=p[N]}),this._descent.project=new v.Projection(this._nodes,this._groups,this._rootGroup,_,!0).projectFunctions(),this._nodes.forEach(function(P,N){d[N]=P.x,p[N]=P.y})),this._descent.G=k,this._descent.run(a),l){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=I,this._descent.scaleSnapByMaxH=I!=G;var A=b.Descent.createSquareMatrix(G,function(P,N){return P>=I||N>=I?k[P][N]:0});this._descent.G=A,this._descent.run(l)}return this.updateNodePositions(),this.separateOverlappingComponents(O,T,E),x?this.resume():this},n.prototype.initialLayout=function(r,s,a){if(this._groups.length>0&&r>0){var l=this._nodes.length,x=this._links.map(function(w){return{source:w.source.index,target:w.target.index}}),E=this._nodes.map(function(w){return{index:w.index}});this._groups.forEach(function(w,S){E.push({index:w.index=l+S})}),this._groups.forEach(function(w,S){typeof w.leaves<"u"&&w.leaves.forEach(function(I){return x.push({source:w.index,target:I.index})}),typeof w.groups<"u"&&w.groups.forEach(function(I){return x.push({source:w.index,target:I.index})})}),new n().size(this.size()).nodes(E).links(x).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(r,0,0,0,!1),this._nodes.forEach(function(w){s[w.index]=E[w.index].x,a[w.index]=E[w.index].y})}else this._descent.run(r)},n.prototype.separateOverlappingComponents=function(r,s,a){var l=this;if(a===void 0&&(a=!0),!this._distanceMatrix&&this._handleDisconnected){var x=this._descent.x[0],E=this._descent.x[1];this._nodes.forEach(function(S,I){S.x=x[I],S.y=E[I]});var w=i.separateGraphs(this._nodes,this._links);i.applyPacking(w,r,s,this._defaultNodeSize,1,a),this._nodes.forEach(function(S,I){l._descent.x[0][I]=S.x,l._descent.x[1][I]=S.y,S.bounds&&(S.bounds.setXCentre(S.x),S.bounds.setYCentre(S.y))})}},n.prototype.resume=function(){return this.alpha(.1)},n.prototype.stop=function(){return this.alpha(0)},n.prototype.prepareEdgeRouting=function(r){r===void 0&&(r=0),this._visibilityGraph=new u.TangentVisibilityGraph(this._nodes.map(function(s){return s.bounds.inflate(-r).vertices()}))},n.prototype.routeEdge=function(r,s,a){s===void 0&&(s=5);var l=[],x=new u.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),E={x:r.source.x,y:r.source.y},w={x:r.target.x,y:r.target.y},S=x.addPoint(E,r.source.index),I=x.addPoint(w,r.target.index);x.addEdgeIfVisible(E,w,r.source.index,r.target.index),typeof a<"u"&&a(x);var G=function(_){return _.source.id},O=function(_){return _.target.id},T=function(_){return _.length()},d=new f.Calculator(x.V.length,x.E,G,O,T),p=d.PathFromNodeToNode(S.id,I.id);if(p.length===1||p.length===x.V.length){var k=v.makeEdgeBetween(r.source.innerBounds,r.target.innerBounds,s);l=[k.sourceIntersection,k.arrowStart]}else{for(var y=p.length-2,g=x.V[p[y]].p,c=x.V[p[0]].p,l=[r.source.innerBounds.rayIntersection(g.x,g.y)],h=y;h>=0;--h)l.push(x.V[p[h]].p);l.push(v.makeEdgeTo(c,r.target.innerBounds,s))}return l},n.getSourceIndex=function(r){return typeof r.source=="number"?r.source:r.source.index},n.getTargetIndex=function(r){return typeof r.target=="number"?r.target:r.target.index},n.linkId=function(r){return n.getSourceIndex(r)+"-"+n.getTargetIndex(r)},n.dragStart=function(r){e(r)?n.storeOffset(r,n.dragOrigin(r)):(n.stopNode(r),r.fixed|=2)},n.stopNode=function(r){r.px=r.x,r.py=r.y},n.storeOffset=function(r,s){typeof r.leaves<"u"&&r.leaves.forEach(function(a){a.fixed|=2,n.stopNode(a),a._dragGroupOffsetX=a.x-s.x,a._dragGroupOffsetY=a.y-s.y}),typeof r.groups<"u"&&r.groups.forEach(function(a){return n.storeOffset(a,s)})},n.dragOrigin=function(r){return e(r)?{x:r.bounds.cx(),y:r.bounds.cy()}:r},n.drag=function(r,s){e(r)?(typeof r.leaves<"u"&&r.leaves.forEach(function(a){r.bounds.setXCentre(s.x),r.bounds.setYCentre(s.y),a.px=a._dragGroupOffsetX+s.x,a.py=a._dragGroupOffsetY+s.y}),typeof r.groups<"u"&&r.groups.forEach(function(a){return n.drag(a,s)})):(r.px=s.x,r.py=s.y)},n.dragEnd=function(r){e(r)?(typeof r.leaves<"u"&&r.leaves.forEach(function(s){n.dragEnd(s),delete s._dragGroupOffsetX,delete s._dragGroupOffsetY}),typeof r.groups<"u"&&r.groups.forEach(n.dragEnd)):r.fixed&=-7},n.mouseOver=function(r){r.fixed|=4,r.px=r.x,r.py=r.y},n.mouseOut=function(r){r.fixed&=-5},n}();C.Layout=o}(gt)),gt}var Nt;function Ht(){if(Nt)return it;Nt=1;var C=K&&K.__extends||function(){var v=function(f,u){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,t){i.__proto__=t}||function(i,t){for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e])},v(f,u)};return function(f,u){v(f,u);function i(){this.constructor=f}f.prototype=u===null?Object.create(u):(i.prototype=u.prototype,new i)}}();Object.defineProperty(it,"__esModule",{value:!0});var M=ft(),D=function(v){C(f,v);function f(u){var i=v.call(this)||this,t=u;return t.trigger&&(i.trigger=t.trigger),t.kick&&(i.kick=t.kick),t.drag&&(i.drag=t.drag),t.on&&(i.on=t.on),i.dragstart=i.dragStart=M.Layout.dragStart,i.dragend=i.dragEnd=M.Layout.dragEnd,i}return f.prototype.trigger=function(u){},f.prototype.kick=function(){},f.prototype.drag=function(){},f.prototype.on=function(u,i){return this},f}(M.Layout);it.LayoutAdaptor=D;function b(v){return new D(v)}return it.adaptor=b,it}var lt={},at={},Dt;function Ut(){if(Dt)return at;Dt=1;var C=K&&K.__extends||function(){var v=function(f,u){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,t){i.__proto__=t}||function(i,t){for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e])},v(f,u)};return function(f,u){v(f,u);function i(){this.constructor=f}f.prototype=u===null?Object.create(u):(i.prototype=u.prototype,new i)}}();Object.defineProperty(at,"__esModule",{value:!0});var M=ft(),D=function(v){C(f,v);function f(){var u=v.call(this)||this;u.event=d3.dispatch(M.EventType[M.EventType.start],M.EventType[M.EventType.tick],M.EventType[M.EventType.end]);var i=u;return u.drag=function(){if(!t)var t=d3.behavior.drag().origin(M.Layout.dragOrigin).on("dragstart.d3adaptor",M.Layout.dragStart).on("drag.d3adaptor",function(e){M.Layout.drag(e,d3.event),i.resume()}).on("dragend.d3adaptor",M.Layout.dragEnd);if(!arguments.length)return t;this.call(t)},u}return f.prototype.trigger=function(u){var i={type:M.EventType[u.type],alpha:u.alpha,stress:u.stress};this.event[i.type](i)},f.prototype.kick=function(){var u=this;d3.timer(function(){return v.prototype.tick.call(u)})},f.prototype.on=function(u,i){return typeof u=="string"?this.event.on(u,i):this.event.on(M.EventType[u],i),this},f}(M.Layout);at.D3StyleLayoutAdaptor=D;function b(){return new D}return at.d3adaptor=b,at}var pt={},It;function jt(){if(It)return pt;It=1;var C=K&&K.__extends||function(){var b=function(v,f){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,i){u.__proto__=i}||function(u,i){for(var t in i)i.hasOwnProperty(t)&&(u[t]=i[t])},b(v,f)};return function(v,f){b(v,f);function u(){this.constructor=v}v.prototype=f===null?Object.create(f):(u.prototype=f.prototype,new u)}}();Object.defineProperty(pt,"__esModule",{value:!0});var M=ft(),D=function(b){C(v,b);function v(f){var u=b.call(this)||this;u.d3Context=f,u.event=f.dispatch(M.EventType[M.EventType.start],M.EventType[M.EventType.tick],M.EventType[M.EventType.end]);var i=u;return u.drag=function(){if(!t)var t=f.drag().subject(M.Layout.dragOrigin).on("start.d3adaptor",M.Layout.dragStart).on("drag.d3adaptor",function(e){M.Layout.drag(e,f.event),i.resume()}).on("end.d3adaptor",M.Layout.dragEnd);if(!arguments.length)return t;arguments[0].call(t)},u}return v.prototype.trigger=function(f){var u={type:M.EventType[f.type],alpha:f.alpha,stress:f.stress};this.event.call(u.type,u)},v.prototype.kick=function(){var f=this,u=this.d3Context.timer(function(){return b.prototype.tick.call(f)&&u.stop()})},v.prototype.on=function(f,u){return typeof f=="string"?this.event.on(f,u):this.event.on(M.EventType[f],u),this},v}(M.Layout);return pt.D3StyleLayoutAdaptor=D,pt}var Ct;function Kt(){if(Ct)return lt;Ct=1,Object.defineProperty(lt,"__esModule",{value:!0});var C=Ut(),M=jt();function D(v){return!v||b(v)?new C.D3StyleLayoutAdaptor:new M.D3StyleLayoutAdaptor(v)}lt.d3adaptor=D;function b(v){var f=/^3\./;return v.version&&v.version.match(f)!==null}return lt}var tt={},Gt;function Ft(){if(Gt)return tt;Gt=1,Object.defineProperty(tt,"__esModule",{value:!0});var C=ht(),M=mt(),D=dt(),b=function(){function i(t,e,o){this.id=t,this.rect=e,this.children=o,this.leaf=typeof o>"u"||o.length===0}return i}();tt.NodeWrapper=b;var v=function(){function i(t,e,o,n,r){n===void 0&&(n=null),r===void 0&&(r=null),this.id=t,this.x=e,this.y=o,this.node=n,this.line=r}return i}();tt.Vert=v;var f=function(){function i(t,e){this.s=t,this.t=e;var o=i.findMatch(t,e),n=e.slice(0).reverse(),r=i.findMatch(t,n);o.length>=r.length?(this.length=o.length,this.si=o.si,this.ti=o.ti,this.reversed=!1):(this.length=r.length,this.si=r.si,this.ti=e.length-r.ti-r.length,this.reversed=!0)}return i.findMatch=function(t,e){for(var o=t.length,n=e.length,r={length:0,si:-1,ti:-1},s=new Array(o),a=0;a<o;a++){s[a]=new Array(n);for(var l=0;l<n;l++)if(t[a]===e[l]){var x=s[a][l]=a===0||l===0?1:s[a-1][l-1]+1;x>r.length&&(r.length=x,r.si=a-x+1,r.ti=l-x+1)}else s[a][l]=0}return r},i.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},i}();tt.LongestCommonSubsequence=f;var u=function(){function i(t,e,o){var n=this;o===void 0&&(o=12),this.originalnodes=t,this.groupPadding=o,this.leaves=null,this.nodes=t.map(function(O,T){return new b(T,e.getBounds(O),e.getChildren(O))}),this.leaves=this.nodes.filter(function(O){return O.leaf}),this.groups=this.nodes.filter(function(O){return!O.leaf}),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach(function(O){return O.children.forEach(function(T){return n.nodes[T].parent=O})}),this.root={children:[]},this.nodes.forEach(function(O){typeof O.parent>"u"&&(O.parent=n.root,n.root.children.push(O.id)),O.ports=[]}),this.backToFront=this.nodes.slice(0),this.backToFront.sort(function(O,T){return n.getDepth(O)-n.getDepth(T)});var r=this.backToFront.slice(0).reverse().filter(function(O){return!O.leaf});r.forEach(function(O){var T=C.Rectangle.empty();O.children.forEach(function(d){return T=T.union(n.nodes[d].rect)}),O.rect=T.inflate(n.groupPadding)});var s=this.midPoints(this.cols.map(function(O){return O.pos})),a=this.midPoints(this.rows.map(function(O){return O.pos})),l=s[0],x=s[s.length-1],E=a[0],w=a[a.length-1],S=this.rows.map(function(O){return{x1:l,x2:x,y1:O.pos,y2:O.pos}}).concat(a.map(function(O){return{x1:l,x2:x,y1:O,y2:O}})),I=this.cols.map(function(O){return{x1:O.pos,x2:O.pos,y1:E,y2:w}}).concat(s.map(function(O){return{x1:O,x2:O,y1:E,y2:w}})),G=S.concat(I);G.forEach(function(O){return O.verts=[]}),this.verts=[],this.edges=[],S.forEach(function(O){return I.forEach(function(T){var d=new v(n.verts.length,T.x1,O.y1);O.verts.push(d),T.verts.push(d),n.verts.push(d);for(var p=n.backToFront.length;p-- >0;){var k=n.backToFront[p],y=k.rect,g=Math.abs(d.x-y.cx()),c=Math.abs(d.y-y.cy());if(g<y.width()/2&&c<y.height()/2){d.node=k;break}}})}),G.forEach(function(O,T){n.nodes.forEach(function(c,h){c.rect.lineIntersections(O.x1,O.y1,O.x2,O.y2).forEach(function(_,m){var L=new v(n.verts.length,_.x,_.y,c,O);n.verts.push(L),O.verts.push(L),c.ports.push(L)})});var d=Math.abs(O.y1-O.y2)<.1,p=function(c,h){return d?h.x-c.x:h.y-c.y};O.verts.sort(p);for(var k=1;k<O.verts.length;k++){var y=O.verts[k-1],g=O.verts[k];y.node&&y.node===g.node&&y.node.leaf||n.edges.push({source:y.id,target:g.id,length:Math.abs(p(y,g))})}})}return i.prototype.avg=function(t){return t.reduce(function(e,o){return e+o})/t.length},i.prototype.getGridLines=function(t){for(var e=[],o=this.leaves.slice(0,this.leaves.length);o.length>0;){var n=o.filter(function(s){return s.rect["overlap"+t.toUpperCase()](o[0].rect)}),r={nodes:n,pos:this.avg(n.map(function(s){return s.rect["c"+t]()}))};e.push(r),r.nodes.forEach(function(s){return o.splice(o.indexOf(s),1)})}return e.sort(function(s,a){return s.pos-a.pos}),e},i.prototype.getDepth=function(t){for(var e=0;t.parent!==this.root;)e++,t=t.parent;return e},i.prototype.midPoints=function(t){for(var e=t[1]-t[0],o=[t[0]-e/2],n=1;n<t.length;n++)o.push((t[n]+t[n-1])/2);return o.push(t[t.length-1]+e/2),o},i.prototype.findLineage=function(t){var e=[t];do t=t.parent,e.push(t);while(t!==this.root);return e.reverse()},i.prototype.findAncestorPathBetween=function(t,e){for(var o=this.findLineage(t),n=this.findLineage(e),r=0;o[r]===n[r];)r++;return{commonAncestor:o[r-1],lineages:o.slice(r).concat(n.slice(r))}},i.prototype.siblingObstacles=function(t,e){var o=this,n=this.findAncestorPathBetween(t,e),r={};n.lineages.forEach(function(a){return r[a.id]={}});var s=n.commonAncestor.children.filter(function(a){return!(a in r)});return n.lineages.filter(function(a){return a.parent!==n.commonAncestor}).forEach(function(a){return s=s.concat(a.parent.children.filter(function(l){return l!==a.id}))}),s.map(function(a){return o.nodes[a]})},i.getSegmentSets=function(t,e,o){for(var n=[],r=0;r<t.length;r++)for(var s=t[r],a=0;a<s.length;a++){var l=s[a];l.edgeid=r,l.i=a;var x=l[1][e]-l[0][e];Math.abs(x)<.1&&n.push(l)}n.sort(function(I,G){return I[0][e]-G[0][e]});for(var E=[],w=null,S=0;S<n.length;S++){var l=n[S];(!w||Math.abs(l[0][e]-w.pos)>.1)&&(w={pos:l[0][e],segments:[]},E.push(w)),w.segments.push(l)}return E},i.nudgeSegs=function(t,e,o,n,r,s){var a=n.length;if(!(a<=1)){for(var l=n.map(function(k){return new M.Variable(k[0][t])}),x=[],E=0;E<a;E++)for(var w=0;w<a;w++)if(E!==w){var S=n[E],I=n[w],G=S.edgeid,O=I.edgeid,T=-1,d=-1;t=="x"?r(G,O)&&(S[0][e]<S[1][e]?(T=w,d=E):(T=E,d=w)):r(G,O)&&(S[0][e]<S[1][e]?(T=E,d=w):(T=w,d=E)),T>=0&&x.push(new M.Constraint(l[T],l[d],s))}var p=new M.Solver(l,x);p.solve(),l.forEach(function(k,y){var g=n[y],c=k.position();g[0][t]=g[1][t]=c;var h=o[g.edgeid];g.i>0&&(h[g.i-1][1][t]=c),g.i<h.length-1&&(h[g.i+1][0][t]=c)})}},i.nudgeSegments=function(t,e,o,n,r){for(var s=i.getSegmentSets(t,e,o),a=0;a<s.length;a++){for(var l=s[a],x=[],E=0;E<l.segments.length;E++){var w=l.segments[E];x.push({type:0,s:w,pos:Math.min(w[0][o],w[1][o])}),x.push({type:1,s:w,pos:Math.max(w[0][o],w[1][o])})}x.sort(function(G,O){return G.pos-O.pos+G.type-O.type});var S=[],I=0;x.forEach(function(G){G.type===0?(S.push(G.s),I++):I--,I==0&&(i.nudgeSegs(e,o,t,S,n,r),S=[])})}},i.prototype.routeEdges=function(t,e,o,n){var r=this,s=t.map(function(x){return r.route(o(x),n(x))}),a=i.orderEdges(s),l=s.map(function(x){return i.makeSegments(x)});return i.nudgeSegments(l,"x","y",a,e),i.nudgeSegments(l,"y","x",a,e),i.unreverseEdges(l,s),l},i.unreverseEdges=function(t,e){t.forEach(function(o,n){var r=e[n];r.reversed&&(o.reverse(),o.forEach(function(s){s.reverse()}))})},i.angleBetween2Lines=function(t,e){var o=Math.atan2(t[0].y-t[1].y,t[0].x-t[1].x),n=Math.atan2(e[0].y-e[1].y,e[0].x-e[1].x),r=o-n;return(r>Math.PI||r<-Math.PI)&&(r=n-o),r},i.isLeft=function(t,e,o){return(e.x-t.x)*(o.y-t.y)-(e.y-t.y)*(o.x-t.x)<=0},i.getOrder=function(t){for(var e={},o=0;o<t.length;o++){var n=t[o];typeof e[n.l]>"u"&&(e[n.l]={}),e[n.l][n.r]=!0}return function(r,s){return typeof e[r]<"u"&&e[r][s]}},i.orderEdges=function(t){for(var e=[],o=0;o<t.length-1;o++)for(var n=o+1;n<t.length;n++){var r=t[o],s=t[n],a=new f(r,s),l,x,E;if(a.length!==0){if(a.reversed&&(s.reverse(),s.reversed=!0,a=new f(r,s)),(a.si<=0||a.ti<=0)&&(a.si+a.length>=r.length||a.ti+a.length>=s.length)){e.push({l:o,r:n});continue}a.si+a.length>=r.length||a.ti+a.length>=s.length?(l=r[a.si+1],E=r[a.si-1],x=s[a.ti-1]):(l=r[a.si+a.length-2],x=r[a.si+a.length],E=s[a.ti+a.length]),i.isLeft(l,x,E)?e.push({l:n,r:o}):e.push({l:o,r:n})}}return i.getOrder(e)},i.makeSegments=function(t){function e(x){return{x:x.x,y:x.y}}for(var o=function(x,E,w){return Math.abs((E.x-x.x)*(w.y-x.y)-(E.y-x.y)*(w.x-x.x))<.001},n=[],r=e(t[0]),s=1;s<t.length;s++){var a=e(t[s]),l=s<t.length-1?t[s+1]:null;(!l||!o(r,a,l))&&(n.push([r,a]),r=a)}return n},i.prototype.route=function(t,e){var o=this,n=this.nodes[t],r=this.nodes[e];this.obstacles=this.siblingObstacles(n,r);var s={};this.obstacles.forEach(function(d){return s[d.id]=d}),this.passableEdges=this.edges.filter(function(d){var p=o.verts[d.source],k=o.verts[d.target];return!(p.node&&p.node.id in s||k.node&&k.node.id in s)});for(var a=1;a<n.ports.length;a++){var l=n.ports[0].id,x=n.ports[a].id;this.passableEdges.push({source:l,target:x,length:0})}for(var a=1;a<r.ports.length;a++){var l=r.ports[0].id,x=r.ports[a].id;this.passableEdges.push({source:l,target:x,length:0})}var E=function(d){return d.source},w=function(d){return d.target},S=function(d){return d.length},I=new D.Calculator(this.verts.length,this.passableEdges,E,w,S),G=function(d,p,k){var y=o.verts[d],g=o.verts[p],c=o.verts[k],h=Math.abs(c.x-y.x),_=Math.abs(c.y-y.y);return y.node===n&&y.node===g.node||g.node===r&&g.node===c.node?0:h>1&&_>1?1e3:0},O=I.PathFromNodeToNodeWithPrevCost(n.ports[0].id,r.ports[0].id,G),T=O.reverse().map(function(d){return o.verts[d]});return T.push(this.nodes[r.id].ports[0]),T.filter(function(d,p){return!(p<T.length-1&&T[p+1].node===n&&d.node===n||p>0&&d.node===r&&T[p-1].node===r)})},i.getRoutePath=function(t,e,o,n){var r={routepath:"M "+t[0][0].x+" "+t[0][0].y+" ",arrowpath:""};if(t.length>1)for(var s=0;s<t.length;s++){var a=t[s],l=a[1].x,x=a[1].y,E=l-a[0].x,w=x-a[0].y;if(s<t.length-1){Math.abs(E)>0?l-=E/Math.abs(E)*e:x-=w/Math.abs(w)*e,r.routepath+="L "+l+" "+x+" ";var S=t[s+1],I=S[0].x,G=S[0].y,O=S[1].x,T=S[1].y;E=O-I,w=T-G;var d=i.angleBetween2Lines(a,S)<0?1:0,p,k;Math.abs(E)>0?(p=I+E/Math.abs(E)*e,k=G):(p=I,k=G+w/Math.abs(w)*e);var y=Math.abs(p-l),g=Math.abs(k-x);r.routepath+="A "+y+" "+g+" 0 0 "+d+" "+p+" "+k+" "}else{var c=[l,x],h,_;Math.abs(E)>0?(l-=E/Math.abs(E)*n,h=[l,x+o],_=[l,x-o]):(x-=w/Math.abs(w)*n,h=[l+o,x],_=[l-o,x]),r.routepath+="L "+l+" "+x+" ",n>0&&(r.arrowpath="M "+c[0]+" "+c[1]+" L "+h[0]+" "+h[1]+" L "+_[0]+" "+_[1])}}else{var a=t[0],l=a[1].x,x=a[1].y,E=l-a[0].x,w=x-a[0].y,c=[l,x],h,_;Math.abs(E)>0?(l-=E/Math.abs(E)*n,h=[l,x+o],_=[l,x-o]):(x-=w/Math.abs(w)*n,h=[l+o,x],_=[l-o,x]),r.routepath+="L "+l+" "+x+" ",n>0&&(r.arrowpath="M "+c[0]+" "+c[1]+" L "+h[0]+" "+h[1]+" L "+_[0]+" "+_[1])}return r},i}();return tt.GridRouter=u,tt}var rt={},Tt;function Qt(){if(Tt)return rt;Tt=1,Object.defineProperty(rt,"__esModule",{value:!0});var C=dt(),M=_t(),D=ht(),b=yt(),v=function(){function t(e,o){this.source=e,this.target=o}return t.prototype.actualLength=function(e){var o=this;return Math.sqrt(e.reduce(function(n,r){var s=r[o.target]-r[o.source];return n+s*s},0))},t}();rt.Link3D=v;var f=function(){function t(e,o,n){e===void 0&&(e=0),o===void 0&&(o=0),n===void 0&&(n=0),this.x=e,this.y=o,this.z=n}return t}();rt.Node3D=f;var u=function(){function t(e,o,n){var r=this;n===void 0&&(n=1),this.nodes=e,this.links=o,this.idealLinkLength=n,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(t.k);for(var s=0;s<t.k;++s)this.result[s]=new Array(e.length);e.forEach(function(a,l){for(var x=0,E=t.dims;x<E.length;x++){var w=E[x];typeof a[w]>"u"&&(a[w]=Math.random())}r.result[0][l]=a.x,r.result[1][l]=a.y,r.result[2][l]=a.z})}return t.prototype.linkLength=function(e){return e.actualLength(this.result)},t.prototype.start=function(e){var o=this;e===void 0&&(e=100);var n=this.nodes.length,r=new i;this.useJaccardLinkLengths&&b.jaccardLinkLengths(this.links,r,1.5),this.links.forEach(function(w){return w.length*=o.idealLinkLength});var s=new C.Calculator(n,this.links,function(w){return w.source},function(w){return w.target},function(w){return w.length}).DistanceMatrix(),a=M.Descent.createSquareMatrix(n,function(w,S){return s[w][S]}),l=M.Descent.createSquareMatrix(n,function(){return 2});this.links.forEach(function(w){var S=w.source,I=w.target;return l[S][I]=l[I][S]=1}),this.descent=new M.Descent(this.result,a),this.descent.threshold=.001,this.descent.G=l,this.constraints&&(this.descent.project=new D.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var x=0;x<this.nodes.length;x++){var E=this.nodes[x];E.fixed&&this.descent.locks.add(x,[E.x,E.y,E.z])}return this.descent.run(e),this},t.prototype.tick=function(){this.descent.locks.clear();for(var e=0;e<this.nodes.length;e++){var o=this.nodes[e];o.fixed&&this.descent.locks.add(e,[o.x,o.y,o.z])}return this.descent.rungeKutta()},t.dims=["x","y","z"],t.k=t.dims.length,t}();rt.Layout3D=u;var i=function(){function t(){}return t.prototype.getSourceIndex=function(e){return e.source},t.prototype.getTargetIndex=function(e){return e.target},t.prototype.getLength=function(e){return e.length},t.prototype.setLength=function(e,o){e.length=o},t}();return rt}var ut={},Rt;function Zt(){if(Rt)return ut;Rt=1,Object.defineProperty(ut,"__esModule",{value:!0});var C=ft(),M=Ft();function D(f,u,i,t){f.cola.start(0,0,0,10,!1);var e=b(f.cola.nodes(),f.cola.groups(),i,t);return e.routeEdges(f.powerGraph.powerEdges,u,function(o){return o.source.routerNode.id},function(o){return o.target.routerNode.id})}ut.gridify=D;function b(f,u,i,t){f.forEach(function(o){o.routerNode={name:o.name,bounds:o.bounds.inflate(-i)}}),u.forEach(function(o){o.routerNode={bounds:o.bounds.inflate(-t),children:(typeof o.groups<"u"?o.groups.map(function(n){return f.length+n.id}):[]).concat(typeof o.leaves<"u"?o.leaves.map(function(n){return n.index}):[])}});var e=f.concat(u).map(function(o,n){return o.routerNode.id=n,o.routerNode});return new M.GridRouter(e,{getChildren:function(o){return o.children},getBounds:function(o){return o.bounds}},i-t)}function v(f,u,i){var t;f.nodes.forEach(function(r,s){return r.index=s}),new C.Layout().avoidOverlaps(!1).nodes(f.nodes).links(f.links).powerGraphGroups(function(r){t=r,t.groups.forEach(function(s){return s.padding=i})});var e=f.nodes.length,o=[],n=f.nodes.slice(0);return n.forEach(function(r,s){return r.index=s}),t.groups.forEach(function(r){var s=r.index=r.id+e;n.push(r),typeof r.leaves<"u"&&r.leaves.forEach(function(a){return o.push({source:s,target:a.index})}),typeof r.groups<"u"&&r.groups.forEach(function(a){return o.push({source:s,target:a.id+e})})}),t.powerEdges.forEach(function(r){o.push({source:r.source.index,target:r.target.index})}),new C.Layout().size(u).nodes(n).links(o).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:new C.Layout().convergenceThreshold(.001).size(u).avoidOverlaps(!0).nodes(f.nodes).links(f.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function(r){t=r,t.groups.forEach(function(s){s.padding=i})}).start(50,0,100,0,!1),powerGraph:t}}return ut.powerGraphGridLayout=v,ut}var qt;function $t(){return qt||(qt=1,function(C){function M(D){for(var b in D)C.hasOwnProperty(b)||(C[b]=D[b])}Object.defineProperty(C,"__esModule",{value:!0}),M(Ht()),M(Kt()),M(_t()),M(zt()),M(Ft()),M(Yt()),M(ft()),M(Qt()),M(yt()),M(Bt()),M(Xt()),M(Vt()),M(ht()),M(dt()),M(mt()),M(Zt())}(vt)),vt}export{$t as r};
