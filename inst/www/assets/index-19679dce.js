(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function Yr(){}function MM(r,e){for(const t in e)r[t]=e[t];return r}function X3(r){return r()}function j5(){return Object.create(null)}function To(r){r.forEach(X3)}function V2(r){return typeof r=="function"}function Nr(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function OM(r){return Object.keys(r).length===0}function W2(r,...e){if(r==null)return Yr;const t=r.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Lr(r){let e;return W2(r,t=>e=t)(),e}function Kr(r,e,t){r.$$.on_destroy.push(W2(e,t))}function Ah(r,e,t,n){if(r){const i=K3(r,e,t,n);return r[0](i)}}function K3(r,e,t,n){return r[1]&&n?MM(t.ctx.slice(),r[1](n(e))):t.ctx}function Th(r,e,t,n){if(r[2]&&n){const i=r[2](n(t));if(e.dirty===void 0)return i;if(typeof i=="object"){const a=[],o=Math.max(e.dirty.length,i.length);for(let s=0;s<o;s+=1)a[s]=e.dirty[s]|i[s];return a}return e.dirty|i}return e.dirty}function kh(r,e,t,n,i,a){if(i){const o=K3(e,t,n,a);r.p(o,i)}}function Lh(r){if(r.ctx.length>32){const e=[],t=r.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function yu(r){return r??""}function tr(r,e,t){return r.set(t),e}function Gt(r,e){r.appendChild(e)}function Pt(r,e,t){r.insertBefore(e,t||null)}function Nt(r){r.parentNode&&r.parentNode.removeChild(r)}function Ls(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function Yt(r){return document.createElement(r)}function ia(r){return document.createTextNode(r)}function qt(){return ia(" ")}function jf(){return ia("")}function kn(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function st(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function DM(r){let e;return{p(...t){e=t,e.forEach(n=>r.push(n))},r(){e.forEach(t=>r.splice(r.indexOf(t),1))}}}function Bp(r){return r===""?null:+r}function IM(r){return Array.from(r.childNodes)}function Au(r,e){e=""+e,r.data!==e&&(r.data=e)}function pp(r,e){r.value=e??""}function Oa(r,e,t,n){t==null?r.style.removeProperty(e):r.style.setProperty(e,t,n?"important":"")}function vp(r,e,t){r.classList[t?"add":"remove"](e)}let fh;function nh(r){fh=r}function RM(){if(!fh)throw new Error("Function called outside component initialization");return fh}function oo(r){RM().$$.on_mount.push(r)}const bf=[],qn=[];let Tf=[];const n2=[],FM=Promise.resolve();let i2=!1;function BM(){i2||(i2=!0,FM.then(Z3))}function a2(r){Tf.push(r)}function ei(r){n2.push(r)}const zg=new Set;let rf=0;function Z3(){if(rf!==0)return;const r=fh;do{try{for(;rf<bf.length;){const e=bf[rf];rf++,nh(e),zM(e.$$)}}catch(e){throw bf.length=0,rf=0,e}for(nh(null),bf.length=0,rf=0;qn.length;)qn.pop()();for(let e=0;e<Tf.length;e+=1){const t=Tf[e];zg.has(t)||(zg.add(t),t())}Tf.length=0}while(bf.length);for(;n2.length;)n2.pop()();i2=!1,zg.clear(),nh(r)}function zM(r){if(r.fragment!==null){r.update(),To(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(a2)}}function qM(r){const e=[],t=[];Tf.forEach(n=>r.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),Tf=e}const Zd=new Set;let ul;function io(){ul={r:0,c:[],p:ul}}function ao(){ul.r||To(ul.c),ul=ul.p}function xt(r,e){r&&r.i&&(Zd.delete(r),r.i(e))}function At(r,e,t,n){if(r&&r.o){if(Zd.has(r))return;Zd.add(r),ul.c.push(()=>{Zd.delete(r),n&&(t&&r.d(1),n())}),r.o(e)}else n&&n()}function ti(r,e,t){const n=r.$$.props[e];n!==void 0&&(r.$$.bound[n]=t,t(r.$$.ctx[n]))}function Qt(r){r&&r.c()}function Xt(r,e,t,n){const{fragment:i,after_update:a}=r.$$;i&&i.m(e,t),n||a2(()=>{const o=r.$$.on_mount.map(X3).filter(V2);r.$$.on_destroy?r.$$.on_destroy.push(...o):To(o),r.$$.on_mount=[]}),a.forEach(a2)}function Kt(r,e){const t=r.$$;t.fragment!==null&&(qM(t.after_update),To(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function GM(r,e){r.$$.dirty[0]===-1&&(bf.push(r),BM(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function Dr(r,e,t,n,i,a,o,s=[-1]){const u=fh;nh(r);const l=r.$$={fragment:null,ctx:[],props:a,update:Yr,not_equal:i,bound:j5(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:j5(),dirty:s,skip_bound:!1,root:e.target||u.$$.root};o&&o(l.root);let f=!1;if(l.ctx=t?t(r,e.props||{},(c,d,...h)=>{const p=h.length?h[0]:d;return l.ctx&&i(l.ctx[c],l.ctx[c]=p)&&(!l.skip_bound&&l.bound[c]&&l.bound[c](p),f&&GM(r,c)),d}):[],l.update(),f=!0,To(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){const c=IM(e.target);l.fragment&&l.fragment.l(c),c.forEach(Nt)}else l.fragment&&l.fragment.c();e.intro&&xt(r.$$.fragment),Xt(r,e.target,e.anchor,e.customElement),Z3()}nh(u)}class Ir{$destroy(){Kt(this,1),this.$destroy=Yr}$on(e,t){if(!V2(t))return Yr;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!OM(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const nf=[];function $M(r,e){return{subscribe:as(r,e).subscribe}}function as(r,e=Yr){let t;const n=new Set;function i(s){if(Nr(r,s)&&(r=s,t)){const u=!nf.length;for(const l of n)l[1](),nf.push(l,r);if(u){for(let l=0;l<nf.length;l+=2)nf[l][0](nf[l+1]);nf.length=0}}}function a(s){i(s(r))}function o(s,u=Yr){const l=[s,u];return n.add(l),n.size===1&&(t=e(i)||Yr),s(r),()=>{n.delete(l),n.size===0&&t&&(t(),t=null)}}return{set:i,update:a,subscribe:o}}function UM(r,e,t){const n=!Array.isArray(r),i=n?[r]:r,a=e.length<2;return $M(t,o=>{let s=!1;const u=[];let l=0,f=Yr;const c=()=>{if(l)return;f();const h=e(n?u[0]:u,o);a?o(h):f=V2(h)?h:Yr},d=i.map((h,p)=>W2(h,g=>{u[p]=g,l&=~(1<<p),s&&c()},()=>{l|=1<<p}));return s=!0,c(),function(){To(d),f(),s=!1}})}const jr=as(null),Q3=as(null),ml=as(null);let tn=as({meanStruc:"default",intOvFree:!0,intLvFree:!1,estimator:"ML",se:"default",missing:"listwise",n_boot:1e3,fix_first:!0,fix_single:!0,auto_var:!0,auto_cov_lv_x:!0,auto_cov_y:!0,fixed_x:!0,mode:"user model"}),Jn=as({gridShow:!1,gridSpace:26,gridColor:"#dedede",gridWidth:1,gridMovePan:!1,gridSnap:!1,gridAlign:!1,gridResize:!1,showLav:!0,showVar:!0,showMean:!0,std:!1,view:"est",ci:.95,number_digits:2}),Ts=as({lastFitModel:null,lastFitLavFit:null,lastFitData:null}),sr=as({fitting:!1,loadingMode:!1,runCounter:0,modelEmpty:!0,dataAvail:!1,columnNames:null,loadedFileName:null,ids:null,dragged:null,draggedName:null,drawing:!1,full:!0,ready:!1,parsedModel:!1,meansModelled:null,buttonDown:!1,showServerErrors:!0,everEdge:!1}),o2=as(0);UM(sr,r=>r.columnNames);const J3=as({type:"info",message:"",key:0});function ga(r,e){J3.update(t=>({type:r,message:e,key:t.key+1}))}ga("info","Greetings");var kt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qi(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function HM(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var ja=HM,jM=typeof kt=="object"&&kt&&kt.Object===Object&&kt,ek=jM,VM=ek,WM=typeof self=="object"&&self&&self.Object===Object&&self,YM=VM||WM||Function("return this")(),ko=YM,XM=ko,KM=function(){return XM.Date.now()},tk=KM,ZM=/\s/;function QM(r){for(var e=r.length;e--&&ZM.test(r.charAt(e)););return e}var JM=QM,eO=JM,tO=/^\s+/;function rO(r){return r&&r.slice(0,eO(r)+1).replace(tO,"")}var nO=rO,iO=ko,aO=iO.Symbol,Vf=aO,V5=Vf,rk=Object.prototype,oO=rk.hasOwnProperty,sO=rk.toString,kc=V5?V5.toStringTag:void 0;function uO(r){var e=oO.call(r,kc),t=r[kc];try{r[kc]=void 0;var n=!0}catch{}var i=sO.call(r);return n&&(e?r[kc]=t:delete r[kc]),i}var lO=uO,fO=Object.prototype,cO=fO.toString;function hO(r){return cO.call(r)}var dO=hO,W5=Vf,pO=lO,vO=dO,gO="[object Null]",mO="[object Undefined]",Y5=W5?W5.toStringTag:void 0;function yO(r){return r==null?r===void 0?mO:gO:Y5&&Y5 in Object(r)?pO(r):vO(r)}var Tl=yO;function bO(r){return r!=null&&typeof r=="object"}var os=bO,wO=Tl,_O=os,xO="[object Symbol]";function SO(r){return typeof r=="symbol"||_O(r)&&wO(r)==xO}var kl=SO,EO=nO,X5=ja,CO=kl,K5=0/0,AO=/^[-+]0x[0-9a-f]+$/i,TO=/^0b[01]+$/i,kO=/^0o[0-7]+$/i,LO=parseInt;function NO(r){if(typeof r=="number")return r;if(CO(r))return K5;if(X5(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=X5(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=EO(r);var t=TO.test(r);return t||kO.test(r)?LO(r.slice(2),t?2:8):AO.test(r)?K5:+r}var nk=NO,PO=ja,qg=tk,Z5=nk,MO="Expected a function",OO=Math.max,DO=Math.min;function IO(r,e,t){var n,i,a,o,s,u,l=0,f=!1,c=!1,d=!0;if(typeof r!="function")throw new TypeError(MO);e=Z5(e)||0,PO(t)&&(f=!!t.leading,c="maxWait"in t,a=c?OO(Z5(t.maxWait)||0,e):a,d="trailing"in t?!!t.trailing:d);function h(A){var _=n,E=i;return n=i=void 0,l=A,o=r.apply(E,_),o}function p(A){return l=A,s=setTimeout(v,e),f?h(A):o}function g(A){var _=A-u,E=A-l,k=e-_;return c?DO(k,a-E):k}function b(A){var _=A-u,E=A-l;return u===void 0||_>=e||_<0||c&&E>=a}function v(){var A=qg();if(b(A))return y(A);s=setTimeout(v,g(A))}function y(A){return s=void 0,d&&n?h(A):(n=i=void 0,o)}function m(){s!==void 0&&clearTimeout(s),l=0,n=u=i=s=void 0}function w(){return s===void 0?o:y(qg())}function S(){var A=qg(),_=b(A);if(n=arguments,i=this,u=A,_){if(s===void 0)return p(u);if(c)return clearTimeout(s),s=setTimeout(v,e),h(u)}return s===void 0&&(s=setTimeout(v,e)),o}return S.cancel=m,S.flush=w,S}var RO=IO,ik={exports:{}};(function(r,e){(function(){var t,n,i,a,o,s,u,l,f,c,d,h,p,g,b;i=Math.floor,c=Math.min,n=function(v,y){return v<y?-1:v>y?1:0},f=function(v,y,m,w,S){var A;if(m==null&&(m=0),S==null&&(S=n),m<0)throw new Error("lo must be non-negative");for(w==null&&(w=v.length);m<w;)A=i((m+w)/2),S(y,v[A])<0?w=A:m=A+1;return[].splice.apply(v,[m,m-m].concat(y)),y},s=function(v,y,m){return m==null&&(m=n),v.push(y),g(v,0,v.length-1,m)},o=function(v,y){var m,w;return y==null&&(y=n),m=v.pop(),v.length?(w=v[0],v[0]=m,b(v,0,y)):w=m,w},l=function(v,y,m){var w;return m==null&&(m=n),w=v[0],v[0]=y,b(v,0,m),w},u=function(v,y,m){var w;return m==null&&(m=n),v.length&&m(v[0],y)<0&&(w=[v[0],y],y=w[0],v[0]=w[1],b(v,0,m)),y},a=function(v,y){var m,w,S,A,_,E;for(y==null&&(y=n),A=(function(){E=[];for(var k=0,M=i(v.length/2);0<=M?k<M:k>M;0<=M?k++:k--)E.push(k);return E}).apply(this).reverse(),_=[],w=0,S=A.length;w<S;w++)m=A[w],_.push(b(v,m,y));return _},p=function(v,y,m){var w;if(m==null&&(m=n),w=v.indexOf(y),w!==-1)return g(v,0,w,m),b(v,w,m)},d=function(v,y,m){var w,S,A,_,E;if(m==null&&(m=n),S=v.slice(0,y),!S.length)return S;for(a(S,m),E=v.slice(y),A=0,_=E.length;A<_;A++)w=E[A],u(S,w,m);return S.sort(m).reverse()},h=function(v,y,m){var w,S,A,_,E,k,M,T,C;if(m==null&&(m=n),y*10<=v.length){if(A=v.slice(0,y).sort(m),!A.length)return A;for(S=A[A.length-1],M=v.slice(y),_=0,k=M.length;_<k;_++)w=M[_],m(w,S)<0&&(f(A,w,0,null,m),A.pop(),S=A[A.length-1]);return A}for(a(v,m),C=[],E=0,T=c(y,v.length);0<=T?E<T:E>T;0<=T?++E:--E)C.push(o(v,m));return C},g=function(v,y,m,w){var S,A,_;for(w==null&&(w=n),S=v[m];m>y;){if(_=m-1>>1,A=v[_],w(S,A)<0){v[m]=A,m=_;continue}break}return v[m]=S},b=function(v,y,m){var w,S,A,_,E;for(m==null&&(m=n),S=v.length,E=y,A=v[y],w=2*y+1;w<S;)_=w+1,_<S&&!(m(v[w],v[_])<0)&&(w=_),v[y]=v[w],y=w,w=2*y+1;return v[y]=A,g(v,E,y,m)},t=function(){v.push=s,v.pop=o,v.replace=l,v.pushpop=u,v.heapify=a,v.updateItem=p,v.nlargest=d,v.nsmallest=h;function v(y){this.cmp=y??n,this.nodes=[]}return v.prototype.push=function(y){return s(this.nodes,y,this.cmp)},v.prototype.pop=function(){return o(this.nodes,this.cmp)},v.prototype.peek=function(){return this.nodes[0]},v.prototype.contains=function(y){return this.nodes.indexOf(y)!==-1},v.prototype.replace=function(y){return l(this.nodes,y,this.cmp)},v.prototype.pushpop=function(y){return u(this.nodes,y,this.cmp)},v.prototype.heapify=function(){return a(this.nodes,this.cmp)},v.prototype.updateItem=function(y){return p(this.nodes,y,this.cmp)},v.prototype.clear=function(){return this.nodes=[]},v.prototype.empty=function(){return this.nodes.length===0},v.prototype.size=function(){return this.nodes.length},v.prototype.clone=function(){var y;return y=new v,y.nodes=this.nodes.slice(0),y},v.prototype.toArray=function(){return this.nodes.slice(0)},v.prototype.insert=v.prototype.push,v.prototype.top=v.prototype.peek,v.prototype.front=v.prototype.peek,v.prototype.has=v.prototype.contains,v.prototype.copy=v.prototype.clone,v}(),function(v,y){return r.exports=y()}(this,function(){return t})}).call(kt)})(ik);var FO=ik.exports,BO=FO,zO=Array.isArray,yi=zO,qO=yi,GO=kl,$O=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,UO=/^\w*$/;function HO(r,e){if(qO(r))return!1;var t=typeof r;return t=="number"||t=="symbol"||t=="boolean"||r==null||GO(r)?!0:UO.test(r)||!$O.test(r)||e!=null&&r in Object(e)}var Y2=HO,jO=Tl,VO=ja,WO="[object AsyncFunction]",YO="[object Function]",XO="[object GeneratorFunction]",KO="[object Proxy]";function ZO(r){if(!VO(r))return!1;var e=jO(r);return e==YO||e==XO||e==WO||e==KO}var Nh=ZO,QO=ko,JO=QO["__core-js_shared__"],eD=JO,Gg=eD,Q5=function(){var r=/[^.]+$/.exec(Gg&&Gg.keys&&Gg.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function tD(r){return!!Q5&&Q5 in r}var rD=tD,nD=Function.prototype,iD=nD.toString;function aD(r){if(r!=null){try{return iD.call(r)}catch{}try{return r+""}catch{}}return""}var ak=aD,oD=Nh,sD=rD,uD=ja,lD=ak,fD=/[\\^$.*+?()[\]{}|]/g,cD=/^\[object .+?Constructor\]$/,hD=Function.prototype,dD=Object.prototype,pD=hD.toString,vD=dD.hasOwnProperty,gD=RegExp("^"+pD.call(vD).replace(fD,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function mD(r){if(!uD(r)||sD(r))return!1;var e=oD(r)?gD:cD;return e.test(lD(r))}var yD=mD;function bD(r,e){return r==null?void 0:r[e]}var wD=bD,_D=yD,xD=wD;function SD(r,e){var t=xD(r,e);return _D(t)?t:void 0}var Ll=SD,ED=Ll,CD=ED(Object,"create"),zp=CD,J5=zp;function AD(){this.__data__=J5?J5(null):{},this.size=0}var TD=AD;function kD(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var LD=kD,ND=zp,PD="__lodash_hash_undefined__",MD=Object.prototype,OD=MD.hasOwnProperty;function DD(r){var e=this.__data__;if(ND){var t=e[r];return t===PD?void 0:t}return OD.call(e,r)?e[r]:void 0}var ID=DD,RD=zp,FD=Object.prototype,BD=FD.hasOwnProperty;function zD(r){var e=this.__data__;return RD?e[r]!==void 0:BD.call(e,r)}var qD=zD,GD=zp,$D="__lodash_hash_undefined__";function UD(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=GD&&e===void 0?$D:e,this}var HD=UD,jD=TD,VD=LD,WD=ID,YD=qD,XD=HD;function Wf(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Wf.prototype.clear=jD;Wf.prototype.delete=VD;Wf.prototype.get=WD;Wf.prototype.has=YD;Wf.prototype.set=XD;var KD=Wf;function ZD(){this.__data__=[],this.size=0}var QD=ZD;function JD(r,e){return r===e||r!==r&&e!==e}var Yf=JD,eI=Yf;function tI(r,e){for(var t=r.length;t--;)if(eI(r[t][0],e))return t;return-1}var qp=tI,rI=qp,nI=Array.prototype,iI=nI.splice;function aI(r){var e=this.__data__,t=rI(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():iI.call(e,t,1),--this.size,!0}var oI=aI,sI=qp;function uI(r){var e=this.__data__,t=sI(e,r);return t<0?void 0:e[t][1]}var lI=uI,fI=qp;function cI(r){return fI(this.__data__,r)>-1}var hI=cI,dI=qp;function pI(r,e){var t=this.__data__,n=dI(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this}var vI=pI,gI=QD,mI=oI,yI=lI,bI=hI,wI=vI;function Xf(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Xf.prototype.clear=gI;Xf.prototype.delete=mI;Xf.prototype.get=yI;Xf.prototype.has=bI;Xf.prototype.set=wI;var Gp=Xf,_I=Ll,xI=ko,SI=_I(xI,"Map"),X2=SI,e_=KD,EI=Gp,CI=X2;function AI(){this.size=0,this.__data__={hash:new e_,map:new(CI||EI),string:new e_}}var TI=AI;function kI(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}var LI=kI,NI=LI;function PI(r,e){var t=r.__data__;return NI(e)?t[typeof e=="string"?"string":"hash"]:t.map}var $p=PI,MI=$p;function OI(r){var e=MI(this,r).delete(r);return this.size-=e?1:0,e}var DI=OI,II=$p;function RI(r){return II(this,r).get(r)}var FI=RI,BI=$p;function zI(r){return BI(this,r).has(r)}var qI=zI,GI=$p;function $I(r,e){var t=GI(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this}var UI=$I,HI=TI,jI=DI,VI=FI,WI=qI,YI=UI;function Kf(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Kf.prototype.clear=HI;Kf.prototype.delete=jI;Kf.prototype.get=VI;Kf.prototype.has=WI;Kf.prototype.set=YI;var K2=Kf,ok=K2,XI="Expected a function";function Z2(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError(XI);var t=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=t.cache;if(a.has(i))return a.get(i);var o=r.apply(this,n);return t.cache=a.set(i,o)||a,o};return t.cache=new(Z2.Cache||ok),t}Z2.Cache=ok;var KI=Z2,ZI=KI,QI=500;function JI(r){var e=ZI(r,function(n){return t.size===QI&&t.clear(),n}),t=e.cache;return e}var eR=JI,tR=eR,rR=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nR=/\\(\\)?/g,iR=tR(function(r){var e=[];return r.charCodeAt(0)===46&&e.push(""),r.replace(rR,function(t,n,i,a){e.push(i?a.replace(nR,"$1"):n||t)}),e}),sk=iR;function aR(r,e){for(var t=-1,n=r==null?0:r.length,i=Array(n);++t<n;)i[t]=e(r[t],t,r);return i}var Ph=aR,t_=Vf,oR=Ph,sR=yi,uR=kl,lR=1/0,r_=t_?t_.prototype:void 0,n_=r_?r_.toString:void 0;function uk(r){if(typeof r=="string")return r;if(sR(r))return oR(r,uk)+"";if(uR(r))return n_?n_.call(r):"";var e=r+"";return e=="0"&&1/r==-lR?"-0":e}var fR=uk,cR=fR;function hR(r){return r==null?"":cR(r)}var Q2=hR,dR=yi,pR=Y2,vR=sk,gR=Q2;function mR(r,e){return dR(r)?r:pR(r,e)?[r]:vR(gR(r))}var Up=mR,yR=kl,bR=1/0;function wR(r){if(typeof r=="string"||yR(r))return r;var e=r+"";return e=="0"&&1/r==-bR?"-0":e}var Zf=wR,_R=Up,xR=Zf;function SR(r,e){e=_R(e,r);for(var t=0,n=e.length;r!=null&&t<n;)r=r[xR(e[t++])];return t&&t==n?r:void 0}var Hp=SR,ER=Hp;function CR(r,e,t){var n=r==null?void 0:ER(r,e);return n===void 0?t:n}var lk=CR,AR=Ll,TR=function(){try{var r=AR(Object,"defineProperty");return r({},"",{}),r}catch{}}(),fk=TR,i_=fk;function kR(r,e,t){e=="__proto__"&&i_?i_(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}var jp=kR,LR=jp,NR=Yf,PR=Object.prototype,MR=PR.hasOwnProperty;function OR(r,e,t){var n=r[e];(!(MR.call(r,e)&&NR(n,t))||t===void 0&&!(e in r))&&LR(r,e,t)}var Vp=OR,DR=9007199254740991,IR=/^(?:0|[1-9]\d*)$/;function RR(r,e){var t=typeof r;return e=e??DR,!!e&&(t=="number"||t!="symbol"&&IR.test(r))&&r>-1&&r%1==0&&r<e}var Wp=RR,FR=Vp,BR=Up,zR=Wp,a_=ja,qR=Zf;function GR(r,e,t,n){if(!a_(r))return r;e=BR(e,r);for(var i=-1,a=e.length,o=a-1,s=r;s!=null&&++i<a;){var u=qR(e[i]),l=t;if(u==="__proto__"||u==="constructor"||u==="prototype")return r;if(i!=o){var f=s[u];l=n?n(f,u,s):void 0,l===void 0&&(l=a_(f)?f:zR(e[i+1])?[]:{})}FR(s,u,l),s=s[u]}return r}var ck=GR,$R=ck;function UR(r,e,t){return r==null?r:$R(r,e,t)}var HR=UR;function jR(r,e){var t=-1,n=r.length;for(e||(e=Array(n));++t<n;)e[t]=r[t];return e}var J2=jR,VR=Ph,WR=J2,YR=yi,XR=kl,KR=sk,ZR=Zf,QR=Q2;function JR(r){return YR(r)?VR(r,ZR):XR(r)?[r]:WR(KR(QR(r)))}var e6=JR,t6=RO,r6=BO,n6=lk,i6=HR,a6=e6;function Mh(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var Yp=Mh(t6),Oh=Mh(r6),o6=Mh(n6),s6=Mh(i6),u6=Mh(a6);function Pi(r){"@babel/helpers - typeof";return Pi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pi(r)}function ew(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function o_(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function tw(r,e,t){return e&&o_(r.prototype,e),t&&o_(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function hk(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function xs(r,e){return l6(r)||f6(r,e)||c6(r,e)||h6()}function l6(r){if(Array.isArray(r))return r}function f6(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],i=!0,a=!1,o,s;try{for(t=t.call(r);!(i=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(u){a=!0,s=u}finally{try{!i&&t.return!=null&&t.return()}finally{if(a)throw s}}return n}}function c6(r,e){if(r){if(typeof r=="string")return s_(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return s_(r,e)}}function s_(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function h6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Yn=typeof window>"u"?null:window,u_=Yn?Yn.navigator:null;Yn&&Yn.document;var d6=Pi(""),dk=Pi({}),p6=Pi(function(){}),v6=typeof HTMLElement>"u"?"undefined":Pi(HTMLElement),Dh=function(e){return e&&e.instanceString&&ii(e.instanceString)?e.instanceString():null},pr=function(e){return e!=null&&Pi(e)==d6},ii=function(e){return e!=null&&Pi(e)===p6},In=function(e){return!Ha(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},on=function(e){return e!=null&&Pi(e)===dk&&!In(e)&&e.constructor===Object},g6=function(e){return e!=null&&Pi(e)===dk},Ht=function(e){return e!=null&&Pi(e)===Pi(1)&&!isNaN(e)},m6=function(e){return Ht(e)&&Math.floor(e)===e},gp=function(e){if(v6!=="undefined")return e!=null&&e instanceof HTMLElement},Ha=function(e){return Ih(e)||pk(e)},Ih=function(e){return Dh(e)==="collection"&&e._private.single},pk=function(e){return Dh(e)==="collection"&&!e._private.single},rw=function(e){return Dh(e)==="core"},vk=function(e){return Dh(e)==="stylesheet"},y6=function(e){return Dh(e)==="event"},Tu=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},b6=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},w6=function(e){return on(e)&&Ht(e.x1)&&Ht(e.x2)&&Ht(e.y1)&&Ht(e.y2)},_6=function(e){return g6(e)&&ii(e.then)},x6=function(){return u_&&u_.userAgent.match(/msie|trident|edge/i)},ch=function(e,t){t||(t=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var a=[],o=0;o<arguments.length;o++)a.push(arguments[o]);return a.join("$")});var n=function i(){var a=this,o=arguments,s,u=t.apply(a,o),l=i.cache;return(s=l[u])||(s=l[u]=e.apply(a,o)),s};return n.cache={},n},nw=ch(function(r){return r.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),Xp=ch(function(r){return r.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),gk=ch(function(r,e){return r+e[0].toUpperCase()+e.substring(1)},function(r,e){return r+"$"+e}),l_=function(e){return Tu(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},Ni="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",S6="rgb[a]?\\(("+Ni+"[%]?)\\s*,\\s*("+Ni+"[%]?)\\s*,\\s*("+Ni+"[%]?)(?:\\s*,\\s*("+Ni+"))?\\)",E6="rgb[a]?\\((?:"+Ni+"[%]?)\\s*,\\s*(?:"+Ni+"[%]?)\\s*,\\s*(?:"+Ni+"[%]?)(?:\\s*,\\s*(?:"+Ni+"))?\\)",C6="hsl[a]?\\(("+Ni+")\\s*,\\s*("+Ni+"[%])\\s*,\\s*("+Ni+"[%])(?:\\s*,\\s*("+Ni+"))?\\)",A6="hsl[a]?\\((?:"+Ni+")\\s*,\\s*(?:"+Ni+"[%])\\s*,\\s*(?:"+Ni+"[%])(?:\\s*,\\s*(?:"+Ni+"))?\\)",T6="\\#[0-9a-fA-F]{3}",k6="\\#[0-9a-fA-F]{6}",mk=function(e,t){return e<t?-1:e>t?1:0},L6=function(e,t){return-1*mk(e,t)},Sr=Object.assign!=null?Object.assign.bind(Object):function(r){for(var e=arguments,t=1;t<e.length;t++){var n=e[t];if(n!=null)for(var i=Object.keys(n),a=0;a<i.length;a++){var o=i[a];r[o]=n[o]}}return r},N6=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var t=e.length===4,n,i,a,o=16;return t?(n=parseInt(e[1]+e[1],o),i=parseInt(e[2]+e[2],o),a=parseInt(e[3]+e[3],o)):(n=parseInt(e[1]+e[2],o),i=parseInt(e[3]+e[4],o),a=parseInt(e[5]+e[6],o)),[n,i,a]}},P6=function(e){var t,n,i,a,o,s,u,l;function f(p,g,b){return b<0&&(b+=1),b>1&&(b-=1),b<1/6?p+(g-p)*6*b:b<1/2?g:b<2/3?p+(g-p)*(2/3-b)*6:p}var c=new RegExp("^"+C6+"$").exec(e);if(c){if(n=parseInt(c[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,i=parseFloat(c[2]),i<0||i>100||(i=i/100,a=parseFloat(c[3]),a<0||a>100)||(a=a/100,o=c[4],o!==void 0&&(o=parseFloat(o),o<0||o>1)))return;if(i===0)s=u=l=Math.round(a*255);else{var d=a<.5?a*(1+i):a+i-a*i,h=2*a-d;s=Math.round(255*f(h,d,n+1/3)),u=Math.round(255*f(h,d,n)),l=Math.round(255*f(h,d,n-1/3))}t=[s,u,l,o]}return t},M6=function(e){var t,n=new RegExp("^"+S6+"$").exec(e);if(n){t=[];for(var i=[],a=1;a<=3;a++){var o=n[a];if(o[o.length-1]==="%"&&(i[a]=!0),o=parseFloat(o),i[a]&&(o=o/100*255),o<0||o>255)return;t.push(Math.floor(o))}var s=i[1]||i[2]||i[3],u=i[1]&&i[2]&&i[3];if(s&&!u)return;var l=n[4];if(l!==void 0){if(l=parseFloat(l),l<0||l>1)return;t.push(l)}}return t},O6=function(e){return I6[e.toLowerCase()]},D6=function(e){return(In(e)?e:null)||O6(e)||N6(e)||M6(e)||P6(e)},I6={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},yk=function(e){for(var t=e.map,n=e.keys,i=n.length,a=0;a<i;a++){var o=n[a];if(on(o))throw Error("Tried to set map with object key");a<n.length-1?(t[o]==null&&(t[o]={}),t=t[o]):t[o]=e.value}},bk=function(e){for(var t=e.map,n=e.keys,i=n.length,a=0;a<i;a++){var o=n[a];if(on(o))throw Error("Tried to get map with object key");if(t=t[o],t==null)return t}return t},$g=Yn?Yn.performance:null,wk=$g&&$g.now?function(){return $g.now()}:function(){return Date.now()},R6=function(){if(Yn){if(Yn.requestAnimationFrame)return function(r){Yn.requestAnimationFrame(r)};if(Yn.mozRequestAnimationFrame)return function(r){Yn.mozRequestAnimationFrame(r)};if(Yn.webkitRequestAnimationFrame)return function(r){Yn.webkitRequestAnimationFrame(r)};if(Yn.msRequestAnimationFrame)return function(r){Yn.msRequestAnimationFrame(r)}}return function(r){r&&setTimeout(function(){r(wk())},1e3/60)}}(),mp=function(e){return R6(e)},Os=wk,xf=9261,_k=65599,Vc=5381,xk=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xf,n=t,i;i=e.next(),!i.done;)n=n*_k+i.value|0;return n},hh=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xf;return t*_k+e|0},dh=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vc;return(t<<5)+t+e|0},F6=function(e,t){return e*2097152+t},lu=function(e){return e[0]*2097152+e[1]},xd=function(e,t){return[hh(e[0],t[0]),dh(e[1],t[1])]},B6=function(e,t){var n={value:0,done:!1},i=0,a=e.length,o={next:function(){return i<a?n.value=e[i++]:n.done=!0,n}};return xk(o,t)},yl=function(e,t){var n={value:0,done:!1},i=0,a=e.length,o={next:function(){return i<a?n.value=e.charCodeAt(i++):n.done=!0,n}};return xk(o,t)},Sk=function(){return z6(arguments)},z6=function(e){for(var t,n=0;n<e.length;n++){var i=e[n];n===0?t=yl(i):t=yl(i,t)}return t},f_=!0,q6=console.warn!=null,G6=console.trace!=null,iw=Number.MAX_SAFE_INTEGER||9007199254740991,Ek=function(){return!0},yp=function(){return!1},c_=function(){return 0},aw=function(){},ui=function(e){throw new Error(e)},Ck=function(e){if(e!==void 0)f_=!!e;else return f_},vn=function(e){Ck()&&(q6?console.warn(e):(console.log(e),G6&&console.trace()))},$6=function(e){return Sr({},e)},Qo=function(e){return e==null?e:In(e)?e.slice():on(e)?$6(e):e},U6=function(e){return e.slice()},Ak=function(e,t){for(t=e="";e++<36;t+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return t},H6={},Tk=function(){return H6},Ki=function(e){var t=Object.keys(e);return function(n){for(var i={},a=0;a<t.length;a++){var o=t[a],s=n==null?void 0:n[o];i[o]=s===void 0?e[o]:s}return i}},ku=function(e,t,n){for(var i=e.length-1;i>=0&&!(e[i]===t&&(e.splice(i,1),n));i--);},ow=function(e){e.splice(0,e.length)},j6=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];e.push(i)}},xo=function(e,t,n){return n&&(t=gk(n,t)),e[t]},vu=function(e,t,n,i){n&&(t=gk(n,t)),e[t]=i},V6=function(){function r(){ew(this,r),this._obj={}}return tw(r,[{key:"set",value:function(t,n){return this._obj[t]=n,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return this._obj[t]!==void 0}},{key:"get",value:function(t){return this._obj[t]}}]),r}(),Jo=typeof Map<"u"?Map:V6,W6="undefined",Y6=function(){function r(e){if(ew(this,r),this._obj=Object.create(null),this.size=0,e!=null){var t;e.instanceString!=null&&e.instanceString()===this.instanceString()?t=e.toArray():t=e;for(var n=0;n<t.length;n++)this.add(t[n])}}return tw(r,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var n=this._obj;n[t]!==1&&(n[t]=1,this.size++)}},{key:"delete",value:function(t){var n=this._obj;n[t]===1&&(n[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return this._obj[t]===1}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter(function(n){return t.has(n)})}},{key:"forEach",value:function(t,n){return this.toArray().forEach(t,n)}}]),r}(),Qf=(typeof Set>"u"?"undefined":Pi(Set))!==W6?Set:Y6,Kp=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||t===void 0||!rw(e)){ui("An element must have a core reference and parameters set");return}var i=t.group;if(i==null&&(t.data&&t.data.source!=null&&t.data.target!=null?i="edges":i="nodes"),i!=="nodes"&&i!=="edges"){ui("An element must be of type `nodes` or `edges`; you specified `"+i+"`");return}this.length=1,this[0]=this;var a=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:i,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:t.selectable===void 0?!0:!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:t.grabbable===void 0?!0:!!t.grabbable,pannable:t.pannable===void 0?i==="edges":!!t.pannable,active:!1,classes:new Qf,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(a.position.x==null&&(a.position.x=0),a.position.y==null&&(a.position.y=0),t.renderedPosition){var o=t.renderedPosition,s=e.pan(),u=e.zoom();a.position={x:(o.x-s.x)/u,y:(o.y-s.y)/u}}var l=[];In(t.classes)?l=t.classes:pr(t.classes)&&(l=t.classes.split(/\s+/));for(var f=0,c=l.length;f<c;f++){var d=l[f];!d||d===""||a.classes.add(d)}this.createEmitter();var h=t.style||t.css;h&&(vn("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(h)),(n===void 0||n)&&this.restore()},h_=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,i,a){var o;on(n)&&!Ha(n)&&(o=n,n=o.roots||o.root,i=o.visit,a=o.directed),a=arguments.length===2&&!ii(i)?i:a,i=ii(i)?i:function(){};for(var s=this._private.cy,u=n=pr(n)?this.filter(n):n,l=[],f=[],c={},d={},h={},p=0,g,b=this.byGroup(),v=b.nodes,y=b.edges,m=0;m<u.length;m++){var w=u[m],S=w.id();w.isNode()&&(l.unshift(w),e.bfs&&(h[S]=!0,f.push(w)),d[S]=0)}for(var A=function(){var R=e.bfs?l.shift():l.pop(),x=R.id();if(e.dfs){if(h[x])return"continue";h[x]=!0,f.push(R)}var B=d[x],D=c[x],O=D!=null?D.source():null,G=D!=null?D.target():null,V=D==null?void 0:R.same(O)?G[0]:O[0],I=void 0;if(I=i(R,D,V,p++,B),I===!0)return g=R,"break";if(I===!1)return"break";for(var z=R.connectedEdges().filter(function(W){return(!a||W.source().same(R))&&y.has(W)}),P=0;P<z.length;P++){var q=z[P],F=q.connectedNodes().filter(function(W){return!W.same(R)&&v.has(W)}),U=F.id();F.length!==0&&!h[U]&&(F=F[0],l.push(F),e.bfs&&(h[U]=!0,f.push(F)),c[U]=q,d[U]=d[x]+1)}};l.length!==0;){var _=A();if(_!=="continue"&&_==="break")break}for(var E=s.collection(),k=0;k<f.length;k++){var M=f[k],T=c[M.id()];T!=null&&E.push(T),E.push(M)}return{path:s.collection(E),found:s.collection(g)}}},ph={breadthFirstSearch:h_({bfs:!0}),depthFirstSearch:h_({dfs:!0})};ph.bfs=ph.breadthFirstSearch;ph.dfs=ph.depthFirstSearch;var X6=Ki({root:null,weight:function(e){return 1},directed:!1}),K6={dijkstra:function(e){if(!on(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var n=X6(e),i=n.root,a=n.weight,o=n.directed,s=this,u=a,l=pr(i)?this.filter(i)[0]:i[0],f={},c={},d={},h=this.byGroup(),p=h.nodes,g=h.edges;g.unmergeBy(function(B){return B.isLoop()});for(var b=function(D){return f[D.id()]},v=function(D,O){f[D.id()]=O,y.updateItem(D)},y=new Oh.default(function(B,D){return b(B)-b(D)}),m=0;m<p.length;m++){var w=p[m];f[w.id()]=w.same(l)?0:1/0,y.push(w)}for(var S=function(D,O){for(var G=(o?D.edgesTo(O):D.edgesWith(O)).intersect(g),V=1/0,I,z=0;z<G.length;z++){var P=G[z],q=u(P);(q<V||!I)&&(V=q,I=P)}return{edge:I,dist:V}};y.size()>0;){var A=y.pop(),_=b(A),E=A.id();if(d[E]=_,_!==1/0)for(var k=A.neighborhood().intersect(p),M=0;M<k.length;M++){var T=k[M],C=T.id(),R=S(A,T),x=_+R.dist;x<b(T)&&(v(T,x),c[C]={node:A,edge:R.edge})}}return{distanceTo:function(D){var O=pr(D)?p.filter(D)[0]:D[0];return d[O.id()]},pathTo:function(D){var O=pr(D)?p.filter(D)[0]:D[0],G=[],V=O,I=V.id();if(O.length>0)for(G.unshift(O);c[I];){var z=c[I];G.unshift(z.edge),G.unshift(z.node),V=z.node,I=V.id()}return s.spawn(G)}}}},Z6={kruskal:function(e){e=e||function(m){return 1};for(var t=this.byGroup(),n=t.nodes,i=t.edges,a=n.length,o=new Array(a),s=n,u=function(w){for(var S=0;S<o.length;S++){var A=o[S];if(A.has(w))return S}},l=0;l<a;l++)o[l]=this.spawn(n[l]);for(var f=i.sort(function(m,w){return e(m)-e(w)}),c=0;c<f.length;c++){var d=f[c],h=d.source()[0],p=d.target()[0],g=u(h),b=u(p),v=o[g],y=o[b];g!==b&&(s.merge(d),v.merge(y),o.splice(b,1))}return s}},Q6=Ki({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),J6={aStar:function(e){var t=this.cy(),n=Q6(e),i=n.root,a=n.goal,o=n.heuristic,s=n.directed,u=n.weight;i=t.collection(i)[0],a=t.collection(a)[0];var l=i.id(),f=a.id(),c={},d={},h={},p=new Oh.default(function(I,z){return d[I.id()]-d[z.id()]}),g=new Qf,b={},v={},y=function(z,P){p.push(z),g.add(P)},m,w,S=function(){m=p.pop(),w=m.id(),g.delete(w)},A=function(z){return g.has(z)};y(i,l),c[l]=0,d[l]=o(i);for(var _=0;p.size()>0;){if(S(),_++,w===f){for(var E=[],k=a,M=f,T=v[M];E.unshift(k),T!=null&&E.unshift(T),k=b[M],k!=null;)M=k.id(),T=v[M];return{found:!0,distance:c[w],path:this.spawn(E),steps:_}}h[w]=!0;for(var C=m._private.edges,R=0;R<C.length;R++){var x=C[R];if(this.hasElementWithId(x.id())&&!(s&&x.data("source")!==w)){var B=x.source(),D=x.target(),O=B.id()!==w?B:D,G=O.id();if(this.hasElementWithId(G)&&!h[G]){var V=c[w]+u(x);if(!A(G)){c[G]=V,d[G]=V+o(O),y(O,G),b[G]=m,v[G]=x;continue}V<c[G]&&(c[G]=V,d[G]=V+o(O),b[G]=m,v[G]=x)}}}}return{found:!1,distance:void 0,path:void 0,steps:_}}},eF=Ki({weight:function(e){return 1},directed:!1}),tF={floydWarshall:function(e){for(var t=this.cy(),n=eF(e),i=n.weight,a=n.directed,o=i,s=this.byGroup(),u=s.nodes,l=s.edges,f=u.length,c=f*f,d=function(q){return u.indexOf(q)},h=function(q){return u[q]},p=new Array(c),g=0;g<c;g++){var b=g%f,v=(g-b)/f;v===b?p[g]=0:p[g]=1/0}for(var y=new Array(c),m=new Array(c),w=0;w<l.length;w++){var S=l[w],A=S.source()[0],_=S.target()[0];if(A!==_){var E=d(A),k=d(_),M=E*f+k,T=o(S);if(p[M]>T&&(p[M]=T,y[M]=k,m[M]=S),!a){var C=k*f+E;!a&&p[C]>T&&(p[C]=T,y[C]=E,m[C]=S)}}}for(var R=0;R<f;R++)for(var x=0;x<f;x++)for(var B=x*f+R,D=0;D<f;D++){var O=x*f+D,G=R*f+D;p[B]+p[G]<p[O]&&(p[O]=p[B]+p[G],y[O]=y[B])}var V=function(q){return(pr(q)?t.filter(q):q)[0]},I=function(q){return d(V(q))},z={distance:function(q,F){var U=I(q),W=I(F);return p[U*f+W]},path:function(q,F){var U=I(q),W=I(F),X=h(U);if(U===W)return X.collection();if(y[U*f+W]==null)return t.collection();var te=t.collection(),ne=U,he;for(te.merge(X);U!==W;)ne=U,U=y[U*f+W],he=m[ne*f+U],te.merge(he),te.merge(h(U));return te}};return z}},rF=Ki({weight:function(e){return 1},directed:!1,root:null}),nF={bellmanFord:function(e){var t=this,n=rF(e),i=n.weight,a=n.directed,o=n.root,s=i,u=this,l=this.cy(),f=this.byGroup(),c=f.edges,d=f.nodes,h=d.length,p=new Jo,g=!1,b=[];o=l.collection(o)[0],c.unmergeBy(function(ie){return ie.isLoop()});for(var v=c.length,y=function(re){var J=p.get(re.id());return J||(J={},p.set(re.id(),J)),J},m=function(re){return(pr(re)?l.$(re):re)[0]},w=function(re){return y(m(re)).dist},S=function(re){for(var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,fe=m(re),we=[],ge=fe;;){if(ge==null)return t.spawn();var me=y(ge),ue=me.edge,ce=me.pred;if(we.unshift(ge[0]),ge.same(J)&&we.length>0)break;ue!=null&&we.unshift(ue),ge=ce}return u.spawn(we)},A=0;A<h;A++){var _=d[A],E=y(_);_.same(o)?E.dist=0:E.dist=1/0,E.pred=null,E.edge=null}for(var k=!1,M=function(re,J,fe,we,ge,me){var ue=we.dist+me;ue<ge.dist&&!fe.same(we.edge)&&(ge.dist=ue,ge.pred=re,ge.edge=fe,k=!0)},T=1;T<h;T++){k=!1;for(var C=0;C<v;C++){var R=c[C],x=R.source(),B=R.target(),D=s(R),O=y(x),G=y(B);M(x,B,R,O,G,D),a||M(B,x,R,G,O,D)}if(!k)break}if(k)for(var V=[],I=0;I<v;I++){var z=c[I],P=z.source(),q=z.target(),F=s(z),U=y(P).dist,W=y(q).dist;if(U+F<W||!a&&W+F<U)if(g||(vn("Graph contains a negative weight cycle for Bellman-Ford"),g=!0),e.findNegativeWeightCycles!==!1){var X=[];U+F<W&&X.push(P),!a&&W+F<U&&X.push(q);for(var te=X.length,ne=0;ne<te;ne++){var he=X[ne],ve=[he];ve.push(y(he).edge);for(var Ce=y(he).pred;ve.indexOf(Ce)===-1;)ve.push(Ce),ve.push(y(Ce).edge),Ce=y(Ce).pred;ve=ve.slice(ve.indexOf(Ce));for(var Le=ve[0].id(),K=0,le=2;le<ve.length;le+=2)ve[le].id()<Le&&(Le=ve[le].id(),K=le);ve=ve.slice(K).concat(ve.slice(0,K)),ve.push(ve[0]);var Z=ve.map(function(ie){return ie.id()}).join(",");V.indexOf(Z)===-1&&(b.push(u.spawn(ve)),V.push(Z))}}else break}return{distanceTo:w,pathTo:S,hasNegativeWeightCycle:g,negativeWeightCycles:b}}},iF=Math.sqrt(2),aF=function(e,t,n){n.length===0&&ui("Karger-Stein must be run on a connected (sub)graph");for(var i=n[e],a=i[1],o=i[2],s=t[a],u=t[o],l=n,f=l.length-1;f>=0;f--){var c=l[f],d=c[1],h=c[2];(t[d]===s&&t[h]===u||t[d]===u&&t[h]===s)&&l.splice(f,1)}for(var p=0;p<l.length;p++){var g=l[p];g[1]===u?(l[p]=g.slice(),l[p][1]=s):g[2]===u&&(l[p]=g.slice(),l[p][2]=s)}for(var b=0;b<t.length;b++)t[b]===u&&(t[b]=s);return l},Ug=function(e,t,n,i){for(;n>i;){var a=Math.floor(Math.random()*t.length);t=aF(a,e,t),n--}return t},oF={kargerStein:function(){var e=this,t=this.byGroup(),n=t.nodes,i=t.edges;i.unmergeBy(function(G){return G.isLoop()});var a=n.length,o=i.length,s=Math.ceil(Math.pow(Math.log(a)/Math.LN2,2)),u=Math.floor(a/iF);if(a<2){ui("At least 2 nodes are required for Karger-Stein algorithm");return}for(var l=[],f=0;f<o;f++){var c=i[f];l.push([f,n.indexOf(c.source()),n.indexOf(c.target())])}for(var d=1/0,h=[],p=new Array(a),g=new Array(a),b=new Array(a),v=function(V,I){for(var z=0;z<a;z++)I[z]=V[z]},y=0;y<=s;y++){for(var m=0;m<a;m++)g[m]=m;var w=Ug(g,l.slice(),a,u),S=w.slice();v(g,b);var A=Ug(g,w,u,2),_=Ug(b,S,u,2);A.length<=_.length&&A.length<d?(d=A.length,h=A,v(g,p)):_.length<=A.length&&_.length<d&&(d=_.length,h=_,v(b,p))}for(var E=this.spawn(h.map(function(G){return i[G[0]]})),k=this.spawn(),M=this.spawn(),T=p[0],C=0;C<p.length;C++){var R=p[C],x=n[C];R===T?k.merge(x):M.merge(x)}var B=function(V){var I=e.spawn();return V.forEach(function(z){I.merge(z),z.connectedEdges().forEach(function(P){e.contains(P)&&!E.contains(P)&&I.merge(P)})}),I},D=[B(k),B(M)],O={cut:E,components:D,partition1:k,partition2:M};return O}},sF=function(e){return{x:e.x,y:e.y}},Zp=function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},kk=function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},Sf=function(e){return{x:e[0],y:e[1]}},uF=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=1/0,a=t;a<n;a++){var o=e[a];isFinite(o)&&(i=Math.min(o,i))}return i},lF=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=-1/0,a=t;a<n;a++){var o=e[a];isFinite(o)&&(i=Math.max(o,i))}return i},fF=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=0,a=0,o=t;o<n;o++){var s=e[o];isFinite(s)&&(i+=s,a++)}return i/a},cF=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;i?e=e.slice(t,n):(n<e.length&&e.splice(n,e.length-n),t>0&&e.splice(0,t));for(var s=0,u=e.length-1;u>=0;u--){var l=e[u];o?isFinite(l)||(e[u]=-1/0,s++):e.splice(u,1)}a&&e.sort(function(d,h){return d-h});var f=e.length,c=Math.floor(f/2);return f%2!==0?e[c+1+s]:(e[c-1+s]+e[c+s])/2},hF=function(e){return Math.PI*e/180},Sd=function(e,t){return Math.atan2(t,e)-Math.PI/2},sw=Math.log2||function(r){return Math.log(r)/Math.log(2)},Lk=function(e){return e>0?1:e<0?-1:0},bl=function(e,t){return Math.sqrt(il(e,t))},il=function(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i},dF=function(e){for(var t=e.length,n=0,i=0;i<t;i++)n+=e[i];for(var a=0;a<t;a++)e[a]=e[a]/n;return e},Bi=function(e,t,n,i){return(1-i)*(1-i)*e+2*(1-i)*i*t+i*i*n},kf=function(e,t,n,i){return{x:Bi(e.x,t.x,n.x,i),y:Bi(e.y,t.y,n.y,i)}},pF=function(e,t,n,i){var a={x:t.x-e.x,y:t.y-e.y},o=bl(e,t),s={x:a.x/o,y:a.y/o};return n=n??0,i=i??n*o,{x:e.x+s.x*i,y:e.y+s.y*i}},vh=function(e,t,n){return Math.max(e,Math.min(n,t))},Ia=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},vF=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},gF=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},mF=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},yF=function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},Qd=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Hg=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,i,a,o;if(t.length===1)n=i=a=o=t[0];else if(t.length===2)n=a=t[0],o=i=t[1];else if(t.length===4){var s=xs(t,4);n=s[0],i=s[1],a=s[2],o=s[3]}return e.x1-=o,e.x2+=i,e.y1-=n,e.y2+=a,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},d_=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},uw=function(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.x2<t.x1||t.x2<e.x1||e.y2<t.y1||t.y2<e.y1||e.y1>t.y2||t.y1>e.y2)},Bf=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},bF=function(e,t){return Bf(e,t.x,t.y)},Nk=function(e,t){return Bf(e,t.x1,t.y1)&&Bf(e,t.x2,t.y2)},Pk=function(e,t,n,i,a,o,s){var u=Rh(a,o),l=a/2,f=o/2,c;{var d=n-l+u-s,h=i-f-s,p=n+l-u+s,g=h;if(c=bu(e,t,n,i,d,h,p,g,!1),c.length>0)return c}{var b=n+l+s,v=i-f+u-s,y=b,m=i+f-u+s;if(c=bu(e,t,n,i,b,v,y,m,!1),c.length>0)return c}{var w=n-l+u-s,S=i+f+s,A=n+l-u+s,_=S;if(c=bu(e,t,n,i,w,S,A,_,!1),c.length>0)return c}{var E=n-l-s,k=i-f+u-s,M=E,T=i+f-u+s;if(c=bu(e,t,n,i,E,k,M,T,!1),c.length>0)return c}var C;{var R=n-l+u,x=i-f+u;if(C=Wc(e,t,n,i,R,x,u+s),C.length>0&&C[0]<=R&&C[1]<=x)return[C[0],C[1]]}{var B=n+l-u,D=i-f+u;if(C=Wc(e,t,n,i,B,D,u+s),C.length>0&&C[0]>=B&&C[1]<=D)return[C[0],C[1]]}{var O=n+l-u,G=i+f-u;if(C=Wc(e,t,n,i,O,G,u+s),C.length>0&&C[0]>=O&&C[1]>=G)return[C[0],C[1]]}{var V=n-l+u,I=i+f-u;if(C=Wc(e,t,n,i,V,I,u+s),C.length>0&&C[0]<=V&&C[1]>=I)return[C[0],C[1]]}return[]},wF=function(e,t,n,i,a,o,s){var u=s,l=Math.min(n,a),f=Math.max(n,a),c=Math.min(i,o),d=Math.max(i,o);return l-u<=e&&e<=f+u&&c-u<=t&&t<=d+u},_F=function(e,t,n,i,a,o,s,u,l){var f={x1:Math.min(n,s,a)-l,x2:Math.max(n,s,a)+l,y1:Math.min(i,u,o)-l,y2:Math.max(i,u,o)+l};return!(e<f.x1||e>f.x2||t<f.y1||t>f.y2)},xF=function(e,t,n,i){n-=i;var a=t*t-4*e*n;if(a<0)return[];var o=Math.sqrt(a),s=2*e,u=(-t+o)/s,l=(-t-o)/s;return[u,l]},SF=function(e,t,n,i,a){var o=1e-5;e===0&&(e=o),t/=e,n/=e,i/=e;var s,u,l,f,c,d,h,p;if(u=(3*n-t*t)/9,l=-(27*i)+t*(9*n-2*(t*t)),l/=54,s=u*u*u+l*l,a[1]=0,h=t/3,s>0){c=l+Math.sqrt(s),c=c<0?-Math.pow(-c,1/3):Math.pow(c,1/3),d=l-Math.sqrt(s),d=d<0?-Math.pow(-d,1/3):Math.pow(d,1/3),a[0]=-h+c+d,h+=(c+d)/2,a[4]=a[2]=-h,h=Math.sqrt(3)*(-d+c)/2,a[3]=h,a[5]=-h;return}if(a[5]=a[3]=0,s===0){p=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3),a[0]=-h+2*p,a[4]=a[2]=-(p+h);return}u=-u,f=u*u*u,f=Math.acos(l/Math.sqrt(f)),p=2*Math.sqrt(u),a[0]=-h+p*Math.cos(f/3),a[2]=-h+p*Math.cos((f+2*Math.PI)/3),a[4]=-h+p*Math.cos((f+4*Math.PI)/3)},EF=function(e,t,n,i,a,o,s,u){var l=1*n*n-4*n*a+2*n*s+4*a*a-4*a*s+s*s+i*i-4*i*o+2*i*u+4*o*o-4*o*u+u*u,f=1*9*n*a-3*n*n-3*n*s-6*a*a+3*a*s+9*i*o-3*i*i-3*i*u-6*o*o+3*o*u,c=1*3*n*n-6*n*a+n*s-n*e+2*a*a+2*a*e-s*e+3*i*i-6*i*o+i*u-i*t+2*o*o+2*o*t-u*t,d=1*n*a-n*n+n*e-a*e+i*o-i*i+i*t-o*t,h=[];SF(l,f,c,d,h);for(var p=1e-7,g=[],b=0;b<6;b+=2)Math.abs(h[b+1])<p&&h[b]>=0&&h[b]<=1&&g.push(h[b]);g.push(1),g.push(0);for(var v=-1,y,m,w,S=0;S<g.length;S++)y=Math.pow(1-g[S],2)*n+2*(1-g[S])*g[S]*a+g[S]*g[S]*s,m=Math.pow(1-g[S],2)*i+2*(1-g[S])*g[S]*o+g[S]*g[S]*u,w=Math.pow(y-e,2)+Math.pow(m-t,2),v>=0?w<v&&(v=w):v=w;return v},CF=function(e,t,n,i,a,o){var s=[e-n,t-i],u=[a-n,o-i],l=u[0]*u[0]+u[1]*u[1],f=s[0]*s[0]+s[1]*s[1],c=s[0]*u[0]+s[1]*u[1],d=c*c/l;return c<0?f:d>l?(e-a)*(e-a)+(t-o)*(t-o):f-d},Ma=function(e,t,n){for(var i,a,o,s,u,l=0,f=0;f<n.length/2;f++)if(i=n[f*2],a=n[f*2+1],f+1<n.length/2?(o=n[(f+1)*2],s=n[(f+1)*2+1]):(o=n[(f+1-n.length/2)*2],s=n[(f+1-n.length/2)*2+1]),!(i==e&&o==e))if(i>=e&&e>=o||i<=e&&e<=o)u=(e-i)/(o-i)*(s-a)+a,u>t&&l++;else continue;return l%2!==0},Ds=function(e,t,n,i,a,o,s,u,l){var f=new Array(n.length),c;u[0]!=null?(c=Math.atan(u[1]/u[0]),u[0]<0?c=c+Math.PI/2:c=-c-Math.PI/2):c=u;for(var d=Math.cos(-c),h=Math.sin(-c),p=0;p<f.length/2;p++)f[p*2]=o/2*(n[p*2]*d-n[p*2+1]*h),f[p*2+1]=s/2*(n[p*2+1]*d+n[p*2]*h),f[p*2]+=i,f[p*2+1]+=a;var g;if(l>0){var b=Ok(f,-l);g=Mk(b)}else g=f;return Ma(e,t,g)},AF=function(e,t,n,i,a,o,s){for(var u=new Array(n.length),l=o/2,f=s/2,c=lw(o,s),d=c*c,h=0;h<n.length/4;h++){var p=void 0,g=void 0;h===0?p=n.length-2:p=h*4-2,g=h*4+2;var b=i+l*n[h*4],v=a+f*n[h*4+1],y=-n[p]*n[g]-n[p+1]*n[g+1],m=c/Math.tan(Math.acos(y)/2),w=b-m*n[p],S=v-m*n[p+1],A=b+m*n[g],_=v+m*n[g+1];u[h*4]=w,u[h*4+1]=S,u[h*4+2]=A,u[h*4+3]=_;var E=n[p+1],k=-n[p],M=E*n[g]+k*n[g+1];M<0&&(E*=-1,k*=-1);var T=w+E*c,C=S+k*c,R=Math.pow(T-e,2)+Math.pow(C-t,2);if(R<=d)return!0}return Ma(e,t,u)},Mk=function(e){for(var t=new Array(e.length/2),n,i,a,o,s,u,l,f,c=0;c<e.length/4;c++){n=e[c*4],i=e[c*4+1],a=e[c*4+2],o=e[c*4+3],c<e.length/4-1?(s=e[(c+1)*4],u=e[(c+1)*4+1],l=e[(c+1)*4+2],f=e[(c+1)*4+3]):(s=e[0],u=e[1],l=e[2],f=e[3]);var d=bu(n,i,a,o,s,u,l,f,!0);t[c*2]=d[0],t[c*2+1]=d[1]}return t},Ok=function(e,t){for(var n=new Array(e.length*2),i,a,o,s,u=0;u<e.length/2;u++){i=e[u*2],a=e[u*2+1],u<e.length/2-1?(o=e[(u+1)*2],s=e[(u+1)*2+1]):(o=e[0],s=e[1]);var l=s-a,f=-(o-i),c=Math.sqrt(l*l+f*f),d=l/c,h=f/c;n[u*4]=i+d*t,n[u*4+1]=a+h*t,n[u*4+2]=o+d*t,n[u*4+3]=s+h*t}return n},TF=function(e,t,n,i,a,o){var s=n-e,u=i-t;s/=a,u/=o;var l=Math.sqrt(s*s+u*u),f=l-1;if(f<0)return[];var c=f/l;return[(n-e)*c+e,(i-t)*c+t]},ll=function(e,t,n,i,a,o,s){return e-=a,t-=o,e/=n/2+s,t/=i/2+s,e*e+t*t<=1},Wc=function(e,t,n,i,a,o,s){var u=[n-e,i-t],l=[e-a,t-o],f=u[0]*u[0]+u[1]*u[1],c=2*(l[0]*u[0]+l[1]*u[1]),d=l[0]*l[0]+l[1]*l[1]-s*s,h=c*c-4*f*d;if(h<0)return[];var p=(-c+Math.sqrt(h))/(2*f),g=(-c-Math.sqrt(h))/(2*f),b=Math.min(p,g),v=Math.max(p,g),y=[];if(b>=0&&b<=1&&y.push(b),v>=0&&v<=1&&y.push(v),y.length===0)return[];var m=y[0]*u[0]+e,w=y[0]*u[1]+t;if(y.length>1){if(y[0]==y[1])return[m,w];var S=y[1]*u[0]+e,A=y[1]*u[1]+t;return[m,w,S,A]}else return[m,w]},jg=function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},bu=function(e,t,n,i,a,o,s,u,l){var f=e-a,c=n-e,d=s-a,h=t-o,p=i-t,g=u-o,b=d*h-g*f,v=c*h-p*f,y=g*c-d*p;if(y!==0){var m=b/y,w=v/y,S=.001,A=0-S,_=1+S;return A<=m&&m<=_&&A<=w&&w<=_?[e+m*c,t+m*p]:l?[e+m*c,t+m*p]:[]}else return b===0||v===0?jg(e,n,s)===s?[s,u]:jg(e,n,a)===a?[a,o]:jg(a,s,n)===n?[n,i]:[]:[]},gh=function(e,t,n,i,a,o,s,u){var l=[],f,c=new Array(n.length),d=!0;o==null&&(d=!1);var h;if(d){for(var p=0;p<c.length/2;p++)c[p*2]=n[p*2]*o+i,c[p*2+1]=n[p*2+1]*s+a;if(u>0){var g=Ok(c,-u);h=Mk(g)}else h=c}else h=n;for(var b,v,y,m,w=0;w<h.length/2;w++)b=h[w*2],v=h[w*2+1],w<h.length/2-1?(y=h[(w+1)*2],m=h[(w+1)*2+1]):(y=h[0],m=h[1]),f=bu(e,t,i,a,b,v,y,m),f.length!==0&&l.push(f[0],f[1]);return l},kF=function(e,t,n,i,a,o,s,u){for(var l=[],f,c=new Array(n.length),d=o/2,h=s/2,p=lw(o,s),g=0;g<n.length/4;g++){var b=void 0,v=void 0;g===0?b=n.length-2:b=g*4-2,v=g*4+2;var y=i+d*n[g*4],m=a+h*n[g*4+1],w=-n[b]*n[v]-n[b+1]*n[v+1],S=p/Math.tan(Math.acos(w)/2),A=y-S*n[b],_=m-S*n[b+1],E=y+S*n[v],k=m+S*n[v+1];g===0?(c[n.length-2]=A,c[n.length-1]=_):(c[g*4-2]=A,c[g*4-1]=_),c[g*4]=E,c[g*4+1]=k;var M=n[b+1],T=-n[b],C=M*n[v]+T*n[v+1];C<0&&(M*=-1,T*=-1);var R=A+M*p,x=_+T*p;f=Wc(e,t,i,a,R,x,p),f.length!==0&&l.push(f[0],f[1])}for(var B=0;B<c.length/4;B++)f=bu(e,t,i,a,c[B*4],c[B*4+1],c[B*4+2],c[B*4+3],!1),f.length!==0&&l.push(f[0],f[1]);if(l.length>2){for(var D=[l[0],l[1]],O=Math.pow(D[0]-e,2)+Math.pow(D[1]-t,2),G=1;G<l.length/2;G++){var V=Math.pow(l[G*2]-e,2)+Math.pow(l[G*2+1]-t,2);V<=O&&(D[0]=l[G*2],D[1]=l[G*2+1],O=V)}return D}return l},Ed=function(e,t,n){var i=[e[0]-t[0],e[1]-t[1]],a=Math.sqrt(i[0]*i[0]+i[1]*i[1]),o=(a-n)/a;return o<0&&(o=1e-5),[t[0]+o*i[0],t[1]+o*i[1]]},pa=function(e,t){var n=s2(e,t);return n=Dk(n),n},Dk=function(e){for(var t,n,i=e.length/2,a=1/0,o=1/0,s=-1/0,u=-1/0,l=0;l<i;l++)t=e[2*l],n=e[2*l+1],a=Math.min(a,t),s=Math.max(s,t),o=Math.min(o,n),u=Math.max(u,n);for(var f=2/(s-a),c=2/(u-o),d=0;d<i;d++)t=e[2*d]=e[2*d]*f,n=e[2*d+1]=e[2*d+1]*c,a=Math.min(a,t),s=Math.max(s,t),o=Math.min(o,n),u=Math.max(u,n);if(o<-1)for(var h=0;h<i;h++)n=e[2*h+1]=e[2*h+1]+(-1-o);return e},s2=function(e,t){var n=1/e*2*Math.PI,i=e%2===0?Math.PI/2+n/2:Math.PI/2;i+=t;for(var a=new Array(e*2),o,s=0;s<e;s++)o=s*n+i,a[2*s]=Math.cos(o),a[2*s+1]=Math.sin(-o);return a},Rh=function(e,t){return Math.min(e/4,t/4,8)},lw=function(e,t){return Math.min(e/10,t/10,8)},Ik=function(){return 8},LF=function(e,t,n){return[e-2*t+n,2*(t-e),e]},u2=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},NF=Ki({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),PF={pageRank:function(e){for(var t=NF(e),n=t.dampingFactor,i=t.precision,a=t.iterations,o=t.weight,s=this._private.cy,u=this.byGroup(),l=u.nodes,f=u.edges,c=l.length,d=c*c,h=f.length,p=new Array(d),g=new Array(c),b=(1-n)/c,v=0;v<c;v++){for(var y=0;y<c;y++){var m=v*c+y;p[m]=0}g[v]=0}for(var w=0;w<h;w++){var S=f[w],A=S.data("source"),_=S.data("target");if(A!==_){var E=l.indexOfId(A),k=l.indexOfId(_),M=o(S),T=k*c+E;p[T]+=M,g[E]+=M}}for(var C=1/c+b,R=0;R<c;R++)if(g[R]===0)for(var x=0;x<c;x++){var B=x*c+R;p[B]=C}else for(var D=0;D<c;D++){var O=D*c+R;p[O]=p[O]/g[R]+b}for(var G=new Array(c),V=new Array(c),I,z=0;z<c;z++)G[z]=1;for(var P=0;P<a;P++){for(var q=0;q<c;q++)V[q]=0;for(var F=0;F<c;F++)for(var U=0;U<c;U++){var W=F*c+U;V[F]+=p[W]*G[U]}dF(V),I=G,G=V,V=I;for(var X=0,te=0;te<c;te++){var ne=I[te]-G[te];X+=ne*ne}if(X<i)break}var he={rank:function(Ce){return Ce=s.collection(Ce)[0],G[l.indexOf(Ce)]}};return he}},p_=Ki({root:null,weight:function(e){return 1},directed:!1,alpha:0}),Lf={degreeCentralityNormalized:function(e){e=p_(e);var t=this.cy(),n=this.nodes(),i=n.length;if(e.directed){for(var f={},c={},d=0,h=0,p=0;p<i;p++){var g=n[p],b=g.id();e.root=g;var v=this.degreeCentrality(e);d<v.indegree&&(d=v.indegree),h<v.outdegree&&(h=v.outdegree),f[b]=v.indegree,c[b]=v.outdegree}return{indegree:function(m){return d==0?0:(pr(m)&&(m=t.filter(m)),f[m.id()]/d)},outdegree:function(m){return h===0?0:(pr(m)&&(m=t.filter(m)),c[m.id()]/h)}}}else{for(var a={},o=0,s=0;s<i;s++){var u=n[s];e.root=u;var l=this.degreeCentrality(e);o<l.degree&&(o=l.degree),a[u.id()]=l.degree}return{degree:function(m){return o===0?0:(pr(m)&&(m=t.filter(m)),a[m.id()]/o)}}}},degreeCentrality:function(e){e=p_(e);var t=this.cy(),n=this,i=e,a=i.root,o=i.weight,s=i.directed,u=i.alpha;if(a=t.collection(a)[0],s){for(var h=a.connectedEdges(),p=h.filter(function(A){return A.target().same(a)&&n.has(A)}),g=h.filter(function(A){return A.source().same(a)&&n.has(A)}),b=p.length,v=g.length,y=0,m=0,w=0;w<p.length;w++)y+=o(p[w]);for(var S=0;S<g.length;S++)m+=o(g[S]);return{indegree:Math.pow(b,1-u)*Math.pow(y,u),outdegree:Math.pow(v,1-u)*Math.pow(m,u)}}else{for(var l=a.connectedEdges().intersection(n),f=l.length,c=0,d=0;d<l.length;d++)c+=o(l[d]);return{degree:Math.pow(f,1-u)*Math.pow(c,u)}}}};Lf.dc=Lf.degreeCentrality;Lf.dcn=Lf.degreeCentralityNormalised=Lf.degreeCentralityNormalized;var v_=Ki({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Nf={closenessCentralityNormalized:function(e){for(var t=v_(e),n=t.harmonic,i=t.weight,a=t.directed,o=this.cy(),s={},u=0,l=this.nodes(),f=this.floydWarshall({weight:i,directed:a}),c=0;c<l.length;c++){for(var d=0,h=l[c],p=0;p<l.length;p++)if(c!==p){var g=f.distance(h,l[p]);n?d+=1/g:d+=g}n||(d=1/d),u<d&&(u=d),s[h.id()]=d}return{closeness:function(v){return u==0?0:(pr(v)?v=o.filter(v)[0].id():v=v.id(),s[v]/u)}}},closenessCentrality:function(e){var t=v_(e),n=t.root,i=t.weight,a=t.directed,o=t.harmonic;n=this.filter(n)[0];for(var s=this.dijkstra({root:n,weight:i,directed:a}),u=0,l=this.nodes(),f=0;f<l.length;f++){var c=l[f];if(!c.same(n)){var d=s.distanceTo(c);o?u+=1/d:u+=d}}return o?u:1/u}};Nf.cc=Nf.closenessCentrality;Nf.ccn=Nf.closenessCentralityNormalised=Nf.closenessCentralityNormalized;var MF=Ki({weight:null,directed:!1}),l2={betweennessCentrality:function(e){for(var t=MF(e),n=t.directed,i=t.weight,a=i!=null,o=this.cy(),s=this.nodes(),u={},l={},f=0,c={set:function(m,w){l[m]=w,w>f&&(f=w)},get:function(m){return l[m]}},d=0;d<s.length;d++){var h=s[d],p=h.id();n?u[p]=h.outgoers().nodes():u[p]=h.openNeighborhood().nodes(),c.set(p,0)}for(var g=function(m){for(var w=s[m].id(),S=[],A={},_={},E={},k=new Oh.default(function(U,W){return E[U]-E[W]}),M=0;M<s.length;M++){var T=s[M].id();A[T]=[],_[T]=0,E[T]=1/0}for(_[w]=1,E[w]=0,k.push(w);!k.empty();){var C=k.pop();if(S.push(C),a)for(var R=0;R<u[C].length;R++){var x=u[C][R],B=o.getElementById(C),D=void 0;B.edgesTo(x).length>0?D=B.edgesTo(x)[0]:D=x.edgesTo(B)[0];var O=i(D);x=x.id(),E[x]>E[C]+O&&(E[x]=E[C]+O,k.nodes.indexOf(x)<0?k.push(x):k.updateItem(x),_[x]=0,A[x]=[]),E[x]==E[C]+O&&(_[x]=_[x]+_[C],A[x].push(C))}else for(var G=0;G<u[C].length;G++){var V=u[C][G].id();E[V]==1/0&&(k.push(V),E[V]=E[C]+1),E[V]==E[C]+1&&(_[V]=_[V]+_[C],A[V].push(C))}}for(var I={},z=0;z<s.length;z++)I[s[z].id()]=0;for(;S.length>0;){for(var P=S.pop(),q=0;q<A[P].length;q++){var F=A[P][q];I[F]=I[F]+_[F]/_[P]*(1+I[P])}P!=s[m].id()&&c.set(P,c.get(P)+I[P])}},b=0;b<s.length;b++)g(b);var v={betweenness:function(m){var w=o.collection(m).id();return c.get(w)},betweennessNormalized:function(m){if(f==0)return 0;var w=o.collection(m).id();return c.get(w)/f}};return v.betweennessNormalised=v.betweennessNormalized,v}};l2.bc=l2.betweennessCentrality;var OF=Ki({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(r){return 1}]}),DF=function(e){return OF(e)},IF=function(e,t){for(var n=0,i=0;i<t.length;i++)n+=t[i](e);return n},RF=function(e,t,n){for(var i=0;i<t;i++)e[i*t+i]=n},Rk=function(e,t){for(var n,i=0;i<t;i++){n=0;for(var a=0;a<t;a++)n+=e[a*t+i];for(var o=0;o<t;o++)e[o*t+i]=e[o*t+i]/n}},FF=function(e,t,n){for(var i=new Array(n*n),a=0;a<n;a++){for(var o=0;o<n;o++)i[a*n+o]=0;for(var s=0;s<n;s++)for(var u=0;u<n;u++)i[a*n+u]+=e[a*n+s]*t[s*n+u]}return i},BF=function(e,t,n){for(var i=e.slice(0),a=1;a<n;a++)e=FF(e,i,t);return e},zF=function(e,t,n){for(var i=new Array(t*t),a=0;a<t*t;a++)i[a]=Math.pow(e[a],n);return Rk(i,t),i},qF=function(e,t,n,i){for(var a=0;a<n;a++){var o=Math.round(e[a]*Math.pow(10,i))/Math.pow(10,i),s=Math.round(t[a]*Math.pow(10,i))/Math.pow(10,i);if(o!==s)return!1}return!0},GF=function(e,t,n,i){for(var a=[],o=0;o<t;o++){for(var s=[],u=0;u<t;u++)Math.round(e[o*t+u]*1e3)/1e3>0&&s.push(n[u]);s.length!==0&&a.push(i.collection(s))}return a},$F=function(e,t){for(var n=0;n<e.length;n++)if(!t[n]||e[n].id()!==t[n].id())return!1;return!0},UF=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)t!=n&&$F(e[t],e[n])&&e.splice(n,1);return e},g_=function(e){for(var t=this.nodes(),n=this.edges(),i=this.cy(),a=DF(e),o={},s=0;s<t.length;s++)o[t[s].id()]=s;for(var u=t.length,l=u*u,f=new Array(l),c,d=0;d<l;d++)f[d]=0;for(var h=0;h<n.length;h++){var p=n[h],g=o[p.source().id()],b=o[p.target().id()],v=IF(p,a.attributes);f[g*u+b]+=v,f[b*u+g]+=v}RF(f,u,a.multFactor),Rk(f,u);for(var y=!0,m=0;y&&m<a.maxIterations;)y=!1,c=BF(f,u,a.expandFactor),f=zF(c,u,a.inflateFactor),qF(f,c,l,4)||(y=!0),m++;var w=GF(f,u,t,i);return w=UF(w),w},HF={markovClustering:g_,mcl:g_},jF=function(e){return e},Fk=function(e,t){return Math.abs(t-e)},m_=function(e,t,n){return e+Fk(t,n)},y_=function(e,t,n){return e+Math.pow(n-t,2)},VF=function(e){return Math.sqrt(e)},WF=function(e,t,n){return Math.max(e,Fk(t,n))},Lc=function(e,t,n,i,a){for(var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:jF,s=i,u,l,f=0;f<e;f++)u=t(f),l=n(f),s=a(s,u,l);return o(s)},zf={euclidean:function(e,t,n){return e>=2?Lc(e,t,n,0,y_,VF):Lc(e,t,n,0,m_)},squaredEuclidean:function(e,t,n){return Lc(e,t,n,0,y_)},manhattan:function(e,t,n){return Lc(e,t,n,0,m_)},max:function(e,t,n){return Lc(e,t,n,-1/0,WF)}};zf["squared-euclidean"]=zf.squaredEuclidean;zf.squaredeuclidean=zf.squaredEuclidean;function Qp(r,e,t,n,i,a){var o;return ii(r)?o=r:o=zf[r]||zf.euclidean,e===0&&ii(r)?o(i,a):o(e,t,n,i,a)}var YF=Ki({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),fw=function(e){return YF(e)},bp=function(e,t,n,i,a){var o=a!=="kMedoids",s=o?function(c){return n[c]}:function(c){return i[c](n)},u=function(d){return i[d](t)},l=n,f=t;return Qp(e,i.length,s,u,l,f)},Vg=function(e,t,n){for(var i=n.length,a=new Array(i),o=new Array(i),s=new Array(t),u=null,l=0;l<i;l++)a[l]=e.min(n[l]).value,o[l]=e.max(n[l]).value;for(var f=0;f<t;f++){u=[];for(var c=0;c<i;c++)u[c]=Math.random()*(o[c]-a[c])+a[c];s[f]=u}return s},Bk=function(e,t,n,i,a){for(var o=1/0,s=0,u=0;u<t.length;u++){var l=bp(n,e,t[u],i,a);l<o&&(o=l,s=u)}return s},zk=function(e,t,n){for(var i=[],a=null,o=0;o<t.length;o++)a=t[o],n[a.id()]===e&&i.push(a);return i},XF=function(e,t,n){return Math.abs(t-e)<=n},KF=function(e,t,n){for(var i=0;i<e.length;i++)for(var a=0;a<e[i].length;a++){var o=Math.abs(e[i][a]-t[i][a]);if(o>n)return!1}return!0},ZF=function(e,t,n){for(var i=0;i<n;i++)if(e===t[i])return!0;return!1},b_=function(e,t){var n=new Array(t);if(e.length<50)for(var i=0;i<t;i++){for(var a=e[Math.floor(Math.random()*e.length)];ZF(a,n,i);)a=e[Math.floor(Math.random()*e.length)];n[i]=a}else for(var o=0;o<t;o++)n[o]=e[Math.floor(Math.random()*e.length)];return n},w_=function(e,t,n){for(var i=0,a=0;a<t.length;a++)i+=bp("manhattan",t[a],e,n,"kMedoids");return i},QF=function(e){var t=this.cy(),n=this.nodes(),i=null,a=fw(e),o=new Array(a.k),s={},u;a.testMode?typeof a.testCentroids=="number"?(a.testCentroids,u=Vg(n,a.k,a.attributes)):Pi(a.testCentroids)==="object"?u=a.testCentroids:u=Vg(n,a.k,a.attributes):u=Vg(n,a.k,a.attributes);for(var l=!0,f=0;l&&f<a.maxIterations;){for(var c=0;c<n.length;c++)i=n[c],s[i.id()]=Bk(i,u,a.distance,a.attributes,"kMeans");l=!1;for(var d=0;d<a.k;d++){var h=zk(d,n,s);if(h.length!==0){for(var p=a.attributes.length,g=u[d],b=new Array(p),v=new Array(p),y=0;y<p;y++){v[y]=0;for(var m=0;m<h.length;m++)i=h[m],v[y]+=a.attributes[y](i);b[y]=v[y]/h.length,XF(b[y],g[y],a.sensitivityThreshold)||(l=!0)}u[d]=b,o[d]=t.collection(h)}}f++}return o},JF=function(e){var t=this.cy(),n=this.nodes(),i=null,a=fw(e),o=new Array(a.k),s,u={},l,f=new Array(a.k);a.testMode?typeof a.testCentroids=="number"||(Pi(a.testCentroids)==="object"?s=a.testCentroids:s=b_(n,a.k)):s=b_(n,a.k);for(var c=!0,d=0;c&&d<a.maxIterations;){for(var h=0;h<n.length;h++)i=n[h],u[i.id()]=Bk(i,s,a.distance,a.attributes,"kMedoids");c=!1;for(var p=0;p<s.length;p++){var g=zk(p,n,u);if(g.length!==0){f[p]=w_(s[p],g,a.attributes);for(var b=0;b<g.length;b++)l=w_(g[b],g,a.attributes),l<f[p]&&(f[p]=l,s[p]=g[b],c=!0);o[p]=t.collection(g)}}d++}return o},e8=function(e,t,n,i,a){for(var o,s,u=0;u<t.length;u++)for(var l=0;l<e.length;l++)i[u][l]=Math.pow(n[u][l],a.m);for(var f=0;f<e.length;f++)for(var c=0;c<a.attributes.length;c++){o=0,s=0;for(var d=0;d<t.length;d++)o+=i[d][f]*a.attributes[c](t[d]),s+=i[d][f];e[f][c]=o/s}},t8=function(e,t,n,i,a){for(var o=0;o<e.length;o++)t[o]=e[o].slice();for(var s,u,l,f=2/(a.m-1),c=0;c<n.length;c++)for(var d=0;d<i.length;d++){s=0;for(var h=0;h<n.length;h++)u=bp(a.distance,i[d],n[c],a.attributes,"cmeans"),l=bp(a.distance,i[d],n[h],a.attributes,"cmeans"),s+=Math.pow(u/l,f);e[d][c]=1/s}},r8=function(e,t,n,i){for(var a=new Array(n.k),o=0;o<a.length;o++)a[o]=[];for(var s,u,l=0;l<t.length;l++){s=-1/0,u=-1;for(var f=0;f<t[0].length;f++)t[l][f]>s&&(s=t[l][f],u=f);a[u].push(e[l])}for(var c=0;c<a.length;c++)a[c]=i.collection(a[c]);return a},__=function(e){var t=this.cy(),n=this.nodes(),i=fw(e),a,o,s,u,l;u=new Array(n.length);for(var f=0;f<n.length;f++)u[f]=new Array(i.k);s=new Array(n.length);for(var c=0;c<n.length;c++)s[c]=new Array(i.k);for(var d=0;d<n.length;d++){for(var h=0,p=0;p<i.k;p++)s[d][p]=Math.random(),h+=s[d][p];for(var g=0;g<i.k;g++)s[d][g]=s[d][g]/h}o=new Array(i.k);for(var b=0;b<i.k;b++)o[b]=new Array(i.attributes.length);l=new Array(n.length);for(var v=0;v<n.length;v++)l[v]=new Array(i.k);for(var y=!0,m=0;y&&m<i.maxIterations;)y=!1,e8(o,n,s,l,i),t8(s,u,o,n,i),KF(s,u,i.sensitivityThreshold)||(y=!0),m++;return a=r8(n,s,i,t),{clusters:a,degreeOfMembership:s}},n8={kMeans:QF,kMedoids:JF,fuzzyCMeans:__,fcm:__},i8=Ki({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),a8={single:"min",complete:"max"},o8=function(e){var t=i8(e),n=a8[t.linkage];return n!=null&&(t.linkage=n),t},x_=function(e,t,n,i,a){for(var o=0,s=1/0,u,l=a.attributes,f=function(k,M){return Qp(a.distance,l.length,function(T){return l[T](k)},function(T){return l[T](M)},k,M)},c=0;c<e.length;c++){var d=e[c].key,h=n[d][i[d]];h<s&&(o=d,s=h)}if(a.mode==="threshold"&&s>=a.threshold||a.mode==="dendrogram"&&e.length===1)return!1;var p=t[o],g=t[i[o]],b;a.mode==="dendrogram"?b={left:p,right:g,key:p.key}:b={value:p.value.concat(g.value),key:p.key},e[p.index]=b,e.splice(g.index,1),t[p.key]=b;for(var v=0;v<e.length;v++){var y=e[v];p.key===y.key?u=1/0:a.linkage==="min"?(u=n[p.key][y.key],n[p.key][y.key]>n[g.key][y.key]&&(u=n[g.key][y.key])):a.linkage==="max"?(u=n[p.key][y.key],n[p.key][y.key]<n[g.key][y.key]&&(u=n[g.key][y.key])):a.linkage==="mean"?u=(n[p.key][y.key]*p.size+n[g.key][y.key]*g.size)/(p.size+g.size):a.mode==="dendrogram"?u=f(y.value,p.value):u=f(y.value[0],p.value[0]),n[p.key][y.key]=n[y.key][p.key]=u}for(var m=0;m<e.length;m++){var w=e[m].key;if(i[w]===p.key||i[w]===g.key){for(var S=w,A=0;A<e.length;A++){var _=e[A].key;n[w][_]<n[w][S]&&(S=_)}i[w]=S}e[m].index=m}return p.key=g.key=p.index=g.index=null,!0},Cd=function r(e,t,n){e&&(e.value?t.push(e.value):(e.left&&r(e.left,t),e.right&&r(e.right,t)))},s8=function r(e,t){if(!e)return"";if(e.left&&e.right){var n=r(e.left,t),i=r(e.right,t),a=t.add({group:"nodes",data:{id:n+","+i}});return t.add({group:"edges",data:{source:n,target:a.id()}}),t.add({group:"edges",data:{source:i,target:a.id()}}),a.id()}else if(e.value)return e.value.id()},u8=function r(e,t,n){if(!e)return[];var i=[],a=[],o=[];return t===0?(e.left&&Cd(e.left,i),e.right&&Cd(e.right,a),o=i.concat(a),[n.collection(o)]):t===1?e.value?[n.collection(e.value)]:(e.left&&Cd(e.left,i),e.right&&Cd(e.right,a),[n.collection(i),n.collection(a)]):e.value?[n.collection(e.value)]:(e.left&&(i=r(e.left,t-1,n)),e.right&&(a=r(e.right,t-1,n)),i.concat(a))},S_=function(e){for(var t=this.cy(),n=this.nodes(),i=o8(e),a=i.attributes,o=function(m,w){return Qp(i.distance,a.length,function(S){return a[S](m)},function(S){return a[S](w)},m,w)},s=[],u=[],l=[],f=[],c=0;c<n.length;c++){var d={value:i.mode==="dendrogram"?n[c]:[n[c]],key:c,index:c};s[c]=d,f[c]=d,u[c]=[],l[c]=0}for(var h=0;h<s.length;h++)for(var p=0;p<=h;p++){var g=void 0;i.mode==="dendrogram"?g=h===p?1/0:o(s[h].value,s[p].value):g=h===p?1/0:o(s[h].value[0],s[p].value[0]),u[h][p]=g,u[p][h]=g,g<u[h][l[h]]&&(l[h]=p)}for(var b=x_(s,f,u,l,i);b;)b=x_(s,f,u,l,i);var v;return i.mode==="dendrogram"?(v=u8(s[0],i.dendrogramDepth,t),i.addDendrogram&&s8(s[0],t)):(v=new Array(s.length),s.forEach(function(y,m){y.key=y.index=null,v[m]=t.collection(y.value)})),v},l8={hierarchicalClustering:S_,hca:S_},f8=Ki({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),c8=function(e){var t=e.damping,n=e.preference;.5<=t&&t<1||ui("Damping must range on [0.5, 1).  Got: ".concat(t));var i=["median","mean","min","max"];return i.some(function(a){return a===n})||Ht(n)||ui("Preference must be one of [".concat(i.map(function(a){return"'".concat(a,"'")}).join(", "),"] or a number.  Got: ").concat(n)),f8(e)},h8=function(e,t,n,i){var a=function(s,u){return i[u](s)};return-Qp(e,i.length,function(o){return a(t,o)},function(o){return a(n,o)},t,n)},d8=function(e,t){var n=null;return t==="median"?n=cF(e):t==="mean"?n=fF(e):t==="min"?n=uF(e):t==="max"?n=lF(e):n=t,n},p8=function(e,t,n){for(var i=[],a=0;a<e;a++)t[a*e+a]+n[a*e+a]>0&&i.push(a);return i},E_=function(e,t,n){for(var i=[],a=0;a<e;a++){for(var o=-1,s=-1/0,u=0;u<n.length;u++){var l=n[u];t[a*e+l]>s&&(o=l,s=t[a*e+l])}o>0&&i.push(o)}for(var f=0;f<n.length;f++)i[n[f]]=n[f];return i},v8=function(e,t,n){for(var i=E_(e,t,n),a=0;a<n.length;a++){for(var o=[],s=0;s<i.length;s++)i[s]===n[a]&&o.push(s);for(var u=-1,l=-1/0,f=0;f<o.length;f++){for(var c=0,d=0;d<o.length;d++)c+=t[o[d]*e+o[f]];c>l&&(u=f,l=c)}n[a]=o[u]}return i=E_(e,t,n),i},C_=function(e){for(var t=this.cy(),n=this.nodes(),i=c8(e),a={},o=0;o<n.length;o++)a[n[o].id()]=o;var s,u,l,f,c,d;s=n.length,u=s*s,l=new Array(u);for(var h=0;h<u;h++)l[h]=-1/0;for(var p=0;p<s;p++)for(var g=0;g<s;g++)p!==g&&(l[p*s+g]=h8(i.distance,n[p],n[g],i.attributes));f=d8(l,i.preference);for(var b=0;b<s;b++)l[b*s+b]=f;c=new Array(u);for(var v=0;v<u;v++)c[v]=0;d=new Array(u);for(var y=0;y<u;y++)d[y]=0;for(var m=new Array(s),w=new Array(s),S=new Array(s),A=0;A<s;A++)m[A]=0,w[A]=0,S[A]=0;for(var _=new Array(s*i.minIterations),E=0;E<_.length;E++)_[E]=0;var k;for(k=0;k<i.maxIterations;k++){for(var M=0;M<s;M++){for(var T=-1/0,C=-1/0,R=-1,x=0,B=0;B<s;B++)m[B]=c[M*s+B],x=d[M*s+B]+l[M*s+B],x>=T?(C=T,T=x,R=B):x>C&&(C=x);for(var D=0;D<s;D++)c[M*s+D]=(1-i.damping)*(l[M*s+D]-T)+i.damping*m[D];c[M*s+R]=(1-i.damping)*(l[M*s+R]-C)+i.damping*m[R]}for(var O=0;O<s;O++){for(var G=0,V=0;V<s;V++)m[V]=d[V*s+O],w[V]=Math.max(0,c[V*s+O]),G+=w[V];G-=w[O],w[O]=c[O*s+O],G+=w[O];for(var I=0;I<s;I++)d[I*s+O]=(1-i.damping)*Math.min(0,G-w[I])+i.damping*m[I];d[O*s+O]=(1-i.damping)*(G-w[O])+i.damping*m[O]}for(var z=0,P=0;P<s;P++){var q=d[P*s+P]+c[P*s+P]>0?1:0;_[k%i.minIterations*s+P]=q,z+=q}if(z>0&&(k>=i.minIterations-1||k==i.maxIterations-1)){for(var F=0,U=0;U<s;U++){S[U]=0;for(var W=0;W<i.minIterations;W++)S[U]+=_[W*s+U];(S[U]===0||S[U]===i.minIterations)&&F++}if(F===s)break}}for(var X=p8(s,c,d),te=v8(s,l,X),ne={},he=0;he<X.length;he++)ne[X[he]]=[];for(var ve=0;ve<n.length;ve++){var Ce=a[n[ve].id()],Le=te[Ce];Le!=null&&ne[Le].push(n[ve])}for(var K=new Array(X.length),le=0;le<X.length;le++)K[le]=t.collection(ne[X[le]]);return K},g8={affinityPropagation:C_,ap:C_},m8=Ki({root:void 0,directed:!1}),y8={hierholzer:function(e){if(!on(e)){var t=arguments;e={root:t[0],directed:t[1]}}var n=m8(e),i=n.root,a=n.directed,o=this,s=!1,u,l,f;i&&(f=pr(i)?this.filter(i)[0].id():i[0].id());var c={},d={};a?o.forEach(function(y){var m=y.id();if(y.isNode()){var w=y.indegree(!0),S=y.outdegree(!0),A=w-S,_=S-w;A==1?u?s=!0:u=m:_==1?l?s=!0:l=m:(_>1||A>1)&&(s=!0),c[m]=[],y.outgoers().forEach(function(E){E.isEdge()&&c[m].push(E.id())})}else d[m]=[void 0,y.target().id()]}):o.forEach(function(y){var m=y.id();if(y.isNode()){var w=y.degree(!0);w%2&&(u?l?s=!0:l=m:u=m),c[m]=[],y.connectedEdges().forEach(function(S){return c[m].push(S.id())})}else d[m]=[y.source().id(),y.target().id()]});var h={found:!1,trail:void 0};if(s)return h;if(l&&u)if(a){if(f&&l!=f)return h;f=l}else{if(f&&l!=f&&u!=f)return h;f||(f=l)}else f||(f=o[0].id());var p=function(m){for(var w=m,S=[m],A,_,E;c[w].length;)A=c[w].shift(),_=d[A][0],E=d[A][1],w!=E?(c[E]=c[E].filter(function(k){return k!=A}),w=E):!a&&w!=_&&(c[_]=c[_].filter(function(k){return k!=A}),w=_),S.unshift(A),S.unshift(w);return S},g=[],b=[];for(b=p(f);b.length!=1;)c[b[0]].length==0?(g.unshift(o.getElementById(b.shift())),g.unshift(o.getElementById(b.shift()))):b=p(b.shift()).concat(b);g.unshift(o.getElementById(b.shift()));for(var v in c)if(c[v].length)return h;return h.found=!0,h.trail=this.spawn(g,!0),h}},Ad=function(){var e=this,t={},n=0,i=0,a=[],o=[],s={},u=function(d,h){for(var p=o.length-1,g=[],b=e.spawn();o[p].x!=d||o[p].y!=h;)g.push(o.pop().edge),p--;g.push(o.pop().edge),g.forEach(function(v){var y=v.connectedNodes().intersection(e);b.merge(v),y.forEach(function(m){var w=m.id(),S=m.connectedEdges().intersection(e);b.merge(m),t[w].cutVertex?b.merge(S.filter(function(A){return A.isLoop()})):b.merge(S)})}),a.push(b)},l=function c(d,h,p){d===p&&(i+=1),t[h]={id:n,low:n++,cutVertex:!1};var g=e.getElementById(h).connectedEdges().intersection(e);if(g.size()===0)a.push(e.spawn(e.getElementById(h)));else{var b,v,y,m;g.forEach(function(w){b=w.source().id(),v=w.target().id(),y=b===h?v:b,y!==p&&(m=w.id(),s[m]||(s[m]=!0,o.push({x:h,y,edge:w})),y in t?t[h].low=Math.min(t[h].low,t[y].id):(c(d,y,h),t[h].low=Math.min(t[h].low,t[y].low),t[h].id<=t[y].low&&(t[h].cutVertex=!0,u(h,y))))})}};e.forEach(function(c){if(c.isNode()){var d=c.id();d in t||(i=0,l(d,d),t[d].cutVertex=i>1)}});var f=Object.keys(t).filter(function(c){return t[c].cutVertex}).map(function(c){return e.getElementById(c)});return{cut:e.spawn(f),components:a}},b8={hopcroftTarjanBiconnected:Ad,htbc:Ad,htb:Ad,hopcroftTarjanBiconnectedComponents:Ad},Td=function(){var e=this,t={},n=0,i=[],a=[],o=e.spawn(e),s=function u(l){a.push(l),t[l]={index:n,low:n++,explored:!1};var f=e.getElementById(l).connectedEdges().intersection(e);if(f.forEach(function(g){var b=g.target().id();b!==l&&(b in t||u(b),t[b].explored||(t[l].low=Math.min(t[l].low,t[b].low)))}),t[l].index===t[l].low){for(var c=e.spawn();;){var d=a.pop();if(c.merge(e.getElementById(d)),t[d].low=t[l].index,t[d].explored=!0,d===l)break}var h=c.edgesWith(c),p=c.merge(h);i.push(p),o=o.difference(p)}};return e.forEach(function(u){if(u.isNode()){var l=u.id();l in t||s(l)}}),{cut:o,components:i}},w8={tarjanStronglyConnected:Td,tsc:Td,tscc:Td,tarjanStronglyConnectedComponents:Td},qk={};[ph,K6,Z6,J6,tF,nF,oF,PF,Lf,Nf,l2,HF,n8,l8,g8,y8,b8,w8].forEach(function(r){Sr(qk,r)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var Gk=0,$k=1,Uk=2,Is=function r(e){if(!(this instanceof r))return new r(e);this.id="Thenable/1.0.7",this.state=Gk,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};Is.prototype={fulfill:function(e){return A_(this,$k,"fulfillValue",e)},reject:function(e){return A_(this,Uk,"rejectReason",e)},then:function(e,t){var n=this,i=new Is;return n.onFulfilled.push(k_(e,i,"fulfill")),n.onRejected.push(k_(t,i,"reject")),Hk(n),i.proxy}};var A_=function(e,t,n,i){return e.state===Gk&&(e.state=t,e[n]=i,Hk(e)),e},Hk=function(e){e.state===$k?T_(e,"onFulfilled",e.fulfillValue):e.state===Uk&&T_(e,"onRejected",e.rejectReason)},T_=function(e,t,n){if(e[t].length!==0){var i=e[t];e[t]=[];var a=function(){for(var s=0;s<i.length;s++)i[s](n)};typeof setImmediate=="function"?setImmediate(a):setTimeout(a,0)}},k_=function(e,t,n){return function(i){if(typeof e!="function")t[n].call(t,i);else{var a;try{a=e(i)}catch(o){t.reject(o);return}_8(t,a)}}},_8=function r(e,t){if(e===t||e.proxy===t){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(Pi(t)==="object"&&t!==null||typeof t=="function")try{n=t.then}catch(a){e.reject(a);return}if(typeof n=="function"){var i=!1;try{n.call(t,function(a){i||(i=!0,a===t?e.reject(new TypeError("circular thenable chain")):r(e,a))},function(a){i||(i=!0,e.reject(a))})}catch(a){i||e.reject(a)}return}e.fulfill(t)};Is.all=function(r){return new Is(function(e,t){for(var n=new Array(r.length),i=0,a=function(u,l){n[u]=l,i++,i===r.length&&e(n)},o=0;o<r.length;o++)(function(s){var u=r[s],l=u!=null&&u.then!=null;if(l)u.then(function(c){a(s,c)},function(c){t(c)});else{var f=u;a(s,f)}})(o)})};Is.resolve=function(r){return new Is(function(e,t){e(r)})};Is.reject=function(r){return new Is(function(e,t){t(r)})};var Jf=typeof Promise<"u"?Promise:Is,f2=function(e,t,n){var i=rw(e),a=!i,o=this._private=Sr({duration:1e3},t,n);if(o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&ii(o.complete)&&o.completes.push(o.complete),a){var s=e.position();o.startPosition=o.startPosition||{x:s.x,y:s.y},o.startStyle=o.startStyle||e.cy().style().getAnimationStartStyle(e,o.style)}if(i){var u=e.pan();o.startPan={x:u.x,y:u.y},o.startZoom=e.zoom()}this.length=1,this[0]=this},wl=f2.prototype;Sr(wl,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t,n=e.target._private.animation;e.queue?t=n.queue:t=n.current,t.push(this),Ha(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return e===void 0?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return e===void 0?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(l,f){var c=e[l];c!=null&&(e[l]=e[f],e[f]=c)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var i=0;i<e.style.length;i++){var a=e.style[i],o=a.name,s=e.startStyle[o];e.startStyle[o]=a,e.style[i]=s}return t&&this.play(),this},promise:function(e){var t=this._private,n;switch(e){case"frame":n=t.frames;break;default:case"complete":case"completed":n=t.completes}return new Jf(function(i,a){n.push(function(){i()})})}});wl.complete=wl.completed;wl.run=wl.play;wl.running=wl.playing;var x8={animated:function(){return function(){var t=this,n=t.length!==void 0,i=n?t:[t],a=this._private.cy||this;if(!a.styleEnabled())return!1;var o=i[0];if(o)return o._private.animation.current.length>0}},clearQueue:function(){return function(){var t=this,n=t.length!==void 0,i=n?t:[t],a=this._private.cy||this;if(!a.styleEnabled())return this;for(var o=0;o<i.length;o++){var s=i[o];s._private.animation.queue=[]}return this}},delay:function(){return function(t,n){var i=this._private.cy||this;return i.styleEnabled()?this.animate({delay:t,duration:t,complete:n}):this}},delayAnimation:function(){return function(t,n){var i=this._private.cy||this;return i.styleEnabled()?this.animation({delay:t,duration:t,complete:n}):this}},animation:function(){return function(t,n){var i=this,a=i.length!==void 0,o=a?i:[i],s=this._private.cy||this,u=!a,l=!u;if(!s.styleEnabled())return this;var f=s.style();t=Sr({},t,n);var c=Object.keys(t).length===0;if(c)return new f2(o[0],t);switch(t.duration===void 0&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200;break}if(l&&(t.style=f.getPropsList(t.style||t.css),t.css=void 0),l&&t.renderedPosition!=null){var d=t.renderedPosition,h=s.pan(),p=s.zoom();t.position=kk(d,p,h)}if(u&&t.panBy!=null){var g=t.panBy,b=s.pan();t.pan={x:b.x+g.x,y:b.y+g.y}}var v=t.center||t.centre;if(u&&v!=null){var y=s.getCenterPan(v.eles,t.zoom);y!=null&&(t.pan=y)}if(u&&t.fit!=null){var m=t.fit,w=s.getFitViewport(m.eles||m.boundingBox,m.padding);w!=null&&(t.pan=w.pan,t.zoom=w.zoom)}if(u&&on(t.zoom)){var S=s.getZoomedViewport(t.zoom);S!=null?(S.zoomed&&(t.zoom=S.zoom),S.panned&&(t.pan=S.pan)):t.zoom=null}return new f2(o[0],t)}},animate:function(){return function(t,n){var i=this,a=i.length!==void 0,o=a?i:[i],s=this._private.cy||this;if(!s.styleEnabled())return this;n&&(t=Sr({},t,n));for(var u=0;u<o.length;u++){var l=o[u],f=l.animated()&&(t.queue===void 0||t.queue),c=l.animation(t,f?{queue:!0}:void 0);c.play()}return this}},stop:function(){return function(t,n){var i=this,a=i.length!==void 0,o=a?i:[i],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var u=0;u<o.length;u++){for(var l=o[u],f=l._private,c=f.animation.current,d=0;d<c.length;d++){var h=c[d],p=h._private;n&&(p.duration=0)}t&&(f.animation.queue=[]),n||(f.animation.current=[])}return s.notify("draw"),this}}},S8={data:function(e){var t={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(i){},beforeSet:function(i,a){},onSet:function(i){},canSet:function(i){return!0}};return e=Sr({},t,e),function(i,a){var o=e,s=this,u=s.length!==void 0,l=u?s:[s],f=u?s[0]:s;if(pr(i)){var c=i.indexOf(".")!==-1,d=c&&u6.default(i);if(o.allowGetting&&a===void 0){var h;return f&&(o.beforeGet(f),d&&f._private[o.field][i]===void 0?h=o6.default(f._private[o.field],d):h=f._private[o.field][i]),h}else if(o.allowSetting&&a!==void 0){var p=!o.immutableKeys[i];if(p){var g=hk({},i,a);o.beforeSet(s,g);for(var b=0,v=l.length;b<v;b++){var y=l[b];o.canSet(y)&&(d&&f._private[o.field][i]===void 0?s6.default(y._private[o.field],d,a):y._private[o.field][i]=a)}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}}}else if(o.allowSetting&&on(i)){var m=i,w,S,A=Object.keys(m);o.beforeSet(s,m);for(var _=0;_<A.length;_++){w=A[_],S=m[w];var E=!o.immutableKeys[w];if(E)for(var k=0;k<l.length;k++){var M=l[k];o.canSet(M)&&(M._private[o.field][w]=S)}}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}else if(o.allowBinding&&ii(i)){var T=i;s.on(o.bindingEvent,T)}else if(o.allowGetting&&i===void 0){var C;return f&&(o.beforeGet(f),C=f._private[o.field]),C}return s}},removeData:function(e){var t={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=Sr({},t,e),function(i){var a=e,o=this,s=o.length!==void 0,u=s?o:[o];if(pr(i)){for(var l=i.split(/\s+/),f=l.length,c=0;c<f;c++){var d=l[c];if(!Tu(d)){var h=!a.immutableKeys[d];if(h)for(var p=0,g=u.length;p<g;p++)u[p]._private[a.field][d]=void 0}}a.triggerEvent&&o[a.triggerFnName](a.event)}else if(i===void 0){for(var b=0,v=u.length;b<v;b++)for(var y=u[b]._private[a.field],m=Object.keys(y),w=0;w<m.length;w++){var S=m[w],A=!a.immutableKeys[S];A&&(y[S]=void 0)}a.triggerEvent&&o[a.triggerFnName](a.event)}return o}}},E8={eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(n,i){var a=this,o=Array.prototype.slice.call(arguments,0);return new Jf(function(s,u){var l=function(h){a.off.apply(a,c),s(h)},f=o.concat([l]),c=f.concat([]);a.on.apply(a,f)})}}},pn={};[x8,S8,E8].forEach(function(r){Sr(pn,r)});var C8={animate:pn.animate(),animation:pn.animation(),animated:pn.animated(),clearQueue:pn.clearQueue(),delay:pn.delay(),delayAnimation:pn.delayAnimation(),stop:pn.stop()},Jd={classes:function(e){var t=this;if(e===void 0){var n=[];return t[0]._private.classes.forEach(function(p){return n.push(p)}),n}else In(e)||(e=(e||"").match(/\S+/g)||[]);for(var i=[],a=new Qf(e),o=0;o<t.length;o++){for(var s=t[o],u=s._private,l=u.classes,f=!1,c=0;c<e.length;c++){var d=e[c],h=l.has(d);if(!h){f=!0;break}}f||(f=l.size!==e.length),f&&(u.classes=a,i.push(s))}return i.length>0&&this.spawn(i).updateStyle().emit("class"),t},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return t!=null&&t._private.classes.has(e)},toggleClass:function(e,t){In(e)||(e=e.match(/\S+/g)||[]);for(var n=this,i=t===void 0,a=[],o=0,s=n.length;o<s;o++)for(var u=n[o],l=u._private.classes,f=!1,c=0;c<e.length;c++){var d=e[c],h=l.has(d),p=!1;t||i&&!h?(l.add(d),p=!0):(!t||i&&h)&&(l.delete(d),p=!0),!f&&p&&(a.push(u),f=!0)}return a.length>0&&this.spawn(a).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(t==null)t=250;else if(t===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}};Jd.className=Jd.classNames=Jd.classes;var an={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:Ni,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};an.variable="(?:[\\w-.]|(?:\\\\"+an.metaChar+"))+";an.className="(?:[\\w-]|(?:\\\\"+an.metaChar+"))+";an.value=an.string+"|"+an.number;an.id=an.variable;(function(){var r,e,t;for(r=an.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],an.comparatorOp+="|@"+e;for(r=an.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],!(e.indexOf("!")>=0)&&e!=="="&&(an.comparatorOp+="|\\!"+e)})();var An=function(){return{checks:[]}},ar={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},c2=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(r,e){return L6(r.selector,e.selector)}),A8=function(){for(var r={},e,t=0;t<c2.length;t++)e=c2[t],r[e.selector]=e.matches;return r}(),T8=function(e,t){return A8[e](t)},k8="("+c2.map(function(r){return r.selector}).join("|")+")",af=function(e){return e.replace(new RegExp("\\\\("+an.metaChar+")","g"),function(t,n){return n})},fu=function(e,t,n){e[e.length-1]=n},h2=[{name:"group",query:!0,regex:"("+an.group+")",populate:function(e,t,n){var i=xs(n,1),a=i[0];t.checks.push({type:ar.GROUP,value:a==="*"?a:a+"s"})}},{name:"state",query:!0,regex:k8,populate:function(e,t,n){var i=xs(n,1),a=i[0];t.checks.push({type:ar.STATE,value:a})}},{name:"id",query:!0,regex:"\\#("+an.id+")",populate:function(e,t,n){var i=xs(n,1),a=i[0];t.checks.push({type:ar.ID,value:af(a)})}},{name:"className",query:!0,regex:"\\.("+an.className+")",populate:function(e,t,n){var i=xs(n,1),a=i[0];t.checks.push({type:ar.CLASS,value:af(a)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+an.variable+")\\s*\\]",populate:function(e,t,n){var i=xs(n,1),a=i[0];t.checks.push({type:ar.DATA_EXIST,field:af(a)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+an.variable+")\\s*("+an.comparatorOp+")\\s*("+an.value+")\\s*\\]",populate:function(e,t,n){var i=xs(n,3),a=i[0],o=i[1],s=i[2],u=new RegExp("^"+an.string+"$").exec(s)!=null;u?s=s.substring(1,s.length-1):s=parseFloat(s),t.checks.push({type:ar.DATA_COMPARE,field:af(a),operator:o,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+an.boolOp+")\\s*("+an.variable+")\\s*\\]",populate:function(e,t,n){var i=xs(n,2),a=i[0],o=i[1];t.checks.push({type:ar.DATA_BOOL,field:af(o),operator:a})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+an.meta+")\\s*("+an.comparatorOp+")\\s*("+an.number+")\\s*\\]\\]",populate:function(e,t,n){var i=xs(n,3),a=i[0],o=i[1],s=i[2];t.checks.push({type:ar.META_COMPARE,field:af(a),operator:o,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:an.separator,populate:function(e,t){var n=e.currentSubject,i=e.edgeCount,a=e.compoundCount,o=e[e.length-1];n!=null&&(o.subject=n,e.currentSubject=null),o.edgeCount=i,o.compoundCount=a,e.edgeCount=0,e.compoundCount=0;var s=e[e.length++]=An();return s}},{name:"directedEdge",separator:!0,regex:an.directedEdge,populate:function(e,t){if(e.currentSubject==null){var n=An(),i=t,a=An();return n.checks.push({type:ar.DIRECTED_EDGE,source:i,target:a}),fu(e,t,n),e.edgeCount++,a}else{var o=An(),s=t,u=An();return o.checks.push({type:ar.NODE_SOURCE,source:s,target:u}),fu(e,t,o),e.edgeCount++,u}}},{name:"undirectedEdge",separator:!0,regex:an.undirectedEdge,populate:function(e,t){if(e.currentSubject==null){var n=An(),i=t,a=An();return n.checks.push({type:ar.UNDIRECTED_EDGE,nodes:[i,a]}),fu(e,t,n),e.edgeCount++,a}else{var o=An(),s=t,u=An();return o.checks.push({type:ar.NODE_NEIGHBOR,node:s,neighbor:u}),fu(e,t,o),u}}},{name:"child",separator:!0,regex:an.child,populate:function(e,t){if(e.currentSubject==null){var n=An(),i=An(),a=e[e.length-1];return n.checks.push({type:ar.CHILD,parent:a,child:i}),fu(e,t,n),e.compoundCount++,i}else if(e.currentSubject===t){var o=An(),s=e[e.length-1],u=An(),l=An(),f=An(),c=An();return o.checks.push({type:ar.COMPOUND_SPLIT,left:s,right:u,subject:l}),l.checks=t.checks,t.checks=[{type:ar.TRUE}],c.checks.push({type:ar.TRUE}),u.checks.push({type:ar.PARENT,parent:c,child:f}),fu(e,s,o),e.currentSubject=l,e.compoundCount++,f}else{var d=An(),h=An(),p=[{type:ar.PARENT,parent:d,child:h}];return d.checks=t.checks,t.checks=p,e.compoundCount++,h}}},{name:"descendant",separator:!0,regex:an.descendant,populate:function(e,t){if(e.currentSubject==null){var n=An(),i=An(),a=e[e.length-1];return n.checks.push({type:ar.DESCENDANT,ancestor:a,descendant:i}),fu(e,t,n),e.compoundCount++,i}else if(e.currentSubject===t){var o=An(),s=e[e.length-1],u=An(),l=An(),f=An(),c=An();return o.checks.push({type:ar.COMPOUND_SPLIT,left:s,right:u,subject:l}),l.checks=t.checks,t.checks=[{type:ar.TRUE}],c.checks.push({type:ar.TRUE}),u.checks.push({type:ar.ANCESTOR,ancestor:c,descendant:f}),fu(e,s,o),e.currentSubject=l,e.compoundCount++,f}else{var d=An(),h=An(),p=[{type:ar.ANCESTOR,ancestor:d,descendant:h}];return d.checks=t.checks,t.checks=p,e.compoundCount++,h}}},{name:"subject",modifier:!0,regex:an.subject,populate:function(e,t){if(e.currentSubject!=null&&e.currentSubject!==t)return vn("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var n=e[e.length-1],i=n.checks[0],a=i==null?null:i.type;a===ar.DIRECTED_EDGE?i.type=ar.NODE_TARGET:a===ar.UNDIRECTED_EDGE&&(i.type=ar.NODE_NEIGHBOR,i.node=i.nodes[1],i.neighbor=i.nodes[0],i.nodes=null)}}];h2.forEach(function(r){return r.regexObj=new RegExp("^"+r.regex)});var L8=function(e){for(var t,n,i,a=0;a<h2.length;a++){var o=h2[a],s=o.name,u=e.match(o.regexObj);if(u!=null){n=u,t=o,i=s;var l=u[0];e=e.substring(l.length);break}}return{expr:t,match:n,name:i,remaining:e}},N8=function(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e},P8=function(e){var t=this,n=t.inputText=e,i=t[0]=An();for(t.length=1,n=N8(n);;){var a=L8(n);if(a.expr==null)return vn("The selector `"+e+"`is invalid"),!1;var o=a.match.slice(1),s=a.expr.populate(t,i,o);if(s===!1)return!1;if(s!=null&&(i=s),n=a.remaining,n.match(/^\s*$/))break}var u=t[t.length-1];t.currentSubject!=null&&(u.subject=t.currentSubject),u.edgeCount=t.edgeCount,u.compoundCount=t.compoundCount;for(var l=0;l<t.length;l++){var f=t[l];if(f.compoundCount>0&&f.edgeCount>0)return vn("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(f.edgeCount>1)return vn("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;f.edgeCount===1&&vn("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},M8=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(f){return f??""},t=function(f){return pr(f)?'"'+f+'"':e(f)},n=function(f){return" "+f+" "},i=function(f,c){var d=f.type,h=f.value;switch(d){case ar.GROUP:{var p=e(h);return p.substring(0,p.length-1)}case ar.DATA_COMPARE:{var g=f.field,b=f.operator;return"["+g+n(e(b))+t(h)+"]"}case ar.DATA_BOOL:{var v=f.operator,y=f.field;return"["+e(v)+y+"]"}case ar.DATA_EXIST:{var m=f.field;return"["+m+"]"}case ar.META_COMPARE:{var w=f.operator,S=f.field;return"[["+S+n(e(w))+t(h)+"]]"}case ar.STATE:return h;case ar.ID:return"#"+h;case ar.CLASS:return"."+h;case ar.PARENT:case ar.CHILD:return a(f.parent,c)+n(">")+a(f.child,c);case ar.ANCESTOR:case ar.DESCENDANT:return a(f.ancestor,c)+" "+a(f.descendant,c);case ar.COMPOUND_SPLIT:{var A=a(f.left,c),_=a(f.subject,c),E=a(f.right,c);return A+(A.length>0?" ":"")+_+E}case ar.TRUE:return""}},a=function(f,c){return f.checks.reduce(function(d,h,p){return d+(c===f&&p===0?"$":"")+i(h,c)},"")},o="",s=0;s<this.length;s++){var u=this[s];o+=a(u,u.subject),this.length>1&&s<this.length-1&&(o+=", ")}return this.toStringCache=o,o},O8={parse:P8,toString:M8},jk=function(e,t,n){var i,a=pr(e),o=Ht(e),s=pr(n),u,l,f=!1,c=!1,d=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),c=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),f=!0),(a||s||f)&&(u=!a&&!o?"":""+e,l=""+n),f&&(e=u=u.toLowerCase(),n=l=l.toLowerCase()),t){case"*=":i=u.indexOf(l)>=0;break;case"$=":i=u.indexOf(l,u.length-l.length)>=0;break;case"^=":i=u.indexOf(l)===0;break;case"=":i=e===n;break;case">":d=!0,i=e>n;break;case">=":d=!0,i=e>=n;break;case"<":d=!0,i=e<n;break;case"<=":d=!0,i=e<=n;break;default:i=!1;break}return c&&(e!=null||!d)&&(i=!i),i},D8=function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},I8=function(e){return e!==void 0},cw=function(e,t){return e.data(t)},R8=function(e,t){return e[t]()},fi=[],Wn=function(e,t){return e.checks.every(function(n){return fi[n.type](n,t)})};fi[ar.GROUP]=function(r,e){var t=r.value;return t==="*"||t===e.group()};fi[ar.STATE]=function(r,e){var t=r.value;return T8(t,e)};fi[ar.ID]=function(r,e){var t=r.value;return e.id()===t};fi[ar.CLASS]=function(r,e){var t=r.value;return e.hasClass(t)};fi[ar.META_COMPARE]=function(r,e){var t=r.field,n=r.operator,i=r.value;return jk(R8(e,t),n,i)};fi[ar.DATA_COMPARE]=function(r,e){var t=r.field,n=r.operator,i=r.value;return jk(cw(e,t),n,i)};fi[ar.DATA_BOOL]=function(r,e){var t=r.field,n=r.operator;return D8(cw(e,t),n)};fi[ar.DATA_EXIST]=function(r,e){var t=r.field;return r.operator,I8(cw(e,t))};fi[ar.UNDIRECTED_EDGE]=function(r,e){var t=r.nodes[0],n=r.nodes[1],i=e.source(),a=e.target();return Wn(t,i)&&Wn(n,a)||Wn(n,i)&&Wn(t,a)};fi[ar.NODE_NEIGHBOR]=function(r,e){return Wn(r.node,e)&&e.neighborhood().some(function(t){return t.isNode()&&Wn(r.neighbor,t)})};fi[ar.DIRECTED_EDGE]=function(r,e){return Wn(r.source,e.source())&&Wn(r.target,e.target())};fi[ar.NODE_SOURCE]=function(r,e){return Wn(r.source,e)&&e.outgoers().some(function(t){return t.isNode()&&Wn(r.target,t)})};fi[ar.NODE_TARGET]=function(r,e){return Wn(r.target,e)&&e.incomers().some(function(t){return t.isNode()&&Wn(r.source,t)})};fi[ar.CHILD]=function(r,e){return Wn(r.child,e)&&Wn(r.parent,e.parent())};fi[ar.PARENT]=function(r,e){return Wn(r.parent,e)&&e.children().some(function(t){return Wn(r.child,t)})};fi[ar.DESCENDANT]=function(r,e){return Wn(r.descendant,e)&&e.ancestors().some(function(t){return Wn(r.ancestor,t)})};fi[ar.ANCESTOR]=function(r,e){return Wn(r.ancestor,e)&&e.descendants().some(function(t){return Wn(r.descendant,t)})};fi[ar.COMPOUND_SPLIT]=function(r,e){return Wn(r.subject,e)&&Wn(r.left,e)&&Wn(r.right,e)};fi[ar.TRUE]=function(){return!0};fi[ar.COLLECTION]=function(r,e){var t=r.value;return t.has(e)};fi[ar.FILTER]=function(r,e){var t=r.value;return t(e)};var F8=function(e){var t=this;if(t.length===1&&t[0].checks.length===1&&t[0].checks[0].type===ar.ID)return e.getElementById(t[0].checks[0].value).collection();var n=function(a){for(var o=0;o<t.length;o++){var s=t[o];if(Wn(s,a))return!0}return!1};return t.text()==null&&(n=function(){return!0}),e.filter(n)},B8=function(e){for(var t=this,n=0;n<t.length;n++){var i=t[n];if(Wn(i,e))return!0}return!1},z8={matches:B8,filter:F8},Lu=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||pr(e)&&e.match(/^\s*$/)||(Ha(e)?this.addQuery({checks:[{type:ar.COLLECTION,value:e.collection()}]}):ii(e)?this.addQuery({checks:[{type:ar.FILTER,value:e}]}):pr(e)?this.parse(e)||(this.invalid=!0):ui("A selector must be created from a string; found "))},Nu=Lu.prototype;[O8,z8].forEach(function(r){return Sr(Nu,r)});Nu.text=function(){return this.inputText};Nu.size=function(){return this.length};Nu.eq=function(r){return this[r]};Nu.sameText=function(r){return!this.invalid&&!r.invalid&&this.text()===r.text()};Nu.addQuery=function(r){this[this.length++]=r};Nu.selector=Nu.toString;var Su={allAre:function(e){var t=new Lu(e);return this.every(function(n){return t.matches(n)})},is:function(e){var t=new Lu(e);return this.some(function(n){return t.matches(n)})},some:function(e,t){for(var n=0;n<this.length;n++){var i=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(i)return!0}return!1},every:function(e,t){for(var n=0;n<this.length;n++){var i=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(!i)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length,n=e.length;return t!==n?!1:t===1?this[0]===e[0]:this.every(function(i){return e.hasElementWithId(i.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(n){return t.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var t=this;return e.every(function(n){return t.hasElementWithId(n.id())})}};Su.allAreNeighbours=Su.allAreNeighbors;Su.has=Su.contains;Su.equal=Su.equals=Su.same;var ro=function(e,t){return function(i,a,o,s){var u=i,l=this,f;if(u==null?f="":Ha(u)&&u.length===1&&(f=u.id()),l.length===1&&f){var c=l[0]._private,d=c.traversalCache=c.traversalCache||{},h=d[t]=d[t]||[],p=yl(f),g=h[p];return g||(h[p]=e.call(l,i,a,o,s))}else return e.call(l,i,a,o,s)}},qf={parent:function(e){var t=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var i=0;i<this.length;i++){var a=this[i],o=a._private.parent;o&&t.push(o)}return this.spawn(t,!0).filter(e)},parents:function(e){for(var t=[],n=this.parent();n.nonempty();){for(var i=0;i<n.length;i++){var a=n[i];t.push(a)}n=n.parent()}return this.spawn(t,!0).filter(e)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var i=this[n],a=i.parents();t=t||a,t=t.intersect(a)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(t){return t.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(t){return t.isChild()}).filter(e)},children:ro(function(r){for(var e=[],t=0;t<this.length;t++)for(var n=this[t],i=n._private.children,a=0;a<i.length;a++)e.push(i[a]);return this.spawn(e,!0).filter(r)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var t=[];function n(i){for(var a=0;a<i.length;a++){var o=i[a];t.push(o),o.children().nonempty()&&n(o.children())}}return n(this.children()),this.spawn(t,!0).filter(e)}};function hw(r,e,t,n){for(var i=[],a=new Qf,o=r.cy(),s=o.hasCompoundNodes(),u=0;u<r.length;u++){var l=r[u];t?i.push(l):s&&n(i,a,l)}for(;i.length>0;){var f=i.shift();e(f),a.add(f.id()),s&&n(i,a,f)}return r}function Vk(r,e,t){if(t.isParent())for(var n=t._private.children,i=0;i<n.length;i++){var a=n[i];e.has(a.id())||r.push(a)}}qf.forEachDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return hw(this,r,e,Vk)};function Wk(r,e,t){if(t.isChild()){var n=t._private.parent;e.has(n.id())||r.push(n)}}qf.forEachUp=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return hw(this,r,e,Wk)};function q8(r,e,t){Wk(r,e,t),Vk(r,e,t)}qf.forEachUpAndDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return hw(this,r,e,q8)};qf.ancestors=qf.parents;var mh,Yk;mh=Yk={data:pn.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:pn.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:pn.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:pn.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:pn.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:pn.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};mh.attr=mh.data;mh.removeAttr=mh.removeData;var G8=Yk,Jp={};function Wg(r){return function(e){var t=this;if(e===void 0&&(e=!0),t.length!==0)if(t.isNode()&&!t.removed()){for(var n=0,i=t[0],a=i._private.edges,o=0;o<a.length;o++){var s=a[o];!e&&s.isLoop()||(n+=r(i,s))}return n}else return}}Sr(Jp,{degree:Wg(function(r,e){return e.source().same(e.target())?2:1}),indegree:Wg(function(r,e){return e.target().same(r)?1:0}),outdegree:Wg(function(r,e){return e.source().same(r)?1:0})});function of(r,e){return function(t){for(var n,i=this.nodes(),a=0;a<i.length;a++){var o=i[a],s=o[r](t);s!==void 0&&(n===void 0||e(s,n))&&(n=s)}return n}}Sr(Jp,{minDegree:of("degree",function(r,e){return r<e}),maxDegree:of("degree",function(r,e){return r>e}),minIndegree:of("indegree",function(r,e){return r<e}),maxIndegree:of("indegree",function(r,e){return r>e}),minOutdegree:of("outdegree",function(r,e){return r<e}),maxOutdegree:of("outdegree",function(r,e){return r>e})});Sr(Jp,{totalDegree:function(e){for(var t=0,n=this.nodes(),i=0;i<n.length;i++)t+=n[i].degree(e);return t}});var So,Xk,Kk=function(e,t,n){for(var i=0;i<e.length;i++){var a=e[i];if(!a.locked()){var o=a._private.position,s={x:t.x!=null?t.x-o.x:0,y:t.y!=null?t.y-o.y:0};a.isParent()&&!(s.x===0&&s.y===0)&&a.children().shift(s,n),a.dirtyBoundingBoxCache()}}},L_={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){Kk(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};So=Xk={position:pn.data(L_),silentPosition:pn.data(Sr({},L_,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){Kk(e,t,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,t){if(on(e))t?this.silentPosition(e):this.position(e);else if(ii(e)){var n=e,i=this.cy();i.startBatch();for(var a=0;a<this.length;a++){var o=this[a],s=void 0;(s=n(o,a))&&(t?o.silentPosition(s):o.position(s))}i.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,n){var i;if(on(e)?(i={x:Ht(e.x)?e.x:0,y:Ht(e.y)?e.y:0},n=t):pr(e)&&Ht(t)&&(i={x:0,y:0},i[e]=t),i!=null){var a=this.cy();a.startBatch();for(var o=0;o<this.length;o++){var s=this[o];if(!(a.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))){var u=s.position(),l={x:u.x+i.x,y:u.y+i.y};n?s.silentPosition(l):s.position(l)}}a.endBatch()}return this},silentShift:function(e,t){return on(e)?this.shift(e,!0):pr(e)&&Ht(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var n=this[0],i=this.cy(),a=i.zoom(),o=i.pan(),s=on(e)?e:void 0,u=s!==void 0||t!==void 0&&pr(e);if(n&&n.isNode())if(u)for(var l=0;l<this.length;l++){var f=this[l];t!==void 0?f.position(e,(t-o[e])/a):s!==void 0&&f.position(kk(s,a,o))}else{var c=n.position();return s=Zp(c,a,o),e===void 0?s:s[e]}else if(!u)return;return this},relativePosition:function(e,t){var n=this[0],i=this.cy(),a=on(e)?e:void 0,o=a!==void 0||t!==void 0&&pr(e),s=i.hasCompoundNodes();if(n&&n.isNode())if(o)for(var u=0;u<this.length;u++){var l=this[u],f=s?l.parent():null,c=f&&f.length>0,d=c;c&&(f=f[0]);var h=d?f.position():{x:0,y:0};t!==void 0?l.position(e,t+h[e]):a!==void 0&&l.position({x:a.x+h.x,y:a.y+h.y})}else{var p=n.position(),g=s?n.parent():null,b=g&&g.length>0,v=b;b&&(g=g[0]);var y=v?g.position():{x:0,y:0};return a={x:p.x-y.x,y:p.y-y.y},e===void 0?a:a[e]}else if(!o)return;return this}};So.modelPosition=So.point=So.position;So.modelPositions=So.points=So.positions;So.renderedPoint=So.renderedPosition;So.relativePoint=So.relativePosition;var $8=Xk,Pf,Ru;Pf=Ru={};Ru.renderedBoundingBox=function(r){var e=this.boundingBox(r),t=this.cy(),n=t.zoom(),i=t.pan(),a=e.x1*n+i.x,o=e.x2*n+i.x,s=e.y1*n+i.y,u=e.y2*n+i.y;return{x1:a,x2:o,y1:s,y2:u,w:o-a,h:u-s}};Ru.dirtyCompoundBoundsCache=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(t){if(t.isParent()){var n=t._private;n.compoundBoundsClean=!1,n.bbCache=null,r||t.emitAndNotify("bounds")}}),this)};Ru.updateCompoundBounds=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!r&&e.batching())return this;function t(o){if(!o.isParent())return;var s=o._private,u=o.children(),l=o.pstyle("compound-sizing-wrt-labels").value==="include",f={width:{val:o.pstyle("min-width").pfValue,left:o.pstyle("min-width-bias-left"),right:o.pstyle("min-width-bias-right")},height:{val:o.pstyle("min-height").pfValue,top:o.pstyle("min-height-bias-top"),bottom:o.pstyle("min-height-bias-bottom")}},c=u.boundingBox({includeLabels:l,includeOverlays:!1,useCache:!1}),d=s.position;(c.w===0||c.h===0)&&(c={w:o.pstyle("width").pfValue,h:o.pstyle("height").pfValue},c.x1=d.x-c.w/2,c.x2=d.x+c.w/2,c.y1=d.y-c.h/2,c.y2=d.y+c.h/2);function h(k,M,T){var C=0,R=0,x=M+T;return k>0&&x>0&&(C=M/x*k,R=T/x*k),{biasDiff:C,biasComplementDiff:R}}function p(k,M,T,C){if(T.units==="%")switch(C){case"width":return k>0?T.pfValue*k:0;case"height":return M>0?T.pfValue*M:0;case"average":return k>0&&M>0?T.pfValue*(k+M)/2:0;case"min":return k>0&&M>0?k>M?T.pfValue*M:T.pfValue*k:0;case"max":return k>0&&M>0?k>M?T.pfValue*k:T.pfValue*M:0;default:return 0}else return T.units==="px"?T.pfValue:0}var g=f.width.left.value;f.width.left.units==="px"&&f.width.val>0&&(g=g*100/f.width.val);var b=f.width.right.value;f.width.right.units==="px"&&f.width.val>0&&(b=b*100/f.width.val);var v=f.height.top.value;f.height.top.units==="px"&&f.height.val>0&&(v=v*100/f.height.val);var y=f.height.bottom.value;f.height.bottom.units==="px"&&f.height.val>0&&(y=y*100/f.height.val);var m=h(f.width.val-c.w,g,b),w=m.biasDiff,S=m.biasComplementDiff,A=h(f.height.val-c.h,v,y),_=A.biasDiff,E=A.biasComplementDiff;s.autoPadding=p(c.w,c.h,o.pstyle("padding"),o.pstyle("padding-relative-to").value),s.autoWidth=Math.max(c.w,f.width.val),d.x=(-w+c.x1+c.x2+S)/2,s.autoHeight=Math.max(c.h,f.height.val),d.y=(-_+c.y1+c.y2+E)/2}for(var n=0;n<this.length;n++){var i=this[n],a=i._private;(!a.compoundBoundsClean||r)&&(t(i),e.batching()||(a.compoundBoundsClean=!0))}return this};var to=function(e){return e===1/0||e===-1/0?0:e},_o=function(e,t,n,i,a){i-t===0||a-n===0||t==null||n==null||i==null||a==null||(e.x1=t<e.x1?t:e.x1,e.x2=i>e.x2?i:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=a>e.y2?a:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},al=function(e,t){return t==null?e:_o(e,t.x1,t.y1,t.x2,t.y2)},Nc=function(e,t,n){return xo(e,t,n)},kd=function(e,t,n){if(!t.cy().headless()){var i=t._private,a=i.rstyle,o=a.arrowWidth/2,s=t.pstyle(n+"-arrow-shape").value,u,l;if(s!=="none"){n==="source"?(u=a.srcX,l=a.srcY):n==="target"?(u=a.tgtX,l=a.tgtY):(u=a.midX,l=a.midY);var f=i.arrowBounds=i.arrowBounds||{},c=f[n]=f[n]||{};c.x1=u-o,c.y1=l-o,c.x2=u+o,c.y2=l+o,c.w=c.x2-c.x1,c.h=c.y2-c.y1,Qd(c,1),_o(e,c.x1,c.y1,c.x2,c.y2)}}},Yg=function(e,t,n){if(!t.cy().headless()){var i;n?i=n+"-":i="";var a=t._private,o=a.rstyle,s=t.pstyle(i+"label").strValue;if(s){var u=t.pstyle("text-halign"),l=t.pstyle("text-valign"),f=Nc(o,"labelWidth",n),c=Nc(o,"labelHeight",n),d=Nc(o,"labelX",n),h=Nc(o,"labelY",n),p=t.pstyle(i+"text-margin-x").pfValue,g=t.pstyle(i+"text-margin-y").pfValue,b=t.isEdge(),v=t.pstyle(i+"text-rotation"),y=t.pstyle("text-outline-width").pfValue,m=t.pstyle("text-border-width").pfValue,w=m/2,S=t.pstyle("text-background-padding").pfValue,A=2,_=c,E=f,k=E/2,M=_/2,T,C,R,x;if(b)T=d-k,C=d+k,R=h-M,x=h+M;else{switch(u.value){case"left":T=d-E,C=d;break;case"center":T=d-k,C=d+k;break;case"right":T=d,C=d+E;break}switch(l.value){case"top":R=h-_,x=h;break;case"center":R=h-M,x=h+M;break;case"bottom":R=h,x=h+_;break}}T+=p-Math.max(y,w)-S-A,C+=p+Math.max(y,w)+S+A,R+=g-Math.max(y,w)-S-A,x+=g+Math.max(y,w)+S+A;var B=n||"main",D=a.labelBounds,O=D[B]=D[B]||{};O.x1=T,O.y1=R,O.x2=C,O.y2=x,O.w=C-T,O.h=x-R;var G=b&&v.strValue==="autorotate",V=v.pfValue!=null&&v.pfValue!==0;if(G||V){var I=G?Nc(a.rstyle,"labelAngle",n):v.pfValue,z=Math.cos(I),P=Math.sin(I),q=(T+C)/2,F=(R+x)/2;if(!b){switch(u.value){case"left":q=C;break;case"right":q=T;break}switch(l.value){case"top":F=x;break;case"bottom":F=R;break}}var U=function(Le,K){return Le=Le-q,K=K-F,{x:Le*z-K*P+q,y:Le*P+K*z+F}},W=U(T,R),X=U(T,x),te=U(C,R),ne=U(C,x);T=Math.min(W.x,X.x,te.x,ne.x),C=Math.max(W.x,X.x,te.x,ne.x),R=Math.min(W.y,X.y,te.y,ne.y),x=Math.max(W.y,X.y,te.y,ne.y)}var he=B+"Rot",ve=D[he]=D[he]||{};ve.x1=T,ve.y1=R,ve.x2=C,ve.y2=x,ve.w=C-T,ve.h=x-R,_o(e,T,R,C,x),_o(a.labelBounds.all,T,R,C,x)}return e}},U8=function(e,t){var n=e._private.cy,i=n.styleEnabled(),a=n.headless(),o=Ia(),s=e._private,u=e.isNode(),l=e.isEdge(),f,c,d,h,p,g,b=s.rstyle,v=u&&i?e.pstyle("bounds-expansion").pfValue:[0],y=function(Z){return Z.pstyle("display").value!=="none"},m=!i||y(e)&&(!l||y(e.source())&&y(e.target()));if(m){var w=0,S=0;i&&t.includeOverlays&&(w=e.pstyle("overlay-opacity").value,w!==0&&(S=e.pstyle("overlay-padding").value));var A=0,_=0;i&&t.includeUnderlays&&(A=e.pstyle("underlay-opacity").value,A!==0&&(_=e.pstyle("underlay-padding").value));var E=Math.max(S,_),k=0,M=0;if(i&&(k=e.pstyle("width").pfValue,M=k/2),u&&t.includeNodes){var T=e.position();p=T.x,g=T.y;var C=e.outerWidth(),R=C/2,x=e.outerHeight(),B=x/2;f=p-R,c=p+R,d=g-B,h=g+B,_o(o,f,d,c,h)}else if(l&&t.includeEdges)if(i&&!a){var D=e.pstyle("curve-style").strValue;if(f=Math.min(b.srcX,b.midX,b.tgtX),c=Math.max(b.srcX,b.midX,b.tgtX),d=Math.min(b.srcY,b.midY,b.tgtY),h=Math.max(b.srcY,b.midY,b.tgtY),f-=M,c+=M,d-=M,h+=M,_o(o,f,d,c,h),D==="haystack"){var O=b.haystackPts;if(O&&O.length===2){if(f=O[0].x,d=O[0].y,c=O[1].x,h=O[1].y,f>c){var G=f;f=c,c=G}if(d>h){var V=d;d=h,h=V}_o(o,f-M,d-M,c+M,h+M)}}else if(D==="bezier"||D==="unbundled-bezier"||D==="segments"||D==="taxi"){var I;switch(D){case"bezier":case"unbundled-bezier":I=b.bezierPts;break;case"segments":case"taxi":I=b.linePts;break}if(I!=null)for(var z=0;z<I.length;z++){var P=I[z];f=P.x-M,c=P.x+M,d=P.y-M,h=P.y+M,_o(o,f,d,c,h)}}}else{var q=e.source(),F=q.position(),U=e.target(),W=U.position();if(f=F.x,c=W.x,d=F.y,h=W.y,f>c){var X=f;f=c,c=X}if(d>h){var te=d;d=h,h=te}f-=M,c+=M,d-=M,h+=M,_o(o,f,d,c,h)}if(i&&t.includeEdges&&l&&(kd(o,e,"mid-source"),kd(o,e,"mid-target"),kd(o,e,"source"),kd(o,e,"target")),i){var ne=e.pstyle("ghost").value==="yes";if(ne){var he=e.pstyle("ghost-offset-x").pfValue,ve=e.pstyle("ghost-offset-y").pfValue;_o(o,o.x1+he,o.y1+ve,o.x2+he,o.y2+ve)}}var Ce=s.bodyBounds=s.bodyBounds||{};d_(Ce,o),Hg(Ce,v),Qd(Ce,1),i&&(f=o.x1,c=o.x2,d=o.y1,h=o.y2,_o(o,f-E,d-E,c+E,h+E));var Le=s.overlayBounds=s.overlayBounds||{};d_(Le,o),Hg(Le,v),Qd(Le,1);var K=s.labelBounds=s.labelBounds||{};K.all!=null?gF(K.all):K.all=Ia(),i&&t.includeLabels&&(t.includeMainLabels&&Yg(o,e,null),l&&(t.includeSourceLabels&&Yg(o,e,"source"),t.includeTargetLabels&&Yg(o,e,"target")))}return o.x1=to(o.x1),o.y1=to(o.y1),o.x2=to(o.x2),o.y2=to(o.y2),o.w=to(o.x2-o.x1),o.h=to(o.y2-o.y1),o.w>0&&o.h>0&&m&&(Hg(o,v),Qd(o,1)),o},Zk=function(e){var t=0,n=function(o){return(o?1:0)<<t++},i=0;return i+=n(e.incudeNodes),i+=n(e.includeEdges),i+=n(e.includeLabels),i+=n(e.includeMainLabels),i+=n(e.includeSourceLabels),i+=n(e.includeTargetLabels),i+=n(e.includeOverlays),i},Qk=function(e){if(e.isEdge()){var t=e.source().position(),n=e.target().position(),i=function(o){return Math.round(o)};return B6([i(t.x),i(t.y),i(n.x),i(n.y)])}else return 0},N_=function(e,t){var n=e._private,i,a=e.isEdge(),o=t==null?P_:Zk(t),s=o===P_,u=Qk(e),l=n.bbCachePosKey===u,f=t.useCache&&l,c=function(g){return g._private.bbCache==null||g._private.styleDirty},d=!f||c(e)||a&&c(e.source())||c(e.target());if(d?(l||e.recalculateRenderedStyle(f),i=U8(e,yh),n.bbCache=i,n.bbCachePosKey=u):i=n.bbCache,!s){var h=e.isNode();i=Ia(),(t.includeNodes&&h||t.includeEdges&&!h)&&(t.includeOverlays?al(i,n.overlayBounds):al(i,n.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!a||t.includeSourceLabels&&t.includeTargetLabels)?al(i,n.labelBounds.all):(t.includeMainLabels&&al(i,n.labelBounds.mainRot),t.includeSourceLabels&&al(i,n.labelBounds.sourceRot),t.includeTargetLabels&&al(i,n.labelBounds.targetRot))),i.w=i.x2-i.x1,i.h=i.y2-i.y1}return i},yh={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,useCache:!0},P_=Zk(yh),M_=Ki(yh);Ru.boundingBox=function(r){var e;if(this.length===1&&this[0]._private.bbCache!=null&&!this[0]._private.styleDirty&&(r===void 0||r.useCache===void 0||r.useCache===!0))r===void 0?r=yh:r=M_(r),e=N_(this[0],r);else{e=Ia(),r=r||yh;var t=M_(r),n=this,i=n.cy(),a=i.styleEnabled();if(a)for(var o=0;o<n.length;o++){var s=n[o],u=s._private,l=Qk(s),f=u.bbCachePosKey===l,c=t.useCache&&f&&!u.styleDirty;s.recalculateRenderedStyle(c)}this.updateCompoundBounds(!r.useCache);for(var d=0;d<n.length;d++){var h=n[d];al(e,N_(h,t))}}return e.x1=to(e.x1),e.y1=to(e.y1),e.x2=to(e.x2),e.y2=to(e.y2),e.w=to(e.x2-e.x1),e.h=to(e.y2-e.y1),e};Ru.dirtyBoundingBoxCache=function(){for(var r=0;r<this.length;r++){var e=this[r]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};Ru.boundingBoxAt=function(r){var e=this.nodes(),t=this.cy(),n=t.hasCompoundNodes(),i=t.collection();if(n&&(i=e.filter(function(l){return l.isParent()}),e=e.not(i)),on(r)){var a=r;r=function(){return a}}var o=function(f,c){return f._private.bbAtOldPos=r(f,c)},s=function(f){return f._private.bbAtOldPos};t.startBatch(),e.forEach(o).silentPositions(r),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var u=vF(this.boundingBox({useCache:!1}));return e.silentPositions(s),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),t.endBatch(),u};Pf.boundingbox=Pf.bb=Pf.boundingBox;Pf.renderedBoundingbox=Pf.renderedBoundingBox;var H8=Ru,Yc,Fh;Yc=Fh={};var Jk=function(e){e.uppercaseName=l_(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=l_(e.outerName),Yc[e.name]=function(){var n=this[0],i=n._private,a=i.cy,o=a._private.styleEnabled;if(n)if(o){if(n.isParent())return n.updateCompoundBounds(),i[e.autoName]||0;var s=n.pstyle(e.name);switch(s.strValue){case"label":return n.recalculateRenderedStyle(),i.rstyle[e.labelName]||0;default:return s.pfValue}}else return 1},Yc["outer"+e.uppercaseName]=function(){var n=this[0],i=n._private,a=i.cy,o=a._private.styleEnabled;if(n)if(o){var s=n[e.name](),u=n.pstyle("border-width").pfValue,l=2*n.padding();return s+u+l}else return 1},Yc["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var i=n[e.name]();return i*this.cy().zoom()}},Yc["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var i=n[e.outerName]();return i*this.cy().zoom()}}};Jk({name:"width"});Jk({name:"height"});Fh.padding=function(){var r=this[0],e=r._private;return r.isParent()?(r.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:r.pstyle("padding").pfValue):r.pstyle("padding").pfValue};Fh.paddedHeight=function(){var r=this[0];return r.height()+2*r.padding()};Fh.paddedWidth=function(){var r=this[0];return r.width()+2*r.padding()};var j8=Fh,V8=function(e,t){if(e.isEdge())return t(e)},W8=function(e,t){if(e.isEdge()){var n=e.cy();return Zp(t(e),n.zoom(),n.pan())}},Y8=function(e,t){if(e.isEdge()){var n=e.cy(),i=n.pan(),a=n.zoom();return t(e).map(function(o){return Zp(o,a,i)})}},X8=function(e){return e.renderer().getControlPoints(e)},K8=function(e){return e.renderer().getSegmentPoints(e)},Z8=function(e){return e.renderer().getSourceEndpoint(e)},Q8=function(e){return e.renderer().getTargetEndpoint(e)},J8=function(e){return e.renderer().getEdgeMidpoint(e)},O_={controlPoints:{get:X8,mult:!0},segmentPoints:{get:K8,mult:!0},sourceEndpoint:{get:Z8},targetEndpoint:{get:Q8},midpoint:{get:J8}},eB=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},tB=Object.keys(O_).reduce(function(r,e){var t=O_[e],n=eB(e);return r[e]=function(){return V8(this,t.get)},t.mult?r[n]=function(){return Y8(this,t.get)}:r[n]=function(){return W8(this,t.get)},r},{}),rB=Sr({},$8,H8,j8,tB);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var eL=function(e,t){this.recycle(e,t)};function Pc(){return!1}function Ld(){return!0}eL.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Pc,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?Ld:Pc):e!=null&&e.type?t=e:this.type=e,t!=null&&(this.originalEvent=t.originalEvent,this.type=t.type!=null?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,i=this.cy.zoom(),a=this.cy.pan();this.renderedPosition={x:n.x*i+a.x,y:n.y*i+a.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Ld;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Ld;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Ld,this.stopPropagation()},isDefaultPrevented:Pc,isPropagationStopped:Pc,isImmediatePropagationStopped:Pc};var tL=/^([^.]+)(\.(?:[^.]+))?$/,nB=".*",rL={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},D_=Object.keys(rL),iB={};function ev(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:iB,e=arguments.length>1?arguments[1]:void 0,t=0;t<D_.length;t++){var n=D_[t];this[n]=r[n]||rL[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var Pu=ev.prototype,nL=function(e,t,n,i,a,o,s){ii(i)&&(a=i,i=null),s&&(o==null?o=s:o=Sr({},o,s));for(var u=In(n)?n:n.split(/\s+/),l=0;l<u.length;l++){var f=u[l];if(!Tu(f)){var c=f.match(tL);if(c){var d=c[1],h=c[2]?c[2]:null,p=t(e,f,d,h,i,a,o);if(p===!1)break}}}},I_=function(e,t){return e.addEventFields(e.context,t),new eL(t.type,t)},aB=function(e,t,n){if(y6(n)){t(e,n);return}else if(on(n)){t(e,I_(e,n));return}for(var i=In(n)?n:n.split(/\s+/),a=0;a<i.length;a++){var o=i[a];if(!Tu(o)){var s=o.match(tL);if(s){var u=s[1],l=s[2]?s[2]:null,f=I_(e,{type:u,namespace:l,target:e.context});t(e,f)}}}};Pu.on=Pu.addListener=function(r,e,t,n,i){return nL(this,function(a,o,s,u,l,f,c){ii(f)&&a.listeners.push({event:o,callback:f,type:s,namespace:u,qualifier:l,conf:c})},r,e,t,n,i),this};Pu.one=function(r,e,t,n){return this.on(r,e,t,n,{one:!0})};Pu.removeListener=Pu.off=function(r,e,t,n){var i=this;this.emitting!==0&&(this.listeners=U6(this.listeners));for(var a=this.listeners,o=function(l){var f=a[l];nL(i,function(c,d,h,p,g,b){if((f.type===h||r==="*")&&(!p&&f.namespace!==".*"||f.namespace===p)&&(!g||c.qualifierCompare(f.qualifier,g))&&(!b||f.callback===b))return a.splice(l,1),!1},r,e,t,n)},s=a.length-1;s>=0;s--)o(s);return this};Pu.removeAllListeners=function(){return this.removeListener("*")};Pu.emit=Pu.trigger=function(r,e,t){var n=this.listeners,i=n.length;return this.emitting++,In(e)||(e=[e]),aB(this,function(a,o){t!=null&&(n=[{event:o.event,type:o.type,namespace:o.namespace,callback:t}],i=n.length);for(var s=function(f){var c=n[f];if(c.type===o.type&&(!c.namespace||c.namespace===o.namespace||c.namespace===nB)&&a.eventMatches(a.context,c,o)){var d=[o];e!=null&&j6(d,e),a.beforeEmit(a.context,c,o),c.conf&&c.conf.one&&(a.listeners=a.listeners.filter(function(g){return g!==c}));var h=a.callbackContext(a.context,c,o),p=c.callback.apply(h,d);a.afterEmit(a.context,c,o),p===!1&&(o.stopPropagation(),o.preventDefault())}},u=0;u<i;u++)s(u);a.bubble(a.context)&&!o.isPropagationStopped()&&a.parent(a.context).emit(o,e)},r),this.emitting--,this};var oB={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var i=t.qualifier;return i!=null?e!==n.target&&Ih(n.target)&&i.matches(n.target):!0},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},Nd=function(e){return pr(e)?new Lu(e):e},iL={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new ev(oB,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,n){for(var i=Nd(t),a=0;a<this.length;a++){var o=this[a];o.emitter().on(e,i,n)}return this},removeListener:function(e,t,n){for(var i=Nd(t),a=0;a<this.length;a++){var o=this[a];o.emitter().removeListener(e,i,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var t=this[e];t.emitter().removeAllListeners()}return this},one:function(e,t,n){for(var i=Nd(t),a=0;a<this.length;a++){var o=this[a];o.emitter().one(e,i,n)}return this},once:function(e,t,n){for(var i=Nd(t),a=0;a<this.length;a++){var o=this[a];o.emitter().on(e,i,n,{once:!0,onceCollection:this})}},emit:function(e,t){for(var n=0;n<this.length;n++){var i=this[n];i.emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,t),this}};pn.eventAliasesOn(iL);var aL={nodes:function(e){return this.filter(function(t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(t){return t.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),n=0;n<this.length;n++){var i=this[n];i.isNode()?e.push(i):t.push(i)}return{nodes:e,edges:t}},filter:function(e,t){if(e===void 0)return this;if(pr(e)||Ha(e))return new Lu(e).filter(this);if(ii(e)){for(var n=this.spawn(),i=this,a=0;a<i.length;a++){var o=i[a],s=t?e.apply(t,[o,a,i]):e(o,a,i);s&&n.push(o)}return n}return this.spawn()},not:function(e){if(e){pr(e)&&(e=this.filter(e));for(var t=this.spawn(),n=0;n<this.length;n++){var i=this[n],a=e.has(i);a||t.push(i)}return t}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(pr(e)){var t=e;return this.filter(t)}for(var n=this.spawn(),i=this,a=e,o=this.length<e.length,s=o?i:a,u=o?a:i,l=0;l<s.length;l++){var f=s[l];u.has(f)&&n.push(f)}return n},xor:function(e){var t=this._private.cy;pr(e)&&(e=t.$(e));var n=this.spawn(),i=this,a=e,o=function(u,l){for(var f=0;f<u.length;f++){var c=u[f],d=c._private.data.id,h=l.hasElementWithId(d);h||n.push(c)}};return o(i,a),o(a,i),n},diff:function(e){var t=this._private.cy;pr(e)&&(e=t.$(e));var n=this.spawn(),i=this.spawn(),a=this.spawn(),o=this,s=e,u=function(f,c,d){for(var h=0;h<f.length;h++){var p=f[h],g=p._private.data.id,b=c.hasElementWithId(g);b?a.merge(p):d.push(p)}};return u(o,s,n),u(s,o,i),{left:n,right:i,both:a}},add:function(e){var t=this._private.cy;if(!e)return this;if(pr(e)){var n=e;e=t.mutableElements().filter(n)}for(var i=this.spawnSelf(),a=0;a<e.length;a++){var o=e[a],s=!this.has(o);s&&i.push(o)}return i},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&pr(e)){var i=e;e=n.mutableElements().filter(i)}for(var a=t.map,o=0;o<e.length;o++){var s=e[o],u=s._private.data.id,l=!a.has(u);if(l){var f=this.length++;this[f]=s,a.set(u,{ele:s,index:f})}}return this},unmergeAt:function(e){var t=this[e],n=t.id(),i=this._private,a=i.map;this[e]=void 0,a.delete(n);var o=e===this.length-1;if(this.length>1&&!o){var s=this.length-1,u=this[s],l=u._private.data.id;this[s]=void 0,this[e]=u,a.set(l,{ele:u,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,n=e._private.data.id,i=t.map,a=i.get(n);if(!a)return this;var o=a.index;return this.unmergeAt(o),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&pr(e)){var n=e;e=t.mutableElements().filter(n)}for(var i=0;i<e.length;i++)this.unmergeOne(e[i]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--){var n=this[t];e(n)&&this.unmergeAt(t)}return this},map:function(e,t){for(var n=[],i=this,a=0;a<i.length;a++){var o=i[a],s=t?e.apply(t,[o,a,i]):e(o,a,i);n.push(s)}return n},reduce:function(e,t){for(var n=t,i=this,a=0;a<i.length;a++)n=e(n,i[a],a,i);return n},max:function(e,t){for(var n=-1/0,i,a=this,o=0;o<a.length;o++){var s=a[o],u=t?e.apply(t,[s,o,a]):e(s,o,a);u>n&&(n=u,i=s)}return{value:n,ele:i}},min:function(e,t){for(var n=1/0,i,a=this,o=0;o<a.length;o++){var s=a[o],u=t?e.apply(t,[s,o,a]):e(s,o,a);u<n&&(n=u,i=s)}return{value:n,ele:i}}},fn=aL;fn.u=fn["|"]=fn["+"]=fn.union=fn.or=fn.add;fn["\\"]=fn["!"]=fn["-"]=fn.difference=fn.relativeComplement=fn.subtract=fn.not;fn.n=fn["&"]=fn["."]=fn.and=fn.intersection=fn.intersect;fn["^"]=fn["(+)"]=fn["(-)"]=fn.symmetricDifference=fn.symdiff=fn.xor;fn.fnFilter=fn.filterFn=fn.stdFilter=fn.filter;fn.complement=fn.abscomp=fn.absoluteComplement;var sB={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},oL=function(e,t){var n=e.cy(),i=n.hasCompoundNodes();function a(f){var c=f.pstyle("z-compound-depth");return c.value==="auto"?i?f.zDepth():0:c.value==="bottom"?-1:c.value==="top"?iw:0}var o=a(e)-a(t);if(o!==0)return o;function s(f){var c=f.pstyle("z-index-compare");return c.value==="auto"&&f.isNode()?1:0}var u=s(e)-s(t);if(u!==0)return u;var l=e.pstyle("z-index").value-t.pstyle("z-index").value;return l!==0?l:e.poolIndex()-t.poolIndex()},wp={forEach:function(e,t){if(ii(e))for(var n=this.length,i=0;i<n;i++){var a=this[i],o=t?e.apply(t,[a,i,this]):e(a,i,this);if(o===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],i=this.length;t==null&&(t=i),e==null&&(e=0),e<0&&(e=i+e),t<0&&(t=i+t);for(var a=e;a>=0&&a<t&&a<i;a++)n.push(this[a]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!ii(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(oL)},zDepth:function(){var e=this[0];if(e){var t=e._private,n=t.group;if(n==="nodes"){var i=t.data.parent?e.parents().size():0;return e.isParent()?i:iw-1}else{var a=t.source,o=t.target,s=a.zDepth(),u=o.zDepth();return Math.max(s,u,0)}}}};wp.each=wp.forEach;var uB=function(){var e="undefined",t=(typeof Symbol>"u"?"undefined":Pi(Symbol))!=e&&Pi(Symbol.iterator)!=e;t&&(wp[Symbol.iterator]=function(){var n=this,i={value:void 0,done:!1},a=0,o=this.length;return hk({next:function(){return a<o?i.value=n[a++]:(i.value=void 0,i.done=!0),i}},Symbol.iterator,function(){return this})})};uB();var lB=Ki({nodeDimensionsIncludeLabels:!1}),ep={layoutDimensions:function(e){e=lB(e);var t;if(!this.takesUpSpace())t={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();t={w:n.w,h:n.h}}else t={w:this.outerWidth(),h:this.outerHeight()};return(t.w===0||t.h===0)&&(t.w=t.h=1),t},layoutPositions:function(e,t,n){var i=this.nodes().filter(function(S){return!S.isParent()}),a=this.cy(),o=t.eles,s=function(A){return A.id()},u=ch(n,s);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=function(A,_,E){var k={x:_.x1+_.w/2,y:_.y1+_.h/2},M={x:(E.x-k.x)*A,y:(E.y-k.y)*A};return{x:k.x+M.x,y:k.y+M.y}},f=t.spacingFactor&&t.spacingFactor!==1,c=function(){if(!f)return null;for(var A=Ia(),_=0;_<i.length;_++){var E=i[_],k=u(E,_);yF(A,k.x,k.y)}return A},d=c(),h=ch(function(S,A){var _=u(S,A);if(f){var E=Math.abs(t.spacingFactor);_=l(E,d,_)}return t.transform!=null&&(_=t.transform(S,_)),_},s);if(t.animate){for(var p=0;p<i.length;p++){var g=i[p],b=h(g,p),v=t.animateFilter==null||t.animateFilter(g,p);if(v){var y=g.animation({position:b,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(y)}else g.position(b)}if(t.fit){var m=a.animation({fit:{boundingBox:o.boundingBoxAt(h),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(m)}else if(t.zoom!==void 0&&t.pan!==void 0){var w=a.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(w)}e.animations.forEach(function(S){return S.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),Jf.all(e.animations.map(function(S){return S.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else i.positions(h),t.fit&&a.fit(t.eles,t.padding),t.zoom!=null&&a.zoom(t.zoom),t.pan&&a.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var t=this.cy();return t.makeLayout(Sr({},e,{eles:this}))}};ep.createLayout=ep.makeLayout=ep.layout;function sL(r,e,t){var n=t._private,i=n.styleCache=n.styleCache||[],a;return(a=i[r])!=null||(a=i[r]=e(t)),a}function tv(r,e){return r=yl(r),function(n){return sL(r,e,n)}}function rv(r,e){r=yl(r);var t=function(i){return e.call(i)};return function(){var i=this[0];if(i)return sL(r,t,i)}}var Yi={recalculateRenderedStyle:function(e){var t=this.cy(),n=t.renderer(),i=t.styleEnabled();return n&&i&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),t=function(a){return a._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(t)}else this.forEach(function(i){t(i),i.connectedEdges().forEach(t)});return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching()){var n=t._private.batchStyleEles;return n.merge(this),this}var i=t.hasCompoundNodes(),a=this;e=!!(e||e===void 0),i&&(a=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=a;return e?o.emitAndNotify("style"):o.emit("style"),a.forEach(function(s){return s._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var n=this[t];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],i=n.cy();if(i.styleEnabled()&&n){this.cleanStyle();var a=n._private.style[e];return a??(t?i.style().getDefaultProperty(e):null)}},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var n=t.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled()&&t)return t.pstyle(e).units},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];if(n)return t.style().getRenderedStyle(n,e)},style:function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var i=!1,a=n.style();if(on(e)){var o=e;a.applyBypass(this,o,i),this.emitAndNotify("style")}else if(pr(e))if(t===void 0){var s=this[0];return s?a.getStylePropertyValue(s,e):void 0}else a.applyBypass(this,e,t,i),this.emitAndNotify("style");else if(e===void 0){var u=this[0];return u?a.getRawStyle(u):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=!1,i=t.style(),a=this;if(e===void 0)for(var o=0;o<a.length;o++){var s=a[o];i.removeAllBypasses(s,n)}else{e=e.split(/\s+/);for(var u=0;u<a.length;u++){var l=a[u];i.removeBypasses(l,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var i=n._private,a=n.pstyle("opacity").value;if(!t)return a;var o=i.data.parent?n.parents():null;if(o)for(var s=0;s<o.length;s++){var u=o[s],l=u.pstyle("opacity").value;a=l*a}return a}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0],n=t.cy().hasCompoundNodes();if(t)return n?t.effectiveOpacity()===0:t.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];return!!t._private.backgrounding}};function Xg(r,e){var t=r._private,n=t.data.parent?r.parents():null;if(n)for(var i=0;i<n.length;i++){var a=n[i];if(!e(a))return!1}return!0}function dw(r){var e=r.ok,t=r.edgeOkViaNode||r.ok,n=r.parentOk||r.ok;return function(){var i=this.cy();if(!i.styleEnabled())return!0;var a=this[0],o=i.hasCompoundNodes();if(a){var s=a._private;if(!e(a))return!1;if(a.isNode())return!o||Xg(a,n);var u=s.source,l=s.target;return t(u)&&(!o||Xg(u,t))&&(u===l||t(l)&&(!o||Xg(l,t)))}}}var ec=tv("eleTakesUpSpace",function(r){return r.pstyle("display").value==="element"&&r.width()!==0&&(r.isNode()?r.height()!==0:!0)});Yi.takesUpSpace=rv("takesUpSpace",dw({ok:ec}));var fB=tv("eleInteractive",function(r){return r.pstyle("events").value==="yes"&&r.pstyle("visibility").value==="visible"&&ec(r)}),cB=tv("parentInteractive",function(r){return r.pstyle("visibility").value==="visible"&&ec(r)});Yi.interactive=rv("interactive",dw({ok:fB,parentOk:cB,edgeOkViaNode:ec}));Yi.noninteractive=function(){var r=this[0];if(r)return!r.interactive()};var hB=tv("eleVisible",function(r){return r.pstyle("visibility").value==="visible"&&r.pstyle("opacity").pfValue!==0&&ec(r)}),dB=ec;Yi.visible=rv("visible",dw({ok:hB,edgeOkViaNode:dB}));Yi.hidden=function(){var r=this[0];if(r)return!r.visible()};Yi.isBundledBezier=rv("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});Yi.bypass=Yi.css=Yi.style;Yi.renderedCss=Yi.renderedStyle;Yi.removeBypass=Yi.removeCss=Yi.removeStyle;Yi.pstyle=Yi.parsedStyle;var Eu={};function R_(r){return function(){var e=arguments,t=[];if(e.length===2){var n=e[0],i=e[1];this.on(r.event,n,i)}else if(e.length===1&&ii(e[0])){var a=e[0];this.on(r.event,a)}else if(e.length===0||e.length===1&&In(e[0])){for(var o=e.length===1?e[0]:null,s=0;s<this.length;s++){var u=this[s],l=!r.ableField||u._private[r.ableField],f=u._private[r.field]!=r.value;if(r.overrideAble){var c=r.overrideAble(u);if(c!==void 0&&(l=c,!c))return this}l&&(u._private[r.field]=r.value,f&&t.push(u))}var d=this.spawn(t);d.updateStyle(),d.emit(r.event),o&&d.emit(o)}return this}}function tc(r){Eu[r.field]=function(){var e=this[0];if(e){if(r.overrideField){var t=r.overrideField(e);if(t!==void 0)return t}return e._private[r.field]}},Eu[r.on]=R_({event:r.on,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!0}),Eu[r.off]=R_({event:r.off,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!1})}tc({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});tc({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});tc({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});tc({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});Eu.deselect=Eu.unselect;Eu.grabbed=function(){var r=this[0];if(r)return r._private.grabbed};tc({field:"active",on:"activate",off:"unactivate"});tc({field:"pannable",on:"panify",off:"unpanify"});Eu.inactive=function(){var r=this[0];if(r)return!r._private.active};var oa={},F_=function(e){return function(n){for(var i=this,a=[],o=0;o<i.length;o++){var s=i[o];if(s.isNode()){for(var u=!1,l=s.connectedEdges(),f=0;f<l.length;f++){var c=l[f],d=c.source(),h=c.target();if(e.noIncomingEdges&&h===s&&d!==s||e.noOutgoingEdges&&d===s&&h!==s){u=!0;break}}u||a.push(s)}}return this.spawn(a,!0).filter(n)}},B_=function(e){return function(t){for(var n=this,i=[],a=0;a<n.length;a++){var o=n[a];if(o.isNode())for(var s=o.connectedEdges(),u=0;u<s.length;u++){var l=s[u],f=l.source(),c=l.target();e.outgoing&&f===o?(i.push(l),i.push(c)):e.incoming&&c===o&&(i.push(l),i.push(f))}}return this.spawn(i,!0).filter(t)}},z_=function(e){return function(t){for(var n=this,i=[],a={};;){var o=e.outgoing?n.outgoers():n.incomers();if(o.length===0)break;for(var s=!1,u=0;u<o.length;u++){var l=o[u],f=l.id();a[f]||(a[f]=!0,i.push(l),s=!0)}if(!s)break;n=o}return this.spawn(i,!0).filter(t)}};oa.clearTraversalCache=function(){for(var r=0;r<this.length;r++)this[r]._private.traversalCache=null};Sr(oa,{roots:F_({noIncomingEdges:!0}),leaves:F_({noOutgoingEdges:!0}),outgoers:ro(B_({outgoing:!0}),"outgoers"),successors:z_({outgoing:!0}),incomers:ro(B_({incoming:!0}),"incomers"),predecessors:z_({incoming:!0})});Sr(oa,{neighborhood:ro(function(r){for(var e=[],t=this.nodes(),n=0;n<t.length;n++)for(var i=t[n],a=i.connectedEdges(),o=0;o<a.length;o++){var s=a[o],u=s.source(),l=s.target(),f=i===u?l:u;f.length>0&&e.push(f[0]),e.push(s[0])}return this.spawn(e,!0).filter(r)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});oa.neighbourhood=oa.neighborhood;oa.closedNeighbourhood=oa.closedNeighborhood;oa.openNeighbourhood=oa.openNeighborhood;Sr(oa,{source:ro(function(e){var t=this[0],n;return t&&(n=t._private.source||t.cy().collection()),n&&e?n.filter(e):n},"source"),target:ro(function(e){var t=this[0],n;return t&&(n=t._private.target||t.cy().collection()),n&&e?n.filter(e):n},"target"),sources:q_({attr:"source"}),targets:q_({attr:"target"})});function q_(r){return function(t){for(var n=[],i=0;i<this.length;i++){var a=this[i],o=a._private[r.attr];o&&n.push(o)}return this.spawn(n,!0).filter(t)}}Sr(oa,{edgesWith:ro(G_(),"edgesWith"),edgesTo:ro(G_({thisIsSrc:!0}),"edgesTo")});function G_(r){return function(t){var n=[],i=this._private.cy,a=r||{};pr(t)&&(t=i.$(t));for(var o=0;o<t.length;o++)for(var s=t[o]._private.edges,u=0;u<s.length;u++){var l=s[u],f=l._private.data,c=this.hasElementWithId(f.source)&&t.hasElementWithId(f.target),d=t.hasElementWithId(f.source)&&this.hasElementWithId(f.target),h=c||d;h&&((a.thisIsSrc||a.thisIsTgt)&&(a.thisIsSrc&&!c||a.thisIsTgt&&!d)||n.push(l))}return this.spawn(n,!0)}}Sr(oa,{connectedEdges:ro(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var i=t[n];if(i.isNode())for(var a=i._private.edges,o=0;o<a.length;o++){var s=a[o];e.push(s)}}return this.spawn(e,!0).filter(r)},"connectedEdges"),connectedNodes:ro(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var i=t[n];i.isEdge()&&(e.push(i.source()[0]),e.push(i.target()[0]))}return this.spawn(e,!0).filter(r)},"connectedNodes"),parallelEdges:ro($_(),"parallelEdges"),codirectedEdges:ro($_({codirected:!0}),"codirectedEdges")});function $_(r){var e={codirected:!1};return r=Sr({},e,r),function(n){for(var i=[],a=this.edges(),o=r,s=0;s<a.length;s++)for(var u=a[s],l=u._private,f=l.source,c=f._private.data.id,d=l.data.target,h=f._private.edges,p=0;p<h.length;p++){var g=h[p],b=g._private.data,v=b.target,y=b.source,m=v===d&&y===c,w=c===v&&d===y;(o.codirected&&m||!o.codirected&&(m||w))&&i.push(g)}return this.spawn(i,!0).filter(n)}}Sr(oa,{components:function(e){var t=this,n=t.cy(),i=n.collection(),a=e==null?t.nodes():e.nodes(),o=[];e!=null&&a.empty()&&(a=e.sources());var s=function(f,c){i.merge(f),a.unmerge(f),c.merge(f)};if(a.empty())return t.spawn();var u=function(){var f=n.collection();o.push(f);var c=a[0];s(c,f),t.bfs({directed:!1,roots:c,visit:function(h){return s(h,f)}}),f.forEach(function(d){d.connectedEdges().forEach(function(h){t.has(h)&&f.has(h.source())&&f.has(h.target())&&f.merge(h)})})};do u();while(a.length>0);return o},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});oa.componentsOf=oa.components;var Xi=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){ui("A collection must have a reference to the core");return}var a=new Jo,o=!1;if(!t)t=[];else if(t.length>0&&on(t[0])&&!Ih(t[0])){o=!0;for(var s=[],u=new Qf,l=0,f=t.length;l<f;l++){var c=t[l];c.data==null&&(c.data={});var d=c.data;if(d.id==null)d.id=Ak();else if(e.hasElementWithId(d.id)||u.has(d.id))continue;var h=new Kp(e,c,!1);s.push(h),u.add(d.id)}t=s}this.length=0;for(var p=0,g=t.length;p<g;p++){var b=t[p][0];if(b!=null){var v=b._private.data.id;(!n||!a.has(v))&&(n&&a.set(v,{index:this.length,ele:b}),this[this.length]=b,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(y){this.lazyMap=y},rebuildMap:function(){for(var m=this.lazyMap=new Jo,w=this.eles,S=0;S<w.length;S++){var A=w[S];m.set(A.id(),{index:S,ele:A})}}},n&&(this._private.map=a),o&&!i&&this.restore()},Un=Kp.prototype=Xi.prototype=Object.create(Array.prototype);Un.instanceString=function(){return"collection"};Un.spawn=function(r,e){return new Xi(this.cy(),r,e)};Un.spawnSelf=function(){return this.spawn(this)};Un.cy=function(){return this._private.cy};Un.renderer=function(){return this._private.cy.renderer()};Un.element=function(){return this[0]};Un.collection=function(){return pk(this)?this:new Xi(this._private.cy,[this])};Un.unique=function(){return new Xi(this._private.cy,this,!0)};Un.hasElementWithId=function(r){return r=""+r,this._private.map.has(r)};Un.getElementById=function(r){r=""+r;var e=this._private.cy,t=this._private.map.get(r);return t?t.ele:new Xi(e)};Un.$id=Un.getElementById;Un.poolIndex=function(){var r=this._private.cy,e=r._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index};Un.indexOf=function(r){var e=r[0]._private.data.id;return this._private.map.get(e).index};Un.indexOfId=function(r){return r=""+r,this._private.map.get(r).index};Un.json=function(r){var e=this.element(),t=this.cy();if(e==null&&r)return this;if(e!=null){var n=e._private;if(on(r)){if(t.startBatch(),r.data){e.data(r.data);var i=n.data;if(e.isEdge()){var a=!1,o={},s=r.data.source,u=r.data.target;s!=null&&s!=i.source&&(o.source=""+s,a=!0),u!=null&&u!=i.target&&(o.target=""+u,a=!0),a&&(e=e.move(o))}else{var l="parent"in r.data,f=r.data.parent;l&&(f!=null||i.parent!=null)&&f!=i.parent&&(f===void 0&&(f=null),f!=null&&(f=""+f),e=e.move({parent:f}))}}r.position&&e.position(r.position);var c=function(g,b,v){var y=r[g];y!=null&&y!==n[g]&&(y?e[b]():e[v]())};return c("removed","remove","restore"),c("selected","select","unselect"),c("selectable","selectify","unselectify"),c("locked","lock","unlock"),c("grabbable","grabify","ungrabify"),c("pannable","panify","unpanify"),r.classes!=null&&e.classes(r.classes),t.endBatch(),this}else if(r===void 0){var d={data:Qo(n.data),position:Qo(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};d.classes="";var h=0;return n.classes.forEach(function(p){return d.classes+=h++===0?p:" "+p}),d}}};Un.jsons=function(){for(var r=[],e=0;e<this.length;e++){var t=this[e],n=t.json();r.push(n)}return r};Un.clone=function(){for(var r=this.cy(),e=[],t=0;t<this.length;t++){var n=this[t],i=n.json(),a=new Kp(r,i,!1);e.push(a)}return new Xi(r,e)};Un.copy=Un.clone;Un.restore=function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=t.cy(),i=n._private,a=[],o=[],s,u=0,l=t.length;u<l;u++){var f=t[u];e&&!f.removed()||(f.isNode()?a.push(f):o.push(f))}s=a.concat(o);var c,d=function(){s.splice(c,1),c--};for(c=0;c<s.length;c++){var h=s[c],p=h._private,g=p.data;if(h.clearTraversalCache(),!(!e&&!p.removed)){if(g.id===void 0)g.id=Ak();else if(Ht(g.id))g.id=""+g.id;else if(Tu(g.id)||!pr(g.id)){ui("Can not create element with invalid string ID `"+g.id+"`"),d();continue}else if(n.hasElementWithId(g.id)){ui("Can not create second element with ID `"+g.id+"`"),d();continue}}var b=g.id;if(h.isNode()){var v=p.position;v.x==null&&(v.x=0),v.y==null&&(v.y=0)}if(h.isEdge()){for(var y=h,m=["source","target"],w=m.length,S=!1,A=0;A<w;A++){var _=m[A],E=g[_];Ht(E)&&(E=g[_]=""+g[_]),E==null||E===""?(ui("Can not create edge `"+b+"` with unspecified "+_),S=!0):n.hasElementWithId(E)||(ui("Can not create edge `"+b+"` with nonexistant "+_+" `"+E+"`"),S=!0)}if(S){d();continue}var k=n.getElementById(g.source),M=n.getElementById(g.target);k.same(M)?k._private.edges.push(y):(k._private.edges.push(y),M._private.edges.push(y)),y._private.source=k,y._private.target=M}p.map=new Jo,p.map.set(b,{ele:h,index:0}),p.removed=!1,e&&n.addToPool(h)}for(var T=0;T<a.length;T++){var C=a[T],R=C._private.data;Ht(R.parent)&&(R.parent=""+R.parent);var x=R.parent,B=x!=null;if(B||C._private.parent){var D=C._private.parent?n.collection().merge(C._private.parent):n.getElementById(x);if(D.empty())R.parent=void 0;else if(D[0].removed())vn("Node added with missing parent, reference to parent removed"),R.parent=void 0,C._private.parent=null;else{for(var O=!1,G=D;!G.empty();){if(C.same(G)){O=!0,R.parent=void 0;break}G=G.parent()}O||(D[0]._private.children.push(C),C._private.parent=D[0],i.hasCompoundNodes=!0)}}}if(s.length>0){for(var V=s.length===t.length?t:new Xi(n,s),I=0;I<V.length;I++){var z=V[I];z.isNode()||(z.parallelEdges().clearTraversalCache(),z.source().clearTraversalCache(),z.target().clearTraversalCache())}var P;i.hasCompoundNodes?P=n.collection().merge(V).merge(V.connectedNodes()).merge(V.parent()):P=V,P.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(r),r?V.emitAndNotify("add"):e&&V.emit("add")}return t};Un.removed=function(){var r=this[0];return r&&r._private.removed};Un.inside=function(){var r=this[0];return r&&!r._private.removed};Un.remove=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=[],i={},a=t._private.cy;function o(x){for(var B=x._private.edges,D=0;D<B.length;D++)u(B[D])}function s(x){for(var B=x._private.children,D=0;D<B.length;D++)u(B[D])}function u(x){var B=i[x.id()];e&&x.removed()||B||(i[x.id()]=!0,x.isNode()?(n.push(x),o(x),s(x)):n.unshift(x))}for(var l=0,f=t.length;l<f;l++){var c=t[l];u(c)}function d(x,B){var D=x._private.edges;ku(D,B),x.clearTraversalCache()}function h(x){x.clearTraversalCache()}var p=[];p.ids={};function g(x,B){B=B[0],x=x[0];var D=x._private.children,O=x.id();ku(D,B),B._private.parent=null,p.ids[O]||(p.ids[O]=!0,p.push(x))}t.dirtyCompoundBoundsCache(),e&&a.removeFromPool(n);for(var b=0;b<n.length;b++){var v=n[b];if(v.isEdge()){var y=v.source()[0],m=v.target()[0];d(y,v),d(m,v);for(var w=v.parallelEdges(),S=0;S<w.length;S++){var A=w[S];h(A),A.isBundledBezier()&&A.dirtyBoundingBoxCache()}}else{var _=v.parent();_.length!==0&&g(_,v)}e&&(v._private.removed=!0)}var E=a._private.elements;a._private.hasCompoundNodes=!1;for(var k=0;k<E.length;k++){var M=E[k];if(M.isParent()){a._private.hasCompoundNodes=!0;break}}var T=new Xi(this.cy(),n);T.size()>0&&(r?T.emitAndNotify("remove"):e&&T.emit("remove"));for(var C=0;C<p.length;C++){var R=p[C];(!e||!R.removed())&&R.updateStyle()}return T};Un.move=function(r){var e=this._private.cy,t=this,n=!1,i=!1,a=function(p){return p==null?p:""+p};if(r.source!==void 0||r.target!==void 0){var o=a(r.source),s=a(r.target),u=o!=null&&e.hasElementWithId(o),l=s!=null&&e.hasElementWithId(s);(u||l)&&(e.batch(function(){t.remove(n,i),t.emitAndNotify("moveout");for(var h=0;h<t.length;h++){var p=t[h],g=p._private.data;p.isEdge()&&(u&&(g.source=o),l&&(g.target=s))}t.restore(n,i)}),t.emitAndNotify("move"))}else if(r.parent!==void 0){var f=a(r.parent),c=f===null||e.hasElementWithId(f);if(c){var d=f===null?void 0:f;e.batch(function(){var h=t.remove(n,i);h.emitAndNotify("moveout");for(var p=0;p<t.length;p++){var g=t[p],b=g._private.data;g.isNode()&&(b.parent=d)}h.restore(n,i)}),t.emitAndNotify("move")}}return this};[qk,C8,Jd,Su,qf,G8,Jp,rB,iL,aL,sB,wp,ep,Yi,Eu,oa].forEach(function(r){Sr(Un,r)});var pB={add:function(e){var t,n=this;if(Ha(e)){var i=e;if(i._private.cy===n)t=i.restore();else{for(var a=[],o=0;o<i.length;o++){var s=i[o];a.push(s.json())}t=new Xi(n,a)}}else if(In(e)){var u=e;t=new Xi(n,u)}else if(on(e)&&(In(e.nodes)||In(e.edges))){for(var l=e,f=[],c=["nodes","edges"],d=0,h=c.length;d<h;d++){var p=c[d],g=l[p];if(In(g))for(var b=0,v=g.length;b<v;b++){var y=Sr({group:p},g[b]);f.push(y)}}t=new Xi(n,f)}else{var m=e;t=new Kp(n,m).collection()}return t},remove:function(e){if(!Ha(e)){if(pr(e)){var t=e;e=this.$(t)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function vB(r,e,t,n){var i=4,a=.001,o=1e-7,s=10,u=11,l=1/(u-1),f=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var c=0;c<4;++c)if(typeof arguments[c]!="number"||isNaN(arguments[c])||!isFinite(arguments[c]))return!1;r=Math.min(r,1),t=Math.min(t,1),r=Math.max(r,0),t=Math.max(t,0);var d=f?new Float32Array(u):new Array(u);function h(M,T){return 1-3*T+3*M}function p(M,T){return 3*T-6*M}function g(M){return 3*M}function b(M,T,C){return((h(T,C)*M+p(T,C))*M+g(T))*M}function v(M,T,C){return 3*h(T,C)*M*M+2*p(T,C)*M+g(T)}function y(M,T){for(var C=0;C<i;++C){var R=v(T,r,t);if(R===0)return T;var x=b(T,r,t)-M;T-=x/R}return T}function m(){for(var M=0;M<u;++M)d[M]=b(M*l,r,t)}function w(M,T,C){var R,x,B=0;do x=T+(C-T)/2,R=b(x,r,t)-M,R>0?C=x:T=x;while(Math.abs(R)>o&&++B<s);return x}function S(M){for(var T=0,C=1,R=u-1;C!==R&&d[C]<=M;++C)T+=l;--C;var x=(M-d[C])/(d[C+1]-d[C]),B=T+x*l,D=v(B,r,t);return D>=a?y(M,B):D===0?B:w(M,T,T+l)}var A=!1;function _(){A=!0,(r!==e||t!==n)&&m()}var E=function(T){return A||_(),r===e&&t===n?T:T===0?0:T===1?1:b(S(T),e,n)};E.getControlPoints=function(){return[{x:r,y:e},{x:t,y:n}]};var k="generateBezier("+[r,e,t,n]+")";return E.toString=function(){return k},E}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var gB=function(){function r(n){return-n.tension*n.x-n.friction*n.v}function e(n,i,a){var o={x:n.x+a.dx*i,v:n.v+a.dv*i,tension:n.tension,friction:n.friction};return{dx:o.v,dv:r(o)}}function t(n,i){var a={dx:n.v,dv:r(n)},o=e(n,i*.5,a),s=e(n,i*.5,o),u=e(n,i,s),l=1/6*(a.dx+2*(o.dx+s.dx)+u.dx),f=1/6*(a.dv+2*(o.dv+s.dv)+u.dv);return n.x=n.x+l*i,n.v=n.v+f*i,n}return function n(i,a,o){var s={x:-1,v:0,tension:null,friction:null},u=[0],l=0,f=1/1e4,c=16/1e3,d,h,p;for(i=parseFloat(i)||500,a=parseFloat(a)||20,o=o||null,s.tension=i,s.friction=a,d=o!==null,d?(l=n(i,a),h=l/o*c):h=c;p=t(p||s,h),u.push(1+p.x),l+=16,Math.abs(p.x)>f&&Math.abs(p.v)>f;);return d?function(g){return u[g*(u.length-1)|0]}:l}}(),zn=function(e,t,n,i){var a=vB(e,t,n,i);return function(o,s,u){return o+(s-o)*a(u)}},tp={linear:function(e,t,n){return e+(t-e)*n},ease:zn(.25,.1,.25,1),"ease-in":zn(.42,0,1,1),"ease-out":zn(0,0,.58,1),"ease-in-out":zn(.42,0,.58,1),"ease-in-sine":zn(.47,0,.745,.715),"ease-out-sine":zn(.39,.575,.565,1),"ease-in-out-sine":zn(.445,.05,.55,.95),"ease-in-quad":zn(.55,.085,.68,.53),"ease-out-quad":zn(.25,.46,.45,.94),"ease-in-out-quad":zn(.455,.03,.515,.955),"ease-in-cubic":zn(.55,.055,.675,.19),"ease-out-cubic":zn(.215,.61,.355,1),"ease-in-out-cubic":zn(.645,.045,.355,1),"ease-in-quart":zn(.895,.03,.685,.22),"ease-out-quart":zn(.165,.84,.44,1),"ease-in-out-quart":zn(.77,0,.175,1),"ease-in-quint":zn(.755,.05,.855,.06),"ease-out-quint":zn(.23,1,.32,1),"ease-in-out-quint":zn(.86,0,.07,1),"ease-in-expo":zn(.95,.05,.795,.035),"ease-out-expo":zn(.19,1,.22,1),"ease-in-out-expo":zn(1,0,0,1),"ease-in-circ":zn(.6,.04,.98,.335),"ease-out-circ":zn(.075,.82,.165,1),"ease-in-out-circ":zn(.785,.135,.15,.86),spring:function(e,t,n){if(n===0)return tp.linear;var i=gB(e,t,n);return function(a,o,s){return a+(o-a)*i(s)}},"cubic-bezier":zn};function U_(r,e,t,n,i){if(n===1||e===t)return t;var a=i(e,t,n);return r==null||((r.roundValue||r.color)&&(a=Math.round(a)),r.min!==void 0&&(a=Math.max(a,r.min)),r.max!==void 0&&(a=Math.min(a,r.max))),a}function H_(r,e){return r.pfValue!=null||r.value!=null?r.pfValue!=null&&(e==null||e.type.units!=="%")?r.pfValue:r.value:r}function sf(r,e,t,n,i){var a=i!=null?i.type:null;t<0?t=0:t>1&&(t=1);var o=H_(r,i),s=H_(e,i);if(Ht(o)&&Ht(s))return U_(a,o,s,t,n);if(In(o)&&In(s)){for(var u=[],l=0;l<s.length;l++){var f=o[l],c=s[l];if(f!=null&&c!=null){var d=U_(a,f,c,t,n);u.push(d)}else u.push(c)}return u}}function mB(r,e,t,n){var i=!n,a=r._private,o=e._private,s=o.easing,u=o.startTime,l=n?r:r.cy(),f=l.style();if(!o.easingImpl)if(s==null)o.easingImpl=tp.linear;else{var c;if(pr(s)){var d=f.parse("transition-timing-function",s);c=d.value}else c=s;var h,p;pr(c)?(h=c,p=[]):(h=c[1],p=c.slice(2).map(function(V){return+V})),p.length>0?(h==="spring"&&p.push(o.duration),o.easingImpl=tp[h].apply(null,p)):o.easingImpl=tp[h]}var g=o.easingImpl,b;if(o.duration===0?b=1:b=(t-u)/o.duration,o.applying&&(b=o.progress),b<0?b=0:b>1&&(b=1),o.delay==null){var v=o.startPosition,y=o.position;if(y&&i&&!r.locked()){var m={};Mc(v.x,y.x)&&(m.x=sf(v.x,y.x,b,g)),Mc(v.y,y.y)&&(m.y=sf(v.y,y.y,b,g)),r.position(m)}var w=o.startPan,S=o.pan,A=a.pan,_=S!=null&&n;_&&(Mc(w.x,S.x)&&(A.x=sf(w.x,S.x,b,g)),Mc(w.y,S.y)&&(A.y=sf(w.y,S.y,b,g)),r.emit("pan"));var E=o.startZoom,k=o.zoom,M=k!=null&&n;M&&(Mc(E,k)&&(a.zoom=vh(a.minZoom,sf(E,k,b,g),a.maxZoom)),r.emit("zoom")),(_||M)&&r.emit("viewport");var T=o.style;if(T&&T.length>0&&i){for(var C=0;C<T.length;C++){var R=T[C],x=R.name,B=R,D=o.startStyle[x],O=f.properties[D.name],G=sf(D,B,b,g,O);f.overrideBypass(r,x,G)}r.emit("style")}}return o.progress=b,b}function Mc(r,e){return r==null||e==null?!1:Ht(r)&&Ht(e)?!0:!!(r&&e)}function yB(r,e,t,n){var i=e._private;i.started=!0,i.startTime=t-i.progress*i.duration}function j_(r,e){var t=e._private.aniEles,n=[];function i(f,c){var d=f._private,h=d.animation.current,p=d.animation.queue,g=!1;if(h.length===0){var b=p.shift();b&&h.push(b)}for(var v=function(A){for(var _=A.length-1;_>=0;_--){var E=A[_];E()}A.splice(0,A.length)},y=h.length-1;y>=0;y--){var m=h[y],w=m._private;if(w.stopped){h.splice(y,1),w.hooked=!1,w.playing=!1,w.started=!1,v(w.frames);continue}!w.playing&&!w.applying||(w.playing&&w.applying&&(w.applying=!1),w.started||yB(f,m,r),mB(f,m,r,c),w.applying&&(w.applying=!1),v(w.frames),w.step!=null&&w.step(r),m.completed()&&(h.splice(y,1),w.hooked=!1,w.playing=!1,w.started=!1,v(w.completes)),g=!0)}return!c&&h.length===0&&p.length===0&&n.push(f),g}for(var a=!1,o=0;o<t.length;o++){var s=t[o],u=i(s);a=a||u}var l=i(e,!0);(a||l)&&(t.length>0?e.notify("draw",t):e.notify("draw")),t.unmerge(n),e.emit("step")}var bB={animate:pn.animate(),animation:pn.animation(),animated:pn.animated(),clearQueue:pn.clearQueue(),delay:pn.delay(),delayAnimation:pn.delayAnimation(),stop:pn.stop(),addToAnimationPool:function(e){var t=this;t.styleEnabled()&&t._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function t(){e._private.animationsRunning&&mp(function(a){j_(a,e),t()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(a,o){j_(o,e)},n.beforeRenderPriorities.animations):t()}},wB={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var i=t.qualifier;return i!=null?e!==n.target&&Ih(n.target)&&i.matches(n.target):!0},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e}},Pd=function(e){return pr(e)?new Lu(e):e},uL={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new ev(wB,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,n){return this.emitter().on(e,Pd(t),n),this},removeListener:function(e,t,n){return this.emitter().removeListener(e,Pd(t),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,n){return this.emitter().one(e,Pd(t),n),this},once:function(e,t,n){return this.emitter().one(e,Pd(t),n),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};pn.eventAliasesOn(uL);var d2={png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)},jpg:function(e){var t=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",t.jpg(e)}};d2.jpeg=d2.jpg;var rp={layout:function(e){var t=this;if(e==null){ui("Layout options must be specified to make a layout");return}if(e.name==null){ui("A `name` must be specified to make a layout");return}var n=e.name,i=t.extension("layout",n);if(i==null){ui("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var a;pr(e.eles)?a=t.$(e.eles):a=e.eles!=null?e.eles:t.$();var o=new i(Sr({},e,{cy:t,eles:a}));return o}};rp.createLayout=rp.makeLayout=rp.layout;var _B={notify:function(e,t){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var i=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();t!=null&&i.merge(t);return}if(n.notificationsEnabled){var a=this.renderer();this.destroyed()||!a||a.notify(e,t)}},notifications:function(e){var t=this._private;return e===void 0?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var i=e.batchNotifications[n];i.empty()?t.notify(n):t.notify(n,i)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),i=0;i<n.length;i++){var a=n[i],o=e[a],s=t.getElementById(a);s.data(o)}})}},xB=Ki({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),p2={renderTo:function(e,t,n,i){var a=this._private.renderer;return a.renderTo(e,t,n,i),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this,n=t.extension("renderer",e.name);if(n==null){ui("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&vn("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var i=xB(e);i.cy=t,t._private.renderer=new n(i),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var i=n._private;i.rscratch={},i.rstyle={},i.animation.current=[],i.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};p2.invalidateDimensions=p2.resize;var np={collection:function(e,t){return pr(e)?this.$(e):Ha(e)?e.collection():In(e)?(t||(t={}),new Xi(this,e,t.unique,t.removed)):new Xi(this)},nodes:function(e){var t=this.$(function(n){return n.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(n){return n.isEdge()});return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};np.elements=np.filter=np.$;var ua={},ih="t",SB="f";ua.apply=function(r){for(var e=this,t=e._private,n=t.cy,i=n.collection(),a=0;a<r.length;a++){var o=r[a],s=e.getContextMeta(o);if(!s.empty){var u=e.getContextStyle(s),l=e.applyContextStyle(s,u,o);o._private.appliedInitStyle?e.updateTransitions(o,l.diffProps):o._private.appliedInitStyle=!0;var f=e.updateStyleHints(o);f&&i.push(o)}}return i};ua.getPropertiesDiff=function(r,e){var t=this,n=t._private.propDiffs=t._private.propDiffs||{},i=r+"-"+e,a=n[i];if(a)return a;for(var o=[],s={},u=0;u<t.length;u++){var l=t[u],f=r[u]===ih,c=e[u]===ih,d=f!==c,h=l.mappedProperties.length>0;if(d||c&&h){var p=void 0;d&&h||d?p=l.properties:h&&(p=l.mappedProperties);for(var g=0;g<p.length;g++){for(var b=p[g],v=b.name,y=!1,m=u+1;m<t.length;m++){var w=t[m],S=e[m]===ih;if(S&&(y=w.properties[b.name]!=null,y))break}!s[v]&&!y&&(s[v]=!0,o.push(v))}}}return n[i]=o,o};ua.getContextMeta=function(r){for(var e=this,t="",n,i=r._private.styleCxtKey||"",a=0;a<e.length;a++){var o=e[a],s=o.selector&&o.selector.matches(r);s?t+=ih:t+=SB}return n=e.getPropertiesDiff(i,t),r._private.styleCxtKey=t,{key:t,diffPropNames:n,empty:n.length===0}};ua.getContextStyle=function(r){var e=r.key,t=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var i={_private:{key:e}},a=0;a<t.length;a++){var o=t[a],s=e[a]===ih;if(s)for(var u=0;u<o.properties.length;u++){var l=o.properties[u];i[l.name]=l}}return n[e]=i,i};ua.applyContextStyle=function(r,e,t){for(var n=this,i=r.diffPropNames,a={},o=n.types,s=0;s<i.length;s++){var u=i[s],l=e[u],f=t.pstyle(u);if(!l)if(f)f.bypass?l={name:u,deleteBypassed:!0}:l={name:u,delete:!0};else continue;if(f!==l){if(l.mapped===o.fn&&f!=null&&f.mapping!=null&&f.mapping.value===l.value){var c=f.mapping,d=c.fnValue=l.value(t);if(d===c.prevFnValue)continue}var h=a[u]={prev:f};n.applyParsedProperty(t,l),h.next=t.pstyle(u),h.next&&h.next.bypass&&(h.next=h.next.bypassed)}}return{diffProps:a}};ua.updateStyleHints=function(r){var e=r._private,t=this,n=t.propertyGroupNames,i=t.propertyGroupKeys,a=function(he,ve,Ce){return t.getPropertiesHash(he,ve,Ce)},o=e.styleKey;if(r.removed())return!1;var s=e.group==="nodes",u=r._private.style;n=Object.keys(u);for(var l=0;l<i.length;l++){var f=i[l];e.styleKeys[f]=[xf,Vc]}for(var c=function(he,ve){return e.styleKeys[ve][0]=hh(he,e.styleKeys[ve][0])},d=function(he,ve){return e.styleKeys[ve][1]=dh(he,e.styleKeys[ve][1])},h=function(he,ve){c(he,ve),d(he,ve)},p=function(he,ve){for(var Ce=0;Ce<he.length;Ce++){var Le=he.charCodeAt(Ce);c(Le,ve),d(Le,ve)}},g=2e9,b=function(he){return-128<he&&he<128&&Math.floor(he)!==he?g-(he*1024|0):he},v=0;v<n.length;v++){var y=n[v],m=u[y];if(m!=null){var w=this.properties[y],S=w.type,A=w.groupKey,_=void 0;w.hashOverride!=null?_=w.hashOverride(r,m):m.pfValue!=null&&(_=m.pfValue);var E=w.enums==null?m.value:null,k=_!=null,M=E!=null,T=k||M,C=m.units;if(S.number&&T&&!S.multiple){var R=k?_:E;h(b(R),A),!k&&C!=null&&p(C,A)}else p(m.strValue,A)}}for(var x=[xf,Vc],B=0;B<i.length;B++){var D=i[B],O=e.styleKeys[D];x[0]=hh(O[0],x[0]),x[1]=dh(O[1],x[1])}e.styleKey=F6(x[0],x[1]);var G=e.styleKeys;e.labelDimsKey=lu(G.labelDimensions);var V=a(r,["label"],G.labelDimensions);if(e.labelKey=lu(V),e.labelStyleKey=lu(xd(G.commonLabel,V)),!s){var I=a(r,["source-label"],G.labelDimensions);e.sourceLabelKey=lu(I),e.sourceLabelStyleKey=lu(xd(G.commonLabel,I));var z=a(r,["target-label"],G.labelDimensions);e.targetLabelKey=lu(z),e.targetLabelStyleKey=lu(xd(G.commonLabel,z))}if(s){var P=e.styleKeys,q=P.nodeBody,F=P.nodeBorder,U=P.backgroundImage,W=P.compound,X=P.pie,te=[q,F,U,W,X].filter(function(ne){return ne!=null}).reduce(xd,[xf,Vc]);e.nodeKey=lu(te),e.hasPie=X!=null&&X[0]!==xf&&X[1]!==Vc}return o!==e.styleKey};ua.clearStyleHints=function(r){var e=r._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null};ua.applyParsedProperty=function(r,e){var t=this,n=e,i=r._private.style,a,o=t.types,s=t.properties[n.name].type,u=n.bypass,l=i[n.name],f=l&&l.bypass,c=r._private,d="mapping",h=function(q){return q==null?null:q.pfValue!=null?q.pfValue:q.value},p=function(){var q=h(l),F=h(n);t.checkTriggers(r,n.name,q,F)};if(n&&n.name.substr(0,3)==="pie"&&vn("The pie style properties are deprecated.  Create charts using background images instead."),e.name==="curve-style"&&r.isEdge()&&(e.value!=="bezier"&&r.isLoop()||e.value==="haystack"&&(r.source().isParent()||r.target().isParent()))&&(n=e=this.parse(e.name,"bezier",u)),n.delete)return i[n.name]=void 0,p(),!0;if(n.deleteBypassed)return l?l.bypass?(l.bypassed=void 0,p(),!0):!1:(p(),!0);if(n.deleteBypass)return l?l.bypass?(i[n.name]=l.bypassed,p(),!0):!1:(p(),!0);var g=function(){vn("Do not assign mappings to elements without corresponding data (i.e. ele `"+r.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case o.mapData:{for(var b=n.field.split("."),v=c.data,y=0;y<b.length&&v;y++){var m=b[y];v=v[m]}if(v==null)return g(),!1;var w;if(Ht(v)){var S=n.fieldMax-n.fieldMin;S===0?w=0:w=(v-n.fieldMin)/S}else return vn("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+v+"` for `"+r.id()+"` is non-numeric)"),!1;if(w<0?w=0:w>1&&(w=1),s.color){var A=n.valueMin[0],_=n.valueMax[0],E=n.valueMin[1],k=n.valueMax[1],M=n.valueMin[2],T=n.valueMax[2],C=n.valueMin[3]==null?1:n.valueMin[3],R=n.valueMax[3]==null?1:n.valueMax[3],x=[Math.round(A+(_-A)*w),Math.round(E+(k-E)*w),Math.round(M+(T-M)*w),Math.round(C+(R-C)*w)];a={bypass:n.bypass,name:n.name,value:x,strValue:"rgb("+x[0]+", "+x[1]+", "+x[2]+")"}}else if(s.number){var B=n.valueMin+(n.valueMax-n.valueMin)*w;a=this.parse(n.name,B,n.bypass,d)}else return!1;if(!a)return g(),!1;a.mapping=n,n=a;break}case o.data:{for(var D=n.field.split("."),O=c.data,G=0;G<D.length&&O;G++){var V=D[G];O=O[V]}if(O!=null&&(a=this.parse(n.name,O,n.bypass,d)),!a)return g(),!1;a.mapping=n,n=a;break}case o.fn:{var I=n.value,z=n.fnValue!=null?n.fnValue:I(r);if(n.prevFnValue=z,z==null)return vn("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+r.id()+"` is null)"),!1;if(a=this.parse(n.name,z,n.bypass,d),!a)return vn("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+r.id()+"` is invalid)"),!1;a.mapping=Qo(n),n=a;break}case void 0:break;default:return!1}return u?(f?n.bypassed=l.bypassed:n.bypassed=l,i[n.name]=n):f?l.bypassed=n:i[n.name]=n,p(),!0};ua.cleanElements=function(r,e){for(var t=0;t<r.length;t++){var n=r[t];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var i=n._private.style,a=Object.keys(i),o=0;o<a.length;o++){var s=a[o],u=i[s];u!=null&&(u.bypass?u.bypassed=null:i[s]=null)}}};ua.update=function(){var r=this._private.cy,e=r.mutableElements();e.updateStyle()};ua.updateTransitions=function(r,e){var t=this,n=r._private,i=r.pstyle("transition-property").value,a=r.pstyle("transition-duration").pfValue,o=r.pstyle("transition-delay").pfValue;if(i.length>0&&a>0){for(var s={},u=!1,l=0;l<i.length;l++){var f=i[l],c=r.pstyle(f),d=e[f];if(d){var h=d.prev,p=h,g=d.next!=null?d.next:c,b=!1,v=void 0,y=1e-6;p&&(Ht(p.pfValue)&&Ht(g.pfValue)?(b=g.pfValue-p.pfValue,v=p.pfValue+y*b):Ht(p.value)&&Ht(g.value)?(b=g.value-p.value,v=p.value+y*b):In(p.value)&&In(g.value)&&(b=p.value[0]!==g.value[0]||p.value[1]!==g.value[1]||p.value[2]!==g.value[2],v=p.strValue),b&&(s[f]=g.strValue,this.applyBypass(r,f,v),u=!0))}}if(!u)return;n.transitioning=!0,new Jf(function(m){o>0?r.delayAnimation(o).play().promise().then(m):m()}).then(function(){return r.animation({style:s,duration:a,easing:r.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){t.removeBypasses(r,i),r.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(r,i),r.emitAndNotify("style"),n.transitioning=!1)};ua.checkTrigger=function(r,e,t,n,i,a){var o=this.properties[e],s=i(o);s!=null&&s(t,n)&&a(o)};ua.checkZOrderTrigger=function(r,e,t,n){var i=this;this.checkTrigger(r,e,t,n,function(a){return a.triggersZOrder},function(){i._private.cy.notify("zorder",r)})};ua.checkBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(i){return i.triggersBounds},function(i){r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),i.triggersBoundsOfParallelBeziers&&(e==="curve-style"&&(t==="bezier"||n==="bezier")||e==="display"&&(t==="none"||n==="none"))&&r.parallelEdges().forEach(function(a){a.isBundledBezier()&&a.dirtyBoundingBoxCache()})})};ua.checkTriggers=function(r,e,t,n){r.dirtyStyleCache(),this.checkZOrderTrigger(r,e,t,n),this.checkBoundsTrigger(r,e,t,n)};var Bh={};Bh.applyBypass=function(r,e,t,n){var i=this,a=[],o=!0;if(e==="*"||e==="**"){if(t!==void 0)for(var s=0;s<i.properties.length;s++){var u=i.properties[s],l=u.name,f=this.parse(l,t,!0);f&&a.push(f)}}else if(pr(e)){var c=this.parse(e,t,!0);c&&a.push(c)}else if(on(e)){var d=e;n=t;for(var h=Object.keys(d),p=0;p<h.length;p++){var g=h[p],b=d[g];if(b===void 0&&(b=d[Xp(g)]),b!==void 0){var v=this.parse(g,b,!0);v&&a.push(v)}}}else return!1;if(a.length===0)return!1;for(var y=!1,m=0;m<r.length;m++){for(var w=r[m],S={},A=void 0,_=0;_<a.length;_++){var E=a[_];if(n){var k=w.pstyle(E.name);A=S[E.name]={prev:k}}y=this.applyParsedProperty(w,Qo(E))||y,n&&(A.next=w.pstyle(E.name))}y&&this.updateStyleHints(w),n&&this.updateTransitions(w,S,o)}return y};Bh.overrideBypass=function(r,e,t){e=nw(e);for(var n=0;n<r.length;n++){var i=r[n],a=i._private.style[e],o=this.properties[e].type,s=o.color,u=o.mutiple,l=a?a.pfValue!=null?a.pfValue:a.value:null;!a||!a.bypass?this.applyBypass(i,e,t):(a.value=t,a.pfValue!=null&&(a.pfValue=t),s?a.strValue="rgb("+t.join(",")+")":u?a.strValue=t.join(" "):a.strValue=""+t,this.updateStyleHints(i)),this.checkTriggers(i,e,l,t)}};Bh.removeAllBypasses=function(r,e){return this.removeBypasses(r,this.propertyNames,e)};Bh.removeBypasses=function(r,e,t){for(var n=!0,i=0;i<r.length;i++){for(var a=r[i],o={},s=0;s<e.length;s++){var u=e[s],l=this.properties[u],f=a.pstyle(l.name);if(!(!f||!f.bypass)){var c="",d=this.parse(u,c,!0),h=o[l.name]={prev:f};this.applyParsedProperty(a,d),h.next=a.pstyle(l.name)}}this.updateStyleHints(a),t&&this.updateTransitions(a,o,n)}};var pw={};pw.getEmSizeInPixels=function(){var r=this.containerCss("font-size");return r!=null?parseFloat(r):1};pw.containerCss=function(r){var e=this._private.cy,t=e.container();if(Yn&&t&&Yn.getComputedStyle)return Yn.getComputedStyle(t).getPropertyValue(r)};var is={};is.getRenderedStyle=function(r,e){return e?this.getStylePropertyValue(r,e,!0):this.getRawStyle(r,!0)};is.getRawStyle=function(r,e){var t=this;if(r=r[0],r){for(var n={},i=0;i<t.properties.length;i++){var a=t.properties[i],o=t.getStylePropertyValue(r,a.name,e);o!=null&&(n[a.name]=o,n[Xp(a.name)]=o)}return n}};is.getIndexedStyle=function(r,e,t,n){var i=r.pstyle(e)[t][n];return i??r.cy().style().getDefaultProperty(e)[t][0]};is.getStylePropertyValue=function(r,e,t){var n=this;if(r=r[0],r){var i=n.properties[e];i.alias&&(i=i.pointsTo);var a=i.type,o=r.pstyle(i.name);if(o){var s=o.value,u=o.units,l=o.strValue;if(t&&a.number&&s!=null&&Ht(s)){var f=r.cy().zoom(),c=function(b){return b*f},d=function(b,v){return c(b)+v},h=In(s),p=h?u.every(function(g){return g!=null}):u!=null;return p?h?s.map(function(g,b){return d(g,u[b])}).join(" "):d(s,u):h?s.map(function(g){return pr(g)?g:""+c(g)}).join(" "):""+c(s)}else if(l!=null)return l}return null}};is.getAnimationStartStyle=function(r,e){for(var t={},n=0;n<e.length;n++){var i=e[n],a=i.name,o=r.pstyle(a);o!==void 0&&(on(o)?o=this.parse(a,o.strValue):o=this.parse(a,o)),o&&(t[a]=o)}return t};is.getPropsList=function(r){var e=this,t=[],n=r,i=e.properties;if(n)for(var a=Object.keys(n),o=0;o<a.length;o++){var s=a[o],u=n[s],l=i[s]||i[nw(s)],f=this.parse(l.name,u);f&&t.push(f)}return t};is.getNonDefaultPropertiesHash=function(r,e,t){var n=t.slice(),i,a,o,s,u,l;for(u=0;u<e.length;u++)if(i=e[u],a=r.pstyle(i,!1),a!=null)if(a.pfValue!=null)n[0]=hh(s,n[0]),n[1]=dh(s,n[1]);else for(o=a.strValue,l=0;l<o.length;l++)s=o.charCodeAt(l),n[0]=hh(s,n[0]),n[1]=dh(s,n[1]);return n};is.getPropertiesHash=is.getNonDefaultPropertiesHash;var nv={};nv.appendFromJson=function(r){for(var e=this,t=0;t<r.length;t++){var n=r[t],i=n.selector,a=n.style||n.css,o=Object.keys(a);e.selector(i);for(var s=0;s<o.length;s++){var u=o[s],l=a[u];e.css(u,l)}}return e};nv.fromJson=function(r){var e=this;return e.resetToDefault(),e.appendFromJson(r),e};nv.json=function(){for(var r=[],e=this.defaultLength;e<this.length;e++){for(var t=this[e],n=t.selector,i=t.properties,a={},o=0;o<i.length;o++){var s=i[o];a[s.name]=s.strValue}r.push({selector:n?n.toString():"core",style:a})}return r};var vw={};vw.appendFromString=function(r){var e=this,t=this,n=""+r,i,a,o;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function s(){n.length>i.length?n=n.substr(i.length):n=""}function u(){a.length>o.length?a=a.substr(o.length):a=""}for(;;){var l=n.match(/^\s*$/);if(l)break;var f=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!f){vn("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}i=f[0];var c=f[1];if(c!=="core"){var d=new Lu(c);if(d.invalid){vn("Skipping parsing of block: Invalid selector found in string stylesheet: "+c),s();continue}}var h=f[2],p=!1;a=h;for(var g=[];;){var b=a.match(/^\s*$/);if(b)break;var v=a.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!v){vn("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+h),p=!0;break}o=v[0];var y=v[1],m=v[2],w=e.properties[y];if(!w){vn("Skipping property: Invalid property name in: "+o),u();continue}var S=t.parse(y,m);if(!S){vn("Skipping property: Invalid property definition in: "+o),u();continue}g.push({name:y,val:m}),u()}if(p){s();break}t.selector(c);for(var A=0;A<g.length;A++){var _=g[A];t.css(_.name,_.val)}s()}return t};vw.fromString=function(r){var e=this;return e.resetToDefault(),e.appendFromString(r),e};var Vi={};(function(){var r=Ni,e=E6,t=A6,n=T6,i=k6,a=function(te){return"^"+te+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},o=function(te){var ne=r+"|\\w+|"+e+"|"+t+"|"+n+"|"+i;return"^"+te+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+r+")\\s*\\,\\s*("+r+")\\s*,\\s*("+ne+")\\s*\\,\\s*("+ne+")\\)$"},s=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];Vi.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:a("data")},layoutData:{mapping:!0,regex:a("layoutData")},scratch:{mapping:!0,regex:a("scratch")},mapData:{mapping:!0,regex:o("mapData")},mapLayoutData:{mapping:!0,regex:o("mapLayoutData")},mapScratch:{mapping:!0,regex:o("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(te,ne){switch(te.length){case 2:return ne[0]!=="deg"&&ne[0]!=="rad"&&ne[1]!=="deg"&&ne[1]!=="rad";case 1:return pr(te[0])||ne[0]==="deg"||ne[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(te){var ne=te.length;return ne===1||ne===2||ne===4}}};var u={zeroNonZero:function(te,ne){return(te==null||ne==null)&&te!==ne||te==0&&ne!=0?!0:te!=0&&ne==0},any:function(te,ne){return te!=ne},emptyNonEmpty:function(te,ne){var he=Tu(te),ve=Tu(ne);return he&&!ve||!he&&ve}},l=Vi.types,f=[{name:"label",type:l.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any}],c=[{name:"source-label",type:l.text,triggersBounds:u.any},{name:"source-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:l.size,triggersBounds:u.any}],d=[{name:"target-label",type:l.text,triggersBounds:u.any},{name:"target-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:l.size,triggersBounds:u.any}],h=[{name:"font-family",type:l.fontFamily,triggersBounds:u.any},{name:"font-style",type:l.fontStyle,triggersBounds:u.any},{name:"font-weight",type:l.fontWeight,triggersBounds:u.any},{name:"font-size",type:l.size,triggersBounds:u.any},{name:"text-transform",type:l.textTransform,triggersBounds:u.any},{name:"text-wrap",type:l.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:l.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:l.size,triggersBounds:u.any},{name:"text-outline-width",type:l.size,triggersBounds:u.any},{name:"line-height",type:l.positiveNumber,triggersBounds:u.any}],p=[{name:"text-valign",type:l.valign,triggersBounds:u.any},{name:"text-halign",type:l.halign,triggersBounds:u.any},{name:"color",type:l.color},{name:"text-outline-color",type:l.color},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-background-padding",type:l.size,triggersBounds:u.any},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size,triggersBounds:u.any},{name:"text-border-style",type:l.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:l.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:l.justification}],g=[{name:"events",type:l.bool},{name:"text-events",type:l.bool}],b=[{name:"display",type:l.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:l.visibility,triggersZOrder:u.any},{name:"opacity",type:l.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:l.zeroOneNumber},{name:"min-zoomed-font-size",type:l.size},{name:"z-compound-depth",type:l.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:l.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:l.nonNegativeInt,triggersZOrder:u.any}],v=[{name:"overlay-padding",type:l.size,triggersBounds:u.any},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:l.overlayShape,triggersBounds:u.any}],y=[{name:"underlay-padding",type:l.size,triggersBounds:u.any},{name:"underlay-color",type:l.color},{name:"underlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:l.overlayShape,triggersBounds:u.any}],m=[{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing}],w=function(te,ne){return ne.value==="label"?-te.poolIndex():ne.pfValue},S=[{name:"height",type:l.nodeSize,triggersBounds:u.any,hashOverride:w},{name:"width",type:l.nodeSize,triggersBounds:u.any,hashOverride:w},{name:"shape",type:l.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:l.polygonPointList,triggersBounds:u.any},{name:"background-color",type:l.color},{name:"background-fill",type:l.fill},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"background-gradient-stop-colors",type:l.colors},{name:"background-gradient-stop-positions",type:l.percentages},{name:"background-gradient-direction",type:l.gradientDirection},{name:"padding",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:l.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:l.boundsExpansion,triggersBounds:u.any}],A=[{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size,triggersBounds:u.any},{name:"border-style",type:l.borderStyle}],_=[{name:"background-image",type:l.urls},{name:"background-image-crossorigin",type:l.bgCrossOrigin},{name:"background-image-opacity",type:l.zeroOneNumbers},{name:"background-image-containment",type:l.bgContainment},{name:"background-image-smoothing",type:l.bools},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-width-relative-to",type:l.bgRelativeTo},{name:"background-height-relative-to",type:l.bgRelativeTo},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"background-offset-x",type:l.bgPos},{name:"background-offset-y",type:l.bgPos}],E=[{name:"position",type:l.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:l.size,triggersBounds:u.any},{name:"min-width-bias-left",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:l.size,triggersBounds:u.any},{name:"min-height-bias-top",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:l.sizeMaybePercent,triggersBounds:u.any}],k=[{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"line-fill",type:l.fill},{name:"line-cap",type:l.lineCap},{name:"line-opacity",type:l.zeroOneNumber},{name:"line-dash-pattern",type:l.numbers},{name:"line-dash-offset",type:l.number},{name:"line-gradient-stop-colors",type:l.colors},{name:"line-gradient-stop-positions",type:l.percentages},{name:"curve-style",type:l.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:l.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:l.size,triggersBounds:u.any},{name:"control-point-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:l.numbers,triggersBounds:u.any},{name:"taxi-turn",type:l.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:l.size,triggersBounds:u.any},{name:"taxi-direction",type:l.axisDirection,triggersBounds:u.any},{name:"edge-distances",type:l.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:l.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:l.angle,triggersBounds:u.any},{name:"loop-sweep",type:l.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:l.size,triggersBounds:u.any},{name:"target-distance-from-node",type:l.size,triggersBounds:u.any}],M=[{name:"ghost",type:l.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:l.zeroOneNumber}],T=[{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],C=[];Vi.pieBackgroundN=16,C.push({name:"pie-size",type:l.sizeMaybePercent});for(var R=1;R<=Vi.pieBackgroundN;R++)C.push({name:"pie-"+R+"-background-color",type:l.color}),C.push({name:"pie-"+R+"-background-size",type:l.percent}),C.push({name:"pie-"+R+"-background-opacity",type:l.zeroOneNumber});var x=[],B=Vi.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill}].forEach(function(X){B.forEach(function(te){var ne=te+"-"+X.name,he=X.type,ve=X.triggersBounds;x.push({name:ne,type:he,triggersBounds:ve})})},{});var D=Vi.properties=[].concat(g,m,b,v,y,M,p,h,f,c,d,S,A,_,C,E,k,x,T),O=Vi.propertyGroups={behavior:g,transition:m,visibility:b,overlay:v,underlay:y,ghost:M,commonLabel:p,labelDimensions:h,mainLabel:f,sourceLabel:c,targetLabel:d,nodeBody:S,nodeBorder:A,backgroundImage:_,pie:C,compound:E,edgeLine:k,edgeArrow:x,core:T},G=Vi.propertyGroupNames={},V=Vi.propertyGroupKeys=Object.keys(O);V.forEach(function(X){G[X]=O[X].map(function(te){return te.name}),O[X].forEach(function(te){return te.groupKey=X})});var I=Vi.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Vi.propertyNames=D.map(function(X){return X.name});for(var z=0;z<D.length;z++){var P=D[z];D[P.name]=P}for(var q=0;q<I.length;q++){var F=I[q],U=D[F.pointsTo],W={name:F.name,alias:!0,pointsTo:U};D.push(W),D[F.name]=W}})();Vi.getDefaultProperty=function(r){return this.getDefaultProperties()[r]};Vi.getDefaultProperties=function(){var r=this._private;if(r.defaultProperties!=null)return r.defaultProperties;for(var e=Sr({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var f=1;f<=Vi.pieBackgroundN;f++){var c=l.name.replace("{{i}}",f),d=l.value;u[c]=d}return u},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(u,l){return Vi.arrowPrefixes.forEach(function(f){var c=f+"-"+l.name,d=l.value;u[c]=d}),u},{})),t={},n=0;n<this.properties.length;n++){var i=this.properties[n];if(!i.pointsTo){var a=i.name,o=e[a],s=this.parse(a,o);t[a]=s}}return r.defaultProperties=t,r.defaultProperties};Vi.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var iv={};iv.parse=function(r,e,t,n){var i=this;if(ii(e))return i.parseImplWarn(r,e,t,n);var a=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,o=t?"t":"f",s=""+e,u=Sk(r,s,o,a),l=i.propCache=i.propCache||[],f;return(f=l[u])||(f=l[u]=i.parseImplWarn(r,e,t,n)),(t||n==="mapping")&&(f=Qo(f),f&&(f.value=Qo(f.value))),f};iv.parseImplWarn=function(r,e,t,n){var i=this.parseImpl(r,e,t,n);return!i&&e!=null&&vn("The style property `".concat(r,": ").concat(e,"` is invalid")),i&&(i.name==="width"||i.name==="height")&&e==="label"&&vn("The style value of `label` is deprecated for `"+i.name+"`"),i};iv.parseImpl=function(r,e,t,n){var i=this;r=nw(r);var a=i.properties[r],o=e,s=i.types;if(!a||e===void 0)return null;a.alias&&(a=a.pointsTo,r=a.name);var u=pr(e);u&&(e=e.trim());var l=a.type;if(!l)return null;if(t&&(e===""||e===null))return{name:r,value:e,bypass:!0,deleteBypass:!0};if(ii(e))return{name:r,value:e,strValue:"fn",mapped:s.fn,bypass:t};var f,c;if(!(!u||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(f=new RegExp(s.data.regex).exec(e))){if(t)return!1;var d=s.data;return{name:r,value:f,strValue:""+e,mapped:d,field:f[1],bypass:t}}else if(e.length>=10&&e[0]==="m"&&(c=new RegExp(s.mapData.regex).exec(e))){if(t||l.multiple)return!1;var h=s.mapData;if(!(l.color||l.number))return!1;var p=this.parse(r,c[4]);if(!p||p.mapped)return!1;var g=this.parse(r,c[5]);if(!g||g.mapped)return!1;if(p.pfValue===g.pfValue||p.strValue===g.strValue)return vn("`"+r+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+r+": "+p.strValue+"`"),this.parse(r,p.strValue);if(l.color){var b=p.value,v=g.value,y=b[0]===v[0]&&b[1]===v[1]&&b[2]===v[2]&&(b[3]===v[3]||(b[3]==null||b[3]===1)&&(v[3]==null||v[3]===1));if(y)return!1}return{name:r,value:c,strValue:""+e,mapped:h,field:c[1],fieldMin:parseFloat(c[2]),fieldMax:parseFloat(c[3]),valueMin:p.value,valueMax:g.value,bypass:t}}}if(l.multiple&&n!=="multiple"){var m;if(u?m=e.split(/\s+/):In(e)?m=e:m=[e],l.evenMultiple&&m.length%2!==0)return null;for(var w=[],S=[],A=[],_="",E=!1,k=0;k<m.length;k++){var M=i.parse(r,m[k],t,"multiple");E=E||pr(M.value),w.push(M.value),A.push(M.pfValue!=null?M.pfValue:M.value),S.push(M.units),_+=(k>0?" ":"")+M.strValue}return l.validate&&!l.validate(w,S)?null:l.singleEnum&&E?w.length===1&&pr(w[0])?{name:r,value:w[0],strValue:w[0],bypass:t}:null:{name:r,value:w,pfValue:A,strValue:_,bypass:t,units:S}}var T=function(){for(var ne=0;ne<l.enums.length;ne++){var he=l.enums[ne];if(he===e)return{name:r,value:e,strValue:""+e,bypass:t}}return null};if(l.number){var C,R="px";if(l.units&&(C=l.units),l.implicitUnits&&(R=l.implicitUnits),!l.unitless)if(u){var x="px|em"+(l.allowPercent?"|\\%":"");C&&(x=C);var B=e.match("^("+Ni+")("+x+")?$");B&&(e=B[1],C=B[2]||R)}else(!C||l.implicitUnits)&&(C=R);if(e=parseFloat(e),isNaN(e)&&l.enums===void 0)return null;if(isNaN(e)&&l.enums!==void 0)return e=o,T();if(l.integer&&!m6(e)||l.min!==void 0&&(e<l.min||l.strictMin&&e===l.min)||l.max!==void 0&&(e>l.max||l.strictMax&&e===l.max))return null;var D={name:r,value:e,strValue:""+e+(C||""),units:C,bypass:t};return l.unitless||C!=="px"&&C!=="em"?D.pfValue=e:D.pfValue=C==="px"||!C?e:this.getEmSizeInPixels()*e,(C==="ms"||C==="s")&&(D.pfValue=C==="ms"?e:1e3*e),(C==="deg"||C==="rad")&&(D.pfValue=C==="rad"?e:hF(e)),C==="%"&&(D.pfValue=e/100),D}else if(l.propList){var O=[],G=""+e;if(G!=="none"){for(var V=G.split(/\s*,\s*|\s+/),I=0;I<V.length;I++){var z=V[I].trim();i.properties[z]?O.push(z):vn("`"+z+"` is not a valid property name")}if(O.length===0)return null}return{name:r,value:O,strValue:O.length===0?"none":O.join(" "),bypass:t}}else if(l.color){var P=D6(e);return P?{name:r,value:P,pfValue:P,strValue:"rgb("+P[0]+","+P[1]+","+P[2]+")",bypass:t}:null}else if(l.regex||l.regexes){if(l.enums){var q=T();if(q)return q}for(var F=l.regexes?l.regexes:[l.regex],U=0;U<F.length;U++){var W=new RegExp(F[U]),X=W.exec(e);if(X)return{name:r,value:l.singleRegexMatchValue?X[1]:X,strValue:""+e,bypass:t}}return null}else return l.string?{name:r,value:""+e,strValue:""+e,bypass:t}:l.enums?T():null};var aa=function r(e){if(!(this instanceof r))return new r(e);if(!rw(e)){ui("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},sa=aa.prototype;sa.instanceString=function(){return"style"};sa.clear=function(){for(var r=this._private,e=r.cy,t=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,r.contextStyles={},r.propDiffs={},this.cleanElements(t,!0),t.forEach(function(i){var a=i[0]._private;a.styleDirty=!0,a.appliedInitStyle=!1}),this};sa.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};sa.core=function(r){return this._private.coreStyle[r]||this.getDefaultProperty(r)};sa.selector=function(r){var e=r==="core"?null:new Lu(r),t=this.length++;return this[t]={selector:e,properties:[],mappedProperties:[],index:t},this};sa.css=function(){var r=this,e=arguments;if(e.length===1)for(var t=e[0],n=0;n<r.properties.length;n++){var i=r.properties[n],a=t[i.name];a===void 0&&(a=t[Xp(i.name)]),a!==void 0&&this.cssRule(i.name,a)}else e.length===2&&this.cssRule(e[0],e[1]);return this};sa.style=sa.css;sa.cssRule=function(r,e){var t=this.parse(r,e);if(t){var n=this.length-1;this[n].properties.push(t),this[n].properties[t.name]=t,t.name.match(/pie-(\d+)-background-size/)&&t.value&&(this._private.hasPie=!0),t.mapped&&this[n].mappedProperties.push(t);var i=!this[n].selector;i&&(this._private.coreStyle[t.name]=t)}return this};sa.append=function(r){return vk(r)?r.appendToStyle(this):In(r)?this.appendFromJson(r):pr(r)&&this.appendFromString(r),this};aa.fromJson=function(r,e){var t=new aa(r);return t.fromJson(e),t};aa.fromString=function(r,e){return new aa(r).fromString(e)};[ua,Bh,pw,is,nv,vw,Vi,iv].forEach(function(r){Sr(sa,r)});aa.types=sa.types;aa.properties=sa.properties;aa.propertyGroups=sa.propertyGroups;aa.propertyGroupNames=sa.propertyGroupNames;aa.propertyGroupKeys=sa.propertyGroupKeys;var EB={style:function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},setStyle:function(e){var t=this._private;return vk(e)?t.style=e.generateStyle(this):In(e)?t.style=aa.fromJson(this,e):pr(e)?t.style=aa.fromString(this,e):t.style=aa(this),t.style},updateStyle:function(){this.mutableElements().updateStyle()}},CB="single",_l={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var t=this._private;if(t.selectionType==null&&(t.selectionType=CB),e!==void 0)(e==="additive"||e==="single")&&(t.selectionType=e);else return t.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,t=this._private.pan,n,i,a,o,s;switch(e.length){case 0:return t;case 1:if(pr(e[0]))return n=e[0],t[n];if(on(e[0])){if(!this._private.panningEnabled)return this;a=e[0],o=a.x,s=a.y,Ht(o)&&(t.x=o),Ht(s)&&(t.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],i=e[1],(n==="x"||n==="y")&&Ht(i)&&(t[n]=i),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,t){var n=arguments,i=this._private.pan,a,o,s,u,l;if(!this._private.panningEnabled)return this;switch(n.length){case 1:on(e)&&(s=n[0],u=s.x,l=s.y,Ht(u)&&(i.x+=u),Ht(l)&&(i.y+=l),this.emit("pan viewport"));break;case 2:a=e,o=t,(a==="x"||a==="y")&&Ht(o)&&(i[a]+=o),this.emit("pan viewport");break}return this.notify("viewport"),this},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var i=this._private;i.zoom=n.zoom,i.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(Ht(e)&&t===void 0&&(t=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(pr(e)){var i=e;e=this.$(i)}else if(w6(e)){var a=e;n={x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else Ha(e)||(e=this.mutableElements());if(!(Ha(e)&&e.empty())){n=n||e.boundingBox();var o=this.width(),s=this.height(),u;if(t=Ht(t)?t:0,!isNaN(o)&&!isNaN(s)&&o>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){u=Math.min((o-2*t)/n.w,(s-2*t)/n.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u;var l={x:(o-u*(n.x1+n.x2))/2,y:(s-u*(n.y1+n.y2))/2};return{zoom:u,pan:l}}}}},zoomRange:function(e,t){var n=this._private;if(t==null){var i=e;e=i.min,t=i.max}return Ht(e)&&Ht(t)&&e<=t?(n.minZoom=e,n.maxZoom=t):Ht(e)&&t===void 0&&e<=n.maxZoom?n.minZoom=e:Ht(t)&&e===void 0&&t>=n.minZoom&&(n.maxZoom=t),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t=this._private,n=t.pan,i=t.zoom,a,o,s=!1;if(t.zoomingEnabled||(s=!0),Ht(e)?o=e:on(e)&&(o=e.level,e.position!=null?a=Zp(e.position,i,n):e.renderedPosition!=null&&(a=e.renderedPosition),a!=null&&!t.panningEnabled&&(s=!0)),o=o>t.maxZoom?t.maxZoom:o,o=o<t.minZoom?t.minZoom:o,s||!Ht(o)||o===i||a!=null&&(!Ht(a.x)||!Ht(a.y)))return null;if(a!=null){var u=n,l=i,f=o,c={x:-f/l*(a.x-u.x)+a.x,y:-f/l*(a.y-u.y)+a.y};return{zoomed:!0,panned:!0,zoom:f,pan:c}}else return{zoomed:!0,panned:!1,zoom:o,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return t==null||!t.zoomed?this:(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var t=this._private,n=!0,i=!0,a=[],o=!1,s=!1;if(!e)return this;if(Ht(e.zoom)||(n=!1),on(e.pan)||(i=!1),!n&&!i)return this;if(n){var u=e.zoom;u<t.minZoom||u>t.maxZoom||!t.zoomingEnabled?o=!0:(t.zoom=u,a.push("zoom"))}if(i&&(!o||!e.cancelOnFailedZoom)&&t.panningEnabled){var l=e.pan;Ht(l.x)&&(t.pan.x=l.x,s=!1),Ht(l.y)&&(t.pan.y=l.y,s=!1),s||a.push("pan")}return a.length>0&&(a.push("viewport"),this.emit(a.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(pr(e)){var n=e;e=this.mutableElements().filter(n)}else Ha(e)||(e=this.mutableElements());if(e.length!==0){var i=e.boundingBox(),a=this.width(),o=this.height();t=t===void 0?this._private.zoom:t;var s={x:(a-t*(i.x1+i.x2))/2,y:(o-t*(i.y1+i.y2))/2};return s}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,t=e.container;return e.sizeCache=e.sizeCache||(t?function(){var n=Yn.getComputedStyle(t),i=function(o){return parseFloat(n.getPropertyValue(o))};return{width:t.clientWidth-i("padding-left")-i("padding-right"),height:t.clientHeight-i("padding-top")-i("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),i={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return i.w=i.x2-i.x1,i.h=i.y2-i.y1,i},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};_l.centre=_l.center;_l.autolockNodes=_l.autolock;_l.autoungrabifyNodes=_l.autoungrabify;var bh={data:pn.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:pn.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:pn.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:pn.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};bh.attr=bh.data;bh.removeAttr=bh.removeData;var wh=function(e){var t=this;e=Sr({},e);var n=e.container;n&&!gp(n)&&gp(n[0])&&(n=n[0]);var i=n?n._cyreg:null;i=i||{},i&&i.cy&&(i.cy.destroy(),i={});var a=i.readies=i.readies||[];n&&(n._cyreg=i),i.cy=t;var o=Yn!==void 0&&n!==void 0&&!e.headless,s=e;s.layout=Sr({name:o?"grid":"null"},s.layout),s.renderer=Sr({name:o?"canvas":"null"},s.renderer);var u=function(p,g,b){return g!==void 0?g:b!==void 0?b:p},l=this._private={container:n,ready:!1,options:s,elements:new Xi(this),listeners:[],aniEles:new Xi(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,s.zoomingEnabled),userZoomingEnabled:u(!0,s.userZoomingEnabled),panningEnabled:u(!0,s.panningEnabled),userPanningEnabled:u(!0,s.userPanningEnabled),boxSelectionEnabled:u(!0,s.boxSelectionEnabled),autolock:u(!1,s.autolock,s.autolockNodes),autoungrabify:u(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:u(!1,s.autounselectify),styleEnabled:s.styleEnabled===void 0?o:s.styleEnabled,zoom:Ht(s.zoom)?s.zoom:1,pan:{x:on(s.pan)&&Ht(s.pan.x)?s.pan.x:0,y:on(s.pan)&&Ht(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,s.multiClickDebounceTime)};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});var f=function(p,g){var b=p.some(_6);if(b)return Jf.all(p).then(g);g(p)};l.styleEnabled&&t.setStyle([]);var c=Sr({},s,s.renderer);t.initRenderer(c);var d=function(p,g,b){t.notifications(!1);var v=t.mutableElements();v.length>0&&v.remove(),p!=null&&(on(p)||In(p))&&t.add(p),t.one("layoutready",function(m){t.notifications(!0),t.emit(m),t.one("load",g),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",b),t.emit("done")});var y=Sr({},t._private.options.layout);y.eles=t.elements(),t.layout(y).run()};f([s.style,s.elements],function(h){var p=h[0],g=h[1];l.styleEnabled&&t.style().append(p),d(g,function(){t.startAnimationLoop(),l.ready=!0,ii(s.ready)&&t.on("ready",s.ready);for(var b=0;b<a.length;b++){var v=a[b];t.on("ready",v)}i&&(i.readies=[]),t.emit("ready")},s.done)})},_p=wh.prototype;Sr(_p,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},mount:function(e){if(e!=null){var t=this,n=t._private,i=n.options;return!gp(e)&&gp(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),n.container=e,n.styleEnabled=!0,t.invalidateSize(),t.initRenderer(Sr({},i,i.renderer,{name:i.renderer.name==="null"?"canvas":i.renderer.name})),t.startAnimationLoop(),t.style(i.style),t.emit("mount"),t}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Qo(this._private.options)},json:function(e){var t=this,n=t._private,i=t.mutableElements(),a=function(w){return t.getElementById(w.id())};if(on(e)){if(t.startBatch(),e.elements){var o={},s=function(w,S){for(var A=[],_=[],E=0;E<w.length;E++){var k=w[E];if(!k.data.id){vn("cy.json() cannot handle elements without an ID attribute");continue}var M=""+k.data.id,T=t.getElementById(M);o[M]=!0,T.length!==0?_.push({ele:T,json:k}):(S&&(k.group=S),A.push(k))}t.add(A);for(var C=0;C<_.length;C++){var R=_[C],x=R.ele,B=R.json;x.json(B)}};if(In(e.elements))s(e.elements);else for(var u=["nodes","edges"],l=0;l<u.length;l++){var f=u[l],c=e.elements[f];In(c)&&s(c,f)}var d=t.collection();i.filter(function(m){return!o[m.id()]}).forEach(function(m){m.isParent()?d.merge(m):m.remove()}),d.forEach(function(m){return m.children().move({parent:null})}),d.forEach(function(m){return a(m).remove()})}e.style&&t.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&t.pan(e.pan),e.data&&t.data(e.data);for(var h=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],p=0;p<h.length;p++){var g=h[p];e[g]!=null&&t[g](e[g])}return t.endBatch(),this}else{var b=!!e,v={};b?v.elements=this.elements().map(function(m){return m.json()}):(v.elements={},i.forEach(function(m){var w=m.group();v.elements[w]||(v.elements[w]=[]),v.elements[w].push(m.json())})),this._private.styleEnabled&&(v.style=t.style().json()),v.data=Qo(t.data());var y=n.options;return v.zoomingEnabled=n.zoomingEnabled,v.userZoomingEnabled=n.userZoomingEnabled,v.zoom=n.zoom,v.minZoom=n.minZoom,v.maxZoom=n.maxZoom,v.panningEnabled=n.panningEnabled,v.userPanningEnabled=n.userPanningEnabled,v.pan=Qo(n.pan),v.boxSelectionEnabled=n.boxSelectionEnabled,v.renderer=Qo(y.renderer),v.hideEdgesOnViewport=y.hideEdgesOnViewport,v.textureOnViewport=y.textureOnViewport,v.wheelSensitivity=y.wheelSensitivity,v.motionBlur=y.motionBlur,v.multiClickDebounceTime=y.multiClickDebounceTime,v}}});_p.$id=_p.getElementById;[pB,bB,uL,d2,rp,_B,p2,np,EB,_l,bh].forEach(function(r){Sr(_p,r)});var AB={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},TB={maximal:!1,acyclic:!1},uf=function(e){return e.scratch("breadthfirst")},V_=function(e,t){return e.scratch("breadthfirst",t)};function lL(r){this.options=Sr({},AB,TB,r)}lL.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,i=n.nodes().filter(function(K){return!K.isParent()}),a=n,o=e.directed,s=e.acyclic||e.maximal||e.maximalAdjustments>0,u=Ia(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),l;if(Ha(e.roots))l=e.roots;else if(In(e.roots)){for(var f=[],c=0;c<e.roots.length;c++){var d=e.roots[c],h=t.getElementById(d);f.push(h)}l=t.collection(f)}else if(pr(e.roots))l=t.$(e.roots);else if(o)l=i.roots();else{var p=n.components();l=t.collection();for(var g=function(le){var Z=p[le],ie=Z.maxDegree(!1),re=Z.filter(function(J){return J.degree(!1)===ie});l=l.add(re)},b=0;b<p.length;b++)g(b)}var v=[],y={},m=function(le,Z){v[Z]==null&&(v[Z]=[]);var ie=v[Z].length;v[Z].push(le),V_(le,{index:ie,depth:Z})},w=function(le,Z){var ie=uf(le),re=ie.depth,J=ie.index;v[re][J]=null,m(le,Z)};a.bfs({roots:l,directed:e.directed,visit:function(le,Z,ie,re,J){var fe=le[0],we=fe.id();m(fe,J),y[we]=!0}});for(var S=[],A=0;A<i.length;A++){var _=i[A];y[_.id()]||S.push(_)}var E=function(le){for(var Z=v[le],ie=0;ie<Z.length;ie++){var re=Z[ie];if(re==null){Z.splice(ie,1),ie--;continue}V_(re,{depth:le,index:ie})}},k=function(){for(var le=0;le<v.length;le++)E(le)},M=function(le,Z){for(var ie=uf(le),re=le.incomers().filter(function(ce){return ce.isNode()&&n.has(ce)}),J=-1,fe=le.id(),we=0;we<re.length;we++){var ge=re[we],me=uf(ge);J=Math.max(J,me.depth)}if(ie.depth<=J){if(!e.acyclic&&Z[fe])return null;var ue=J+1;return w(le,ue),Z[fe]=ue,!0}return!1};if(o&&s){var T=[],C={},R=function(le){return T.push(le)},x=function(){return T.shift()};for(i.forEach(function(K){return T.push(K)});T.length>0;){var B=x(),D=M(B,C);if(D)B.outgoers().filter(function(K){return K.isNode()&&n.has(K)}).forEach(R);else if(D===null){vn("Detected double maximal shift for node `"+B.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}k();var O=0;if(e.avoidOverlap)for(var G=0;G<i.length;G++){var V=i[G],I=V.layoutDimensions(e),z=I.w,P=I.h;O=Math.max(O,z,P)}var q={},F=function(le){if(q[le.id()])return q[le.id()];for(var Z=uf(le).depth,ie=le.neighborhood(),re=0,J=0,fe=0;fe<ie.length;fe++){var we=ie[fe];if(!(we.isEdge()||we.isParent()||!i.has(we))){var ge=uf(we);if(ge!=null){var me=ge.index,ue=ge.depth;if(!(me==null||ue==null)){var ce=v[ue].length;ue<Z&&(re+=me/ce,J++)}}}}return J=Math.max(1,J),re=re/J,J===0&&(re=0),q[le.id()]=re,re},U=function(le,Z){var ie=F(le),re=F(Z),J=ie-re;return J===0?mk(le.id(),Z.id()):J};e.depthSort!==void 0&&(U=e.depthSort);for(var W=0;W<v.length;W++)v[W].sort(U),E(W);for(var X=[],te=0;te<S.length;te++)X.push(S[te]);v.unshift(X),k();for(var ne=0,he=0;he<v.length;he++)ne=Math.max(v[he].length,ne);var ve={x:u.x1+u.w/2,y:u.x1+u.h/2},Ce=v.reduce(function(K,le){return Math.max(K,le.length)},0),Le=function(le){var Z=uf(le),ie=Z.depth,re=Z.index,J=v[ie].length,fe=Math.max(u.w/((e.grid?Ce:J)+1),O),we=Math.max(u.h/(v.length+1),O),ge=Math.min(u.w/2/v.length,u.h/2/v.length);if(ge=Math.max(ge,O),e.circle){var ue=ge*ie+ge-(v.length>0&&v[0].length<=3?ge/2:0),ce=2*Math.PI/v[ie].length*re;return ie===0&&v[0].length===1&&(ue=1),{x:ve.x+ue*Math.cos(ce),y:ve.y+ue*Math.sin(ce)}}else{var me={x:ve.x+(re+1-(J+1)/2)*fe,y:(ie+1)*we};return me}};return n.nodes().layoutPositions(this,e,Le),this};var kB={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function fL(r){this.options=Sr({},kB,r)}fL.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,i=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));for(var o=Ia(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},u=e.sweep===void 0?2*Math.PI-2*Math.PI/a.length:e.sweep,l=u/Math.max(1,a.length-1),f,c=0,d=0;d<a.length;d++){var h=a[d],p=h.layoutDimensions(e),g=p.w,b=p.h;c=Math.max(c,g,b)}if(Ht(e.radius)?f=e.radius:a.length<=1?f=0:f=Math.min(o.h,o.w)/2-c,a.length>1&&e.avoidOverlap){c*=1.75;var v=Math.cos(l)-Math.cos(0),y=Math.sin(l)-Math.sin(0),m=Math.sqrt(c*c/(v*v+y*y));f=Math.max(m,f)}var w=function(A,_){var E=e.startAngle+_*l*(i?1:-1),k=f*Math.cos(E),M=f*Math.sin(E),T={x:s.x+k,y:s.y+M};return T};return n.nodes().layoutPositions(this,e,w),this};var LB={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function cL(r){this.options=Sr({},LB,r)}cL.prototype.run=function(){for(var r=this.options,e=r,t=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=r.cy,i=e.eles,a=i.nodes().not(":parent"),o=Ia(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},u=[],l=0,f=0;f<a.length;f++){var c=a[f],d=void 0;d=e.concentric(c),u.push({value:d,node:c}),c._private.scratch.concentric=d}a.updateStyle();for(var h=0;h<a.length;h++){var p=a[h],g=p.layoutDimensions(e);l=Math.max(l,g.w,g.h)}u.sort(function(K,le){return le.value-K.value});for(var b=e.levelWidth(a),v=[[]],y=v[0],m=0;m<u.length;m++){var w=u[m];if(y.length>0){var S=Math.abs(y[0].value-w.value);S>=b&&(y=[],v.push(y))}y.push(w)}var A=l+e.minNodeSpacing;if(!e.avoidOverlap){var _=v.length>0&&v[0].length>1,E=Math.min(o.w,o.h)/2-A,k=E/(v.length+_?1:0);A=Math.min(A,k)}for(var M=0,T=0;T<v.length;T++){var C=v[T],R=e.sweep===void 0?2*Math.PI-2*Math.PI/C.length:e.sweep,x=C.dTheta=R/Math.max(1,C.length-1);if(C.length>1&&e.avoidOverlap){var B=Math.cos(x)-Math.cos(0),D=Math.sin(x)-Math.sin(0),O=Math.sqrt(A*A/(B*B+D*D));M=Math.max(O,M)}C.r=M,M+=A}if(e.equidistant){for(var G=0,V=0,I=0;I<v.length;I++){var z=v[I],P=z.r-V;G=Math.max(G,P)}V=0;for(var q=0;q<v.length;q++){var F=v[q];q===0&&(V=F.r),F.r=V,V+=G}}for(var U={},W=0;W<v.length;W++)for(var X=v[W],te=X.dTheta,ne=X.r,he=0;he<X.length;he++){var ve=X[he],Ce=e.startAngle+(t?1:-1)*te*he,Le={x:s.x+ne*Math.cos(Ce),y:s.y+ne*Math.sin(Ce)};U[ve.node.id()]=Le}return i.nodes().layoutPositions(this,e,function(K){var le=K.id();return U[le]}),this};var Kg,NB={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function av(r){this.options=Sr({},NB,r),this.options.layout=this}av.prototype.run=function(){var r=this.options,e=r.cy,t=this;t.stopped=!1,(r.animate===!0||r.animate===!1)&&t.emit({type:"layoutstart",layout:t}),r.debug===!0?Kg=!0:Kg=!1;var n=PB(e,t,r);Kg&&DB(n),r.randomize&&IB(n);var i=Os(),a=function(){RB(n,e,r),r.fit===!0&&e.fit(r.padding)},o=function(d){return!(t.stopped||d>=r.numIter||(FB(n,r),n.temperature=n.temperature*r.coolingFactor,n.temperature<r.minTemp))},s=function(){if(r.animate===!0||r.animate===!1)a(),t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t});else{var d=r.eles.nodes(),h=hL(n,r,d);d.layoutPositions(t,r,h)}},u=0,l=!0;if(r.animate===!0){var f=function c(){for(var d=0;l&&d<r.refresh;)l=o(u),u++,d++;if(!l)Y_(n,r),s();else{var h=Os();h-i>=r.animationThreshold&&a(),mp(c)}};f()}else{for(;l;)l=o(u),u++;Y_(n,r),s()}return this};av.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};av.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var PB=function(e,t,n){for(var i=n.eles.edges(),a=n.eles.nodes(),o=Ia(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),s={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:a.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:i.size(),temperature:n.initialTemp,clientWidth:o.w,clientHeight:o.h,boundingBox:o},u=n.eles.components(),l={},f=0;f<u.length;f++)for(var c=u[f],d=0;d<c.length;d++){var h=c[d];l[h.id()]=f}for(var f=0;f<s.nodeSize;f++){var p=a[f],g=p.layoutDimensions(n),b={};b.isLocked=p.locked(),b.id=p.data("id"),b.parentId=p.data("parent"),b.cmptId=l[p.id()],b.children=[],b.positionX=p.position("x"),b.positionY=p.position("y"),b.offsetX=0,b.offsetY=0,b.height=g.w,b.width=g.h,b.maxX=b.positionX+b.width/2,b.minX=b.positionX-b.width/2,b.maxY=b.positionY+b.height/2,b.minY=b.positionY-b.height/2,b.padLeft=parseFloat(p.style("padding")),b.padRight=parseFloat(p.style("padding")),b.padTop=parseFloat(p.style("padding")),b.padBottom=parseFloat(p.style("padding")),b.nodeRepulsion=ii(n.nodeRepulsion)?n.nodeRepulsion(p):n.nodeRepulsion,s.layoutNodes.push(b),s.idToIndex[b.id]=f}for(var v=[],y=0,m=-1,w=[],f=0;f<s.nodeSize;f++){var p=s.layoutNodes[f],S=p.parentId;S!=null?s.layoutNodes[s.idToIndex[S]].children.push(p.id):(v[++m]=p.id,w.push(p.id))}for(s.graphSet.push(w);y<=m;){var A=v[y++],_=s.idToIndex[A],h=s.layoutNodes[_],E=h.children;if(E.length>0){s.graphSet.push(E);for(var f=0;f<E.length;f++)v[++m]=E[f]}}for(var f=0;f<s.graphSet.length;f++)for(var k=s.graphSet[f],d=0;d<k.length;d++){var M=s.idToIndex[k[d]];s.indexToGraph[M]=f}for(var f=0;f<s.edgeSize;f++){var T=i[f],C={};C.id=T.data("id"),C.sourceId=T.data("source"),C.targetId=T.data("target");var R=ii(n.idealEdgeLength)?n.idealEdgeLength(T):n.idealEdgeLength,x=ii(n.edgeElasticity)?n.edgeElasticity(T):n.edgeElasticity,B=s.idToIndex[C.sourceId],D=s.idToIndex[C.targetId],O=s.indexToGraph[B],G=s.indexToGraph[D];if(O!=G){for(var V=MB(C.sourceId,C.targetId,s),I=s.graphSet[V],z=0,b=s.layoutNodes[B];I.indexOf(b.id)===-1;)b=s.layoutNodes[s.idToIndex[b.parentId]],z++;for(b=s.layoutNodes[D];I.indexOf(b.id)===-1;)b=s.layoutNodes[s.idToIndex[b.parentId]],z++;R*=z*n.nestingFactor}C.idealLength=R,C.elasticity=x,s.layoutEdges.push(C)}return s},MB=function(e,t,n){var i=OB(e,t,0,n);return 2>i.count?0:i.graph},OB=function r(e,t,n,i){var a=i.graphSet[n];if(-1<a.indexOf(e)&&-1<a.indexOf(t))return{count:2,graph:n};for(var o=0,s=0;s<a.length;s++){var u=a[s],l=i.idToIndex[u],f=i.layoutNodes[l].children;if(f.length!==0){var c=i.indexToGraph[i.idToIndex[f[0]]],d=r(e,t,c,i);if(d.count!==0)if(d.count===1){if(o++,o===2)break}else return d}}return{count:o,graph:n}},DB,IB=function(e,t){for(var n=e.clientWidth,i=e.clientHeight,a=0;a<e.nodeSize;a++){var o=e.layoutNodes[a];o.children.length===0&&!o.isLocked&&(o.positionX=Math.random()*n,o.positionY=Math.random()*i)}},hL=function(e,t,n){var i=e.boundingBox,a={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(n.forEach(function(o){var s=e.layoutNodes[e.idToIndex[o.data("id")]];a.x1=Math.min(a.x1,s.positionX),a.x2=Math.max(a.x2,s.positionX),a.y1=Math.min(a.y1,s.positionY),a.y2=Math.max(a.y2,s.positionY)}),a.w=a.x2-a.x1,a.h=a.y2-a.y1),function(o,s){var u=e.layoutNodes[e.idToIndex[o.data("id")]];if(t.boundingBox){var l=(u.positionX-a.x1)/a.w,f=(u.positionY-a.y1)/a.h;return{x:i.x1+l*i.w,y:i.y1+f*i.h}}else return{x:u.positionX,y:u.positionY}}},RB=function(e,t,n){var i=n.layout,a=n.eles.nodes(),o=hL(e,n,a);a.positions(o),e.ready!==!0&&(e.ready=!0,i.one("layoutready",n.ready),i.emit({type:"layoutready",layout:this}))},FB=function(e,t,n){BB(e,t),GB(e),$B(e,t),UB(e),HB(e)},BB=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var i=e.graphSet[n],a=i.length,o=0;o<a;o++)for(var s=e.layoutNodes[e.idToIndex[i[o]]],u=o+1;u<a;u++){var l=e.layoutNodes[e.idToIndex[i[u]]];zB(s,l,e,t)}},W_=function(e){return-e+2*e*Math.random()},zB=function(e,t,n,i){var a=e.cmptId,o=t.cmptId;if(!(a!==o&&!n.isCompound)){var s=t.positionX-e.positionX,u=t.positionY-e.positionY,l=1;s===0&&u===0&&(s=W_(l),u=W_(l));var f=qB(e,t,s,u);if(f>0)var c=i.nodeOverlap*f,d=Math.sqrt(s*s+u*u),h=c*s/d,p=c*u/d;else var g=xp(e,s,u),b=xp(t,-1*s,-1*u),v=b.x-g.x,y=b.y-g.y,m=v*v+y*y,d=Math.sqrt(m),c=(e.nodeRepulsion+t.nodeRepulsion)/m,h=c*v/d,p=c*y/d;e.isLocked||(e.offsetX-=h,e.offsetY-=p),t.isLocked||(t.offsetX+=h,t.offsetY+=p)}},qB=function(e,t,n,i){if(n>0)var a=e.maxX-t.minX;else var a=t.maxX-e.minX;if(i>0)var o=e.maxY-t.minY;else var o=t.maxY-e.minY;return a>=0&&o>=0?Math.sqrt(a*a+o*o):0},xp=function(e,t,n){var i=e.positionX,a=e.positionY,o=e.height||1,s=e.width||1,u=n/t,l=o/s,f={};return t===0&&0<n||t===0&&0>n?(f.x=i,f.y=a+o/2,f):0<t&&-1*l<=u&&u<=l?(f.x=i+s/2,f.y=a+s*n/2/t,f):0>t&&-1*l<=u&&u<=l?(f.x=i-s/2,f.y=a-s*n/2/t,f):0<n&&(u<=-1*l||u>=l)?(f.x=i+o*t/2/n,f.y=a+o/2,f):(0>n&&(u<=-1*l||u>=l)&&(f.x=i-o*t/2/n,f.y=a-o/2),f)},GB=function(e,t){for(var n=0;n<e.edgeSize;n++){var i=e.layoutEdges[n],a=e.idToIndex[i.sourceId],o=e.layoutNodes[a],s=e.idToIndex[i.targetId],u=e.layoutNodes[s],l=u.positionX-o.positionX,f=u.positionY-o.positionY;if(!(l===0&&f===0)){var c=xp(o,l,f),d=xp(u,-1*l,-1*f),h=d.x-c.x,p=d.y-c.y,g=Math.sqrt(h*h+p*p),b=Math.pow(i.idealLength-g,2)/i.elasticity;if(g!==0)var v=b*h/g,y=b*p/g;else var v=0,y=0;o.isLocked||(o.offsetX+=v,o.offsetY+=y),u.isLocked||(u.offsetX-=v,u.offsetY-=y)}}},$B=function(e,t){if(t.gravity!==0)for(var n=1,i=0;i<e.graphSet.length;i++){var a=e.graphSet[i],o=a.length;if(i===0)var s=e.clientHeight/2,u=e.clientWidth/2;else var l=e.layoutNodes[e.idToIndex[a[0]]],f=e.layoutNodes[e.idToIndex[l.parentId]],s=f.positionX,u=f.positionY;for(var c=0;c<o;c++){var d=e.layoutNodes[e.idToIndex[a[c]]];if(!d.isLocked){var h=s-d.positionX,p=u-d.positionY,g=Math.sqrt(h*h+p*p);if(g>n){var b=t.gravity*h/g,v=t.gravity*p/g;d.offsetX+=b,d.offsetY+=v}}}}},UB=function(e,t){var n=[],i=0,a=-1;for(n.push.apply(n,e.graphSet[0]),a+=e.graphSet[0].length;i<=a;){var o=n[i++],s=e.idToIndex[o],u=e.layoutNodes[s],l=u.children;if(0<l.length&&!u.isLocked){for(var f=u.offsetX,c=u.offsetY,d=0;d<l.length;d++){var h=e.layoutNodes[e.idToIndex[l[d]]];h.offsetX+=f,h.offsetY+=c,n[++a]=l[d]}u.offsetX=0,u.offsetY=0}}},HB=function(e,t){for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];0<i.children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];if(!(0<i.children.length||i.isLocked)){var a=jB(i.offsetX,i.offsetY,e.temperature);i.positionX+=a.x,i.positionY+=a.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,VB(i,e)}}for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];0<i.children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},jB=function(e,t,n){var i=Math.sqrt(e*e+t*t);if(i>n)var a={x:n*e/i,y:n*t/i};else var a={x:e,y:t};return a},VB=function r(e,t){var n=e.parentId;if(n!=null){var i=t.layoutNodes[t.idToIndex[n]],a=!1;if((i.maxX==null||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,a=!0),(i.minX==null||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,a=!0),(i.maxY==null||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,a=!0),(i.minY==null||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,a=!0),a)return r(i,t)}},Y_=function(e,t){for(var n=e.layoutNodes,i=[],a=0;a<n.length;a++){var o=n[a],s=o.cmptId,u=i[s]=i[s]||[];u.push(o)}for(var l=0,a=0;a<i.length;a++){var f=i[a];if(f){f.x1=1/0,f.x2=-1/0,f.y1=1/0,f.y2=-1/0;for(var c=0;c<f.length;c++){var d=f[c];f.x1=Math.min(f.x1,d.positionX-d.width/2),f.x2=Math.max(f.x2,d.positionX+d.width/2),f.y1=Math.min(f.y1,d.positionY-d.height/2),f.y2=Math.max(f.y2,d.positionY+d.height/2)}f.w=f.x2-f.x1,f.h=f.y2-f.y1,l+=f.w*f.h}}i.sort(function(y,m){return m.w*m.h-y.w*y.h});for(var h=0,p=0,g=0,b=0,v=Math.sqrt(l)*e.clientWidth/e.clientHeight,a=0;a<i.length;a++){var f=i[a];if(f){for(var c=0;c<f.length;c++){var d=f[c];d.isLocked||(d.positionX+=h-f.x1,d.positionY+=p-f.y1)}h+=f.w+t.componentSpacing,g+=f.w+t.componentSpacing,b=Math.max(b,f.h),g>v&&(p+=b+t.componentSpacing,h=0,g=0,b=0)}}},WB={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function dL(r){this.options=Sr({},WB,r)}dL.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));var a=Ia(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});if(a.h===0||a.w===0)n.nodes().layoutPositions(this,e,function(q){return{x:a.x1,y:a.y1}});else{var o=i.size(),s=Math.sqrt(o*a.h/a.w),u=Math.round(s),l=Math.round(a.w/a.h*s),f=function(F){if(F==null)return Math.min(u,l);var U=Math.min(u,l);U==u?u=F:l=F},c=function(F){if(F==null)return Math.max(u,l);var U=Math.max(u,l);U==u?u=F:l=F},d=e.rows,h=e.cols!=null?e.cols:e.columns;if(d!=null&&h!=null)u=d,l=h;else if(d!=null&&h==null)u=d,l=Math.ceil(o/u);else if(d==null&&h!=null)l=h,u=Math.ceil(o/l);else if(l*u>o){var p=f(),g=c();(p-1)*g>=o?f(p-1):(g-1)*p>=o&&c(g-1)}else for(;l*u<o;){var b=f(),v=c();(v+1)*b>=o?c(v+1):f(b+1)}var y=a.w/l,m=a.h/u;if(e.condense&&(y=0,m=0),e.avoidOverlap)for(var w=0;w<i.length;w++){var S=i[w],A=S._private.position;(A.x==null||A.y==null)&&(A.x=0,A.y=0);var _=S.layoutDimensions(e),E=e.avoidOverlapPadding,k=_.w+E,M=_.h+E;y=Math.max(y,k),m=Math.max(m,M)}for(var T={},C=function(F,U){return!!T["c-"+F+"-"+U]},R=function(F,U){T["c-"+F+"-"+U]=!0},x=0,B=0,D=function(){B++,B>=l&&(B=0,x++)},O={},G=0;G<i.length;G++){var V=i[G],I=e.position(V);if(I&&(I.row!==void 0||I.col!==void 0)){var z={row:I.row,col:I.col};if(z.col===void 0)for(z.col=0;C(z.row,z.col);)z.col++;else if(z.row===void 0)for(z.row=0;C(z.row,z.col);)z.row++;O[V.id()]=z,R(z.row,z.col)}}var P=function(F,U){var W,X;if(F.locked()||F.isParent())return!1;var te=O[F.id()];if(te)W=te.col*y+y/2+a.x1,X=te.row*m+m/2+a.y1;else{for(;C(x,B);)D();W=B*y+y/2+a.x1,X=x*m+m/2+a.y1,R(x,B),D()}return{x:W,y:X}};i.layoutPositions(this,e,P)}return this};var YB={ready:function(){},stop:function(){}};function gw(r){this.options=Sr({},YB,r)}gw.prototype.run=function(){var r=this.options,e=r.eles,t=this;return r.cy,t.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),t.one("layoutready",r.ready),t.emit("layoutready"),t.one("layoutstop",r.stop),t.emit("layoutstop"),this};gw.prototype.stop=function(){return this};var XB={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function pL(r){this.options=Sr({},XB,r)}pL.prototype.run=function(){var r=this.options,e=r.eles,t=e.nodes(),n=ii(r.positions);function i(a){if(r.positions==null)return sF(a.position());if(n)return r.positions(a);var o=r.positions[a._private.data.id];return o??null}return t.layoutPositions(this,r,function(a,o){var s=i(a);return a.locked()||s==null?!1:s}),this};var KB={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function vL(r){this.options=Sr({},KB,r)}vL.prototype.run=function(){var r=this.options,e=r.cy,t=r.eles,n=Ia(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),i=function(o,s){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return t.nodes().layoutPositions(this,r,i),this};var ZB=[{name:"breadthfirst",impl:lL},{name:"circle",impl:fL},{name:"concentric",impl:cL},{name:"cose",impl:av},{name:"grid",impl:dL},{name:"null",impl:gw},{name:"preset",impl:pL},{name:"random",impl:vL}];function gL(r){this.options=r,this.notifications=0}var X_=function(){},K_=function(){throw new Error("A headless instance can not render images")};gL.prototype={recalculateRenderedStyle:X_,notify:function(){this.notifications++},init:X_,isHeadless:function(){return!0},png:K_,jpg:K_};var mw={};mw.arrowShapeWidth=.3;mw.registerArrowShapes=function(){var r=this.arrowShapes={},e=this,t=function(l,f,c,d,h,p,g){var b=h.x-c/2-g,v=h.x+c/2+g,y=h.y-c/2-g,m=h.y+c/2+g,w=b<=l&&l<=v&&y<=f&&f<=m;return w},n=function(l,f,c,d,h){var p=l*Math.cos(d)-f*Math.sin(d),g=l*Math.sin(d)+f*Math.cos(d),b=p*c,v=g*c,y=b+h.x,m=v+h.y;return{x:y,y:m}},i=function(l,f,c,d){for(var h=[],p=0;p<l.length;p+=2){var g=l[p],b=l[p+1];h.push(n(g,b,f,c,d))}return h},a=function(l){for(var f=[],c=0;c<l.length;c++){var d=l[c];f.push(d.x,d.y)}return f},o=function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").pfValue*2},s=function(l,f){pr(f)&&(f=r[f]),r[l]=Sr({name:l,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(d,h,p,g,b,v){var y=a(i(this.points,p+2*v,g,b)),m=Ma(d,h,y);return m},roughCollide:t,draw:function(d,h,p,g){var b=i(this.points,h,p,g);e.arrowShapeImpl("polygon")(d,b)},spacing:function(d){return 0},gap:o},f)};s("none",{collide:yp,roughCollide:yp,draw:aw,spacing:c_,gap:c_}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:r.triangle.points,controlPoint:[0,-.15],roughCollide:t,draw:function(l,f,c,d,h){var p=i(this.points,f,c,d),g=this.controlPoint,b=n(g[0],g[1],f,c,d);e.arrowShapeImpl(this.name)(l,p,b)},gap:function(l){return o(l)*.8}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(l,f,c,d,h,p,g){var b=a(i(this.points,c+2*g,d,h)),v=a(i(this.pointsTee,c+2*g,d,h)),y=Ma(l,f,b)||Ma(l,f,v);return y},draw:function(l,f,c,d,h){var p=i(this.points,f,c,d),g=i(this.pointsTee,f,c,d);e.arrowShapeImpl(this.name)(l,p,g)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(l,f,c,d,h,p,g){var b=h,v=Math.pow(b.x-l,2)+Math.pow(b.y-f,2)<=Math.pow((c+2*g)*this.radius,2),y=a(i(this.points,c+2*g,d,h));return Ma(l,f,y)||v},draw:function(l,f,c,d,h){var p=i(this.pointsTr,f,c,d);e.arrowShapeImpl(this.name)(l,p,d.x,d.y,this.radius*f)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(l,f){var c=this.baseCrossLinePts.slice(),d=f/l,h=3,p=5;return c[h]=c[h]-d,c[p]=c[p]-d,c},collide:function(l,f,c,d,h,p,g){var b=a(i(this.points,c+2*g,d,h)),v=a(i(this.crossLinePts(c,p),c+2*g,d,h)),y=Ma(l,f,b)||Ma(l,f,v);return y},draw:function(l,f,c,d,h){var p=i(this.points,f,c,d),g=i(this.crossLinePts(f,h),f,c,d);e.arrowShapeImpl(this.name)(l,p,g)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(l){return o(l)*.525}}),s("circle",{radius:.15,collide:function(l,f,c,d,h,p,g){var b=h,v=Math.pow(b.x-l,2)+Math.pow(b.y-f,2)<=Math.pow((c+2*g)*this.radius,2);return v},draw:function(l,f,c,d,h){e.arrowShapeImpl(this.name)(l,d.x,d.y,this.radius*f)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(l){return 1},gap:function(l){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(l){return .95*l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}})};var Nl={};Nl.projectIntoViewport=function(r,e){var t=this.cy,n=this.findContainerClientCoords(),i=n[0],a=n[1],o=n[4],s=t.pan(),u=t.zoom(),l=((r-i)/o-s.x)/u,f=((e-a)/o-s.y)/u;return[l,f]};Nl.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var r=this.container,e=r.getBoundingClientRect(),t=Yn.getComputedStyle(r),n=function(v){return parseFloat(t.getPropertyValue(v))},i={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},a={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},o=r.clientWidth,s=r.clientHeight,u=i.left+i.right,l=i.top+i.bottom,f=a.left+a.right,c=e.width/(o+f),d=o-u,h=s-l,p=e.left+i.left+a.left,g=e.top+i.top+a.top;return this.containerBB=[p,g,d,h,c]};Nl.invalidateContainerClientCoordsCache=function(){this.containerBB=null};Nl.findNearestElement=function(r,e,t,n){return this.findNearestElements(r,e,t,n)[0]};Nl.findNearestElements=function(r,e,t,n){var i=this,a=this,o=a.getCachedZSortedEles(),s=[],u=a.cy.zoom(),l=a.cy.hasCompoundNodes(),f=(n?24:8)/u,c=(n?8:2)/u,d=(n?8:2)/u,h=1/0,p,g;t&&(o=o.interactive);function b(_,E){if(_.isNode()){if(g)return;g=_,s.push(_)}if(_.isEdge()&&(E==null||E<h))if(p){if(p.pstyle("z-compound-depth").value===_.pstyle("z-compound-depth").value&&p.pstyle("z-compound-depth").value===_.pstyle("z-compound-depth").value){for(var k=0;k<s.length;k++)if(s[k].isEdge()){s[k]=_,p=_,h=E??h;break}}}else s.push(_),p=_,h=E??h}function v(_){var E=_.outerWidth()+2*c,k=_.outerHeight()+2*c,M=E/2,T=k/2,C=_.position();if(C.x-M<=r&&r<=C.x+M&&C.y-T<=e&&e<=C.y+T){var R=a.nodeShapes[i.getNodeShape(_)];if(R.checkPoint(r,e,0,E,k,C.x,C.y))return b(_,0),!0}}function y(_){var E=_._private,k=E.rscratch,M=_.pstyle("width").pfValue,T=_.pstyle("arrow-scale").value,C=M/2+f,R=C*C,x=C*2,G=E.source,V=E.target,B;if(k.edgeType==="segments"||k.edgeType==="straight"||k.edgeType==="haystack"){for(var D=k.allpts,O=0;O+3<D.length;O+=2)if(wF(r,e,D[O],D[O+1],D[O+2],D[O+3],x)&&R>(B=CF(r,e,D[O],D[O+1],D[O+2],D[O+3])))return b(_,B),!0}else if(k.edgeType==="bezier"||k.edgeType==="multibezier"||k.edgeType==="self"||k.edgeType==="compound"){for(var D=k.allpts,O=0;O+5<k.allpts.length;O+=4)if(_F(r,e,D[O],D[O+1],D[O+2],D[O+3],D[O+4],D[O+5],x)&&R>(B=EF(r,e,D[O],D[O+1],D[O+2],D[O+3],D[O+4],D[O+5])))return b(_,B),!0}for(var G=G||E.source,V=V||E.target,I=i.getArrowWidth(M,T),z=[{name:"source",x:k.arrowStartX,y:k.arrowStartY,angle:k.srcArrowAngle},{name:"target",x:k.arrowEndX,y:k.arrowEndY,angle:k.tgtArrowAngle},{name:"mid-source",x:k.midX,y:k.midY,angle:k.midsrcArrowAngle},{name:"mid-target",x:k.midX,y:k.midY,angle:k.midtgtArrowAngle}],O=0;O<z.length;O++){var P=z[O],q=a.arrowShapes[_.pstyle(P.name+"-arrow-shape").value],F=_.pstyle("width").pfValue;if(q.roughCollide(r,e,I,P.angle,{x:P.x,y:P.y},F,f)&&q.collide(r,e,I,P.angle,{x:P.x,y:P.y},F,f))return b(_),!0}l&&s.length>0&&(v(G),v(V))}function m(_,E,k){return xo(_,E,k)}function w(_,E){var k=_._private,M=d,T;E?T=E+"-":T="",_.boundingBox();var C=k.labelBounds[E||"main"],R=_.pstyle(T+"label").value,x=_.pstyle("text-events").strValue==="yes";if(!(!x||!R)){var B=m(k.rscratch,"labelX",E),D=m(k.rscratch,"labelY",E),O=m(k.rscratch,"labelAngle",E),G=_.pstyle(T+"text-margin-x").pfValue,V=_.pstyle(T+"text-margin-y").pfValue,I=C.x1-M-G,z=C.x2+M-G,P=C.y1-M-V,q=C.y2+M-V;if(O){var F=Math.cos(O),U=Math.sin(O),W=function(Le,K){return Le=Le-B,K=K-D,{x:Le*F-K*U+B,y:Le*U+K*F+D}},X=W(I,P),te=W(I,q),ne=W(z,P),he=W(z,q),ve=[X.x+G,X.y+V,ne.x+G,ne.y+V,he.x+G,he.y+V,te.x+G,te.y+V];if(Ma(r,e,ve))return b(_),!0}else if(Bf(C,r,e))return b(_),!0}}for(var S=o.length-1;S>=0;S--){var A=o[S];A.isNode()?v(A)||w(A):y(A)||w(A)||w(A,"source")||w(A,"target")}return s};Nl.getAllInBox=function(r,e,t,n){var i=this.getCachedZSortedEles().interactive,a=[],o=Math.min(r,t),s=Math.max(r,t),u=Math.min(e,n),l=Math.max(e,n);r=o,t=s,e=u,n=l;for(var f=Ia({x1:r,y1:e,x2:t,y2:n}),c=0;c<i.length;c++){var d=i[c];if(d.isNode()){var h=d,p=h.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});uw(f,p)&&!Nk(p,f)&&a.push(h)}else{var g=d,b=g._private,v=b.rscratch;if(v.startX!=null&&v.startY!=null&&!Bf(f,v.startX,v.startY)||v.endX!=null&&v.endY!=null&&!Bf(f,v.endX,v.endY))continue;if(v.edgeType==="bezier"||v.edgeType==="multibezier"||v.edgeType==="self"||v.edgeType==="compound"||v.edgeType==="segments"||v.edgeType==="haystack"){for(var y=b.rstyle.bezierPts||b.rstyle.linePts||b.rstyle.haystackPts,m=!0,w=0;w<y.length;w++)if(!bF(f,y[w])){m=!1;break}m&&a.push(g)}else(v.edgeType==="haystack"||v.edgeType==="straight")&&a.push(g)}}return a};var Sp={};Sp.calculateArrowAngles=function(r){var e=r._private.rscratch,t=e.edgeType==="haystack",n=e.edgeType==="bezier",i=e.edgeType==="multibezier",a=e.edgeType==="segments",o=e.edgeType==="compound",s=e.edgeType==="self",u,l,f,c,d,h,v,y;if(t?(f=e.haystackPts[0],c=e.haystackPts[1],d=e.haystackPts[2],h=e.haystackPts[3]):(f=e.arrowStartX,c=e.arrowStartY,d=e.arrowEndX,h=e.arrowEndY),v=e.midX,y=e.midY,a)u=f-e.segpts[0],l=c-e.segpts[1];else if(i||o||s||n){var p=e.allpts,g=Bi(p[0],p[2],p[4],.1),b=Bi(p[1],p[3],p[5],.1);u=f-g,l=c-b}else u=f-v,l=c-y;e.srcArrowAngle=Sd(u,l);var v=e.midX,y=e.midY;if(t&&(v=(f+d)/2,y=(c+h)/2),u=d-f,l=h-c,a){var p=e.allpts;if(p.length/2%2===0){var m=p.length/2,w=m-2;u=p[m]-p[w],l=p[m+1]-p[w+1]}else{var m=p.length/2-1,w=m-2,S=m+2;u=p[m]-p[w],l=p[m+1]-p[w+1]}}else if(i||o||s){var p=e.allpts,A=e.ctrlpts,_,E,k,M;if(A.length/2%2===0){var T=p.length/2-1,C=T+2,R=C+2;_=Bi(p[T],p[C],p[R],0),E=Bi(p[T+1],p[C+1],p[R+1],0),k=Bi(p[T],p[C],p[R],1e-4),M=Bi(p[T+1],p[C+1],p[R+1],1e-4)}else{var C=p.length/2-1,T=C-2,R=C+2;_=Bi(p[T],p[C],p[R],.4999),E=Bi(p[T+1],p[C+1],p[R+1],.4999),k=Bi(p[T],p[C],p[R],.5),M=Bi(p[T+1],p[C+1],p[R+1],.5)}u=k-_,l=M-E}if(e.midtgtArrowAngle=Sd(u,l),e.midDispX=u,e.midDispY=l,u*=-1,l*=-1,a){var p=e.allpts;if(p.length/2%2!==0){var m=p.length/2-1,S=m+2;u=-(p[S]-p[m]),l=-(p[S+1]-p[m+1])}}if(e.midsrcArrowAngle=Sd(u,l),a)u=d-e.segpts[e.segpts.length-2],l=h-e.segpts[e.segpts.length-1];else if(i||o||s||n){var p=e.allpts,x=p.length,g=Bi(p[x-6],p[x-4],p[x-2],.9),b=Bi(p[x-5],p[x-3],p[x-1],.9);u=d-g,l=h-b}else u=d-v,l=h-y;e.tgtArrowAngle=Sd(u,l)};Sp.getArrowWidth=Sp.getArrowHeight=function(r,e){var t=this.arrowWidthCache=this.arrowWidthCache||{},n=t[r+", "+e];return n||(n=Math.max(Math.pow(r*13.37,.9),29)*e,t[r+", "+e]=n,n)};var _a={};_a.findHaystackPoints=function(r){for(var e=0;e<r.length;e++){var t=r[e],n=t._private,i=n.rscratch;if(!i.haystack){var a=Math.random()*2*Math.PI;i.source={x:Math.cos(a),y:Math.sin(a)},a=Math.random()*2*Math.PI,i.target={x:Math.cos(a),y:Math.sin(a)}}var o=n.source,s=n.target,u=o.position(),l=s.position(),f=o.width(),c=s.width(),d=o.height(),h=s.height(),p=t.pstyle("haystack-radius").value,g=p/2;i.haystackPts=i.allpts=[i.source.x*f*g+u.x,i.source.y*d*g+u.y,i.target.x*c*g+l.x,i.target.y*h*g+l.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(t),this.calculateArrowAngles(t),this.recalculateEdgeLabelProjections(t),this.calculateLabelAngles(t)}};_a.findSegmentsPoints=function(r,e){var t=r._private.rscratch,n=e.posPts,i=e.intersectionPts,a=e.vectorNormInverse,o=r.pstyle("edge-distances").value,s=r.pstyle("segment-weights"),u=r.pstyle("segment-distances"),l=Math.min(s.pfValue.length,u.pfValue.length);t.edgeType="segments",t.segpts=[];for(var f=0;f<l;f++){var c=s.pfValue[f],d=u.pfValue[f],h=1-c,p=c,g=o==="node-position"?n:i,b={x:g.x1*h+g.x2*p,y:g.y1*h+g.y2*p};t.segpts.push(b.x+a.x*d,b.y+a.y*d)}};_a.findLoopPoints=function(r,e,t,n){var i=r._private.rscratch,a=e.dirCounts,o=e.srcPos,s=r.pstyle("control-point-distances"),u=s?s.pfValue[0]:void 0,l=r.pstyle("loop-direction").pfValue,f=r.pstyle("loop-sweep").pfValue,c=r.pstyle("control-point-step-size").pfValue;i.edgeType="self";var d=t,h=c;n&&(d=0,h=u);var p=l-Math.PI/2,g=p-f/2,b=p+f/2,v=l+"_"+f;d=a[v]===void 0?a[v]=0:++a[v],i.ctrlpts=[o.x+Math.cos(g)*1.4*h*(d/3+1),o.y+Math.sin(g)*1.4*h*(d/3+1),o.x+Math.cos(b)*1.4*h*(d/3+1),o.y+Math.sin(b)*1.4*h*(d/3+1)]};_a.findCompoundLoopPoints=function(r,e,t,n){var i=r._private.rscratch;i.edgeType="compound";var a=e.srcPos,o=e.tgtPos,s=e.srcW,u=e.srcH,l=e.tgtW,f=e.tgtH,c=r.pstyle("control-point-step-size").pfValue,d=r.pstyle("control-point-distances"),h=d?d.pfValue[0]:void 0,p=t,g=c;n&&(p=0,g=h);var b=50,v={x:a.x-s/2,y:a.y-u/2},y={x:o.x-l/2,y:o.y-f/2},m={x:Math.min(v.x,y.x),y:Math.min(v.y,y.y)},w=.5,S=Math.max(w,Math.log(s*.01)),A=Math.max(w,Math.log(l*.01));i.ctrlpts=[m.x,m.y-(1+Math.pow(b,1.12)/100)*g*(p/3+1)*S,m.x-(1+Math.pow(b,1.12)/100)*g*(p/3+1)*A,m.y]};_a.findStraightEdgePoints=function(r){r._private.rscratch.edgeType="straight"};_a.findBezierPoints=function(r,e,t,n,i){var a=r._private.rscratch,o=e.vectorNormInverse,s=e.posPts,u=e.intersectionPts,l=r.pstyle("edge-distances").value,f=r.pstyle("control-point-step-size").pfValue,c=r.pstyle("control-point-distances"),d=r.pstyle("control-point-weights"),h=c&&d?Math.min(c.value.length,d.value.length):1,p=c?c.pfValue[0]:void 0,g=d.value[0],b=n;a.edgeType=b?"multibezier":"bezier",a.ctrlpts=[];for(var v=0;v<h;v++){var y=(.5-e.eles.length/2+t)*f*(i?-1:1),m=void 0,w=Lk(y);b&&(p=c?c.pfValue[v]:f,g=d.value[v]),n?m=p:m=p!==void 0?w*p:void 0;var S=m!==void 0?m:y,A=1-g,_=g,E=l==="node-position"?s:u,k={x:E.x1*A+E.x2*_,y:E.y1*A+E.y2*_};a.ctrlpts.push(k.x+o.x*S,k.y+o.y*S)}};_a.findTaxiPoints=function(r,e){var t=r._private.rscratch;t.edgeType="segments";var n="vertical",i="horizontal",a="leftward",o="rightward",s="downward",u="upward",l="auto",f=e.posPts,c=e.srcW,d=e.srcH,h=e.tgtW,p=e.tgtH,g=r.pstyle("edge-distances").value,b=g!=="node-position",v=r.pstyle("taxi-direction").value,y=v,m=r.pstyle("taxi-turn"),w=m.units==="%",S=m.pfValue,A=S<0,_=r.pstyle("taxi-turn-min-distance").pfValue,E=b?(c+h)/2:0,k=b?(d+p)/2:0,M=f.x2-f.x1,T=f.y2-f.y1,C=function(Re,ze){return Re>0?Math.max(Re-ze,0):Math.min(Re+ze,0)},R=C(M,E),x=C(T,k),B=!1;y===l?v=Math.abs(R)>Math.abs(x)?i:n:y===u||y===s?(v=n,B=!0):(y===a||y===o)&&(v=i,B=!0);var D=v===n,O=D?x:R,G=D?T:M,V=Lk(G),I=!1;!(B&&(w||A))&&(y===s&&G<0||y===u&&G>0||y===a&&G>0||y===o&&G<0)&&(V*=-1,O=V*Math.abs(O),I=!0);var z;if(w){var P=S<0?1+S:S;z=P*O}else{var q=S<0?O:0;z=q+S*V}var F=function(Re){return Math.abs(Re)<_||Math.abs(Re)>=Math.abs(O)},U=F(z),W=F(Math.abs(O)-Math.abs(z)),X=U||W;if(X&&!I)if(D){var te=Math.abs(G)<=d/2,ne=Math.abs(M)<=h/2;if(te){var he=(f.x1+f.x2)/2,ve=f.y1,Ce=f.y2;t.segpts=[he,ve,he,Ce]}else if(ne){var Le=(f.y1+f.y2)/2,K=f.x1,le=f.x2;t.segpts=[K,Le,le,Le]}else t.segpts=[f.x1,f.y2]}else{var Z=Math.abs(G)<=c/2,ie=Math.abs(T)<=p/2;if(Z){var re=(f.y1+f.y2)/2,J=f.x1,fe=f.x2;t.segpts=[J,re,fe,re]}else if(ie){var we=(f.x1+f.x2)/2,ge=f.y1,me=f.y2;t.segpts=[we,ge,we,me]}else t.segpts=[f.x2,f.y1]}else if(D){var ue=f.y1+z+(b?d/2*V:0),ce=f.x1,oe=f.x2;t.segpts=[ce,ue,oe,ue]}else{var Ae=f.x1+z+(b?c/2*V:0),Te=f.y1,Ge=f.y2;t.segpts=[Ae,Te,Ae,Ge]}};_a.tryToCorrectInvalidPoints=function(r,e){var t=r._private.rscratch;if(t.edgeType==="bezier"){var n=e.srcPos,i=e.tgtPos,a=e.srcW,o=e.srcH,s=e.tgtW,u=e.tgtH,l=e.srcShape,f=e.tgtShape,c=!Ht(t.startX)||!Ht(t.startY),d=!Ht(t.arrowStartX)||!Ht(t.arrowStartY),h=!Ht(t.endX)||!Ht(t.endY),p=!Ht(t.arrowEndX)||!Ht(t.arrowEndY),g=3,b=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth,v=g*b,y=bl({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.startX,y:t.startY}),m=y<v,w=bl({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.endX,y:t.endY}),S=w<v,A=!1;if(c||d||m){A=!0;var _={x:t.ctrlpts[0]-n.x,y:t.ctrlpts[1]-n.y},E=Math.sqrt(_.x*_.x+_.y*_.y),k={x:_.x/E,y:_.y/E},M=Math.max(a,o),T={x:t.ctrlpts[0]+k.x*2*M,y:t.ctrlpts[1]+k.y*2*M},C=l.intersectLine(n.x,n.y,a,o,T.x,T.y,0);m?(t.ctrlpts[0]=t.ctrlpts[0]+k.x*(v-y),t.ctrlpts[1]=t.ctrlpts[1]+k.y*(v-y)):(t.ctrlpts[0]=C[0]+k.x*v,t.ctrlpts[1]=C[1]+k.y*v)}if(h||p||S){A=!0;var R={x:t.ctrlpts[0]-i.x,y:t.ctrlpts[1]-i.y},x=Math.sqrt(R.x*R.x+R.y*R.y),B={x:R.x/x,y:R.y/x},D=Math.max(a,o),O={x:t.ctrlpts[0]+B.x*2*D,y:t.ctrlpts[1]+B.y*2*D},G=f.intersectLine(i.x,i.y,s,u,O.x,O.y,0);S?(t.ctrlpts[0]=t.ctrlpts[0]+B.x*(v-w),t.ctrlpts[1]=t.ctrlpts[1]+B.y*(v-w)):(t.ctrlpts[0]=G[0]+B.x*v,t.ctrlpts[1]=G[1]+B.y*v)}A&&this.findEndpoints(r)}};_a.storeAllpts=function(r){var e=r._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var t=0;t+1<e.ctrlpts.length;t+=2)e.allpts.push(e.ctrlpts[t],e.ctrlpts[t+1]),t+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[t]+e.ctrlpts[t+2])/2,(e.ctrlpts[t+1]+e.ctrlpts[t+3])/2);e.allpts.push(e.endX,e.endY);var n,i;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,i=.5,e.midX=Bi(e.allpts[n],e.allpts[n+2],e.allpts[n+4],i),e.midY=Bi(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],i))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments")if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.segpts.length%4===0){var a=e.segpts.length/2,o=a-2;e.midX=(e.segpts[o]+e.segpts[a])/2,e.midY=(e.segpts[o+1]+e.segpts[a+1])/2}else{var s=e.segpts.length/2-1;e.midX=e.segpts[s],e.midY=e.segpts[s+1]}};_a.checkForInvalidEdgeWarning=function(r){var e=r[0]._private.rscratch;e.nodesOverlap||Ht(e.startX)&&Ht(e.startY)&&Ht(e.endX)&&Ht(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,vn("Edge `"+r.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};_a.findEdgeControlPoints=function(r){var e=this;if(!(!r||r.length===0)){for(var t=this,n=t.cy,i=n.hasCompoundNodes(),a={map:new Jo,get:function(_){var E=this.map.get(_[0]);return E!=null?E.get(_[1]):null},set:function(_,E){var k=this.map.get(_[0]);k==null&&(k=new Jo,this.map.set(_[0],k)),k.set(_[1],E)}},o=[],s=[],u=0;u<r.length;u++){var l=r[u],f=l._private,c=l.pstyle("curve-style").value;if(!(l.removed()||!l.takesUpSpace())){if(c==="haystack"){s.push(l);continue}var d=c==="unbundled-bezier"||c==="segments"||c==="straight"||c==="straight-triangle"||c==="taxi",h=c==="unbundled-bezier"||c==="bezier",p=f.source,g=f.target,b=p.poolIndex(),v=g.poolIndex(),y=[b,v].sort(),m=a.get(y);m==null&&(m={eles:[]},a.set(y,m),o.push(y)),m.eles.push(l),d&&(m.hasUnbundled=!0),h&&(m.hasBezier=!0)}}for(var w=function(_){var E=o[_],k=a.get(E),M=void 0;if(!k.hasUnbundled){var T=k.eles[0].parallelEdges().filter(function(me){return me.isBundledBezier()});ow(k.eles),T.forEach(function(me){return k.eles.push(me)}),k.eles.sort(function(me,ue){return me.poolIndex()-ue.poolIndex()})}var C=k.eles[0],R=C.source(),x=C.target();if(R.poolIndex()>x.poolIndex()){var B=R;R=x,x=B}var D=k.srcPos=R.position(),O=k.tgtPos=x.position(),G=k.srcW=R.outerWidth(),V=k.srcH=R.outerHeight(),I=k.tgtW=x.outerWidth(),z=k.tgtH=x.outerHeight(),P=k.srcShape=t.nodeShapes[e.getNodeShape(R)],q=k.tgtShape=t.nodeShapes[e.getNodeShape(x)];k.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var F=0;F<k.eles.length;F++){var U=k.eles[F],W=U[0]._private.rscratch,X=U.pstyle("curve-style").value,te=X==="unbundled-bezier"||X==="segments"||X==="taxi",ne=!R.same(U.source());if(!k.calculatedIntersection&&R!==x&&(k.hasBezier||k.hasUnbundled)){k.calculatedIntersection=!0;var he=P.intersectLine(D.x,D.y,G,V,O.x,O.y,0),ve=k.srcIntn=he,Ce=q.intersectLine(O.x,O.y,I,z,D.x,D.y,0),Le=k.tgtIntn=Ce,K=k.intersectionPts={x1:he[0],x2:Ce[0],y1:he[1],y2:Ce[1]},le=k.posPts={x1:D.x,x2:O.x,y1:D.y,y2:O.y},Z=Ce[1]-he[1],ie=Ce[0]-he[0],re=Math.sqrt(ie*ie+Z*Z),J=k.vector={x:ie,y:Z},fe=k.vectorNorm={x:J.x/re,y:J.y/re},we={x:-fe.y,y:fe.x};k.nodesOverlap=!Ht(re)||q.checkPoint(he[0],he[1],0,I,z,O.x,O.y)||P.checkPoint(Ce[0],Ce[1],0,G,V,D.x,D.y),k.vectorNormInverse=we,M={nodesOverlap:k.nodesOverlap,dirCounts:k.dirCounts,calculatedIntersection:!0,hasBezier:k.hasBezier,hasUnbundled:k.hasUnbundled,eles:k.eles,srcPos:O,tgtPos:D,srcW:I,srcH:z,tgtW:G,tgtH:V,srcIntn:Le,tgtIntn:ve,srcShape:q,tgtShape:P,posPts:{x1:le.x2,y1:le.y2,x2:le.x1,y2:le.y1},intersectionPts:{x1:K.x2,y1:K.y2,x2:K.x1,y2:K.y1},vector:{x:-J.x,y:-J.y},vectorNorm:{x:-fe.x,y:-fe.y},vectorNormInverse:{x:-we.x,y:-we.y}}}var ge=ne?M:k;W.nodesOverlap=ge.nodesOverlap,W.srcIntn=ge.srcIntn,W.tgtIntn=ge.tgtIntn,i&&(R.isParent()||R.isChild()||x.isParent()||x.isChild())&&(R.parents().anySame(x)||x.parents().anySame(R)||R.same(x)&&R.isParent())?e.findCompoundLoopPoints(U,ge,F,te):R===x?e.findLoopPoints(U,ge,F,te):X==="segments"?e.findSegmentsPoints(U,ge):X==="taxi"?e.findTaxiPoints(U,ge):X==="straight"||!te&&k.eles.length%2===1&&F===Math.floor(k.eles.length/2)?e.findStraightEdgePoints(U):e.findBezierPoints(U,ge,F,te,ne),e.findEndpoints(U),e.tryToCorrectInvalidPoints(U,ge),e.checkForInvalidEdgeWarning(U),e.storeAllpts(U),e.storeEdgeProjections(U),e.calculateArrowAngles(U),e.recalculateEdgeLabelProjections(U),e.calculateLabelAngles(U)}},S=0;S<o.length;S++)w(S);this.findHaystackPoints(s)}};function mL(r){var e=[];if(r!=null){for(var t=0;t<r.length;t+=2){var n=r[t],i=r[t+1];e.push({x:n,y:i})}return e}}_a.getSegmentPoints=function(r){var e=r[0]._private.rscratch,t=e.edgeType;if(t==="segments")return this.recalculateRenderedStyle(r),mL(e.segpts)};_a.getControlPoints=function(r){var e=r[0]._private.rscratch,t=e.edgeType;if(t==="bezier"||t==="multibezier"||t==="self"||t==="compound")return this.recalculateRenderedStyle(r),mL(e.ctrlpts)};_a.getEdgeMidpoint=function(r){var e=r[0]._private.rscratch;return this.recalculateRenderedStyle(r),{x:e.midX,y:e.midY}};var zh={};zh.manualEndptToPx=function(r,e){var t=this,n=r.position(),i=r.outerWidth(),a=r.outerHeight();if(e.value.length===2){var o=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(o[0]=o[0]*i),e.units[1]==="%"&&(o[1]=o[1]*a),o[0]+=n.x,o[1]+=n.y,o}else{var s=e.pfValue[0];s=-Math.PI/2+s;var u=2*Math.max(i,a),l=[n.x+Math.cos(s)*u,n.y+Math.sin(s)*u];return t.nodeShapes[this.getNodeShape(r)].intersectLine(n.x,n.y,i,a,l[0],l[1],0)}};zh.findEndpoints=function(r){var e=this,t,n=r.source()[0],i=r.target()[0],a=n.position(),o=i.position(),s=r.pstyle("target-arrow-shape").value,u=r.pstyle("source-arrow-shape").value,l=r.pstyle("target-distance-from-node").pfValue,f=r.pstyle("source-distance-from-node").pfValue,c=r.pstyle("curve-style").value,d=r._private.rscratch,h=d.edgeType,p=c==="taxi",g=h==="self"||h==="compound",b=h==="bezier"||h==="multibezier"||g,v=h!=="bezier",y=h==="straight"||h==="segments",m=h==="segments",w=b||v||y,S=g||p,A=r.pstyle("source-endpoint"),_=S?"outside-to-node":A.value,E=r.pstyle("target-endpoint"),k=S?"outside-to-node":E.value;d.srcManEndpt=A,d.tgtManEndpt=E;var M,T,C,R;if(b){var x=[d.ctrlpts[0],d.ctrlpts[1]],B=v?[d.ctrlpts[d.ctrlpts.length-2],d.ctrlpts[d.ctrlpts.length-1]]:x;M=B,T=x}else if(y){var D=m?d.segpts.slice(0,2):[o.x,o.y],O=m?d.segpts.slice(d.segpts.length-2):[a.x,a.y];M=O,T=D}if(k==="inside-to-node")t=[o.x,o.y];else if(E.units)t=this.manualEndptToPx(i,E);else if(k==="outside-to-line")t=d.tgtIntn;else if(k==="outside-to-node"||k==="outside-to-node-or-label"?C=M:(k==="outside-to-line"||k==="outside-to-line-or-label")&&(C=[a.x,a.y]),t=e.nodeShapes[this.getNodeShape(i)].intersectLine(o.x,o.y,i.outerWidth(),i.outerHeight(),C[0],C[1],0),k==="outside-to-node-or-label"||k==="outside-to-line-or-label"){var G=i._private.rscratch,V=G.labelWidth,I=G.labelHeight,z=G.labelX,P=G.labelY,q=V/2,F=I/2,U=i.pstyle("text-valign").value;U==="top"?P-=F:U==="bottom"&&(P+=F);var W=i.pstyle("text-halign").value;W==="left"?z-=q:W==="right"&&(z+=q);var X=gh(C[0],C[1],[z-q,P-F,z+q,P-F,z+q,P+F,z-q,P+F],o.x,o.y);if(X.length>0){var te=a,ne=il(te,Sf(t)),he=il(te,Sf(X)),ve=ne;if(he<ne&&(t=X,ve=he),X.length>2){var Ce=il(te,{x:X[2],y:X[3]});Ce<ve&&(t=[X[2],X[3]])}}}var Le=Ed(t,M,e.arrowShapes[s].spacing(r)+l),K=Ed(t,M,e.arrowShapes[s].gap(r)+l);if(d.endX=K[0],d.endY=K[1],d.arrowEndX=Le[0],d.arrowEndY=Le[1],_==="inside-to-node")t=[a.x,a.y];else if(A.units)t=this.manualEndptToPx(n,A);else if(_==="outside-to-line")t=d.srcIntn;else if(_==="outside-to-node"||_==="outside-to-node-or-label"?R=T:(_==="outside-to-line"||_==="outside-to-line-or-label")&&(R=[o.x,o.y]),t=e.nodeShapes[this.getNodeShape(n)].intersectLine(a.x,a.y,n.outerWidth(),n.outerHeight(),R[0],R[1],0),_==="outside-to-node-or-label"||_==="outside-to-line-or-label"){var le=n._private.rscratch,Z=le.labelWidth,ie=le.labelHeight,re=le.labelX,J=le.labelY,fe=Z/2,we=ie/2,ge=n.pstyle("text-valign").value;ge==="top"?J-=we:ge==="bottom"&&(J+=we);var me=n.pstyle("text-halign").value;me==="left"?re-=fe:me==="right"&&(re+=fe);var ue=gh(R[0],R[1],[re-fe,J-we,re+fe,J-we,re+fe,J+we,re-fe,J+we],a.x,a.y);if(ue.length>0){var ce=o,oe=il(ce,Sf(t)),Ae=il(ce,Sf(ue)),Te=oe;if(Ae<oe&&(t=[ue[0],ue[1]],Te=Ae),ue.length>2){var Ge=il(ce,{x:ue[2],y:ue[3]});Ge<Te&&(t=[ue[2],ue[3]])}}}var Fe=Ed(t,T,e.arrowShapes[u].spacing(r)+f),Re=Ed(t,T,e.arrowShapes[u].gap(r)+f);d.startX=Re[0],d.startY=Re[1],d.arrowStartX=Fe[0],d.arrowStartY=Fe[1],w&&(!Ht(d.startX)||!Ht(d.startY)||!Ht(d.endX)||!Ht(d.endY)?d.badLine=!0:d.badLine=!1)};zh.getSourceEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};zh.getTargetEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var yw={};function QB(r,e,t){for(var n=function(l,f,c,d){return Bi(l,f,c,d)},i=e._private,a=i.rstyle.bezierPts,o=0;o<r.bezierProjPcts.length;o++){var s=r.bezierProjPcts[o];a.push({x:n(t[0],t[2],t[4],s),y:n(t[1],t[3],t[5],s)})}}yw.storeEdgeProjections=function(r){var e=r._private,t=e.rscratch,n=t.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var i=0;i+5<t.allpts.length;i+=4)QB(this,r,t.allpts.slice(i,i+6))}else if(n==="segments")for(var a=e.rstyle.linePts=[],i=0;i+1<t.allpts.length;i+=2)a.push({x:t.allpts[i],y:t.allpts[i+1]});else if(n==="haystack"){var o=t.haystackPts;e.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth};yw.recalculateEdgeProjections=function(r){this.findEdgeControlPoints(r)};var ss={};ss.recalculateNodeLabelProjection=function(r){var e=r.pstyle("label").strValue;if(!Tu(e)){var t,n,i=r._private,a=r.width(),o=r.height(),s=r.padding(),u=r.position(),l=r.pstyle("text-halign").strValue,f=r.pstyle("text-valign").strValue,c=i.rscratch,d=i.rstyle;switch(l){case"left":t=u.x-a/2-s;break;case"right":t=u.x+a/2+s;break;default:t=u.x}switch(f){case"top":n=u.y-o/2-s;break;case"bottom":n=u.y+o/2+s;break;default:n=u.y}c.labelX=t,c.labelY=n,d.labelX=t,d.labelY=n,this.calculateLabelAngles(r),this.applyLabelDimensions(r)}};var yL=function(e,t){var n=Math.atan(t/e);return e===0&&n<0&&(n=n*-1),n},bL=function(e,t){var n=t.x-e.x,i=t.y-e.y;return yL(n,i)},JB=function(e,t,n,i){var a=vh(0,i-.001,1),o=vh(0,i+.001,1),s=kf(e,t,n,a),u=kf(e,t,n,o);return bL(s,u)};ss.recalculateEdgeLabelProjections=function(r){var e,t=r._private,n=t.rscratch,i=this,a={mid:r.pstyle("label").strValue,source:r.pstyle("source-label").strValue,target:r.pstyle("target-label").strValue};if(a.mid||a.source||a.target){e={x:n.midX,y:n.midY};var o=function(c,d,h){vu(t.rscratch,c,d,h),vu(t.rstyle,c,d,h)};o("labelX",null,e.x),o("labelY",null,e.y);var s=yL(n.midDispX,n.midDispY);o("labelAutoAngle",null,s);var u=function f(){if(f.cache)return f.cache;for(var c=[],d=0;d+5<n.allpts.length;d+=4){var h={x:n.allpts[d],y:n.allpts[d+1]},p={x:n.allpts[d+2],y:n.allpts[d+3]},g={x:n.allpts[d+4],y:n.allpts[d+5]};c.push({p0:h,p1:p,p2:g,startDist:0,length:0,segments:[]})}var b=t.rstyle.bezierPts,v=i.bezierProjPcts.length;function y(_,E,k,M,T){var C=bl(E,k),R=_.segments[_.segments.length-1],x={p0:E,p1:k,t0:M,t1:T,startDist:R?R.startDist+R.length:0,length:C};_.segments.push(x),_.length+=C}for(var m=0;m<c.length;m++){var w=c[m],S=c[m-1];S&&(w.startDist=S.startDist+S.length),y(w,w.p0,b[m*v],0,i.bezierProjPcts[0]);for(var A=0;A<v-1;A++)y(w,b[m*v+A],b[m*v+A+1],i.bezierProjPcts[A],i.bezierProjPcts[A+1]);y(w,b[m*v+v-1],w.p2,i.bezierProjPcts[v-1],1)}return f.cache=c},l=function(c){var d,h=c==="source";if(a[c]){var p=r.pstyle(c+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var g=u(),b,v=0,y=0,m=0;m<g.length;m++){for(var w=g[h?m:g.length-1-m],S=0;S<w.segments.length;S++){var A=w.segments[h?S:w.segments.length-1-S],_=m===g.length-1&&S===w.segments.length-1;if(v=y,y+=A.length,y>=p||_){b={cp:w,segment:A};break}}if(b)break}var E=b.cp,k=b.segment,M=(p-v)/k.length,T=k.t1-k.t0,C=h?k.t0+T*M:k.t1-T*M;C=vh(0,C,1),e=kf(E.p0,E.p1,E.p2,C),d=JB(E.p0,E.p1,E.p2,C);break}case"straight":case"segments":case"haystack":{for(var R=0,x,B,D,O,G=n.allpts.length,V=0;V+3<G&&(h?(D={x:n.allpts[V],y:n.allpts[V+1]},O={x:n.allpts[V+2],y:n.allpts[V+3]}):(D={x:n.allpts[G-2-V],y:n.allpts[G-1-V]},O={x:n.allpts[G-4-V],y:n.allpts[G-3-V]}),x=bl(D,O),B=R,R+=x,!(R>=p));V+=2);var I=p-B,z=I/x;z=vh(0,z,1),e=pF(D,O,z),d=bL(D,O);break}}o("labelX",c,e.x),o("labelY",c,e.y),o("labelAutoAngle",c,d)}};l("source"),l("target"),this.applyLabelDimensions(r)}};ss.applyLabelDimensions=function(r){this.applyPrefixedLabelDimensions(r),r.isEdge()&&(this.applyPrefixedLabelDimensions(r,"source"),this.applyPrefixedLabelDimensions(r,"target"))};ss.applyPrefixedLabelDimensions=function(r,e){var t=r._private,n=this.getLabelText(r,e),i=this.calculateLabelDimensions(r,n),a=r.pstyle("line-height").pfValue,o=r.pstyle("text-wrap").strValue,s=xo(t.rscratch,"labelWrapCachedLines",e)||[],u=o!=="wrap"?1:Math.max(s.length,1),l=i.height/u,f=l*a,c=i.width,d=i.height+(u-1)*(a-1)*l;vu(t.rstyle,"labelWidth",e,c),vu(t.rscratch,"labelWidth",e,c),vu(t.rstyle,"labelHeight",e,d),vu(t.rscratch,"labelHeight",e,d),vu(t.rscratch,"labelLineHeight",e,f)};ss.getLabelText=function(r,e){var t=r._private,n=e?e+"-":"",i=r.pstyle(n+"label").strValue,a=r.pstyle("text-transform").value,o=function(I,z){return z?(vu(t.rscratch,I,e,z),z):xo(t.rscratch,I,e)};if(!i)return"";a=="none"||(a=="uppercase"?i=i.toUpperCase():a=="lowercase"&&(i=i.toLowerCase()));var s=r.pstyle("text-wrap").value;if(s==="wrap"){var u=o("labelKey");if(u!=null&&o("labelWrapKey")===u)return o("labelWrapCachedText");for(var l="​",f=i.split(`
`),c=r.pstyle("text-max-width").pfValue,d=r.pstyle("text-overflow-wrap").value,h=d==="anywhere",p=[],g=/[\s\u200b]+/,b=h?"":" ",v=0;v<f.length;v++){var y=f[v],m=this.calculateLabelDimensions(r,y),w=m.width;if(h){var S=y.split("").join(l);y=S}if(w>c){for(var A=y.split(g),_="",E=0;E<A.length;E++){var k=A[E],M=_.length===0?k:_+b+k,T=this.calculateLabelDimensions(r,M),C=T.width;C<=c?_+=k+b:(_&&p.push(_),_=k+b)}_.match(/^[\s\u200b]+$/)||p.push(_)}else p.push(y)}o("labelWrapCachedLines",p),i=o("labelWrapCachedText",p.join(`
`)),o("labelWrapKey",u)}else if(s==="ellipsis"){var R=r.pstyle("text-max-width").pfValue,x="",B="…",D=!1;if(this.calculateLabelDimensions(r,i).width<R)return i;for(var O=0;O<i.length;O++){var G=this.calculateLabelDimensions(r,x+i[O]+B).width;if(G>R)break;x+=i[O],O===i.length-1&&(D=!0)}return D||(x+=B),x}return i};ss.getLabelJustification=function(r){var e=r.pstyle("text-justification").strValue,t=r.pstyle("text-halign").strValue;if(e==="auto")if(r.isNode())switch(t){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};ss.calculateLabelDimensions=function(r,e){var t=this,n=yl(e,r._private.labelDimsKey),i=t.labelDimCache||(t.labelDimCache=[]),a=i[n];if(a!=null)return a;var o=0,s=r.pstyle("font-style").strValue,u=r.pstyle("font-size").pfValue,l=r.pstyle("font-family").strValue,f=r.pstyle("font-weight").strValue,c=this.labelCalcCanvas,d=this.labelCalcCanvasContext;if(!c){c=this.labelCalcCanvas=document.createElement("canvas"),d=this.labelCalcCanvasContext=c.getContext("2d");var h=c.style;h.position="absolute",h.left="-9999px",h.top="-9999px",h.zIndex="-1",h.visibility="hidden",h.pointerEvents="none"}d.font="".concat(s," ").concat(f," ").concat(u,"px ").concat(l);for(var p=0,g=0,b=e.split(`
`),v=0;v<b.length;v++){var y=b[v],m=d.measureText(y),w=Math.ceil(m.width),S=u;p=Math.max(w,p),g+=S}return p+=o,g+=o,i[n]={width:p,height:g}};ss.calculateLabelAngle=function(r,e){var t=r._private,n=t.rscratch,i=r.isEdge(),a=e?e+"-":"",o=r.pstyle(a+"text-rotation"),s=o.strValue;return s==="none"?0:i&&s==="autorotate"?n.labelAutoAngle:s==="autorotate"?0:o.pfValue};ss.calculateLabelAngles=function(r){var e=this,t=r.isEdge(),n=r._private,i=n.rscratch;i.labelAngle=e.calculateLabelAngle(r),t&&(i.sourceLabelAngle=e.calculateLabelAngle(r,"source"),i.targetLabelAngle=e.calculateLabelAngle(r,"target"))};var wL={},Z_=28,Q_=!1;wL.getNodeShape=function(r){var e=this,t=r.pstyle("shape").value;if(t==="cutrectangle"&&(r.width()<Z_||r.height()<Z_))return Q_||(vn("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Q_=!0),"rectangle";if(r.isParent())return t==="rectangle"||t==="roundrectangle"||t==="round-rectangle"||t==="cutrectangle"||t==="cut-rectangle"||t==="barrel"?t:"rectangle";if(t==="polygon"){var n=r.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return t};var ov={};ov.registerCalculationListeners=function(){var r=this.cy,e=r.collection(),t=this,n=function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(o),s)for(var u=0;u<o.length;u++){var l=o[u],f=l._private,c=f.rstyle;c.clean=!1,c.cleanConnected=!1}};t.binder(r).on("bounds.* dirty.*",function(o){var s=o.target;n(s)}).on("style.* background.*",function(o){var s=o.target;n(s,!1)});var i=function(o){if(o){var s=t.onUpdateEleCalcsFns;e.cleanStyle();for(var u=0;u<e.length;u++){var l=e[u],f=l._private.rstyle;l.isNode()&&!f.cleanConnected&&(n(l.connectedEdges()),f.cleanConnected=!0)}if(s)for(var c=0;c<s.length;c++){var d=s[c];d(o,e)}t.recalculateRenderedStyle(e),e=r.collection()}};t.flushRenderedStyleQueue=function(){i(!0)},t.beforeRender(i,t.beforeRenderPriorities.eleCalcs)};ov.onUpdateEleCalcs=function(r){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(r)};ov.recalculateRenderedStyle=function(r,e){var t=function(w){return w._private.rstyle.cleanConnected},n=[],i=[];if(!this.destroyed){e===void 0&&(e=!0);for(var a=0;a<r.length;a++){var o=r[a],s=o._private,u=s.rstyle;o.isEdge()&&(!t(o.source())||!t(o.target()))&&(u.clean=!1),!(e&&u.clean||o.removed())&&o.pstyle("display").value!=="none"&&(s.group==="nodes"?i.push(o):n.push(o),u.clean=!0)}for(var l=0;l<i.length;l++){var f=i[l],c=f._private,d=c.rstyle,h=f.position();this.recalculateNodeLabelProjection(f),d.nodeX=h.x,d.nodeY=h.y,d.nodeW=f.pstyle("width").pfValue,d.nodeH=f.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var p=0;p<n.length;p++){var g=n[p],b=g._private,v=b.rstyle,y=b.rscratch;v.srcX=y.arrowStartX,v.srcY=y.arrowStartY,v.tgtX=y.arrowEndX,v.tgtY=y.arrowEndY,v.midX=y.midX,v.midY=y.midY,v.labelAngle=y.labelAngle,v.sourceLabelAngle=y.sourceLabelAngle,v.targetLabelAngle=y.targetLabelAngle}}};var sv={};sv.updateCachedGrabbedEles=function(){var r=this.cachedZSortedEles;if(r){r.drag=[],r.nondrag=[];for(var e=[],t=0;t<r.length;t++){var n=r[t],i=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):i.inDragLayer?r.drag.push(n):r.nondrag.push(n)}for(var t=0;t<e.length;t++){var n=e[t];r.drag.push(n)}}};sv.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};sv.getCachedZSortedEles=function(r){if(r||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(oL),e.interactive=e.filter(function(t){return t.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var _L={};[Nl,Sp,_a,zh,yw,ss,wL,ov,sv].forEach(function(r){Sr(_L,r)});var xL={};xL.getCachedImage=function(r,e,t){var n=this,i=n.imageCache=n.imageCache||{},a=i[r];if(a)return a.image.complete||a.image.addEventListener("load",t),a.image;a=i[r]=i[r]||{};var o=a.image=new Image;o.addEventListener("load",t),o.addEventListener("error",function(){o.error=!0});var s="data:",u=r.substring(0,s.length).toLowerCase()===s;return u||(e=e==="null"?null:e,o.crossOrigin=e),o.src=r,o};var rc={};rc.registerBinding=function(r,e,t,n){var i=Array.prototype.slice.apply(arguments,[1]),a=this.binder(r);return a.on.apply(a,i)};rc.binder=function(r){var e=this,t=r===window||r===document||r===document.body||b6(r);if(e.supportsPassiveEvents==null){var n=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return n=!0,!0}});window.addEventListener("test",null,i)}catch{}e.supportsPassiveEvents=n}var a=function(s,u,l){var f=Array.prototype.slice.call(arguments);return t&&e.supportsPassiveEvents&&(f[2]={capture:l??!1,passive:!1,once:!1}),e.bindings.push({target:r,args:f}),(r.addEventListener||r.on).apply(r,f),this};return{on:a,addEventListener:a,addListener:a,bind:a}};rc.nodeIsDraggable=function(r){return r&&r.isNode()&&!r.locked()&&r.grabbable()};rc.nodeIsGrabbable=function(r){return this.nodeIsDraggable(r)&&r.interactive()};rc.load=function(){var r=this,e=function(ue){return ue.selected()},t=function(ue,ce,oe,Ae){ue==null&&(ue=r.cy);for(var Te=0;Te<ce.length;Te++){var Ge=ce[Te];ue.emit({originalEvent:oe,type:Ge,position:Ae})}},n=function(ue){return ue.shiftKey||ue.metaKey||ue.ctrlKey},i=function(ue,ce){var oe=!0;if(r.cy.hasCompoundNodes()&&ue&&ue.pannable())for(var Ae=0;ce&&Ae<ce.length;Ae++){var ue=ce[Ae];if(ue.isNode()&&ue.isParent()&&!ue.pannable()){oe=!1;break}}else oe=!0;return oe},a=function(ue){ue[0]._private.grabbed=!0},o=function(ue){ue[0]._private.grabbed=!1},s=function(ue){ue[0]._private.rscratch.inDragLayer=!0},u=function(ue){ue[0]._private.rscratch.inDragLayer=!1},l=function(ue){ue[0]._private.rscratch.isGrabTarget=!0},f=function(ue){ue[0]._private.rscratch.isGrabTarget=!1},c=function(ue,ce){var oe=ce.addToList,Ae=oe.has(ue);!Ae&&ue.grabbable()&&!ue.locked()&&(oe.merge(ue),a(ue))},d=function(ue,ce){if(ue.cy().hasCompoundNodes()&&!(ce.inDragLayer==null&&ce.addToList==null)){var oe=ue.descendants();ce.inDragLayer&&(oe.forEach(s),oe.connectedEdges().forEach(s)),ce.addToList&&c(oe,ce)}},h=function(ue,ce){ce=ce||{};var oe=ue.cy().hasCompoundNodes();ce.inDragLayer&&(ue.forEach(s),ue.neighborhood().stdFilter(function(Ae){return!oe||Ae.isEdge()}).forEach(s)),ce.addToList&&ue.forEach(function(Ae){c(Ae,ce)}),d(ue,ce),b(ue,{inDragLayer:ce.inDragLayer}),r.updateCachedGrabbedEles()},p=h,g=function(ue){ue&&(r.getCachedZSortedEles().forEach(function(ce){o(ce),u(ce),f(ce)}),r.updateCachedGrabbedEles())},b=function(ue,ce){if(!(ce.inDragLayer==null&&ce.addToList==null)&&ue.cy().hasCompoundNodes()){var oe=ue.ancestors().orphans();if(!oe.same(ue)){var Ae=oe.descendants().spawnSelf().merge(oe).unmerge(ue).unmerge(ue.descendants()),Te=Ae.connectedEdges();ce.inDragLayer&&(Te.forEach(s),Ae.forEach(s)),ce.addToList&&Ae.forEach(function(Ge){c(Ge,ce)})}}},v=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},y=typeof MutationObserver<"u",m=typeof ResizeObserver<"u";y?(r.removeObserver=new MutationObserver(function(me){for(var ue=0;ue<me.length;ue++){var ce=me[ue],oe=ce.removedNodes;if(oe)for(var Ae=0;Ae<oe.length;Ae++){var Te=oe[Ae];if(Te===r.container){r.destroy();break}}}}),r.container.parentNode&&r.removeObserver.observe(r.container.parentNode,{childList:!0})):r.registerBinding(r.container,"DOMNodeRemoved",function(me){r.destroy()});var w=Yp.default(function(){r.cy.resize()},100);y&&(r.styleObserver=new MutationObserver(w),r.styleObserver.observe(r.container,{attributes:!0})),r.registerBinding(window,"resize",w),m&&(r.resizeObserver=new ResizeObserver(w),r.resizeObserver.observe(r.container));var S=function(ue,ce){for(;ue!=null;)ce(ue),ue=ue.parentNode},A=function(){r.invalidateContainerClientCoordsCache()};S(r.container,function(me){r.registerBinding(me,"transitionend",A),r.registerBinding(me,"animationend",A),r.registerBinding(me,"scroll",A)}),r.registerBinding(r.container,"contextmenu",function(me){me.preventDefault()});var _=function(){return r.selection[4]!==0},E=function(ue){for(var ce=r.findContainerClientCoords(),oe=ce[0],Ae=ce[1],Te=ce[2],Ge=ce[3],Fe=ue.touches?ue.touches:[ue],Re=!1,ze=0;ze<Fe.length;ze++){var Ie=Fe[ze];if(oe<=Ie.clientX&&Ie.clientX<=oe+Te&&Ae<=Ie.clientY&&Ie.clientY<=Ae+Ge){Re=!0;break}}if(!Re)return!1;for(var Ve=r.container,We=ue.target,Ze=We.parentNode,at=!1;Ze;){if(Ze===Ve){at=!0;break}Ze=Ze.parentNode}return!!at};r.registerBinding(r.container,"mousedown",function(ue){if(E(ue)){ue.preventDefault(),v(),r.hoverData.capture=!0,r.hoverData.which=ue.which;var ce=r.cy,oe=[ue.clientX,ue.clientY],Ae=r.projectIntoViewport(oe[0],oe[1]),Te=r.selection,Ge=r.findNearestElements(Ae[0],Ae[1],!0,!1),Fe=Ge[0],Re=r.dragData.possibleDragElements;r.hoverData.mdownPos=Ae,r.hoverData.mdownGPos=oe;var ze=function(){r.hoverData.tapholdCancelled=!1,clearTimeout(r.hoverData.tapholdTimeout),r.hoverData.tapholdTimeout=setTimeout(function(){if(!r.hoverData.tapholdCancelled){var ft=r.hoverData.down;ft?ft.emit({originalEvent:ue,type:"taphold",position:{x:Ae[0],y:Ae[1]}}):ce.emit({originalEvent:ue,type:"taphold",position:{x:Ae[0],y:Ae[1]}})}},r.tapholdDuration)};if(ue.which==3){r.hoverData.cxtStarted=!0;var Ie={originalEvent:ue,type:"cxttapstart",position:{x:Ae[0],y:Ae[1]}};Fe?(Fe.activate(),Fe.emit(Ie),r.hoverData.down=Fe):ce.emit(Ie),r.hoverData.downTime=new Date().getTime(),r.hoverData.cxtDragged=!1}else if(ue.which==1){Fe&&Fe.activate();{if(Fe!=null&&r.nodeIsGrabbable(Fe)){var Ve=function(ft){return{originalEvent:ue,type:ft,position:{x:Ae[0],y:Ae[1]}}},We=function(ft){ft.emit(Ve("grab"))};if(l(Fe),!Fe.selected())Re=r.dragData.possibleDragElements=ce.collection(),p(Fe,{addToList:Re}),Fe.emit(Ve("grabon")).emit(Ve("grab"));else{Re=r.dragData.possibleDragElements=ce.collection();var Ze=ce.$(function(at){return at.isNode()&&at.selected()&&r.nodeIsGrabbable(at)});h(Ze,{addToList:Re}),Fe.emit(Ve("grabon")),Ze.forEach(We)}r.redrawHint("eles",!0),r.redrawHint("drag",!0)}r.hoverData.down=Fe,r.hoverData.downs=Ge,r.hoverData.downTime=new Date().getTime()}t(Fe,["mousedown","tapstart","vmousedown"],ue,{x:Ae[0],y:Ae[1]}),Fe==null?(Te[4]=1,r.data.bgActivePosistion={x:Ae[0],y:Ae[1]},r.redrawHint("select",!0),r.redraw()):Fe.pannable()&&(Te[4]=1),ze()}Te[0]=Te[2]=Ae[0],Te[1]=Te[3]=Ae[1]}},!1),r.registerBinding(window,"mousemove",function(ue){var ce=r.hoverData.capture;if(!(!ce&&!E(ue))){var oe=!1,Ae=r.cy,Te=Ae.zoom(),Ge=[ue.clientX,ue.clientY],Fe=r.projectIntoViewport(Ge[0],Ge[1]),Re=r.hoverData.mdownPos,ze=r.hoverData.mdownGPos,Ie=r.selection,Ve=null;!r.hoverData.draggingEles&&!r.hoverData.dragging&&!r.hoverData.selecting&&(Ve=r.findNearestElement(Fe[0],Fe[1],!0,!1));var We=r.hoverData.last,Ze=r.hoverData.down,at=[Fe[0]-Ie[2],Fe[1]-Ie[3]],ft=r.dragData.possibleDragElements,wt;if(ze){var dt=Ge[0]-ze[0],vt=dt*dt,Et=Ge[1]-ze[1],Mt=Et*Et,mt=vt+Mt;r.hoverData.isOverThresholdDrag=wt=mt>=r.desktopTapThreshold2}var Dt=n(ue);wt&&(r.hoverData.tapholdCancelled=!0);var Lt=function(){var Xe=r.hoverData.dragDelta=r.hoverData.dragDelta||[];Xe.length===0?(Xe.push(at[0]),Xe.push(at[1])):(Xe[0]+=at[0],Xe[1]+=at[1])};oe=!0,t(Ve,["mousemove","vmousemove","tapdrag"],ue,{x:Fe[0],y:Fe[1]});var Tt=function(){r.data.bgActivePosistion=void 0,r.hoverData.selecting||Ae.emit({originalEvent:ue,type:"boxstart",position:{x:Fe[0],y:Fe[1]}}),Ie[4]=1,r.hoverData.selecting=!0,r.redrawHint("select",!0),r.redraw()};if(r.hoverData.which===3){if(wt){var nr={originalEvent:ue,type:"cxtdrag",position:{x:Fe[0],y:Fe[1]}};Ze?Ze.emit(nr):Ae.emit(nr),r.hoverData.cxtDragged=!0,(!r.hoverData.cxtOver||Ve!==r.hoverData.cxtOver)&&(r.hoverData.cxtOver&&r.hoverData.cxtOver.emit({originalEvent:ue,type:"cxtdragout",position:{x:Fe[0],y:Fe[1]}}),r.hoverData.cxtOver=Ve,Ve&&Ve.emit({originalEvent:ue,type:"cxtdragover",position:{x:Fe[0],y:Fe[1]}}))}}else if(r.hoverData.dragging){if(oe=!0,Ae.panningEnabled()&&Ae.userPanningEnabled()){var $t;if(r.hoverData.justStartedPan){var pt=r.hoverData.mdownPos;$t={x:(Fe[0]-pt[0])*Te,y:(Fe[1]-pt[1])*Te},r.hoverData.justStartedPan=!1}else $t={x:at[0]*Te,y:at[1]*Te};Ae.panBy($t),Ae.emit("dragpan"),r.hoverData.dragged=!0}Fe=r.projectIntoViewport(ue.clientX,ue.clientY)}else if(Ie[4]==1&&(Ze==null||Ze.pannable())){if(wt){if(!r.hoverData.dragging&&Ae.boxSelectionEnabled()&&(Dt||!Ae.panningEnabled()||!Ae.userPanningEnabled()))Tt();else if(!r.hoverData.selecting&&Ae.panningEnabled()&&Ae.userPanningEnabled()){var hr=i(Ze,r.hoverData.downs);hr&&(r.hoverData.dragging=!0,r.hoverData.justStartedPan=!0,Ie[4]=0,r.data.bgActivePosistion=Sf(Re),r.redrawHint("select",!0),r.redraw())}Ze&&Ze.pannable()&&Ze.active()&&Ze.unactivate()}}else{if(Ze&&Ze.pannable()&&Ze.active()&&Ze.unactivate(),(!Ze||!Ze.grabbed())&&Ve!=We&&(We&&t(We,["mouseout","tapdragout"],ue,{x:Fe[0],y:Fe[1]}),Ve&&t(Ve,["mouseover","tapdragover"],ue,{x:Fe[0],y:Fe[1]}),r.hoverData.last=Ve),Ze)if(wt){if(Ae.boxSelectionEnabled()&&Dt)Ze&&Ze.grabbed()&&(g(ft),Ze.emit("freeon"),ft.emit("free"),r.dragData.didDrag&&(Ze.emit("dragfreeon"),ft.emit("dragfree"))),Tt();else if(Ze&&Ze.grabbed()&&r.nodeIsDraggable(Ze)){var Rt=!r.dragData.didDrag;Rt&&r.redrawHint("eles",!0),r.dragData.didDrag=!0,r.hoverData.draggingEles||h(ft,{inDragLayer:!0});var Bt={x:0,y:0};if(Ht(at[0])&&Ht(at[1])&&(Bt.x+=at[0],Bt.y+=at[1],Rt)){var ur=r.hoverData.dragDelta;ur&&Ht(ur[0])&&Ht(ur[1])&&(Bt.x+=ur[0],Bt.y+=ur[1])}r.hoverData.draggingEles=!0,ft.silentShift(Bt).emit("position drag"),r.redrawHint("drag",!0),r.redraw()}}else Lt();oe=!0}if(Ie[2]=Fe[0],Ie[3]=Fe[1],oe)return ue.stopPropagation&&ue.stopPropagation(),ue.preventDefault&&ue.preventDefault(),!1}},!1);var k,M,T;r.registerBinding(window,"mouseup",function(ue){var ce=r.hoverData.capture;if(ce){r.hoverData.capture=!1;var oe=r.cy,Ae=r.projectIntoViewport(ue.clientX,ue.clientY),Te=r.selection,Ge=r.findNearestElement(Ae[0],Ae[1],!0,!1),Fe=r.dragData.possibleDragElements,Re=r.hoverData.down,ze=n(ue);if(r.data.bgActivePosistion&&(r.redrawHint("select",!0),r.redraw()),r.hoverData.tapholdCancelled=!0,r.data.bgActivePosistion=void 0,Re&&Re.unactivate(),r.hoverData.which===3){var Ie={originalEvent:ue,type:"cxttapend",position:{x:Ae[0],y:Ae[1]}};if(Re?Re.emit(Ie):oe.emit(Ie),!r.hoverData.cxtDragged){var Ve={originalEvent:ue,type:"cxttap",position:{x:Ae[0],y:Ae[1]}};Re?Re.emit(Ve):oe.emit(Ve)}r.hoverData.cxtDragged=!1,r.hoverData.which=null}else if(r.hoverData.which===1){if(t(Ge,["mouseup","tapend","vmouseup"],ue,{x:Ae[0],y:Ae[1]}),!r.dragData.didDrag&&!r.hoverData.dragged&&!r.hoverData.selecting&&!r.hoverData.isOverThresholdDrag&&(t(Re,["click","tap","vclick"],ue,{x:Ae[0],y:Ae[1]}),M=!1,ue.timeStamp-T<=oe.multiClickDebounceTime()?(k&&clearTimeout(k),M=!0,T=null,t(Re,["dblclick","dbltap","vdblclick"],ue,{x:Ae[0],y:Ae[1]})):(k=setTimeout(function(){M||t(Re,["oneclick","onetap","voneclick"],ue,{x:Ae[0],y:Ae[1]})},oe.multiClickDebounceTime()),T=ue.timeStamp)),Re==null&&!r.dragData.didDrag&&!r.hoverData.selecting&&!r.hoverData.dragged&&!n(ue)&&(oe.$(e).unselect(["tapunselect"]),Fe.length>0&&r.redrawHint("eles",!0),r.dragData.possibleDragElements=Fe=oe.collection()),Ge==Re&&!r.dragData.didDrag&&!r.hoverData.selecting&&Ge!=null&&Ge._private.selectable&&(r.hoverData.dragging||(oe.selectionType()==="additive"||ze?Ge.selected()?Ge.unselect(["tapunselect"]):Ge.select(["tapselect"]):ze||(oe.$(e).unmerge(Ge).unselect(["tapunselect"]),Ge.select(["tapselect"]))),r.redrawHint("eles",!0)),r.hoverData.selecting){var We=oe.collection(r.getAllInBox(Te[0],Te[1],Te[2],Te[3]));r.redrawHint("select",!0),We.length>0&&r.redrawHint("eles",!0),oe.emit({type:"boxend",originalEvent:ue,position:{x:Ae[0],y:Ae[1]}});var Ze=function(wt){return wt.selectable()&&!wt.selected()};oe.selectionType()==="additive"||ze||oe.$(e).unmerge(We).unselect(),We.emit("box").stdFilter(Ze).select().emit("boxselect"),r.redraw()}if(r.hoverData.dragging&&(r.hoverData.dragging=!1,r.redrawHint("select",!0),r.redrawHint("eles",!0),r.redraw()),!Te[4]){r.redrawHint("drag",!0),r.redrawHint("eles",!0);var at=Re&&Re.grabbed();g(Fe),at&&(Re.emit("freeon"),Fe.emit("free"),r.dragData.didDrag&&(Re.emit("dragfreeon"),Fe.emit("dragfree")))}}Te[4]=0,r.hoverData.down=null,r.hoverData.cxtStarted=!1,r.hoverData.draggingEles=!1,r.hoverData.selecting=!1,r.hoverData.isOverThresholdDrag=!1,r.dragData.didDrag=!1,r.hoverData.dragged=!1,r.hoverData.dragDelta=[],r.hoverData.mdownPos=null,r.hoverData.mdownGPos=null}},!1);var C=function(ue){if(!r.scrollingPage){var ce=r.cy,oe=ce.zoom(),Ae=ce.pan(),Te=r.projectIntoViewport(ue.clientX,ue.clientY),Ge=[Te[0]*oe+Ae.x,Te[1]*oe+Ae.y];if(r.hoverData.draggingEles||r.hoverData.dragging||r.hoverData.cxtStarted||_()){ue.preventDefault();return}if(ce.panningEnabled()&&ce.userPanningEnabled()&&ce.zoomingEnabled()&&ce.userZoomingEnabled()){ue.preventDefault(),r.data.wheelZooming=!0,clearTimeout(r.data.wheelTimeout),r.data.wheelTimeout=setTimeout(function(){r.data.wheelZooming=!1,r.redrawHint("eles",!0),r.redraw()},150);var Fe;ue.deltaY!=null?Fe=ue.deltaY/-250:ue.wheelDeltaY!=null?Fe=ue.wheelDeltaY/1e3:Fe=ue.wheelDelta/1e3,Fe=Fe*r.wheelSensitivity;var Re=ue.deltaMode===1;Re&&(Fe*=33);var ze=ce.zoom()*Math.pow(10,Fe);ue.type==="gesturechange"&&(ze=r.gestureStartZoom*ue.scale),ce.zoom({level:ze,renderedPosition:{x:Ge[0],y:Ge[1]}}),ce.emit(ue.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};r.registerBinding(r.container,"wheel",C,!0),r.registerBinding(window,"scroll",function(ue){r.scrollingPage=!0,clearTimeout(r.scrollingPageTimeout),r.scrollingPageTimeout=setTimeout(function(){r.scrollingPage=!1},250)},!0),r.registerBinding(r.container,"gesturestart",function(ue){r.gestureStartZoom=r.cy.zoom(),r.hasTouchStarted||ue.preventDefault()},!0),r.registerBinding(r.container,"gesturechange",function(me){r.hasTouchStarted||C(me)},!0),r.registerBinding(r.container,"mouseout",function(ue){var ce=r.projectIntoViewport(ue.clientX,ue.clientY);r.cy.emit({originalEvent:ue,type:"mouseout",position:{x:ce[0],y:ce[1]}})},!1),r.registerBinding(r.container,"mouseover",function(ue){var ce=r.projectIntoViewport(ue.clientX,ue.clientY);r.cy.emit({originalEvent:ue,type:"mouseover",position:{x:ce[0],y:ce[1]}})},!1);var R,x,B,D,O,G,V,I,z,P,q,F,U,W=function(ue,ce,oe,Ae){return Math.sqrt((oe-ue)*(oe-ue)+(Ae-ce)*(Ae-ce))},X=function(ue,ce,oe,Ae){return(oe-ue)*(oe-ue)+(Ae-ce)*(Ae-ce)},te;r.registerBinding(r.container,"touchstart",te=function(ue){if(r.hasTouchStarted=!0,!!E(ue)){v(),r.touchData.capture=!0,r.data.bgActivePosistion=void 0;var ce=r.cy,oe=r.touchData.now,Ae=r.touchData.earlier;if(ue.touches[0]){var Te=r.projectIntoViewport(ue.touches[0].clientX,ue.touches[0].clientY);oe[0]=Te[0],oe[1]=Te[1]}if(ue.touches[1]){var Te=r.projectIntoViewport(ue.touches[1].clientX,ue.touches[1].clientY);oe[2]=Te[0],oe[3]=Te[1]}if(ue.touches[2]){var Te=r.projectIntoViewport(ue.touches[2].clientX,ue.touches[2].clientY);oe[4]=Te[0],oe[5]=Te[1]}if(ue.touches[1]){r.touchData.singleTouchMoved=!0,g(r.dragData.touchDragEles);var Ge=r.findContainerClientCoords();z=Ge[0],P=Ge[1],q=Ge[2],F=Ge[3],R=ue.touches[0].clientX-z,x=ue.touches[0].clientY-P,B=ue.touches[1].clientX-z,D=ue.touches[1].clientY-P,U=0<=R&&R<=q&&0<=B&&B<=q&&0<=x&&x<=F&&0<=D&&D<=F;var Fe=ce.pan(),Re=ce.zoom();O=W(R,x,B,D),G=X(R,x,B,D),V=[(R+B)/2,(x+D)/2],I=[(V[0]-Fe.x)/Re,(V[1]-Fe.y)/Re];var ze=200,Ie=ze*ze;if(G<Ie&&!ue.touches[2]){var Ve=r.findNearestElement(oe[0],oe[1],!0,!0),We=r.findNearestElement(oe[2],oe[3],!0,!0);Ve&&Ve.isNode()?(Ve.activate().emit({originalEvent:ue,type:"cxttapstart",position:{x:oe[0],y:oe[1]}}),r.touchData.start=Ve):We&&We.isNode()?(We.activate().emit({originalEvent:ue,type:"cxttapstart",position:{x:oe[0],y:oe[1]}}),r.touchData.start=We):ce.emit({originalEvent:ue,type:"cxttapstart",position:{x:oe[0],y:oe[1]}}),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!0,r.touchData.cxtDragged=!1,r.data.bgActivePosistion=void 0,r.redraw();return}}if(ue.touches[2])ce.boxSelectionEnabled()&&ue.preventDefault();else if(!ue.touches[1]){if(ue.touches[0]){var Ze=r.findNearestElements(oe[0],oe[1],!0,!0),at=Ze[0];if(at!=null&&(at.activate(),r.touchData.start=at,r.touchData.starts=Ze,r.nodeIsGrabbable(at))){var ft=r.dragData.touchDragEles=ce.collection(),wt=null;r.redrawHint("eles",!0),r.redrawHint("drag",!0),at.selected()?(wt=ce.$(function(mt){return mt.selected()&&r.nodeIsGrabbable(mt)}),h(wt,{addToList:ft})):p(at,{addToList:ft}),l(at);var dt=function(Dt){return{originalEvent:ue,type:Dt,position:{x:oe[0],y:oe[1]}}};at.emit(dt("grabon")),wt?wt.forEach(function(mt){mt.emit(dt("grab"))}):at.emit(dt("grab"))}t(at,["touchstart","tapstart","vmousedown"],ue,{x:oe[0],y:oe[1]}),at==null&&(r.data.bgActivePosistion={x:Te[0],y:Te[1]},r.redrawHint("select",!0),r.redraw()),r.touchData.singleTouchMoved=!1,r.touchData.singleTouchStartTime=+new Date,clearTimeout(r.touchData.tapholdTimeout),r.touchData.tapholdTimeout=setTimeout(function(){r.touchData.singleTouchMoved===!1&&!r.pinching&&!r.touchData.selecting&&t(r.touchData.start,["taphold"],ue,{x:oe[0],y:oe[1]})},r.tapholdDuration)}}if(ue.touches.length>=1){for(var vt=r.touchData.startPosition=[],Et=0;Et<oe.length;Et++)vt[Et]=Ae[Et]=oe[Et];var Mt=ue.touches[0];r.touchData.startGPosition=[Mt.clientX,Mt.clientY]}}},!1);var ne;r.registerBinding(window,"touchmove",ne=function(ue){var ce=r.touchData.capture;if(!(!ce&&!E(ue))){var oe=r.selection,Ae=r.cy,Te=r.touchData.now,Ge=r.touchData.earlier,Fe=Ae.zoom();if(ue.touches[0]){var Re=r.projectIntoViewport(ue.touches[0].clientX,ue.touches[0].clientY);Te[0]=Re[0],Te[1]=Re[1]}if(ue.touches[1]){var Re=r.projectIntoViewport(ue.touches[1].clientX,ue.touches[1].clientY);Te[2]=Re[0],Te[3]=Re[1]}if(ue.touches[2]){var Re=r.projectIntoViewport(ue.touches[2].clientX,ue.touches[2].clientY);Te[4]=Re[0],Te[5]=Re[1]}var ze=r.touchData.startGPosition,Ie;if(ce&&ue.touches[0]&&ze){for(var Ve=[],We=0;We<Te.length;We++)Ve[We]=Te[We]-Ge[We];var Ze=ue.touches[0].clientX-ze[0],at=Ze*Ze,ft=ue.touches[0].clientY-ze[1],wt=ft*ft,dt=at+wt;Ie=dt>=r.touchTapThreshold2}if(ce&&r.touchData.cxt){ue.preventDefault();var vt=ue.touches[0].clientX-z,Et=ue.touches[0].clientY-P,Mt=ue.touches[1].clientX-z,mt=ue.touches[1].clientY-P,Dt=X(vt,Et,Mt,mt),Lt=Dt/G,Tt=150,nr=Tt*Tt,$t=1.5,pt=$t*$t;if(Lt>=pt||Dt>=nr){r.touchData.cxt=!1,r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var hr={originalEvent:ue,type:"cxttapend",position:{x:Te[0],y:Te[1]}};r.touchData.start?(r.touchData.start.unactivate().emit(hr),r.touchData.start=null):Ae.emit(hr)}}if(ce&&r.touchData.cxt){var hr={originalEvent:ue,type:"cxtdrag",position:{x:Te[0],y:Te[1]}};r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.touchData.start?r.touchData.start.emit(hr):Ae.emit(hr),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxtDragged=!0;var Rt=r.findNearestElement(Te[0],Te[1],!0,!0);(!r.touchData.cxtOver||Rt!==r.touchData.cxtOver)&&(r.touchData.cxtOver&&r.touchData.cxtOver.emit({originalEvent:ue,type:"cxtdragout",position:{x:Te[0],y:Te[1]}}),r.touchData.cxtOver=Rt,Rt&&Rt.emit({originalEvent:ue,type:"cxtdragover",position:{x:Te[0],y:Te[1]}}))}else if(ce&&ue.touches[2]&&Ae.boxSelectionEnabled())ue.preventDefault(),r.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,r.touchData.selecting||Ae.emit({originalEvent:ue,type:"boxstart",position:{x:Te[0],y:Te[1]}}),r.touchData.selecting=!0,r.touchData.didSelect=!0,oe[4]=1,!oe||oe.length===0||oe[0]===void 0?(oe[0]=(Te[0]+Te[2]+Te[4])/3,oe[1]=(Te[1]+Te[3]+Te[5])/3,oe[2]=(Te[0]+Te[2]+Te[4])/3+1,oe[3]=(Te[1]+Te[3]+Te[5])/3+1):(oe[2]=(Te[0]+Te[2]+Te[4])/3,oe[3]=(Te[1]+Te[3]+Te[5])/3),r.redrawHint("select",!0),r.redraw();else if(ce&&ue.touches[1]&&!r.touchData.didSelect&&Ae.zoomingEnabled()&&Ae.panningEnabled()&&Ae.userZoomingEnabled()&&Ae.userPanningEnabled()){ue.preventDefault(),r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var Bt=r.dragData.touchDragEles;if(Bt){r.redrawHint("drag",!0);for(var ur=0;ur<Bt.length;ur++){var nt=Bt[ur]._private;nt.grabbed=!1,nt.rscratch.inDragLayer=!1}}var Xe=r.touchData.start,vt=ue.touches[0].clientX-z,Et=ue.touches[0].clientY-P,Mt=ue.touches[1].clientX-z,mt=ue.touches[1].clientY-P,ct=W(vt,Et,Mt,mt),zt=ct/O;if(U){var rr=vt-R,Zt=Et-x,br=Mt-B,Gr=mt-D,Rr=(rr+br)/2,Fr=(Zt+Gr)/2,gr=Ae.zoom(),Zr=gr*zt,gn=Ae.pan(),Hn=I[0]*gr+gn.x,jn=I[1]*gr+gn.y,di={x:-Zr/gr*(Hn-gn.x-Rr)+Hn,y:-Zr/gr*(jn-gn.y-Fr)+jn};if(Xe&&Xe.active()){var Bt=r.dragData.touchDragEles;g(Bt),r.redrawHint("drag",!0),r.redrawHint("eles",!0),Xe.unactivate().emit("freeon"),Bt.emit("free"),r.dragData.didDrag&&(Xe.emit("dragfreeon"),Bt.emit("dragfree"))}Ae.viewport({zoom:Zr,pan:di,cancelOnFailedZoom:!0}),Ae.emit("pinchzoom"),O=ct,R=vt,x=Et,B=Mt,D=mt,r.pinching=!0}if(ue.touches[0]){var Re=r.projectIntoViewport(ue.touches[0].clientX,ue.touches[0].clientY);Te[0]=Re[0],Te[1]=Re[1]}if(ue.touches[1]){var Re=r.projectIntoViewport(ue.touches[1].clientX,ue.touches[1].clientY);Te[2]=Re[0],Te[3]=Re[1]}if(ue.touches[2]){var Re=r.projectIntoViewport(ue.touches[2].clientX,ue.touches[2].clientY);Te[4]=Re[0],Te[5]=Re[1]}}else if(ue.touches[0]&&!r.touchData.didSelect){var mn=r.touchData.start,Gi=r.touchData.last,Rt;if(!r.hoverData.draggingEles&&!r.swipePanning&&(Rt=r.findNearestElement(Te[0],Te[1],!0,!0)),ce&&mn!=null&&ue.preventDefault(),ce&&mn!=null&&r.nodeIsDraggable(mn))if(Ie){var Bt=r.dragData.touchDragEles,bi=!r.dragData.didDrag;bi&&h(Bt,{inDragLayer:!0}),r.dragData.didDrag=!0;var Fn={x:0,y:0};if(Ht(Ve[0])&&Ht(Ve[1])&&(Fn.x+=Ve[0],Fn.y+=Ve[1],bi)){r.redrawHint("eles",!0);var yn=r.touchData.dragDelta;yn&&Ht(yn[0])&&Ht(yn[1])&&(Fn.x+=yn[0],Fn.y+=yn[1])}r.hoverData.draggingEles=!0,Bt.silentShift(Fn).emit("position drag"),r.redrawHint("drag",!0),r.touchData.startPosition[0]==Ge[0]&&r.touchData.startPosition[1]==Ge[1]&&r.redrawHint("eles",!0),r.redraw()}else{var yn=r.touchData.dragDelta=r.touchData.dragDelta||[];yn.length===0?(yn.push(Ve[0]),yn.push(Ve[1])):(yn[0]+=Ve[0],yn[1]+=Ve[1])}if(t(mn||Rt,["touchmove","tapdrag","vmousemove"],ue,{x:Te[0],y:Te[1]}),(!mn||!mn.grabbed())&&Rt!=Gi&&(Gi&&Gi.emit({originalEvent:ue,type:"tapdragout",position:{x:Te[0],y:Te[1]}}),Rt&&Rt.emit({originalEvent:ue,type:"tapdragover",position:{x:Te[0],y:Te[1]}})),r.touchData.last=Rt,ce)for(var ur=0;ur<Te.length;ur++)Te[ur]&&r.touchData.startPosition[ur]&&Ie&&(r.touchData.singleTouchMoved=!0);if(ce&&(mn==null||mn.pannable())&&Ae.panningEnabled()&&Ae.userPanningEnabled()){var xn=i(mn,r.touchData.starts);xn&&(ue.preventDefault(),r.data.bgActivePosistion||(r.data.bgActivePosistion=Sf(r.touchData.startPosition)),r.swipePanning?(Ae.panBy({x:Ve[0]*Fe,y:Ve[1]*Fe}),Ae.emit("dragpan")):Ie&&(r.swipePanning=!0,Ae.panBy({x:Ze*Fe,y:ft*Fe}),Ae.emit("dragpan"),mn&&(mn.unactivate(),r.redrawHint("select",!0),r.touchData.start=null)));var Re=r.projectIntoViewport(ue.touches[0].clientX,ue.touches[0].clientY);Te[0]=Re[0],Te[1]=Re[1]}}for(var We=0;We<Te.length;We++)Ge[We]=Te[We];ce&&ue.touches.length>0&&!r.hoverData.draggingEles&&!r.swipePanning&&r.data.bgActivePosistion!=null&&(r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.redraw())}},!1);var he;r.registerBinding(window,"touchcancel",he=function(ue){var ce=r.touchData.start;r.touchData.capture=!1,ce&&ce.unactivate()});var ve,Ce,Le,K;if(r.registerBinding(window,"touchend",ve=function(ue){var ce=r.touchData.start,oe=r.touchData.capture;if(oe)ue.touches.length===0&&(r.touchData.capture=!1),ue.preventDefault();else return;var Ae=r.selection;r.swipePanning=!1,r.hoverData.draggingEles=!1;var Te=r.cy,Ge=Te.zoom(),Fe=r.touchData.now,Re=r.touchData.earlier;if(ue.touches[0]){var ze=r.projectIntoViewport(ue.touches[0].clientX,ue.touches[0].clientY);Fe[0]=ze[0],Fe[1]=ze[1]}if(ue.touches[1]){var ze=r.projectIntoViewport(ue.touches[1].clientX,ue.touches[1].clientY);Fe[2]=ze[0],Fe[3]=ze[1]}if(ue.touches[2]){var ze=r.projectIntoViewport(ue.touches[2].clientX,ue.touches[2].clientY);Fe[4]=ze[0],Fe[5]=ze[1]}ce&&ce.unactivate();var Ie;if(r.touchData.cxt){if(Ie={originalEvent:ue,type:"cxttapend",position:{x:Fe[0],y:Fe[1]}},ce?ce.emit(Ie):Te.emit(Ie),!r.touchData.cxtDragged){var Ve={originalEvent:ue,type:"cxttap",position:{x:Fe[0],y:Fe[1]}};ce?ce.emit(Ve):Te.emit(Ve)}r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!1,r.touchData.start=null,r.redraw();return}if(!ue.touches[2]&&Te.boxSelectionEnabled()&&r.touchData.selecting){r.touchData.selecting=!1;var We=Te.collection(r.getAllInBox(Ae[0],Ae[1],Ae[2],Ae[3]));Ae[0]=void 0,Ae[1]=void 0,Ae[2]=void 0,Ae[3]=void 0,Ae[4]=0,r.redrawHint("select",!0),Te.emit({type:"boxend",originalEvent:ue,position:{x:Fe[0],y:Fe[1]}});var Ze=function(nr){return nr.selectable()&&!nr.selected()};We.emit("box").stdFilter(Ze).select().emit("boxselect"),We.nonempty()&&r.redrawHint("eles",!0),r.redraw()}if(ce!=null&&ce.unactivate(),ue.touches[2])r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);else if(!ue.touches[1]){if(!ue.touches[0]){if(!ue.touches[0]){r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var at=r.dragData.touchDragEles;if(ce!=null){var ft=ce._private.grabbed;g(at),r.redrawHint("drag",!0),r.redrawHint("eles",!0),ft&&(ce.emit("freeon"),at.emit("free"),r.dragData.didDrag&&(ce.emit("dragfreeon"),at.emit("dragfree"))),t(ce,["touchend","tapend","vmouseup","tapdragout"],ue,{x:Fe[0],y:Fe[1]}),ce.unactivate(),r.touchData.start=null}else{var wt=r.findNearestElement(Fe[0],Fe[1],!0,!0);t(wt,["touchend","tapend","vmouseup","tapdragout"],ue,{x:Fe[0],y:Fe[1]})}var dt=r.touchData.startPosition[0]-Fe[0],vt=dt*dt,Et=r.touchData.startPosition[1]-Fe[1],Mt=Et*Et,mt=vt+Mt,Dt=mt*Ge*Ge;r.touchData.singleTouchMoved||(ce||Te.$(":selected").unselect(["tapunselect"]),t(ce,["tap","vclick"],ue,{x:Fe[0],y:Fe[1]}),Ce=!1,ue.timeStamp-K<=Te.multiClickDebounceTime()?(Le&&clearTimeout(Le),Ce=!0,K=null,t(ce,["dbltap","vdblclick"],ue,{x:Fe[0],y:Fe[1]})):(Le=setTimeout(function(){Ce||t(ce,["onetap","voneclick"],ue,{x:Fe[0],y:Fe[1]})},Te.multiClickDebounceTime()),K=ue.timeStamp)),ce!=null&&!r.dragData.didDrag&&ce._private.selectable&&Dt<r.touchTapThreshold2&&!r.pinching&&(Te.selectionType()==="single"?(Te.$(e).unmerge(ce).unselect(["tapunselect"]),ce.select(["tapselect"])):ce.selected()?ce.unselect(["tapunselect"]):ce.select(["tapselect"]),r.redrawHint("eles",!0)),r.touchData.singleTouchMoved=!0}}}for(var Lt=0;Lt<Fe.length;Lt++)Re[Lt]=Fe[Lt];r.dragData.didDrag=!1,ue.touches.length===0&&(r.touchData.dragDelta=[],r.touchData.startPosition=null,r.touchData.startGPosition=null,r.touchData.didSelect=!1),ue.touches.length<2&&(ue.touches.length===1&&(r.touchData.startGPosition=[ue.touches[0].clientX,ue.touches[0].clientY]),r.pinching=!1,r.redrawHint("eles",!0),r.redraw())},!1),typeof TouchEvent>"u"){var le=[],Z=function(ue){return{clientX:ue.clientX,clientY:ue.clientY,force:1,identifier:ue.pointerId,pageX:ue.pageX,pageY:ue.pageY,radiusX:ue.width/2,radiusY:ue.height/2,screenX:ue.screenX,screenY:ue.screenY,target:ue.target}},ie=function(ue){return{event:ue,touch:Z(ue)}},re=function(ue){le.push(ie(ue))},J=function(ue){for(var ce=0;ce<le.length;ce++){var oe=le[ce];if(oe.event.pointerId===ue.pointerId){le.splice(ce,1);return}}},fe=function(ue){var ce=le.filter(function(oe){return oe.event.pointerId===ue.pointerId})[0];ce.event=ue,ce.touch=Z(ue)},we=function(ue){ue.touches=le.map(function(ce){return ce.touch})},ge=function(ue){return ue.pointerType==="mouse"||ue.pointerType===4};r.registerBinding(r.container,"pointerdown",function(me){ge(me)||(me.preventDefault(),re(me),we(me),te(me))}),r.registerBinding(r.container,"pointerup",function(me){ge(me)||(J(me),we(me),ve(me))}),r.registerBinding(r.container,"pointercancel",function(me){ge(me)||(J(me),we(me),he(me))}),r.registerBinding(r.container,"pointermove",function(me){ge(me)||(me.preventDefault(),fe(me),we(me),ne(me))})}};var Rs={};Rs.generatePolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,draw:function(n,i,a,o,s){this.renderer.nodeShapeImpl("polygon",n,i,a,o,s,this.points)},intersectLine:function(n,i,a,o,s,u,l){return gh(s,u,this.points,n,i,a/2,o/2,l)},checkPoint:function(n,i,a,o,s,u,l){return Ds(n,i,this.points,u,l,o,s,[0,-1],a)}}};Rs.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,n,i,a){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a)},intersectLine:function(e,t,n,i,a,o,s){return TF(a,o,e,t,n/2+s,i/2+s)},checkPoint:function(e,t,n,i,a,o,s){return ll(e,t,i,a,o,s,n)}}};Rs.generateRoundPolygon=function(r,e){for(var t=new Array(e.length*2),n=0;n<e.length/2;n++){var i=n*2,a=void 0;n<e.length/2-1?a=(n+1)*2:a=0,t[n*4]=e[i],t[n*4+1]=e[i+1];var o=e[a]-e[i],s=e[a+1]-e[i+1],u=Math.sqrt(o*o+s*s);t[n*4+2]=o/u,t[n*4+3]=s/u}return this.nodeShapes[r]={renderer:this,name:r,points:t,draw:function(f,c,d,h,p){this.renderer.nodeShapeImpl("round-polygon",f,c,d,h,p,this.points)},intersectLine:function(f,c,d,h,p,g,b){return kF(p,g,this.points,f,c,d,h)},checkPoint:function(f,c,d,h,p,g,b){return AF(f,c,this.points,g,b,h,p)}}};Rs.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:pa(4,0),draw:function(e,t,n,i,a){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a)},intersectLine:function(e,t,n,i,a,o,s){return Pk(a,o,e,t,n,i,s)},checkPoint:function(e,t,n,i,a,o,s){var u=Rh(i,a),l=u*2;return!!(Ds(e,t,this.points,o,s,i,a-l,[0,-1],n)||Ds(e,t,this.points,o,s,i-l,a,[0,-1],n)||ll(e,t,l,l,o-i/2+u,s-a/2+u,n)||ll(e,t,l,l,o+i/2-u,s-a/2+u,n)||ll(e,t,l,l,o+i/2-u,s+a/2-u,n)||ll(e,t,l,l,o-i/2+u,s+a/2-u,n))}}};Rs.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:Ik(),points:pa(4,0),draw:function(e,t,n,i,a){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a)},generateCutTrianglePts:function(e,t,n,i){var a=this.cornerLength,o=t/2,s=e/2,u=n-s,l=n+s,f=i-o,c=i+o;return{topLeft:[u,f+a,u+a,f,u+a,f+a],topRight:[l-a,f,l,f+a,l-a,f+a],bottomRight:[l,c-a,l-a,c,l-a,c-a],bottomLeft:[u+a,c,u,c-a,u+a,c-a]}},intersectLine:function(e,t,n,i,a,o,s){var u=this.generateCutTrianglePts(n+2*s,i+2*s,e,t),l=[].concat.apply([],[u.topLeft.splice(0,4),u.topRight.splice(0,4),u.bottomRight.splice(0,4),u.bottomLeft.splice(0,4)]);return gh(a,o,l,e,t)},checkPoint:function(e,t,n,i,a,o,s){if(Ds(e,t,this.points,o,s,i,a-2*this.cornerLength,[0,-1],n)||Ds(e,t,this.points,o,s,i-2*this.cornerLength,a,[0,-1],n))return!0;var u=this.generateCutTrianglePts(i,a,o,s);return Ma(e,t,u.topLeft)||Ma(e,t,u.topRight)||Ma(e,t,u.bottomRight)||Ma(e,t,u.bottomLeft)}}};Rs.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:pa(4,0),draw:function(e,t,n,i,a){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a)},intersectLine:function(e,t,n,i,a,o,s){var u=.15,l=.5,f=.85,c=this.generateBarrelBezierPts(n+2*s,i+2*s,e,t),d=function(g){var b=kf({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},u),v=kf({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},l),y=kf({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},f);return[g[0],g[1],b.x,b.y,v.x,v.y,y.x,y.y,g[4],g[5]]},h=[].concat(d(c.topLeft),d(c.topRight),d(c.bottomRight),d(c.bottomLeft));return gh(a,o,h,e,t)},generateBarrelBezierPts:function(e,t,n,i){var a=t/2,o=e/2,s=n-o,u=n+o,l=i-a,f=i+a,c=u2(e,t),d=c.heightOffset,h=c.widthOffset,p=c.ctrlPtOffsetPct*e,g={topLeft:[s,l+d,s+p,l,s+h,l],topRight:[u-h,l,u-p,l,u,l+d],bottomRight:[u,f-d,u-p,f,u-h,f],bottomLeft:[s+h,f,s+p,f,s,f-d]};return g.topLeft.isTop=!0,g.topRight.isTop=!0,g.bottomLeft.isBottom=!0,g.bottomRight.isBottom=!0,g},checkPoint:function(e,t,n,i,a,o,s){var u=u2(i,a),l=u.heightOffset,f=u.widthOffset;if(Ds(e,t,this.points,o,s,i,a-2*l,[0,-1],n)||Ds(e,t,this.points,o,s,i-2*f,a,[0,-1],n))return!0;for(var c=this.generateBarrelBezierPts(i,a,o,s),d=function(_,E,k){var M=k[4],T=k[2],C=k[0],R=k[5],x=k[1],B=Math.min(M,C),D=Math.max(M,C),O=Math.min(R,x),G=Math.max(R,x);if(B<=_&&_<=D&&O<=E&&E<=G){var V=LF(M,T,C),I=xF(V[0],V[1],V[2],_),z=I.filter(function(P){return 0<=P&&P<=1});if(z.length>0)return z[0]}return null},h=Object.keys(c),p=0;p<h.length;p++){var g=h[p],b=c[g],v=d(e,t,b);if(v!=null){var y=b[5],m=b[3],w=b[1],S=Bi(y,m,w,v);if(b.isTop&&S<=t||b.isBottom&&t<=S)return!0}}return!1}}};Rs.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:pa(4,0),draw:function(e,t,n,i,a){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a)},intersectLine:function(e,t,n,i,a,o,s){var u=e-(n/2+s),l=t-(i/2+s),f=l,c=e+(n/2+s),d=bu(a,o,e,t,u,l,c,f,!1);return d.length>0?d:Pk(a,o,e,t,n,i,s)},checkPoint:function(e,t,n,i,a,o,s){var u=Rh(i,a),l=2*u;if(Ds(e,t,this.points,o,s,i,a-l,[0,-1],n)||Ds(e,t,this.points,o,s,i-l,a,[0,-1],n))return!0;var f=i/2+2*n,c=a/2+2*n,d=[o-f,s-c,o-f,s,o+f,s,o+f,s-c];return!!(Ma(e,t,d)||ll(e,t,l,l,o+i/2-u,s+a/2-u,n)||ll(e,t,l,l,o-i/2+u,s+a/2-u,n))}}};Rs.registerNodeShapes=function(){var r=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",pa(3,0)),this.generateRoundPolygon("round-triangle",pa(3,0)),this.generatePolygon("rectangle",pa(4,0)),r.square=r.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var t=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",t),this.generateRoundPolygon("round-diamond",t)}this.generatePolygon("pentagon",pa(5,0)),this.generateRoundPolygon("round-pentagon",pa(5,0)),this.generatePolygon("hexagon",pa(6,0)),this.generateRoundPolygon("round-hexagon",pa(6,0)),this.generatePolygon("heptagon",pa(7,0)),this.generateRoundPolygon("round-heptagon",pa(7,0)),this.generatePolygon("octagon",pa(8,0)),this.generateRoundPolygon("round-octagon",pa(8,0));var n=new Array(20);{var i=s2(5,0),a=s2(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var s=0;s<a.length/2;s++)a[s*2]*=o,a[s*2+1]*=o;for(var s=0;s<20/4;s++)n[s*4]=i[s*2],n[s*4+1]=i[s*2+1],n[s*4+2]=a[s*2],n[s*4+3]=a[s*2+1]}n=Dk(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u)}r.makePolygon=function(l){var f=l.join("$"),c="polygon-"+f,d;return(d=this[c])?d:e.generatePolygon(c,l)}};var qh={};qh.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};qh.redraw=function(r){r=r||Tk();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=r};qh.beforeRender=function(r,e){if(!this.destroyed){e==null&&ui("Priority is not optional for beforeRender");var t=this.beforeRenderCallbacks;t.push({fn:r,priority:e}),t.sort(function(n,i){return i.priority-n.priority})}};var J_=function(e,t,n){for(var i=e.beforeRenderCallbacks,a=0;a<i.length;a++)i[a].fn(t,n)};qh.startRenderLoop=function(){var r=this,e=r.cy;if(!r.renderLoopStarted){r.renderLoopStarted=!0;var t=function n(i){if(!r.destroyed){if(!e.batching())if(r.requestedFrame&&!r.skipFrame){J_(r,!0,i);var a=Os();r.render(r.renderOptions);var o=r.lastDrawTime=Os();r.averageRedrawTime===void 0&&(r.averageRedrawTime=o-a),r.redrawCount===void 0&&(r.redrawCount=0),r.redrawCount++,r.redrawTotalTime===void 0&&(r.redrawTotalTime=0);var s=o-a;r.redrawTotalTime+=s,r.lastRedrawTime=s,r.averageRedrawTime=r.averageRedrawTime/2+s/2,r.requestedFrame=!1}else J_(r,!1,i);r.skipFrame=!1,mp(n)}};mp(t)}};var e7=function(e){this.init(e)},SL=e7,nc=SL.prototype;nc.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];nc.init=function(r){var e=this;e.options=r,e.cy=r.cy;var t=e.container=r.cy.container();if(Yn){var n=Yn.document,i=n.head,a="__________cytoscape_stylesheet",o="__________cytoscape_container",s=n.getElementById(a)!=null;if(t.className.indexOf(o)<0&&(t.className=(t.className||"")+" "+o),!s){var u=n.createElement("style");u.id=a,u.textContent="."+o+" { position: relative; }",i.insertBefore(u,i.children[0])}var l=Yn.getComputedStyle(t),f=l.getPropertyValue("position");f==="static"&&vn("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=r.showFps,e.debug=r.debug,e.hideEdgesOnViewport=r.hideEdgesOnViewport,e.textureOnViewport=r.textureOnViewport,e.wheelSensitivity=r.wheelSensitivity,e.motionBlurEnabled=r.motionBlur,e.forcedPixelRatio=Ht(r.pixelRatio)?r.pixelRatio:null,e.motionBlur=r.motionBlur,e.motionBlurOpacity=r.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=r.desktopTapThreshold,e.desktopTapThreshold2=r.desktopTapThreshold*r.desktopTapThreshold,e.touchTapThreshold=r.touchTapThreshold,e.touchTapThreshold2=r.touchTapThreshold*r.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};nc.notify=function(r,e){var t=this,n=t.cy;if(!this.destroyed){if(r==="init"){t.load();return}if(r==="destroy"){t.destroy();return}(r==="add"||r==="remove"||r==="move"&&n.hasCompoundNodes()||r==="load"||r==="zorder"||r==="mount")&&t.invalidateCachedZSortedEles(),r==="viewport"&&t.redrawHint("select",!0),(r==="load"||r==="resize"||r==="mount")&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container)),t.redrawHint("eles",!0),t.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};nc.destroy=function(){var r=this;r.destroyed=!0,r.cy.stopAnimationLoop();for(var e=0;e<r.bindings.length;e++){var t=r.bindings[e],n=t,i=n.target;(i.off||i.removeEventListener).apply(i,n.args)}if(r.bindings=[],r.beforeRenderCallbacks=[],r.onUpdateEleCalcsFns=[],r.removeObserver&&r.removeObserver.disconnect(),r.styleObserver&&r.styleObserver.disconnect(),r.resizeObserver&&r.resizeObserver.disconnect(),r.labelCalcDiv)try{document.body.removeChild(r.labelCalcDiv)}catch{}};nc.isHeadless=function(){return!1};[mw,_L,xL,rc,Rs,qh].forEach(function(r){Sr(nc,r)});var Zg=1e3/60,EL={setupDequeueing:function(e){return function(){var n=this,i=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var a=Yp.default(function(){i.redrawHint("eles",!0),i.redrawHint("drag",!0),i.redraw()},e.deqRedrawThreshold),o=function(l,f){var c=Os(),d=i.averageRedrawTime,h=i.lastRedrawTime,p=[],g=i.cy.extent(),b=i.getPixelRatio();for(l||i.flushRenderedStyleQueue();;){var v=Os(),y=v-c,m=v-f;if(h<Zg){var w=Zg-(l?d:0);if(m>=e.deqFastCost*w)break}else if(l){if(y>=e.deqCost*h||y>=e.deqAvgCost*d)break}else if(m>=e.deqNoDrawCost*Zg)break;var S=e.deq(n,b,g);if(S.length>0)for(var A=0;A<S.length;A++)p.push(S[A]);else break}p.length>0&&(e.onDeqd(n,p),!l&&e.shouldRedraw(n,p,b,g)&&a())},s=e.priority||aw;i.beforeRender(o,s(n))}}}},t7=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yp;ew(this,r),this.idsByKey=new Jo,this.keyForId=new Jo,this.cachesByLvl=new Jo,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=t}return tw(r,[{key:"getIdsFor",value:function(t){t==null&&ui("Can not get id list for null key");var n=this.idsByKey,i=this.idsByKey.get(t);return i||(i=new Qf,n.set(t,i)),i}},{key:"addIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).add(n)}},{key:"deleteIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).delete(n)}},{key:"getNumberOfIdsForKey",value:function(t){return t==null?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var n=t.id(),i=this.keyForId.get(n),a=this.getKey(t);this.deleteIdForKey(i,n),this.addIdForKey(a,n),this.keyForId.set(n,a)}},{key:"deleteKeyMappingFor",value:function(t){var n=t.id(),i=this.keyForId.get(n);this.deleteIdForKey(i,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(t){var n=t.id(),i=this.keyForId.get(n),a=this.getKey(t);return i!==a}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var n=this.cachesByLvl,i=this.lvls,a=n.get(t);return a||(a=new Jo,n.set(t,a),i.push(t)),a}},{key:"getCache",value:function(t,n){return this.getCachesAt(n).get(t)}},{key:"get",value:function(t,n){var i=this.getKey(t),a=this.getCache(i,n);return a!=null&&this.updateKeyMappingFor(t),a}},{key:"getForCachedKey",value:function(t,n){var i=this.keyForId.get(t.id()),a=this.getCache(i,n);return a}},{key:"hasCache",value:function(t,n){return this.getCachesAt(n).has(t)}},{key:"has",value:function(t,n){var i=this.getKey(t);return this.hasCache(i,n)}},{key:"setCache",value:function(t,n,i){i.key=t,this.getCachesAt(n).set(t,i)}},{key:"set",value:function(t,n,i){var a=this.getKey(t);this.setCache(a,n,i),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,n){this.getCachesAt(n).delete(t)}},{key:"delete",value:function(t,n){var i=this.getKey(t);this.deleteCache(i,n)}},{key:"invalidateKey",value:function(t){var n=this;this.lvls.forEach(function(i){return n.deleteCache(t,i)})}},{key:"invalidate",value:function(t){var n=t.id(),i=this.keyForId.get(n);this.deleteKeyMappingFor(t);var a=this.doesEleInvalidateKey(t);return a&&this.invalidateKey(i),a||this.getNumberOfIdsForKey(i)===0}}]),r}(),ex=25,Md=50,ip=-4,v2=3,r7=7.99,n7=8,i7=1024,a7=1024,o7=1024,s7=.2,u7=.8,l7=10,f7=.15,c7=.1,h7=.9,d7=.9,p7=100,v7=1,Ef={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},g7=Ki({getKey:null,doesEleInvalidateKey:yp,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Ek,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Xc=function(e,t){var n=this;n.renderer=e,n.onDequeues=[];var i=g7(t);Sr(n,i),n.lookup=new t7(i.getKey,i.doesEleInvalidateKey),n.setupDequeueing()},Mi=Xc.prototype;Mi.reasons=Ef;Mi.getTextureQueue=function(r){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[r]=e.eleImgCaches[r]||[]};Mi.getRetiredTextureQueue=function(r){var e=this,t=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=t[r]=t[r]||[];return n};Mi.getElementQueue=function(){var r=this,e=r.eleCacheQueue=r.eleCacheQueue||new Oh.default(function(t,n){return n.reqs-t.reqs});return e};Mi.getElementKeyToQueue=function(){var r=this,e=r.eleKeyToCacheQueue=r.eleKeyToCacheQueue||{};return e};Mi.getElement=function(r,e,t,n,i){var a=this,o=this.renderer,s=o.cy.zoom(),u=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!r.visible()||r.removed()||!a.allowEdgeTxrCaching&&r.isEdge()||!a.allowParentTxrCaching&&r.isParent())return null;if(n==null&&(n=Math.ceil(sw(s*t))),n<ip)n=ip;else if(s>=r7||n>v2)return null;var l=Math.pow(2,n),f=e.h*l,c=e.w*l,d=o.eleTextBiggerThanMin(r,l);if(!this.isVisible(r,d))return null;var h=u.get(r,n);if(h&&h.invalidated&&(h.invalidated=!1,h.texture.invalidatedWidth-=h.width),h)return h;var p;if(f<=ex?p=ex:f<=Md?p=Md:p=Math.ceil(f/Md)*Md,f>o7||c>a7)return null;var g=a.getTextureQueue(p),b=g[g.length-2],v=function(){return a.recycleTexture(p,c)||a.addTexture(p,c)};b||(b=g[g.length-1]),b||(b=v()),b.width-b.usedWidth<c&&(b=v());for(var y=function(D){return D&&D.scaledLabelShown===d},m=i&&i===Ef.dequeue,w=i&&i===Ef.highQuality,S=i&&i===Ef.downscale,A,_=n+1;_<=v2;_++){var E=u.get(r,_);if(E){A=E;break}}var k=A&&A.level===n+1?A:null,M=function(){b.context.drawImage(k.texture.canvas,k.x,0,k.width,k.height,b.usedWidth,0,c,f)};if(b.context.setTransform(1,0,0,1,0,0),b.context.clearRect(b.usedWidth,0,c,p),y(k))M();else if(y(A))if(w){for(var T=A.level;T>n;T--)k=a.getElement(r,e,t,T,Ef.downscale);M()}else return a.queueElement(r,A.level-1),A;else{var C;if(!m&&!w&&!S)for(var R=n-1;R>=ip;R--){var x=u.get(r,R);if(x){C=x;break}}if(y(C))return a.queueElement(r,n),C;b.context.translate(b.usedWidth,0),b.context.scale(l,l),this.drawElement(b.context,r,e,d,!1),b.context.scale(1/l,1/l),b.context.translate(-b.usedWidth,0)}return h={x:b.usedWidth,texture:b,level:n,scale:l,width:c,height:f,scaledLabelShown:d},b.usedWidth+=Math.ceil(c+n7),b.eleCaches.push(h),u.set(r,n,h),a.checkTextureFullness(b),h};Mi.invalidateElements=function(r){for(var e=0;e<r.length;e++)this.invalidateElement(r[e])};Mi.invalidateElement=function(r){var e=this,t=e.lookup,n=[],i=t.isInvalid(r);if(i){for(var a=ip;a<=v2;a++){var o=t.getForCachedKey(r,a);o&&n.push(o)}var s=t.invalidate(r);if(s)for(var u=0;u<n.length;u++){var l=n[u],f=l.texture;f.invalidatedWidth+=l.width,l.invalidated=!0,e.checkTextureUtility(f)}e.removeFromQueue(r)}};Mi.checkTextureUtility=function(r){r.invalidatedWidth>=s7*r.width&&this.retireTexture(r)};Mi.checkTextureFullness=function(r){var e=this,t=e.getTextureQueue(r.height);r.usedWidth/r.width>u7&&r.fullnessChecks>=l7?ku(t,r):r.fullnessChecks++};Mi.retireTexture=function(r){var e=this,t=r.height,n=e.getTextureQueue(t),i=this.lookup;ku(n,r),r.retired=!0;for(var a=r.eleCaches,o=0;o<a.length;o++){var s=a[o];i.deleteCache(s.key,s.level)}ow(a);var u=e.getRetiredTextureQueue(t);u.push(r)};Mi.addTexture=function(r,e){var t=this,n=t.getTextureQueue(r),i={};return n.push(i),i.eleCaches=[],i.height=r,i.width=Math.max(i7,e),i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,i.canvas=t.renderer.makeOffscreenCanvas(i.width,i.height),i.context=i.canvas.getContext("2d"),i};Mi.recycleTexture=function(r,e){for(var t=this,n=t.getTextureQueue(r),i=t.getRetiredTextureQueue(r),a=0;a<i.length;a++){var o=i[a];if(o.width>=e)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,ow(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),ku(i,o),n.push(o),o}};Mi.queueElement=function(r,e){var t=this,n=t.getElementQueue(),i=t.getElementKeyToQueue(),a=this.getKey(r),o=i[a];if(o)o.level=Math.max(o.level,e),o.eles.merge(r),o.reqs++,n.updateItem(o);else{var s={eles:r.spawn().merge(r),level:e,reqs:1,key:a};n.push(s),i[a]=s}};Mi.dequeue=function(r){for(var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),i=[],a=e.lookup,o=0;o<v7&&t.size()>0;o++){var s=t.pop(),u=s.key,l=s.eles[0],f=a.hasCache(l,s.level);if(n[u]=null,f)continue;i.push(s);var c=e.getBoundingBox(l);e.getElement(l,c,r,s.level,Ef.dequeue)}return i};Mi.removeFromQueue=function(r){var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),i=this.getKey(r),a=n[i];a!=null&&(a.eles.length===1?(a.reqs=iw,t.updateItem(a),t.pop(),n[i]=null):a.eles.unmerge(r))};Mi.onDequeue=function(r){this.onDequeues.push(r)};Mi.offDequeue=function(r){ku(this.onDequeues,r)};Mi.setupDequeueing=EL.setupDequeueing({deqRedrawThreshold:p7,deqCost:f7,deqAvgCost:c7,deqNoDrawCost:h7,deqFastCost:d7,deq:function(e,t,n){return e.dequeue(t,n)},onDeqd:function(e,t){for(var n=0;n<e.onDequeues.length;n++){var i=e.onDequeues[n];i(t)}},shouldRedraw:function(e,t,n,i){for(var a=0;a<t.length;a++)for(var o=t[a].eles,s=0;s<o.length;s++){var u=o[s].boundingBox();if(uw(u,i))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var m7=1,ah=-4,Ep=2,y7=3.99,b7=50,w7=50,_7=.15,x7=.1,S7=.9,E7=.9,C7=1,tx=250,A7=4e3*4e3,T7=!0,CL=function(e){var t=this,n=t.renderer=e,i=n.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=Os()-2*tx,t.skipping=!1,t.eleTxrDeqs=i.collection(),t.scheduleElementRefinement=Yp.default(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},w7),n.beforeRender(function(o,s){s-t.lastInvalidationTime<=tx?t.skipping=!0:t.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var a=function(s,u){return u.reqs-s.reqs};t.layersQueue=new Oh.default(a),t.setupDequeueing()},Zi=CL.prototype,rx=0,k7=Math.pow(2,53)-1;Zi.makeLayer=function(r,e){var t=Math.pow(2,e),n=Math.ceil(r.w*t),i=Math.ceil(r.h*t),a=this.renderer.makeOffscreenCanvas(n,i),o={id:rx=++rx%k7,bb:r,level:e,width:n,height:i,canvas:a,context:a.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=o.context,u=-o.bb.x1,l=-o.bb.y1;return s.scale(t,t),s.translate(u,l),o};Zi.getLayers=function(r,e,t){var n=this,i=n.renderer,a=i.cy,o=a.zoom(),s=n.firstGet;if(n.firstGet=!1,t==null){if(t=Math.ceil(sw(o*e)),t<ah)t=ah;else if(o>=y7||t>Ep)return null}n.validateLayersElesOrdering(t,r);var u=n.layersByLevel,l=Math.pow(2,t),f=u[t]=u[t]||[],c,d=n.levelIsComplete(t,r),h,p=function(){var M=function(B){if(n.validateLayersElesOrdering(B,r),n.levelIsComplete(B,r))return h=u[B],!0},T=function(B){if(!h)for(var D=t+B;ah<=D&&D<=Ep&&!M(D);D+=B);};T(1),T(-1);for(var C=f.length-1;C>=0;C--){var R=f[C];R.invalid&&ku(f,R)}};if(!d)p();else return f;var g=function(){if(!c){c=Ia();for(var M=0;M<r.length;M++)mF(c,r[M].boundingBox())}return c},b=function(M){M=M||{};var T=M.after;g();var C=c.w*l*(c.h*l);if(C>A7)return null;var R=n.makeLayer(c,t);if(T!=null){var x=f.indexOf(T)+1;f.splice(x,0,R)}else(M.insert===void 0||M.insert)&&f.unshift(R);return R};if(n.skipping&&!s)return null;for(var v=null,y=r.length/m7,m=!s,w=0;w<r.length;w++){var S=r[w],A=S._private.rscratch,_=A.imgLayerCaches=A.imgLayerCaches||{},E=_[t];if(E){v=E;continue}if((!v||v.eles.length>=y||!Nk(v.bb,S.boundingBox()))&&(v=b({insert:!0,after:v}),!v))return null;h||m?n.queueLayer(v,S):n.drawEleInLayer(v,S,t,e),v.eles.push(S),_[t]=v}return h||(m?null:f)};Zi.getEleLevelForLayerLevel=function(r,e){return r};Zi.drawEleInLayer=function(r,e,t,n){var i=this,a=this.renderer,o=r.context,s=e.boundingBox();s.w===0||s.h===0||!e.visible()||(t=i.getEleLevelForLayerLevel(t,n),a.setImgSmoothing(o,!1),a.drawCachedElement(o,e,null,null,t,T7),a.setImgSmoothing(o,!0))};Zi.levelIsComplete=function(r,e){var t=this,n=t.layersByLevel[r];if(!n||n.length===0)return!1;for(var i=0,a=0;a<n.length;a++){var o=n[a];if(o.reqs>0||o.invalid)return!1;i+=o.eles.length}return i===e.length};Zi.validateLayersElesOrdering=function(r,e){var t=this.layersByLevel[r];if(t)for(var n=0;n<t.length;n++){for(var i=t[n],a=-1,o=0;o<e.length;o++)if(i.eles[0]===e[o]){a=o;break}if(a<0){this.invalidateLayer(i);continue}for(var s=a,o=0;o<i.eles.length;o++)if(i.eles[o]!==e[s+o]){this.invalidateLayer(i);break}}};Zi.updateElementsInLayers=function(r,e){for(var t=this,n=Ih(r[0]),i=0;i<r.length;i++)for(var a=n?null:r[i],o=n?r[i]:r[i].ele,s=o._private.rscratch,u=s.imgLayerCaches=s.imgLayerCaches||{},l=ah;l<=Ep;l++){var f=u[l];f&&(a&&t.getEleLevelForLayerLevel(f.level)!==a.level||e(f,o,a))}};Zi.haveLayers=function(){for(var r=this,e=!1,t=ah;t<=Ep;t++){var n=r.layersByLevel[t];if(n&&n.length>0){e=!0;break}}return e};Zi.invalidateElements=function(r){var e=this;r.length!==0&&(e.lastInvalidationTime=Os(),!(r.length===0||!e.haveLayers())&&e.updateElementsInLayers(r,function(n,i,a){e.invalidateLayer(n)}))};Zi.invalidateLayer=function(r){if(this.lastInvalidationTime=Os(),!r.invalid){var e=r.level,t=r.eles,n=this.layersByLevel[e];ku(n,r),r.elesQueue=[],r.invalid=!0,r.replacement&&(r.replacement.invalid=!0);for(var i=0;i<t.length;i++){var a=t[i]._private.rscratch.imgLayerCaches;a&&(a[e]=null)}}};Zi.refineElementTextures=function(r){var e=this;e.updateElementsInLayers(r,function(n,i,a){var o=n.replacement;if(o||(o=n.replacement=e.makeLayer(n.bb,n.level),o.replaces=n,o.eles=n.eles),!o.reqs)for(var s=0;s<o.eles.length;s++)e.queueLayer(o,o.eles[s])})};Zi.enqueueElementRefinement=function(r){this.eleTxrDeqs.merge(r),this.scheduleElementRefinement()};Zi.queueLayer=function(r,e){var t=this,n=t.layersQueue,i=r.elesQueue,a=i.hasId=i.hasId||{};if(!r.replacement){if(e){if(a[e.id()])return;i.push(e),a[e.id()]=!0}r.reqs?(r.reqs++,n.updateItem(r)):(r.reqs=1,n.push(r))}};Zi.dequeue=function(r){for(var e=this,t=e.layersQueue,n=[],i=0;i<C7&&t.size()!==0;){var a=t.peek();if(a.replacement){t.pop();continue}if(a.replaces&&a!==a.replaces.replacement){t.pop();continue}if(a.invalid){t.pop();continue}var o=a.elesQueue.shift();o&&(e.drawEleInLayer(a,o,a.level,r),i++),n.length===0&&n.push(!0),a.elesQueue.length===0&&(t.pop(),a.reqs=0,a.replaces&&e.applyLayerReplacement(a),e.requestRedraw())}return n};Zi.applyLayerReplacement=function(r){var e=this,t=e.layersByLevel[r.level],n=r.replaces,i=t.indexOf(n);if(!(i<0||n.invalid)){t[i]=r;for(var a=0;a<r.eles.length;a++){var o=r.eles[a]._private,s=o.imgLayerCaches=o.imgLayerCaches||{};s&&(s[r.level]=r)}e.requestRedraw()}};Zi.requestRedraw=Yp.default(function(){var r=this.renderer;r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()},100);Zi.setupDequeueing=EL.setupDequeueing({deqRedrawThreshold:b7,deqCost:_7,deqAvgCost:x7,deqNoDrawCost:S7,deqFastCost:E7,deq:function(e,t){return e.dequeue(t)},onDeqd:aw,shouldRedraw:Ek,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var AL={},nx;function L7(r,e){for(var t=0;t<e.length;t++){var n=e[t];r.lineTo(n.x,n.y)}}function N7(r,e,t){for(var n,i=0;i<e.length;i++){var a=e[i];i===0&&(n=a),r.lineTo(a.x,a.y)}r.quadraticCurveTo(t.x,t.y,n.x,n.y)}function ix(r,e,t){r.beginPath&&r.beginPath();for(var n=e,i=0;i<n.length;i++){var a=n[i];r.lineTo(a.x,a.y)}var o=t,s=t[0];r.moveTo(s.x,s.y);for(var i=1;i<o.length;i++){var a=o[i];r.lineTo(a.x,a.y)}r.closePath&&r.closePath()}function P7(r,e,t,n,i){r.beginPath&&r.beginPath(),r.arc(t,n,i,0,Math.PI*2,!1);var a=e,o=a[0];r.moveTo(o.x,o.y);for(var s=0;s<a.length;s++){var u=a[s];r.lineTo(u.x,u.y)}r.closePath&&r.closePath()}function M7(r,e,t,n){r.arc(e,t,n,0,Math.PI*2,!1)}AL.arrowShapeImpl=function(r){return(nx||(nx={polygon:L7,"triangle-backcurve":N7,"triangle-tee":ix,"circle-triangle":P7,"triangle-cross":ix,circle:M7}))[r]};var us={};us.drawElement=function(r,e,t,n,i,a){var o=this;e.isNode()?o.drawNode(r,e,t,n,i,a):o.drawEdge(r,e,t,n,i,a)};us.drawElementOverlay=function(r,e){var t=this;e.isNode()?t.drawNodeOverlay(r,e):t.drawEdgeOverlay(r,e)};us.drawElementUnderlay=function(r,e){var t=this;e.isNode()?t.drawNodeUnderlay(r,e):t.drawEdgeUnderlay(r,e)};us.drawCachedElementPortion=function(r,e,t,n,i,a,o,s){var u=this,l=t.getBoundingBox(e);if(!(l.w===0||l.h===0)){var f=t.getElement(e,l,n,i,a);if(f!=null){var c=s(u,e);if(c===0)return;var d=o(u,e),h=l.x1,p=l.y1,g=l.w,b=l.h,v,y,m,w,S;if(d!==0){var A=t.getRotationPoint(e);m=A.x,w=A.y,r.translate(m,w),r.rotate(d),S=u.getImgSmoothing(r),S||u.setImgSmoothing(r,!0);var _=t.getRotationOffset(e);v=_.x,y=_.y}else v=h,y=p;var E;c!==1&&(E=r.globalAlpha,r.globalAlpha=E*c),r.drawImage(f.texture.canvas,f.x,0,f.width,f.height,v,y,g,b),c!==1&&(r.globalAlpha=E),d!==0&&(r.rotate(-d),r.translate(-m,-w),S||u.setImgSmoothing(r,!1))}else t.drawElement(r,e)}};var O7=function(){return 0},D7=function(e,t){return e.getTextAngle(t,null)},I7=function(e,t){return e.getTextAngle(t,"source")},R7=function(e,t){return e.getTextAngle(t,"target")},F7=function(e,t){return t.effectiveOpacity()},Qg=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};us.drawCachedElement=function(r,e,t,n,i,a){var o=this,s=o.data,u=s.eleTxrCache,l=s.lblTxrCache,f=s.slbTxrCache,c=s.tlbTxrCache,d=e.boundingBox(),h=a===!0?u.reasons.highQuality:null;if(!(d.w===0||d.h===0||!e.visible())&&(!n||uw(d,n))){var p=e.isEdge(),g=e.element()._private.rscratch.badLine;o.drawElementUnderlay(r,e),o.drawCachedElementPortion(r,e,u,t,i,h,O7,F7),(!p||!g)&&o.drawCachedElementPortion(r,e,l,t,i,h,D7,Qg),p&&!g&&(o.drawCachedElementPortion(r,e,f,t,i,h,I7,Qg),o.drawCachedElementPortion(r,e,c,t,i,h,R7,Qg)),o.drawElementOverlay(r,e)}};us.drawElements=function(r,e){for(var t=this,n=0;n<e.length;n++){var i=e[n];t.drawElement(r,i)}};us.drawCachedElements=function(r,e,t,n){for(var i=this,a=0;a<e.length;a++){var o=e[a];i.drawCachedElement(r,o,t,n)}};us.drawCachedNodes=function(r,e,t,n){for(var i=this,a=0;a<e.length;a++){var o=e[a];o.isNode()&&i.drawCachedElement(r,o,t,n)}};us.drawLayeredElements=function(r,e,t,n){var i=this,a=i.data.lyrTxrCache.getLayers(e,t);if(a)for(var o=0;o<a.length;o++){var s=a[o],u=s.bb;u.w===0||u.h===0||r.drawImage(s.canvas,u.x1,u.y1,u.w,u.h)}else i.drawCachedElements(r,e,t,n)};var Fs={};Fs.drawEdge=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s=e._private.rscratch;if(!(a&&!e.visible())&&!(s.badLine||s.allpts==null||isNaN(s.allpts[0]))){var u;t&&(u=t,r.translate(-u.x1,-u.y1));var l=a?e.pstyle("opacity").value:1,f=a?e.pstyle("line-opacity").value:1,c=e.pstyle("curve-style").value,d=e.pstyle("line-style").value,h=e.pstyle("width").pfValue,p=e.pstyle("line-cap").value,g=l*f,b=l*f,v=function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g;c==="straight-triangle"?(o.eleStrokeStyle(r,e,C),o.drawEdgeTrianglePath(e,r,s.allpts)):(r.lineWidth=h,r.lineCap=p,o.eleStrokeStyle(r,e,C),o.drawEdgePath(e,r,s.allpts,d),r.lineCap="butt")},y=function(){i&&o.drawEdgeOverlay(r,e)},m=function(){i&&o.drawEdgeUnderlay(r,e)},w=function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b;o.drawArrowheads(r,e,C)},S=function(){o.drawElementText(r,e,null,n)};r.lineJoin="round";var A=e.pstyle("ghost").value==="yes";if(A){var _=e.pstyle("ghost-offset-x").pfValue,E=e.pstyle("ghost-offset-y").pfValue,k=e.pstyle("ghost-opacity").value,M=g*k;r.translate(_,E),v(M),w(M),r.translate(-_,-E)}m(),v(),w(),y(),S(),t&&r.translate(u.x1,u.y1)}};var TL=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n){if(n.visible()){var i=n.pstyle("".concat(e,"-opacity")).value;if(i!==0){var a=this,o=a.usePaths(),s=n._private.rscratch,u=n.pstyle("".concat(e,"-padding")).pfValue,l=2*u,f=n.pstyle("".concat(e,"-color")).value;t.lineWidth=l,s.edgeType==="self"&&!o?t.lineCap="butt":t.lineCap="round",a.colorStrokeStyle(t,f[0],f[1],f[2],i),a.drawEdgePath(n,t,s.allpts,"solid")}}}};Fs.drawEdgeOverlay=TL("overlay");Fs.drawEdgeUnderlay=TL("underlay");Fs.drawEdgePath=function(r,e,t,n){var i=r._private.rscratch,a=e,o,s=!1,u=this.usePaths(),l=r.pstyle("line-dash-pattern").pfValue,f=r.pstyle("line-dash-offset").pfValue;if(u){var c=t.join("$"),d=i.pathCacheKey&&i.pathCacheKey===c;d?(o=e=i.pathCache,s=!0):(o=e=new Path2D,i.pathCacheKey=c,i.pathCache=o)}if(a.setLineDash)switch(n){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash(l),a.lineDashOffset=f;break;case"solid":a.setLineDash([]);break}if(!s&&!i.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(t[0],t[1]),i.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var h=2;h+3<t.length;h+=4)e.quadraticCurveTo(t[h],t[h+1],t[h+2],t[h+3]);break;case"straight":case"segments":case"haystack":for(var p=2;p+1<t.length;p+=2)e.lineTo(t[p],t[p+1]);break}e=a,u?e.stroke(o):e.stroke(),e.setLineDash&&e.setLineDash([])};Fs.drawEdgeTrianglePath=function(r,e,t){e.fillStyle=e.strokeStyle;for(var n=r.pstyle("width").pfValue,i=0;i+1<t.length;i+=2){var a=[t[i+2]-t[i],t[i+3]-t[i+1]],o=Math.sqrt(a[0]*a[0]+a[1]*a[1]),s=[a[1]/o,-a[0]/o],u=[s[0]*n/2,s[1]*n/2];e.beginPath(),e.moveTo(t[i]-u[0],t[i+1]-u[1]),e.lineTo(t[i]+u[0],t[i+1]+u[1]),e.lineTo(t[i+2],t[i+3]),e.closePath(),e.fill()}};Fs.drawArrowheads=function(r,e,t){var n=e._private.rscratch,i=n.edgeType==="haystack";i||this.drawArrowhead(r,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,t),this.drawArrowhead(r,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,t),this.drawArrowhead(r,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,t),i||this.drawArrowhead(r,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,t)};Fs.drawArrowhead=function(r,e,t,n,i,a,o){if(!(isNaN(n)||n==null||isNaN(i)||i==null||isNaN(a)||a==null)){var s=this,u=e.pstyle(t+"-arrow-shape").value;if(u!=="none"){var l=e.pstyle(t+"-arrow-fill").value==="hollow"?"both":"filled",f=e.pstyle(t+"-arrow-fill").value,c=e.pstyle("width").pfValue,d=e.pstyle("opacity").value;o===void 0&&(o=d);var h=r.globalCompositeOperation;(o!==1||f==="hollow")&&(r.globalCompositeOperation="destination-out",s.colorFillStyle(r,255,255,255,1),s.colorStrokeStyle(r,255,255,255,1),s.drawArrowShape(e,r,l,c,u,n,i,a),r.globalCompositeOperation=h);var p=e.pstyle(t+"-arrow-color").value;s.colorFillStyle(r,p[0],p[1],p[2],o),s.colorStrokeStyle(r,p[0],p[1],p[2],o),s.drawArrowShape(e,r,f,c,u,n,i,a)}}};Fs.drawArrowShape=function(r,e,t,n,i,a,o,s){var u=this,l=this.usePaths()&&i!=="triangle-cross",f=!1,c,d=e,h={x:a,y:o},p=r.pstyle("arrow-scale").value,g=this.getArrowWidth(n,p),b=u.arrowShapes[i];if(l){var v=u.arrowPathCache=u.arrowPathCache||[],y=yl(i),m=v[y];m!=null?(c=e=m,f=!0):(c=e=new Path2D,v[y]=c)}f||(e.beginPath&&e.beginPath(),l?b.draw(e,1,0,{x:0,y:0},1):b.draw(e,g,s,h,n),e.closePath&&e.closePath()),e=d,l&&(e.translate(a,o),e.rotate(s),e.scale(g,g)),(t==="filled"||t==="both")&&(l?e.fill(c):e.fill()),(t==="hollow"||t==="both")&&(e.lineWidth=(b.matchEdgeWidth?n:1)/(l?g:1),e.lineJoin="miter",l?e.stroke(c):e.stroke()),l&&(e.scale(1/g,1/g),e.rotate(-s),e.translate(-a,-o))};var bw={};bw.safeDrawImage=function(r,e,t,n,i,a,o,s,u,l){if(!(i<=0||a<=0||u<=0||l<=0))try{r.drawImage(e,t,n,i,a,o,s,u,l)}catch(f){vn(f)}};bw.drawInscribedImage=function(r,e,t,n,i){var a=this,o=t.position(),s=o.x,u=o.y,l=t.cy().style(),f=l.getIndexedStyle.bind(l),c=f(t,"background-fit","value",n),d=f(t,"background-repeat","value",n),h=t.width(),p=t.height(),g=t.padding()*2,b=h+(f(t,"background-width-relative-to","value",n)==="inner"?0:g),v=p+(f(t,"background-height-relative-to","value",n)==="inner"?0:g),y=t._private.rscratch,m=f(t,"background-clip","value",n),w=m==="node",S=f(t,"background-image-opacity","value",n)*i,A=f(t,"background-image-smoothing","value",n),_=e.width||e.cachedW,E=e.height||e.cachedH;(_==null||E==null)&&(document.body.appendChild(e),_=e.cachedW=e.width||e.offsetWidth,E=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var k=_,M=E;if(f(t,"background-width","value",n)!=="auto"&&(f(t,"background-width","units",n)==="%"?k=f(t,"background-width","pfValue",n)*b:k=f(t,"background-width","pfValue",n)),f(t,"background-height","value",n)!=="auto"&&(f(t,"background-height","units",n)==="%"?M=f(t,"background-height","pfValue",n)*v:M=f(t,"background-height","pfValue",n)),!(k===0||M===0)){if(c==="contain"){var T=Math.min(b/k,v/M);k*=T,M*=T}else if(c==="cover"){var T=Math.max(b/k,v/M);k*=T,M*=T}var C=s-b/2,R=f(t,"background-position-x","units",n),x=f(t,"background-position-x","pfValue",n);R==="%"?C+=(b-k)*x:C+=x;var B=f(t,"background-offset-x","units",n),D=f(t,"background-offset-x","pfValue",n);B==="%"?C+=(b-k)*D:C+=D;var O=u-v/2,G=f(t,"background-position-y","units",n),V=f(t,"background-position-y","pfValue",n);G==="%"?O+=(v-M)*V:O+=V;var I=f(t,"background-offset-y","units",n),z=f(t,"background-offset-y","pfValue",n);I==="%"?O+=(v-M)*z:O+=z,y.pathCache&&(C-=s,O-=u,s=0,u=0);var P=r.globalAlpha;r.globalAlpha=S;var q=a.getImgSmoothing(r),F=!1;if(A==="no"&&q?(a.setImgSmoothing(r,!1),F=!0):A==="yes"&&!q&&(a.setImgSmoothing(r,!0),F=!0),d==="no-repeat")w&&(r.save(),y.pathCache?r.clip(y.pathCache):(a.nodeShapes[a.getNodeShape(t)].draw(r,s,u,b,v),r.clip())),a.safeDrawImage(r,e,0,0,_,E,C,O,k,M),w&&r.restore();else{var U=r.createPattern(e,d);r.fillStyle=U,a.nodeShapes[a.getNodeShape(t)].draw(r,s,u,b,v),r.translate(C,O),r.fill(),r.translate(-C,-O)}r.globalAlpha=P,F&&a.setImgSmoothing(r,q)}};var Pl={};Pl.eleTextBiggerThanMin=function(r,e){if(!e){var t=r.cy().zoom(),n=this.getPixelRatio(),i=Math.ceil(sw(t*n));e=Math.pow(2,i)}var a=r.pstyle("font-size").pfValue*e,o=r.pstyle("min-zoomed-font-size").pfValue;return!(a<o)};Pl.drawElementText=function(r,e,t,n,i){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this;if(n==null){if(a&&!o.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var u=o.getLabelJustification(e);r.textAlign=u,r.textBaseline="bottom"}else{var l=e.element()._private.rscratch.badLine,f=e.pstyle("label"),c=e.pstyle("source-label"),d=e.pstyle("target-label");if(l||(!f||!f.value)&&(!c||!c.value)&&(!d||!d.value))return;r.textAlign="center",r.textBaseline="bottom"}var h=!t,p;t&&(p=t,r.translate(-p.x1,-p.y1)),i==null?(o.drawText(r,e,null,h,a),e.isEdge()&&(o.drawText(r,e,"source",h,a),o.drawText(r,e,"target",h,a))):o.drawText(r,e,i,h,a),t&&r.translate(p.x1,p.y1)};Pl.getFontCache=function(r){var e;this.fontCaches=this.fontCaches||[];for(var t=0;t<this.fontCaches.length;t++)if(e=this.fontCaches[t],e.context===r)return e;return e={context:r},this.fontCaches.push(e),e};Pl.setupTextStyle=function(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue+"px",a=e.pstyle("font-family").strValue,o=e.pstyle("font-weight").strValue,s=t?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*s,l=e.pstyle("color").value,f=e.pstyle("text-outline-color").value;r.font=n+" "+o+" "+i+" "+a,r.lineJoin="round",this.colorFillStyle(r,l[0],l[1],l[2],s),this.colorStrokeStyle(r,f[0],f[1],f[2],u)};function B7(r,e,t,n,i){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5;r.beginPath(),r.moveTo(e+a,t),r.lineTo(e+n-a,t),r.quadraticCurveTo(e+n,t,e+n,t+a),r.lineTo(e+n,t+i-a),r.quadraticCurveTo(e+n,t+i,e+n-a,t+i),r.lineTo(e+a,t+i),r.quadraticCurveTo(e,t+i,e,t+i-a),r.lineTo(e,t+a),r.quadraticCurveTo(e,t,e+a,t),r.closePath(),r.fill()}Pl.getTextAngle=function(r,e){var t,n=r._private,i=n.rscratch,a=e?e+"-":"",o=r.pstyle(a+"text-rotation"),s=xo(i,"labelAngle",e);return o.strValue==="autorotate"?t=r.isEdge()?s:0:o.strValue==="none"?t=0:t=o.pfValue,t};Pl.drawText=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=e._private,o=a.rscratch,s=i?e.effectiveOpacity():1;if(!(i&&(s===0||e.pstyle("text-opacity").value===0))){t==="main"&&(t=null);var u=xo(o,"labelX",t),l=xo(o,"labelY",t),f,c,d=this.getLabelText(e,t);if(d!=null&&d!==""&&!isNaN(u)&&!isNaN(l)){this.setupTextStyle(r,e,i);var h=t?t+"-":"",p=xo(o,"labelWidth",t),g=xo(o,"labelHeight",t),b=e.pstyle(h+"text-margin-x").pfValue,v=e.pstyle(h+"text-margin-y").pfValue,y=e.isEdge(),m=e.pstyle("text-halign").value,w=e.pstyle("text-valign").value;y&&(m="center",w="center"),u+=b,l+=v;var S;switch(n?S=this.getTextAngle(e,t):S=0,S!==0&&(f=u,c=l,r.translate(f,c),r.rotate(S),u=0,l=0),w){case"top":break;case"center":l+=g/2;break;case"bottom":l+=g;break}var A=e.pstyle("text-background-opacity").value,_=e.pstyle("text-border-opacity").value,E=e.pstyle("text-border-width").pfValue,k=e.pstyle("text-background-padding").pfValue;if(A>0||E>0&&_>0){var M=u-k;switch(m){case"left":M-=p;break;case"center":M-=p/2;break}var T=l-g-k,C=p+2*k,R=g+2*k;if(A>0){var x=r.fillStyle,B=e.pstyle("text-background-color").value;r.fillStyle="rgba("+B[0]+","+B[1]+","+B[2]+","+A*s+")";var D=e.pstyle("text-background-shape").strValue;D.indexOf("round")===0?B7(r,M,T,C,R,2):r.fillRect(M,T,C,R),r.fillStyle=x}if(E>0&&_>0){var O=r.strokeStyle,G=r.lineWidth,V=e.pstyle("text-border-color").value,I=e.pstyle("text-border-style").value;if(r.strokeStyle="rgba("+V[0]+","+V[1]+","+V[2]+","+_*s+")",r.lineWidth=E,r.setLineDash)switch(I){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"double":r.lineWidth=E/4,r.setLineDash([]);break;case"solid":r.setLineDash([]);break}if(r.strokeRect(M,T,C,R),I==="double"){var z=E/2;r.strokeRect(M+z,T+z,C-z*2,R-z*2)}r.setLineDash&&r.setLineDash([]),r.lineWidth=G,r.strokeStyle=O}}var P=2*e.pstyle("text-outline-width").pfValue;if(P>0&&(r.lineWidth=P),e.pstyle("text-wrap").value==="wrap"){var q=xo(o,"labelWrapCachedLines",t),F=xo(o,"labelLineHeight",t),U=p/2,W=this.getLabelJustification(e);switch(W==="auto"||(m==="left"?W==="left"?u+=-p:W==="center"&&(u+=-U):m==="center"?W==="left"?u+=-U:W==="right"&&(u+=U):m==="right"&&(W==="center"?u+=U:W==="right"&&(u+=p))),w){case"top":l-=(q.length-1)*F;break;case"center":case"bottom":l-=(q.length-1)*F;break}for(var X=0;X<q.length;X++)P>0&&r.strokeText(q[X],u,l),r.fillText(q[X],u,l),l+=F}else P>0&&r.strokeText(d,u,l),r.fillText(d,u,l);S!==0&&(r.rotate(-S),r.translate(-f,-c))}}};var ic={};ic.drawNode=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s,u,l=e._private,f=l.rscratch,c=e.position();if(!(!Ht(c.x)||!Ht(c.y))&&!(a&&!e.visible())){var d=a?e.effectiveOpacity():1,h=o.usePaths(),p,g=!1,b=e.padding();s=e.width()+2*b,u=e.height()+2*b;var v;t&&(v=t,r.translate(-v.x1,-v.y1));for(var y=e.pstyle("background-image"),m=y.value,w=new Array(m.length),S=new Array(m.length),A=0,_=0;_<m.length;_++){var E=m[_],k=w[_]=E!=null&&E!=="none";if(k){var M=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",_);A++,S[_]=o.getCachedImage(E,M,function(){l.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var T=e.pstyle("background-blacken").value,C=e.pstyle("border-width").pfValue,R=e.pstyle("background-opacity").value*d,x=e.pstyle("border-color").value,B=e.pstyle("border-style").value,D=e.pstyle("border-opacity").value*d;r.lineJoin="miter";var O=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:R;o.eleFillStyle(r,e,re)},G=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:D;o.colorStrokeStyle(r,x[0],x[1],x[2],re)},V=e.pstyle("shape").strValue,I=e.pstyle("shape-polygon-points").pfValue;if(h){r.translate(c.x,c.y);var z=o.nodePathCache=o.nodePathCache||[],P=Sk(V==="polygon"?V+","+I.join(","):V,""+u,""+s),q=z[P];q!=null?(p=q,g=!0,f.pathCache=p):(p=new Path2D,z[P]=f.pathCache=p)}var F=function(){if(!g){var re=c;h&&(re={x:0,y:0}),o.nodeShapes[o.getNodeShape(e)].draw(p||r,re.x,re.y,s,u)}h?r.fill(p):r.fill()},U=function(){for(var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,fe=l.backgrounding,we=0,ge=0;ge<S.length;ge++){var me=e.cy().style().getIndexedStyle(e,"background-image-containment","value",ge);if(J&&me==="over"||!J&&me==="inside"){we++;continue}w[ge]&&S[ge].complete&&!S[ge].error&&(we++,o.drawInscribedImage(r,S[ge],e,ge,re))}l.backgrounding=we!==A,fe!==l.backgrounding&&e.updateStyle(!1)},W=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d;o.hasPie(e)&&(o.drawPie(r,e,J),re&&(h||o.nodeShapes[o.getNodeShape(e)].draw(r,c.x,c.y,s,u)))},X=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,J=(T>0?T:-T)*re,fe=T>0?0:255;T!==0&&(o.colorFillStyle(r,fe,fe,fe,J),h?r.fill(p):r.fill())},te=function(){if(C>0){if(r.lineWidth=C,r.lineCap="butt",r.setLineDash)switch(B){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"solid":case"double":r.setLineDash([]);break}if(h?r.stroke(p):r.stroke(),B==="double"){r.lineWidth=C/3;var re=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",h?r.stroke(p):r.stroke(),r.globalCompositeOperation=re}r.setLineDash&&r.setLineDash([])}},ne=function(){i&&o.drawNodeOverlay(r,e,c,s,u)},he=function(){i&&o.drawNodeUnderlay(r,e,c,s,u)},ve=function(){o.drawElementText(r,e,null,n)},Ce=e.pstyle("ghost").value==="yes";if(Ce){var Le=e.pstyle("ghost-offset-x").pfValue,K=e.pstyle("ghost-offset-y").pfValue,le=e.pstyle("ghost-opacity").value,Z=le*d;r.translate(Le,K),O(le*R),F(),U(Z,!0),G(le*D),te(),W(T!==0||C!==0),U(Z,!1),X(Z),r.translate(-Le,-K)}h&&r.translate(-c.x,-c.y),he(),h&&r.translate(c.x,c.y),O(),F(),U(d,!0),G(),te(),W(T!==0||C!==0),U(d,!1),X(),h&&r.translate(-c.x,-c.y),ve(),ne(),t&&r.translate(v.x1,v.y1)}};var kL=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n,i,a,o){var s=this;if(n.visible()){var u=n.pstyle("".concat(e,"-padding")).pfValue,l=n.pstyle("".concat(e,"-opacity")).value,f=n.pstyle("".concat(e,"-color")).value,c=n.pstyle("".concat(e,"-shape")).value;if(l>0){if(i=i||n.position(),a==null||o==null){var d=n.padding();a=n.width()+2*d,o=n.height()+2*d}s.colorFillStyle(t,f[0],f[1],f[2],l),s.nodeShapes[c].draw(t,i.x,i.y,a+u*2,o+u*2),t.fill()}}}};ic.drawNodeOverlay=kL("overlay");ic.drawNodeUnderlay=kL("underlay");ic.hasPie=function(r){return r=r[0],r._private.hasPie};ic.drawPie=function(r,e,t,n){e=e[0],n=n||e.position();var i=e.cy().style(),a=e.pstyle("pie-size"),o=n.x,s=n.y,u=e.width(),l=e.height(),f=Math.min(u,l)/2,c=0,d=this.usePaths();d&&(o=0,s=0),a.units==="%"?f=f*a.pfValue:a.pfValue!==void 0&&(f=a.pfValue/2);for(var h=1;h<=i.pieBackgroundN;h++){var p=e.pstyle("pie-"+h+"-background-size").value,g=e.pstyle("pie-"+h+"-background-color").value,b=e.pstyle("pie-"+h+"-background-opacity").value*t,v=p/100;v+c>1&&(v=1-c);var y=1.5*Math.PI+2*Math.PI*c,m=2*Math.PI*v,w=y+m;p===0||c>=1||c+v>1||(r.beginPath(),r.moveTo(o,s),r.arc(o,s,f,y,w),r.closePath(),this.colorFillStyle(r,g[0],g[1],g[2],b),r.fill(),c+=v)}};var Va={},z7=100;Va.getPixelRatio=function(){var r=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=r.backingStorePixelRatio||r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e};Va.paintCache=function(r){for(var e=this.paintCaches=this.paintCaches||[],t=!0,n,i=0;i<e.length;i++)if(n=e[i],n.context===r){t=!1;break}return t&&(n={context:r},e.push(n)),n};Va.createGradientStyleFor=function(r,e,t,n,i){var a,o=this.usePaths(),s=t.pstyle(e+"-gradient-stop-colors").value,u=t.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(t.isEdge()){var l=t.sourceEndpoint(),f=t.targetEndpoint(),c=t.midpoint(),d=bl(l,c),h=bl(f,c);a=r.createRadialGradient(c.x,c.y,0,c.x,c.y,Math.max(d,h))}else{var p=o?{x:0,y:0}:t.position(),g=t.paddedWidth(),b=t.paddedHeight();a=r.createRadialGradient(p.x,p.y,0,p.x,p.y,Math.max(g,b))}else if(t.isEdge()){var v=t.sourceEndpoint(),y=t.targetEndpoint();a=r.createLinearGradient(v.x,v.y,y.x,y.y)}else{var m=o?{x:0,y:0}:t.position(),w=t.paddedWidth(),S=t.paddedHeight(),A=w/2,_=S/2,E=t.pstyle("background-gradient-direction").value;switch(E){case"to-bottom":a=r.createLinearGradient(m.x,m.y-_,m.x,m.y+_);break;case"to-top":a=r.createLinearGradient(m.x,m.y+_,m.x,m.y-_);break;case"to-left":a=r.createLinearGradient(m.x+A,m.y,m.x-A,m.y);break;case"to-right":a=r.createLinearGradient(m.x-A,m.y,m.x+A,m.y);break;case"to-bottom-right":case"to-right-bottom":a=r.createLinearGradient(m.x-A,m.y-_,m.x+A,m.y+_);break;case"to-top-right":case"to-right-top":a=r.createLinearGradient(m.x-A,m.y+_,m.x+A,m.y-_);break;case"to-bottom-left":case"to-left-bottom":a=r.createLinearGradient(m.x+A,m.y-_,m.x-A,m.y+_);break;case"to-top-left":case"to-left-top":a=r.createLinearGradient(m.x+A,m.y+_,m.x-A,m.y-_);break}}if(!a)return null;for(var k=u.length===s.length,M=s.length,T=0;T<M;T++)a.addColorStop(k?u[T]:T/(M-1),"rgba("+s[T][0]+","+s[T][1]+","+s[T][2]+","+i+")");return a};Va.gradientFillStyle=function(r,e,t,n){var i=this.createGradientStyleFor(r,"background",e,t,n);if(!i)return null;r.fillStyle=i};Va.colorFillStyle=function(r,e,t,n,i){r.fillStyle="rgba("+e+","+t+","+n+","+i+")"};Va.eleFillStyle=function(r,e,t){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(r,e,n,t);else{var i=e.pstyle("background-color").value;this.colorFillStyle(r,i[0],i[1],i[2],t)}};Va.gradientStrokeStyle=function(r,e,t,n){var i=this.createGradientStyleFor(r,"line",e,t,n);if(!i)return null;r.strokeStyle=i};Va.colorStrokeStyle=function(r,e,t,n,i){r.strokeStyle="rgba("+e+","+t+","+n+","+i+")"};Va.eleStrokeStyle=function(r,e,t){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(r,e,n,t);else{var i=e.pstyle("line-color").value;this.colorStrokeStyle(r,i[0],i[1],i[2],t)}};Va.matchCanvasSize=function(r){var e=this,t=e.data,n=e.findContainerClientCoords(),i=n[2],a=n[3],o=e.getPixelRatio(),s=e.motionBlurPxRatio;(r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(o=s);var u=i*o,l=a*o,f;if(!(u===e.canvasWidth&&l===e.canvasHeight)){e.fontCaches=null;var c=t.canvasContainer;c.style.width=i+"px",c.style.height=a+"px";for(var d=0;d<e.CANVAS_LAYERS;d++)f=t.canvases[d],f.width=u,f.height=l,f.style.width=i+"px",f.style.height=a+"px";for(var d=0;d<e.BUFFER_COUNT;d++)f=t.bufferCanvases[d],f.width=u,f.height=l,f.style.width=i+"px",f.style.height=a+"px";e.textureMult=1,o<=1&&(f=t.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,f.width=u*e.textureMult,f.height=l*e.textureMult),e.canvasWidth=u,e.canvasHeight=l}};Va.renderTo=function(r,e,t,n){this.render({forcedContext:r,forcedZoom:e,forcedPan:t,drawAllLayers:!0,forcedPxRatio:n})};Va.render=function(r){r=r||Tk();var e=r.forcedContext,t=r.drawAllLayers,n=r.drawOnlyNodeLayer,i=r.forcedZoom,a=r.forcedPan,o=this,s=r.forcedPxRatio===void 0?this.getPixelRatio():r.forcedPxRatio,u=o.cy,l=o.data,f=l.canvasNeedsRedraw,c=o.textureOnViewport&&!e&&(o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming),d=r.motionBlur!==void 0?r.motionBlur:o.motionBlur,h=o.motionBlurPxRatio,p=u.hasCompoundNodes(),g=o.hoverData.draggingEles,b=!!(o.hoverData.selecting||o.touchData.selecting);d=d&&!e&&o.motionBlurEnabled&&!b;var v=d;e||(o.prevPxRatio!==s&&(o.invalidateContainerClientCoordsCache(),o.matchCanvasSize(o.container),o.redrawHint("eles",!0),o.redrawHint("drag",!0)),o.prevPxRatio=s),!e&&o.motionBlurTimeout&&clearTimeout(o.motionBlurTimeout),d&&(o.mbFrames==null&&(o.mbFrames=0),o.mbFrames++,o.mbFrames<3&&(v=!1),o.mbFrames>o.minMbLowQualFrames&&(o.motionBlurPxRatio=o.mbPxRBlurry)),o.clearingMotionBlur&&(o.motionBlurPxRatio=1),o.textureDrawLastFrame&&!c&&(f[o.NODE]=!0,f[o.SELECT_BOX]=!0);var y=u.style(),m=u.zoom(),w=i!==void 0?i:m,S=u.pan(),A={x:S.x,y:S.y},_={zoom:m,pan:{x:S.x,y:S.y}},E=o.prevViewport,k=E===void 0||_.zoom!==E.zoom||_.pan.x!==E.pan.x||_.pan.y!==E.pan.y;!k&&!(g&&!p)&&(o.motionBlurPxRatio=1),a&&(A=a),w*=s,A.x*=s,A.y*=s;var M=o.getCachedZSortedEles();function T(K,le,Z,ie,re){var J=K.globalCompositeOperation;K.globalCompositeOperation="destination-out",o.colorFillStyle(K,255,255,255,o.motionBlurTransparency),K.fillRect(le,Z,ie,re),K.globalCompositeOperation=J}function C(K,le){var Z,ie,re,J;!o.clearingMotionBlur&&(K===l.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]||K===l.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG])?(Z={x:S.x*h,y:S.y*h},ie=m*h,re=o.canvasWidth*h,J=o.canvasHeight*h):(Z=A,ie=w,re=o.canvasWidth,J=o.canvasHeight),K.setTransform(1,0,0,1,0,0),le==="motionBlur"?T(K,0,0,re,J):!e&&(le===void 0||le)&&K.clearRect(0,0,re,J),t||(K.translate(Z.x,Z.y),K.scale(ie,ie)),a&&K.translate(a.x,a.y),i&&K.scale(i,i)}if(c||(o.textureDrawLastFrame=!1),c){if(o.textureDrawLastFrame=!0,!o.textureCache){o.textureCache={},o.textureCache.bb=u.mutableElements().boundingBox(),o.textureCache.texture=o.data.bufferCanvases[o.TEXTURE_BUFFER];var R=o.data.bufferContexts[o.TEXTURE_BUFFER];R.setTransform(1,0,0,1,0,0),R.clearRect(0,0,o.canvasWidth*o.textureMult,o.canvasHeight*o.textureMult),o.render({forcedContext:R,drawOnlyNodeLayer:!0,forcedPxRatio:s*o.textureMult});var _=o.textureCache.viewport={zoom:u.zoom(),pan:u.pan(),width:o.canvasWidth,height:o.canvasHeight};_.mpan={x:(0-_.pan.x)/_.zoom,y:(0-_.pan.y)/_.zoom}}f[o.DRAG]=!1,f[o.NODE]=!1;var x=l.contexts[o.NODE],B=o.textureCache.texture,_=o.textureCache.viewport;x.setTransform(1,0,0,1,0,0),d?T(x,0,0,_.width,_.height):x.clearRect(0,0,_.width,_.height);var D=y.core("outside-texture-bg-color").value,O=y.core("outside-texture-bg-opacity").value;o.colorFillStyle(x,D[0],D[1],D[2],O),x.fillRect(0,0,_.width,_.height);var m=u.zoom();C(x,!1),x.clearRect(_.mpan.x,_.mpan.y,_.width/_.zoom/s,_.height/_.zoom/s),x.drawImage(B,_.mpan.x,_.mpan.y,_.width/_.zoom/s,_.height/_.zoom/s)}else o.textureOnViewport&&!e&&(o.textureCache=null);var G=u.extent(),V=o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming||o.hoverData.draggingEles||o.cy.animated(),I=o.hideEdgesOnViewport&&V,z=[];if(z[o.NODE]=!f[o.NODE]&&d&&!o.clearedForMotionBlur[o.NODE]||o.clearingMotionBlur,z[o.NODE]&&(o.clearedForMotionBlur[o.NODE]=!0),z[o.DRAG]=!f[o.DRAG]&&d&&!o.clearedForMotionBlur[o.DRAG]||o.clearingMotionBlur,z[o.DRAG]&&(o.clearedForMotionBlur[o.DRAG]=!0),f[o.NODE]||t||n||z[o.NODE]){var P=d&&!z[o.NODE]&&h!==1,x=e||(P?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]:l.contexts[o.NODE]),q=d&&!P?"motionBlur":void 0;C(x,q),I?o.drawCachedNodes(x,M.nondrag,s,G):o.drawLayeredElements(x,M.nondrag,s,G),o.debug&&o.drawDebugPoints(x,M.nondrag),!t&&!d&&(f[o.NODE]=!1)}if(!n&&(f[o.DRAG]||t||z[o.DRAG])){var P=d&&!z[o.DRAG]&&h!==1,x=e||(P?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG]:l.contexts[o.DRAG]);C(x,d&&!P?"motionBlur":void 0),I?o.drawCachedNodes(x,M.drag,s,G):o.drawCachedElements(x,M.drag,s,G),o.debug&&o.drawDebugPoints(x,M.drag),!t&&!d&&(f[o.DRAG]=!1)}if(o.showFps||!n&&f[o.SELECT_BOX]&&!t){var x=e||l.contexts[o.SELECT_BOX];if(C(x),o.selection[4]==1&&(o.hoverData.selecting||o.touchData.selecting)){var m=o.cy.zoom(),F=y.core("selection-box-border-width").value/m;x.lineWidth=F,x.fillStyle="rgba("+y.core("selection-box-color").value[0]+","+y.core("selection-box-color").value[1]+","+y.core("selection-box-color").value[2]+","+y.core("selection-box-opacity").value+")",x.fillRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]),F>0&&(x.strokeStyle="rgba("+y.core("selection-box-border-color").value[0]+","+y.core("selection-box-border-color").value[1]+","+y.core("selection-box-border-color").value[2]+","+y.core("selection-box-opacity").value+")",x.strokeRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]))}if(l.bgActivePosistion&&!o.hoverData.selecting){var m=o.cy.zoom(),U=l.bgActivePosistion;x.fillStyle="rgba("+y.core("active-bg-color").value[0]+","+y.core("active-bg-color").value[1]+","+y.core("active-bg-color").value[2]+","+y.core("active-bg-opacity").value+")",x.beginPath(),x.arc(U.x,U.y,y.core("active-bg-size").pfValue/m,0,2*Math.PI),x.fill()}var W=o.lastRedrawTime;if(o.showFps&&W){W=Math.round(W);var X=Math.round(1e3/W);x.setTransform(1,0,0,1,0,0),x.fillStyle="rgba(255, 0, 0, 0.75)",x.strokeStyle="rgba(255, 0, 0, 0.75)",x.lineWidth=1,x.fillText("1 frame = "+W+" ms = "+X+" fps",0,20);var te=60;x.strokeRect(0,30,250,20),x.fillRect(0,30,250*Math.min(X/te,1),20)}t||(f[o.SELECT_BOX]=!1)}if(d&&h!==1){var ne=l.contexts[o.NODE],he=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_NODE],ve=l.contexts[o.DRAG],Ce=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_DRAG],Le=function(le,Z,ie){le.setTransform(1,0,0,1,0,0),ie||!v?le.clearRect(0,0,o.canvasWidth,o.canvasHeight):T(le,0,0,o.canvasWidth,o.canvasHeight);var re=h;le.drawImage(Z,0,0,o.canvasWidth*re,o.canvasHeight*re,0,0,o.canvasWidth,o.canvasHeight)};(f[o.NODE]||z[o.NODE])&&(Le(ne,he,z[o.NODE]),f[o.NODE]=!1),(f[o.DRAG]||z[o.DRAG])&&(Le(ve,Ce,z[o.DRAG]),f[o.DRAG]=!1)}o.prevViewport=_,o.clearingMotionBlur&&(o.clearingMotionBlur=!1,o.motionBlurCleared=!0,o.motionBlur=!0),d&&(o.motionBlurTimeout=setTimeout(function(){o.motionBlurTimeout=null,o.clearedForMotionBlur[o.NODE]=!1,o.clearedForMotionBlur[o.DRAG]=!1,o.motionBlur=!1,o.clearingMotionBlur=!c,o.mbFrames=0,f[o.NODE]=!0,f[o.DRAG]=!0,o.redraw()},z7)),e||u.emit("render")};var Fu={};Fu.drawPolygonPath=function(r,e,t,n,i,a){var o=n/2,s=i/2;r.beginPath&&r.beginPath(),r.moveTo(e+o*a[0],t+s*a[1]);for(var u=1;u<a.length/2;u++)r.lineTo(e+o*a[u*2],t+s*a[u*2+1]);r.closePath()};Fu.drawRoundPolygonPath=function(r,e,t,n,i,a){var o=n/2,s=i/2,u=lw(n,i);r.beginPath&&r.beginPath();for(var l=0;l<a.length/4;l++){var f=void 0,c=void 0;l===0?f=a.length-2:f=l*4-2,c=l*4+2;var d=e+o*a[l*4],h=t+s*a[l*4+1],p=-a[f]*a[c]-a[f+1]*a[c+1],g=u/Math.tan(Math.acos(p)/2),b=d-g*a[f],v=h-g*a[f+1],y=d+g*a[c],m=h+g*a[c+1];l===0?r.moveTo(b,v):r.lineTo(b,v),r.arcTo(d,h,y,m,u)}r.closePath()};Fu.drawRoundRectanglePath=function(r,e,t,n,i){var a=n/2,o=i/2,s=Rh(n,i);r.beginPath&&r.beginPath(),r.moveTo(e,t-o),r.arcTo(e+a,t-o,e+a,t,s),r.arcTo(e+a,t+o,e,t+o,s),r.arcTo(e-a,t+o,e-a,t,s),r.arcTo(e-a,t-o,e,t-o,s),r.lineTo(e,t-o),r.closePath()};Fu.drawBottomRoundRectanglePath=function(r,e,t,n,i){var a=n/2,o=i/2,s=Rh(n,i);r.beginPath&&r.beginPath(),r.moveTo(e,t-o),r.lineTo(e+a,t-o),r.lineTo(e+a,t),r.arcTo(e+a,t+o,e,t+o,s),r.arcTo(e-a,t+o,e-a,t,s),r.lineTo(e-a,t-o),r.lineTo(e,t-o),r.closePath()};Fu.drawCutRectanglePath=function(r,e,t,n,i){var a=n/2,o=i/2,s=Ik();r.beginPath&&r.beginPath(),r.moveTo(e-a+s,t-o),r.lineTo(e+a-s,t-o),r.lineTo(e+a,t-o+s),r.lineTo(e+a,t+o-s),r.lineTo(e+a-s,t+o),r.lineTo(e-a+s,t+o),r.lineTo(e-a,t+o-s),r.lineTo(e-a,t-o+s),r.closePath()};Fu.drawBarrelPath=function(r,e,t,n,i){var a=n/2,o=i/2,s=e-a,u=e+a,l=t-o,f=t+o,c=u2(n,i),d=c.widthOffset,h=c.heightOffset,p=c.ctrlPtOffsetPct*d;r.beginPath&&r.beginPath(),r.moveTo(s,l+h),r.lineTo(s,f-h),r.quadraticCurveTo(s+p,f,s+d,f),r.lineTo(u-d,f),r.quadraticCurveTo(u-p,f,u,f-h),r.lineTo(u,l+h),r.quadraticCurveTo(u-p,l,u-d,l),r.lineTo(s+d,l),r.quadraticCurveTo(s+p,l,s,l+h),r.closePath()};var ax=Math.sin(0),ox=Math.cos(0),g2={},m2={},LL=Math.PI/40;for(var lf=0*Math.PI;lf<2*Math.PI;lf+=LL)g2[lf]=Math.sin(lf),m2[lf]=Math.cos(lf);Fu.drawEllipsePath=function(r,e,t,n,i){if(r.beginPath&&r.beginPath(),r.ellipse)r.ellipse(e,t,n/2,i/2,0,0,2*Math.PI);else for(var a,o,s=n/2,u=i/2,l=0*Math.PI;l<2*Math.PI;l+=LL)a=e-s*g2[l]*ax+s*m2[l]*ox,o=t+u*m2[l]*ax+u*g2[l]*ox,l===0?r.moveTo(a,o):r.lineTo(a,o);r.closePath()};var Gh={};Gh.createBuffer=function(r,e){var t=document.createElement("canvas");return t.width=r,t.height=e,[t,t.getContext("2d")]};Gh.bufferCanvasImage=function(r){var e=this.cy,t=e.mutableElements(),n=t.boundingBox(),i=this.findContainerClientCoords(),a=r.full?Math.ceil(n.w):i[2],o=r.full?Math.ceil(n.h):i[3],s=Ht(r.maxWidth)||Ht(r.maxHeight),u=this.getPixelRatio(),l=1;if(r.scale!==void 0)a*=r.scale,o*=r.scale,l=r.scale;else if(s){var f=1/0,c=1/0;Ht(r.maxWidth)&&(f=l*r.maxWidth/a),Ht(r.maxHeight)&&(c=l*r.maxHeight/o),l=Math.min(f,c),a*=l,o*=l}s||(a*=u,o*=u,l*=u);var d=document.createElement("canvas");d.width=a,d.height=o,d.style.width=a+"px",d.style.height=o+"px";var h=d.getContext("2d");if(a>0&&o>0){h.clearRect(0,0,a,o),h.globalCompositeOperation="source-over";var p=this.getCachedZSortedEles();if(r.full)h.translate(-n.x1*l,-n.y1*l),h.scale(l,l),this.drawElements(h,p),h.scale(1/l,1/l),h.translate(n.x1*l,n.y1*l);else{var g=e.pan(),b={x:g.x*l,y:g.y*l};l*=e.zoom(),h.translate(b.x,b.y),h.scale(l,l),this.drawElements(h,p),h.scale(1/l,1/l),h.translate(-b.x,-b.y)}r.bg&&(h.globalCompositeOperation="destination-over",h.fillStyle=r.bg,h.rect(0,0,a,o),h.fill())}return d};function q7(r,e){for(var t=atob(r),n=new ArrayBuffer(t.length),i=new Uint8Array(n),a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return new Blob([n],{type:e})}function sx(r){var e=r.indexOf(",");return r.substr(e+1)}function NL(r,e,t){var n=function(){return e.toDataURL(t,r.quality)};switch(r.output){case"blob-promise":return new Jf(function(i,a){try{e.toBlob(function(o){o!=null?i(o):a(new Error("`canvas.toBlob()` sent a null value in its callback"))},t,r.quality)}catch(o){a(o)}});case"blob":return q7(sx(n()),t);case"base64":return sx(n());case"base64uri":default:return n()}}Gh.png=function(r){return NL(r,this.bufferCanvasImage(r),"image/png")};Gh.jpg=function(r){return NL(r,this.bufferCanvasImage(r),"image/jpeg")};var PL={};PL.nodeShapeImpl=function(r,e,t,n,i,a,o){switch(r){case"ellipse":return this.drawEllipsePath(e,t,n,i,a);case"polygon":return this.drawPolygonPath(e,t,n,i,a,o);case"round-polygon":return this.drawRoundPolygonPath(e,t,n,i,a,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,t,n,i,a);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,t,n,i,a);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,t,n,i,a);case"barrel":return this.drawBarrelPath(e,t,n,i,a)}};var G7=ML,ln=ML.prototype;ln.CANVAS_LAYERS=3;ln.SELECT_BOX=0;ln.DRAG=1;ln.NODE=2;ln.BUFFER_COUNT=3;ln.TEXTURE_BUFFER=0;ln.MOTIONBLUR_BUFFER_NODE=1;ln.MOTIONBLUR_BUFFER_DRAG=2;function ML(r){var e=this;e.data={canvases:new Array(ln.CANVAS_LAYERS),contexts:new Array(ln.CANVAS_LAYERS),canvasNeedsRedraw:new Array(ln.CANVAS_LAYERS),bufferCanvases:new Array(ln.BUFFER_COUNT),bufferContexts:new Array(ln.CANVAS_LAYERS)};var t="-webkit-tap-highlight-color",n="rgba(0,0,0,0)";e.data.canvasContainer=document.createElement("div");var i=e.data.canvasContainer.style;e.data.canvasContainer.style[t]=n,i.position="relative",i.zIndex="0",i.overflow="hidden";var a=r.cy.container();a.appendChild(e.data.canvasContainer),a.style[t]=n;var o={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};x6()&&(o["-ms-touch-action"]="none",o["touch-action"]="none");for(var s=0;s<ln.CANVAS_LAYERS;s++){var u=e.data.canvases[s]=document.createElement("canvas");e.data.contexts[s]=u.getContext("2d"),Object.keys(o).forEach(function(W){u.style[W]=o[W]}),u.style.position="absolute",u.setAttribute("data-id","layer"+s),u.style.zIndex=String(ln.CANVAS_LAYERS-s),e.data.canvasContainer.appendChild(u),e.data.canvasNeedsRedraw[s]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[ln.NODE].setAttribute("data-id","layer"+ln.NODE+"-node"),e.data.canvases[ln.SELECT_BOX].setAttribute("data-id","layer"+ln.SELECT_BOX+"-selectbox"),e.data.canvases[ln.DRAG].setAttribute("data-id","layer"+ln.DRAG+"-drag");for(var s=0;s<ln.BUFFER_COUNT;s++)e.data.bufferCanvases[s]=document.createElement("canvas"),e.data.bufferContexts[s]=e.data.bufferCanvases[s].getContext("2d"),e.data.bufferCanvases[s].style.position="absolute",e.data.bufferCanvases[s].setAttribute("data-id","buffer"+s),e.data.bufferCanvases[s].style.zIndex=String(-s-1),e.data.bufferCanvases[s].style.visibility="hidden";e.pathsEnabled=!0;var l=Ia(),f=function(X){return{x:(X.x1+X.x2)/2,y:(X.y1+X.y2)/2}},c=function(X){return{x:-X.w/2,y:-X.h/2}},d=function(X){var te=X[0]._private,ne=te.oldBackgroundTimestamp===te.backgroundTimestamp;return!ne},h=function(X){return X[0]._private.nodeKey},p=function(X){return X[0]._private.labelStyleKey},g=function(X){return X[0]._private.sourceLabelStyleKey},b=function(X){return X[0]._private.targetLabelStyleKey},v=function(X,te,ne,he,ve){return e.drawElement(X,te,ne,!1,!1,ve)},y=function(X,te,ne,he,ve){return e.drawElementText(X,te,ne,he,"main",ve)},m=function(X,te,ne,he,ve){return e.drawElementText(X,te,ne,he,"source",ve)},w=function(X,te,ne,he,ve){return e.drawElementText(X,te,ne,he,"target",ve)},S=function(X){return X.boundingBox(),X[0]._private.bodyBounds},A=function(X){return X.boundingBox(),X[0]._private.labelBounds.main||l},_=function(X){return X.boundingBox(),X[0]._private.labelBounds.source||l},E=function(X){return X.boundingBox(),X[0]._private.labelBounds.target||l},k=function(X,te){return te},M=function(X){return f(S(X))},T=function(X,te,ne){var he=X?X+"-":"";return{x:te.x+ne.pstyle(he+"text-margin-x").pfValue,y:te.y+ne.pstyle(he+"text-margin-y").pfValue}},C=function(X,te,ne){var he=X[0]._private.rscratch;return{x:he[te],y:he[ne]}},R=function(X){return T("",C(X,"labelX","labelY"),X)},x=function(X){return T("source",C(X,"sourceLabelX","sourceLabelY"),X)},B=function(X){return T("target",C(X,"targetLabelX","targetLabelY"),X)},D=function(X){return c(S(X))},O=function(X){return c(_(X))},G=function(X){return c(E(X))},V=function(X){var te=A(X),ne=c(A(X));if(X.isNode()){switch(X.pstyle("text-halign").value){case"left":ne.x=-te.w;break;case"right":ne.x=0;break}switch(X.pstyle("text-valign").value){case"top":ne.y=-te.h;break;case"bottom":ne.y=0;break}}return ne},I=e.data.eleTxrCache=new Xc(e,{getKey:h,doesEleInvalidateKey:d,drawElement:v,getBoundingBox:S,getRotationPoint:M,getRotationOffset:D,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),z=e.data.lblTxrCache=new Xc(e,{getKey:p,drawElement:y,getBoundingBox:A,getRotationPoint:R,getRotationOffset:V,isVisible:k}),P=e.data.slbTxrCache=new Xc(e,{getKey:g,drawElement:m,getBoundingBox:_,getRotationPoint:x,getRotationOffset:O,isVisible:k}),q=e.data.tlbTxrCache=new Xc(e,{getKey:b,drawElement:w,getBoundingBox:E,getRotationPoint:B,getRotationOffset:G,isVisible:k}),F=e.data.lyrTxrCache=new CL(e);e.onUpdateEleCalcs(function(X,te){I.invalidateElements(te),z.invalidateElements(te),P.invalidateElements(te),q.invalidateElements(te),F.invalidateElements(te);for(var ne=0;ne<te.length;ne++){var he=te[ne]._private;he.oldBackgroundTimestamp=he.backgroundTimestamp}});var U=function(X){for(var te=0;te<X.length;te++)F.enqueueElementRefinement(X[te].ele)};I.onDequeue(U),z.onDequeue(U),P.onDequeue(U),q.onDequeue(U)}ln.redrawHint=function(r,e){var t=this;switch(r){case"eles":t.data.canvasNeedsRedraw[ln.NODE]=e;break;case"drag":t.data.canvasNeedsRedraw[ln.DRAG]=e;break;case"select":t.data.canvasNeedsRedraw[ln.SELECT_BOX]=e;break}};var $7=typeof Path2D<"u";ln.path2dEnabled=function(r){if(r===void 0)return this.pathsEnabled;this.pathsEnabled=!!r};ln.usePaths=function(){return $7&&this.pathsEnabled};ln.setImgSmoothing=function(r,e){r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled=e:(r.webkitImageSmoothingEnabled=e,r.mozImageSmoothingEnabled=e,r.msImageSmoothingEnabled=e)};ln.getImgSmoothing=function(r){return r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled:r.webkitImageSmoothingEnabled||r.mozImageSmoothingEnabled||r.msImageSmoothingEnabled};ln.makeOffscreenCanvas=function(r,e){var t;return(typeof OffscreenCanvas>"u"?"undefined":Pi(OffscreenCanvas))!=="undefined"?t=new OffscreenCanvas(r,e):(t=document.createElement("canvas"),t.width=r,t.height=e),t};[AL,us,Fs,bw,Pl,ic,Va,Fu,Gh,PL].forEach(function(r){Sr(ln,r)});var U7=[{name:"null",impl:gL},{name:"base",impl:SL},{name:"canvas",impl:G7}],H7=[{type:"layout",extensions:ZB},{type:"renderer",extensions:U7}],OL={},DL={};function IL(r,e,t){var n=t,i=function(E){vn("Can not register `"+e+"` for `"+r+"` since `"+E+"` already exists in the prototype and can not be overridden")};if(r==="core"){if(wh.prototype[e])return i(e);wh.prototype[e]=t}else if(r==="collection"){if(Xi.prototype[e])return i(e);Xi.prototype[e]=t}else if(r==="layout"){for(var a=function(E){this.options=E,t.call(this,E),on(this._private)||(this._private={}),this._private.cy=E.cy,this._private.listeners=[],this.createEmitter()},o=a.prototype=Object.create(t.prototype),s=[],u=0;u<s.length;u++){var l=s[u];o[l]=o[l]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var f=t.prototype.stop;o.stop=function(){var _=this.options;if(_&&_.animate){var E=this.animations;if(E)for(var k=0;k<E.length;k++)E[k].stop()}return f?f.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var c=function(E){return E._private.cy},d={addEventFields:function(E,k){k.layout=E,k.cy=c(E),k.target=E},bubble:function(){return!0},parent:function(E){return c(E)}};Sr(o,{createEmitter:function(){return this._private.emitter=new ev(d,this),this},emitter:function(){return this._private.emitter},on:function(E,k){return this.emitter().on(E,k),this},one:function(E,k){return this.emitter().one(E,k),this},once:function(E,k){return this.emitter().one(E,k),this},removeListener:function(E,k){return this.emitter().removeListener(E,k),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(E,k){return this.emitter().emit(E,k),this}}),pn.eventAliasesOn(o),n=a}else if(r==="renderer"&&e!=="null"&&e!=="base"){var h=RL("renderer","base"),p=h.prototype,g=t,b=t.prototype,v=function(){h.apply(this,arguments),g.apply(this,arguments)},y=v.prototype;for(var m in p){var w=p[m],S=b[m]!=null;if(S)return i(m);y[m]=w}for(var A in b)y[A]=b[A];p.clientFunctions.forEach(function(_){y[_]=y[_]||function(){ui("Renderer does not implement `renderer."+_+"()` on its prototype")}}),n=v}else if(r==="__proto__"||r==="constructor"||r==="prototype")return ui(r+" is an illegal type to be registered, possibly lead to prototype pollutions");return yk({map:OL,keys:[r,e],value:n})}function RL(r,e){return bk({map:OL,keys:[r,e]})}function j7(r,e,t,n,i){return yk({map:DL,keys:[r,e,t,n],value:i})}function V7(r,e,t,n){return bk({map:DL,keys:[r,e,t,n]})}var y2=function(){if(arguments.length===2)return RL.apply(null,arguments);if(arguments.length===3)return IL.apply(null,arguments);if(arguments.length===4)return V7.apply(null,arguments);if(arguments.length===5)return j7.apply(null,arguments);ui("Invalid extension access syntax")};wh.prototype.extension=y2;H7.forEach(function(r){r.extensions.forEach(function(e){IL(r.type,e.name,e.impl)})});var FL=function r(){if(!(this instanceof r))return new r;this.length=0},xl=FL.prototype;xl.instanceString=function(){return"stylesheet"};xl.selector=function(r){var e=this.length++;return this[e]={selector:r,properties:[]},this};xl.css=function(r,e){var t=this.length-1;if(pr(r))this[t].properties.push({name:r,value:e});else if(on(r))for(var n=r,i=Object.keys(n),a=0;a<i.length;a++){var o=i[a],s=n[o];if(s!=null){var u=aa.properties[o]||aa.properties[Xp(o)];if(u!=null){var l=u.name,f=s;this[t].properties.push({name:l,value:f})}}}return this};xl.style=xl.css;xl.generateStyle=function(r){var e=new aa(r);return this.appendToStyle(e)};xl.appendToStyle=function(r){for(var e=0;e<this.length;e++){var t=this[e],n=t.selector,i=t.properties;r.selector(n);for(var a=0;a<i.length;a++){var o=i[a];r.css(o.name,o.value)}}return r};var W7="3.25.0",Sl=function(e){if(e===void 0&&(e={}),on(e))return new wh(e);if(pr(e))return y2.apply(y2,arguments)};Sl.use=function(r){var e=Array.prototype.slice.call(arguments,1);return e.unshift(Sl),r.apply(null,e),this};Sl.warnings=function(r){return Ck(r)};Sl.version=W7;Sl.stylesheet=Sl.Stylesheet=FL;var Y7=Sl;const ir=qi(Y7);var BL={exports:{}},ux={},lx;function X7(){return lx||(lx=1,Object.extend=function(r){r=r||{};for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Array.isArray(t[n])?r[n]=t[n].slice():typeof t[n]=="object"?r[n]=Object.extend(r[n],t[n]):r[n]=t[n])}return r}),ux}var Jg,fx;function K7(){return fx||(fx=1,Jg=function(r,e,t){var n={};n.changeOptions=function(a){e=a.gridSpacing,t=a.snapToGridCenter?.5:0};var i=function(a){return a.scratch("_gridGuide")||a.scratch("_gridGuide",{}),a.scratch("_gridGuide")};return n.snapPos=function(a){var o=t?Math.floor(a.x/e):Math.round(a.x/e),s=t?Math.floor(a.y/e):Math.round(a.y/e),u={x:(o+t)*e,y:(s+t)*e};return u},n.snapNode=function(a){var o=a.position(),s=n.snapPos(o);a.position(s)},n.snapNodesTopDown=function(a){r.startBatch(),a.union(a.descendants()).filter(":childless").positions(function(o,s){typeof o=="number"&&(o=s);var u=o.position();return n.snapPos(u)}),r.endBatch()},n.onFreeNode=function(a){var o,s=a.target||a.cyTarget;s.selected()?o=a.cy.$(":selected"):o=s,n.snapNodesTopDown(o)},n.recoverSnapNode=function(a){var o=i(a).snap;o&&a.position(o.oldPos)},n}),Jg}var em,cx;function Z7(){return cx||(cx=1,em=function(r,e){var t={},n,i,a,o;t.onTapStartNode=function(f){if(!(f.originalEvent.altKey||f.originalEvent.ctrlKey||f.originalEvent.metaKey||f.originalEvent.shiftKey)){var c=f.target||f.cyTarget;c.selected()?i=f.cy.$(":selected"):i=c,a=f.position||f.cyPosition,c.grabbable()&&!c.locked()&&(n=c,n.lock(),r.on("tapdrag",l),r.on("tapend",s))}};var s=function(f){r.off("tapdrag",l),r.off("tapend",s),n.unlock(),f.preventDefault()},u=function(){return{x:o.x-a.x,y:o.y-a.y}},l=function(f){n.position(),o=f.position||f.cyPosition,o=e.snapPos(o);var c=u();if(c.x!=0||c.y!=0){n.unlock();var d=i.union(i.descendants());d.filter(":childless").positions(function(h,p){typeof h=="number"&&(h=p);var g=h.position();return e.snapPos({x:g.x+c.x,y:g.y+c.y})}),a=o,n.lock(),n.trigger("drag")}};return t}),em}var tm,hx;function Q7(){return hx||(hx=1,tm=function(r,e,t){var n=r,i=function(h){n=h},a=function(h){var p=h.getBoundingClientRect();return{top:p.top+document.documentElement.scrollTop,left:p.left+document.documentElement.scrollLeft}},o=document.createElement("canvas"),s=e.container(),u=o.getContext("2d");s.appendChild(o);var l=function(){o.height=0,o.width=0,o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.zIndex=n.gridStackOrder};l();var f=function(){var h=e.zoom(),p=e.width(),g=e.height(),b=n.gridSpacing*h,v=e.pan(),y=v.x%b,m=v.y%b;u.strokeStyle=n.gridColor,u.lineWidth=n.lineWidth;var w='	<svg width="'+p+'" height="'+g+`" xmlns="http://www.w3.org/2000/svg">
	            <defs>
	                <pattern id="horizontalLines" width="`+b+'" height="'+b+`" patternUnits="userSpaceOnUse">
	                    <path d="M `+b+' 0 L 0 0 0 0" fill="none" stroke="'+n.gridColor+'" stroke-width="'+n.lineWidth+`" />
	                </pattern>
	                <pattern id="verticalLines" width="`+b+'" height="'+b+`" patternUnits="userSpaceOnUse">
	                    <path d="M 0 0 L 0 0 0 `+b+'" fill="none" stroke="'+n.gridColor+'" stroke-width="'+n.lineWidth+`" />
	                </pattern>
	            </defs>
	            <rect width="100%" height="100%" fill="url(#horizontalLines)" transform="translate(0, `+m+`)" />
	            <rect width="100%" height="100%" fill="url(#verticalLines)" transform="translate(`+y+`, 0)" />
	        </svg>
`,S=new Image;w=encodeURIComponent(w),S.onload=function(){c(),u.drawImage(S,0,0)},S.src="data:image/svg+xml,"+w},c=function(){var h=e.width(),p=e.height();u.clearRect(0,0,h,p)},d=t(function(){o.height=e.height(),o.width=e.width(),o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.zIndex=n.gridStackOrder,setTimeout(function(){o.height=e.height(),o.width=e.width();var h=a(o),p=a(s);o.style.top=-(h.top-p.top),o.style.left=-(h.left-p.left),f()},0)},250);return{initCanvas:d,resizeCanvas:d,resetCanvas:l,clearCanvas:c,drawGrid:f,changeOptions:i,sizeCanvas:f}}),tm}var rm,dx;function J7(){return dx||(dx=1,rm=function(r){var e=function(a){r=Number(a.gridSpacing)},t=function(a){return a.scratch("_gridGuide")||a.scratch("_gridGuide",{}),a.scratch("_gridGuide")};function n(a){var o=a.width(),s=a.height(),u=Math.round((o-r)/(r*2))*(r*2),l=Math.round((s-r)/(r*2))*(r*2);u=u>0?u+r:r,l=l>0?l+r:r,(o!=u||s!=l)&&(a.style({width:u,height:l}),t(a).resize={oldWidth:o,oldHeight:s})}function i(a){var o=t(a).resize;o&&a.style({width:o.oldWidth,height:o.oldHeight})}return{resizeNode:n,recoverNodeDimensions:i,changeOptions:e}}),rm}var nm,px;function ez(){return px||(px=1,nm=function(r,e,t,n,i,a,o,s){var u=function(F){return function(U){F(U)}},l={snapToGridDuringDrag:new u(p),resize:new u(v),snapToGridOnRelease:new u(S),drawGrid:new u(E),guidelines:new u(D),parentPadding:new u(V)};function f(F,U){return function(W){var X=W.target||W.cyTarget;(!X.is(":parent")||U)&&F(X)}}function c(F){return function(){r.nodes().not(":parent").each(function(U,W){typeof U=="number"&&(U=W),F(U)})}}function d(F){return function(){r.nodes().each(function(U,W){typeof U=="number"&&(U=W),F(U)})}}function h(F){return F?"on":"off"}function p(F){r[h(F)]("tapstart","node",n.onTapStartNode)}var g=c(t.resizeNode);f(t.resizeNode);var b=c(t.recoverNodeDimensions);function v(F){r[h(F)]("ready",g),F?g():b()}var y=d(e.snapNodesTopDown),m=d(e.recoverSnapNode),w=f(e.snapNode,!0);function S(F){r[h(F)]("add","node",w),r[h(F)]("ready",y),r[h(F)]("free","node",e.onFreeNode),F?y():m()}var A=function(){z.zoomDash&&i.drawGrid()},_=function(){z.panGrid&&i.drawGrid()};function E(F){r[h(F)]("zoom",A),r[h(F)]("pan",_),F?(i.initCanvas(),r.on("resize",i.resizeCanvas)):(i.clearCanvas(),i.resetCanvas(),r.off("resize",i.resizeCanvas))}var k=null,M=function(F){var U=F.target||F.cyTarget,W=U.selected()?F.cy.$(":selected"):U;k=a.getTopMostNodes(W.nodes()),a.lines.init(k)},T=function(F){this.id()==k.id()&&(a.lines.update(k),z.snapToAlignmentLocationDuringDrag&&a.lines.snapToAlignmentLocation(k))},C=function(F){z.snapToAlignmentLocationOnRelease&&a.lines.snapToAlignmentLocation(k),a.lines.destroy(),k=null},R=function(F){a.lines.resize()},x=function(F){a.getMousePos(F)},B=function(F){k&&(a.setMousePos(r.pan()),a.lines.init(k))};function D(F){F?(a.resizeCanvas(),r.on("tapstart","node",x),r.on("grab",M),r.on("pan",B),r.on("drag","node",T),r.on("free",C),window.addEventListener("resize",R)):(r.off("tapstart","node",x),r.off("grab",M),r.off("pan",B),r.off("drag","node",T),r.off("free",C),a.resetCanvas(),window.removeEventListener("resize",R))}var O=function(F){o.setPaddingOfParent(r.nodes(":parent"),F)},G=function(F){o.setPaddingOfParent(F,!0)};function V(F){O(F),r[h(F)]("ready",O),r[h(F)]("add","node:parent",f(G,!0))}var I={},z,P={drawGrid:["gridSpacing","zoomDash","panGrid","gridStackOrder","gridColor","lineWidth","lineDash"],guidelines:["gridSpacing","guidelinesStackOrder","guidelinesTolerance","guidelinesStyle","distributionGuidelines","range","minDistRange","geometricGuidelineRange"],resize:["gridSpacing"],parentPadding:["gridSpacing","parentSpacing"],snapToGridOnRelease:["gridSpacing","snapToGridCenter"]};function q(F){z=Object.extend({},F),F.guidelines=F.initPosAlignment||F.distributionGuidelines||F.geometricGuideline;for(var U in F)if(I[U]!=F[U])if(l.hasOwnProperty(U))l[U](F[U]);else for(var W in P){var X=P[W];X.indexOf(U)>=0&&(W=="drawGrid"&&(i.changeOptions(F),F.drawGrid&&i.resizeCanvas()),W=="snapToGridOnRelease"&&(e.changeOptions(F),F.snapToGridOnRelease&&y()),W=="guidelines"&&a.changeOptions(F),W=="resize"&&(t.changeOptions(F),F.resize&&g()),W=="parentPadding"&&o.changeOptions(F))}I=Object.extend({},I,F)}return{init:q,syncWithOptions:q}}),nm}var im,vx;function tz(){if(vx)return im;vx=1,im=b;var r=0,e=1;function t(v,y,m,w,S,A){this._color=v,this.key=y,this.value=m,this.left=w,this.right=S,this._count=A}function n(v){return new t(v._color,v.key,v.value,v.left,v.right,v._count)}function i(v,y){return new t(v,y.key,y.value,y.left,y.right,y._count)}function a(v){v._count=1+(v.left?v.left._count:0)+(v.right?v.right._count:0)}function o(v,y){this._compare=v,this.root=y}var s=o.prototype;Object.defineProperty(s,"keys",{get:function(){var v=[];return this.forEach(function(y,m){v.push(y)}),v}}),Object.defineProperty(s,"values",{get:function(){var v=[];return this.forEach(function(y,m){v.push(m)}),v}}),Object.defineProperty(s,"length",{get:function(){return this.root?this.root._count:0}}),s.insert=function(v,y){for(var m=this._compare,w=this.root,S=[],A=[];w;){var _=m(v,w.key);S.push(w),A.push(_),_<=0?w=w.left:w=w.right}S.push(new t(r,v,y,null,null,1));for(var E=S.length-2;E>=0;--E){var w=S[E];A[E]<=0?S[E]=new t(w._color,w.key,w.value,S[E+1],w.right,w._count+1):S[E]=new t(w._color,w.key,w.value,w.left,S[E+1],w._count+1)}for(var E=S.length-1;E>1;--E){var k=S[E-1],w=S[E];if(k._color===e||w._color===e)break;var M=S[E-2];if(M.left===k)if(k.left===w){var T=M.right;if(T&&T._color===r)k._color=e,M.right=i(e,T),M._color=r,E-=1;else{if(M._color=r,M.left=k.right,k._color=e,k.right=M,S[E-2]=k,S[E-1]=w,a(M),a(k),E>=3){var C=S[E-3];C.left===M?C.left=k:C.right=k}break}}else{var T=M.right;if(T&&T._color===r)k._color=e,M.right=i(e,T),M._color=r,E-=1;else{if(k.right=w.left,M._color=r,M.left=w.right,w._color=e,w.left=k,w.right=M,S[E-2]=w,S[E-1]=k,a(M),a(k),a(w),E>=3){var C=S[E-3];C.left===M?C.left=w:C.right=w}break}}else if(k.right===w){var T=M.left;if(T&&T._color===r)k._color=e,M.left=i(e,T),M._color=r,E-=1;else{if(M._color=r,M.right=k.left,k._color=e,k.left=M,S[E-2]=k,S[E-1]=w,a(M),a(k),E>=3){var C=S[E-3];C.right===M?C.right=k:C.left=k}break}}else{var T=M.left;if(T&&T._color===r)k._color=e,M.left=i(e,T),M._color=r,E-=1;else{if(k.left=w.right,M._color=r,M.right=w.left,w._color=e,w.right=k,w.left=M,S[E-2]=w,S[E-1]=k,a(M),a(k),a(w),E>=3){var C=S[E-3];C.right===M?C.right=w:C.left=w}break}}}return S[0]._color=e,new o(m,S[0])};function u(v,y){if(y.left){var m=u(v,y.left);if(m)return m}var m=v(y.key,y.value);if(m)return m;if(y.right)return u(v,y.right)}function l(v,y,m,w){var S=y(v,w.key);if(S<=0){if(w.left){var A=l(v,y,m,w.left);if(A)return A}var A=m(w.key,w.value);if(A)return A}if(w.right)return l(v,y,m,w.right)}function f(v,y,m,w,S){var A=m(v,S.key),_=m(y,S.key),E;if(A<=0&&(S.left&&(E=f(v,y,m,w,S.left),E)||_>0&&(E=w(S.key,S.value),E)))return E;if(_>0&&S.right)return f(v,y,m,w,S.right)}s.forEach=function(y,m,w){if(this.root)switch(arguments.length){case 1:return u(y,this.root);case 2:return l(m,this._compare,y,this.root);case 3:return this._compare(m,w)>=0?void 0:f(m,w,this._compare,y,this.root)}},Object.defineProperty(s,"begin",{get:function(){for(var v=[],y=this.root;y;)v.push(y),y=y.left;return new c(this,v)}}),Object.defineProperty(s,"end",{get:function(){for(var v=[],y=this.root;y;)v.push(y),y=y.right;return new c(this,v)}}),s.at=function(v){if(v<0)return new c(this,[]);for(var y=this.root,m=[];;){if(m.push(y),y.left){if(v<y.left._count){y=y.left;continue}v-=y.left._count}if(!v)return new c(this,m);if(v-=1,y.right){if(v>=y.right._count)break;y=y.right}else break}return new c(this,[])},s.ge=function(v){for(var y=this._compare,m=this.root,w=[],S=0;m;){var A=y(v,m.key);w.push(m),A<=0&&(S=w.length),A<=0?m=m.left:m=m.right}return w.length=S,new c(this,w)},s.gt=function(v){for(var y=this._compare,m=this.root,w=[],S=0;m;){var A=y(v,m.key);w.push(m),A<0&&(S=w.length),A<0?m=m.left:m=m.right}return w.length=S,new c(this,w)},s.lt=function(v){for(var y=this._compare,m=this.root,w=[],S=0;m;){var A=y(v,m.key);w.push(m),A>0&&(S=w.length),A<=0?m=m.left:m=m.right}return w.length=S,new c(this,w)},s.le=function(v){for(var y=this._compare,m=this.root,w=[],S=0;m;){var A=y(v,m.key);w.push(m),A>=0&&(S=w.length),A<0?m=m.left:m=m.right}return w.length=S,new c(this,w)},s.find=function(v){for(var y=this._compare,m=this.root,w=[];m;){var S=y(v,m.key);if(w.push(m),S===0)return new c(this,w);S<=0?m=m.left:m=m.right}return new c(this,[])},s.remove=function(v){var y=this.find(v);return y?y.remove():this},s.get=function(v){for(var y=this._compare,m=this.root;m;){var w=y(v,m.key);if(w===0)return m.value;w<=0?m=m.left:m=m.right}};function c(v,y){this.tree=v,this._stack=y}var d=c.prototype;Object.defineProperty(d,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(d,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),d.clone=function(){return new c(this.tree,this._stack.slice())};function h(v,y){v.key=y.key,v.value=y.value,v.left=y.left,v.right=y.right,v._color=y._color,v._count=y._count}function p(v){for(var y,m,w,S,A=v.length-1;A>=0;--A){if(y=v[A],A===0){y._color=e;return}if(m=v[A-1],m.left===y){if(w=m.right,w.right&&w.right._color===r){if(w=m.right=n(w),S=w.right=n(w.right),m.right=w.left,w.left=m,w.right=S,w._color=m._color,y._color=e,m._color=e,S._color=e,a(m),a(w),A>1){var _=v[A-2];_.left===m?_.left=w:_.right=w}v[A-1]=w;return}else if(w.left&&w.left._color===r){if(w=m.right=n(w),S=w.left=n(w.left),m.right=S.left,w.left=S.right,S.left=m,S.right=w,S._color=m._color,m._color=e,w._color=e,y._color=e,a(m),a(w),a(S),A>1){var _=v[A-2];_.left===m?_.left=S:_.right=S}v[A-1]=S;return}if(w._color===e)if(m._color===r){m._color=e,m.right=i(r,w);return}else{m.right=i(r,w);continue}else{if(w=n(w),m.right=w.left,w.left=m,w._color=m._color,m._color=r,a(m),a(w),A>1){var _=v[A-2];_.left===m?_.left=w:_.right=w}v[A-1]=w,v[A]=m,A+1<v.length?v[A+1]=y:v.push(y),A=A+2}}else{if(w=m.left,w.left&&w.left._color===r){if(w=m.left=n(w),S=w.left=n(w.left),m.left=w.right,w.right=m,w.left=S,w._color=m._color,y._color=e,m._color=e,S._color=e,a(m),a(w),A>1){var _=v[A-2];_.right===m?_.right=w:_.left=w}v[A-1]=w;return}else if(w.right&&w.right._color===r){if(w=m.left=n(w),S=w.right=n(w.right),m.left=S.right,w.right=S.left,S.right=m,S.left=w,S._color=m._color,m._color=e,w._color=e,y._color=e,a(m),a(w),a(S),A>1){var _=v[A-2];_.right===m?_.right=S:_.left=S}v[A-1]=S;return}if(w._color===e)if(m._color===r){m._color=e,m.left=i(r,w);return}else{m.left=i(r,w);continue}else{if(w=n(w),m.left=w.right,w.right=m,w._color=m._color,m._color=r,a(m),a(w),A>1){var _=v[A-2];_.right===m?_.right=w:_.left=w}v[A-1]=w,v[A]=m,A+1<v.length?v[A+1]=y:v.push(y),A=A+2}}}}d.remove=function(){var v=this._stack;if(v.length===0)return this.tree;var y=new Array(v.length),m=v[v.length-1];y[y.length-1]=new t(m._color,m.key,m.value,m.left,m.right,m._count);for(var w=v.length-2;w>=0;--w){var m=v[w];m.left===v[w+1]?y[w]=new t(m._color,m.key,m.value,y[w+1],m.right,m._count):y[w]=new t(m._color,m.key,m.value,m.left,y[w+1],m._count)}if(m=y[y.length-1],m.left&&m.right){var S=y.length;for(m=m.left;m.right;)y.push(m),m=m.right;var A=y[S-1];y.push(new t(m._color,A.key,A.value,m.left,m.right,m._count)),y[S-1].key=m.key,y[S-1].value=m.value;for(var w=y.length-2;w>=S;--w)m=y[w],y[w]=new t(m._color,m.key,m.value,m.left,y[w+1],m._count);y[S-1].left=y[S]}if(m=y[y.length-1],m._color===r){var _=y[y.length-2];_.left===m?_.left=null:_.right===m&&(_.right=null),y.pop();for(var w=0;w<y.length;++w)y[w]._count--;return new o(this.tree._compare,y[0])}else if(m.left||m.right){m.left?h(m,m.left):m.right&&h(m,m.right),m._color=e;for(var w=0;w<y.length-1;++w)y[w]._count--;return new o(this.tree._compare,y[0])}else{if(y.length===1)return new o(this.tree._compare,null);for(var w=0;w<y.length;++w)y[w]._count--;var E=y[y.length-2];p(y),E.left===m?E.left=null:E.right=null}return new o(this.tree._compare,y[0])},Object.defineProperty(d,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(d,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(d,"index",{get:function(){var v=0,y=this._stack;if(y.length===0){var m=this.tree.root;return m?m._count:0}else y[y.length-1].left&&(v=y[y.length-1].left._count);for(var w=y.length-2;w>=0;--w)y[w+1]===y[w].right&&(++v,y[w].left&&(v+=y[w].left._count));return v},enumerable:!0}),d.next=function(){var v=this._stack;if(v.length!==0){var y=v[v.length-1];if(y.right)for(y=y.right;y;)v.push(y),y=y.left;else for(v.pop();v.length>0&&v[v.length-1].right===y;)y=v[v.length-1],v.pop()}},Object.defineProperty(d,"hasNext",{get:function(){var v=this._stack;if(v.length===0)return!1;if(v[v.length-1].right)return!0;for(var y=v.length-1;y>0;--y)if(v[y-1].left===v[y])return!0;return!1}}),d.update=function(v){var y=this._stack;if(y.length===0)throw new Error("Can't update empty node!");var m=new Array(y.length),w=y[y.length-1];m[m.length-1]=new t(w._color,w.key,v,w.left,w.right,w._count);for(var S=y.length-2;S>=0;--S)w=y[S],w.left===y[S+1]?m[S]=new t(w._color,w.key,w.value,m[S+1],w.right,w._count):m[S]=new t(w._color,w.key,w.value,w.left,m[S+1],w._count);return new o(this.tree._compare,m[0])},d.prev=function(){var v=this._stack;if(v.length!==0){var y=v[v.length-1];if(y.left)for(y=y.left;y;)v.push(y),y=y.right;else for(v.pop();v.length>0&&v[v.length-1].left===y;)y=v[v.length-1],v.pop()}},Object.defineProperty(d,"hasPrev",{get:function(){var v=this._stack;if(v.length===0)return!1;if(v[v.length-1].left)return!0;for(var y=v.length-1;y>0;--y)if(v[y-1].right===v[y])return!0;return!1}});function g(v,y){return v<y?-1:v>y?1:0}function b(v){return new o(v||g,null)}return im}var am,gx;function rz(){return gx||(gx=1,am=function(r,e,t){var n=tz(),i=r,a=function(D){i=D,i.guidelinesTolerance==0&&(i.guidelinesTolerance=.001)},o=function(D){var O=D.getBoundingClientRect();return{top:O.top+document.documentElement.scrollTop,left:O.left+document.documentElement.scrollLeft}},s=t(function(){u(),l.height=e.height(),l.width=e.width(),l.style.position="absolute",l.style.top=0,l.style.left=0,l.style.zIndex=i.guidelinesStackOrder,setTimeout(function(){l.height=e.height(),l.width=e.width();var D=o(l),O=o(f);l.style.top=-(D.top-O.top),l.style.left=-(D.left-O.left)},0)},250),u=function(){var D=e.width(),O=e.height();c.clearRect(0,0,D,O)},l=document.createElement("canvas"),f=e.container(),c=l.getContext("2d");f.appendChild(l);var d=function(){l.height=0,l.width=0,l.style.position="absolute",l.style.top=0,l.style.left=0,l.style.zIndex=i.guidelinesStackOrder};d();var h=null,p=null,g,b,v={},y={},m={h:null,v:null};v.getDims=function(D){var O=D.renderedPosition(),G=D.renderedWidth(),V=D.renderedHeight(),I={left:Number(D.renderedStyle("padding-left").replace("px","")),right:Number(D.renderedStyle("padding-right").replace("px","")),top:Number(D.renderedStyle("padding-top").replace("px","")),bottom:Number(D.renderedStyle("padding-bottom").replace("px",""))};return{horizontal:{center:O.x,left:Math.round(O.x-(I.left+G/2)),right:Math.round(O.x+(I.right+G/2))},vertical:{center:O.y,top:Math.round(O.y-(I.top+V/2)),bottom:Math.round(O.y+(I.bottom+V/2))}}},v.init=function(D){h=n(),p=n(),g||(y.x=e.pan("x"),y.y=e.pan("y"),g=D.renderedPosition());var O=e.nodes(":visible");b=D.union(D.ancestors()),b=b.union(D.descendants()),O.not(b).each(function(G,V){typeof G=="number"&&(G=V);var I=v.getDims(G);["left","center","right"].forEach(function(z){var P=I.horizontal[z];p.get(P)?p.get(P).push(G):p=p.insert(P,[G])}),["top","center","bottom"].forEach(function(z){var P=I.vertical[z];h.get(P)?h.get(P).push(G):h=h.insert(P,[G])})}),c.lineWidth=i.lineWidth,v.update(D)},v.destroy=function(){v.clear(),h=null,p=null,g=null,A={},m={h:null,v:null},B&&(B.unlock(),B=void 0)},v.clear=u,v.drawLine=function(D,O,G,V){c.setLineDash(V),c.beginPath(),c.moveTo(D.x,D.y),c.lineTo(O.x,O.y),c.strokeStyle=G,c.stroke()},v.drawArrow=function(D,O){O=="right"?(c.setLineDash([]),c.beginPath(),c.moveTo(D.x-5,D.y-5),c.lineTo(D.x,D.y),c.lineTo(D.x-5,D.y+5),c.stroke()):O=="left"?(c.setLineDash([]),c.beginPath(),c.moveTo(D.x+5,D.y-5),c.lineTo(D.x,D.y),c.lineTo(D.x+5,D.y+5),c.stroke()):O=="top"?(c.setLineDash([]),c.beginPath(),c.moveTo(D.x-5,D.y+5),c.lineTo(D.x,D.y),c.lineTo(D.x+5,D.y+5),c.stroke()):O=="bottom"&&(c.setLineDash([]),c.beginPath(),c.moveTo(D.x-5,D.y-5),c.lineTo(D.x,D.y),c.lineTo(D.x+5,D.y-5),c.stroke())},v.drawCross=function(D){c.setLineDash([]),c.beginPath(),c.moveTo(D.x-5,D.y+5),c.lineTo(D.x+5,D.y-5),c.moveTo(D.x-5,D.y-5),c.lineTo(D.x+5,D.y+5),c.stroke()};var w=function(D,O){for(var G=D[0],V=v.getDims(G)[O].center,I=D[0],z=v.getDims(I)[O].center,P=0;P<D.length;P++){var q=D[P];v.getDims(q)[O].center<V&&(V=v.getDims(q)[O].center,G=q),v.getDims(q)[O].center>z&&(z=v.getDims(q)[O].center,I=q)}if(O=="horizontal")var F=(V+z)/2<v.getDims(D[1])[O].center?z+(.5*I.width()+i.guidelinesStyle.distGuidelineOffset)*e.zoom():V-(.5*G.width()+i.guidelinesStyle.distGuidelineOffset)*e.zoom();else var F=(V+z)/2<v.getDims(D[1])[O].center?z+(.5*I.height()+i.guidelinesStyle.distGuidelineOffset)*e.zoom():V-(.5*G.height()+i.guidelinesStyle.distGuidelineOffset)*e.zoom();return F};v.horizontalDistribution=function(D){var O=null,G=null,V=v.getDims(D),I=V.horizontal.center,z=V.vertical.center;if(p.forEach(function(F,U){for(var W=0;W<U.length;W++){var X=U[W],te=v.getDims(X);if(Math.abs(te.vertical.center-V.vertical.center)<i.guidelinesStyle.range*e.zoom()&&te.horizontal.right==F&&V.horizontal.left-te.horizontal.right>i.guidelinesStyle.minDistRange){var ne=Math.round(2*I)-F;p.forEach(function(he,ve){for(var Ce=0;Ce<ve.length;Ce++){var Le=ve[Ce];Math.abs(v.getDims(Le).vertical.center-z)<i.guidelinesStyle.range*e.zoom()&&Math.abs(ne-v.getDims(Le).horizontal.left)<2*i.guidelinesTolerance&&(O=X,G=Le)}},ne-i.guidelinesTolerance,ne+i.guidelinesTolerance)}}},I-i.guidelinesStyle.range*e.zoom(),I),O){m.hd=I-(v.getDims(G).horizontal.left+v.getDims(O).horizontal.right)/2,(!i.geometricGuideline||m.h==null||Math.abs(m.h)>Math.abs(m.hd))&&(m.h=m.hd);var P=w([O,D,G],"vertical");v.drawLine({x:v.getDims(O).horizontal.right,y:P},{x:V.horizontal.left,y:P},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(G).horizontal.left,y:P},{x:V.horizontal.right,y:P},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(O).horizontal.right,y:P},{x:v.getDims(O).horizontal.right,y:v.getDims(O).vertical.center},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(G).horizontal.left,y:P},{x:v.getDims(G).horizontal.left,y:v.getDims(G).vertical.center},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine),v.drawLine({x:V.horizontal.left,y:P},{x:V.horizontal.left,y:z},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine),v.drawLine({x:V.horizontal.right,y:P},{x:V.horizontal.right,y:z},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine),v.drawArrow({x:v.getDims(O).horizontal.right,y:P},"left"),v.drawArrow({x:V.horizontal.left,y:P},"right"),v.drawArrow({x:V.horizontal.right,y:P},"left"),v.drawArrow({x:v.getDims(G).horizontal.left,y:P},"right")}else{var q=v.horizontalDistributionNext(D,"left");q||v.horizontalDistributionNext(D,"right")}},v.verticalDistribution=function(D){var O=null,G=null,V=v.getDims(D),I=V.horizontal.center,z=V.vertical.center;if(h.forEach(function(F,U){for(var W=0;W<U.length;W++){var X=U[W],te=v.getDims(X);if(Math.abs(te.horizontal.center-V.horizontal.center)<i.guidelinesStyle.range*e.zoom()&&te.vertical.bottom==F&&V.vertical.top-te.vertical.bottom>i.guidelinesStyle.minDistRange){var ne=Math.round(2*z-F);h.forEach(function(he,ve){for(var Ce=0;Ce<ve.length;Ce++){var Le=ve[Ce];Math.abs(v.getDims(Le).horizontal.center-I)<i.guidelinesStyle.range*e.zoom()&&Math.abs(ne-v.getDims(Le).vertical.top)<2*i.guidelinesTolerance&&(O=X,G=Le)}},ne-i.guidelinesTolerance,ne+i.guidelinesTolerance)}}},z-i.guidelinesStyle.range*e.zoom(),z),O){m.vd=z-(v.getDims(O).vertical.bottom+v.getDims(G).vertical.top)/2,(!i.geometricGuideline||m.v==null||Math.abs(m.v)>Math.abs(m.vd))&&(m.v=m.vd);var P=w([O,D,G],"horizontal");v.drawLine({y:v.getDims(O).vertical.bottom,x:P},{y:V.vertical.top,x:P},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine),v.drawLine({y:v.getDims(G).vertical.top,x:P},{y:V.vertical.bottom,x:P},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine),v.drawLine({y:v.getDims(O).vertical.bottom,x:P},{y:v.getDims(O).vertical.bottom,x:v.getDims(O).horizontal.center},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine),v.drawLine({y:v.getDims(G).vertical.top,x:P},{y:v.getDims(G).vertical.top,x:v.getDims(G).horizontal.center},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine),v.drawLine({y:V.vertical.bottom,x:P},{y:V.vertical.bottom,x:I},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine),v.drawLine({y:V.vertical.top,x:P},{y:V.vertical.top,x:I},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine),v.drawArrow({x:P,y:v.getDims(O).vertical.bottom},"top"),v.drawArrow({x:P,y:V.vertical.top},"bottom"),v.drawArrow({x:P,y:v.getDims(G).vertical.top},"bottom"),v.drawArrow({x:P,y:V.vertical.bottom},"top")}else{var q=v.verticalDistributionNext(D,"below");q||v.verticalDistributionNext(D,"above")}},v.searchForLine=function(D,O){var G,V,I,z,P,q,F,U=v.getDims(O)[D],W=Number.MAX_SAFE_INTEGER;D=="horizontal"?(q=p,z="y",P="x",m.h=null):(q=h,z="x",P="y",m.v=null),I=O.renderedPosition(z);for(var X in U)if(G=U[X],q.forEach(function(te,ne){for(var he=0;he<ne.length;he++){var ve=ne[he];if(i.centerToEdgeAlignment||X!="center"&&ve.renderedPosition(P)!=te||X=="center"&&ve.renderedPosition(P)==te){var Ce=Math.abs(I-ve.renderedPosition(z));Ce<W&&Ce<i.guidelinesStyle.geometricGuidelineRange*e.zoom()&&(V=ve,W=Ce,F=te)}}},G-Number(i.guidelinesTolerance),G+Number(i.guidelinesTolerance)),V){W=v.getDims(O)[D][X],D=="horizontal"?(m.h=W-F,v.drawLine({x:W,y:O.renderedPosition("y")},{x:W,y:V.renderedPosition("y")},i.guidelinesStyle.strokeStyle,i.guidelinesStyle.lineDash)):(m.v=W-F,v.drawLine({x:O.renderedPosition("x"),y:W},{x:V.renderedPosition("x"),y:W},i.guidelinesStyle.strokeStyle,i.guidelinesStyle.lineDash));break}},v.horizontalDistributionNext=function(D,O){var G=null,V=null,I=v.getDims(D),z=I.horizontal.center,P=I.vertical.center,q="right",F="left",U=z;if(O=="left"){q="left",F="right";var U=z-i.guidelinesStyle.range*e.zoom()}var W={left:function(X,te){return te-X>i.guidelinesStyle.minDistRange},right:function(X,te){return X-te>i.guidelinesStyle.minDistRange}};return p.forEach(function(X,te){for(var ne=0;ne<te.length;ne++){var he=te[ne],ve=v.getDims(he);if(Math.abs(ve.vertical.center-I.vertical.center)<i.guidelinesStyle.range*e.zoom()&&ve.horizontal[F]==X&&W[O](ve.horizontal[F],I.horizontal[q])){var Ce=ve.horizontal[q]-(I.horizontal[q]-X);p.forEach(function(Le,K){for(var le=0;le<K.length;le++){var Z=K[le];Math.abs(v.getDims(Z).vertical.center-P)<i.guidelinesStyle.range*e.zoom()&&Math.abs(Ce-v.getDims(Z).horizontal[F])<2*i.guidelinesTolerance&&(G=he,V=Z)}},Ce-i.guidelinesTolerance,Ce+i.guidelinesTolerance)}}},U,U+i.guidelinesStyle.range*e.zoom()),G?(m.hd=v.getDims(D).horizontal[q]-v.getDims(G).horizontal[F]-(v.getDims(G).horizontal[q]-v.getDims(V).horizontal[F]),(!i.geometricGuideline||m.h==null||Math.abs(m.h)>Math.abs(m.hd))&&(m.h=m.hd),v.drawDH(D,G,V,O),!0):(i.geometricGuideline||(m.h=null),!1)},v.drawDH=function(D,O,G,V){var I=v.getDims(D).vertical.center,z="right",P="left";V=="left"&&(z="left",P="right");var q=w([O,D,G],"vertical");v.drawLine({x:v.getDims(O).horizontal[P],y:q},{x:v.getDims(D).horizontal[z],y:q},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(D).horizontal[z],y:q},{x:v.getDims(D).horizontal[z],y:I},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(G).horizontal[P],y:q},{x:v.getDims(O).horizontal[z],y:q},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(G).horizontal[P],y:q},{x:v.getDims(G).horizontal[P],y:v.getDims(G).vertical.center},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(O).horizontal[P],y:q},{x:v.getDims(O).horizontal[P],y:v.getDims(O).vertical.center},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine),v.drawLine({x:v.getDims(O).horizontal[z],y:q},{x:v.getDims(O).horizontal[z],y:v.getDims(O).vertical.center},i.guidelinesStyle.horizontalDistColor,i.guidelinesStyle.horizontalDistLine),v.drawArrow({x:v.getDims(D).horizontal[z],y:q},P),v.drawArrow({x:v.getDims(O).horizontal[P],y:q},z),v.drawArrow({x:v.getDims(O).horizontal[z],y:q},P),v.drawArrow({x:v.getDims(G).horizontal[P],y:q},z)},v.verticalDistributionNext=function(D,O){var G=null,V=null,I=v.getDims(D),z=I.horizontal.center,P=I.vertical.center,q="top",F="bottom",U=P-i.guidelinesStyle.range*e.zoom();O=="above"&&(q="bottom",F="top",U=P);var W={below:function(X,te){return te-X>i.guidelinesStyle.minDistRange},above:function(X,te){return X-te>i.guidelinesStyle.minDistRange}};return h.forEach(function(X,te){for(var ne=0;ne<te.length;ne++){var he=te[ne],ve=v.getDims(he);if(Math.abs(ve.horizontal.center-I.horizontal.center)<i.guidelinesStyle.range*e.zoom()&&ve.vertical[F]==X&&W[O](ve.vertical[F],I.vertical[q])){var Ce=ve.vertical[q]-(I.vertical[q]-X);h.forEach(function(Le,K){for(var le=0;le<K.length;le++){var Z=K[le];Math.abs(v.getDims(Z).horizontal.center-z)<i.guidelinesStyle.range*e.zoom()&&Math.abs(Ce-v.getDims(Z).vertical[F])<2*i.guidelinesTolerance&&(G=he,V=Z)}},Ce-i.guidelinesTolerance,Ce+i.guidelinesTolerance)}}},U,U+i.guidelinesStyle.range*e.zoom()),G?(m.vd=v.getDims(D).vertical[q]-v.getDims(G).vertical[F]-(v.getDims(G).vertical[q]-v.getDims(V).vertical[F]),(!i.geometricGuideline||m.v==null||Math.abs(m.v)>Math.abs(m.vd))&&(m.v=m.vd),v.drawDV(D,G,V,O),!0):(i.geometricGuideline||(m.v=null),!1)},v.drawDV=function(D,O,G,V){var I=v.getDims(D),z=I.horizontal.center,P="top",q="bottom";V=="above"&&(P="bottom",q="top");var F=w([O,D,G],"horizontal");v.drawLine({x:F,y:I.vertical[P]},{x:F,y:v.getDims(O).vertical[q]},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine),v.drawLine({x:F,y:v.getDims(O).vertical[P]},{x:F,y:v.getDims(G).vertical[q]},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine),v.drawLine({x:z,y:I.vertical[P]},{x:F,y:I.vertical[P]},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine),v.drawLine({x:v.getDims(O).horizontal.center,y:v.getDims(O).vertical[q]},{x:F,y:v.getDims(O).vertical[q]},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine),v.drawLine({x:v.getDims(O).horizontal.center,y:v.getDims(O).vertical[P]},{x:F,y:v.getDims(O).vertical[P]},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine),v.drawLine({x:F,y:v.getDims(G).vertical[q]},{x:v.getDims(G).horizontal.center,y:v.getDims(G).vertical[q]},i.guidelinesStyle.verticalDistColor,i.guidelinesStyle.verticalDistLine),v.drawArrow({x:F,y:I.vertical[P]},q),v.drawArrow({x:F,y:v.getDims(O).vertical[q]},P),v.drawArrow({x:F,y:v.getDims(O).vertical[P]},q),v.drawArrow({x:F,y:v.getDims(G).vertical[q]},P)},v.update=function(D){v.clear(),i.initPosAlignment&&M(D),D.each(function(O,G){typeof O=="number"&&(O=G),i.geometricGuideline&&(v.searchForLine("horizontal",O),v.searchForLine("vertical",O)),i.distributionGuidelines&&(v.horizontalDistribution(O),v.verticalDistribution(O))})},v.resize=function(){s()};function S(D){for(var O={},G=0;G<D.length;G++)O[D[G].id()]=!0;var V=D.filter(function(I,z){typeof I=="number"&&(I=z);for(var P=I.parent()[0];P!=null;){if(O[P.id()])return!1;P=P.parent()[0]}return!0});return V}var A={},_={},E=function(D){A=D.renderedPosition||D.cyRenderedPosition,_.x=A.x,_.y=A.y},k=function(D){_.x+=D.x-y.x,_.y+=D.y-y.y,y.x=D.x,y.y=D.y},M=function(D){var O=D.renderedPosition();Math.abs(g.y-O.y)<i.guidelinesTolerance?(v.drawLine({x:_.x,y:A.y},{x:O.x,y:A.y},i.guidelinesStyle.initPosAlignmentColor,i.guidelinesStyle.initPosAlignmentLine),A.y==_.y?v.drawCross(_):v.drawCross(A)):Math.abs(g.x-O.x)<i.guidelinesTolerance&&(v.drawLine({x:A.x,y:_.y},{x:A.x,y:O.y},i.guidelinesStyle.initPosAlignmentColor,i.guidelinesStyle.initPosAlignmentLine),A.x==_.x?v.drawCross(_):v.drawCross(A))};function T(D,O){var G=S(O),V=G.union(G.descendants());V.filter(":childless").forEach(function(I,z){typeof I=="number"&&(I=z);var P={x:D.x+I.renderedPosition("x"),y:D.y+I.renderedPosition("y")};I.renderedPosition(P)})}var C;e.on("tapstart","node",function(){C=this});var R,x={x:0,y:0};e.on("mousemove",function(D){R=D.renderedPosition||D.cyRenderedPosition,B&&B.each(function(O,G){if(typeof O=="number"&&(O=G),O.locked()&&(Math.abs(R.x-x.x)>2*i.guidelinesTolerance||Math.abs(R.y-x.y)>2*i.guidelinesTolerance)){O.unlock();var V={};V.x=R.x-C.renderedPosition("x"),V.y=R.y-C.renderedPosition("y"),T(V,O)}})});var B;return v.snapToAlignmentLocation=function(D){B=D,D.each(function(O,G){typeof O=="number"&&(O=G);var V=O.renderedPosition();m.h&&(x=R,V.x-=m.h,O.renderedPosition(V)),m.v&&(x=R,V.y-=m.v,O.renderedPosition(V)),(m.v||m.h)&&(m.h=null,m.v=null,B.lock())}),v.update(D)},{changeOptions:a,lines:v,getTopMostNodes:S,getMousePos:E,setMousePos:k,resizeCanvas:s,resetCanvas:d}}),am}var om,mx;function nz(){return mx||(mx=1,om=function(r,e){var t=r,n="_gridParentPadding",i;function a(){e.style().selector("."+n).style("compound-sizing-wrt-labels","exclude").style("padding-left",i).style("padding-right",i).style("padding-top",i).style("padding-bottom",i).update()}function o(u){t=u,i=t.parentSpacing<0?t.gridSpacing:t.parentSpacing,a()}function s(u,l){l?u.addClass(n):u.removeClass(n)}return{changeOptions:o,setPaddingOfParent:s}}),om}var sm,yx;function iz(){return yx||(yx=1,sm=function(r,e,t){function n(o,s,u){var l=o.union(o.descendants());l.filter(":childless").positions(function(f,c){typeof f=="number"&&(f=c);var d=f.position();return{x:d.x+s,y:d.y+u}})}function i(o){for(var s={},u=0;u<o.length;u++)s[o[u].id()]=!0;var l=o.filter(function(f,c){typeof f=="number"&&(f=c);for(var d=f.parent()[0];d!=null;){if(s[d.id()])return!1;d=d.parent()[0]}return!0});return l}if(t||r("collection","align",function(o,s,u){var l=i(this.nodes(":visible")),f=u||l[0];l=l.not(f),o=o||"none",s=s||"none";var c=0,d=0;s=="left"?c=-1:s=="right"&&(c=1),o=="top"?d=-1:o=="bottom"&&(d=1);for(var h=0;h<l.length;h++){var p=l[h],g=Object.assign({},p.position()),b=Object.assign({},p.position());s!="none"&&(b.x=f.position("x")+c*(f.outerWidth()-p.outerWidth())/2),o!="none"&&(b.y=f.position("y")+d*(f.outerHeight()-p.outerHeight())/2),n(p,b.x-g.x,b.y-g.y)}return this}),e.undoRedo){let o=function(){for(var u={},l=e.nodes(),f=0;f<l.length;f++){var c=l[f];u[c.id()]={x:c.position("x"),y:c.position("y")}}return u},s=function(u){var l={};return e.nodes().not(":parent").positions(function(f,c){typeof f=="number"&&(f=c),l[f.id()]={x:f.position("x"),y:f.position("y")};var d=u[f.id()];return{x:d.x,y:d.y}}),l};var a=e.undoRedo(null,!0);a.action("align",function(u){var l;return u.firstTime?(l=o(),u.nodes.align(u.horizontal,u.vertical,u.alignTo)):l=s(u),l},function(u){return s(u)})}}),sm}var um,bx;function az(){if(bx)return um;bx=1;var r=function(){var e="Expected a function",t=Math.max,n=Date.now,i=n||function(){return new Date().getTime()};function a(s,u,l){var f,c,d,h,p,g,b,v=0,y=!1,m=!0;if(typeof s!="function")throw new TypeError(e);if(u=u<0?0:+u||0,l===!0){var w=!0;m=!1}else o(l)&&(w=!!l.leading,y="maxWait"in l&&t(+l.maxWait||0,u),m="trailing"in l?!!l.trailing:m);function S(){g&&clearTimeout(g),c&&clearTimeout(c),v=0,c=g=b=void 0}function A(M,T){T&&clearTimeout(T),c=g=b=void 0,M&&(v=i(),d=s.apply(p,f),!g&&!c&&(f=p=void 0))}function _(){var M=u-(i()-h);M<=0||M>u?A(b,c):g=setTimeout(_,M)}function E(){A(m,g)}function k(){if(f=arguments,h=i(),p=this,b=m&&(g||!w),y===!1)var M=w&&!g;else{!c&&!w&&(v=h);var T=y-(h-v),C=T<=0||T>y;C?(c&&(c=clearTimeout(c)),v=h,d=s.apply(p,f)):c||(c=setTimeout(E,T))}return C&&g?g=clearTimeout(g):!g&&u!==y&&(g=setTimeout(_,u)),M&&(C=!0,d=s.apply(p,f)),C&&!g&&!c&&(f=p=void 0),d}return k.cancel=S,k}function o(s){var u=typeof s;return!!s&&(u=="object"||u=="function")}return a}();return um=r,um}(function(r){(function(){var e=function(t){if(!t)return;X7();var n=!1,i={snapToGridOnRelease:!0,snapToGridDuringDrag:!1,snapToAlignmentLocationOnRelease:!1,snapToAlignmentLocationDuringDrag:!1,distributionGuidelines:!1,geometricGuideline:!1,initPosAlignment:!1,centerToEdgeAlignment:!1,resize:!1,parentPadding:!1,drawGrid:!0,gridSpacing:20,snapToGridCenter:!0,zoomDash:!0,panGrid:!1,gridStackOrder:-1,gridColor:"#dedede",lineWidth:1,guidelinesStackOrder:4,guidelinesTolerance:2,guidelinesStyle:{strokeStyle:"#8b7d6b",geometricGuidelineRange:400,range:100,minDistRange:10,distGuidelineOffset:10,horizontalDistColor:"#ff0000",verticalDistColor:"#00ff00",initPosAlignmentColor:"#0000ff",lineDash:[0,0],horizontalDistLine:[0,0],verticalDistLine:[0,0],initPosAlignmentLine:[0,0]},parentSpacing:-1},a=K7(),o=Z7(),s=Q7(),u=J7(),l=ez(),f=rz(),c=nz(),d=iz(),h=az();function p(g){return g.scratch("_gridGuide")||g.scratch("_gridGuide",{}),g.scratch("_gridGuide")}t("core","gridGuide",function(g){var b=this,v=p(b),y=Object.extend({},v.options||i,g);if(v.options=y,v.initialized){var _=v.eventsController;_.syncWithOptions(y)}else{var m,w,S,A,_,E,k;m=a(b,y.gridSpacing,y.snapToGridCenter),w=u(y.gridSpacing),S=o(b,m),A=s(y,b,h),E=f(y,b,h),k=c(y,b),_=l(b,m,w,S,A,E,k,y),d(t,b,n),n=!0,_.init(y),v.initialized=!0,v.eventsController=_}return this})};r.exports&&(r.exports=e),typeof cytoscape<"u"&&e(cytoscape)})()})(BL);var oz=BL.exports;const sz=qi(oz);function uz(r,e,t){let n;Kr(r,Jn,s=>t(1,n=s));let i=!1;sz(ir);let a=Lr(jr);var o={snapToGridOnRelease:!1,drawGrid:!1,snapToAlignmentLocationDuringDrag:!1,distributionGuidelines:!0,geometricGuideline:!0,initPosAlignment:!1,centerToEdgeAlignment:!1,resize:!1,parentPadding:!1,guidelinesStackOrder:4,guidelinesTolerance:2,guidelinesStyle:{strokeStyle:"#8b7d6b",geometricGuidelineRange:400,range:100,minDistRange:10,distGuidelineOffset:10,horizontalDistColor:"#ff0000",verticalDistColor:"#00ff00",initPosAlignmentColor:"#0000ff",lineDash:[0,0],horizontalDistLine:[0,0],verticalDistLine:[0,0],initPosAlignmentLine:[0,0]},parentSpacing:-1};return oo(()=>{a.gridGuide(o),t(0,i=!0)}),r.$$.update=()=>{r.$$.dirty&3&&i&&n.gridShow!==void 0&&Lr(jr).gridGuide({drawGrid:n.gridShow}),r.$$.dirty&3&&i&&n.gridSpace!==void 0&&Lr(jr).gridGuide({gridSpacing:n.gridSpace}),r.$$.dirty&3&&i&&n.gridWidth!==void 0&&Lr(jr).gridGuide({lineWidth:n.gridWidth}),r.$$.dirty&3&&i&&n.gridMovePan!==void 0&&Lr(jr).gridGuide({panGrid:n.gridMovePan}),r.$$.dirty&3&&i&&n.gridSnap!==void 0&&Lr(jr).gridGuide({snapToGridDuringDrag:n.gridSnap}),r.$$.dirty&3&&i&&n.gridAlign!==void 0&&Lr(jr).gridGuide({snapToAlignmentLocationOnRelease:n.gridAlign}),r.$$.dirty&3&&i&&n.gridResize!==void 0&&Lr(jr).gridGuide({resize:n.gridResize})},[i,n]}class lz extends Ir{constructor(e){super(),Dr(this,e,uz,null,Nr,{})}}const Ei="observed-variable",Li="latent-variable",es="constant",Yo="free",oh="nolabel",Wi="fromUser",vl="label",pu="byLav",Ko="fixed",Cs="forcefree",Ns="directed",Ps="undirected",Cp="loop",Cf="linked",wu="fromLav",wx="hasEst",lm="validated",Ap="continous",ap="ordered",Kc=80,fz=80,zL=[{selector:"element",style:{"font-size":function(r){return r.data("font-size")||14}}},{selector:"node",style:{width:Kc.toString(),height:"80","background-color":function(r){return r.data("background-color")||"white"},"border-color":function(r){return r.data("border-color")||"grey"},"border-width":function(r){return r.data("border-width")||"2px"},label:"data(label)","text-valign":"center","text-halign":"center"}},{selector:`node.${Ei}`,style:{shape:"rectangle"}},{selector:`node.${Ei}.${ap}`,style:{"border-style":"double","border-width":5}},{selector:`node.${Li}`,style:{shape:"ellipse","border-color":"black"}},{selector:`node.${es}`,style:{shape:"triangle",label:"1","text-valign":"center","text-margin-y":"10px","border-color":"black"}},{selector:`node.${Cf}`,style:{"border-color":"black"}},{selector:"edge",style:{width:function(r){return r.data("width")||3},"line-color":function(r){return r.data("line-color")||"#000"},"target-arrow-color":function(r){return r.data("target-arrow-color")||"#000"},"source-arrow-color":function(r){return r.data("source-arrow-color")||"#000"},"target-arrow-shape":"triangle","curve-style":"bezier","text-valign":"center","text-halign":"center","text-wrap":"wrap","text-max-width":fz,"z-index":10,color:"#000","text-outline-color":"#fff","text-outline-width":"2px","text-background-color":"#fff","text-background-opacity":1,"text-background-padding":"4px"}},{selector:"edge.loop",style:{"curve-style":"bezier","source-arrow-shape":"triangle","loop-direction":function(r){return r.data("loop-direction")||0},"loop-sweep":.8,"control-point-step-size":r=>{const e=r.source(),t=parseInt(e.style("height")),n=parseInt(e.style("width"));let i;return r.style("loop-direction")=="0deg"||r.style("loop-direction")=="180deg"?i=t:r.style("loop-direction")=="90deg"||r.style("loop-direction")=="270deg"?i=n:i=Math.max(n,t),i/80*60}}},{selector:`edge.${Ps}`,style:{"curve-style":"unbundled-bezier","control-point-distances":[-100],"control-point-weights":[.5],"source-arrow-shape":"triangle"}},{selector:`edge.${Ps}.${wu}`,style:{"control-point-distances":[100]}},{selector:`edge.${vl}, edge.${vl}`,style:{label:function(r){return r.data("label")}}},{selector:`edge.${Ko}.${vl}`,style:{label:function(r){return r.data("label")+"@"+r.data("value")}}},{selector:`edge.${Ko}.${oh}`,style:{label:function(r){return"@"+r.data("value")}}},{selector:`edge.${Cs}`,style:{"line-color":"blue"}},{selector:`edge.${wu}, edge.${pu}`,style:{"line-style":"dashed"}},{selector:"edge:selected",style:{"underlay-opacity":.5,"underlay-color":"#928ff8"}},{selector:"node:selected",style:{"underlay-color":"#928ff8","underlay-opacity":.5}}],Zc={autoungrabify:!1,autolock:!1,style:zL,minZoom:.2,maxZoom:5},cz={preview:!1,hoverDelay:150,handleNodes:"node",snap:!0,handleColor:"#ff0000",handleSize:10,canConnect:function(r,e){return!cy.edges(function(n){if(!n.isUserAdded())return!1;const i=n.source().id()==r.id()&&n.target().id()==e.id(),a=n.source().id()==e.id()&&n.target().id()==r.id();return i||a}).length}},hz={undoable:!0,bendRemovalSensitivity:16,enableMultipleAnchorRemovalOption:!0,initAnchorsAutomatically:!1,useTrailingDividersAfterContextMenuOptions:!1,enableCreateAnchorOnDrag:!0,anchorShapeSizeFactor:4};var qL={exports:{}},fm,_x;function dz(){if(_x)return fm;_x=1;var r="Expected a function",e="__lodash_hash_undefined__",t="[object Function]",n="[object GeneratorFunction]",i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,o=typeof kt=="object"&&kt&&kt.Object===Object&&kt,s=typeof self=="object"&&self&&self.Object===Object&&self,u=o||s||Function("return this")();function l(Z,ie){return Z==null?void 0:Z[ie]}function f(Z){var ie=!1;if(Z!=null&&typeof Z.toString!="function")try{ie=!!(Z+"")}catch{}return ie}var c=Array.prototype,d=Function.prototype,h=Object.prototype,p=u["__core-js_shared__"],g=function(){var Z=/[^.]+$/.exec(p&&p.keys&&p.keys.IE_PROTO||"");return Z?"Symbol(src)_1."+Z:""}(),b=d.toString,v=h.hasOwnProperty,y=h.toString,m=RegExp("^"+b.call(v).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),w=c.splice,S=te(u,"Map"),A=te(Object,"create");function _(Z){var ie=-1,re=Z?Z.length:0;for(this.clear();++ie<re;){var J=Z[ie];this.set(J[0],J[1])}}function E(){this.__data__=A?A(null):{}}function k(Z){return this.has(Z)&&delete this.__data__[Z]}function M(Z){var ie=this.__data__;if(A){var re=ie[Z];return re===e?void 0:re}return v.call(ie,Z)?ie[Z]:void 0}function T(Z){var ie=this.__data__;return A?ie[Z]!==void 0:v.call(ie,Z)}function C(Z,ie){var re=this.__data__;return re[Z]=A&&ie===void 0?e:ie,this}_.prototype.clear=E,_.prototype.delete=k,_.prototype.get=M,_.prototype.has=T,_.prototype.set=C;function R(Z){var ie=-1,re=Z?Z.length:0;for(this.clear();++ie<re;){var J=Z[ie];this.set(J[0],J[1])}}function x(){this.__data__=[]}function B(Z){var ie=this.__data__,re=U(ie,Z);if(re<0)return!1;var J=ie.length-1;return re==J?ie.pop():w.call(ie,re,1),!0}function D(Z){var ie=this.__data__,re=U(ie,Z);return re<0?void 0:ie[re][1]}function O(Z){return U(this.__data__,Z)>-1}function G(Z,ie){var re=this.__data__,J=U(re,Z);return J<0?re.push([Z,ie]):re[J][1]=ie,this}R.prototype.clear=x,R.prototype.delete=B,R.prototype.get=D,R.prototype.has=O,R.prototype.set=G;function V(Z){var ie=-1,re=Z?Z.length:0;for(this.clear();++ie<re;){var J=Z[ie];this.set(J[0],J[1])}}function I(){this.__data__={hash:new _,map:new(S||R),string:new _}}function z(Z){return X(this,Z).delete(Z)}function P(Z){return X(this,Z).get(Z)}function q(Z){return X(this,Z).has(Z)}function F(Z,ie){return X(this,Z).set(Z,ie),this}V.prototype.clear=I,V.prototype.delete=z,V.prototype.get=P,V.prototype.has=q,V.prototype.set=F;function U(Z,ie){for(var re=Z.length;re--;)if(Le(Z[re][0],ie))return re;return-1}function W(Z){if(!le(Z)||he(Z))return!1;var ie=K(Z)||f(Z)?m:a;return ie.test(ve(Z))}function X(Z,ie){var re=Z.__data__;return ne(ie)?re[typeof ie=="string"?"string":"hash"]:re.map}function te(Z,ie){var re=l(Z,ie);return W(re)?re:void 0}function ne(Z){var ie=typeof Z;return ie=="string"||ie=="number"||ie=="symbol"||ie=="boolean"?Z!=="__proto__":Z===null}function he(Z){return!!g&&g in Z}function ve(Z){if(Z!=null){try{return b.call(Z)}catch{}try{return Z+""}catch{}}return""}function Ce(Z,ie){if(typeof Z!="function"||ie&&typeof ie!="function")throw new TypeError(r);var re=function(){var J=arguments,fe=ie?ie.apply(this,J):J[0],we=re.cache;if(we.has(fe))return we.get(fe);var ge=Z.apply(this,J);return re.cache=we.set(fe,ge),ge};return re.cache=new(Ce.Cache||V),re}Ce.Cache=V;function Le(Z,ie){return Z===ie||Z!==Z&&ie!==ie}function K(Z){var ie=le(Z)?y.call(Z):"";return ie==t||ie==n}function le(Z){var ie=typeof Z;return!!Z&&(ie=="object"||ie=="function")}return fm=Ce,fm}var cm,xx;function pz(){if(xx)return cm;xx=1;var r="Expected a function",e=0/0,t="[object Symbol]",n=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,u=typeof kt=="object"&&kt&&kt.Object===Object&&kt,l=typeof self=="object"&&self&&self.Object===Object&&self,f=u||l||Function("return this")(),c=Object.prototype,d=c.toString,h=Math.max,p=Math.min,g=function(){return f.Date.now()};function b(A,_,E){var k,M,T,C,R,x,B=0,D=!1,O=!1,G=!0;if(typeof A!="function")throw new TypeError(r);_=S(_)||0,y(E)&&(D=!!E.leading,O="maxWait"in E,T=O?h(S(E.maxWait)||0,_):T,G="trailing"in E?!!E.trailing:G);function V(te){var ne=k,he=M;return k=M=void 0,B=te,C=A.apply(he,ne),C}function I(te){return B=te,R=setTimeout(q,_),D?V(te):C}function z(te){var ne=te-x,he=te-B,ve=_-ne;return O?p(ve,T-he):ve}function P(te){var ne=te-x,he=te-B;return x===void 0||ne>=_||ne<0||O&&he>=T}function q(){var te=g();if(P(te))return F(te);R=setTimeout(q,z(te))}function F(te){return R=void 0,G&&k?V(te):(k=M=void 0,C)}function U(){R!==void 0&&clearTimeout(R),B=0,k=x=M=R=void 0}function W(){return R===void 0?C:F(g())}function X(){var te=g(),ne=P(te);if(k=arguments,M=this,x=te,ne){if(R===void 0)return I(x);if(O)return R=setTimeout(q,_),V(x)}return R===void 0&&(R=setTimeout(q,_)),C}return X.cancel=U,X.flush=W,X}function v(A,_,E){var k=!0,M=!0;if(typeof A!="function")throw new TypeError(r);return y(E)&&(k="leading"in E?!!E.leading:k,M="trailing"in E?!!E.trailing:M),b(A,_,{leading:k,maxWait:_,trailing:M})}function y(A){var _=typeof A;return!!A&&(_=="object"||_=="function")}function m(A){return!!A&&typeof A=="object"}function w(A){return typeof A=="symbol"||m(A)&&d.call(A)==t}function S(A){if(typeof A=="number")return A;if(w(A))return e;if(y(A)){var _=typeof A.valueOf=="function"?A.valueOf():A;A=y(_)?_+"":_}if(typeof A!="string")return A===0?A:+A;A=A.replace(n,"");var E=a.test(A);return E||o.test(A)?s(A.slice(2),E?2:8):i.test(A)?e:+A}return cm=v,cm}(function(r,e){(function(n,i){r.exports=i(dz(),pz())})(kt,function(t,n){return function(i){var a={};function o(s){if(a[s])return a[s].exports;var u=a[s]={i:s,l:!1,exports:{}};return i[s].call(u.exports,u,u.exports,o),u.l=!0,u.exports}return o.m=i,o.c=a,o.i=function(s){return s},o.d=function(s,u,l){o.o(s,u)||Object.defineProperty(s,u,{configurable:!1,enumerable:!0,get:l})},o.n=function(s){var u=s&&s.__esModule?function(){return s.default}:function(){return s};return o.d(u,"a",u),u},o.o=function(s,u){return Object.prototype.hasOwnProperty.call(s,u)},o.p="",o(o.s=12)}([function(i,a,o){i.exports=Object.assign!=null?Object.assign.bind(Object):function(s){for(var u=arguments.length,l=Array(u>1?u-1:0),f=1;f<u;f++)l[f-1]=arguments[f];return l.filter(function(c){return c!=null}).forEach(function(c){Object.keys(c).forEach(function(d){return s[d]=c[d]})}),s}},function(i,a,o){var s=o(10),u=o(0);i.exports=function(l){var f=this;return new s(u({cy:f},l))}},function(i,a,o){function s(){if(this.saveGestureState(),this.cy.zoomingEnabled(!1).panningEnabled(!1).boxSelectionEnabled(!1),this.options.disableBrowserGestures){var f=this.windowListenerOptions;window.addEventListener("touchstart",this.preventDefault,f),window.addEventListener("touchmove",this.preventDefault,f),window.addEventListener("wheel",this.preventDefault,f)}return this}function u(){if(this.cy.zoomingEnabled(this.lastZoomingEnabled).panningEnabled(this.lastPanningEnabled).boxSelectionEnabled(this.lastBoxSelectionEnabled),this.options.disableBrowserGestures){var f=this.windowListenerOptions;window.removeEventListener("touchstart",this.preventDefault,f),window.removeEventListener("touchmove",this.preventDefault,f),window.removeEventListener("wheel",this.preventDefault,f)}return this}function l(){var f=this.cy;return this.lastPanningEnabled=f.panningEnabled(),this.lastZoomingEnabled=f.zoomingEnabled(),this.lastBoxSelectionEnabled=f.boxSelectionEnabled(),this}i.exports={disableGestures:s,resetGestures:u,saveGestureState:l}},function(i,a,o){function s(){var u=this,l=this.cy,f=this.options;return this.addListener(l,"drag",function(){return u.grabbingNode=!0}),this.addListener(l,"free",function(){return u.grabbingNode=!1}),this.addListener(l,"tapstart","node",function(c){var d=c.target;u.drawMode&&u.start(d)}),this.addListener(l,"tapdrag",function(c){u.update(c.position)}),this.addListener(l,"tapdragover","node",function(c){f.snap||u.preview(c.target)}),this.addListener(l,"tapdragout","node",function(c){f.snap||u.unpreview(c.target)}),this.addListener(l,"tapend",function(){u.stop()}),this}i.exports={addCytoscapeListeners:s}},function(i,a,o){var s={canConnect:function(l,f){return!l.same(f)},edgeParams:function(l,f){return{}},hoverDelay:150,snap:!0,snapThreshold:50,snapFrequency:15,noEdgeEventsInDraw:!0,disableBrowserGestures:!0};i.exports=s},function(i,a,o){function s(f){var c=this.cy;return this.drawMode=f??!this.drawMode,this.drawMode?(this.prevUngrabifyState=c.autoungrabify(),c.autoungrabify(!0),this.emit("drawon")):(c.autoungrabify(this.prevUngrabifyState),this.emit("drawoff")),this}function u(){return this.toggleDrawMode(!0)}function l(){return this.toggleDrawMode(!1)}i.exports={toggleDrawMode:s,enableDrawMode:u,disableDrawMode:l}},function(i,a,o){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},u=o(0),l=function(y){return(typeof y>"u"?"undefined":s(y))===s("")},f=function(y){return(typeof y>"u"?"undefined":s(y))===s([])&&y.length!=null};function c(v,y,m){var w={};return u(w,y,v),u(w.data,y.data,v.data),l(y.classes)?w.classes=y.classes+" "+m:f(y.classes)?w.classes=y.classes.join(" ")+" "+m:w.classes=m,w}function d(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,y=this.cy;this.options;var m=this.presumptiveTargets,w=this.previewEles,S=this.active,A=this.sourceNode,_=this.targetNode,E=v?"eh-preview":"",k=y.collection(),M=this.canConnect(_);if(S&&M){if(!_||_.size()===0){w.remove(),this.emit("cancel",this.mp(),A,m);return}if(!v){w.removeClass("eh-preview").style("events",""),this.emit("complete",this.mp(),A,_,w);return}var T=y.add(c({group:"edges",data:{source:A.id(),target:_.id()}},this.edgeParams(_),E));return k=k.merge(T),v?(this.previewEles=k,k.style("events","no")):(k.style("events",""),this.emit("complete",this.mp(),A,_,k)),this}}function h(){return this.makeEdges(!0),this}function p(){return this.previewEles.nonempty()&&this.previewEles.inside()}function g(){return this.previewShown()&&this.previewEles.remove(),this}function b(){var v=this,y=this.sourceNode,m=this.ghostNode,w=this.cy,S=this.mx,A=this.my,_=S,E=A,k=void 0,M=void 0;if(y)return(!m||m.length===0||m.removed())&&(M=this.ghostEles=w.collection(),w.batch(function(){m=v.ghostNode=w.add({group:"nodes",classes:"eh-ghost eh-ghost-node",position:{x:0,y:0}}),m.style({"background-color":"blue",width:1e-4,height:1e-4,opacity:0,events:"no"});var T={};k=w.add(u({},T,{group:"edges",data:u({},T.data,{source:y.id(),target:m.id()}),classes:"eh-ghost eh-ghost-edge"})),k.style({events:"no"})}),M.merge(m).merge(k)),m.position({x:_,y:E}),this}i.exports={makeEdges:d,makePreview:h,removePreview:g,previewShown:p,updateEdge:b}},function(i,a,o){function s(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events","no"),this}function u(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events",""),this}i.exports={disableEdgeEvents:s,enableEdgeEvents:u}},function(i,a,o){function s(){return this.enabled=!0,this.emit("enable"),this}function u(){return this.enabled=!1,this.emit("disable"),this}i.exports={enable:s,disable:u}},function(i,a,o){var s=o(13),u=Math.sqrt(2);function l(y){var m=this.previewEles,w=this.ghostEles,S=function(C){return m.anySame(C)},A=function(C){return w.anySame(C)},_=function(C){return S(C)||A(C)},E=this.enabled,k=this.active,M=this.grabbingNode;return E&&!k&&!M&&y!=null&&y.nonempty()&&!_(y)}function f(y){return this.canStartOn(y)&&this.drawMode}function c(y){return this.canStartOn(y)&&!this.drawMode}function d(y){var m=this;if(this.canStartOn(y)){this.active=!0,this.sourceNode=y,this.sourceNode.addClass("eh-source"),this.disableGestures(),this.disableEdgeEvents();var w=function(A){return A.id()};this.canConnect=s(function(S){return m.options.canConnect(m.sourceNode,S)},w),this.edgeParams=s(function(S){return m.options.edgeParams(m.sourceNode,S)},w),this.emit("start",this.hp(),y)}}function h(y){if(this.active){var m=y;return this.mx=m.x,this.my=m.y,this.updateEdge(),this.throttledSnap(),this}}function p(){if(!this.active||!this.options.snap)return!1;var y=this.cy,m=this.targetNode,w=this.options.snapThreshold,S=this.mp(),A=this.previewEles,_=this.ghostNode,E=function(U){return u*Math.max(U.outerWidth(),U.outerHeight())/2},k=function(U,W,X,te){var ne=X-U,he=te-W;return ne*ne+he*he},M=function(U,W){return k(U.x,U.y,W.x,W.y)},T=function(U){return M(U.position(),S)},C=function(U){var W=E(U),X=W+w;return X*X},R=function(U){return T(U)<=C(U)},x=function(U){var W=U.position(),X=U.outerWidth()/2,te=U.outerHeight()/2,ne=W.x,he=W.y,ve=S.x,Ce=S.y,Le=ne-X,K=ne+X,le=he-te,Z=he+te,ie=Le<=ve&&ve<=K,re=le<=Ce&&Ce<=Z;if(ie&&re)return 0;if(ie){var J=Ce-le,fe=Ce-Z;return Math.min(J*J,fe*fe)}else if(re){var we=ve-Le,ge=ve-K;return Math.min(we*we,ge*ge)}else return ve<Le&&Ce<le?k(ve,Ce,Le,le):ve>K&&Ce<le?k(ve,Ce,K,le):ve<Le&&Ce>Z?k(ve,Ce,Le,Z):k(ve,Ce,K,Z)},B=function(U,W){return x(U)-x(W)},D=B,O=!1,G=function(U){var W=S,X=U.outerWidth(),te=X/2,ne=U.outerHeight(),he=ne/2,ve=U.position(),Ce=ve.x-te,Le=ve.x+te,K=ve.y-he,le=ve.y+he;return Ce<=W.x&&W.x<=Le&&K<=W.y&&W.y<=le},V=function(U){return U.same(A)||U.same(_)},I=y.nodes(function(F){return!V(F)&&R(F)}).sort(D),z=!1;m.nonempty()&&!R(m)&&this.unpreview(m);for(var P=0;P<I.length;P++){var q=I[P];if(!(q.isParent()&&G(q))&&!(q.isChild()&&!G(q.parent()))&&(q.same(m)||this.preview(q,O))){z=!0;break}}return z}function g(y){var m=this,w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,S=this.options,A=this.sourceNode,_=this.ghostNode,E=this.ghostEles,k=this.presumptiveTargets,M=this.previewEles,T=this.active,C=A,R=y.same(_),x=!this.canConnect(y),B=y.same(this.targetNode);if(!T||R||x||B)return!1;this.targetNode.nonempty()&&this.unpreview(this.targetNode),clearTimeout(this.previewTimeout);var D=function(){m.targetNode=y,k.merge(y),y.addClass("eh-presumptive-target"),y.addClass("eh-target"),m.emit("hoverover",m.mp(),C,y),y.addClass("eh-preview"),E.addClass("eh-preview-active"),A.addClass("eh-preview-active"),y.addClass("eh-preview-active"),m.makePreview(),m.emit("previewon",m.mp(),C,y,M)};return w&&S.hoverDelay>0?this.previewTimeout=setTimeout(D,S.hoverDelay):D(),!0}function b(y){if(this.active){var m=this.previewTimeout,w=this.sourceNode,S=this.previewEles,A=this.ghostEles,_=this.cy;clearTimeout(m),this.previewTimeout=null;var E=w;return y.removeClass("eh-preview eh-target eh-presumptive-target eh-preview-active"),A.removeClass("eh-preview-active"),w.removeClass("eh-preview-active"),this.targetNode=_.collection(),this.removePreview(E,y),this.emit("hoverout",this.mp(),E,y),this.emit("previewoff",this.mp(),E,y,S),this}}function v(){if(this.active){var y=this.sourceNode,m=this.targetNode,w=this.ghostEles,S=this.presumptiveTargets;return clearTimeout(this.previewTimeout),y.removeClass("eh-source eh-preview-active"),m.removeClass("eh-target eh-preview eh-hover eh-preview-active"),S.removeClass("eh-presumptive-target"),this.makeEdges(),w.remove(),this.clearCollections(),this.resetGestures(),this.enableEdgeEvents(),this.active=!1,this.emit("stop",this.mp(),y),this}}i.exports={start:d,update:h,preview:g,unpreview:b,stop:v,snap:p,canStartOn:l,canStartDrawModeOn:f,canStartNonDrawModeOn:c}},function(i,a,o){var s=o(4),u=o(0),l=o(14),f=o(2),c=o(3),d=o(5),h=o(6),p=o(8),g=o(9),b=o(11),v=o(7);function y(S){var A=S.cy;this.cy=A,this.listeners=[],this.enabled=!0,this.drawMode=!1,this.active=!1,this.grabbingNode=!1,this.clearCollections(),this.mx=0,this.my=0,this.options=u({},s,S),this.saveGestureState(),this.addListeners(),this.throttledSnap=l(this.snap.bind(this),1e3/S.snapFrequency),this.preventDefault=function(k){return k.preventDefault()},this.canConnect=function(){return!1};var _=!1;try{var E=Object.defineProperty({},"passive",{get:function(){_=!0}});window.addEventListener("test",null,E)}catch{}_?this.windowListenerOptions={capture:!0,passive:!1}:this.windowListenerOptions=!0}var m=y.prototype={},w=function(A){return u(m,A)};m.destroy=function(){this.removeListeners()},m.setOptions=function(S){u(this.options,S)},m.mp=function(){return{x:this.mx,y:this.my}},m.hp=function(){return{x:this.hx,y:this.hy}},m.clearCollections=function(){var S=this.cy;this.previewEles=S.collection(),this.ghostEles=S.collection(),this.ghostNode=S.collection(),this.sourceNode=S.collection(),this.targetNode=S.collection(),this.presumptiveTargets=S.collection()},[f,c,d,h,p,g,b,v].forEach(w),i.exports=y},function(i,a,o){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g};function u(){var g=this;return this.addCytoscapeListeners(),this.addListener(this.cy,"destroy",function(){return g.destroy()}),this}function l(){for(var g=this.listeners.length-1;g>=0;g--){var b=this.listeners[g];this.removeListener(b.target,b.event,b.selector,b.callback,b.options)}return this}function f(g,b,v,y,m){return(typeof v>"u"?"undefined":s(v))!==s("")&&(y=v,m=y,v=null),m==null&&(m=!1),{target:g,event:b,selector:v,callback:y,options:m}}function c(g){return g instanceof Element}function d(g,b,v,y,m){var w=f(g,b,v,y,m);return this.listeners.push(w),c(w.target)?w.target.addEventListener(w.event,w.callback,w.options):w.selector?w.target.addListener(w.event,w.selector,w.callback,w.options):w.target.addListener(w.event,w.callback,w.options),this}function h(g,b,v,y,m){for(var w=f(g,b,v,y,m),S=this.listeners.length-1;S>=0;S--){var A=this.listeners[S];if(w.target===A.target&&w.event===A.event&&(w.selector==null||w.selector===A.selector)&&(w.callback==null||w.callback===A.callback)){this.listeners.splice(S,1),c(w.target)?w.target.removeEventListener(w.event,w.callback,w.options):w.selector?w.target.removeListener(w.event,w.selector,w.callback,w.options):w.target.removeListener(w.event,w.callback,w.options);break}}return this}function p(g,b){for(var v=this.cy,y=arguments.length,m=Array(y>2?y-2:0),w=2;w<y;w++)m[w-2]=arguments[w];return v.emit({type:"eh"+g,position:b},m),this}i.exports={addListener:d,addListeners:u,removeListener:h,removeListeners:l,emit:p}},function(i,a,o){var s=o(1),u=function(f){f&&f("core","edgehandles",s)};typeof cytoscape<"u"&&u(cytoscape),i.exports=u},function(i,a){i.exports=t},function(i,a){i.exports=n}])})})(qL);var vz=qL.exports;const gz=qi(vz);function mz(r){ir.use(gz);var e=ir(Zc);return e.boxSelectionEnabled(!0),jr.set(e),Q3.set(e.edgehandles(cz)),[]}class yz extends Ir{constructor(e){super(),Dr(this,e,mz,null,Nr,{})}}let Od;const bz=new Uint8Array(16);function wz(){if(!Od&&(Od=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Od))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Od(bz)}const ji=[];for(let r=0;r<256;++r)ji.push((r+256).toString(16).slice(1));function _z(r,e=0){return(ji[r[e+0]]+ji[r[e+1]]+ji[r[e+2]]+ji[r[e+3]]+"-"+ji[r[e+4]]+ji[r[e+5]]+"-"+ji[r[e+6]]+ji[r[e+7]]+"-"+ji[r[e+8]]+ji[r[e+9]]+"-"+ji[r[e+10]]+ji[r[e+11]]+ji[r[e+12]]+ji[r[e+13]]+ji[r[e+14]]+ji[r[e+15]]).toLowerCase()}const xz=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Sx={randomUUID:xz};function GL(r,e,t){if(Sx.randomUUID&&!e&&!r)return Sx.randomUUID();r=r||{};const n=r.random||(r.rng||wz)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(let i=0;i<16;++i)e[t+i]=n[i];return e}return _z(n)}function Si(r){var e=Lr(sr);if(!e.full)return;let t=Lr(jr);const n=t.edges();if(t.getUserEdges().length==0)return;if(!e.dataAvail&&r=="estimate"){ga("danger","Model not send to lavaan because no data available");return}for(var i=0;i<n.length;i++)n[i].removeEstimates();let a=$L(r);Shiny.setInputValue("run-fromJavascript",JSON.stringify(a)),Shiny.setInputValue("runCounter",Math.random()),r==="user model"&&t.getLavaanModifiedEdges().forEach(o=>{o.freePara()})}function Sz(r,e){for(let t=0;t<r.length;t++)if(r[t]===e)return!0;return!1}function Dd(r,e){let t;r==null?t="1":t=r.getLabel();let n=!1,i;if(e.isFixed()&&!e.isModifiedLavaan()?(i=e.getValue()+"*"+t,n=!0):e.isForceFree()&&(i="NA*"+t,n=!0),e.hasLabel()){const a=e.getLabel();n?i+=" + "+a+"*"+t:(n=!0,i=a+"*"+t)}else n||(i=t);return i}class Ez{constructor(e,t,n=null,i=null,a=null){this.mode=e,Object.assign(this,{model:{options:n,syntax:i,R_script:t},forceUpdate:Math.random(),cache:a})}}function $L(r){let e=Lr(jr),t=Lr(sr),n="",i="";i+=`library(lavaan)
`,t.dataAvail?i+=`data <- read.csv("${t.loadedFileName}")
`:i+=`#make sure your data is loaded into the 'data' variable
`;const a=e.getLatentNodes();let o=!1;for(let y=0;y<a.length;y++){const m=a[y];let w="";const S=m.connectedEdges(function(A){return A.isDirected()&&A.source().id()==m.id()&&A.target().isObserved()});if(S.length>0){o||(n+=`# measurement model
`,o=!0);const A=Math.max(...S.map(M=>M.target().position().x))-Math.min(...S.map(M=>M.target().position().x)),_=Math.max(...S.map(M=>M.target().position().y))-Math.min(...S.map(M=>M.target().position().y)),E=A>=_?"x":"y",k=S.map((M,T)=>({index:T,value:M.target().position()[E]})).sort((M,T)=>M.value-T.value).map(M=>M.index);for(let M=0;M<S.length;M++){const T=S[k[M]].target();M>0&&(w+=" + "),w+=Dd(T,S[k[M]])}n+=" "+m.getLabel()+" =~ "+w+`
`}else m.connectedEdges(function(A){return A.isUserAdded()}).length>0&&(o||(n+=`# measurement model
`,o=!0),n+=" "+m.getLabel()+` =~ 0
`)}function s(y){return y.isDirected()&&!y.source().isConstant()&&!(y.source().isLatent()&&y.target().isObserved())&&(y.isUserAdded()||y.isModifiedLavaan())}let u=e.edges(s),l=[];for(let y=0;y<u.length;y++)Sz(l,u[y].target())||l.push(u[y].target());if(l.length>0){n+=`
# regressions`;for(let y=0;y<l.length;y++){const m=l[y],w=m.connectedEdges(S=>s(S)&&S.target().same(m));if(w.length>0){let S="";for(var f=0;f<w.length;f++){var c=w[f].source();f>0&&(S+=" + "),S+=Dd(c,w[f])}n+=`
 `+m.getLabel()+" ~ "+S}}}let d=e.edges(function(y){return(y.isUndirected()||y.myIsLoop())&&(y.isUserAdded()||y.isModifiedLavaan())});if(d.length>0){n+=`

# residual (co)variances`;for(let y=0;y<d.length;y++){let m=d[y].source().data("label");n+=`
 `+m+" ~~ "+Dd(d[y].target(),d[y])}}const h=e.nodes(function(y){return y.isConstant()});for(let y=0;y<h.length;y++){const w=h[y].connectedEdges(function(S){return S.isUserAdded()});if(w.length>0){n+=`
# intercepts
`;for(var f=0;f<w.length;f++){var c=w[f].target();n+=c.getLabel()+" ~ "+Dd(void 0,w[f])+`
`}}}n=`'
`+n+`'

`;const g=e.nodes(function(y){return y.isOrdered()}).map(y=>y.getLabel()),b=Cz(g);return i+="model <-"+n,i+="result <- lavaan(model, data, "+b,new Ez(r,i,b,n=n,Lr(Ts))}function Cz(r){const e=Lr(tn),t=bs(e.meanStruc),n=bs(e.intOvFree),i=bs(e.intLvFree);let a=`meanstructure = ${t},
		 int.ov.free = ${n}, int.lv.free = ${i},
		 estimator = ${hm(e.estimator)}, se = ${hm(e.se)},
		 missing = ${hm(e.missing)}, auto.fix.first = ${bs(e.fix_first)},
		 auto.fix.single = ${bs(e.fix_single)}, auto.var = ${bs(e.auto_var)},
		 auto.cov.lv.x = ${bs(e.auto_cov_lv_x)}, auto.cov.y = ${bs(e.auto_cov_y)},
  		 fixed.x = ${bs(e.fixed_x)}`;if(e.se=="boot"){const o=`, bootstrap = ${e.n_boot})`;a=a+o}else a=a+")";return r.length>0&&(a=`ordered = ${'c("'+r.join('", "')+'")'}, ${a}`),a}function hm(r){return'"'+r+'"'}function bs(r){if(r==!0||r=="true")return"TRUE";if(r==!1||r=="false")return"FALSE";if(r=="default")return'"default"';throw new Error("Should not happen")}let UL,HL;function jL(){UL=1,HL=1}jL();function va(r,e,t=!0,n=null){let i=Lr(jr),a=GL(),o;if(n!==null){if(i.nodes().find(u=>u.data().label===n)){ga("danger","Node with the same label already exists.");return}o=n}else r==Ei?o="x"+UL++:r==Li?o="f"+HL++:o=void 0,i.nodes().find(u=>u.data().label===o)&&(o=o+".1");let s=Lr(ml);return e?s.do("add",{group:"nodes",data:{id:a,label:o},classes:[r,Ap],renderedPosition:e}):(e={x:Math.random()*400+50,y:Math.random()*400+50},i.add({group:"nodes",data:{id:a,label:o},classes:[r,Ap],renderedPosition:e})),t&&Si(Lr(tn).mode),a}function Oc(r,e,t=!0,n=!1,i=null,a=!0){let o=Lr(jr),s=GL();return o.add({group:"edges",data:{id:s,source:r,target:e,value:n?i:void 0},classes:`${t?Ns:Ps} ${a?Wi:wu} ${n?Ko:Yo} ${oh}`})}function $a(r){const e=Pz(r);if(e!=null){const t=Tz(r),n=kz(t);let i=Nz(n);i=Az(i,n),e.data("loop-direction",`${i}deg`)}}function Az(r,e){const t=[0,180,90,270],n=35,i=t.sort((s,u)=>{const l=Math.min(Math.abs(s-r),360-Math.abs(s-r)),f=Math.min(Math.abs(u-r),360-Math.abs(u-r));return l-f}),o=[[0,180],[90,270]].flatMap(s=>i.filter(u=>s.includes(u)));for(const s of o)if(!e.some(l=>{const f=Math.abs(s-l);return Math.min(f,360-f)<=n}))return s;return r}function Tz(r){const e=cy.getElementById(r);if(e.length===0){console.error(`Node with ID ${r} does not exist.`);return}let t=[];return e.connectedEdges().forEach(n=>{const i=n.source(),a=n.target();let o;(i.id()!==e.id()||a.id()!==e.id())&&(i.id()===e.id()?o=Ex(n.sourceEndpoint(),e.position()):o=Ex(n.targetEndpoint(),e.position()),t.push(o))}),t}function Ex(r,e){return Object.keys(r).reduce((t,n)=>{if(e.hasOwnProperty(n))t[n]=r[n]-e[n];else throw new Error(`Key ${n} not found in second object`);return t},{})}function kz(r){let e=[];return r.forEach(t=>{e.push(Lz(t))}),e}function Lz(r){let e=Math.atan2(r.y,r.x)*180/Math.PI;return e=(e+90)%360,e}function Nz(r){let e=-1,t=null;for(let n=0;n<=360;n++){let i=1/0;for(let a=0;a<r.length;a++){let o=Math.abs(r[a]-n);o=Math.min(o,360-o),i=Math.min(i,o)}i>e&&(e=i,t=n)}return t}function Pz(r,e){var t=cy.getElementById(r),n=null;return t.connectedEdges().forEach(function(i){var a=i.source(),o=i.target();if(a.id()===r&&o.id()===r){n=i;return}}),n!==null&&t.connectedEdges().length>1&&!n.hasClass("fixDeg")?n:null}function Mz(r){let e,t,n;return{c(){e=Yt("div"),st(e,"id","cy"),st(e,"class","graph svelte-11pj9ut"),Oa(e,"flex-basis",r[1].full?"70%":"100%")},m(i,a){Pt(i,e,a),r[6](e),t||(n=[kn(e,"mouseover",r[2]),kn(e,"mouseout",r[3]),kn(e,"mousemove",r[4]),kn(e,"drop",r[5]),kn(e,"dragover",Oz)],t=!0)},p(i,[a]){a&2&&Oa(e,"flex-basis",i[1].full?"70%":"100%")},i:Yr,o:Yr,d(i){i&&Nt(e),r[6](null),t=!1,To(n)}}}function Oz(r){r.preventDefault()}function Dz(r,e){let t=Math.atan2(r,-e)*(180/Math.PI);return t<0&&(t+=360),t}function Iz(r,e,t){let n,i,a;Kr(r,ml,_=>t(13,n=_)),Kr(r,tn,_=>t(14,i=_)),Kr(r,sr,_=>t(1,a=_));let o=Lr(jr),s=Lr(Q3),u,l={x:0,y:0},f;oo(()=>{o.mount(u)});function c(_){if(tr(sr,a.buttonDown=!0,a),(_.key==="Alt"||_.key===" ")&&(s.enableDrawMode(),f=!1,tr(sr,a.drawing=!0,a),_.key==="Alt"&&(f=!0)),_.key==="Backspace"){let E=o.$(":selected");E.length>0&&n.do("remove",E),tr(sr,a.buttonDown=!1,a)}if(["l","o","c"].includes(_.key.toLowerCase())){let E;switch(_.key.toLowerCase()){case"l":E=Li;break;case"o":E=Ei;break;case"c":E=es;break}va(E,{...l}),tr(sr,a.buttonDown=!1,a)}tr(sr,a.buttonDown=!1,a)}function d(){o.autoungrabify(!1),o.nodes().grabify()}function h(){tr(sr,a.drawing=!1,a),d(),(event.key==="Alt"||event.key===" ")&&s.disableDrawMode()}function p(){document.addEventListener("keydown",c),document.addEventListener("keyup",h)}function g(){document.removeEventListener("keydown",c,!1),document.removeEventListener("keyup",h,!1),s.disableDrawMode()}function b(_){l.x=_.offsetX,l.y=_.offsetY}o.on("ehcomplete",(_,E,k,M)=>{const T=M,C=E.id(),R=k.id();T.remove(),T.init(),C!==R?(f?T.setUndirected():T.setDirected(),$a(C),$a(R)):(T.makeLoop(),$a(R)),!((T.isUndirected()||T.myIsLoop())&&(E.isConstant()||k.isConstant()))&&(T.isDirected()&&k.isConstant()||T.isDirected()&&E.isConstant()&&k.connectedEdges(B=>B.isUserAdded()&&B.source().isConstant()).length>1||(T.isDirected()&&E.isConstant()?T.makeMeanEdge():T.makeOtherEdge(),n.do("add",T),Si(i.mode)))});function v(_){let E=0;const k=100,M=k*2;_.preventDefault();let T={x:_.offsetX,y:_.offsetY};function C(B,D){let O;a.dataAvail?O=a.columnNames.map(V=>({text:V,value:V})):O=Array.from({length:100},(V,I)=>`var${I+1}`);const G={title:B,inputType:"select",multiple:!0,value:"",inputOptions:O,callback:D};bootbox.prompt(G)}function R(){ga("danger","Either no variable selected or at least one selected variable already is in the model.")}function x(B){return B&&!o.nodes().some(D=>D.data().label===B)}if(a.dragged=="observed-with-name")va(Ei,T,!0,a.draggedName);else if(a.dragged=="multiple")C("Select Variables",function(B){if(x(B)){const D=o.zoom();B.forEach(O=>{va(Ei,{x:T.x+E*D,y:T.y},!0,O),E+=k})}else R()});else if(a.dragged=="factor")C("Select Variables",function(B){if(x(B)){const D=o.zoom(),O=va(Li,{x:T.x+k*D*B.length/2-Kc/2*D,y:T.y});B.forEach(G=>{const V=va(Ei,{x:T.x+E*D,y:T.y+D*M},!0,G);E+=k,Oc(O,V)}),tr(tn,i.fix_first=!0,i),tr(tn,i.fix_single=!0,i),tr(tn,i.auto_var=!0,i),tr(tn,i.intOvFree=!0,i),tr(tn,i.intLvFree=!1,i)}else R()});else if(a.dragged=="growth"){let B=0;C("Select Time Points",function(D){if(x(D)){const O=o.zoom(),G=va(es,{x:T.x+k*O*D.length/2-Kc/2*O,y:T.y},!0),V=va(Li,{x:T.x+Kc/2*O,y:T.y+1*M*O},!0,"Intercept"),I=va(Li,{x:T.x+k*O*(D.length-1)-Kc/2*O,y:T.y+1*M*O},!0,"Slope");Oc(G,V,!0,!1),Oc(G,I,!0,!1);let z=1;D.forEach(P=>{const q=va(Ei,{x:T.x+B*O,y:T.y+2*M*O},!0,P);B+=k,Oc(V,q,!0,!0,1),z!=1&&Oc(I,q,!0,!0,z-1),z+=1}),tr(tn,i.auto_var=!0,i),tr(tn,i.intOvFree=!1,i),tr(tn,i.intLvFree=!0,i)}})}else va(a.dragged,T);(a.dragged=="multiple"||a.dragged=="factor"||a.dragged=="growth")&&Si(i.mode)}let y=!1,m=null,w;o.on("mousedown","edge.loop",function(_){y=!0,m=_.target,m.unpanify(),m.addClass("fixDeg"),w=m.style("loop-direction")});let S;o.on("mousemove",function(_){if(!y||!m)return;let k=m.source().renderedPosition();S=Dz(l.x-k.x,l.y-k.y);const M=5,T=[0,90,180,270];for(let C=0;C<T.length;C++)if(Math.abs(S-T[C])<=M){S=T[C];break}m.data("loop-direction",`${S}deg`)}),window.addEventListener("mouseup",function(){y&&(y=!1,m.data("loop-direction",w),n.do("style",{eles:m,style:{"loop-direction":`${S}deg`}}),m=null)});function A(_){qn[_?"unshift":"push"](()=>{u=_,t(0,u)})}return[u,a,p,g,b,v,A]}class Rz extends Ir{constructor(e){super(),Dr(this,e,Iz,Mz,Nr,{})}}function Fz(r,e,t){let n,i;Kr(r,sr,u=>t(2,n=u)),Kr(r,tn,u=>t(3,i=u));let a=Lr(jr);a.on("add","node",function(u){const l=u.target;if(l.isObserved()){let f=n.columnNames;f&&f.includes(l.getLabel())&&(l.link(),ga("success",`Variable ${l.getLabel()} linked to data`))}n.modelEmpty&&a.edges().length>0&&tr(sr,n.modelEmpty=!1,n)}),a.on("remove","edge, node",function(u){a.getUserEdges().length==0&&(tr(sr,n.modelEmpty=!0,n),Shiny.setInputValue("show_help",Math.random())),n.loadingMode||Si(i.mode)}),a.on("remove","edge",function(u){$a(u.target.source().id()),$a(u.target.target().id())}),a.on("add","edge",function(u){tr(sr,n.everEdge=!0,n),n.modelEmpty&&a.edges().length>0&&tr(sr,n.modelEmpty=!1,n),$a(u.target.source().id()),$a(u.target.target().id())}),a.on("position","node",function(u){u.target.neighborhood().nodes().forEach(c=>{const d=c.id();$a(d)})});let o=null,s=!1;return a.on("mousedown",function(u){const l=p=>parseFloat(p.replace("px","")),f=u.position;let c=null,d=1/0;const h=30;a.edges().forEach(function(p){if(p.isDirected()){const g=l(p.style("text-margin-x")),b=l(p.style("text-margin-y")),v=p.midpoint(),y={x:v.x+g,y:v.y+b},m=Math.abs(f.x-y.x),w=f.y-y.y,S=Math.sqrt(m*m+w*w);S<d&&S<h&&(c=p,d=S)}}),c!==null&&(o=c,s=!0,u.preventDefault(),c.unpanify())}),a.on("mousemove",function(u){if(s&&o){const l=u.position,f=o.midpoint(),c=o.source().position(),d=o.target().position(),h={x:d.x-c.x,y:d.y-c.y},p=Math.sqrt(h.x**2+h.y**2),g={x:h.x/p,y:h.y/p},b={x:l.x-f.x,y:l.y-f.y};let v=b.x*g.x+b.y*g.y;const y=(d.y-f.y)/g.y-70,m=(c.y-f.y)/g.y+70;let w=Math.min(y,v);w=Math.max(m,w);const S=w*g.x,A=w*g.y;o.style({"text-margin-x":S,"text-margin-y":A})}}),a.on("mouseup",function(u){s=!1,o=null}),[]}class Bz extends Ir{constructor(e){super(),Dr(this,e,Fz,null,Nr,{})}}function Cx(r,e,t){const n=r.slice();return n[17]=e[t],n}function Ax(r){let e,t,n,i,a,o,s,u,l,f,c,d,h,p,g=r[0].columnNames,b=[];for(let v=0;v<g.length;v+=1)b[v]=Tx(Cx(r,g,v));return{c(){e=Yt("div"),t=qt(),n=Yt("div"),i=Yt("button"),i.textContent="Multiple Variables",a=qt(),o=Yt("button"),o.textContent="Factor",s=qt(),u=Yt("button"),u.textContent="Growth",l=qt(),f=Yt("div"),c=qt(),d=Yt("ul");for(let v=0;v<b.length;v+=1)b[v].c();st(e,"class","vertical-bar svelte-1ecko2"),st(i,"class","draggable-item svelte-1ecko2"),st(i,"draggable","true"),st(o,"class","draggable-item svelte-1ecko2"),st(o,"draggable","true"),st(u,"class","draggable-item svelte-1ecko2"),st(u,"draggable","true"),st(n,"id","model-buttons"),st(n,"class","svelte-1ecko2"),st(f,"class","vertical-bar svelte-1ecko2"),st(d,"class","draggable-list svelte-1ecko2")},m(v,y){Pt(v,e,y),Pt(v,t,y),Pt(v,n,y),Gt(n,i),Gt(n,a),Gt(n,o),Gt(n,s),Gt(n,u),Pt(v,l,y),Pt(v,f,y),Pt(v,c,y),Pt(v,d,y);for(let m=0;m<b.length;m+=1)b[m]&&b[m].m(d,null);h||(p=[kn(i,"dragstart",r[11]),kn(o,"dragstart",r[12]),kn(u,"dragstart",r[13])],h=!0)},p(v,y){if(y&5){g=v[0].columnNames;let m;for(m=0;m<g.length;m+=1){const w=Cx(v,g,m);b[m]?b[m].p(w,y):(b[m]=Tx(w),b[m].c(),b[m].m(d,null))}for(;m<b.length;m+=1)b[m].d(1);b.length=g.length}},d(v){v&&Nt(e),v&&Nt(t),v&&Nt(n),v&&Nt(l),v&&Nt(f),v&&Nt(c),v&&Nt(d),Ls(b,v),h=!1,To(p)}}}function Tx(r){let e,t=r[17]+"",n,i,a,o;function s(...u){return r[14](r[17],...u)}return{c(){e=Yt("li"),n=ia(t),i=qt(),st(e,"draggable","true"),st(e,"class","draggable-item svelte-1ecko2")},m(u,l){Pt(u,e,l),Gt(e,n),Gt(e,i),a||(o=kn(e,"dragstart",s),a=!0)},p(u,l){r=u,l&1&&t!==(t=r[17]+"")&&Au(n,t)},d(u){u&&Nt(e),a=!1,o()}}}function zz(r){let e,t,n,i,a,o,s,u,l,f,c,d,h,p,g,b=r[0].dataAvail&&Ax(r);return{c(){e=Yt("div"),t=Yt("div"),n=Yt("div"),i=Yt("button"),i.textContent="➔",a=qt(),o=Yt("button"),o.textContent="↔",s=qt(),u=Yt("div"),l=qt(),f=Yt("div"),c=qt(),d=Yt("div"),h=qt(),b&&b.c(),st(i,"id","directed-arrow"),st(i,"class","arrow-btn svelte-1ecko2"),st(i,"title","Directed Arrow"),st(o,"id","undirected-arrow"),st(o,"class","arrow-btn svelte-1ecko2"),st(o,"title","Undirected Arrow"),st(u,"role","button"),st(u,"id","add-manifest-variable"),st(u,"title","Create Observed Variable"),st(u,"draggable","true"),st(u,"class","variable-button svelte-1ecko2"),st(u,"data-button-type",Ei),st(u,"tabindex","0"),st(f,"role","button"),st(f,"tabindex","0"),st(f,"id","add-latent-variable"),st(f,"title","Create Latent Variable"),st(f,"draggable","true"),st(f,"class","variable-button svelte-1ecko2"),st(f,"data-button-type",Li),st(d,"role","button"),st(d,"tabindex","0"),st(d,"id","add-constant-variable"),st(d,"class","variable-button svelte-1ecko2"),st(d,"title","Create Constant Variable"),st(d,"data-button-type","const"),st(d,"draggable","true"),st(n,"id","buttons"),st(n,"class","svelte-1ecko2"),st(t,"id","buttonCont"),st(t,"class","svelte-1ecko2"),st(e,"class","toolbox svelte-1ecko2")},m(v,y){Pt(v,e,y),Gt(e,t),Gt(t,n),Gt(n,i),Gt(n,a),Gt(n,o),Gt(n,s),Gt(n,u),Gt(n,l),Gt(n,f),Gt(n,c),Gt(n,d),Gt(e,h),b&&b.m(e,null),p||(g=[kn(i,"click",r[6]),kn(o,"click",r[7]),kn(u,"dragstart",r[8]),kn(f,"dragstart",r[9]),kn(d,"dragstart",r[10])],p=!0)},p(v,[y]){v[0].dataAvail?b?b.p(v,y):(b=Ax(v),b.c(),b.m(e,null)):b&&(b.d(1),b=null)},i:Yr,o:Yr,d(v){v&&Nt(e),b&&b.d(),p=!1,To(g)}}}function kx(r){r==="directed"?bootbox.alert("Connect two nodes with a directed edge by dragging from one to another while holding the SPACEC key. The direction will be from the first node you click to the second."):r==="undirected"?bootbox.alert("Connect two nodes with an undirected edge by dragging from one to another while holding the ALT or OPTION key."):bootbox.alert("Error: Unknown edge type.")}function qz(r,e,t){let n;Kr(r,sr,y=>t(0,n=y)),sr.subscribe(y=>{});function i(y){tr(sr,n.dragged=y,n)}function a(y,m){tr(sr,n.dragged="observed-with-name",n),tr(sr,n.draggedName=m,n)}function o(y){tr(sr,n.dragged="multiple",n)}function s(y){tr(sr,n.dragged="factor",n)}function u(y){tr(sr,n.dragged="growth",n)}return[n,i,a,o,s,u,()=>{kx("directed")},()=>{kx("undirected")},()=>{event.dataTransfer.setData("text/plain","node"),i(Ei)},()=>{i(Li)},()=>{i(es)},y=>o(),y=>s(),y=>u(),(y,m)=>a(m,y)]}class Gz extends Ir{constructor(e){super(),Dr(this,e,qz,zz,Nr,{})}}function $z(r){let e,t,n,i,a;const o=r[1].default,s=Ah(o,r,r[0],null);return i=new Gz({}),{c(){e=Yt("nav"),t=Yt("ul"),s&&s.c(),n=qt(),Qt(i.$$.fragment),st(t,"class","nav navbar-nav navbar-left"),st(e,"class","navbar navbar-default navbar-static-top navbar-left svelte-12n5yi9")},m(u,l){Pt(u,e,l),Gt(e,t),s&&s.m(t,null),Gt(e,n),Xt(i,e,null),a=!0},p(u,[l]){s&&s.p&&(!a||l&1)&&kh(s,o,u,u[0],a?Th(o,u[0],l,null):Lh(u[0]),null)},i(u){a||(xt(s,u),xt(i.$$.fragment,u),a=!0)},o(u){At(s,u),At(i.$$.fragment,u),a=!1},d(u){u&&Nt(e),s&&s.d(u),Kt(i)}}}function Uz(r,e,t){let{$$slots:n={},$$scope:i}=e;return r.$$set=a=>{"$$scope"in a&&t(0,i=a.$$scope)},[i,n]}class Hz extends Ir{constructor(e){super(),Dr(this,e,Uz,$z,Nr,{})}}function b2(r,e){if(r==null)throw new Error("Columnnames may not be null.");const n=Lr(jr).nodes(function(a){return a.isObserved()});if(n.length>0)for(var i=0;i<n.length;i++){const a=n[i],o=a.getLabel();r.includes(o)&&!a.isLinked()?a.link():!r.includes(o)&&a.isLinked()&&a.unlink()}}function fl(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var VL={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(r,e){(function(t){r.exports=t()})(function(){return function t(n,i,a){function o(l,f){if(!i[l]){if(!n[l]){var c=typeof fl=="function"&&fl;if(!f&&c)return c(l,!0);if(s)return s(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};n[l][0].call(h.exports,function(p){var g=n[l][1][p];return o(g||p)},h,h.exports,t,n,i,a)}return i[l].exports}for(var s=typeof fl=="function"&&fl,u=0;u<a.length;u++)o(a[u]);return o}({1:[function(t,n,i){var a=t("./utils"),o=t("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(u){for(var l,f,c,d,h,p,g,b=[],v=0,y=u.length,m=y,w=a.getTypeOf(u)!=="string";v<u.length;)m=y-v,c=w?(l=u[v++],f=v<y?u[v++]:0,v<y?u[v++]:0):(l=u.charCodeAt(v++),f=v<y?u.charCodeAt(v++):0,v<y?u.charCodeAt(v++):0),d=l>>2,h=(3&l)<<4|f>>4,p=1<m?(15&f)<<2|c>>6:64,g=2<m?63&c:64,b.push(s.charAt(d)+s.charAt(h)+s.charAt(p)+s.charAt(g));return b.join("")},i.decode=function(u){var l,f,c,d,h,p,g=0,b=0,v="data:";if(u.substr(0,v.length)===v)throw new Error("Invalid base64 input, it looks like a data url.");var y,m=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===s.charAt(64)&&m--,u.charAt(u.length-2)===s.charAt(64)&&m--,m%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=o.uint8array?new Uint8Array(0|m):new Array(0|m);g<u.length;)l=s.indexOf(u.charAt(g++))<<2|(d=s.indexOf(u.charAt(g++)))>>4,f=(15&d)<<4|(h=s.indexOf(u.charAt(g++)))>>2,c=(3&h)<<6|(p=s.indexOf(u.charAt(g++))),y[b++]=l,h!==64&&(y[b++]=f),p!==64&&(y[b++]=c);return y}},{"./support":30,"./utils":32}],2:[function(t,n,i){var a=t("./external"),o=t("./stream/DataWorker"),s=t("./stream/Crc32Probe"),u=t("./stream/DataLengthProbe");function l(f,c,d,h,p){this.compressedSize=f,this.uncompressedSize=c,this.crc32=d,this.compression=h,this.compressedContent=p}l.prototype={getContentWorker:function(){var f=new o(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),c=this;return f.on("end",function(){if(this.streamInfo.data_length!==c.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new o(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},l.createWorkerFrom=function(f,c,d){return f.pipe(new s).pipe(new u("uncompressedSize")).pipe(c.compressWorker(d)).pipe(new u("compressedSize")).withStreamInfo("compression",c)},n.exports=l},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,i){var a=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,i){var a=t("./utils"),o=function(){for(var s,u=[],l=0;l<256;l++){s=l;for(var f=0;f<8;f++)s=1&s?3988292384^s>>>1:s>>>1;u[l]=s}return u}();n.exports=function(s,u){return s!==void 0&&s.length?a.getTypeOf(s)!=="string"?function(l,f,c,d){var h=o,p=d+c;l^=-1;for(var g=d;g<p;g++)l=l>>>8^h[255&(l^f[g])];return-1^l}(0|u,s,s.length,0):function(l,f,c,d){var h=o,p=d+c;l^=-1;for(var g=d;g<p;g++)l=l>>>8^h[255&(l^f.charCodeAt(g))];return-1^l}(0|u,s,s.length,0):0}},{"./utils":32}],5:[function(t,n,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,n,i){var a=null;a=typeof Promise<"u"?Promise:t("lie"),n.exports={Promise:a}},{lie:37}],7:[function(t,n,i){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=t("pako"),s=t("./utils"),u=t("./stream/GenericWorker"),l=a?"uint8array":"array";function f(c,d){u.call(this,"FlateWorker/"+c),this._pako=null,this._pakoAction=c,this._pakoOptions=d,this.meta={}}i.magic="\b\0",s.inherits(f,u),f.prototype.processChunk=function(c){this.meta=c.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(l,c.data),!1)},f.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var c=this;this._pako.onData=function(d){c.push({data:d,meta:c.meta})}},i.compressWorker=function(c){return new f("Deflate",c)},i.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,i){function a(h,p){var g,b="";for(g=0;g<p;g++)b+=String.fromCharCode(255&h),h>>>=8;return b}function o(h,p,g,b,v,y){var m,w,S=h.file,A=h.compression,_=y!==l.utf8encode,E=s.transformTo("string",y(S.name)),k=s.transformTo("string",l.utf8encode(S.name)),M=S.comment,T=s.transformTo("string",y(M)),C=s.transformTo("string",l.utf8encode(M)),R=k.length!==S.name.length,x=C.length!==M.length,B="",D="",O="",G=S.dir,V=S.date,I={crc32:0,compressedSize:0,uncompressedSize:0};p&&!g||(I.crc32=h.crc32,I.compressedSize=h.compressedSize,I.uncompressedSize=h.uncompressedSize);var z=0;p&&(z|=8),_||!R&&!x||(z|=2048);var P=0,q=0;G&&(P|=16),v==="UNIX"?(q=798,P|=function(U,W){var X=U;return U||(X=W?16893:33204),(65535&X)<<16}(S.unixPermissions,G)):(q=20,P|=function(U){return 63&(U||0)}(S.dosPermissions)),m=V.getUTCHours(),m<<=6,m|=V.getUTCMinutes(),m<<=5,m|=V.getUTCSeconds()/2,w=V.getUTCFullYear()-1980,w<<=4,w|=V.getUTCMonth()+1,w<<=5,w|=V.getUTCDate(),R&&(D=a(1,1)+a(f(E),4)+k,B+="up"+a(D.length,2)+D),x&&(O=a(1,1)+a(f(T),4)+C,B+="uc"+a(O.length,2)+O);var F="";return F+=`
\0`,F+=a(z,2),F+=A.magic,F+=a(m,2),F+=a(w,2),F+=a(I.crc32,4),F+=a(I.compressedSize,4),F+=a(I.uncompressedSize,4),F+=a(E.length,2),F+=a(B.length,2),{fileRecord:c.LOCAL_FILE_HEADER+F+E+B,dirRecord:c.CENTRAL_FILE_HEADER+a(q,2)+F+a(T.length,2)+"\0\0\0\0"+a(P,4)+a(b,4)+E+B+T}}var s=t("../utils"),u=t("../stream/GenericWorker"),l=t("../utf8"),f=t("../crc32"),c=t("../signature");function d(h,p,g,b){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=g,this.encodeFileName=b,this.streamFiles=h,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(d,u),d.prototype.push=function(h){var p=h.meta.percent||0,g=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(h):(this.bytesWritten+=h.data.length,u.prototype.push.call(this,{data:h.data,meta:{currentFile:this.currentFile,percent:g?(p+100*(g-b-1))/g:100}}))},d.prototype.openedSource=function(h){this.currentSourceOffset=this.bytesWritten,this.currentFile=h.file.name;var p=this.streamFiles&&!h.file.dir;if(p){var g=o(h,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},d.prototype.closedSource=function(h){this.accumulate=!1;var p=this.streamFiles&&!h.file.dir,g=o(h,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),p)this.push({data:function(b){return c.DATA_DESCRIPTOR+a(b.crc32,4)+a(b.compressedSize,4)+a(b.uncompressedSize,4)}(h),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},d.prototype.flush=function(){for(var h=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var g=this.bytesWritten-h,b=function(v,y,m,w,S){var A=s.transformTo("string",S(w));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(v,2)+a(v,2)+a(y,4)+a(m,4)+a(A.length,2)+A}(this.dirRecords.length,g,h,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},d.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},d.prototype.registerPrevious=function(h){this._sources.push(h);var p=this;return h.on("data",function(g){p.processChunk(g)}),h.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),h.on("error",function(g){p.error(g)}),this},d.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},d.prototype.error=function(h){var p=this._sources;if(!u.prototype.error.call(this,h))return!1;for(var g=0;g<p.length;g++)try{p[g].error(h)}catch{}return!0},d.prototype.lock=function(){u.prototype.lock.call(this);for(var h=this._sources,p=0;p<h.length;p++)h[p].lock()},n.exports=d},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,i){var a=t("../compressions"),o=t("./ZipFileWorker");i.generateWorker=function(s,u,l){var f=new o(u.streamFiles,l,u.platform,u.encodeFileName),c=0;try{s.forEach(function(d,h){c++;var p=function(y,m){var w=y||m,S=a[w];if(!S)throw new Error(w+" is not a valid compression method !");return S}(h.options.compression,u.compression),g=h.options.compressionOptions||u.compressionOptions||{},b=h.dir,v=h.date;h._compressWorker(p,g).withStreamInfo("file",{name:d,dir:b,date:v,comment:h.comment||"",unixPermissions:h.unixPermissions,dosPermissions:h.dosPermissions}).pipe(f)}),f.entriesCount=c}catch(d){f.error(d)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,i){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new a;for(var s in this)typeof this[s]!="function"&&(o[s]=this[s]);return o}}(a.prototype=t("./object")).loadAsync=t("./load"),a.support=t("./support"),a.defaults=t("./defaults"),a.version="3.10.1",a.loadAsync=function(o,s){return new a().loadAsync(o,s)},a.external=t("./external"),n.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,i){var a=t("./utils"),o=t("./external"),s=t("./utf8"),u=t("./zipEntries"),l=t("./stream/Crc32Probe"),f=t("./nodejsUtils");function c(d){return new o.Promise(function(h,p){var g=d.decompressed.getContentWorker().pipe(new l);g.on("error",function(b){p(b)}).on("end",function(){g.streamInfo.crc32!==d.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):h()}).resume()})}n.exports=function(d,h){var p=this;return h=a.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),f.isNode&&f.isStream(d)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",d,!0,h.optimizedBinaryString,h.base64).then(function(g){var b=new u(h);return b.load(g),b}).then(function(g){var b=[o.Promise.resolve(g)],v=g.files;if(h.checkCRC32)for(var y=0;y<v.length;y++)b.push(c(v[y]));return o.Promise.all(b)}).then(function(g){for(var b=g.shift(),v=b.files,y=0;y<v.length;y++){var m=v[y],w=m.fileNameStr,S=a.resolve(m.fileNameStr);p.file(S,m.decompressed,{binary:!0,optimizedBinaryString:!0,date:m.date,dir:m.dir,comment:m.fileCommentStr.length?m.fileCommentStr:null,unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions,createFolders:h.createFolders}),m.dir||(p.file(S).unsafeOriginalName=w)}return b.zipComment.length&&(p.comment=b.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,i){var a=t("../utils"),o=t("../stream/GenericWorker");function s(u,l){o.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(l)}a.inherits(s,o),s.prototype._bindStream=function(u){var l=this;(this._stream=u).pause(),u.on("data",function(f){l.push({data:f,meta:{percent:0}})}).on("error",function(f){l.isPaused?this.generatedError=f:l.error(f)}).on("end",function(){l.isPaused?l._upstreamEnded=!0:l.end()})},s.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,i){var a=t("readable-stream").Readable;function o(s,u,l){a.call(this,u),this._helper=s;var f=this;s.on("data",function(c,d){f.push(c)||f._helper.pause(),l&&l(d)}).on("error",function(c){f.emit("error",c)}).on("end",function(){f.push(null)})}t("../utils").inherits(o,a),o.prototype._read=function(){this._helper.resume()},n.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,n,i){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,o);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,o)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var o=new Buffer(a);return o.fill(0),o},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(t,n,i){function a(S,A,_){var E,k=s.getTypeOf(A),M=s.extend(_||{},f);M.date=M.date||new Date,M.compression!==null&&(M.compression=M.compression.toUpperCase()),typeof M.unixPermissions=="string"&&(M.unixPermissions=parseInt(M.unixPermissions,8)),M.unixPermissions&&16384&M.unixPermissions&&(M.dir=!0),M.dosPermissions&&16&M.dosPermissions&&(M.dir=!0),M.dir&&(S=v(S)),M.createFolders&&(E=b(S))&&y.call(this,E,!0);var T=k==="string"&&M.binary===!1&&M.base64===!1;_&&_.binary!==void 0||(M.binary=!T),(A instanceof c&&A.uncompressedSize===0||M.dir||!A||A.length===0)&&(M.base64=!1,M.binary=!0,A="",M.compression="STORE",k="string");var C=null;C=A instanceof c||A instanceof u?A:p.isNode&&p.isStream(A)?new g(S,A):s.prepareContent(S,A,M.binary,M.optimizedBinaryString,M.base64);var R=new d(S,C,M);this.files[S]=R}var o=t("./utf8"),s=t("./utils"),u=t("./stream/GenericWorker"),l=t("./stream/StreamHelper"),f=t("./defaults"),c=t("./compressedObject"),d=t("./zipObject"),h=t("./generate"),p=t("./nodejsUtils"),g=t("./nodejs/NodejsStreamInputAdapter"),b=function(S){S.slice(-1)==="/"&&(S=S.substring(0,S.length-1));var A=S.lastIndexOf("/");return 0<A?S.substring(0,A):""},v=function(S){return S.slice(-1)!=="/"&&(S+="/"),S},y=function(S,A){return A=A!==void 0?A:f.createFolders,S=v(S),this.files[S]||a.call(this,S,null,{dir:!0,createFolders:A}),this.files[S]};function m(S){return Object.prototype.toString.call(S)==="[object RegExp]"}var w={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(S){var A,_,E;for(A in this.files)E=this.files[A],(_=A.slice(this.root.length,A.length))&&A.slice(0,this.root.length)===this.root&&S(_,E)},filter:function(S){var A=[];return this.forEach(function(_,E){S(_,E)&&A.push(E)}),A},file:function(S,A,_){if(arguments.length!==1)return S=this.root+S,a.call(this,S,A,_),this;if(m(S)){var E=S;return this.filter(function(M,T){return!T.dir&&E.test(M)})}var k=this.files[this.root+S];return k&&!k.dir?k:null},folder:function(S){if(!S)return this;if(m(S))return this.filter(function(k,M){return M.dir&&S.test(k)});var A=this.root+S,_=y.call(this,A),E=this.clone();return E.root=_.name,E},remove:function(S){S=this.root+S;var A=this.files[S];if(A||(S.slice(-1)!=="/"&&(S+="/"),A=this.files[S]),A&&!A.dir)delete this.files[S];else for(var _=this.filter(function(k,M){return M.name.slice(0,S.length)===S}),E=0;E<_.length;E++)delete this.files[_[E].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(S){var A,_={};try{if((_=s.extend(S||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=_.type.toLowerCase(),_.compression=_.compression.toUpperCase(),_.type==="binarystring"&&(_.type="string"),!_.type)throw new Error("No output type specified.");s.checkSupport(_.type),_.platform!=="darwin"&&_.platform!=="freebsd"&&_.platform!=="linux"&&_.platform!=="sunos"||(_.platform="UNIX"),_.platform==="win32"&&(_.platform="DOS");var E=_.comment||this.comment||"";A=h.generateWorker(this,_,E)}catch(k){(A=new u("error")).error(k)}return new l(A,_.type||"string",_.mimeType)},generateAsync:function(S,A){return this.generateInternalStream(S).accumulate(A)},generateNodeStream:function(S,A){return(S=S||{}).type||(S.type="nodebuffer"),this.generateInternalStream(S).toNodejsStream(A)}};n.exports=w},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,i){n.exports=t("stream")},{stream:void 0}],17:[function(t,n,i){var a=t("./DataReader");function o(s){a.call(this,s);for(var u=0;u<this.data.length;u++)s[u]=255&s[u]}t("../utils").inherits(o,a),o.prototype.byteAt=function(s){return this.data[this.zero+s]},o.prototype.lastIndexOfSignature=function(s){for(var u=s.charCodeAt(0),l=s.charCodeAt(1),f=s.charCodeAt(2),c=s.charCodeAt(3),d=this.length-4;0<=d;--d)if(this.data[d]===u&&this.data[d+1]===l&&this.data[d+2]===f&&this.data[d+3]===c)return d-this.zero;return-1},o.prototype.readAndCheckSignature=function(s){var u=s.charCodeAt(0),l=s.charCodeAt(1),f=s.charCodeAt(2),c=s.charCodeAt(3),d=this.readData(4);return u===d[0]&&l===d[1]&&f===d[2]&&c===d[3]},o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},n.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,n,i){var a=t("../utils");function o(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var u,l=0;for(this.checkOffset(s),u=this.index+s-1;u>=this.index;u--)l=(l<<8)+this.byteAt(u);return this.index+=s,l},readString:function(s){return a.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},n.exports=o},{"../utils":32}],19:[function(t,n,i){var a=t("./Uint8ArrayReader");function o(s){a.call(this,s)}t("../utils").inherits(o,a),o.prototype.readData=function(s){this.checkOffset(s);var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},n.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,i){var a=t("./DataReader");function o(s){a.call(this,s)}t("../utils").inherits(o,a),o.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},o.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},o.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},o.prototype.readData=function(s){this.checkOffset(s);var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},n.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,n,i){var a=t("./ArrayReader");function o(s){a.call(this,s)}t("../utils").inherits(o,a),o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},n.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,i){var a=t("../utils"),o=t("../support"),s=t("./ArrayReader"),u=t("./StringReader"),l=t("./NodeBufferReader"),f=t("./Uint8ArrayReader");n.exports=function(c){var d=a.getTypeOf(c);return a.checkSupport(d),d!=="string"||o.uint8array?d==="nodebuffer"?new l(c):o.uint8array?new f(a.transformTo("uint8array",c)):new s(a.transformTo("array",c)):new u(c)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,i){var a=t("./GenericWorker"),o=t("../utils");function s(u){a.call(this,"ConvertWorker to "+u),this.destType=u}o.inherits(s,a),s.prototype.processChunk=function(u){this.push({data:o.transformTo(this.destType,u.data),meta:u.meta})},n.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,i){var a=t("./GenericWorker"),o=t("../crc32");function s(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(s,a),s.prototype.processChunk=function(u){this.streamInfo.crc32=o(u.data,this.streamInfo.crc32||0),this.push(u)},n.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,i){var a=t("../utils"),o=t("./GenericWorker");function s(u){o.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}a.inherits(s,o),s.prototype.processChunk=function(u){if(u){var l=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=l+u.data.length}o.prototype.processChunk.call(this,u)},n.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,i){var a=t("../utils"),o=t("./GenericWorker");function s(u){o.call(this,"DataWorker");var l=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(f){l.dataIsReady=!0,l.data=f,l.max=f&&f.length||0,l.type=a.getTypeOf(f),l.isPaused||l._tickAndRepeat()},function(f){l.error(f)})}a.inherits(s,o),s.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,l=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,l);break;case"uint8array":u=this.data.subarray(this.index,l);break;case"array":case"nodebuffer":u=this.data.slice(this.index,l)}return this.index=l,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,i){function a(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,s){return this._listeners[o].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,s){if(this._listeners[o])for(var u=0;u<this._listeners[o].length;u++)this._listeners[o][u].call(this,s)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var s=this;return o.on("data",function(u){s.processChunk(u)}),o.on("end",function(){s.end()}),o.on("error",function(u){s.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,s){return this.extraStreamInfo[o]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},n.exports=a},{}],29:[function(t,n,i){var a=t("../utils"),o=t("./ConvertWorker"),s=t("./GenericWorker"),u=t("../base64"),l=t("../support"),f=t("../external"),c=null;if(l.nodestream)try{c=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function d(p,g){return new f.Promise(function(b,v){var y=[],m=p._internalType,w=p._outputType,S=p._mimeType;p.on("data",function(A,_){y.push(A),g&&g(_)}).on("error",function(A){y=[],v(A)}).on("end",function(){try{var A=function(_,E,k){switch(_){case"blob":return a.newBlob(a.transformTo("arraybuffer",E),k);case"base64":return u.encode(E);default:return a.transformTo(_,E)}}(w,function(_,E){var k,M=0,T=null,C=0;for(k=0;k<E.length;k++)C+=E[k].length;switch(_){case"string":return E.join("");case"array":return Array.prototype.concat.apply([],E);case"uint8array":for(T=new Uint8Array(C),k=0;k<E.length;k++)T.set(E[k],M),M+=E[k].length;return T;case"nodebuffer":return Buffer.concat(E);default:throw new Error("concat : unsupported type '"+_+"'")}}(m,y),S);b(A)}catch(_){v(_)}y=[]}).resume()})}function h(p,g,b){var v=g;switch(g){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=g,this._mimeType=b,a.checkSupport(v),this._worker=p.pipe(new o(v)),p.lock()}catch(y){this._worker=new s("error"),this._worker.error(y)}}h.prototype={accumulate:function(p){return d(this,p)},on:function(p,g){var b=this;return p==="data"?this._worker.on(p,function(v){g.call(b,v.data,v.meta)}):this._worker.on(p,function(){a.delay(g,arguments,b)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:this._outputType!=="nodebuffer"},p)}},n.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var a=new ArrayBuffer(0);try{i.blob=new Blob([a],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(a),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,i){for(var a=t("./utils"),o=t("./support"),s=t("./nodejsUtils"),u=t("./stream/GenericWorker"),l=new Array(256),f=0;f<256;f++)l[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;l[254]=l[254]=1;function c(){u.call(this,"utf-8 decode"),this.leftOver=null}function d(){u.call(this,"utf-8 encode")}i.utf8encode=function(h){return o.nodebuffer?s.newBufferFrom(h,"utf-8"):function(p){var g,b,v,y,m,w=p.length,S=0;for(y=0;y<w;y++)(64512&(b=p.charCodeAt(y)))==55296&&y+1<w&&(64512&(v=p.charCodeAt(y+1)))==56320&&(b=65536+(b-55296<<10)+(v-56320),y++),S+=b<128?1:b<2048?2:b<65536?3:4;for(g=o.uint8array?new Uint8Array(S):new Array(S),y=m=0;m<S;y++)(64512&(b=p.charCodeAt(y)))==55296&&y+1<w&&(64512&(v=p.charCodeAt(y+1)))==56320&&(b=65536+(b-55296<<10)+(v-56320),y++),b<128?g[m++]=b:(b<2048?g[m++]=192|b>>>6:(b<65536?g[m++]=224|b>>>12:(g[m++]=240|b>>>18,g[m++]=128|b>>>12&63),g[m++]=128|b>>>6&63),g[m++]=128|63&b);return g}(h)},i.utf8decode=function(h){return o.nodebuffer?a.transformTo("nodebuffer",h).toString("utf-8"):function(p){var g,b,v,y,m=p.length,w=new Array(2*m);for(g=b=0;g<m;)if((v=p[g++])<128)w[b++]=v;else if(4<(y=l[v]))w[b++]=65533,g+=y-1;else{for(v&=y===2?31:y===3?15:7;1<y&&g<m;)v=v<<6|63&p[g++],y--;1<y?w[b++]=65533:v<65536?w[b++]=v:(v-=65536,w[b++]=55296|v>>10&1023,w[b++]=56320|1023&v)}return w.length!==b&&(w.subarray?w=w.subarray(0,b):w.length=b),a.applyFromCharCode(w)}(h=a.transformTo(o.uint8array?"uint8array":"array",h))},a.inherits(c,u),c.prototype.processChunk=function(h){var p=a.transformTo(o.uint8array?"uint8array":"array",h.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var g=p;(p=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),p.set(g,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var b=function(y,m){var w;for((m=m||y.length)>y.length&&(m=y.length),w=m-1;0<=w&&(192&y[w])==128;)w--;return w<0||w===0?m:w+l[y[w]]>m?w:m}(p),v=p;b!==p.length&&(o.uint8array?(v=p.subarray(0,b),this.leftOver=p.subarray(b,p.length)):(v=p.slice(0,b),this.leftOver=p.slice(b,p.length))),this.push({data:i.utf8decode(v),meta:h.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=c,a.inherits(d,u),d.prototype.processChunk=function(h){this.push({data:i.utf8encode(h.data),meta:h.meta})},i.Utf8EncodeWorker=d},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,i){var a=t("./support"),o=t("./base64"),s=t("./nodejsUtils"),u=t("./external");function l(g){return g}function f(g,b){for(var v=0;v<g.length;++v)b[v]=255&g.charCodeAt(v);return b}t("setimmediate"),i.newBlob=function(g,b){i.checkSupport("blob");try{return new Blob([g],{type:b})}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(g),v.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(g,b,v){var y=[],m=0,w=g.length;if(w<=v)return String.fromCharCode.apply(null,g);for(;m<w;)b==="array"||b==="nodebuffer"?y.push(String.fromCharCode.apply(null,g.slice(m,Math.min(m+v,w)))):y.push(String.fromCharCode.apply(null,g.subarray(m,Math.min(m+v,w)))),m+=v;return y.join("")},stringifyByChar:function(g){for(var b="",v=0;v<g.length;v++)b+=String.fromCharCode(g[v]);return b},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function d(g){var b=65536,v=i.getTypeOf(g),y=!0;if(v==="uint8array"?y=c.applyCanBeUsed.uint8array:v==="nodebuffer"&&(y=c.applyCanBeUsed.nodebuffer),y)for(;1<b;)try{return c.stringifyByChunk(g,v,b)}catch{b=Math.floor(b/2)}return c.stringifyByChar(g)}function h(g,b){for(var v=0;v<g.length;v++)b[v]=g[v];return b}i.applyFromCharCode=d;var p={};p.string={string:l,array:function(g){return f(g,new Array(g.length))},arraybuffer:function(g){return p.string.uint8array(g).buffer},uint8array:function(g){return f(g,new Uint8Array(g.length))},nodebuffer:function(g){return f(g,s.allocBuffer(g.length))}},p.array={string:d,array:l,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return s.newBufferFrom(g)}},p.arraybuffer={string:function(g){return d(new Uint8Array(g))},array:function(g){return h(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:l,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return s.newBufferFrom(new Uint8Array(g))}},p.uint8array={string:d,array:function(g){return h(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:l,nodebuffer:function(g){return s.newBufferFrom(g)}},p.nodebuffer={string:d,array:function(g){return h(g,new Array(g.length))},arraybuffer:function(g){return p.nodebuffer.uint8array(g).buffer},uint8array:function(g){return h(g,new Uint8Array(g.length))},nodebuffer:l},i.transformTo=function(g,b){if(b=b||"",!g)return b;i.checkSupport(g);var v=i.getTypeOf(b);return p[v][g](b)},i.resolve=function(g){for(var b=g.split("/"),v=[],y=0;y<b.length;y++){var m=b[y];m==="."||m===""&&y!==0&&y!==b.length-1||(m===".."?v.pop():v.push(m))}return v.join("/")},i.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":a.nodebuffer&&s.isBuffer(g)?"nodebuffer":a.uint8array&&g instanceof Uint8Array?"uint8array":a.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(g){if(!a[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(g){var b,v,y="";for(v=0;v<(g||"").length;v++)y+="\\x"+((b=g.charCodeAt(v))<16?"0":"")+b.toString(16).toUpperCase();return y},i.delay=function(g,b,v){setImmediate(function(){g.apply(v||null,b||[])})},i.inherits=function(g,b){function v(){}v.prototype=b.prototype,g.prototype=new v},i.extend=function(){var g,b,v={};for(g=0;g<arguments.length;g++)for(b in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],b)&&v[b]===void 0&&(v[b]=arguments[g][b]);return v},i.prepareContent=function(g,b,v,y,m){return u.Promise.resolve(b).then(function(w){return a.blob&&(w instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(w))!==-1)&&typeof FileReader<"u"?new u.Promise(function(S,A){var _=new FileReader;_.onload=function(E){S(E.target.result)},_.onerror=function(E){A(E.target.error)},_.readAsArrayBuffer(w)}):w}).then(function(w){var S=i.getTypeOf(w);return S?(S==="arraybuffer"?w=i.transformTo("uint8array",w):S==="string"&&(m?w=o.decode(w):v&&y!==!0&&(w=function(A){return f(A,a.uint8array?new Uint8Array(A.length):new Array(A.length))}(w))),w):u.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,i){var a=t("./reader/readerFor"),o=t("./utils"),s=t("./signature"),u=t("./zipEntry"),l=t("./support");function f(c){this.files=[],this.loadOptions=c}f.prototype={checkSignature:function(c){if(!this.reader.readAndCheckSignature(c)){this.reader.index-=4;var d=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(d)+", expected "+o.pretty(c)+")")}},isSignature:function(c,d){var h=this.reader.index;this.reader.setIndex(c);var p=this.reader.readString(4)===d;return this.reader.setIndex(h),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var c=this.reader.readData(this.zipCommentLength),d=l.uint8array?"uint8array":"array",h=o.transformTo(d,c);this.zipComment=this.loadOptions.decodeFileName(h)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var c,d,h,p=this.zip64EndOfCentralSize-44;0<p;)c=this.reader.readInt(2),d=this.reader.readInt(4),h=this.reader.readData(d),this.zip64ExtensibleData[c]={id:c,length:d,value:h}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var c,d;for(c=0;c<this.files.length;c++)d=this.files[c],this.reader.setIndex(d.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),d.readLocalPart(this.reader),d.handleUTF8(),d.processAttributes()},readCentralDir:function(){var c;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(c=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(c);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var c=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(c<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(c);var d=c;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(c=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(c),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var h=this.centralDirOffset+this.centralDirSize;this.zip64&&(h+=20,h+=12+this.zip64EndOfCentralSize);var p=d-h;if(0<p)this.isSignature(d,s.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(c){this.reader=a(c)},load:function(c){this.prepareReader(c),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,i){var a=t("./reader/readerFor"),o=t("./utils"),s=t("./compressedObject"),u=t("./crc32"),l=t("./utf8"),f=t("./compressions"),c=t("./support");function d(h,p){this.options=h,this.loadOptions=p}d.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(h){var p,g;if(h.skip(22),this.fileNameLength=h.readInt(2),g=h.readInt(2),this.fileName=h.readData(this.fileNameLength),h.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=function(b){for(var v in f)if(Object.prototype.hasOwnProperty.call(f,v)&&f[v].magic===b)return f[v];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,p,h.readData(this.compressedSize))},readCentralPart:function(h){this.versionMadeBy=h.readInt(2),h.skip(2),this.bitFlag=h.readInt(2),this.compressionMethod=h.readString(2),this.date=h.readDate(),this.crc32=h.readInt(4),this.compressedSize=h.readInt(4),this.uncompressedSize=h.readInt(4);var p=h.readInt(2);if(this.extraFieldsLength=h.readInt(2),this.fileCommentLength=h.readInt(2),this.diskNumberStart=h.readInt(2),this.internalFileAttributes=h.readInt(2),this.externalFileAttributes=h.readInt(4),this.localHeaderOffset=h.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");h.skip(p),this.readExtraFields(h),this.parseZIP64ExtraField(h),this.fileComment=h.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var h=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),h==0&&(this.dosPermissions=63&this.externalFileAttributes),h==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var h=a(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=h.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=h.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=h.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=h.readInt(4))}},readExtraFields:function(h){var p,g,b,v=h.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});h.index+4<v;)p=h.readInt(2),g=h.readInt(2),b=h.readData(g),this.extraFields[p]={id:p,length:g,value:b};h.setIndex(v)},handleUTF8:function(){var h=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=l.utf8decode(this.fileName),this.fileCommentStr=l.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var g=o.transformTo(h,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var v=o.transformTo(h,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var h=this.extraFields[28789];if(h){var p=a(h.value);return p.readInt(1)!==1||u(this.fileName)!==p.readInt(4)?null:l.utf8decode(p.readData(h.length-5))}return null},findExtraFieldUnicodeComment:function(){var h=this.extraFields[25461];if(h){var p=a(h.value);return p.readInt(1)!==1||u(this.fileComment)!==p.readInt(4)?null:l.utf8decode(p.readData(h.length-5))}return null}},n.exports=d},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,i){function a(p,g,b){this.name=p,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=g,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var o=t("./stream/StreamHelper"),s=t("./stream/DataWorker"),u=t("./utf8"),l=t("./compressedObject"),f=t("./stream/GenericWorker");a.prototype={internalStream:function(p){var g=null,b="string";try{if(!p)throw new Error("No output type specified.");var v=(b=p.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),g=this._decompressWorker();var y=!this._dataBinary;y&&!v&&(g=g.pipe(new u.Utf8EncodeWorker)),!y&&v&&(g=g.pipe(new u.Utf8DecodeWorker))}catch(m){(g=new f("error")).error(m)}return new o(g,b,"")},async:function(p,g){return this.internalStream(p).accumulate(g)},nodeStream:function(p,g){return this.internalStream(p||"nodebuffer").toNodejsStream(g)},_compressWorker:function(p,g){if(this._data instanceof l&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new u.Utf8EncodeWorker)),l.createWorkerFrom(b,p,g)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof f?this._data:new s(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],d=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<c.length;h++)a.prototype[c[h]]=d;n.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,i){(function(a){var o,s,u=a.MutationObserver||a.WebKitMutationObserver;if(u){var l=0,f=new u(p),c=a.document.createTextNode("");f.observe(c,{characterData:!0}),o=function(){c.data=l=++l%2}}else if(a.setImmediate||a.MessageChannel===void 0)o="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var g=a.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},a.document.documentElement.appendChild(g)}:function(){setTimeout(p,0)};else{var d=new a.MessageChannel;d.port1.onmessage=p,o=function(){d.port2.postMessage(0)}}var h=[];function p(){var g,b;s=!0;for(var v=h.length;v;){for(b=h,h=[],g=-1;++g<v;)b[g]();v=h.length}s=!1}n.exports=function(g){h.push(g)!==1||s||o()}}).call(this,typeof kt<"u"?kt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,n,i){var a=t("immediate");function o(){}var s={},u=["REJECTED"],l=["FULFILLED"],f=["PENDING"];function c(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,v!==o&&g(this,v)}function d(v,y,m){this.promise=v,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof m=="function"&&(this.onRejected=m,this.callRejected=this.otherCallRejected)}function h(v,y,m){a(function(){var w;try{w=y(m)}catch(S){return s.reject(v,S)}w===v?s.reject(v,new TypeError("Cannot resolve promise with itself")):s.resolve(v,w)})}function p(v){var y=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof y=="function")return function(){y.apply(v,arguments)}}function g(v,y){var m=!1;function w(_){m||(m=!0,s.reject(v,_))}function S(_){m||(m=!0,s.resolve(v,_))}var A=b(function(){y(S,w)});A.status==="error"&&w(A.value)}function b(v,y){var m={};try{m.value=v(y),m.status="success"}catch(w){m.status="error",m.value=w}return m}(n.exports=c).prototype.finally=function(v){if(typeof v!="function")return this;var y=this.constructor;return this.then(function(m){return y.resolve(v()).then(function(){return m})},function(m){return y.resolve(v()).then(function(){throw m})})},c.prototype.catch=function(v){return this.then(null,v)},c.prototype.then=function(v,y){if(typeof v!="function"&&this.state===l||typeof y!="function"&&this.state===u)return this;var m=new this.constructor(o);return this.state!==f?h(m,this.state===l?v:y,this.outcome):this.queue.push(new d(m,v,y)),m},d.prototype.callFulfilled=function(v){s.resolve(this.promise,v)},d.prototype.otherCallFulfilled=function(v){h(this.promise,this.onFulfilled,v)},d.prototype.callRejected=function(v){s.reject(this.promise,v)},d.prototype.otherCallRejected=function(v){h(this.promise,this.onRejected,v)},s.resolve=function(v,y){var m=b(p,y);if(m.status==="error")return s.reject(v,m.value);var w=m.value;if(w)g(v,w);else{v.state=l,v.outcome=y;for(var S=-1,A=v.queue.length;++S<A;)v.queue[S].callFulfilled(y)}return v},s.reject=function(v,y){v.state=u,v.outcome=y;for(var m=-1,w=v.queue.length;++m<w;)v.queue[m].callRejected(y);return v},c.resolve=function(v){return v instanceof this?v:s.resolve(new this(o),v)},c.reject=function(v){var y=new this(o);return s.reject(y,v)},c.all=function(v){var y=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var m=v.length,w=!1;if(!m)return this.resolve([]);for(var S=new Array(m),A=0,_=-1,E=new this(o);++_<m;)k(v[_],_);return E;function k(M,T){y.resolve(M).then(function(C){S[T]=C,++A!==m||w||(w=!0,s.resolve(E,S))},function(C){w||(w=!0,s.reject(E,C))})}},c.race=function(v){var y=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var m=v.length,w=!1;if(!m)return this.resolve([]);for(var S=-1,A=new this(o);++S<m;)_=v[S],y.resolve(_).then(function(E){w||(w=!0,s.resolve(A,E))},function(E){w||(w=!0,s.reject(A,E))});var _;return A}},{immediate:36}],38:[function(t,n,i){var a={};(0,t("./lib/utils/common").assign)(a,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),n.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,i){var a=t("./zlib/deflate"),o=t("./utils/common"),s=t("./utils/strings"),u=t("./zlib/messages"),l=t("./zlib/zstream"),f=Object.prototype.toString,c=0,d=-1,h=0,p=8;function g(v){if(!(this instanceof g))return new g(v);this.options=o.assign({level:d,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},v||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var m=a.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(m!==c)throw new Error(u[m]);if(y.header&&a.deflateSetHeader(this.strm,y.header),y.dictionary){var w;if(w=typeof y.dictionary=="string"?s.string2buf(y.dictionary):f.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(m=a.deflateSetDictionary(this.strm,w))!==c)throw new Error(u[m]);this._dict_set=!0}}function b(v,y){var m=new g(y);if(m.push(v,!0),m.err)throw m.msg||u[m.err];return m.result}g.prototype.push=function(v,y){var m,w,S=this.strm,A=this.options.chunkSize;if(this.ended)return!1;w=y===~~y?y:y===!0?4:0,typeof v=="string"?S.input=s.string2buf(v):f.call(v)==="[object ArrayBuffer]"?S.input=new Uint8Array(v):S.input=v,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new o.Buf8(A),S.next_out=0,S.avail_out=A),(m=a.deflate(S,w))!==1&&m!==c)return this.onEnd(m),!(this.ended=!0);S.avail_out!==0&&(S.avail_in!==0||w!==4&&w!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(o.shrinkBuf(S.output,S.next_out))):this.onData(o.shrinkBuf(S.output,S.next_out)))}while((0<S.avail_in||S.avail_out===0)&&m!==1);return w===4?(m=a.deflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===c):w!==2||(this.onEnd(c),!(S.avail_out=0))},g.prototype.onData=function(v){this.chunks.push(v)},g.prototype.onEnd=function(v){v===c&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},i.Deflate=g,i.deflate=b,i.deflateRaw=function(v,y){return(y=y||{}).raw=!0,b(v,y)},i.gzip=function(v,y){return(y=y||{}).gzip=!0,b(v,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,i){var a=t("./zlib/inflate"),o=t("./utils/common"),s=t("./utils/strings"),u=t("./zlib/constants"),l=t("./zlib/messages"),f=t("./zlib/zstream"),c=t("./zlib/gzheader"),d=Object.prototype.toString;function h(g){if(!(this instanceof h))return new h(g);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},g||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||g&&g.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&!(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var v=a.inflateInit2(this.strm,b.windowBits);if(v!==u.Z_OK)throw new Error(l[v]);this.header=new c,a.inflateGetHeader(this.strm,this.header)}function p(g,b){var v=new h(b);if(v.push(g,!0),v.err)throw v.msg||l[v.err];return v.result}h.prototype.push=function(g,b){var v,y,m,w,S,A,_=this.strm,E=this.options.chunkSize,k=this.options.dictionary,M=!1;if(this.ended)return!1;y=b===~~b?b:b===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof g=="string"?_.input=s.binstring2buf(g):d.call(g)==="[object ArrayBuffer]"?_.input=new Uint8Array(g):_.input=g,_.next_in=0,_.avail_in=_.input.length;do{if(_.avail_out===0&&(_.output=new o.Buf8(E),_.next_out=0,_.avail_out=E),(v=a.inflate(_,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&k&&(A=typeof k=="string"?s.string2buf(k):d.call(k)==="[object ArrayBuffer]"?new Uint8Array(k):k,v=a.inflateSetDictionary(this.strm,A)),v===u.Z_BUF_ERROR&&M===!0&&(v=u.Z_OK,M=!1),v!==u.Z_STREAM_END&&v!==u.Z_OK)return this.onEnd(v),!(this.ended=!0);_.next_out&&(_.avail_out!==0&&v!==u.Z_STREAM_END&&(_.avail_in!==0||y!==u.Z_FINISH&&y!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(m=s.utf8border(_.output,_.next_out),w=_.next_out-m,S=s.buf2string(_.output,m),_.next_out=w,_.avail_out=E-w,w&&o.arraySet(_.output,_.output,m,w,0),this.onData(S)):this.onData(o.shrinkBuf(_.output,_.next_out)))),_.avail_in===0&&_.avail_out===0&&(M=!0)}while((0<_.avail_in||_.avail_out===0)&&v!==u.Z_STREAM_END);return v===u.Z_STREAM_END&&(y=u.Z_FINISH),y===u.Z_FINISH?(v=a.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===u.Z_OK):y!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(_.avail_out=0))},h.prototype.onData=function(g){this.chunks.push(g)},h.prototype.onEnd=function(g){g===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},i.Inflate=h,i.inflate=p,i.inflateRaw=function(g,b){return(b=b||{}).raw=!0,p(g,b)},i.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,i){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(u){for(var l=Array.prototype.slice.call(arguments,1);l.length;){var f=l.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var c in f)f.hasOwnProperty(c)&&(u[c]=f[c])}}return u},i.shrinkBuf=function(u,l){return u.length===l?u:u.subarray?u.subarray(0,l):(u.length=l,u)};var o={arraySet:function(u,l,f,c,d){if(l.subarray&&u.subarray)u.set(l.subarray(f,f+c),d);else for(var h=0;h<c;h++)u[d+h]=l[f+h]},flattenChunks:function(u){var l,f,c,d,h,p;for(l=c=0,f=u.length;l<f;l++)c+=u[l].length;for(p=new Uint8Array(c),l=d=0,f=u.length;l<f;l++)h=u[l],p.set(h,d),d+=h.length;return p}},s={arraySet:function(u,l,f,c,d){for(var h=0;h<c;h++)u[d+h]=l[f+h]},flattenChunks:function(u){return[].concat.apply([],u)}};i.setTyped=function(u){u?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,s))},i.setTyped(a)},{}],42:[function(t,n,i){var a=t("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var u=new a.Buf8(256),l=0;l<256;l++)u[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function f(c,d){if(d<65537&&(c.subarray&&s||!c.subarray&&o))return String.fromCharCode.apply(null,a.shrinkBuf(c,d));for(var h="",p=0;p<d;p++)h+=String.fromCharCode(c[p]);return h}u[254]=u[254]=1,i.string2buf=function(c){var d,h,p,g,b,v=c.length,y=0;for(g=0;g<v;g++)(64512&(h=c.charCodeAt(g)))==55296&&g+1<v&&(64512&(p=c.charCodeAt(g+1)))==56320&&(h=65536+(h-55296<<10)+(p-56320),g++),y+=h<128?1:h<2048?2:h<65536?3:4;for(d=new a.Buf8(y),g=b=0;b<y;g++)(64512&(h=c.charCodeAt(g)))==55296&&g+1<v&&(64512&(p=c.charCodeAt(g+1)))==56320&&(h=65536+(h-55296<<10)+(p-56320),g++),h<128?d[b++]=h:(h<2048?d[b++]=192|h>>>6:(h<65536?d[b++]=224|h>>>12:(d[b++]=240|h>>>18,d[b++]=128|h>>>12&63),d[b++]=128|h>>>6&63),d[b++]=128|63&h);return d},i.buf2binstring=function(c){return f(c,c.length)},i.binstring2buf=function(c){for(var d=new a.Buf8(c.length),h=0,p=d.length;h<p;h++)d[h]=c.charCodeAt(h);return d},i.buf2string=function(c,d){var h,p,g,b,v=d||c.length,y=new Array(2*v);for(h=p=0;h<v;)if((g=c[h++])<128)y[p++]=g;else if(4<(b=u[g]))y[p++]=65533,h+=b-1;else{for(g&=b===2?31:b===3?15:7;1<b&&h<v;)g=g<<6|63&c[h++],b--;1<b?y[p++]=65533:g<65536?y[p++]=g:(g-=65536,y[p++]=55296|g>>10&1023,y[p++]=56320|1023&g)}return f(y,p)},i.utf8border=function(c,d){var h;for((d=d||c.length)>c.length&&(d=c.length),h=d-1;0<=h&&(192&c[h])==128;)h--;return h<0||h===0?d:h+u[c[h]]>d?h:d}},{"./common":41}],43:[function(t,n,i){n.exports=function(a,o,s,u){for(var l=65535&a|0,f=a>>>16&65535|0,c=0;s!==0;){for(s-=c=2e3<s?2e3:s;f=f+(l=l+o[u++]|0)|0,--c;);l%=65521,f%=65521}return l|f<<16|0}},{}],44:[function(t,n,i){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,i){var a=function(){for(var o,s=[],u=0;u<256;u++){o=u;for(var l=0;l<8;l++)o=1&o?3988292384^o>>>1:o>>>1;s[u]=o}return s}();n.exports=function(o,s,u,l){var f=a,c=l+u;o^=-1;for(var d=l;d<c;d++)o=o>>>8^f[255&(o^s[d])];return-1^o}},{}],46:[function(t,n,i){var a,o=t("../utils/common"),s=t("./trees"),u=t("./adler32"),l=t("./crc32"),f=t("./messages"),c=0,d=4,h=0,p=-2,g=-1,b=4,v=2,y=8,m=9,w=286,S=30,A=19,_=2*w+1,E=15,k=3,M=258,T=M+k+1,C=42,R=113,x=1,B=2,D=3,O=4;function G(K,le){return K.msg=f[le],le}function V(K){return(K<<1)-(4<K?9:0)}function I(K){for(var le=K.length;0<=--le;)K[le]=0}function z(K){var le=K.state,Z=le.pending;Z>K.avail_out&&(Z=K.avail_out),Z!==0&&(o.arraySet(K.output,le.pending_buf,le.pending_out,Z,K.next_out),K.next_out+=Z,le.pending_out+=Z,K.total_out+=Z,K.avail_out-=Z,le.pending-=Z,le.pending===0&&(le.pending_out=0))}function P(K,le){s._tr_flush_block(K,0<=K.block_start?K.block_start:-1,K.strstart-K.block_start,le),K.block_start=K.strstart,z(K.strm)}function q(K,le){K.pending_buf[K.pending++]=le}function F(K,le){K.pending_buf[K.pending++]=le>>>8&255,K.pending_buf[K.pending++]=255&le}function U(K,le){var Z,ie,re=K.max_chain_length,J=K.strstart,fe=K.prev_length,we=K.nice_match,ge=K.strstart>K.w_size-T?K.strstart-(K.w_size-T):0,me=K.window,ue=K.w_mask,ce=K.prev,oe=K.strstart+M,Ae=me[J+fe-1],Te=me[J+fe];K.prev_length>=K.good_match&&(re>>=2),we>K.lookahead&&(we=K.lookahead);do if(me[(Z=le)+fe]===Te&&me[Z+fe-1]===Ae&&me[Z]===me[J]&&me[++Z]===me[J+1]){J+=2,Z++;do;while(me[++J]===me[++Z]&&me[++J]===me[++Z]&&me[++J]===me[++Z]&&me[++J]===me[++Z]&&me[++J]===me[++Z]&&me[++J]===me[++Z]&&me[++J]===me[++Z]&&me[++J]===me[++Z]&&J<oe);if(ie=M-(oe-J),J=oe-M,fe<ie){if(K.match_start=le,we<=(fe=ie))break;Ae=me[J+fe-1],Te=me[J+fe]}}while((le=ce[le&ue])>ge&&--re!=0);return fe<=K.lookahead?fe:K.lookahead}function W(K){var le,Z,ie,re,J,fe,we,ge,me,ue,ce=K.w_size;do{if(re=K.window_size-K.lookahead-K.strstart,K.strstart>=ce+(ce-T)){for(o.arraySet(K.window,K.window,ce,ce,0),K.match_start-=ce,K.strstart-=ce,K.block_start-=ce,le=Z=K.hash_size;ie=K.head[--le],K.head[le]=ce<=ie?ie-ce:0,--Z;);for(le=Z=ce;ie=K.prev[--le],K.prev[le]=ce<=ie?ie-ce:0,--Z;);re+=ce}if(K.strm.avail_in===0)break;if(fe=K.strm,we=K.window,ge=K.strstart+K.lookahead,me=re,ue=void 0,ue=fe.avail_in,me<ue&&(ue=me),Z=ue===0?0:(fe.avail_in-=ue,o.arraySet(we,fe.input,fe.next_in,ue,ge),fe.state.wrap===1?fe.adler=u(fe.adler,we,ue,ge):fe.state.wrap===2&&(fe.adler=l(fe.adler,we,ue,ge)),fe.next_in+=ue,fe.total_in+=ue,ue),K.lookahead+=Z,K.lookahead+K.insert>=k)for(J=K.strstart-K.insert,K.ins_h=K.window[J],K.ins_h=(K.ins_h<<K.hash_shift^K.window[J+1])&K.hash_mask;K.insert&&(K.ins_h=(K.ins_h<<K.hash_shift^K.window[J+k-1])&K.hash_mask,K.prev[J&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=J,J++,K.insert--,!(K.lookahead+K.insert<k)););}while(K.lookahead<T&&K.strm.avail_in!==0)}function X(K,le){for(var Z,ie;;){if(K.lookahead<T){if(W(K),K.lookahead<T&&le===c)return x;if(K.lookahead===0)break}if(Z=0,K.lookahead>=k&&(K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+k-1])&K.hash_mask,Z=K.prev[K.strstart&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=K.strstart),Z!==0&&K.strstart-Z<=K.w_size-T&&(K.match_length=U(K,Z)),K.match_length>=k)if(ie=s._tr_tally(K,K.strstart-K.match_start,K.match_length-k),K.lookahead-=K.match_length,K.match_length<=K.max_lazy_match&&K.lookahead>=k){for(K.match_length--;K.strstart++,K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+k-1])&K.hash_mask,Z=K.prev[K.strstart&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=K.strstart,--K.match_length!=0;);K.strstart++}else K.strstart+=K.match_length,K.match_length=0,K.ins_h=K.window[K.strstart],K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+1])&K.hash_mask;else ie=s._tr_tally(K,0,K.window[K.strstart]),K.lookahead--,K.strstart++;if(ie&&(P(K,!1),K.strm.avail_out===0))return x}return K.insert=K.strstart<k-1?K.strstart:k-1,le===d?(P(K,!0),K.strm.avail_out===0?D:O):K.last_lit&&(P(K,!1),K.strm.avail_out===0)?x:B}function te(K,le){for(var Z,ie,re;;){if(K.lookahead<T){if(W(K),K.lookahead<T&&le===c)return x;if(K.lookahead===0)break}if(Z=0,K.lookahead>=k&&(K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+k-1])&K.hash_mask,Z=K.prev[K.strstart&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=K.strstart),K.prev_length=K.match_length,K.prev_match=K.match_start,K.match_length=k-1,Z!==0&&K.prev_length<K.max_lazy_match&&K.strstart-Z<=K.w_size-T&&(K.match_length=U(K,Z),K.match_length<=5&&(K.strategy===1||K.match_length===k&&4096<K.strstart-K.match_start)&&(K.match_length=k-1)),K.prev_length>=k&&K.match_length<=K.prev_length){for(re=K.strstart+K.lookahead-k,ie=s._tr_tally(K,K.strstart-1-K.prev_match,K.prev_length-k),K.lookahead-=K.prev_length-1,K.prev_length-=2;++K.strstart<=re&&(K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+k-1])&K.hash_mask,Z=K.prev[K.strstart&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=K.strstart),--K.prev_length!=0;);if(K.match_available=0,K.match_length=k-1,K.strstart++,ie&&(P(K,!1),K.strm.avail_out===0))return x}else if(K.match_available){if((ie=s._tr_tally(K,0,K.window[K.strstart-1]))&&P(K,!1),K.strstart++,K.lookahead--,K.strm.avail_out===0)return x}else K.match_available=1,K.strstart++,K.lookahead--}return K.match_available&&(ie=s._tr_tally(K,0,K.window[K.strstart-1]),K.match_available=0),K.insert=K.strstart<k-1?K.strstart:k-1,le===d?(P(K,!0),K.strm.avail_out===0?D:O):K.last_lit&&(P(K,!1),K.strm.avail_out===0)?x:B}function ne(K,le,Z,ie,re){this.good_length=K,this.max_lazy=le,this.nice_length=Z,this.max_chain=ie,this.func=re}function he(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*_),this.dyn_dtree=new o.Buf16(2*(2*S+1)),this.bl_tree=new o.Buf16(2*(2*A+1)),I(this.dyn_ltree),I(this.dyn_dtree),I(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(E+1),this.heap=new o.Buf16(2*w+1),I(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*w+1),I(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ve(K){var le;return K&&K.state?(K.total_in=K.total_out=0,K.data_type=v,(le=K.state).pending=0,le.pending_out=0,le.wrap<0&&(le.wrap=-le.wrap),le.status=le.wrap?C:R,K.adler=le.wrap===2?0:1,le.last_flush=c,s._tr_init(le),h):G(K,p)}function Ce(K){var le=ve(K);return le===h&&function(Z){Z.window_size=2*Z.w_size,I(Z.head),Z.max_lazy_match=a[Z.level].max_lazy,Z.good_match=a[Z.level].good_length,Z.nice_match=a[Z.level].nice_length,Z.max_chain_length=a[Z.level].max_chain,Z.strstart=0,Z.block_start=0,Z.lookahead=0,Z.insert=0,Z.match_length=Z.prev_length=k-1,Z.match_available=0,Z.ins_h=0}(K.state),le}function Le(K,le,Z,ie,re,J){if(!K)return p;var fe=1;if(le===g&&(le=6),ie<0?(fe=0,ie=-ie):15<ie&&(fe=2,ie-=16),re<1||m<re||Z!==y||ie<8||15<ie||le<0||9<le||J<0||b<J)return G(K,p);ie===8&&(ie=9);var we=new he;return(K.state=we).strm=K,we.wrap=fe,we.gzhead=null,we.w_bits=ie,we.w_size=1<<we.w_bits,we.w_mask=we.w_size-1,we.hash_bits=re+7,we.hash_size=1<<we.hash_bits,we.hash_mask=we.hash_size-1,we.hash_shift=~~((we.hash_bits+k-1)/k),we.window=new o.Buf8(2*we.w_size),we.head=new o.Buf16(we.hash_size),we.prev=new o.Buf16(we.w_size),we.lit_bufsize=1<<re+6,we.pending_buf_size=4*we.lit_bufsize,we.pending_buf=new o.Buf8(we.pending_buf_size),we.d_buf=1*we.lit_bufsize,we.l_buf=3*we.lit_bufsize,we.level=le,we.strategy=J,we.method=Z,Ce(K)}a=[new ne(0,0,0,0,function(K,le){var Z=65535;for(Z>K.pending_buf_size-5&&(Z=K.pending_buf_size-5);;){if(K.lookahead<=1){if(W(K),K.lookahead===0&&le===c)return x;if(K.lookahead===0)break}K.strstart+=K.lookahead,K.lookahead=0;var ie=K.block_start+Z;if((K.strstart===0||K.strstart>=ie)&&(K.lookahead=K.strstart-ie,K.strstart=ie,P(K,!1),K.strm.avail_out===0)||K.strstart-K.block_start>=K.w_size-T&&(P(K,!1),K.strm.avail_out===0))return x}return K.insert=0,le===d?(P(K,!0),K.strm.avail_out===0?D:O):(K.strstart>K.block_start&&(P(K,!1),K.strm.avail_out),x)}),new ne(4,4,8,4,X),new ne(4,5,16,8,X),new ne(4,6,32,32,X),new ne(4,4,16,16,te),new ne(8,16,32,32,te),new ne(8,16,128,128,te),new ne(8,32,128,256,te),new ne(32,128,258,1024,te),new ne(32,258,258,4096,te)],i.deflateInit=function(K,le){return Le(K,le,y,15,8,0)},i.deflateInit2=Le,i.deflateReset=Ce,i.deflateResetKeep=ve,i.deflateSetHeader=function(K,le){return K&&K.state?K.state.wrap!==2?p:(K.state.gzhead=le,h):p},i.deflate=function(K,le){var Z,ie,re,J;if(!K||!K.state||5<le||le<0)return K?G(K,p):p;if(ie=K.state,!K.output||!K.input&&K.avail_in!==0||ie.status===666&&le!==d)return G(K,K.avail_out===0?-5:p);if(ie.strm=K,Z=ie.last_flush,ie.last_flush=le,ie.status===C)if(ie.wrap===2)K.adler=0,q(ie,31),q(ie,139),q(ie,8),ie.gzhead?(q(ie,(ie.gzhead.text?1:0)+(ie.gzhead.hcrc?2:0)+(ie.gzhead.extra?4:0)+(ie.gzhead.name?8:0)+(ie.gzhead.comment?16:0)),q(ie,255&ie.gzhead.time),q(ie,ie.gzhead.time>>8&255),q(ie,ie.gzhead.time>>16&255),q(ie,ie.gzhead.time>>24&255),q(ie,ie.level===9?2:2<=ie.strategy||ie.level<2?4:0),q(ie,255&ie.gzhead.os),ie.gzhead.extra&&ie.gzhead.extra.length&&(q(ie,255&ie.gzhead.extra.length),q(ie,ie.gzhead.extra.length>>8&255)),ie.gzhead.hcrc&&(K.adler=l(K.adler,ie.pending_buf,ie.pending,0)),ie.gzindex=0,ie.status=69):(q(ie,0),q(ie,0),q(ie,0),q(ie,0),q(ie,0),q(ie,ie.level===9?2:2<=ie.strategy||ie.level<2?4:0),q(ie,3),ie.status=R);else{var fe=y+(ie.w_bits-8<<4)<<8;fe|=(2<=ie.strategy||ie.level<2?0:ie.level<6?1:ie.level===6?2:3)<<6,ie.strstart!==0&&(fe|=32),fe+=31-fe%31,ie.status=R,F(ie,fe),ie.strstart!==0&&(F(ie,K.adler>>>16),F(ie,65535&K.adler)),K.adler=1}if(ie.status===69)if(ie.gzhead.extra){for(re=ie.pending;ie.gzindex<(65535&ie.gzhead.extra.length)&&(ie.pending!==ie.pending_buf_size||(ie.gzhead.hcrc&&ie.pending>re&&(K.adler=l(K.adler,ie.pending_buf,ie.pending-re,re)),z(K),re=ie.pending,ie.pending!==ie.pending_buf_size));)q(ie,255&ie.gzhead.extra[ie.gzindex]),ie.gzindex++;ie.gzhead.hcrc&&ie.pending>re&&(K.adler=l(K.adler,ie.pending_buf,ie.pending-re,re)),ie.gzindex===ie.gzhead.extra.length&&(ie.gzindex=0,ie.status=73)}else ie.status=73;if(ie.status===73)if(ie.gzhead.name){re=ie.pending;do{if(ie.pending===ie.pending_buf_size&&(ie.gzhead.hcrc&&ie.pending>re&&(K.adler=l(K.adler,ie.pending_buf,ie.pending-re,re)),z(K),re=ie.pending,ie.pending===ie.pending_buf_size)){J=1;break}J=ie.gzindex<ie.gzhead.name.length?255&ie.gzhead.name.charCodeAt(ie.gzindex++):0,q(ie,J)}while(J!==0);ie.gzhead.hcrc&&ie.pending>re&&(K.adler=l(K.adler,ie.pending_buf,ie.pending-re,re)),J===0&&(ie.gzindex=0,ie.status=91)}else ie.status=91;if(ie.status===91)if(ie.gzhead.comment){re=ie.pending;do{if(ie.pending===ie.pending_buf_size&&(ie.gzhead.hcrc&&ie.pending>re&&(K.adler=l(K.adler,ie.pending_buf,ie.pending-re,re)),z(K),re=ie.pending,ie.pending===ie.pending_buf_size)){J=1;break}J=ie.gzindex<ie.gzhead.comment.length?255&ie.gzhead.comment.charCodeAt(ie.gzindex++):0,q(ie,J)}while(J!==0);ie.gzhead.hcrc&&ie.pending>re&&(K.adler=l(K.adler,ie.pending_buf,ie.pending-re,re)),J===0&&(ie.status=103)}else ie.status=103;if(ie.status===103&&(ie.gzhead.hcrc?(ie.pending+2>ie.pending_buf_size&&z(K),ie.pending+2<=ie.pending_buf_size&&(q(ie,255&K.adler),q(ie,K.adler>>8&255),K.adler=0,ie.status=R)):ie.status=R),ie.pending!==0){if(z(K),K.avail_out===0)return ie.last_flush=-1,h}else if(K.avail_in===0&&V(le)<=V(Z)&&le!==d)return G(K,-5);if(ie.status===666&&K.avail_in!==0)return G(K,-5);if(K.avail_in!==0||ie.lookahead!==0||le!==c&&ie.status!==666){var we=ie.strategy===2?function(ge,me){for(var ue;;){if(ge.lookahead===0&&(W(ge),ge.lookahead===0)){if(me===c)return x;break}if(ge.match_length=0,ue=s._tr_tally(ge,0,ge.window[ge.strstart]),ge.lookahead--,ge.strstart++,ue&&(P(ge,!1),ge.strm.avail_out===0))return x}return ge.insert=0,me===d?(P(ge,!0),ge.strm.avail_out===0?D:O):ge.last_lit&&(P(ge,!1),ge.strm.avail_out===0)?x:B}(ie,le):ie.strategy===3?function(ge,me){for(var ue,ce,oe,Ae,Te=ge.window;;){if(ge.lookahead<=M){if(W(ge),ge.lookahead<=M&&me===c)return x;if(ge.lookahead===0)break}if(ge.match_length=0,ge.lookahead>=k&&0<ge.strstart&&(ce=Te[oe=ge.strstart-1])===Te[++oe]&&ce===Te[++oe]&&ce===Te[++oe]){Ae=ge.strstart+M;do;while(ce===Te[++oe]&&ce===Te[++oe]&&ce===Te[++oe]&&ce===Te[++oe]&&ce===Te[++oe]&&ce===Te[++oe]&&ce===Te[++oe]&&ce===Te[++oe]&&oe<Ae);ge.match_length=M-(Ae-oe),ge.match_length>ge.lookahead&&(ge.match_length=ge.lookahead)}if(ge.match_length>=k?(ue=s._tr_tally(ge,1,ge.match_length-k),ge.lookahead-=ge.match_length,ge.strstart+=ge.match_length,ge.match_length=0):(ue=s._tr_tally(ge,0,ge.window[ge.strstart]),ge.lookahead--,ge.strstart++),ue&&(P(ge,!1),ge.strm.avail_out===0))return x}return ge.insert=0,me===d?(P(ge,!0),ge.strm.avail_out===0?D:O):ge.last_lit&&(P(ge,!1),ge.strm.avail_out===0)?x:B}(ie,le):a[ie.level].func(ie,le);if(we!==D&&we!==O||(ie.status=666),we===x||we===D)return K.avail_out===0&&(ie.last_flush=-1),h;if(we===B&&(le===1?s._tr_align(ie):le!==5&&(s._tr_stored_block(ie,0,0,!1),le===3&&(I(ie.head),ie.lookahead===0&&(ie.strstart=0,ie.block_start=0,ie.insert=0))),z(K),K.avail_out===0))return ie.last_flush=-1,h}return le!==d?h:ie.wrap<=0?1:(ie.wrap===2?(q(ie,255&K.adler),q(ie,K.adler>>8&255),q(ie,K.adler>>16&255),q(ie,K.adler>>24&255),q(ie,255&K.total_in),q(ie,K.total_in>>8&255),q(ie,K.total_in>>16&255),q(ie,K.total_in>>24&255)):(F(ie,K.adler>>>16),F(ie,65535&K.adler)),z(K),0<ie.wrap&&(ie.wrap=-ie.wrap),ie.pending!==0?h:1)},i.deflateEnd=function(K){var le;return K&&K.state?(le=K.state.status)!==C&&le!==69&&le!==73&&le!==91&&le!==103&&le!==R&&le!==666?G(K,p):(K.state=null,le===R?G(K,-3):h):p},i.deflateSetDictionary=function(K,le){var Z,ie,re,J,fe,we,ge,me,ue=le.length;if(!K||!K.state||(J=(Z=K.state).wrap)===2||J===1&&Z.status!==C||Z.lookahead)return p;for(J===1&&(K.adler=u(K.adler,le,ue,0)),Z.wrap=0,ue>=Z.w_size&&(J===0&&(I(Z.head),Z.strstart=0,Z.block_start=0,Z.insert=0),me=new o.Buf8(Z.w_size),o.arraySet(me,le,ue-Z.w_size,Z.w_size,0),le=me,ue=Z.w_size),fe=K.avail_in,we=K.next_in,ge=K.input,K.avail_in=ue,K.next_in=0,K.input=le,W(Z);Z.lookahead>=k;){for(ie=Z.strstart,re=Z.lookahead-(k-1);Z.ins_h=(Z.ins_h<<Z.hash_shift^Z.window[ie+k-1])&Z.hash_mask,Z.prev[ie&Z.w_mask]=Z.head[Z.ins_h],Z.head[Z.ins_h]=ie,ie++,--re;);Z.strstart=ie,Z.lookahead=k-1,W(Z)}return Z.strstart+=Z.lookahead,Z.block_start=Z.strstart,Z.insert=Z.lookahead,Z.lookahead=0,Z.match_length=Z.prev_length=k-1,Z.match_available=0,K.next_in=we,K.input=ge,K.avail_in=fe,Z.wrap=J,h},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,i){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,n,i){n.exports=function(a,o){var s,u,l,f,c,d,h,p,g,b,v,y,m,w,S,A,_,E,k,M,T,C,R,x,B;s=a.state,u=a.next_in,x=a.input,l=u+(a.avail_in-5),f=a.next_out,B=a.output,c=f-(o-a.avail_out),d=f+(a.avail_out-257),h=s.dmax,p=s.wsize,g=s.whave,b=s.wnext,v=s.window,y=s.hold,m=s.bits,w=s.lencode,S=s.distcode,A=(1<<s.lenbits)-1,_=(1<<s.distbits)-1;e:do{m<15&&(y+=x[u++]<<m,m+=8,y+=x[u++]<<m,m+=8),E=w[y&A];t:for(;;){if(y>>>=k=E>>>24,m-=k,(k=E>>>16&255)===0)B[f++]=65535&E;else{if(!(16&k)){if(!(64&k)){E=w[(65535&E)+(y&(1<<k)-1)];continue t}if(32&k){s.mode=12;break e}a.msg="invalid literal/length code",s.mode=30;break e}M=65535&E,(k&=15)&&(m<k&&(y+=x[u++]<<m,m+=8),M+=y&(1<<k)-1,y>>>=k,m-=k),m<15&&(y+=x[u++]<<m,m+=8,y+=x[u++]<<m,m+=8),E=S[y&_];r:for(;;){if(y>>>=k=E>>>24,m-=k,!(16&(k=E>>>16&255))){if(!(64&k)){E=S[(65535&E)+(y&(1<<k)-1)];continue r}a.msg="invalid distance code",s.mode=30;break e}if(T=65535&E,m<(k&=15)&&(y+=x[u++]<<m,(m+=8)<k&&(y+=x[u++]<<m,m+=8)),h<(T+=y&(1<<k)-1)){a.msg="invalid distance too far back",s.mode=30;break e}if(y>>>=k,m-=k,(k=f-c)<T){if(g<(k=T-k)&&s.sane){a.msg="invalid distance too far back",s.mode=30;break e}if(R=v,(C=0)===b){if(C+=p-k,k<M){for(M-=k;B[f++]=v[C++],--k;);C=f-T,R=B}}else if(b<k){if(C+=p+b-k,(k-=b)<M){for(M-=k;B[f++]=v[C++],--k;);if(C=0,b<M){for(M-=k=b;B[f++]=v[C++],--k;);C=f-T,R=B}}}else if(C+=b-k,k<M){for(M-=k;B[f++]=v[C++],--k;);C=f-T,R=B}for(;2<M;)B[f++]=R[C++],B[f++]=R[C++],B[f++]=R[C++],M-=3;M&&(B[f++]=R[C++],1<M&&(B[f++]=R[C++]))}else{for(C=f-T;B[f++]=B[C++],B[f++]=B[C++],B[f++]=B[C++],2<(M-=3););M&&(B[f++]=B[C++],1<M&&(B[f++]=B[C++]))}break}}break}}while(u<l&&f<d);u-=M=m>>3,y&=(1<<(m-=M<<3))-1,a.next_in=u,a.next_out=f,a.avail_in=u<l?l-u+5:5-(u-l),a.avail_out=f<d?d-f+257:257-(f-d),s.hold=y,s.bits=m}},{}],49:[function(t,n,i){var a=t("../utils/common"),o=t("./adler32"),s=t("./crc32"),u=t("./inffast"),l=t("./inftrees"),f=1,c=2,d=0,h=-2,p=1,g=852,b=592;function v(C){return(C>>>24&255)+(C>>>8&65280)+((65280&C)<<8)+((255&C)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function m(C){var R;return C&&C.state?(R=C.state,C.total_in=C.total_out=R.total=0,C.msg="",R.wrap&&(C.adler=1&R.wrap),R.mode=p,R.last=0,R.havedict=0,R.dmax=32768,R.head=null,R.hold=0,R.bits=0,R.lencode=R.lendyn=new a.Buf32(g),R.distcode=R.distdyn=new a.Buf32(b),R.sane=1,R.back=-1,d):h}function w(C){var R;return C&&C.state?((R=C.state).wsize=0,R.whave=0,R.wnext=0,m(C)):h}function S(C,R){var x,B;return C&&C.state?(B=C.state,R<0?(x=0,R=-R):(x=1+(R>>4),R<48&&(R&=15)),R&&(R<8||15<R)?h:(B.window!==null&&B.wbits!==R&&(B.window=null),B.wrap=x,B.wbits=R,w(C))):h}function A(C,R){var x,B;return C?(B=new y,(C.state=B).window=null,(x=S(C,R))!==d&&(C.state=null),x):h}var _,E,k=!0;function M(C){if(k){var R;for(_=new a.Buf32(512),E=new a.Buf32(32),R=0;R<144;)C.lens[R++]=8;for(;R<256;)C.lens[R++]=9;for(;R<280;)C.lens[R++]=7;for(;R<288;)C.lens[R++]=8;for(l(f,C.lens,0,288,_,0,C.work,{bits:9}),R=0;R<32;)C.lens[R++]=5;l(c,C.lens,0,32,E,0,C.work,{bits:5}),k=!1}C.lencode=_,C.lenbits=9,C.distcode=E,C.distbits=5}function T(C,R,x,B){var D,O=C.state;return O.window===null&&(O.wsize=1<<O.wbits,O.wnext=0,O.whave=0,O.window=new a.Buf8(O.wsize)),B>=O.wsize?(a.arraySet(O.window,R,x-O.wsize,O.wsize,0),O.wnext=0,O.whave=O.wsize):(B<(D=O.wsize-O.wnext)&&(D=B),a.arraySet(O.window,R,x-B,D,O.wnext),(B-=D)?(a.arraySet(O.window,R,x-B,B,0),O.wnext=B,O.whave=O.wsize):(O.wnext+=D,O.wnext===O.wsize&&(O.wnext=0),O.whave<O.wsize&&(O.whave+=D))),0}i.inflateReset=w,i.inflateReset2=S,i.inflateResetKeep=m,i.inflateInit=function(C){return A(C,15)},i.inflateInit2=A,i.inflate=function(C,R){var x,B,D,O,G,V,I,z,P,q,F,U,W,X,te,ne,he,ve,Ce,Le,K,le,Z,ie,re=0,J=new a.Buf8(4),fe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!C||!C.state||!C.output||!C.input&&C.avail_in!==0)return h;(x=C.state).mode===12&&(x.mode=13),G=C.next_out,D=C.output,I=C.avail_out,O=C.next_in,B=C.input,V=C.avail_in,z=x.hold,P=x.bits,q=V,F=I,le=d;e:for(;;)switch(x.mode){case p:if(x.wrap===0){x.mode=13;break}for(;P<16;){if(V===0)break e;V--,z+=B[O++]<<P,P+=8}if(2&x.wrap&&z===35615){J[x.check=0]=255&z,J[1]=z>>>8&255,x.check=s(x.check,J,2,0),P=z=0,x.mode=2;break}if(x.flags=0,x.head&&(x.head.done=!1),!(1&x.wrap)||(((255&z)<<8)+(z>>8))%31){C.msg="incorrect header check",x.mode=30;break}if((15&z)!=8){C.msg="unknown compression method",x.mode=30;break}if(P-=4,K=8+(15&(z>>>=4)),x.wbits===0)x.wbits=K;else if(K>x.wbits){C.msg="invalid window size",x.mode=30;break}x.dmax=1<<K,C.adler=x.check=1,x.mode=512&z?10:12,P=z=0;break;case 2:for(;P<16;){if(V===0)break e;V--,z+=B[O++]<<P,P+=8}if(x.flags=z,(255&x.flags)!=8){C.msg="unknown compression method",x.mode=30;break}if(57344&x.flags){C.msg="unknown header flags set",x.mode=30;break}x.head&&(x.head.text=z>>8&1),512&x.flags&&(J[0]=255&z,J[1]=z>>>8&255,x.check=s(x.check,J,2,0)),P=z=0,x.mode=3;case 3:for(;P<32;){if(V===0)break e;V--,z+=B[O++]<<P,P+=8}x.head&&(x.head.time=z),512&x.flags&&(J[0]=255&z,J[1]=z>>>8&255,J[2]=z>>>16&255,J[3]=z>>>24&255,x.check=s(x.check,J,4,0)),P=z=0,x.mode=4;case 4:for(;P<16;){if(V===0)break e;V--,z+=B[O++]<<P,P+=8}x.head&&(x.head.xflags=255&z,x.head.os=z>>8),512&x.flags&&(J[0]=255&z,J[1]=z>>>8&255,x.check=s(x.check,J,2,0)),P=z=0,x.mode=5;case 5:if(1024&x.flags){for(;P<16;){if(V===0)break e;V--,z+=B[O++]<<P,P+=8}x.length=z,x.head&&(x.head.extra_len=z),512&x.flags&&(J[0]=255&z,J[1]=z>>>8&255,x.check=s(x.check,J,2,0)),P=z=0}else x.head&&(x.head.extra=null);x.mode=6;case 6:if(1024&x.flags&&(V<(U=x.length)&&(U=V),U&&(x.head&&(K=x.head.extra_len-x.length,x.head.extra||(x.head.extra=new Array(x.head.extra_len)),a.arraySet(x.head.extra,B,O,U,K)),512&x.flags&&(x.check=s(x.check,B,U,O)),V-=U,O+=U,x.length-=U),x.length))break e;x.length=0,x.mode=7;case 7:if(2048&x.flags){if(V===0)break e;for(U=0;K=B[O+U++],x.head&&K&&x.length<65536&&(x.head.name+=String.fromCharCode(K)),K&&U<V;);if(512&x.flags&&(x.check=s(x.check,B,U,O)),V-=U,O+=U,K)break e}else x.head&&(x.head.name=null);x.length=0,x.mode=8;case 8:if(4096&x.flags){if(V===0)break e;for(U=0;K=B[O+U++],x.head&&K&&x.length<65536&&(x.head.comment+=String.fromCharCode(K)),K&&U<V;);if(512&x.flags&&(x.check=s(x.check,B,U,O)),V-=U,O+=U,K)break e}else x.head&&(x.head.comment=null);x.mode=9;case 9:if(512&x.flags){for(;P<16;){if(V===0)break e;V--,z+=B[O++]<<P,P+=8}if(z!==(65535&x.check)){C.msg="header crc mismatch",x.mode=30;break}P=z=0}x.head&&(x.head.hcrc=x.flags>>9&1,x.head.done=!0),C.adler=x.check=0,x.mode=12;break;case 10:for(;P<32;){if(V===0)break e;V--,z+=B[O++]<<P,P+=8}C.adler=x.check=v(z),P=z=0,x.mode=11;case 11:if(x.havedict===0)return C.next_out=G,C.avail_out=I,C.next_in=O,C.avail_in=V,x.hold=z,x.bits=P,2;C.adler=x.check=1,x.mode=12;case 12:if(R===5||R===6)break e;case 13:if(x.last){z>>>=7&P,P-=7&P,x.mode=27;break}for(;P<3;){if(V===0)break e;V--,z+=B[O++]<<P,P+=8}switch(x.last=1&z,P-=1,3&(z>>>=1)){case 0:x.mode=14;break;case 1:if(M(x),x.mode=20,R!==6)break;z>>>=2,P-=2;break e;case 2:x.mode=17;break;case 3:C.msg="invalid block type",x.mode=30}z>>>=2,P-=2;break;case 14:for(z>>>=7&P,P-=7&P;P<32;){if(V===0)break e;V--,z+=B[O++]<<P,P+=8}if((65535&z)!=(z>>>16^65535)){C.msg="invalid stored block lengths",x.mode=30;break}if(x.length=65535&z,P=z=0,x.mode=15,R===6)break e;case 15:x.mode=16;case 16:if(U=x.length){if(V<U&&(U=V),I<U&&(U=I),U===0)break e;a.arraySet(D,B,O,U,G),V-=U,O+=U,I-=U,G+=U,x.length-=U;break}x.mode=12;break;case 17:for(;P<14;){if(V===0)break e;V--,z+=B[O++]<<P,P+=8}if(x.nlen=257+(31&z),z>>>=5,P-=5,x.ndist=1+(31&z),z>>>=5,P-=5,x.ncode=4+(15&z),z>>>=4,P-=4,286<x.nlen||30<x.ndist){C.msg="too many length or distance symbols",x.mode=30;break}x.have=0,x.mode=18;case 18:for(;x.have<x.ncode;){for(;P<3;){if(V===0)break e;V--,z+=B[O++]<<P,P+=8}x.lens[fe[x.have++]]=7&z,z>>>=3,P-=3}for(;x.have<19;)x.lens[fe[x.have++]]=0;if(x.lencode=x.lendyn,x.lenbits=7,Z={bits:x.lenbits},le=l(0,x.lens,0,19,x.lencode,0,x.work,Z),x.lenbits=Z.bits,le){C.msg="invalid code lengths set",x.mode=30;break}x.have=0,x.mode=19;case 19:for(;x.have<x.nlen+x.ndist;){for(;ne=(re=x.lencode[z&(1<<x.lenbits)-1])>>>16&255,he=65535&re,!((te=re>>>24)<=P);){if(V===0)break e;V--,z+=B[O++]<<P,P+=8}if(he<16)z>>>=te,P-=te,x.lens[x.have++]=he;else{if(he===16){for(ie=te+2;P<ie;){if(V===0)break e;V--,z+=B[O++]<<P,P+=8}if(z>>>=te,P-=te,x.have===0){C.msg="invalid bit length repeat",x.mode=30;break}K=x.lens[x.have-1],U=3+(3&z),z>>>=2,P-=2}else if(he===17){for(ie=te+3;P<ie;){if(V===0)break e;V--,z+=B[O++]<<P,P+=8}P-=te,K=0,U=3+(7&(z>>>=te)),z>>>=3,P-=3}else{for(ie=te+7;P<ie;){if(V===0)break e;V--,z+=B[O++]<<P,P+=8}P-=te,K=0,U=11+(127&(z>>>=te)),z>>>=7,P-=7}if(x.have+U>x.nlen+x.ndist){C.msg="invalid bit length repeat",x.mode=30;break}for(;U--;)x.lens[x.have++]=K}}if(x.mode===30)break;if(x.lens[256]===0){C.msg="invalid code -- missing end-of-block",x.mode=30;break}if(x.lenbits=9,Z={bits:x.lenbits},le=l(f,x.lens,0,x.nlen,x.lencode,0,x.work,Z),x.lenbits=Z.bits,le){C.msg="invalid literal/lengths set",x.mode=30;break}if(x.distbits=6,x.distcode=x.distdyn,Z={bits:x.distbits},le=l(c,x.lens,x.nlen,x.ndist,x.distcode,0,x.work,Z),x.distbits=Z.bits,le){C.msg="invalid distances set",x.mode=30;break}if(x.mode=20,R===6)break e;case 20:x.mode=21;case 21:if(6<=V&&258<=I){C.next_out=G,C.avail_out=I,C.next_in=O,C.avail_in=V,x.hold=z,x.bits=P,u(C,F),G=C.next_out,D=C.output,I=C.avail_out,O=C.next_in,B=C.input,V=C.avail_in,z=x.hold,P=x.bits,x.mode===12&&(x.back=-1);break}for(x.back=0;ne=(re=x.lencode[z&(1<<x.lenbits)-1])>>>16&255,he=65535&re,!((te=re>>>24)<=P);){if(V===0)break e;V--,z+=B[O++]<<P,P+=8}if(ne&&!(240&ne)){for(ve=te,Ce=ne,Le=he;ne=(re=x.lencode[Le+((z&(1<<ve+Ce)-1)>>ve)])>>>16&255,he=65535&re,!(ve+(te=re>>>24)<=P);){if(V===0)break e;V--,z+=B[O++]<<P,P+=8}z>>>=ve,P-=ve,x.back+=ve}if(z>>>=te,P-=te,x.back+=te,x.length=he,ne===0){x.mode=26;break}if(32&ne){x.back=-1,x.mode=12;break}if(64&ne){C.msg="invalid literal/length code",x.mode=30;break}x.extra=15&ne,x.mode=22;case 22:if(x.extra){for(ie=x.extra;P<ie;){if(V===0)break e;V--,z+=B[O++]<<P,P+=8}x.length+=z&(1<<x.extra)-1,z>>>=x.extra,P-=x.extra,x.back+=x.extra}x.was=x.length,x.mode=23;case 23:for(;ne=(re=x.distcode[z&(1<<x.distbits)-1])>>>16&255,he=65535&re,!((te=re>>>24)<=P);){if(V===0)break e;V--,z+=B[O++]<<P,P+=8}if(!(240&ne)){for(ve=te,Ce=ne,Le=he;ne=(re=x.distcode[Le+((z&(1<<ve+Ce)-1)>>ve)])>>>16&255,he=65535&re,!(ve+(te=re>>>24)<=P);){if(V===0)break e;V--,z+=B[O++]<<P,P+=8}z>>>=ve,P-=ve,x.back+=ve}if(z>>>=te,P-=te,x.back+=te,64&ne){C.msg="invalid distance code",x.mode=30;break}x.offset=he,x.extra=15&ne,x.mode=24;case 24:if(x.extra){for(ie=x.extra;P<ie;){if(V===0)break e;V--,z+=B[O++]<<P,P+=8}x.offset+=z&(1<<x.extra)-1,z>>>=x.extra,P-=x.extra,x.back+=x.extra}if(x.offset>x.dmax){C.msg="invalid distance too far back",x.mode=30;break}x.mode=25;case 25:if(I===0)break e;if(U=F-I,x.offset>U){if((U=x.offset-U)>x.whave&&x.sane){C.msg="invalid distance too far back",x.mode=30;break}W=U>x.wnext?(U-=x.wnext,x.wsize-U):x.wnext-U,U>x.length&&(U=x.length),X=x.window}else X=D,W=G-x.offset,U=x.length;for(I<U&&(U=I),I-=U,x.length-=U;D[G++]=X[W++],--U;);x.length===0&&(x.mode=21);break;case 26:if(I===0)break e;D[G++]=x.length,I--,x.mode=21;break;case 27:if(x.wrap){for(;P<32;){if(V===0)break e;V--,z|=B[O++]<<P,P+=8}if(F-=I,C.total_out+=F,x.total+=F,F&&(C.adler=x.check=x.flags?s(x.check,D,F,G-F):o(x.check,D,F,G-F)),F=I,(x.flags?z:v(z))!==x.check){C.msg="incorrect data check",x.mode=30;break}P=z=0}x.mode=28;case 28:if(x.wrap&&x.flags){for(;P<32;){if(V===0)break e;V--,z+=B[O++]<<P,P+=8}if(z!==(4294967295&x.total)){C.msg="incorrect length check",x.mode=30;break}P=z=0}x.mode=29;case 29:le=1;break e;case 30:le=-3;break e;case 31:return-4;case 32:default:return h}return C.next_out=G,C.avail_out=I,C.next_in=O,C.avail_in=V,x.hold=z,x.bits=P,(x.wsize||F!==C.avail_out&&x.mode<30&&(x.mode<27||R!==4))&&T(C,C.output,C.next_out,F-C.avail_out)?(x.mode=31,-4):(q-=C.avail_in,F-=C.avail_out,C.total_in+=q,C.total_out+=F,x.total+=F,x.wrap&&F&&(C.adler=x.check=x.flags?s(x.check,D,F,C.next_out-F):o(x.check,D,F,C.next_out-F)),C.data_type=x.bits+(x.last?64:0)+(x.mode===12?128:0)+(x.mode===20||x.mode===15?256:0),(q==0&&F===0||R===4)&&le===d&&(le=-5),le)},i.inflateEnd=function(C){if(!C||!C.state)return h;var R=C.state;return R.window&&(R.window=null),C.state=null,d},i.inflateGetHeader=function(C,R){var x;return C&&C.state&&2&(x=C.state).wrap?((x.head=R).done=!1,d):h},i.inflateSetDictionary=function(C,R){var x,B=R.length;return C&&C.state?(x=C.state).wrap!==0&&x.mode!==11?h:x.mode===11&&o(1,R,B,0)!==x.check?-3:T(C,R,B,B)?(x.mode=31,-4):(x.havedict=1,d):h},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,i){var a=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(f,c,d,h,p,g,b,v){var y,m,w,S,A,_,E,k,M,T=v.bits,C=0,R=0,x=0,B=0,D=0,O=0,G=0,V=0,I=0,z=0,P=null,q=0,F=new a.Buf16(16),U=new a.Buf16(16),W=null,X=0;for(C=0;C<=15;C++)F[C]=0;for(R=0;R<h;R++)F[c[d+R]]++;for(D=T,B=15;1<=B&&F[B]===0;B--);if(B<D&&(D=B),B===0)return p[g++]=20971520,p[g++]=20971520,v.bits=1,0;for(x=1;x<B&&F[x]===0;x++);for(D<x&&(D=x),C=V=1;C<=15;C++)if(V<<=1,(V-=F[C])<0)return-1;if(0<V&&(f===0||B!==1))return-1;for(U[1]=0,C=1;C<15;C++)U[C+1]=U[C]+F[C];for(R=0;R<h;R++)c[d+R]!==0&&(b[U[c[d+R]]++]=R);if(_=f===0?(P=W=b,19):f===1?(P=o,q-=257,W=s,X-=257,256):(P=u,W=l,-1),C=x,A=g,G=R=z=0,w=-1,S=(I=1<<(O=D))-1,f===1&&852<I||f===2&&592<I)return 1;for(;;){for(E=C-G,M=b[R]<_?(k=0,b[R]):b[R]>_?(k=W[X+b[R]],P[q+b[R]]):(k=96,0),y=1<<C-G,x=m=1<<O;p[A+(z>>G)+(m-=y)]=E<<24|k<<16|M|0,m!==0;);for(y=1<<C-1;z&y;)y>>=1;if(y!==0?(z&=y-1,z+=y):z=0,R++,--F[C]==0){if(C===B)break;C=c[d+b[R]]}if(D<C&&(z&S)!==w){for(G===0&&(G=D),A+=x,V=1<<(O=C-G);O+G<B&&!((V-=F[O+G])<=0);)O++,V<<=1;if(I+=1<<O,f===1&&852<I||f===2&&592<I)return 1;p[w=z&S]=D<<24|O<<16|A-g|0}}return z!==0&&(p[A+z]=C-G<<24|64<<16|0),v.bits=D,0}},{"../utils/common":41}],51:[function(t,n,i){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,i){var a=t("../utils/common"),o=0,s=1;function u(re){for(var J=re.length;0<=--J;)re[J]=0}var l=0,f=29,c=256,d=c+1+f,h=30,p=19,g=2*d+1,b=15,v=16,y=7,m=256,w=16,S=17,A=18,_=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],E=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],T=new Array(2*(d+2));u(T);var C=new Array(2*h);u(C);var R=new Array(512);u(R);var x=new Array(256);u(x);var B=new Array(f);u(B);var D,O,G,V=new Array(h);function I(re,J,fe,we,ge){this.static_tree=re,this.extra_bits=J,this.extra_base=fe,this.elems=we,this.max_length=ge,this.has_stree=re&&re.length}function z(re,J){this.dyn_tree=re,this.max_code=0,this.stat_desc=J}function P(re){return re<256?R[re]:R[256+(re>>>7)]}function q(re,J){re.pending_buf[re.pending++]=255&J,re.pending_buf[re.pending++]=J>>>8&255}function F(re,J,fe){re.bi_valid>v-fe?(re.bi_buf|=J<<re.bi_valid&65535,q(re,re.bi_buf),re.bi_buf=J>>v-re.bi_valid,re.bi_valid+=fe-v):(re.bi_buf|=J<<re.bi_valid&65535,re.bi_valid+=fe)}function U(re,J,fe){F(re,fe[2*J],fe[2*J+1])}function W(re,J){for(var fe=0;fe|=1&re,re>>>=1,fe<<=1,0<--J;);return fe>>>1}function X(re,J,fe){var we,ge,me=new Array(b+1),ue=0;for(we=1;we<=b;we++)me[we]=ue=ue+fe[we-1]<<1;for(ge=0;ge<=J;ge++){var ce=re[2*ge+1];ce!==0&&(re[2*ge]=W(me[ce]++,ce))}}function te(re){var J;for(J=0;J<d;J++)re.dyn_ltree[2*J]=0;for(J=0;J<h;J++)re.dyn_dtree[2*J]=0;for(J=0;J<p;J++)re.bl_tree[2*J]=0;re.dyn_ltree[2*m]=1,re.opt_len=re.static_len=0,re.last_lit=re.matches=0}function ne(re){8<re.bi_valid?q(re,re.bi_buf):0<re.bi_valid&&(re.pending_buf[re.pending++]=re.bi_buf),re.bi_buf=0,re.bi_valid=0}function he(re,J,fe,we){var ge=2*J,me=2*fe;return re[ge]<re[me]||re[ge]===re[me]&&we[J]<=we[fe]}function ve(re,J,fe){for(var we=re.heap[fe],ge=fe<<1;ge<=re.heap_len&&(ge<re.heap_len&&he(J,re.heap[ge+1],re.heap[ge],re.depth)&&ge++,!he(J,we,re.heap[ge],re.depth));)re.heap[fe]=re.heap[ge],fe=ge,ge<<=1;re.heap[fe]=we}function Ce(re,J,fe){var we,ge,me,ue,ce=0;if(re.last_lit!==0)for(;we=re.pending_buf[re.d_buf+2*ce]<<8|re.pending_buf[re.d_buf+2*ce+1],ge=re.pending_buf[re.l_buf+ce],ce++,we===0?U(re,ge,J):(U(re,(me=x[ge])+c+1,J),(ue=_[me])!==0&&F(re,ge-=B[me],ue),U(re,me=P(--we),fe),(ue=E[me])!==0&&F(re,we-=V[me],ue)),ce<re.last_lit;);U(re,m,J)}function Le(re,J){var fe,we,ge,me=J.dyn_tree,ue=J.stat_desc.static_tree,ce=J.stat_desc.has_stree,oe=J.stat_desc.elems,Ae=-1;for(re.heap_len=0,re.heap_max=g,fe=0;fe<oe;fe++)me[2*fe]!==0?(re.heap[++re.heap_len]=Ae=fe,re.depth[fe]=0):me[2*fe+1]=0;for(;re.heap_len<2;)me[2*(ge=re.heap[++re.heap_len]=Ae<2?++Ae:0)]=1,re.depth[ge]=0,re.opt_len--,ce&&(re.static_len-=ue[2*ge+1]);for(J.max_code=Ae,fe=re.heap_len>>1;1<=fe;fe--)ve(re,me,fe);for(ge=oe;fe=re.heap[1],re.heap[1]=re.heap[re.heap_len--],ve(re,me,1),we=re.heap[1],re.heap[--re.heap_max]=fe,re.heap[--re.heap_max]=we,me[2*ge]=me[2*fe]+me[2*we],re.depth[ge]=(re.depth[fe]>=re.depth[we]?re.depth[fe]:re.depth[we])+1,me[2*fe+1]=me[2*we+1]=ge,re.heap[1]=ge++,ve(re,me,1),2<=re.heap_len;);re.heap[--re.heap_max]=re.heap[1],function(Te,Ge){var Fe,Re,ze,Ie,Ve,We,Ze=Ge.dyn_tree,at=Ge.max_code,ft=Ge.stat_desc.static_tree,wt=Ge.stat_desc.has_stree,dt=Ge.stat_desc.extra_bits,vt=Ge.stat_desc.extra_base,Et=Ge.stat_desc.max_length,Mt=0;for(Ie=0;Ie<=b;Ie++)Te.bl_count[Ie]=0;for(Ze[2*Te.heap[Te.heap_max]+1]=0,Fe=Te.heap_max+1;Fe<g;Fe++)Et<(Ie=Ze[2*Ze[2*(Re=Te.heap[Fe])+1]+1]+1)&&(Ie=Et,Mt++),Ze[2*Re+1]=Ie,at<Re||(Te.bl_count[Ie]++,Ve=0,vt<=Re&&(Ve=dt[Re-vt]),We=Ze[2*Re],Te.opt_len+=We*(Ie+Ve),wt&&(Te.static_len+=We*(ft[2*Re+1]+Ve)));if(Mt!==0){do{for(Ie=Et-1;Te.bl_count[Ie]===0;)Ie--;Te.bl_count[Ie]--,Te.bl_count[Ie+1]+=2,Te.bl_count[Et]--,Mt-=2}while(0<Mt);for(Ie=Et;Ie!==0;Ie--)for(Re=Te.bl_count[Ie];Re!==0;)at<(ze=Te.heap[--Fe])||(Ze[2*ze+1]!==Ie&&(Te.opt_len+=(Ie-Ze[2*ze+1])*Ze[2*ze],Ze[2*ze+1]=Ie),Re--)}}(re,J),X(me,Ae,re.bl_count)}function K(re,J,fe){var we,ge,me=-1,ue=J[1],ce=0,oe=7,Ae=4;for(ue===0&&(oe=138,Ae=3),J[2*(fe+1)+1]=65535,we=0;we<=fe;we++)ge=ue,ue=J[2*(we+1)+1],++ce<oe&&ge===ue||(ce<Ae?re.bl_tree[2*ge]+=ce:ge!==0?(ge!==me&&re.bl_tree[2*ge]++,re.bl_tree[2*w]++):ce<=10?re.bl_tree[2*S]++:re.bl_tree[2*A]++,me=ge,Ae=(ce=0)===ue?(oe=138,3):ge===ue?(oe=6,3):(oe=7,4))}function le(re,J,fe){var we,ge,me=-1,ue=J[1],ce=0,oe=7,Ae=4;for(ue===0&&(oe=138,Ae=3),we=0;we<=fe;we++)if(ge=ue,ue=J[2*(we+1)+1],!(++ce<oe&&ge===ue)){if(ce<Ae)for(;U(re,ge,re.bl_tree),--ce!=0;);else ge!==0?(ge!==me&&(U(re,ge,re.bl_tree),ce--),U(re,w,re.bl_tree),F(re,ce-3,2)):ce<=10?(U(re,S,re.bl_tree),F(re,ce-3,3)):(U(re,A,re.bl_tree),F(re,ce-11,7));me=ge,Ae=(ce=0)===ue?(oe=138,3):ge===ue?(oe=6,3):(oe=7,4)}}u(V);var Z=!1;function ie(re,J,fe,we){F(re,(l<<1)+(we?1:0),3),function(ge,me,ue,ce){ne(ge),ce&&(q(ge,ue),q(ge,~ue)),a.arraySet(ge.pending_buf,ge.window,me,ue,ge.pending),ge.pending+=ue}(re,J,fe,!0)}i._tr_init=function(re){Z||(function(){var J,fe,we,ge,me,ue=new Array(b+1);for(ge=we=0;ge<f-1;ge++)for(B[ge]=we,J=0;J<1<<_[ge];J++)x[we++]=ge;for(x[we-1]=ge,ge=me=0;ge<16;ge++)for(V[ge]=me,J=0;J<1<<E[ge];J++)R[me++]=ge;for(me>>=7;ge<h;ge++)for(V[ge]=me<<7,J=0;J<1<<E[ge]-7;J++)R[256+me++]=ge;for(fe=0;fe<=b;fe++)ue[fe]=0;for(J=0;J<=143;)T[2*J+1]=8,J++,ue[8]++;for(;J<=255;)T[2*J+1]=9,J++,ue[9]++;for(;J<=279;)T[2*J+1]=7,J++,ue[7]++;for(;J<=287;)T[2*J+1]=8,J++,ue[8]++;for(X(T,d+1,ue),J=0;J<h;J++)C[2*J+1]=5,C[2*J]=W(J,5);D=new I(T,_,c+1,d,b),O=new I(C,E,0,h,b),G=new I(new Array(0),k,0,p,y)}(),Z=!0),re.l_desc=new z(re.dyn_ltree,D),re.d_desc=new z(re.dyn_dtree,O),re.bl_desc=new z(re.bl_tree,G),re.bi_buf=0,re.bi_valid=0,te(re)},i._tr_stored_block=ie,i._tr_flush_block=function(re,J,fe,we){var ge,me,ue=0;0<re.level?(re.strm.data_type===2&&(re.strm.data_type=function(ce){var oe,Ae=4093624447;for(oe=0;oe<=31;oe++,Ae>>>=1)if(1&Ae&&ce.dyn_ltree[2*oe]!==0)return o;if(ce.dyn_ltree[18]!==0||ce.dyn_ltree[20]!==0||ce.dyn_ltree[26]!==0)return s;for(oe=32;oe<c;oe++)if(ce.dyn_ltree[2*oe]!==0)return s;return o}(re)),Le(re,re.l_desc),Le(re,re.d_desc),ue=function(ce){var oe;for(K(ce,ce.dyn_ltree,ce.l_desc.max_code),K(ce,ce.dyn_dtree,ce.d_desc.max_code),Le(ce,ce.bl_desc),oe=p-1;3<=oe&&ce.bl_tree[2*M[oe]+1]===0;oe--);return ce.opt_len+=3*(oe+1)+5+5+4,oe}(re),ge=re.opt_len+3+7>>>3,(me=re.static_len+3+7>>>3)<=ge&&(ge=me)):ge=me=fe+5,fe+4<=ge&&J!==-1?ie(re,J,fe,we):re.strategy===4||me===ge?(F(re,2+(we?1:0),3),Ce(re,T,C)):(F(re,4+(we?1:0),3),function(ce,oe,Ae,Te){var Ge;for(F(ce,oe-257,5),F(ce,Ae-1,5),F(ce,Te-4,4),Ge=0;Ge<Te;Ge++)F(ce,ce.bl_tree[2*M[Ge]+1],3);le(ce,ce.dyn_ltree,oe-1),le(ce,ce.dyn_dtree,Ae-1)}(re,re.l_desc.max_code+1,re.d_desc.max_code+1,ue+1),Ce(re,re.dyn_ltree,re.dyn_dtree)),te(re),we&&ne(re)},i._tr_tally=function(re,J,fe){return re.pending_buf[re.d_buf+2*re.last_lit]=J>>>8&255,re.pending_buf[re.d_buf+2*re.last_lit+1]=255&J,re.pending_buf[re.l_buf+re.last_lit]=255&fe,re.last_lit++,J===0?re.dyn_ltree[2*fe]++:(re.matches++,J--,re.dyn_ltree[2*(x[fe]+c+1)]++,re.dyn_dtree[2*P(J)]++),re.last_lit===re.lit_bufsize-1},i._tr_align=function(re){F(re,2,3),U(re,m,T),function(J){J.bi_valid===16?(q(J,J.bi_buf),J.bi_buf=0,J.bi_valid=0):8<=J.bi_valid&&(J.pending_buf[J.pending++]=255&J.bi_buf,J.bi_buf>>=8,J.bi_valid-=8)}(re)}},{"../utils/common":41}],53:[function(t,n,i){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,n,i){(function(a){(function(o,s){if(!o.setImmediate){var u,l,f,c,d=1,h={},p=!1,g=o.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(o);b=b&&b.setTimeout?b:o,u={}.toString.call(o.process)==="[object process]"?function(w){process.nextTick(function(){y(w)})}:function(){if(o.postMessage&&!o.importScripts){var w=!0,S=o.onmessage;return o.onmessage=function(){w=!1},o.postMessage("","*"),o.onmessage=S,w}}()?(c="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",m,!1):o.attachEvent("onmessage",m),function(w){o.postMessage(c+w,"*")}):o.MessageChannel?((f=new MessageChannel).port1.onmessage=function(w){y(w.data)},function(w){f.port2.postMessage(w)}):g&&"onreadystatechange"in g.createElement("script")?(l=g.documentElement,function(w){var S=g.createElement("script");S.onreadystatechange=function(){y(w),S.onreadystatechange=null,l.removeChild(S),S=null},l.appendChild(S)}):function(w){setTimeout(y,0,w)},b.setImmediate=function(w){typeof w!="function"&&(w=new Function(""+w));for(var S=new Array(arguments.length-1),A=0;A<S.length;A++)S[A]=arguments[A+1];var _={callback:w,args:S};return h[d]=_,u(d),d++},b.clearImmediate=v}function v(w){delete h[w]}function y(w){if(p)setTimeout(y,0,w);else{var S=h[w];if(S){p=!0;try{(function(A){var _=A.callback,E=A.args;switch(E.length){case 0:_();break;case 1:_(E[0]);break;case 2:_(E[0],E[1]);break;case 3:_(E[0],E[1],E[2]);break;default:_.apply(s,E)}})(S)}finally{v(w),p=!1}}}}function m(w){w.source===o&&typeof w.data=="string"&&w.data.indexOf(c)===0&&y(+w.data.slice(c.length))}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,typeof kt<"u"?kt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(VL);var jz=VL.exports;const Vz=qi(jz);function Wz(r){let e,t,n,i,a,o,s;const u=r[3].default,l=Ah(u,r,r[2],null);return{c(){e=Yt("li"),t=Yt("a"),n=ia(r[0]),i=Yt("span"),a=qt(),o=Yt("ul"),l&&l.c(),st(i,"class","caret"),st(t,"href","#"),st(t,"class","dropdown-toggle svelte-rkqezw"),st(t,"data-toggle","dropdown"),st(t,"role","button"),st(t,"aria-haspopup","true"),st(t,"aria-expanded","false"),st(t,"draggable","false"),vp(t,"minimal",r[1]),st(o,"class","dropdown-menu"),st(e,"class","dropdown")},m(f,c){Pt(f,e,c),Gt(e,t),Gt(t,n),Gt(t,i),Gt(e,a),Gt(e,o),l&&l.m(o,null),s=!0},p(f,[c]){(!s||c&1)&&Au(n,f[0]),(!s||c&2)&&vp(t,"minimal",f[1]),l&&l.p&&(!s||c&4)&&kh(l,u,f,f[2],s?Th(u,f[2],c,null):Lh(f[2]),null)},i(f){s||(xt(l,f),s=!0)},o(f){At(l,f),s=!1},d(f){f&&Nt(e),l&&l.d(f)}}}function Yz(r,e,t){let{$$slots:n={},$$scope:i}=e,{name:a}=e,{minimal:o=!1}=e;return r.$$set=s=>{"name"in s&&t(0,a=s.name),"minimal"in s&&t(1,o=s.minimal),"$$scope"in s&&t(2,i=s.$$scope)},[a,o,i,n]}class ac extends Ir{constructor(e){super(),Dr(this,e,Yz,Wz,Nr,{name:0,minimal:1})}}function Lx(r,e,t){const n=r.slice();return n[4]=e[t],n}function Nx(r){let e;return{c(){e=Yt("li"),st(e,"class","divider")},m(t,n){Pt(t,e,n)},d(t){t&&Nt(e)}}}function Px(r){let e,t,n=r[4].name+"",i,a,o,s,u;function l(...c){return r[3](r[4],...c)}let f=r[4].divider&&Nx();return{c(){e=Yt("li"),t=Yt("a"),i=ia(n),a=qt(),f&&f.c(),o=jf(),st(t,"href","#"),vp(e,"disabled",r[4].disable)},m(c,d){Pt(c,e,d),Gt(e,t),Gt(t,i),Pt(c,a,d),f&&f.m(c,d),Pt(c,o,d),s||(u=kn(t,"click",l),s=!0)},p(c,d){r=c,d&1&&n!==(n=r[4].name+"")&&Au(i,n),d&1&&vp(e,"disabled",r[4].disable),r[4].divider?f||(f=Nx(),f.c(),f.m(o.parentNode,o)):f&&(f.d(1),f=null)},d(c){c&&Nt(e),c&&Nt(a),f&&f.d(c),c&&Nt(o),s=!1,u()}}}function Xz(r){let e,t=r[0],n=[];for(let i=0;i<t.length;i+=1)n[i]=Px(Lx(r,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=jf()},m(i,a){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(i,a);Pt(i,e,a)},p(i,a){if(a&1){t=i[0];let o;for(o=0;o<t.length;o+=1){const s=Lx(i,t,o);n[o]?n[o].p(s,a):(n[o]=Px(s),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(i){Ls(n,i),i&&Nt(e)}}}function Kz(r){let e,t;return e=new ac({props:{minimal:r[2],name:r[1],$$slots:{default:[Xz]},$$scope:{ctx:r}}}),{c(){Qt(e.$$.fragment)},m(n,i){Xt(e,n,i),t=!0},p(n,[i]){const a={};i&4&&(a.minimal=n[2]),i&2&&(a.name=n[1]),i&129&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){t||(xt(e.$$.fragment,n),t=!0)},o(n){At(e.$$.fragment,n),t=!1},d(n){Kt(e,n)}}}function Zz(r,e){e.disable||e.action(r)}function Qz(r,e,t){let{menuItems:n}=e,{name:i}=e,{minimal:a=!1}=e;const o=(s,u)=>Zz(u,s);return r.$$set=s=>{"menuItems"in s&&t(0,n=s.menuItems),"name"in s&&t(1,i=s.name),"minimal"in s&&t(2,a=s.minimal)},[n,i,a,o]}class ww extends Ir{constructor(e){super(),Dr(this,e,Qz,Kz,Nr,{menuItems:0,name:1,minimal:2})}}var WL={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(window,function(){return function(t){var n={};function i(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=n,i.d=function(a,o,s){i.o(a,o)||Object.defineProperty(a,o,{enumerable:!0,get:s})},i.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},i.t=function(a,o){if(1&o&&(a=i(a)),8&o||4&o&&typeof a=="object"&&a&&a.__esModule)return a;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:a}),2&o&&typeof a!="string")for(var u in a)i.d(s,u,(function(l){return a[l]}).bind(null,u));return s},i.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(o,"a",o),o},i.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},i.p="",i(i.s=0)}([function(t,n,i){var a=i(1),o=function(s){s&&s("core","svg",a.svg)};typeof cytoscape<"u"&&o(cytoscape),t.exports=o},function(t,n,i){var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},o=i(2),s={},u={};u.number=function(l){return l!=null&&(l===void 0?"undefined":a(l))===a(1)&&!isNaN(l)},s.bufferCanvasImage=function(l,f){var c=f.renderer().usePaths;f.renderer().usePaths=function(){return!1},f.elements().forEach(function(T){T._private.rscratch.pathCacheKey=null,T._private.rscratch.pathCache=null});var d=f.renderer(),h=f.mutableElements().boundingBox(),p=d.findContainerClientCoords(),g=l.full?Math.ceil(h.w):p[2],b=l.full?Math.ceil(h.h):p[3],v=u.number(l.maxWidth)||u.number(l.maxHeight),y=d.getPixelRatio(),m=1;if(l.scale!==void 0)g*=l.scale,b*=l.scale,m=l.scale;else if(v){var w=1/0,S=1/0;u.number(l.maxWidth)&&(w=m*l.maxWidth/g),u.number(l.maxHeight)&&(S=m*l.maxHeight/b),g*=m=Math.min(w,S),b*=m}v||(g*=y,b*=y,m*=y);var A=null,_=A=new o(g,b);if(g>0&&b>0){A.clearRect(0,0,g,b),l.bg&&(A.globalCompositeOperation="destination-over",A.fillStyle=l.bg,A.fillRect(0,0,g,b)),A.globalCompositeOperation="source-over";var E=d.getCachedZSortedEles();if(l.full)A.translate(-h.x1*m,-h.y1*m),A.scale(m,m),d.drawElements(A,E),A.scale(1/m,1/m),A.translate(h.x1*m,h.y1*m);else{var k=f.pan(),M={x:k.x*m,y:k.y*m};m*=f.zoom(),A.translate(M.x,M.y),A.scale(m,m),d.drawElements(A,E),A.scale(1/m,1/m),A.translate(-M.x,-M.y)}}return f.renderer().usePaths=c,_},s.svg=function(l){return s.bufferCanvasImage(l||{},this).getSerializedSvg()},t.exports=s},function(t,n,i){(function(){var a,o,s,u,l;function f(p,g){var b,v=Object.keys(g);for(b=0;b<v.length;b++)p=p.replace(new RegExp("\\{"+v[b]+"\\}","gi"),g[v[b]]);return p}function c(p){var g,b,v;if(!p)throw new Error("cannot create a random attribute name for an undefined object");g="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",b="";do for(b="",v=0;v<12;v++)b+=g[Math.floor(Math.random()*g.length)];while(p[b]);return b}function d(p){var g={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return g[p]||g.alphabetic}l=function(p,g){var b,v,y,m={};for(p=p.split(","),g=g||10,b=0;b<p.length;b+=2)v="&"+p[b+1]+";",y=parseInt(p[b],g),m[v]="&#"+y+";";return m["\\xa0"]="&#160;",m}("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),a={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}},(s=function(p,g){this.__root=p,this.__ctx=g}).prototype.addColorStop=function(p,g){var b,v=this.__ctx.__createElement("stop");v.setAttribute("offset",p),g.indexOf("rgba")!==-1?(b=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(g),v.setAttribute("stop-color",f("rgb({r},{g},{b})",{r:b[1],g:b[2],b:b[3]})),v.setAttribute("stop-opacity",b[4])):v.setAttribute("stop-color",g),this.__root.appendChild(v)},u=function(p,g){this.__root=p,this.__ctx=g},(o=function(p){var g,b={width:500,height:500,enableMirroring:!1};if(arguments.length>1?((g=b).width=arguments[0],g.height=arguments[1]):g=p||b,!(this instanceof o))return new o(g);this.width=g.width||b.width,this.height=g.height||b.height,this.enableMirroring=g.enableMirroring!==void 0?g.enableMirroring:b.enableMirroring,this.canvas=this,this.__document=g.document||document,g.ctx?this.__ctx=g.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement)}).prototype.__createElement=function(p,g,b){g===void 0&&(g={});var v,y,m=this.__document.createElementNS("http://www.w3.org/2000/svg",p),w=Object.keys(g);for(b&&(m.setAttribute("fill","none"),m.setAttribute("stroke","none")),v=0;v<w.length;v++)y=w[v],m.setAttribute(y,g[y]);return m},o.prototype.__setDefaultStyles=function(){var p,g,b=Object.keys(a);for(p=0;p<b.length;p++)this[g=b[p]]=a[g].canvas},o.prototype.__applyStyleState=function(p){if(p){var g,b,v=Object.keys(p);for(g=0;g<v.length;g++)this[b=v[g]]=p[b]}},o.prototype.__getStyleState=function(){var p,g,b={},v=Object.keys(a);for(p=0;p<v.length;p++)b[g=v[p]]=this[g];return b},o.prototype.__applyStyleToCurrentElement=function(p){var g=this.__currentElement;this.__currentElementsToStyle;var b,v,y,m,w,S=Object.keys(a);for(b=0;b<S.length;b++)if(v=a[S[b]],y=this[S[b]],v.apply){if(y instanceof u){if(y.__ctx)for(;y.__ctx.__defs.childNodes.length;)m=y.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[m]=m,this.__defs.appendChild(y.__ctx.__defs.childNodes[0]);g.setAttribute(v.apply,f("url(#{id})",{id:y.__root.getAttribute("id")}))}else if(y instanceof s)g.setAttribute(v.apply,f("url(#{id})",{id:y.__root.getAttribute("id")}));else if(v.apply.indexOf(p)!==-1&&v.svg!==y)if(v.svgAttr!=="stroke"&&v.svgAttr!=="fill"||y.indexOf("rgba")===-1){var A=v.svgAttr;if(S[b]==="globalAlpha"&&(A=p+"-"+v.svgAttr,g.getAttribute(A)))continue;g.setAttribute(A,y)}else{w=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(y),g.setAttribute(v.svgAttr,f("rgb({r},{g},{b})",{r:w[1],g:w[2],b:w[3]}));var _=w[4],E=this.globalAlpha;E!=null&&(_*=E),g.setAttribute(v.svgAttr+"-opacity",_)}}},o.prototype.__closestGroupOrSvg=function(p){return(p=p||this.__currentElement).nodeName==="g"||p.nodeName==="svg"?p:this.__closestGroupOrSvg(p.parentNode)},o.prototype.getSerializedSvg=function(p){var g,b,v,y,m,w=new XMLSerializer().serializeToString(this.__root);if(/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi.test(w)&&(w=w.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),p)for(g=Object.keys(l),b=0;b<g.length;b++)v=g[b],y=l[v],(m=new RegExp(v,"gi")).test(w)&&(w=w.replace(m,y));return w},o.prototype.getSvg=function(){return this.__root},o.prototype.save=function(){var p=this.__createElement("g"),g=this.__closestGroupOrSvg();this.__groupStack.push(g),g.appendChild(p),this.__currentElement=p,this.__stack.push(this.__getStyleState())},o.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var p=this.__stack.pop();this.__applyStyleState(p)},o.prototype.__addTransform=function(p){var g=this.__closestGroupOrSvg();if(g.childNodes.length>0){this.__currentElement.nodeName==="path"&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:g,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath());var b=this.__createElement("g");g.appendChild(b),this.__currentElement=b}var v=this.__currentElement.getAttribute("transform");v?v+=" ":v="",v+=p,this.__currentElement.setAttribute("transform",v)},o.prototype.scale=function(p,g){g===void 0&&(g=p),this.__addTransform(f("scale({x},{y})",{x:p,y:g}))},o.prototype.rotate=function(p){var g=180*p/Math.PI;this.__addTransform(f("rotate({angle},{cx},{cy})",{angle:g,cx:0,cy:0}))},o.prototype.translate=function(p,g){this.__addTransform(f("translate({x},{y})",{x:p,y:g}))},o.prototype.transform=function(p,g,b,v,y,m){this.__addTransform(f("matrix({a},{b},{c},{d},{e},{f})",{a:p,b:g,c:b,d:v,e:y,f:m}))},o.prototype.beginPath=function(){var p;this.__currentDefaultPath="",this.__currentPosition={},p=this.__createElement("path",{},!0),this.__closestGroupOrSvg().appendChild(p),this.__currentElement=p},o.prototype.__applyCurrentDefaultPath=function(){var p=this.__currentElement;p.nodeName==="path"?p.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",p.nodeName)},o.prototype.__addPathCommand=function(p){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=p},o.prototype.moveTo=function(p,g){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.__currentPosition={x:p,y:g},this.__addPathCommand(f("M {x} {y}",{x:p,y:g}))},o.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")},o.prototype.lineTo=function(p,g){this.__currentPosition={x:p,y:g},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(f("L {x} {y}",{x:p,y:g})):this.__addPathCommand(f("M {x} {y}",{x:p,y:g}))},o.prototype.bezierCurveTo=function(p,g,b,v,y,m){this.__currentPosition={x:y,y:m},this.__addPathCommand(f("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:p,cp1y:g,cp2x:b,cp2y:v,x:y,y:m}))},o.prototype.quadraticCurveTo=function(p,g,b,v){this.__currentPosition={x:b,y:v},this.__addPathCommand(f("Q {cpx} {cpy} {x} {y}",{cpx:p,cpy:g,x:b,y:v}))};var h=function(p){var g=Math.sqrt(p[0]*p[0]+p[1]*p[1]);return[p[0]/g,p[1]/g]};o.prototype.arcTo=function(p,g,b,v,y){var m=this.__currentPosition&&this.__currentPosition.x,w=this.__currentPosition&&this.__currentPosition.y;if(m!==void 0&&w!==void 0){if(y<0)throw new Error("IndexSizeError: The radius provided ("+y+") is negative.");if(m===p&&w===g||p===b&&g===v||y===0)this.lineTo(p,g);else{var S=h([m-p,w-g]),A=h([b-p,v-g]);if(S[0]*A[1]!=S[1]*A[0]){var _=S[0]*A[0]+S[1]*A[1],E=Math.acos(Math.abs(_)),k=h([S[0]+A[0],S[1]+A[1]]),M=y/Math.sin(E/2),T=p+M*k[0],C=g+M*k[1],R=[-S[1],S[0]],x=[A[1],-A[0]],B=function(G){var V=G[0];return G[1]>=0?Math.acos(V):-Math.acos(V)},D=B(R),O=B(x);this.lineTo(T+R[0]*y,C+R[1]*y),this.arc(T,C,y,D,O)}else this.lineTo(p,g)}}},o.prototype.stroke=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},o.prototype.fill=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},o.prototype.rect=function(p,g,b,v){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.moveTo(p,g),this.lineTo(p+b,g),this.lineTo(p+b,g+v),this.lineTo(p,g+v),this.lineTo(p,g),this.closePath()},o.prototype.fillRect=function(p,g,b,v){var y;y=this.__createElement("rect",{x:p,y:g,width:b,height:v},!0),this.__closestGroupOrSvg().appendChild(y),this.__currentElement=y,this.__applyStyleToCurrentElement("fill")},o.prototype.strokeRect=function(p,g,b,v){var y;y=this.__createElement("rect",{x:p,y:g,width:b,height:v},!0),this.__closestGroupOrSvg().appendChild(y),this.__currentElement=y,this.__applyStyleToCurrentElement("stroke")},o.prototype.__clearCanvas=function(){for(var p=this.__closestGroupOrSvg().getAttribute("transform"),g=this.__root.childNodes[1],b=g.childNodes,v=b.length-1;v>=0;v--)b[v]&&g.removeChild(b[v]);this.__currentElement=g,this.__groupStack=[],p&&this.__addTransform(p)},o.prototype.clearRect=function(p,g,b,v){if(p!==0||g!==0||b!==this.width||v!==this.height){var y,m=this.__closestGroupOrSvg();y=this.__createElement("rect",{x:p,y:g,width:b,height:v,fill:"#FFFFFF"},!0),m.appendChild(y)}else this.__clearCanvas()},o.prototype.createLinearGradient=function(p,g,b,v){var y=this.__createElement("linearGradient",{id:c(this.__ids),x1:p+"px",x2:b+"px",y1:g+"px",y2:v+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(y),new s(y,this)},o.prototype.createRadialGradient=function(p,g,b,v,y,m){var w=this.__createElement("radialGradient",{id:c(this.__ids),cx:v+"px",cy:y+"px",r:m+"px",fx:p+"px",fy:g+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(w),new s(w,this)},o.prototype.__parseFont=function(){var p=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i.exec(this.font),g={style:p[1]||"normal",size:p[4]||"10px",family:p[6]||"sans-serif",weight:p[3]||"normal",decoration:p[2]||"normal",href:null};return this.__fontUnderline==="underline"&&(g.decoration="underline"),this.__fontHref&&(g.href=this.__fontHref),g},o.prototype.__wrapTextLink=function(p,g){if(p.href){var b=this.__createElement("a");return b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p.href),b.appendChild(g),b}return g},o.prototype.__applyText=function(p,g,b,v){var y,m,w=this.__parseFont(),S=this.__closestGroupOrSvg(),A=this.__createElement("text",{"font-family":w.family,"font-size":w.size,"font-style":w.style,"font-weight":w.weight,"text-decoration":w.decoration,x:g,y:b,"text-anchor":(y=this.textAlign,m={left:"start",right:"end",center:"middle",start:"start",end:"end"},m[y]||m.start),"dominant-baseline":d(this.textBaseline)},!0);A.appendChild(this.__document.createTextNode(p)),this.__currentElement=A,this.__applyStyleToCurrentElement(v),S.appendChild(this.__wrapTextLink(w,A))},o.prototype.fillText=function(p,g,b){this.__applyText(p,g,b,"fill")},o.prototype.strokeText=function(p,g,b){this.__applyText(p,g,b,"stroke")},o.prototype.measureText=function(p){return this.__ctx.font=this.font,this.__ctx.measureText(p)},o.prototype.arc=function(p,g,b,v,y,m){if(v!==y){(v%=2*Math.PI)===(y%=2*Math.PI)&&(y=(y+2*Math.PI-.001*(m?-1:1))%(2*Math.PI));var w=p+b*Math.cos(y),S=g+b*Math.sin(y),A=p+b*Math.cos(v),_=g+b*Math.sin(v),E=m?0:1,k=0,M=y-v;M<0&&(M+=2*Math.PI),k=m?M>Math.PI?0:1:M>Math.PI?1:0,this.lineTo(A,_),this.__addPathCommand(f("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:b,ry:b,xAxisRotation:0,largeArcFlag:k,sweepFlag:E,endX:w,endY:S})),this.__currentPosition={x:w,y:S}}},o.prototype.clip=function(){var p=this.__closestGroupOrSvg(),g=this.__createElement("clipPath"),b=c(this.__ids),v=this.__createElement("g");this.__applyCurrentDefaultPath(),p.removeChild(this.__currentElement),g.setAttribute("id",b),g.appendChild(this.__currentElement),this.__defs.appendChild(g),p.setAttribute("clip-path",f("url(#{id})",{id:b})),p.appendChild(v),this.__currentElement=v},o.prototype.drawImage=function(){var p,g,b,v,y,m,w,S,A,_,E,k,M,T=Array.prototype.slice.call(arguments),C=T[0],R=0,x=0;if(T.length===3)p=T[1],g=T[2],b=y=C.width,v=m=C.height;else if(T.length===5)p=T[1],g=T[2],b=T[3],v=T[4],y=C.width,m=C.height;else{if(T.length!==9)throw new Error("Inavlid number of arguments passed to drawImage: "+arguments.length);R=T[1],x=T[2],y=T[3],m=T[4],p=T[5],g=T[6],b=T[7],v=T[8]}w=this.__closestGroupOrSvg(),this.__currentElement;var B="translate("+p+", "+g+")";if(C instanceof o){if((S=C.getSvg().cloneNode(!0)).childNodes&&S.childNodes.length>1){for(A=S.childNodes[0];A.childNodes.length;)M=A.childNodes[0].getAttribute("id"),this.__ids[M]=M,this.__defs.appendChild(A.childNodes[0]);if(_=S.childNodes[1]){var D,O=_.getAttribute("transform");D=O?O+" "+B:B,_.setAttribute("transform",D),w.appendChild(_)}}}else C.nodeName!=="CANVAS"&&C.nodeName!=="IMG"||((E=this.__createElement("image")).setAttribute("width",b),E.setAttribute("height",v),E.setAttribute("opacity",this.globalAlpha),E.setAttribute("preserveAspectRatio","none"),(k=this.__document.createElement("canvas")).width=b,k.height=v,k.getContext("2d").drawImage(C,R,x,y,m,0,0,b,v),C=k,E.setAttribute("transform",B),E.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",C.nodeName==="CANVAS"?C.toDataURL():C.getAttribute("src")),w.appendChild(E))},o.prototype.createPattern=function(p,g){var b,v=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),y=c(this.__ids);return v.setAttribute("id",y),v.setAttribute("width",p.width),v.setAttribute("height",p.height),p.nodeName==="CANVAS"||p.nodeName==="IMG"?((b=this.__document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("width",p.width),b.setAttribute("height",p.height),b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p.nodeName==="CANVAS"?p.toDataURL():p.getAttribute("src")),v.appendChild(b),this.__defs.appendChild(v)):p instanceof o&&(v.appendChild(p.__root.childNodes[1]),this.__defs.appendChild(v)),new u(v,this)},o.prototype.setLineDash=function(p){p&&p.length>0?this.lineDash=p.join(","):this.lineDash=null},o.prototype.drawFocusRing=function(){},o.prototype.createImageData=function(){},o.prototype.getImageData=function(){},o.prototype.putImageData=function(){},o.prototype.globalCompositeOperation=function(){},o.prototype.setTransform=function(){},typeof window=="object"&&(window.C2S=o),typeof t.exports=="object"&&(t.exports=o)})()}])})})(WL);var Jz=WL.exports;const eq=qi(Jz);var YL={exports:{}};(function(r,e){(function(t,n){n()})(kt,function(){function t(l,f){return typeof f>"u"?f={autoBom:!1}:typeof f!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\uFEFF",l],{type:l.type}):l}function n(l,f,c){var d=new XMLHttpRequest;d.open("GET",l),d.responseType="blob",d.onload=function(){u(d.response,f,c)},d.onerror=function(){console.error("could not download file")},d.send()}function i(l){var f=new XMLHttpRequest;f.open("HEAD",l,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function a(l){try{l.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),l.dispatchEvent(f)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof kt=="object"&&kt.global===kt?kt:void 0,s=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(l,f,c){var d=o.URL||o.webkitURL,h=document.createElement("a");f=f||l.name||"download",h.download=f,h.rel="noopener",typeof l=="string"?(h.href=l,h.origin===location.origin?a(h):i(h.href)?n(l,f,c):a(h,h.target="_blank")):(h.href=d.createObjectURL(l),setTimeout(function(){d.revokeObjectURL(h.href)},4e4),setTimeout(function(){a(h)},0))}:"msSaveOrOpenBlob"in navigator?function(l,f,c){if(f=f||l.name||"download",typeof l!="string")navigator.msSaveOrOpenBlob(t(l,c),f);else if(i(l))n(l,f,c);else{var d=document.createElement("a");d.href=l,d.target="_blank",setTimeout(function(){a(d)})}}:function(l,f,c,d){if(d=d||open("","_blank"),d&&(d.document.title=d.document.body.innerText="downloading..."),typeof l=="string")return n(l,f,c);var h=l.type==="application/octet-stream",p=/constructor/i.test(o.HTMLElement)||o.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||h&&p||s)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var m=b.result;m=g?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=m:location=m,d=null},b.readAsDataURL(l)}else{var v=o.URL||o.webkitURL,y=v.createObjectURL(l);d?d.location=y:location.href=y,d=null,setTimeout(function(){v.revokeObjectURL(y)},4e4)}});o.saveAs=u.saveAs=u,r.exports=u})})(YL);var tq=YL.exports;const rq="modulepreload",nq=function(r,e){return new URL(r,e).href},Mx={},w2=function(e,t,n){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(a=>{if(a=nq(a,n),a in Mx)return;Mx[a]=!0;const o=a.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(!!n)for(let f=i.length-1;f>=0;f--){const c=i[f];if(c.href===a&&(!o||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${s}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":rq,o||(l.as="script",l.crossOrigin=""),l.href=a,document.head.appendChild(l),o)return new Promise((f,c)=>{l.addEventListener("load",f),l.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>e()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})};function _n(r){"@babel/helpers - typeof";return _n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_n(r)}var ba=Uint8Array,wa=Uint16Array,_h=Uint32Array,uv=new ba([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),lv=new ba([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),_2=new ba([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),XL=function(r,e){for(var t=new wa(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var i=new _h(t[30]),n=1;n<30;++n)for(var a=t[n];a<t[n+1];++a)i[a]=a-t[n]<<5|n;return[t,i]},KL=XL(uv,2),ZL=KL[0],x2=KL[1];ZL[28]=258,x2[258]=28;var QL=XL(lv,0),iq=QL[0],Ox=QL[1],S2=new wa(32768);for(var Vn=0;Vn<32768;++Vn){var cu=(Vn&43690)>>>1|(Vn&21845)<<1;cu=(cu&52428)>>>2|(cu&13107)<<2,cu=(cu&61680)>>>4|(cu&3855)<<4,S2[Vn]=((cu&65280)>>>8|(cu&255)<<8)>>>1}var ns=function(r,e,t){for(var n=r.length,i=0,a=new wa(e);i<n;++i)++a[r[i]-1];var o=new wa(e);for(i=0;i<e;++i)o[i]=o[i-1]+a[i-1]<<1;var s;if(t){s=new wa(1<<e);var u=15-e;for(i=0;i<n;++i)if(r[i])for(var l=i<<4|r[i],f=e-r[i],c=o[r[i]-1]++<<f,d=c|(1<<f)-1;c<=d;++c)s[S2[c]>>>u]=l}else for(s=new wa(n),i=0;i<n;++i)s[i]=S2[o[r[i]-1]++]>>>15-r[i];return s},Mu=new ba(288);for(var Vn=0;Vn<144;++Vn)Mu[Vn]=8;for(var Vn=144;Vn<256;++Vn)Mu[Vn]=9;for(var Vn=256;Vn<280;++Vn)Mu[Vn]=7;for(var Vn=280;Vn<288;++Vn)Mu[Vn]=8;var xh=new ba(32);for(var Vn=0;Vn<32;++Vn)xh[Vn]=5;var aq=ns(Mu,9,0),oq=ns(Mu,9,1),sq=ns(xh,5,0),uq=ns(xh,5,1),dm=function(r){for(var e=r[0],t=1;t<r.length;++t)r[t]>e&&(e=r[t]);return e},yo=function(r,e,t){var n=e/8>>0;return(r[n]|r[n+1]<<8)>>>(e&7)&t},pm=function(r,e){var t=e/8>>0;return(r[t]|r[t+1]<<8|r[t+2]<<16)>>>(e&7)},_w=function(r){return(r/8>>0)+(r&7&&1)},JL=function(r,e,t){(e==null||e<0)&&(e=0),(t==null||t>r.length)&&(t=r.length);var n=new(r instanceof wa?wa:r instanceof _h?_h:ba)(t-e);return n.set(r.subarray(e,t)),n},lq=function(r,e,t){var n=r.length,i=!e||t,a=!t||t.i;t||(t={}),e||(e=new ba(n*3));var o=function(W){var X=e.length;if(W>X){var te=new ba(Math.max(X*2,W));te.set(e),e=te}},s=t.f||0,u=t.p||0,l=t.b||0,f=t.l,c=t.d,d=t.m,h=t.n,p=n*8;do{if(!f){t.f=s=yo(r,u,1);var g=yo(r,u+1,3);if(u+=3,g)if(g==1)f=oq,c=uq,d=9,h=5;else if(g==2){var m=yo(r,u,31)+257,w=yo(r,u+10,15)+4,S=m+yo(r,u+5,31)+1;u+=14;for(var A=new ba(S),_=new ba(19),E=0;E<w;++E)_[_2[E]]=yo(r,u+E*3,7);u+=w*3;var k=dm(_),M=(1<<k)-1;if(!a&&u+S*(k+7)>p)break;for(var T=ns(_,k,1),E=0;E<S;){var C=T[yo(r,u,M)];u+=C&15;var b=C>>>4;if(b<16)A[E++]=b;else{var R=0,x=0;for(b==16?(x=3+yo(r,u,3),u+=2,R=A[E-1]):b==17?(x=3+yo(r,u,7),u+=3):b==18&&(x=11+yo(r,u,127),u+=7);x--;)A[E++]=R}}var B=A.subarray(0,m),D=A.subarray(m);d=dm(B),h=dm(D),f=ns(B,d,1),c=ns(D,h,1)}else throw"invalid block type";else{var b=_w(u)+4,v=r[b-4]|r[b-3]<<8,y=b+v;if(y>n){if(a)throw"unexpected EOF";break}i&&o(l+v),e.set(r.subarray(b,y),l),t.b=l+=v,t.p=u=y*8;continue}if(u>p)throw"unexpected EOF"}i&&o(l+131072);for(var O=(1<<d)-1,G=(1<<h)-1,V=d+h+18;a||u+V<p;){var R=f[pm(r,u)&O],I=R>>>4;if(u+=R&15,u>p)throw"unexpected EOF";if(!R)throw"invalid length/literal";if(I<256)e[l++]=I;else if(I==256){f=null;break}else{var z=I-254;if(I>264){var E=I-257,P=uv[E];z=yo(r,u,(1<<P)-1)+ZL[E],u+=P}var q=c[pm(r,u)&G],F=q>>>4;if(!q)throw"invalid distance";u+=q&15;var D=iq[F];if(F>3){var P=lv[F];D+=pm(r,u)&(1<<P)-1,u+=P}if(u>p)throw"unexpected EOF";i&&o(l+131072);for(var U=l+z;l<U;l+=4)e[l]=e[l-D],e[l+1]=e[l+1-D],e[l+2]=e[l+2-D],e[l+3]=e[l+3-D];l=U}}t.l=f,t.p=u,t.b=l,f&&(s=1,t.m=d,t.d=c,t.n=h)}while(!s);return l==e.length?e:JL(e,0,l)},ws=function(r,e,t){t<<=e&7;var n=e/8>>0;r[n]|=t,r[n+1]|=t>>>8},Dc=function(r,e,t){t<<=e&7;var n=e/8>>0;r[n]|=t,r[n+1]|=t>>>8,r[n+2]|=t>>>16},vm=function(r,e){for(var t=[],n=0;n<r.length;++n)r[n]&&t.push({s:n,f:r[n]});var i=t.length,a=t.slice();if(!i)return[new ba(0),0];if(i==1){var o=new ba(t[0].s+1);return o[t[0].s]=1,[o,1]}t.sort(function(S,A){return S.f-A.f}),t.push({s:-1,f:25001});var s=t[0],u=t[1],l=0,f=1,c=2;for(t[0]={s:-1,f:s.f+u.f,l:s,r:u};f!=i-1;)s=t[t[l].f<t[c].f?l++:c++],u=t[l!=f&&t[l].f<t[c].f?l++:c++],t[f++]={s:-1,f:s.f+u.f,l:s,r:u};for(var d=a[0].s,n=1;n<i;++n)a[n].s>d&&(d=a[n].s);var h=new wa(d+1),p=E2(t[f-1],h,0);if(p>e){var n=0,g=0,b=p-e,v=1<<b;for(a.sort(function(A,_){return h[_.s]-h[A.s]||A.f-_.f});n<i;++n){var y=a[n].s;if(h[y]>e)g+=v-(1<<p-h[y]),h[y]=e;else break}for(g>>>=b;g>0;){var m=a[n].s;h[m]<e?g-=1<<e-h[m]++-1:++n}for(;n>=0&&g;--n){var w=a[n].s;h[w]==e&&(--h[w],++g)}p=e}return[new ba(h),p]},E2=function(r,e,t){return r.s==-1?Math.max(E2(r.l,e,t+1),E2(r.r,e,t+1)):e[r.s]=t},Dx=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new wa(++e),n=0,i=r[0],a=1,o=function(u){t[n++]=u},s=1;s<=e;++s)if(r[s]==i&&s!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=r[s]}return[t.subarray(0,n),e]},Ic=function(r,e){for(var t=0,n=0;n<e.length;++n)t+=r[n]*e[n];return t},op=function(r,e,t){var n=t.length,i=_w(e+2);r[i]=n&255,r[i+1]=n>>>8,r[i+2]=r[i]^255,r[i+3]=r[i+1]^255;for(var a=0;a<n;++a)r[i+a+4]=t[a];return(i+4+n)*8},Ix=function(r,e,t,n,i,a,o,s,u,l,f){ws(e,f++,t),++i[256];for(var c=vm(i,15),d=c[0],h=c[1],p=vm(a,15),g=p[0],b=p[1],v=Dx(d),y=v[0],m=v[1],w=Dx(g),S=w[0],A=w[1],_=new wa(19),E=0;E<y.length;++E)_[y[E]&31]++;for(var E=0;E<S.length;++E)_[S[E]&31]++;for(var k=vm(_,7),M=k[0],T=k[1],C=19;C>4&&!M[_2[C-1]];--C);var R=l+5<<3,x=Ic(i,Mu)+Ic(a,xh)+o,B=Ic(i,d)+Ic(a,g)+o+14+3*C+Ic(_,M)+(2*_[16]+3*_[17]+7*_[18]);if(R<=x&&R<=B)return op(e,f,r.subarray(u,u+l));var D,O,G,V;if(ws(e,f,1+(B<x)),f+=2,B<x){D=ns(d,h,0),O=d,G=ns(g,b,0),V=g;var I=ns(M,T,0);ws(e,f,m-257),ws(e,f+5,A-1),ws(e,f+10,C-4),f+=14;for(var E=0;E<C;++E)ws(e,f+3*E,M[_2[E]]);f+=3*C;for(var z=[y,S],P=0;P<2;++P)for(var q=z[P],E=0;E<q.length;++E){var F=q[E]&31;ws(e,f,I[F]),f+=M[F],F>15&&(ws(e,f,q[E]>>>5&127),f+=q[E]>>>12)}}else D=aq,O=Mu,G=sq,V=xh;for(var E=0;E<s;++E)if(n[E]>255){var F=n[E]>>>18&31;Dc(e,f,D[F+257]),f+=O[F+257],F>7&&(ws(e,f,n[E]>>>23&31),f+=uv[F]);var U=n[E]&31;Dc(e,f,G[U]),f+=V[U],U>3&&(Dc(e,f,n[E]>>>5&8191),f+=lv[U])}else Dc(e,f,D[n[E]]),f+=O[n[E]];return Dc(e,f,D[256]),f+O[256]},fq=new _h([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),cq=new ba(0),hq=function(r,e,t,n,i,a){var o=r.length,s=new ba(n+o+5*(1+Math.floor(o/7e3))+i),u=s.subarray(n,s.length-i),l=0;if(!e||o<8)for(var f=0;f<=o;f+=65535){var c=f+65535;c<o?l=op(u,l,r.subarray(f,c)):(u[f]=a,l=op(u,l,r.subarray(f,o)))}else{for(var d=fq[e-1],h=d>>>13,p=d&8191,g=(1<<t)-1,b=new wa(32768),v=new wa(g+1),y=Math.ceil(t/3),m=2*y,w=function(K){return(r[K]^r[K+1]<<y^r[K+2]<<m)&g},S=new _h(25e3),A=new wa(288),_=new wa(32),E=0,k=0,f=0,M=0,T=0,C=0;f<o;++f){var R=w(f),x=f&32767,B=v[R];if(b[x]=B,v[R]=x,T<=f){var D=o-f;if((E>7e3||M>24576)&&D>423){l=Ix(r,u,0,S,A,_,k,M,C,f-C,l),M=E=k=0,C=f;for(var O=0;O<286;++O)A[O]=0;for(var O=0;O<30;++O)_[O]=0}var G=2,V=0,I=p,z=x-B&32767;if(D>2&&R==w(f-z))for(var P=Math.min(h,D)-1,q=Math.min(32767,f),F=Math.min(258,D);z<=q&&--I&&x!=B;){if(r[f+G]==r[f+G-z]){for(var U=0;U<F&&r[f+U]==r[f+U-z];++U);if(U>G){if(G=U,V=z,U>P)break;for(var W=Math.min(z,U-2),X=0,O=0;O<W;++O){var te=f-z+O+32768&32767,ne=b[te],he=te-ne+32768&32767;he>X&&(X=he,B=te)}}}x=B,B=b[x],z+=x-B+32768&32767}if(V){S[M++]=268435456|x2[G]<<18|Ox[V];var ve=x2[G]&31,Ce=Ox[V]&31;k+=uv[ve]+lv[Ce],++A[257+ve],++_[Ce],T=f+G,++E}else S[M++]=r[f],++A[r[f]]}}l=Ix(r,u,a,S,A,_,k,M,C,f-C,l),a||(l=op(u,l,cq))}return JL(s,0,n+_w(l)+i)},dq=function(){var r=1,e=0;return{p:function(t){for(var n=r,i=e,a=t.length,o=0;o!=a;){for(var s=Math.min(o+5552,a);o<s;++o)n+=t[o],i+=n;n%=65521,i%=65521}r=n,e=i},d:function(){return(r>>>8<<16|(e&255)<<8|e>>>8)+((r&255)<<23)*2}}},pq=function(r,e,t,n,i){return hq(r,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):12+e.mem,t,n,!i)},vq=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},gq=function(r,e){var t=e.level,n=t==0?0:t<6?1:t==9?3:2;r[0]=120,r[1]=n<<6|(n?32-2*n:1)},mq=function(r){if((r[0]&15)!=8||r[0]>>>4>7||(r[0]<<8|r[1])%31)throw"invalid zlib data";if(r[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function C2(r,e){e===void 0&&(e={});var t=dq();t.p(r);var n=pq(r,e,2,4);return gq(n,e),vq(n,n.length-4,t.d()),n}function yq(r,e){return lq((mq(r),r.subarray(2,-4)),e)}var Cr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function gm(){Cr.console&&typeof Cr.console.log=="function"&&Cr.console.log.apply(Cr.console,arguments)}var On={log:gm,warn:function(r){Cr.console&&(typeof Cr.console.warn=="function"?Cr.console.warn.apply(Cr.console,arguments):gm.call(null,arguments))},error:function(r){Cr.console&&(typeof Cr.console.error=="function"?Cr.console.error.apply(Cr.console,arguments):gm(r))}};function mm(r,e,t){var n=new XMLHttpRequest;n.open("GET",r),n.responseType="blob",n.onload=function(){ol(n.response,e,t)},n.onerror=function(){On.error("could not download file")},n.send()}function Rx(r){var e=new XMLHttpRequest;e.open("HEAD",r,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Id(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(e)}}var sh,A2,ol=Cr.saveAs||((typeof window>"u"?"undefined":_n(window))!=="object"||window!==Cr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,e,t){var n=Cr.URL||Cr.webkitURL,i=document.createElement("a");e=e||r.name||"download",i.download=e,i.rel="noopener",typeof r=="string"?(i.href=r,i.origin!==location.origin?Rx(i.href)?mm(r,e,t):Id(i,i.target="_blank"):Id(i)):(i.href=n.createObjectURL(r),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){Id(i)},0))}:"msSaveOrOpenBlob"in navigator?function(r,e,t){if(e=e||r.name||"download",typeof r=="string")if(Rx(r))mm(r,e,t);else{var n=document.createElement("a");n.href=r,n.target="_blank",setTimeout(function(){Id(n)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:_n(a)!=="object"&&(On.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob([String.fromCharCode(65279),i],{type:i.type}):i}(r,t),e)}:function(r,e,t,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof r=="string")return mm(r,e,t);var i=r.type==="application/octet-stream",a=/constructor/i.test(Cr.HTMLElement)||Cr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&a)&&(typeof FileReader>"u"?"undefined":_n(FileReader))==="object"){var s=new FileReader;s.onloadend=function(){var f=s.result;f=o?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=f:location=f,n=null},s.readAsDataURL(r)}else{var u=Cr.URL||Cr.webkitURL,l=u.createObjectURL(r);n?n.location=l:location.href=l,n=null,setTimeout(function(){u.revokeObjectURL(l)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function eN(r){var e;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(s){return[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(s){return[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(s){return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)]}}],n=0;n<t.length;n++){var i=t[n].re,a=t[n].process,o=i.exec(r);o&&(e=a(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var s=this.r.toString(16),u=this.g.toString(16),l=this.b.toString(16);return s.length==1&&(s="0"+s),u.length==1&&(u="0"+u),l.length==1&&(l="0"+l),"#"+s+u+l}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function ym(r,e){var t=r[0],n=r[1],i=r[2],a=r[3];t=ea(t,n,i,a,e[0],7,-680876936),a=ea(a,t,n,i,e[1],12,-389564586),i=ea(i,a,t,n,e[2],17,606105819),n=ea(n,i,a,t,e[3],22,-1044525330),t=ea(t,n,i,a,e[4],7,-176418897),a=ea(a,t,n,i,e[5],12,1200080426),i=ea(i,a,t,n,e[6],17,-1473231341),n=ea(n,i,a,t,e[7],22,-45705983),t=ea(t,n,i,a,e[8],7,1770035416),a=ea(a,t,n,i,e[9],12,-1958414417),i=ea(i,a,t,n,e[10],17,-42063),n=ea(n,i,a,t,e[11],22,-1990404162),t=ea(t,n,i,a,e[12],7,1804603682),a=ea(a,t,n,i,e[13],12,-40341101),i=ea(i,a,t,n,e[14],17,-1502002290),t=ta(t,n=ea(n,i,a,t,e[15],22,1236535329),i,a,e[1],5,-165796510),a=ta(a,t,n,i,e[6],9,-1069501632),i=ta(i,a,t,n,e[11],14,643717713),n=ta(n,i,a,t,e[0],20,-373897302),t=ta(t,n,i,a,e[5],5,-701558691),a=ta(a,t,n,i,e[10],9,38016083),i=ta(i,a,t,n,e[15],14,-660478335),n=ta(n,i,a,t,e[4],20,-405537848),t=ta(t,n,i,a,e[9],5,568446438),a=ta(a,t,n,i,e[14],9,-1019803690),i=ta(i,a,t,n,e[3],14,-187363961),n=ta(n,i,a,t,e[8],20,1163531501),t=ta(t,n,i,a,e[13],5,-1444681467),a=ta(a,t,n,i,e[2],9,-51403784),i=ta(i,a,t,n,e[7],14,1735328473),t=ra(t,n=ta(n,i,a,t,e[12],20,-1926607734),i,a,e[5],4,-378558),a=ra(a,t,n,i,e[8],11,-2022574463),i=ra(i,a,t,n,e[11],16,1839030562),n=ra(n,i,a,t,e[14],23,-35309556),t=ra(t,n,i,a,e[1],4,-1530992060),a=ra(a,t,n,i,e[4],11,1272893353),i=ra(i,a,t,n,e[7],16,-155497632),n=ra(n,i,a,t,e[10],23,-1094730640),t=ra(t,n,i,a,e[13],4,681279174),a=ra(a,t,n,i,e[0],11,-358537222),i=ra(i,a,t,n,e[3],16,-722521979),n=ra(n,i,a,t,e[6],23,76029189),t=ra(t,n,i,a,e[9],4,-640364487),a=ra(a,t,n,i,e[12],11,-421815835),i=ra(i,a,t,n,e[15],16,530742520),t=na(t,n=ra(n,i,a,t,e[2],23,-995338651),i,a,e[0],6,-198630844),a=na(a,t,n,i,e[7],10,1126891415),i=na(i,a,t,n,e[14],15,-1416354905),n=na(n,i,a,t,e[5],21,-57434055),t=na(t,n,i,a,e[12],6,1700485571),a=na(a,t,n,i,e[3],10,-1894986606),i=na(i,a,t,n,e[10],15,-1051523),n=na(n,i,a,t,e[1],21,-2054922799),t=na(t,n,i,a,e[8],6,1873313359),a=na(a,t,n,i,e[15],10,-30611744),i=na(i,a,t,n,e[6],15,-1560198380),n=na(n,i,a,t,e[13],21,1309151649),t=na(t,n,i,a,e[4],6,-145523070),a=na(a,t,n,i,e[11],10,-1120210379),i=na(i,a,t,n,e[2],15,718787259),n=na(n,i,a,t,e[9],21,-343485551),r[0]=_u(t,r[0]),r[1]=_u(n,r[1]),r[2]=_u(i,r[2]),r[3]=_u(a,r[3])}function fv(r,e,t,n,i,a){return e=_u(_u(e,r),_u(n,a)),_u(e<<i|e>>>32-i,t)}function ea(r,e,t,n,i,a,o){return fv(e&t|~e&n,r,e,i,a,o)}function ta(r,e,t,n,i,a,o){return fv(e&n|t&~n,r,e,i,a,o)}function ra(r,e,t,n,i,a,o){return fv(e^t^n,r,e,i,a,o)}function na(r,e,t,n,i,a,o){return fv(t^(e|~n),r,e,i,a,o)}function tN(r){var e,t=r.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=r.length;e+=64)ym(n,bq(r.substring(e-64,e)));r=r.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r.length;e++)i[e>>2]|=r.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(ym(n,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,ym(n,i),n}function bq(r){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=r.charCodeAt(e)+(r.charCodeAt(e+1)<<8)+(r.charCodeAt(e+2)<<16)+(r.charCodeAt(e+3)<<24);return t}sh=Cr.atob.bind(Cr),A2=Cr.btoa.bind(Cr);var Fx="0123456789abcdef".split("");function wq(r){for(var e="",t=0;t<4;t++)e+=Fx[r>>8*t+4&15]+Fx[r>>8*t&15];return e}function _q(r){return String.fromCharCode((255&r)>>0,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function T2(r){return tN(r).map(_q).join("")}var xq=function(r){for(var e=0;e<r.length;e++)r[e]=wq(r[e]);return r.join("")}(tN("hello"))!="5d41402abc4b2a76b9719d911017c592";function _u(r,e){if(xq){var t=(65535&r)+(65535&e);return(r>>16)+(e>>16)+(t>>16)<<16|65535&t}return r+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function k2(r,e){var t,n,i,a;if(r!==t){for(var o=(i=r,a=1+(256/r.length>>0),new Array(a+1).join(i)),s=[],u=0;u<256;u++)s[u]=u;var l=0;for(u=0;u<256;u++){var f=s[u];l=(l+f+o.charCodeAt(u))%256,s[u]=s[l],s[l]=f}t=r,n=s}else s=n;var c=e.length,d=0,h=0,p="";for(u=0;u<c;u++)h=(h+(f=s[d=(d+1)%256]))%256,s[d]=s[h],s[h]=f,o=s[(s[d]+s[h])%256],p+=String.fromCharCode(e.charCodeAt(u)^o);return p}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Bx={print:4,modify:8,copy:16,"annot-forms":32};function wf(r,e,t,n){this.v=1,this.r=2;var i=192;r.forEach(function(s){if(Bx.perm!==void 0)throw new Error("Invalid permission: "+s);i+=Bx[s]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(e+this.padding).substr(0,32),o=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,o),this.P=-(1+(255^i)),this.encryptionKey=T2(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=k2(this.encryptionKey,this.padding)}function _f(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var e="",t=r.length,n=0;n<t;n++){var i=r.charCodeAt(n);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=r[n]}return e}function zx(r){if(_n(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,i){if(i=i||!1,typeof t!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var a=Math.random().toString(35);return e[t][a]=[n,!!i],a},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var a in e[t]){var o=e[t][a];try{o[0].apply(r,n)}catch(s){Cr.console&&On.error("jsPDF PubSub Error",s.message,s)}o[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function El(r){if(!(this instanceof El))return new El(r);var e="opacity,stroke-opacity".split(",");for(var t in r)r.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=r[t]);this.id="",this.objectNumber=-1}function rN(r,e){this.gState=r,this.matrix=e,this.id="",this.objectNumber=-1}function gu(r,e,t,n,i){if(!(this instanceof gu))return new gu(r,e,t,n,i);this.type=r==="axial"?2:3,this.coords=e,this.colors=t,rN.call(this,n,i)}function cl(r,e,t,n,i){if(!(this instanceof cl))return new cl(r,e,t,n,i);this.boundingBox=r,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,rN.call(this,n,i)}function xr(r){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],a=arguments[3],o=[],s=1,u=16,l="S",f=null;_n(r=r||{})==="object"&&(t=r.orientation,n=r.unit||n,i=r.format||i,a=r.compress||r.compressPdf||a,(f=r.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),s=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(e=r.precision),r.floatPrecision!==void 0&&(u=r.floatPrecision),l=r.defaultPathOperation||"S"),o=r.filters||(a===!0?["FlateEncode"]:o),n=n||"mm",t=(""+(t||"P")).toLowerCase();var c=r.putOnlyUsedFonts||!1,d={},h={internal:{},__private__:{}};h.__private__.PubSub=zx;var p="1.3",g=h.__private__.getPdfVersion=function(){return p};h.__private__.setPdfVersion=function(Y){p=Y};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return b};var v=h.__private__.getPageFormat=function(Y){return b[Y]};i=i||"a4";var y={COMPAT:"compat",ADVANCED:"advanced"},m=y.COMPAT;function w(){this.saveGraphicsState(),Z(new pt(Re,0,0,-Re,0,Er()*Re).toString()+" cm"),this.setFontSize(this.getFontSize()/Re),l="n",m=y.ADVANCED}function S(){this.restoreGraphicsState(),l="S",m=y.COMPAT}var A=h.__private__.combineFontStyleAndFontWeight=function(Y,ye){if(Y=="bold"&&ye=="normal"||Y=="bold"&&ye==400||Y=="normal"&&ye=="italic"||Y=="bold"&&ye=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ye&&(Y=ye==400||ye==="normal"?Y==="italic"?"italic":"normal":ye!=700&&ye!=="bold"||Y!=="normal"?(ye==700?"bold":ye)+""+Y:"bold"),Y};h.advancedAPI=function(Y){var ye=m===y.COMPAT;return ye&&w.call(this),typeof Y!="function"||(Y(this),ye&&S.call(this)),this},h.compatAPI=function(Y){var ye=m===y.ADVANCED;return ye&&S.call(this),typeof Y!="function"||(Y(this),ye&&w.call(this)),this},h.isAdvancedAPI=function(){return m===y.ADVANCED};var _,E=function(Y){if(m!==y.ADVANCED)throw new Error(Y+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},k=h.roundToPrecision=h.__private__.roundToPrecision=function(Y,ye){var Me=e||ye;if(isNaN(Y)||isNaN(Me))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return Y.toFixed(Me).replace(/0+$/,"")};_=h.hpf=h.__private__.hpf=typeof u=="number"?function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.hpf");return k(Y,u)}:u==="smart"?function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.hpf");return k(Y,Y>-1&&Y<1?16:5)}:function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.hpf");return k(Y,16)};var M=h.f2=h.__private__.f2=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.f2");return k(Y,2)},T=h.__private__.f3=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.f3");return k(Y,3)},C=h.scale=h.__private__.scale=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.scale");return m===y.COMPAT?Y*Re:m===y.ADVANCED?Y:void 0},R=function(Y){return m===y.COMPAT?Er()-Y:m===y.ADVANCED?Y:void 0},x=function(Y){return C(R(Y))};h.__private__.setPrecision=h.setPrecision=function(Y){typeof parseInt(Y,10)=="number"&&(e=parseInt(Y,10))};var B,D="00000000000000000000000000000000",O=h.__private__.getFileId=function(){return D},G=h.__private__.setFileId=function(Y){return D=Y!==void 0&&/^[a-fA-F0-9]{32}$/.test(Y)?Y.toUpperCase():D.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(Ti=new wf(f.userPermissions,f.userPassword,f.ownerPassword,D)),D};h.setFileId=function(Y){return G(Y),this},h.getFileId=function(){return O()};var V=h.__private__.convertDateToPDFDate=function(Y){var ye=Y.getTimezoneOffset(),Me=ye<0?"+":"-",De=Math.floor(Math.abs(ye/60)),Ke=Math.abs(ye%60),Je=[Me,F(De),"'",F(Ke),"'"].join("");return["D:",Y.getFullYear(),F(Y.getMonth()+1),F(Y.getDate()),F(Y.getHours()),F(Y.getMinutes()),F(Y.getSeconds()),Je].join("")},I=h.__private__.convertPDFDateToDate=function(Y){var ye=parseInt(Y.substr(2,4),10),Me=parseInt(Y.substr(6,2),10)-1,De=parseInt(Y.substr(8,2),10),Ke=parseInt(Y.substr(10,2),10),Je=parseInt(Y.substr(12,2),10),gt=parseInt(Y.substr(14,2),10);return new Date(ye,Me,De,Ke,Je,gt,0)},z=h.__private__.setCreationDate=function(Y){var ye;if(Y===void 0&&(Y=new Date),Y instanceof Date)ye=V(Y);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(Y))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ye=Y}return B=ye},P=h.__private__.getCreationDate=function(Y){var ye=B;return Y==="jsDate"&&(ye=I(B)),ye};h.setCreationDate=function(Y){return z(Y),this},h.getCreationDate=function(Y){return P(Y)};var q,F=h.__private__.padd2=function(Y){return("0"+parseInt(Y)).slice(-2)},U=h.__private__.padd2Hex=function(Y){return("00"+(Y=Y.toString())).substr(Y.length)},W=0,X=[],te=[],ne=0,he=[],ve=[],Ce=!1,Le=te,K=function(){W=0,ne=0,te=[],X=[],he=[],zt=nt(),rr=nt()};h.__private__.setCustomOutputDestination=function(Y){Ce=!0,Le=Y};var le=function(Y){Ce||(Le=Y)};h.__private__.resetCustomOutputDestination=function(){Ce=!1,Le=te};var Z=h.__private__.out=function(Y){return Y=Y.toString(),ne+=Y.length+1,Le.push(Y),Le},ie=h.__private__.write=function(Y){return Z(arguments.length===1?Y.toString():Array.prototype.join.call(arguments," "))},re=h.__private__.getArrayBuffer=function(Y){for(var ye=Y.length,Me=new ArrayBuffer(ye),De=new Uint8Array(Me);ye--;)De[ye]=Y.charCodeAt(ye);return Me},J=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return J};var fe=r.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(Y){return fe=m===y.ADVANCED?Y/Re:Y,this};var we,ge=h.__private__.getFontSize=h.getFontSize=function(){return m===y.COMPAT?fe:fe*Re},me=r.R2L||!1;h.__private__.setR2L=h.setR2L=function(Y){return me=Y,this},h.__private__.getR2L=h.getR2L=function(){return me};var ue,ce=h.__private__.setZoomMode=function(Y){var ye=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(Y))we=Y;else if(isNaN(Y)){if(ye.indexOf(Y)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+Y+'" is not recognized.');we=Y}else we=parseInt(Y,10)};h.__private__.getZoomMode=function(){return we};var oe,Ae=h.__private__.setPageMode=function(Y){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(Y)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+Y+'" is not recognized.');ue=Y};h.__private__.getPageMode=function(){return ue};var Te=h.__private__.setLayoutMode=function(Y){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(Y)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+Y+'" is not recognized.');oe=Y};h.__private__.getLayoutMode=function(){return oe},h.__private__.setDisplayMode=h.setDisplayMode=function(Y,ye,Me){return ce(Y),Te(ye),Ae(Me),this};var Ge={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(Y){if(Object.keys(Ge).indexOf(Y)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ge[Y]},h.__private__.getDocumentProperties=function(){return Ge},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(Y){for(var ye in Ge)Ge.hasOwnProperty(ye)&&Y[ye]&&(Ge[ye]=Y[ye]);return this},h.__private__.setDocumentProperty=function(Y,ye){if(Object.keys(Ge).indexOf(Y)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ge[Y]=ye};var Fe,Re,ze,Ie,Ve,We={},Ze={},at=[],ft={},wt={},dt={},vt={},Et=null,Mt=0,mt=[],Dt=new zx(h),Lt=r.hotfixes||[],Tt={},nr={},$t=[],pt=function Y(ye,Me,De,Ke,Je,gt){if(!(this instanceof Y))return new Y(ye,Me,De,Ke,Je,gt);isNaN(ye)&&(ye=1),isNaN(Me)&&(Me=0),isNaN(De)&&(De=0),isNaN(Ke)&&(Ke=1),isNaN(Je)&&(Je=0),isNaN(gt)&&(gt=0),this._matrix=[ye,Me,De,Ke,Je,gt]};Object.defineProperty(pt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(Y){this._matrix[0]=Y}}),Object.defineProperty(pt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(Y){this._matrix[1]=Y}}),Object.defineProperty(pt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(Y){this._matrix[2]=Y}}),Object.defineProperty(pt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(Y){this._matrix[3]=Y}}),Object.defineProperty(pt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(Y){this._matrix[4]=Y}}),Object.defineProperty(pt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(Y){this._matrix[5]=Y}}),Object.defineProperty(pt.prototype,"a",{get:function(){return this._matrix[0]},set:function(Y){this._matrix[0]=Y}}),Object.defineProperty(pt.prototype,"b",{get:function(){return this._matrix[1]},set:function(Y){this._matrix[1]=Y}}),Object.defineProperty(pt.prototype,"c",{get:function(){return this._matrix[2]},set:function(Y){this._matrix[2]=Y}}),Object.defineProperty(pt.prototype,"d",{get:function(){return this._matrix[3]},set:function(Y){this._matrix[3]=Y}}),Object.defineProperty(pt.prototype,"e",{get:function(){return this._matrix[4]},set:function(Y){this._matrix[4]=Y}}),Object.defineProperty(pt.prototype,"f",{get:function(){return this._matrix[5]},set:function(Y){this._matrix[5]=Y}}),Object.defineProperty(pt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(pt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(pt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(pt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),pt.prototype.join=function(Y){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(_).join(Y)},pt.prototype.multiply=function(Y){var ye=Y.sx*this.sx+Y.shy*this.shx,Me=Y.sx*this.shy+Y.shy*this.sy,De=Y.shx*this.sx+Y.sy*this.shx,Ke=Y.shx*this.shy+Y.sy*this.sy,Je=Y.tx*this.sx+Y.ty*this.shx+this.tx,gt=Y.tx*this.shy+Y.ty*this.sy+this.ty;return new pt(ye,Me,De,Ke,Je,gt)},pt.prototype.decompose=function(){var Y=this.sx,ye=this.shy,Me=this.shx,De=this.sy,Ke=this.tx,Je=this.ty,gt=Math.sqrt(Y*Y+ye*ye),jt=(Y/=gt)*Me+(ye/=gt)*De;Me-=Y*jt,De-=ye*jt;var cr=Math.sqrt(Me*Me+De*De);return jt/=cr,Y*(De/=cr)<ye*(Me/=cr)&&(Y=-Y,ye=-ye,jt=-jt,gt=-gt),{scale:new pt(gt,0,0,cr,0,0),translate:new pt(1,0,0,1,Ke,Je),rotate:new pt(Y,ye,-ye,Y,0,0),skew:new pt(1,0,jt,1,0,0)}},pt.prototype.toString=function(Y){return this.join(" ")},pt.prototype.inversed=function(){var Y=this.sx,ye=this.shy,Me=this.shx,De=this.sy,Ke=this.tx,Je=this.ty,gt=1/(Y*De-ye*Me),jt=De*gt,cr=-ye*gt,yr=-Me*gt,kr=Y*gt;return new pt(jt,cr,yr,kr,-jt*Ke-yr*Je,-cr*Ke-kr*Je)},pt.prototype.applyToPoint=function(Y){var ye=Y.x*this.sx+Y.y*this.shx+this.tx,Me=Y.x*this.shy+Y.y*this.sy+this.ty;return new Oe(ye,Me)},pt.prototype.applyToRectangle=function(Y){var ye=this.applyToPoint(Y),Me=this.applyToPoint(new Oe(Y.x+Y.w,Y.y+Y.h));return new He(ye.x,ye.y,Me.x-ye.x,Me.y-ye.y)},pt.prototype.clone=function(){var Y=this.sx,ye=this.shy,Me=this.shx,De=this.sy,Ke=this.tx,Je=this.ty;return new pt(Y,ye,Me,De,Ke,Je)},h.Matrix=pt;var hr=h.matrixMult=function(Y,ye){return ye.multiply(Y)},Rt=new pt(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=Rt;var Bt=function(Y,ye){if(!wt[Y]){var Me=(ye instanceof gu?"Sh":"P")+(Object.keys(ft).length+1).toString(10);ye.id=Me,wt[Y]=Me,ft[Me]=ye,Dt.publish("addPattern",ye)}};h.ShadingPattern=gu,h.TilingPattern=cl,h.addShadingPattern=function(Y,ye){return E("addShadingPattern()"),Bt(Y,ye),this},h.beginTilingPattern=function(Y){E("beginTilingPattern()"),ht(Y.boundingBox[0],Y.boundingBox[1],Y.boundingBox[2]-Y.boundingBox[0],Y.boundingBox[3]-Y.boundingBox[1],Y.matrix)},h.endTilingPattern=function(Y,ye){E("endTilingPattern()"),ye.stream=ve[q].join(`
`),Bt(Y,ye),Dt.publish("endTilingPattern",ye),$t.pop().restore()};var ur=h.__private__.newObject=function(){var Y=nt();return Xe(Y,!0),Y},nt=h.__private__.newObjectDeferred=function(){return W++,X[W]=function(){return ne},W},Xe=function(Y,ye){return ye=typeof ye=="boolean"&&ye,X[Y]=ne,ye&&Z(Y+" 0 obj"),Y},ct=h.__private__.newAdditionalObject=function(){var Y={objId:nt(),content:""};return he.push(Y),Y},zt=nt(),rr=nt(),Zt=h.__private__.decodeColorString=function(Y){var ye=Y.split(" ");if(ye.length!==2||ye[1]!=="g"&&ye[1]!=="G")ye.length===5&&(ye[4]==="k"||ye[4]==="K")&&(ye=[(1-ye[0])*(1-ye[3]),(1-ye[1])*(1-ye[3]),(1-ye[2])*(1-ye[3]),"r"]);else{var Me=parseFloat(ye[0]);ye=[Me,Me,Me,"r"]}for(var De="#",Ke=0;Ke<3;Ke++)De+=("0"+Math.floor(255*parseFloat(ye[Ke])).toString(16)).slice(-2);return De},br=h.__private__.encodeColorString=function(Y){var ye;typeof Y=="string"&&(Y={ch1:Y});var Me=Y.ch1,De=Y.ch2,Ke=Y.ch3,Je=Y.ch4,gt=Y.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Me=="string"&&Me.charAt(0)!=="#"){var jt=new eN(Me);if(jt.ok)Me=jt.toHex();else if(!/^\d*\.?\d*$/.test(Me))throw new Error('Invalid color "'+Me+'" passed to jsPDF.encodeColorString.')}if(typeof Me=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Me)&&(Me="#"+Me[1]+Me[1]+Me[2]+Me[2]+Me[3]+Me[3]),typeof Me=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Me)){var cr=parseInt(Me.substr(1),16);Me=cr>>16&255,De=cr>>8&255,Ke=255&cr}if(De===void 0||Je===void 0&&Me===De&&De===Ke)if(typeof Me=="string")ye=Me+" "+gt[0];else switch(Y.precision){case 2:ye=M(Me/255)+" "+gt[0];break;case 3:default:ye=T(Me/255)+" "+gt[0]}else if(Je===void 0||_n(Je)==="object"){if(Je&&!isNaN(Je.a)&&Je.a===0)return ye=["1.","1.","1.",gt[1]].join(" ");if(typeof Me=="string")ye=[Me,De,Ke,gt[1]].join(" ");else switch(Y.precision){case 2:ye=[M(Me/255),M(De/255),M(Ke/255),gt[1]].join(" ");break;default:case 3:ye=[T(Me/255),T(De/255),T(Ke/255),gt[1]].join(" ")}}else if(typeof Me=="string")ye=[Me,De,Ke,Je,gt[2]].join(" ");else switch(Y.precision){case 2:ye=[M(Me),M(De),M(Ke),M(Je),gt[2]].join(" ");break;case 3:default:ye=[T(Me),T(De),T(Ke),T(Je),gt[2]].join(" ")}return ye},Gr=h.__private__.getFilters=function(){return o},Rr=h.__private__.putStream=function(Y){var ye=(Y=Y||{}).data||"",Me=Y.filters||Gr(),De=Y.alreadyAppliedFilters||[],Ke=Y.addLength1||!1,Je=ye.length,gt=Y.objectId,jt=function(wi){return wi};if(f!==null&&gt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(jt=Ti.encryptor(gt,0));var cr={};Me===!0&&(Me=["FlateEncode"]);var yr=Y.additionalKeyValues||[],kr=(cr=xr.API.processDataByFilters!==void 0?xr.API.processDataByFilters(ye,Me):{data:ye,reverseChain:[]}).reverseChain+(Array.isArray(De)?De.join(" "):De.toString());if(cr.data.length!==0&&(yr.push({key:"Length",value:cr.data.length}),Ke===!0&&yr.push({key:"Length1",value:Je})),kr.length!=0)if(kr.split("/").length-1==1)yr.push({key:"Filter",value:kr});else{yr.push({key:"Filter",value:"["+kr+"]"});for(var Mr=0;Mr<yr.length;Mr+=1)if(yr[Mr].key==="DecodeParms"){for(var sn=[],hn=0;hn<cr.reverseChain.split("/").length-1;hn+=1)sn.push("null");sn.push(yr[Mr].value),yr[Mr].value="["+sn.join(" ")+"]"}}Z("<<");for(var rn=0;rn<yr.length;rn++)Z("/"+yr[rn].key+" "+yr[rn].value);Z(">>"),cr.data.length!==0&&(Z("stream"),Z(jt(cr.data)),Z("endstream"))},Fr=h.__private__.putPage=function(Y){var ye=Y.number,Me=Y.data,De=Y.objId,Ke=Y.contentsObjId;Xe(De,!0),Z("<</Type /Page"),Z("/Parent "+Y.rootDictionaryObjId+" 0 R"),Z("/Resources "+Y.resourceDictionaryObjId+" 0 R"),Z("/MediaBox ["+parseFloat(_(Y.mediaBox.bottomLeftX))+" "+parseFloat(_(Y.mediaBox.bottomLeftY))+" "+_(Y.mediaBox.topRightX)+" "+_(Y.mediaBox.topRightY)+"]"),Y.cropBox!==null&&Z("/CropBox ["+_(Y.cropBox.bottomLeftX)+" "+_(Y.cropBox.bottomLeftY)+" "+_(Y.cropBox.topRightX)+" "+_(Y.cropBox.topRightY)+"]"),Y.bleedBox!==null&&Z("/BleedBox ["+_(Y.bleedBox.bottomLeftX)+" "+_(Y.bleedBox.bottomLeftY)+" "+_(Y.bleedBox.topRightX)+" "+_(Y.bleedBox.topRightY)+"]"),Y.trimBox!==null&&Z("/TrimBox ["+_(Y.trimBox.bottomLeftX)+" "+_(Y.trimBox.bottomLeftY)+" "+_(Y.trimBox.topRightX)+" "+_(Y.trimBox.topRightY)+"]"),Y.artBox!==null&&Z("/ArtBox ["+_(Y.artBox.bottomLeftX)+" "+_(Y.artBox.bottomLeftY)+" "+_(Y.artBox.topRightX)+" "+_(Y.artBox.topRightY)+"]"),typeof Y.userUnit=="number"&&Y.userUnit!==1&&Z("/UserUnit "+Y.userUnit),Dt.publish("putPage",{objId:De,pageContext:mt[ye],pageNumber:ye,page:Me}),Z("/Contents "+Ke+" 0 R"),Z(">>"),Z("endobj");var Je=Me.join(`
`);return m===y.ADVANCED&&(Je+=`
Q`),Xe(Ke,!0),Rr({data:Je,filters:Gr(),objectId:Ke}),Z("endobj"),De},gr=h.__private__.putPages=function(){var Y,ye,Me=[];for(Y=1;Y<=Mt;Y++)mt[Y].objId=nt(),mt[Y].contentsObjId=nt();for(Y=1;Y<=Mt;Y++)Me.push(Fr({number:Y,data:ve[Y],objId:mt[Y].objId,contentsObjId:mt[Y].contentsObjId,mediaBox:mt[Y].mediaBox,cropBox:mt[Y].cropBox,bleedBox:mt[Y].bleedBox,trimBox:mt[Y].trimBox,artBox:mt[Y].artBox,userUnit:mt[Y].userUnit,rootDictionaryObjId:zt,resourceDictionaryObjId:rr}));Xe(zt,!0),Z("<</Type /Pages");var De="/Kids [";for(ye=0;ye<Mt;ye++)De+=Me[ye]+" 0 R ";Z(De+"]"),Z("/Count "+Mt),Z(">>"),Z("endobj"),Dt.publish("postPutPages")},Zr=function(Y){Dt.publish("putFont",{font:Y,out:Z,newObject:ur,putStream:Rr}),Y.isAlreadyPutted!==!0&&(Y.objectNumber=ur(),Z("<<"),Z("/Type /Font"),Z("/BaseFont /"+_f(Y.postScriptName)),Z("/Subtype /Type1"),typeof Y.encoding=="string"&&Z("/Encoding /"+Y.encoding),Z("/FirstChar 32"),Z("/LastChar 255"),Z(">>"),Z("endobj"))},gn=function(){for(var Y in We)We.hasOwnProperty(Y)&&(c===!1||c===!0&&d.hasOwnProperty(Y))&&Zr(We[Y])},Hn=function(Y){Y.objectNumber=ur();var ye=[];ye.push({key:"Type",value:"/XObject"}),ye.push({key:"Subtype",value:"/Form"}),ye.push({key:"BBox",value:"["+[_(Y.x),_(Y.y),_(Y.x+Y.width),_(Y.y+Y.height)].join(" ")+"]"}),ye.push({key:"Matrix",value:"["+Y.matrix.toString()+"]"});var Me=Y.pages[1].join(`
`);Rr({data:Me,additionalKeyValues:ye,objectId:Y.objectNumber}),Z("endobj")},jn=function(){for(var Y in Tt)Tt.hasOwnProperty(Y)&&Hn(Tt[Y])},di=function(Y,ye){var Me,De=[],Ke=1/(ye-1);for(Me=0;Me<1;Me+=Ke)De.push(Me);if(De.push(1),Y[0].offset!=0){var Je={offset:0,color:Y[0].color};Y.unshift(Je)}if(Y[Y.length-1].offset!=1){var gt={offset:1,color:Y[Y.length-1].color};Y.push(gt)}for(var jt="",cr=0,yr=0;yr<De.length;yr++){for(Me=De[yr];Me>Y[cr+1].offset;)cr++;var kr=Y[cr].offset,Mr=(Me-kr)/(Y[cr+1].offset-kr),sn=Y[cr].color,hn=Y[cr+1].color;jt+=U(Math.round((1-Mr)*sn[0]+Mr*hn[0]).toString(16))+U(Math.round((1-Mr)*sn[1]+Mr*hn[1]).toString(16))+U(Math.round((1-Mr)*sn[2]+Mr*hn[2]).toString(16))}return jt.trim()},mn=function(Y,ye){ye||(ye=21);var Me=ur(),De=di(Y.colors,ye),Ke=[];Ke.push({key:"FunctionType",value:"0"}),Ke.push({key:"Domain",value:"[0.0 1.0]"}),Ke.push({key:"Size",value:"["+ye+"]"}),Ke.push({key:"BitsPerSample",value:"8"}),Ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Rr({data:De,additionalKeyValues:Ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Me}),Z("endobj"),Y.objectNumber=ur(),Z("<< /ShadingType "+Y.type),Z("/ColorSpace /DeviceRGB");var Je="/Coords ["+_(parseFloat(Y.coords[0]))+" "+_(parseFloat(Y.coords[1]))+" ";Y.type===2?Je+=_(parseFloat(Y.coords[2]))+" "+_(parseFloat(Y.coords[3])):Je+=_(parseFloat(Y.coords[2]))+" "+_(parseFloat(Y.coords[3]))+" "+_(parseFloat(Y.coords[4]))+" "+_(parseFloat(Y.coords[5])),Z(Je+="]"),Y.matrix&&Z("/Matrix ["+Y.matrix.toString()+"]"),Z("/Function "+Me+" 0 R"),Z("/Extend [true true]"),Z(">>"),Z("endobj")},Gi=function(Y,ye){var Me=nt(),De=ur();ye.push({resourcesOid:Me,objectOid:De}),Y.objectNumber=De;var Ke=[];Ke.push({key:"Type",value:"/Pattern"}),Ke.push({key:"PatternType",value:"1"}),Ke.push({key:"PaintType",value:"1"}),Ke.push({key:"TilingType",value:"1"}),Ke.push({key:"BBox",value:"["+Y.boundingBox.map(_).join(" ")+"]"}),Ke.push({key:"XStep",value:_(Y.xStep)}),Ke.push({key:"YStep",value:_(Y.yStep)}),Ke.push({key:"Resources",value:Me+" 0 R"}),Y.matrix&&Ke.push({key:"Matrix",value:"["+Y.matrix.toString()+"]"}),Rr({data:Y.stream,additionalKeyValues:Ke,objectId:Y.objectNumber}),Z("endobj")},bi=function(Y){var ye;for(ye in ft)ft.hasOwnProperty(ye)&&(ft[ye]instanceof gu?mn(ft[ye]):ft[ye]instanceof cl&&Gi(ft[ye],Y))},Fn=function(Y){for(var ye in Y.objectNumber=ur(),Z("<<"),Y)switch(ye){case"opacity":Z("/ca "+M(Y[ye]));break;case"stroke-opacity":Z("/CA "+M(Y[ye]))}Z(">>"),Z("endobj")},yn=function(){var Y;for(Y in dt)dt.hasOwnProperty(Y)&&Fn(dt[Y])},xn=function(){for(var Y in Z("/XObject <<"),Tt)Tt.hasOwnProperty(Y)&&Tt[Y].objectNumber>=0&&Z("/"+Y+" "+Tt[Y].objectNumber+" 0 R");Dt.publish("putXobjectDict"),Z(">>")},$i=function(){Ti.oid=ur(),Z("<<"),Z("/Filter /Standard"),Z("/V "+Ti.v),Z("/R "+Ti.r),Z("/U <"+Ti.toHexString(Ti.U)+">"),Z("/O <"+Ti.toHexString(Ti.O)+">"),Z("/P "+Ti.P),Z(">>"),Z("endobj")},cn=function(){for(var Y in Z("/Font <<"),We)We.hasOwnProperty(Y)&&(c===!1||c===!0&&d.hasOwnProperty(Y))&&Z("/"+Y+" "+We[Y].objectNumber+" 0 R");Z(">>")},vr=function(){if(Object.keys(ft).length>0){for(var Y in Z("/Shading <<"),ft)ft.hasOwnProperty(Y)&&ft[Y]instanceof gu&&ft[Y].objectNumber>=0&&Z("/"+Y+" "+ft[Y].objectNumber+" 0 R");Dt.publish("putShadingPatternDict"),Z(">>")}},Pr=function(Y){if(Object.keys(ft).length>0){for(var ye in Z("/Pattern <<"),ft)ft.hasOwnProperty(ye)&&ft[ye]instanceof h.TilingPattern&&ft[ye].objectNumber>=0&&ft[ye].objectNumber<Y&&Z("/"+ye+" "+ft[ye].objectNumber+" 0 R");Dt.publish("putTilingPatternDict"),Z(">>")}},Nn=function(){if(Object.keys(dt).length>0){var Y;for(Y in Z("/ExtGState <<"),dt)dt.hasOwnProperty(Y)&&dt[Y].objectNumber>=0&&Z("/"+Y+" "+dt[Y].objectNumber+" 0 R");Dt.publish("putGStateDict"),Z(">>")}},zr=function(Y){Xe(Y.resourcesOid,!0),Z("<<"),Z("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),cn(),vr(),Pr(Y.objectOid),Nn(),xn(),Z(">>"),Z("endobj")},Zn=function(){var Y=[];gn(),yn(),jn(),bi(Y),Dt.publish("putResources"),Y.forEach(zr),zr({resourcesOid:rr,objectOid:Number.MAX_SAFE_INTEGER}),Dt.publish("postPutResources")},la=function(){Dt.publish("putAdditionalObjects");for(var Y=0;Y<he.length;Y++){var ye=he[Y];Xe(ye.objId,!0),Z(ye.content),Z("endobj")}Dt.publish("postPutAdditionalObjects")},uo=function(Y){Ze[Y.fontName]=Ze[Y.fontName]||{},Ze[Y.fontName][Y.fontStyle]=Y.id},Oo=function(Y,ye,Me,De,Ke){var Je={id:"F"+(Object.keys(We).length+1).toString(10),postScriptName:Y,fontName:ye,fontStyle:Me,encoding:De,isStandardFont:Ke||!1,metadata:{}};return Dt.publish("addFont",{font:Je,instance:this}),We[Je.id]=Je,uo(Je),Je.id},dc=function(Y){for(var ye=0,Me=J.length;ye<Me;ye++){var De=Oo.call(this,Y[ye][0],Y[ye][1],Y[ye][2],J[ye][3],!0);c===!1&&(d[De]=!0);var Ke=Y[ye][0].split("-");uo({id:De,fontName:Ke[0],fontStyle:Ke[1]||""})}Dt.publish("addFonts",{fonts:We,dictionary:Ze})},fa=function(Y){return Y.foo=function(){try{return Y.apply(this,arguments)}catch(De){var ye=De.stack||"";~ye.indexOf(" at ")&&(ye=ye.split(" at ")[1]);var Me="Error in function "+ye.split(`
`)[0].split("<")[0]+": "+De.message;if(!Cr.console)throw new Error(Me);Cr.console.error(Me,De),Cr.alert&&alert(Me)}},Y.foo.bar=Y,Y.foo},ds=function(Y,ye){var Me,De,Ke,Je,gt,jt,cr,yr,kr;if(Ke=(ye=ye||{}).sourceEncoding||"Unicode",gt=ye.outputEncoding,(ye.autoencode||gt)&&We[Fe].metadata&&We[Fe].metadata[Ke]&&We[Fe].metadata[Ke].encoding&&(Je=We[Fe].metadata[Ke].encoding,!gt&&We[Fe].encoding&&(gt=We[Fe].encoding),!gt&&Je.codePages&&(gt=Je.codePages[0]),typeof gt=="string"&&(gt=Je[gt]),gt)){for(cr=!1,jt=[],Me=0,De=Y.length;Me<De;Me++)(yr=gt[Y.charCodeAt(Me)])?jt.push(String.fromCharCode(yr)):jt.push(Y[Me]),jt[Me].charCodeAt(0)>>8&&(cr=!0);Y=jt.join("")}for(Me=Y.length;cr===void 0&&Me!==0;)Y.charCodeAt(Me-1)>>8&&(cr=!0),Me--;if(!cr)return Y;for(jt=ye.noBOM?[]:[254,255],Me=0,De=Y.length;Me<De;Me++){if((kr=(yr=Y.charCodeAt(Me))>>8)>>8)throw new Error("Character at position "+Me+" of string '"+Y+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");jt.push(kr),jt.push(yr-(kr<<8))}return String.fromCharCode.apply(void 0,jt)},Ai=h.__private__.pdfEscape=h.pdfEscape=function(Y,ye){return ds(Y,ye).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Vs=h.__private__.beginPage=function(Y){ve[++Mt]=[],mt[Mt]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(Y[0]),topRightY:Number(Y[1])}},Qi(Mt),le(ve[q])},Gl=function(Y,ye){var Me,De,Ke;switch(t=ye||t,typeof Y=="string"&&(Me=v(Y.toLowerCase()),Array.isArray(Me)&&(De=Me[0],Ke=Me[1])),Array.isArray(Y)&&(De=Y[0]*Re,Ke=Y[1]*Re),isNaN(De)&&(De=i[0],Ke=i[1]),(De>14400||Ke>14400)&&(On.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),De=Math.min(14400,De),Ke=Math.min(14400,Ke)),i=[De,Ke],t.substr(0,1)){case"l":Ke>De&&(i=[Ke,De]);break;case"p":De>Ke&&(i=[Ke,De])}Vs(i),Wl(Ks),Z(Fa),pe!==0&&Z(pe+" J"),xe!==0&&Z(xe+" j"),Dt.publish("addPage",{pageNumber:Mt})},pc=function(Y){Y>0&&Y<=Mt&&(ve.splice(Y,1),mt.splice(Y,1),Mt--,q>Mt&&(q=Mt),this.setPage(q))},Qi=function(Y){Y>0&&Y<=Mt&&(q=Y)},$l=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return ve.length-1},Do=function(Y,ye,Me){var De,Ke=void 0;return Me=Me||{},Y=Y!==void 0?Y:We[Fe].fontName,ye=ye!==void 0?ye:We[Fe].fontStyle,De=Y.toLowerCase(),Ze[De]!==void 0&&Ze[De][ye]!==void 0?Ke=Ze[De][ye]:Ze[Y]!==void 0&&Ze[Y][ye]!==void 0?Ke=Ze[Y][ye]:Me.disableWarning===!1&&On.warn("Unable to look up font label for font '"+Y+"', '"+ye+"'. Refer to getFontList() for available fonts."),Ke||Me.noFallback||(Ke=Ze.times[ye])==null&&(Ke=Ze.times.normal),Ke},vc=h.__private__.putInfo=function(){var Y=ur(),ye=function(De){return De};for(var Me in f!==null&&(ye=Ti.encryptor(Y,0)),Z("<<"),Z("/Producer ("+Ai(ye("jsPDF "+xr.version))+")"),Ge)Ge.hasOwnProperty(Me)&&Ge[Me]&&Z("/"+Me.substr(0,1).toUpperCase()+Me.substr(1)+" ("+Ai(ye(Ge[Me]))+")");Z("/CreationDate ("+Ai(ye(B))+")"),Z(">>"),Z("endobj")},Wu=h.__private__.putCatalog=function(Y){var ye=(Y=Y||{}).rootDictionaryObjId||zt;switch(ur(),Z("<<"),Z("/Type /Catalog"),Z("/Pages "+ye+" 0 R"),we||(we="fullwidth"),we){case"fullwidth":Z("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Z("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Z("/OpenAction [3 0 R /Fit]");break;case"original":Z("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Me=""+we;Me.substr(Me.length-1)==="%"&&(we=parseInt(we)/100),typeof we=="number"&&Z("/OpenAction [3 0 R /XYZ null null "+M(we)+"]")}switch(oe||(oe="continuous"),oe){case"continuous":Z("/PageLayout /OneColumn");break;case"single":Z("/PageLayout /SinglePage");break;case"two":case"twoleft":Z("/PageLayout /TwoColumnLeft");break;case"tworight":Z("/PageLayout /TwoColumnRight")}ue&&Z("/PageMode /"+ue),Dt.publish("putCatalog"),Z(">>"),Z("endobj")},lo=h.__private__.putTrailer=function(){Z("trailer"),Z("<<"),Z("/Size "+(W+1)),Z("/Root "+W+" 0 R"),Z("/Info "+(W-1)+" 0 R"),f!==null&&Z("/Encrypt "+Ti.oid+" 0 R"),Z("/ID [ <"+D+"> <"+D+"> ]"),Z(">>")},fo=h.__private__.putHeader=function(){Z("%PDF-"+p),Z("%ºß¬à")},Yu=h.__private__.putXRef=function(){var Y="0000000000";Z("xref"),Z("0 "+(W+1)),Z("0000000000 65535 f ");for(var ye=1;ye<=W;ye++)typeof X[ye]=="function"?Z((Y+X[ye]()).slice(-10)+" 00000 n "):X[ye]!==void 0?Z((Y+X[ye]).slice(-10)+" 00000 n "):Z("0000000000 00000 n ")},co=h.__private__.buildDocument=function(){K(),le(te),Dt.publish("buildDocument"),fo(),gr(),la(),Zn(),f!==null&&$i(),vc(),Wu();var Y=ne;return Yu(),lo(),Z("startxref"),Z(""+Y),Z("%%EOF"),le(ve[q]),te.join(`
`)},Wa=h.__private__.getBlob=function(Y){return new Blob([re(Y)],{type:"application/pdf"})},ps=h.output=h.__private__.output=fa(function(Y,ye){switch(typeof(ye=ye||{})=="string"?ye={filename:ye}:ye.filename=ye.filename||"generated.pdf",Y){case void 0:return co();case"save":h.save(ye.filename);break;case"arraybuffer":return re(co());case"blob":return Wa(co());case"bloburi":case"bloburl":if(Cr.URL!==void 0&&typeof Cr.URL.createObjectURL=="function")return Cr.URL&&Cr.URL.createObjectURL(Wa(co()))||void 0;On.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Me="",De=co();try{Me=A2(De)}catch{Me=A2(unescape(encodeURIComponent(De)))}return"data:application/pdf;filename="+ye.filename+";base64,"+Me;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Cr)==="[object Window]"){var Ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Je=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ye.pdfObjectUrl&&(Ke=ye.pdfObjectUrl,Je="");var gt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ke+'"'+Je+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ye)+");<\/script></body></html>",jt=Cr.open();return jt!==null&&jt.document.write(gt),jt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Cr)==="[object Window]"){var cr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ye.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ye.filename+'" width="500px" height="400px" /></body></html>',yr=Cr.open();if(yr!==null){yr.document.write(cr);var kr=this;yr.document.documentElement.querySelector("#pdfViewer").onload=function(){yr.document.title=ye.filename,yr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(kr.output("bloburl"))}}return yr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Cr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Mr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ye)+'"></iframe></body></html>',sn=Cr.open();if(sn!==null&&(sn.document.write(Mr),sn.document.title=ye.filename),sn||typeof safari>"u")return sn;break;case"datauri":case"dataurl":return Cr.document.location.href=this.output("datauristring",ye);default:return null}}),Ws=function(Y){return Array.isArray(Lt)===!0&&Lt.indexOf(Y)>-1};switch(n){case"pt":Re=1;break;case"mm":Re=72/25.4;break;case"cm":Re=72/2.54;break;case"in":Re=72;break;case"px":Re=Ws("px_scaling")==1?.75:96/72;break;case"pc":case"em":Re=12;break;case"ex":Re=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Re=n}var Ti=null;z(),G();var Ul=function(Y){return f!==null?Ti.encryptor(Y,0):function(ye){return ye}},Hl=h.__private__.getPageInfo=h.getPageInfo=function(Y){if(isNaN(Y)||Y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:mt[Y].objId,pageNumber:Y,pageContext:mt[Y]}},Ar=h.__private__.getPageInfoByObjId=function(Y){if(isNaN(Y)||Y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ye in mt)if(mt[ye].objId===Y)break;return Hl(ye)},gc=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:mt[q].objId,pageNumber:q,pageContext:mt[q]}};h.addPage=function(){return Gl.apply(this,arguments),this},h.setPage=function(){return Qi.apply(this,arguments),le.call(this,ve[q]),this},h.insertPage=function(Y){return this.addPage(),this.movePage(q,Y),this},h.movePage=function(Y,ye){var Me,De;if(Y>ye){Me=ve[Y],De=mt[Y];for(var Ke=Y;Ke>ye;Ke--)ve[Ke]=ve[Ke-1],mt[Ke]=mt[Ke-1];ve[ye]=Me,mt[ye]=De,this.setPage(ye)}else if(Y<ye){Me=ve[Y],De=mt[Y];for(var Je=Y;Je<ye;Je++)ve[Je]=ve[Je+1],mt[Je]=mt[Je+1];ve[ye]=Me,mt[ye]=De,this.setPage(ye)}return this},h.deletePage=function(){return pc.apply(this,arguments),this},h.__private__.text=h.text=function(Y,ye,Me,De,Ke){var Je,gt,jt,cr,yr,kr,Mr,sn,hn,rn=(De=De||{}).scope||this;if(typeof Y=="number"&&typeof ye=="number"&&(typeof Me=="string"||Array.isArray(Me))){var wi=Me;Me=ye,ye=Y,Y=wi}if(arguments[3]instanceof pt?(E("The transform parameter of text() with a Matrix value"),hn=Ke):(jt=arguments[4],cr=arguments[5],_n(Mr=arguments[3])==="object"&&Mr!==null||(typeof jt=="string"&&(cr=jt,jt=null),typeof Mr=="string"&&(cr=Mr,Mr=null),typeof Mr=="number"&&(jt=Mr,Mr=null),De={flags:Mr,angle:jt,align:cr})),isNaN(ye)||isNaN(Me)||Y==null)throw new Error("Invalid arguments passed to jsPDF.text");if(Y.length===0)return rn;var Sn="",pi=!1,ca=typeof De.lineHeightFactor=="number"?De.lineHeightFactor:Io,vo=rn.internal.scaleFactor;function Kl(Ur){return Ur=Ur.split("	").join(Array(De.TabLen||9).join(" ")),Ai(Ur,Mr)}function en(Ur){for(var Wr,En=Ur.concat(),Qr=[],vs=En.length;vs--;)typeof(Wr=En.shift())=="string"?Qr.push(Wr):Array.isArray(Ur)&&(Wr.length===1||Wr[1]===void 0&&Wr[2]===void 0)?Qr.push(Wr[0]):Qr.push([Wr[0],Wr[1],Wr[2]]);return Qr}function zo(Ur,Wr){var En;if(typeof Ur=="string")En=Wr(Ur)[0];else if(Array.isArray(Ur)){for(var Qr,vs,tu=Ur.concat(),Zl=[],rd=tu.length;rd--;)typeof(Qr=tu.shift())=="string"?Zl.push(Wr(Qr)[0]):Array.isArray(Qr)&&typeof Qr[0]=="string"&&(vs=Wr(Qr[0],Qr[1],Qr[2]),Zl.push([vs[0],vs[1],vs[2]]));En=Zl}return En}var Di=!1,Ka=!0;if(typeof Y=="string")Di=!0;else if(Array.isArray(Y)){var Zu=Y.concat();gt=[];for(var Zs,Ui=Zu.length;Ui--;)(typeof(Zs=Zu.shift())!="string"||Array.isArray(Zs)&&typeof Zs[0]!="string")&&(Ka=!1);Di=Ka}if(Di===!1)throw new Error('Type of text must be string or Array. "'+Y+'" is not recognized.');typeof Y=="string"&&(Y=Y.match(/[\r?\n]/)?Y.split(/\r\n|\r|\n/g):[Y]);var Ea=fe/rn.internal.scaleFactor,qo=Ea*(ca-1);switch(De.baseline){case"bottom":Me-=qo;break;case"top":Me+=Ea-qo;break;case"hanging":Me+=Ea-2*qo;break;case"middle":Me+=Ea/2-qo}if((kr=De.maxWidth||0)>0&&(typeof Y=="string"?Y=rn.splitTextToSize(Y,kr):Object.prototype.toString.call(Y)==="[object Array]"&&(Y=Y.reduce(function(Ur,Wr){return Ur.concat(rn.splitTextToSize(Wr,kr))},[]))),Je={text:Y,x:ye,y:Me,options:De,mutex:{pdfEscape:Ai,activeFontKey:Fe,fonts:We,activeFontSize:fe}},Dt.publish("preProcessText",Je),Y=Je.text,jt=(De=Je.options).angle,!(hn instanceof pt)&&jt&&typeof jt=="number"){jt*=Math.PI/180,De.rotationDirection===0&&(jt=-jt),m===y.ADVANCED&&(jt=-jt);var ha=Math.cos(jt),Qs=Math.sin(jt);hn=new pt(ha,Qs,-Qs,ha,0,0)}else jt&&jt instanceof pt&&(hn=jt);m!==y.ADVANCED||hn||(hn=Rt),(yr=De.charSpace||ae)!==void 0&&(Sn+=_(C(yr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(sn=De.horizontalScale)!==void 0&&(Sn+=_(100*sn)+` Tz
`),De.lang;var ki=-1,Js=De.renderingMode!==void 0?De.renderingMode:De.stroke,Go=rn.internal.getCurrentPageInfo().pageContext;switch(Js){case 0:case!1:case"fill":ki=0;break;case 1:case!0:case"stroke":ki=1;break;case 2:case"fillThenStroke":ki=2;break;case 3:case"invisible":ki=3;break;case 4:case"fillAndAddForClipping":ki=4;break;case 5:case"strokeAndAddPathForClipping":ki=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ki=6;break;case 7:case"addToPathForClipping":ki=7}var eu=Go.usedRenderingMode!==void 0?Go.usedRenderingMode:-1;ki!==-1?Sn+=ki+` Tr
`:eu!==-1&&(Sn+=`0 Tr
`),ki!==-1&&(Go.usedRenderingMode=ki),cr=De.align||"left";var Ba,$o=fe*ca,Qu=rn.internal.pageSize.getWidth(),Ju=We[Fe];yr=De.charSpace||ae,kr=De.maxWidth||0,Mr=Object.assign({autoencode:!0,noBOM:!0},De.flags);var Uo=[];if(Object.prototype.toString.call(Y)==="[object Array]"){var Ji;gt=en(Y),cr!=="left"&&(Ba=gt.map(function(Ur){return rn.getStringUnitWidth(Ur,{font:Ju,charSpace:yr,fontSize:fe,doKerning:!1})*fe/vo}));var Ca,Ne=0;if(cr==="right"){ye-=Ba[0],Y=[],Ui=gt.length;for(var qe=0;qe<Ui;qe++)qe===0?(Ca=Ya(ye),Ji=Xa(Me)):(Ca=C(Ne-Ba[qe]),Ji=-$o),Y.push([gt[qe],Ca,Ji]),Ne=Ba[qe]}else if(cr==="center"){ye-=Ba[0]/2,Y=[],Ui=gt.length;for(var Qe=0;Qe<Ui;Qe++)Qe===0?(Ca=Ya(ye),Ji=Xa(Me)):(Ca=C((Ne-Ba[Qe])/2),Ji=-$o),Y.push([gt[Qe],Ca,Ji]),Ne=Ba[Qe]}else if(cr==="left"){Y=[],Ui=gt.length;for(var it=0;it<Ui;it++)Y.push(gt[it])}else{if(cr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');Y=[],Ui=gt.length,kr=kr!==0?kr:Qu;for(var lt=0;lt<Ui;lt++)Ji=lt===0?Xa(Me):-$o,Ca=lt===0?Ya(ye):0,lt<Ui-1?Uo.push(_(C((kr-Ba[lt])/(gt[lt].split(" ").length-1)))):Uo.push(0),Y.push([gt[lt],Ca,Ji])}}var It=typeof De.R2L=="boolean"?De.R2L:me;It===!0&&(Y=zo(Y,function(Ur,Wr,En){return[Ur.split("").reverse().join(""),Wr,En]})),Je={text:Y,x:ye,y:Me,options:De,mutex:{pdfEscape:Ai,activeFontKey:Fe,fonts:We,activeFontSize:fe}},Dt.publish("postProcessText",Je),Y=Je.text,pi=Je.mutex.isHex||!1;var Vt=We[Fe].encoding;Vt!=="WinAnsiEncoding"&&Vt!=="StandardEncoding"||(Y=zo(Y,function(Ur,Wr,En){return[Kl(Ur),Wr,En]})),gt=en(Y),Y=[];for(var er,Ft,Tr,dr=0,wr=1,Or=Array.isArray(gt[0])?wr:dr,lr="",un=function(Ur,Wr,En){var Qr="";return En instanceof pt?(En=typeof De.angle=="number"?hr(En,new pt(1,0,0,1,Ur,Wr)):hr(new pt(1,0,0,1,Ur,Wr),En),m===y.ADVANCED&&(En=hr(new pt(1,0,0,-1,0,0),En)),Qr=En.join(" ")+` Tm
`):Qr=_(Ur)+" "+_(Wr)+` Td
`,Qr},Pn=0;Pn<gt.length;Pn++){switch(lr="",Or){case wr:Tr=(pi?"<":"(")+gt[Pn][0]+(pi?">":")"),er=parseFloat(gt[Pn][1]),Ft=parseFloat(gt[Pn][2]);break;case dr:Tr=(pi?"<":"(")+gt[Pn]+(pi?">":")"),er=Ya(ye),Ft=Xa(Me)}Uo!==void 0&&Uo[Pn]!==void 0&&(lr=Uo[Pn]+` Tw
`),Pn===0?Y.push(lr+un(er,Ft,hn)+Tr):Or===dr?Y.push(lr+Tr):Or===wr&&Y.push(lr+un(er,Ft,hn)+Tr)}Y=Or===dr?Y.join(` Tj
T* `):Y.join(` Tj
`),Y+=` Tj
`;var Bn=`BT
/`;return Bn+=Fe+" "+fe+` Tf
`,Bn+=_(fe*ca)+` TL
`,Bn+=j+`
`,Bn+=Sn,Bn+=Y,Z(Bn+="ET"),d[Fe]=!0,rn};var mc=h.__private__.clip=h.clip=function(Y){return Z(Y==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return mc("evenodd")},h.__private__.discardPath=h.discardPath=function(){return Z("n"),this};var Sa=h.__private__.isValidStyle=function(Y){var ye=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(Y)!==-1&&(ye=!0),ye};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(Y){return Sa(Y)&&(l=Y),this};var jl=h.__private__.getStyle=h.getStyle=function(Y){var ye=l;switch(Y){case"D":case"S":ye="S";break;case"F":ye="f";break;case"FD":case"DF":ye="B";break;case"f":case"f*":case"B":case"B*":ye=Y}return ye},Vl=h.close=function(){return Z("h"),this};h.stroke=function(){return Z("S"),this},h.fill=function(Y){return Ys("f",Y),this},h.fillEvenOdd=function(Y){return Ys("f*",Y),this},h.fillStroke=function(Y){return Ys("B",Y),this},h.fillStrokeEvenOdd=function(Y){return Ys("B*",Y),this};var Ys=function(Y,ye){_n(ye)==="object"?bc(ye,Y):Z(Y)},Xu=function(Y){Y===null||m===y.ADVANCED&&Y===void 0||(Y=jl(Y),Z(Y))};function yc(Y,ye,Me,De,Ke){var Je=new cl(ye||this.boundingBox,Me||this.xStep,De||this.yStep,this.gState,Ke||this.matrix);Je.stream=this.stream;var gt=Y+"$$"+this.cloneIndex+++"$$";return Bt(gt,Je),Je}var bc=function(Y,ye){var Me=wt[Y.key],De=ft[Me];if(De instanceof gu)Z("q"),Z(wc(ye)),De.gState&&h.setGState(De.gState),Z(Y.matrix.toString()+" cm"),Z("/"+Me+" sh"),Z("Q");else if(De instanceof cl){var Ke=new pt(1,0,0,-1,0,Er());Y.matrix&&(Ke=Ke.multiply(Y.matrix||Rt),Me=yc.call(De,Y.key,Y.boundingBox,Y.xStep,Y.yStep,Ke).id),Z("q"),Z("/Pattern cs"),Z("/"+Me+" scn"),De.gState&&h.setGState(De.gState),Z(ye),Z("Q")}},wc=function(Y){switch(Y){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Xs=h.moveTo=function(Y,ye){return Z(_(C(Y))+" "+_(x(ye))+" m"),this},ho=h.lineTo=function(Y,ye){return Z(_(C(Y))+" "+_(x(ye))+" l"),this},po=h.curveTo=function(Y,ye,Me,De,Ke,Je){return Z([_(C(Y)),_(x(ye)),_(C(Me)),_(x(De)),_(C(Ke)),_(x(Je)),"c"].join(" ")),this};h.__private__.line=h.line=function(Y,ye,Me,De,Ke){if(isNaN(Y)||isNaN(ye)||isNaN(Me)||isNaN(De)||!Sa(Ke))throw new Error("Invalid arguments passed to jsPDF.line");return m===y.COMPAT?this.lines([[Me-Y,De-ye]],Y,ye,[1,1],Ke||"S"):this.lines([[Me-Y,De-ye]],Y,ye,[1,1]).stroke()},h.__private__.lines=h.lines=function(Y,ye,Me,De,Ke,Je){var gt,jt,cr,yr,kr,Mr,sn,hn,rn,wi,Sn,pi;if(typeof Y=="number"&&(pi=Me,Me=ye,ye=Y,Y=pi),De=De||[1,1],Je=Je||!1,isNaN(ye)||isNaN(Me)||!Array.isArray(Y)||!Array.isArray(De)||!Sa(Ke)||typeof Je!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Xs(ye,Me),gt=De[0],jt=De[1],yr=Y.length,wi=ye,Sn=Me,cr=0;cr<yr;cr++)(kr=Y[cr]).length===2?(wi=kr[0]*gt+wi,Sn=kr[1]*jt+Sn,ho(wi,Sn)):(Mr=kr[0]*gt+wi,sn=kr[1]*jt+Sn,hn=kr[2]*gt+wi,rn=kr[3]*jt+Sn,wi=kr[4]*gt+wi,Sn=kr[5]*jt+Sn,po(Mr,sn,hn,rn,wi,Sn));return Je&&Vl(),Xu(Ke),this},h.path=function(Y){for(var ye=0;ye<Y.length;ye++){var Me=Y[ye],De=Me.c;switch(Me.op){case"m":Xs(De[0],De[1]);break;case"l":ho(De[0],De[1]);break;case"c":po.apply(this,De);break;case"h":Vl()}}return this},h.__private__.rect=h.rect=function(Y,ye,Me,De,Ke){if(isNaN(Y)||isNaN(ye)||isNaN(Me)||isNaN(De)||!Sa(Ke))throw new Error("Invalid arguments passed to jsPDF.rect");return m===y.COMPAT&&(De=-De),Z([_(C(Y)),_(x(ye)),_(C(Me)),_(C(De)),"re"].join(" ")),Xu(Ke),this},h.__private__.triangle=h.triangle=function(Y,ye,Me,De,Ke,Je,gt){if(isNaN(Y)||isNaN(ye)||isNaN(Me)||isNaN(De)||isNaN(Ke)||isNaN(Je)||!Sa(gt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Me-Y,De-ye],[Ke-Me,Je-De],[Y-Ke,ye-Je]],Y,ye,[1,1],gt,!0),this},h.__private__.roundedRect=h.roundedRect=function(Y,ye,Me,De,Ke,Je,gt){if(isNaN(Y)||isNaN(ye)||isNaN(Me)||isNaN(De)||isNaN(Ke)||isNaN(Je)||!Sa(gt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var jt=4/3*(Math.SQRT2-1);return Ke=Math.min(Ke,.5*Me),Je=Math.min(Je,.5*De),this.lines([[Me-2*Ke,0],[Ke*jt,0,Ke,Je-Je*jt,Ke,Je],[0,De-2*Je],[0,Je*jt,-Ke*jt,Je,-Ke,Je],[2*Ke-Me,0],[-Ke*jt,0,-Ke,-Je*jt,-Ke,-Je],[0,2*Je-De],[0,-Je*jt,Ke*jt,-Je,Ke,-Je]],Y+Ke,ye,[1,1],gt,!0),this},h.__private__.ellipse=h.ellipse=function(Y,ye,Me,De,Ke){if(isNaN(Y)||isNaN(ye)||isNaN(Me)||isNaN(De)||!Sa(Ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Je=4/3*(Math.SQRT2-1)*Me,gt=4/3*(Math.SQRT2-1)*De;return Xs(Y+Me,ye),po(Y+Me,ye-gt,Y+Je,ye-De,Y,ye-De),po(Y-Je,ye-De,Y-Me,ye-gt,Y-Me,ye),po(Y-Me,ye+gt,Y-Je,ye+De,Y,ye+De),po(Y+Je,ye+De,Y+Me,ye+gt,Y+Me,ye),Xu(Ke),this},h.__private__.circle=h.circle=function(Y,ye,Me,De){if(isNaN(Y)||isNaN(ye)||isNaN(Me)||!Sa(De))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(Y,ye,Me,Me,De)},h.setFont=function(Y,ye,Me){return Me&&(ye=A(ye,Me)),Fe=Do(Y,ye,{disableWarning:!1}),this};var Ku=h.__private__.getFont=h.getFont=function(){return We[Do.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var Y,ye,Me={};for(Y in Ze)if(Ze.hasOwnProperty(Y))for(ye in Me[Y]=[],Ze[Y])Ze[Y].hasOwnProperty(ye)&&Me[Y].push(ye);return Me},h.addFont=function(Y,ye,Me,De,Ke){var Je=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Je.indexOf(arguments[3])!==-1?Ke=arguments[3]:arguments[3]&&Je.indexOf(arguments[3])==-1&&(Me=A(Me,De)),Ke=Ke||"Identity-H",Oo.call(this,Y,ye,Me,Ke)};var Io,Ks=r.lineWidth||.200025,Ro=h.__private__.getLineWidth=h.getLineWidth=function(){return Ks},Wl=h.__private__.setLineWidth=h.setLineWidth=function(Y){return Ks=Y,Z(_(C(Y))+" w"),this};h.__private__.setLineDash=xr.API.setLineDash=xr.API.setLineDashPattern=function(Y,ye){if(Y=Y||[],ye=ye||0,isNaN(ye)||!Array.isArray(Y))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return Y=Y.map(function(Me){return _(C(Me))}).join(" "),ye=_(C(ye)),Z("["+Y+"] "+ye+" d"),this};var Yl=h.__private__.getLineHeight=h.getLineHeight=function(){return fe*Io};h.__private__.getLineHeight=h.getLineHeight=function(){return fe*Io};var Xl=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(Y){return typeof(Y=Y||1.15)=="number"&&(Io=Y),this},Fo=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return Io};Xl(r.lineHeight);var Ya=h.__private__.getHorizontalCoordinate=function(Y){return C(Y)},Xa=h.__private__.getVerticalCoordinate=function(Y){return m===y.ADVANCED?Y:mt[q].mediaBox.topRightY-mt[q].mediaBox.bottomLeftY-C(Y)},_c=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(Y){return _(Ya(Y))},Bo=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(Y){return _(Xa(Y))},Fa=r.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return Zt(Fa)},h.__private__.setStrokeColor=h.setDrawColor=function(Y,ye,Me,De){return Fa=br({ch1:Y,ch2:ye,ch3:Me,ch4:De,pdfColorType:"draw",precision:2}),Z(Fa),this};var N=r.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return Zt(N)},h.__private__.setFillColor=h.setFillColor=function(Y,ye,Me,De){return N=br({ch1:Y,ch2:ye,ch3:Me,ch4:De,pdfColorType:"fill",precision:2}),Z(N),this};var j=r.textColor||"0 g",ee=h.__private__.getTextColor=h.getTextColor=function(){return Zt(j)};h.__private__.setTextColor=h.setTextColor=function(Y,ye,Me,De){return j=br({ch1:Y,ch2:ye,ch3:Me,ch4:De,pdfColorType:"text",precision:3}),this};var ae=r.charSpace,de=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(ae||0)};h.__private__.setCharSpace=h.setCharSpace=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ae=Y,this};var pe=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(Y){var ye=h.CapJoinStyles[Y];if(ye===void 0)throw new Error("Line cap style of '"+Y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return pe=ye,Z(ye+" J"),this};var xe=0;h.__private__.setLineJoin=h.setLineJoin=function(Y){var ye=h.CapJoinStyles[Y];if(ye===void 0)throw new Error("Line join style of '"+Y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return xe=ye,Z(ye+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(Y){if(Y=Y||0,isNaN(Y))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Z(_(C(Y))+" M"),this},h.GState=El,h.setGState=function(Y){(Y=typeof Y=="string"?dt[vt[Y]]:Be(null,Y)).equals(Et)||(Z("/"+Y.id+" gs"),Et=Y)};var Be=function(Y,ye){if(!Y||!vt[Y]){var Me=!1;for(var De in dt)if(dt.hasOwnProperty(De)&&dt[De].equals(ye)){Me=!0;break}if(Me)ye=dt[De];else{var Ke="GS"+(Object.keys(dt).length+1).toString(10);dt[Ke]=ye,ye.id=Ke}return Y&&(vt[Y]=ye.id),Dt.publish("addGState",ye),ye}};h.addGState=function(Y,ye){return Be(Y,ye),this},h.saveGraphicsState=function(){return Z("q"),at.push({key:Fe,size:fe,color:j}),this},h.restoreGraphicsState=function(){Z("Q");var Y=at.pop();return Fe=Y.key,fe=Y.size,j=Y.color,Et=null,this},h.setCurrentTransformationMatrix=function(Y){return Z(Y.toString()+" cm"),this},h.comment=function(Y){return Z("#"+Y),this};var Oe=function(Y,ye){var Me=Y||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Me},set:function(Je){isNaN(Je)||(Me=parseFloat(Je))}});var De=ye||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return De},set:function(Je){isNaN(Je)||(De=parseFloat(Je))}});var Ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ke},set:function(Je){Ke=Je.toString()}}),this},He=function(Y,ye,Me,De){Oe.call(this,Y,ye),this.type="rect";var Ke=Me||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ke},set:function(gt){isNaN(gt)||(Ke=parseFloat(gt))}});var Je=De||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Je},set:function(gt){isNaN(gt)||(Je=parseFloat(gt))}}),this},ot=function(){this.page=Mt,this.currentPage=q,this.pages=ve.slice(0),this.pagesContext=mt.slice(0),this.x=ze,this.y=Ie,this.matrix=Ve,this.width=mr(q),this.height=Er(q),this.outputDestination=Le,this.id="",this.objectNumber=-1};ot.prototype.restore=function(){Mt=this.page,q=this.currentPage,mt=this.pagesContext,ve=this.pages,ze=this.x,Ie=this.y,Ve=this.matrix,$r(q,this.width),Qn(q,this.height),Le=this.outputDestination};var ht=function(Y,ye,Me,De,Ke){$t.push(new ot),Mt=q=0,ve=[],ze=Y,Ie=ye,Ve=Ke,Vs([Me,De])},rt=function(Y){if(nr[Y])$t.pop().restore();else{var ye=new ot,Me="Xo"+(Object.keys(Tt).length+1).toString(10);ye.id=Me,nr[Y]=Me,Tt[Me]=ye,Dt.publish("addFormObject",ye),$t.pop().restore()}};for(var Ct in h.beginFormObject=function(Y,ye,Me,De,Ke){return ht(Y,ye,Me,De,Ke),this},h.endFormObject=function(Y){return rt(Y),this},h.doFormObject=function(Y,ye){var Me=Tt[nr[Y]];return Z("q"),Z(ye.toString()+" cm"),Z("/"+Me.id+" Do"),Z("Q"),this},h.getFormObject=function(Y){var ye=Tt[nr[Y]];return{x:ye.x,y:ye.y,width:ye.width,height:ye.height,matrix:ye.matrix}},h.save=function(Y,ye){return Y=Y||"generated.pdf",(ye=ye||{}).returnPromise=ye.returnPromise||!1,ye.returnPromise===!1?(ol(Wa(co()),Y),typeof ol.unload=="function"&&Cr.setTimeout&&setTimeout(ol.unload,911),this):new Promise(function(Me,De){try{var Ke=ol(Wa(co()),Y);typeof ol.unload=="function"&&Cr.setTimeout&&setTimeout(ol.unload,911),Me(Ke)}catch(Je){De(Je.message)}})},xr.API)xr.API.hasOwnProperty(Ct)&&(Ct==="events"&&xr.API.events.length?function(Y,ye){var Me,De,Ke;for(Ke=ye.length-1;Ke!==-1;Ke--)Me=ye[Ke][0],De=ye[Ke][1],Y.subscribe.apply(Y,[Me].concat(typeof De=="function"?[De]:De))}(Dt,xr.API.events):h[Ct]=xr.API[Ct]);var mr=h.getPageWidth=function(Y){return(mt[Y=Y||q].mediaBox.topRightX-mt[Y].mediaBox.bottomLeftX)/Re},$r=h.setPageWidth=function(Y,ye){mt[Y].mediaBox.topRightX=ye*Re+mt[Y].mediaBox.bottomLeftX},Er=h.getPageHeight=function(Y){return(mt[Y=Y||q].mediaBox.topRightY-mt[Y].mediaBox.bottomLeftY)/Re},Qn=h.setPageHeight=function(Y,ye){mt[Y].mediaBox.topRightY=ye*Re+mt[Y].mediaBox.bottomLeftY};return h.internal={pdfEscape:Ai,getStyle:jl,getFont:Ku,getFontSize:ge,getCharSpace:de,getTextColor:ee,getLineHeight:Yl,getLineHeightFactor:Fo,getLineWidth:Ro,write:ie,getHorizontalCoordinate:Ya,getVerticalCoordinate:Xa,getCoordinateString:_c,getVerticalCoordinateString:Bo,collections:{},newObject:ur,newAdditionalObject:ct,newObjectDeferred:nt,newObjectDeferredBegin:Xe,getFilters:Gr,putStream:Rr,events:Dt,scaleFactor:Re,pageSize:{getWidth:function(){return mr(q)},setWidth:function(Y){$r(q,Y)},getHeight:function(){return Er(q)},setHeight:function(Y){Qn(q,Y)}},encryptionOptions:f,encryption:Ti,getEncryptor:Ul,output:ps,getNumberOfPages:$l,pages:ve,out:Z,f2:M,f3:T,getPageInfo:Hl,getPageInfoByObjId:Ar,getCurrentPageInfo:gc,getPDFVersion:g,Point:Oe,Rectangle:He,Matrix:pt,hasHotfix:Ws},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return mr(q)},set:function(Y){$r(q,Y)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return Er(q)},set:function(Y){Qn(q,Y)},enumerable:!0,configurable:!0}),dc.call(h,J),Fe="F1",Gl(i,t),Dt.publish("initialized"),h}wf.prototype.lsbFirstWord=function(r){return String.fromCharCode(r>>0&255,r>>8&255,r>>16&255,r>>24&255)},wf.prototype.toHexString=function(r){return r.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},wf.prototype.hexToBytes=function(r){for(var e=[],t=0;t<r.length;t+=2)e.push(String.fromCharCode(parseInt(r.substr(t,2),16)));return e.join("")},wf.prototype.processOwnerPassword=function(r,e){return k2(T2(e).substr(0,5),r)},wf.prototype.encryptor=function(r,e){var t=T2(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return k2(t,n)}},El.prototype.equals=function(r){var e,t="id,objectNumber,equals";if(!r||_n(r)!==_n(this))return!1;var n=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!r.hasOwnProperty(e)||this[e]!==r[e])return!1;n++}for(e in r)r.hasOwnProperty(e)&&t.indexOf(e)<0&&n--;return n===0},xr.API={events:[]},xr.version="2.5.1";var si=xr.API,xw=1,Ml=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ff=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Br=function(r){return r.toFixed(2)},hu=function(r){return r.toFixed(5)};si.__acroform__={};var Ra=function(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r},qx=function(r){return r*xw},Wo=function(r){var e=new iN,t=or.internal.getHeight(r)||0,n=or.internal.getWidth(r)||0;return e.BBox=[0,0,Number(Br(n)),Number(Br(t))],e},Sq=si.__acroform__.setBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|=1<<e},Eq=si.__acroform__.clearBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&=~(1<<e)},Cq=si.__acroform__.getBit=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<e?1:0},vi=si.__acroform__.getBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Cq(r,e-1)},gi=si.__acroform__.setBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Sq(r,e-1)},mi=si.__acroform__.clearBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Eq(r,e-1)},Aq=si.__acroform__.calculateCoordinates=function(r,e){var t=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,i=r[0],a=r[1],o=r[2],s=r[3],u={};return u.lowerLeft_X=t(i)||0,u.lowerLeft_Y=n(a+s)||0,u.upperRight_X=t(i+o)||0,u.upperRight_Y=n(a)||0,[Number(Br(u.lowerLeft_X)),Number(Br(u.lowerLeft_Y)),Number(Br(u.upperRight_X)),Number(Br(u.upperRight_Y))]},Tq=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var e=[],t=r._V||r.DV,n=L2(r,t),i=r.scope.internal.getFont(r.fontName,r.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(r.scope.__private__.encodeColorString(r.color)),e.push("/"+i+" "+Br(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=Wo(r);return a.scope=r.scope,a.stream=e.join(`
`),a}},L2=function(r,e){var t=r.fontSize===0?r.maxFontSize:r.fontSize,n={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=r.multiline?i.map(function(T){return T.split(`
`)}):i.map(function(T){return[T]});var a=t,o=or.internal.getHeight(r)||0;o=o<0?-o:o;var s=or.internal.getWidth(r)||0;s=s<0?-s:s;var u=function(T,C,R){if(T+1<i.length){var x=C+" "+i[T+1][0];return Rd(x,r,R).width<=s-4}return!1};a++;e:for(;a>0;){e="",a--;var l,f,c=Rd("3",r,a).height,d=r.multiline?o-a:(o-c)/2,h=d+=2,p=0,g=0,b=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+Rd(e,r,a=12).width+", FieldWidth:"+s+`
`;break}for(var v="",y=0,m=0;m<i.length;m++)if(i.hasOwnProperty(m)){var w=!1;if(i[m].length!==1&&b!==i[m].length-1){if((c+2)*(y+2)+2>o)continue e;v+=i[m][b],w=!0,g=m,m--}else{v=(v+=i[m][b]+" ").substr(v.length-1)==" "?v.substr(0,v.length-1):v;var S=parseInt(m),A=u(S,v,a),_=m>=i.length-1;if(A&&!_){v+=" ",b=0;continue}if(A||_){if(_)g=S;else if(r.multiline&&(c+2)*(y+2)+2>o)continue e}else{if(!r.multiline||(c+2)*(y+2)+2>o)continue e;g=S}}for(var E="",k=p;k<=g;k++){var M=i[k];if(r.multiline){if(k===g){E+=M[b]+" ",b=(b+1)%M.length;continue}if(k===p){E+=M[M.length-1]+" ";continue}}E+=M[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,f=Rd(E,r,a).width,r.textAlign){case"right":l=s-f-2;break;case"center":l=(s-f)/2;break;case"left":default:l=2}e+=Br(l)+" "+Br(h)+` Td
`,e+="("+Ml(E)+`) Tj
`,e+=-Br(l)+` 0 Td
`,h=-(a+2),f=0,p=w?g:g+1,y++,v=""}break}return n.text=e,n.fontSize=a,n},Rd=function(r,e,t){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(r,{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},kq={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Lq=function(r,e){var t={type:"reference",object:r};e.internal.getPageInfo(r.page).pageContext.annotations.find(function(n){return n.type===t.type&&n.object===t.object})===void 0&&e.internal.getPageInfo(r.page).pageContext.annotations.push(t)},Nq=function(r,e){for(var t in r)if(r.hasOwnProperty(t)){var n=t,i=r[t];e.internal.newObjectDeferredBegin(i.objId,!0),_n(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete r[n]}},Pq=function(r,e){if(e.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(Lo.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(kq)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");xw=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new aN,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var a=n[i];a.objId=void 0,a.hasAnnotation&&Lq(a,t)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(t){(function(n,i){var a=!n;for(var o in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var s=n[o],u=[],l=s.Rect;if(s.Rect&&(s.Rect=Aq(s.Rect,i)),i.internal.newObjectDeferredBegin(s.objId,!0),s.DA=or.createDefaultAppearanceStream(s),_n(s)==="object"&&typeof s.getKeyValueListForStream=="function"&&(u=s.getKeyValueListForStream()),s.Rect=l,s.hasAppearanceStream&&!s.appearanceStreamContent){var f=Tq(s);u.push({key:"AP",value:"<</N "+f+">>"}),i.internal.acroformPlugin.xForms.push(f)}if(s.appearanceStreamContent){var c="";for(var d in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(d)){var h=s.appearanceStreamContent[d];if(c+="/"+d+" ",c+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var o in h)if(h.hasOwnProperty(o)){var p=h[o];typeof p=="function"&&(p=p.call(i,s)),c+="/"+o+" "+p+" ",i.internal.acroformPlugin.xForms.indexOf(p)>=0||i.internal.acroformPlugin.xForms.push(p)}}else typeof(p=h)=="function"&&(p=p.call(i,s)),c+="/"+o+" "+p,i.internal.acroformPlugin.xForms.indexOf(p)>=0||i.internal.acroformPlugin.xForms.push(p);c+=">>"}u.push({key:"AP",value:`<<
`+c+">>"})}i.internal.putStream({additionalKeyValues:u,objectId:s.objId}),i.internal.out("endobj")}a&&Nq(i.internal.acroformPlugin.xForms,i)})(t,r)}),r.internal.acroformPlugin.isInitialized=!0}},nN=si.__acroform__.arrayToPdfArray=function(r,e,t){var n=function(o){return o};if(Array.isArray(r)){for(var i="[",a=0;a<r.length;a++)switch(a!==0&&(i+=" "),_n(r[a])){case"boolean":case"number":case"object":i+=r[a].toString();break;case"string":r[a].substr(0,1)!=="/"?(e!==void 0&&t&&(n=t.internal.getEncryptor(e)),i+="("+Ml(n(r[a].toString()))+")"):i+=r[a].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},bm=function(r,e,t){var n=function(i){return i};return e!==void 0&&t&&(n=t.internal.getEncryptor(e)),(r=r||"").toString(),r="("+Ml(n(r))+")"},ts=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ts.prototype.toString=function(){return this.objId+" 0 R"},ts.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},ts.prototype.getKeyValueListForStream=function(){var r=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var n=e[t],i=this[n];i&&(Array.isArray(i)?r.push({key:n,value:nN(i,this.objId,this.scope)}):i instanceof ts?(i.scope=this.scope,r.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&r.push({key:n,value:i}))}return r};var iN=function(){ts.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){r=t.trim()},get:function(){return r||null}})};Ra(iN,ts);var aN=function(){ts.call(this);var r,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var t=function(n){return n};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Ml(t(r))+")"}},set:function(t){r=t}})};Ra(aN,ts);var Lo=function r(){ts.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute F supplied.');e=v}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!vi(e,3)},set:function(v){v?this.F=gi(e,3):this.F=mi(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute Ff supplied.');t=v}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(v){n=v!==void 0?v:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(v){n[0]=v}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(v){n[1]=v}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(v){n[2]=v}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(v){n[3]=v}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(v){switch(v){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=v;break;default:throw new Error('Invalid value "'+v+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Tp)return;a="FieldObject"+r.FieldNum++}var v=function(y){return y};return this.scope&&(v=this.scope.internal.getEncryptor(this.objId)),"("+Ml(v(a))+")"},set:function(v){a=v.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(v){a=v}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(v){o=v}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(v){s=v}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(v){u=v}});var l=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return l===void 0?50/xw:l},set:function(v){l=v}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(v){f=v}});var c="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!c||this instanceof Tp||this instanceof gl))return bm(c,this.objId,this.scope)},set:function(v){v=v.toString(),c=v}});var d=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof zi?d:bm(d,this.objId,this.scope)},set:function(v){v=v.toString(),d=this instanceof zi?v:v.substr(0,1)==="("?ff(v.substr(1,v.length-2)):ff(v)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof zi?ff(d.substr(1,d.length-1)):d},set:function(v){v=v.toString(),d=this instanceof zi?"/"+v:v}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(v){this.V=v}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof zi?h:bm(h,this.objId,this.scope)},set:function(v){v=v.toString(),h=this instanceof zi?v:v.substr(0,1)==="("?ff(v.substr(1,v.length-2)):ff(v)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof zi?ff(h.substr(1,h.length-1)):h},set:function(v){v=v.toString(),h=this instanceof zi?"/"+v:v}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(v){v=!!v,g=v}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(v){p=v}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,1)},set:function(v){v?this.Ff=gi(this.Ff,1):this.Ff=mi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,2)},set:function(v){v?this.Ff=gi(this.Ff,2):this.Ff=mi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,3)},set:function(v){v?this.Ff=gi(this.Ff,3):this.Ff=mi(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(v){if([0,1,2].indexOf(v)===-1)throw new Error('Invalid value "'+v+'" for attribute Q supplied.');b=v}}),Object.defineProperty(this,"textAlign",{get:function(){var v;switch(b){case 0:default:v="left";break;case 1:v="center";break;case 2:v="right"}return v},configurable:!0,enumerable:!0,set:function(v){switch(v){case"right":case 2:b=2;break;case"center":case 1:b=1;break;case"left":case 0:default:b=0}}})};Ra(Lo,ts);var Mf=function(){Lo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){r=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return nN(e,this.objId,this.scope)},set:function(t){var n,i;i=[],typeof(n=t)=="string"&&(i=function(a,o,s){s||(s=1);for(var u,l=[];u=o.exec(a);)l.push(u[s]);return l}(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,18)},set:function(t){t?this.Ff=gi(this.Ff,18):this.Ff=mi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=gi(this.Ff,19):this.Ff=mi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,20)},set:function(t){t?(this.Ff=gi(this.Ff,20),e.sort()):this.Ff=mi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,22)},set:function(t){t?this.Ff=gi(this.Ff,22):this.Ff=mi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,23)},set:function(t){t?this.Ff=gi(this.Ff,23):this.Ff=mi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,27)},set:function(t){t?this.Ff=gi(this.Ff,27):this.Ff=mi(this.Ff,27)}}),this.hasAppearanceStream=!1};Ra(Mf,Lo);var Of=function(){Mf.call(this),this.fontName="helvetica",this.combo=!1};Ra(Of,Mf);var Df=function(){Of.call(this),this.combo=!0};Ra(Df,Of);var sp=function(){Df.call(this),this.edit=!0};Ra(sp,Df);var zi=function(){Lo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,15)},set:function(t){t?this.Ff=gi(this.Ff,15):this.Ff=mi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,16)},set:function(t){t?this.Ff=gi(this.Ff,16):this.Ff=mi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,17)},set:function(t){t?this.Ff=gi(this.Ff,17):this.Ff=mi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,26)},set:function(t){t?this.Ff=gi(this.Ff,26):this.Ff=mi(this.Ff,26)}});var r,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(a){return a};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,i=[];for(n in i.push("<<"),e)i.push("/"+n+" ("+Ml(t(e[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){_n(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(t){r="/"+t}})};Ra(zi,Lo);var up=function(){zi.call(this),this.pushButton=!0};Ra(up,zi);var If=function(){zi.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e!==void 0?e:[]}})};Ra(If,zi);var Tp=function(){var r,e;Lo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(s){return s};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,o=[];for(a in o.push("<<"),n)o.push("/"+a+" ("+Ml(i(n[a]))+")");return o.push(">>"),o.join(`
`)},set:function(i){_n(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=or.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ra(Tp,Lo),If.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=r.createAppearanceStream(t.optionName),t.caption=r.getCA()}},If.prototype.createOption=function(r){var e=new Tp;return e.Parent=this,e.optionName=r,this.Kids.push(e),Mq.call(this.scope,e),e};var lp=function(){zi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=or.CheckBox.createAppearanceStream()};Ra(lp,zi);var gl=function(){Lo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,13)},set:function(e){e?this.Ff=gi(this.Ff,13):this.Ff=mi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,21)},set:function(e){e?this.Ff=gi(this.Ff,21):this.Ff=mi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,23)},set:function(e){e?this.Ff=gi(this.Ff,23):this.Ff=mi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,24)},set:function(e){e?this.Ff=gi(this.Ff,24):this.Ff=mi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,25)},set:function(e){e?this.Ff=gi(this.Ff,25):this.Ff=mi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,26)},set:function(e){e?this.Ff=gi(this.Ff,26):this.Ff=mi(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){Number.isInteger(e)&&(r=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ra(gl,Lo);var fp=function(){gl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!vi(this.Ff,14)},set:function(r){r?this.Ff=gi(this.Ff,14):this.Ff=mi(this.Ff,14)}}),this.password=!0};Ra(fp,gl);var or={CheckBox:{createAppearanceStream:function(){return{N:{On:or.CheckBox.YesNormal},D:{On:or.CheckBox.YesPushDown,Off:or.CheckBox.OffPushDown}}},YesPushDown:function(r){var e=Wo(r);e.scope=r.scope;var t=[],n=r.scope.internal.getFont(r.fontName,r.fontStyle).id,i=r.scope.__private__.encodeColorString(r.color),a=L2(r,r.caption);return t.push("0.749023 g"),t.push("0 0 "+Br(or.internal.getWidth(r))+" "+Br(or.internal.getHeight(r))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+n+" "+Br(a.fontSize)+" Tf "+i),t.push("BT"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(r){var e=Wo(r);e.scope=r.scope;var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,n=r.scope.__private__.encodeColorString(r.color),i=[],a=or.internal.getHeight(r),o=or.internal.getWidth(r),s=L2(r,r.caption);return i.push("1 g"),i.push("0 0 "+Br(o)+" "+Br(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Br(o-1)+" "+Br(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+Br(s.fontSize)+" Tf "+n),i.push(s.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(r){var e=Wo(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Br(or.internal.getWidth(r))+" "+Br(or.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(r){var e={D:{Off:or.RadioButton.Circle.OffPushDown},N:{}};return e.N[r]=or.RadioButton.Circle.YesNormal,e.D[r]=or.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(r){var e=Wo(r);e.scope=r.scope;var t=[],n=or.internal.getWidth(r)<=or.internal.getHeight(r)?or.internal.getWidth(r)/4:or.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=or.internal.Bezier_C,a=Number((n*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+hu(or.internal.getWidth(r)/2)+" "+hu(or.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),t.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),t.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),t.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=Wo(r);e.scope=r.scope;var t=[],n=or.internal.getWidth(r)<=or.internal.getHeight(r)?or.internal.getWidth(r)/4:or.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*or.internal.Bezier_C).toFixed(5)),o=Number((n*or.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+hu(or.internal.getWidth(r)/2)+" "+hu(or.internal.getHeight(r)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+hu(or.internal.getWidth(r)/2)+" "+hu(or.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),t.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),t.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),t.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(r){var e=Wo(r);e.scope=r.scope;var t=[],n=or.internal.getWidth(r)<=or.internal.getHeight(r)?or.internal.getWidth(r)/4:or.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*or.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+hu(or.internal.getWidth(r)/2)+" "+hu(or.internal.getHeight(r)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(r){var e={D:{Off:or.RadioButton.Cross.OffPushDown},N:{}};return e.N[r]=or.RadioButton.Cross.YesNormal,e.D[r]=or.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(r){var e=Wo(r);e.scope=r.scope;var t=[],n=or.internal.calculateCross(r);return t.push("q"),t.push("1 1 "+Br(or.internal.getWidth(r)-2)+" "+Br(or.internal.getHeight(r)-2)+" re"),t.push("W"),t.push("n"),t.push(Br(n.x1.x)+" "+Br(n.x1.y)+" m"),t.push(Br(n.x2.x)+" "+Br(n.x2.y)+" l"),t.push(Br(n.x4.x)+" "+Br(n.x4.y)+" m"),t.push(Br(n.x3.x)+" "+Br(n.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=Wo(r);e.scope=r.scope;var t=or.internal.calculateCross(r),n=[];return n.push("0.749023 g"),n.push("0 0 "+Br(or.internal.getWidth(r))+" "+Br(or.internal.getHeight(r))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Br(or.internal.getWidth(r)-2)+" "+Br(or.internal.getHeight(r)-2)+" re"),n.push("W"),n.push("n"),n.push(Br(t.x1.x)+" "+Br(t.x1.y)+" m"),n.push(Br(t.x2.x)+" "+Br(t.x2.y)+" l"),n.push(Br(t.x4.x)+" "+Br(t.x4.y)+" m"),n.push(Br(t.x3.x)+" "+Br(t.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(r){var e=Wo(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Br(or.internal.getWidth(r))+" "+Br(or.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(r){var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,t=r.scope.__private__.encodeColorString(r.color);return"/"+e+" "+r.fontSize+" Tf "+t}};or.internal={Bezier_C:.551915024494,calculateCross:function(r){var e=or.internal.getWidth(r),t=or.internal.getHeight(r),n=Math.min(e,t);return{x1:{x:(e-n)/2,y:(t-n)/2+n},x2:{x:(e-n)/2+n,y:(t-n)/2},x3:{x:(e-n)/2,y:(t-n)/2},x4:{x:(e-n)/2+n,y:(t-n)/2+n}}}},or.internal.getWidth=function(r){var e=0;return _n(r)==="object"&&(e=qx(r.Rect[2])),e},or.internal.getHeight=function(r){var e=0;return _n(r)==="object"&&(e=qx(r.Rect[3])),e};var Mq=si.addField=function(r){if(Pq(this,r),!(r instanceof Lo))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=r).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};si.AcroFormChoiceField=Mf,si.AcroFormListBox=Of,si.AcroFormComboBox=Df,si.AcroFormEditBox=sp,si.AcroFormButton=zi,si.AcroFormPushButton=up,si.AcroFormRadioButton=If,si.AcroFormCheckBox=lp,si.AcroFormTextField=gl,si.AcroFormPasswordField=fp,si.AcroFormAppearance=or,si.AcroForm={ChoiceField:Mf,ListBox:Of,ComboBox:Df,EditBox:sp,Button:zi,PushButton:up,RadioButton:If,CheckBox:lp,TextField:gl,PasswordField:fp,Appearance:or},xr.AcroForm={ChoiceField:Mf,ListBox:Of,ComboBox:Df,EditBox:sp,Button:zi,PushButton:up,RadioButton:If,CheckBox:lp,TextField:gl,PasswordField:fp,Appearance:or};function oN(r){return r.reduce(function(e,t,n){return e[t]=n,e},{})}(function(r){r.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=r.__addimage__.getImageFileTypeByImageData=function(T,C){var R,x,B,D,O,G=e;if((C=C||e)==="RGBA"||T.data!==void 0&&T.data instanceof Uint8ClampedArray&&"height"in T&&"width"in T)return"RGBA";if(A(T))for(O in t)for(B=t[O],R=0;R<B.length;R+=1){for(D=!0,x=0;x<B[R].length;x+=1)if(B[R][x]!==void 0&&B[R][x]!==T[x]){D=!1;break}if(D===!0){G=O;break}}else for(O in t)for(B=t[O],R=0;R<B.length;R+=1){for(D=!0,x=0;x<B[R].length;x+=1)if(B[R][x]!==void 0&&B[R][x]!==T.charCodeAt(x)){D=!1;break}if(D===!0){G=O;break}}return G===e&&C!==e&&(G=C),G},i=function T(C){for(var R=this.internal.write,x=this.internal.putStream,B=(0,this.internal.getFilters)();B.indexOf("FlateEncode")!==-1;)B.splice(B.indexOf("FlateEncode"),1);C.objectId=this.internal.newObject();var D=[];if(D.push({key:"Type",value:"/XObject"}),D.push({key:"Subtype",value:"/Image"}),D.push({key:"Width",value:C.width}),D.push({key:"Height",value:C.height}),C.colorSpace===b.INDEXED?D.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(C.palette.length/3-1)+" "+("sMask"in C&&C.sMask!==void 0?C.objectId+2:C.objectId+1)+" 0 R]"}):(D.push({key:"ColorSpace",value:"/"+C.colorSpace}),C.colorSpace===b.DEVICE_CMYK&&D.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),D.push({key:"BitsPerComponent",value:C.bitsPerComponent}),"decodeParameters"in C&&C.decodeParameters!==void 0&&D.push({key:"DecodeParms",value:"<<"+C.decodeParameters+">>"}),"transparency"in C&&Array.isArray(C.transparency)){for(var O="",G=0,V=C.transparency.length;G<V;G++)O+=C.transparency[G]+" "+C.transparency[G]+" ";D.push({key:"Mask",value:"["+O+"]"})}C.sMask!==void 0&&D.push({key:"SMask",value:C.objectId+1+" 0 R"});var I=C.filter!==void 0?["/"+C.filter]:void 0;if(x({data:C.data,additionalKeyValues:D,alreadyAppliedFilters:I,objectId:C.objectId}),R("endobj"),"sMask"in C&&C.sMask!==void 0){var z="/Predictor "+C.predictor+" /Colors 1 /BitsPerComponent "+C.bitsPerComponent+" /Columns "+C.width,P={width:C.width,height:C.height,colorSpace:"DeviceGray",bitsPerComponent:C.bitsPerComponent,decodeParameters:z,data:C.sMask};"filter"in C&&(P.filter=C.filter),T.call(this,P)}if(C.colorSpace===b.INDEXED){var q=this.internal.newObject();x({data:E(new Uint8Array(C.palette)),objectId:q}),R("endobj")}},a=function(){var T=this.internal.collections.addImage_images;for(var C in T)i.call(this,T[C])},o=function(){var T,C=this.internal.collections.addImage_images,R=this.internal.write;for(var x in C)R("/I"+(T=C[x]).index,T.objectId,"0","R")},s=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},u=function(){var T=this.internal.collections.addImage_images;return s.call(this),T},l=function(){return Object.keys(this.internal.collections.addImage_images).length},f=function(T){return typeof r["process"+T.toUpperCase()]=="function"},c=function(T){return _n(T)==="object"&&T.nodeType===1},d=function(T,C){if(T.nodeName==="IMG"&&T.hasAttribute("src")){var R=""+T.getAttribute("src");if(R.indexOf("data:image/")===0)return sh(unescape(R).split("base64,").pop());var x=r.loadFile(R,!0);if(x!==void 0)return x}if(T.nodeName==="CANVAS"){if(T.width===0||T.height===0)throw new Error("Given canvas must have data. Canvas width: "+T.width+", height: "+T.height);var B;switch(C){case"PNG":B="image/png";break;case"WEBP":B="image/webp";break;case"JPEG":case"JPG":default:B="image/jpeg"}return sh(T.toDataURL(B,1).split("base64,").pop())}},h=function(T){var C=this.internal.collections.addImage_images;if(C){for(var R in C)if(T===C[R].alias)return C[R]}},p=function(T,C,R){return T||C||(T=-96,C=-96),T<0&&(T=-1*R.width*72/T/this.internal.scaleFactor),C<0&&(C=-1*R.height*72/C/this.internal.scaleFactor),T===0&&(T=C*R.width/R.height),C===0&&(C=T*R.height/R.width),[T,C]},g=function(T,C,R,x,B,D){var O=p.call(this,R,x,B),G=this.internal.getCoordinateString,V=this.internal.getVerticalCoordinateString,I=u.call(this);if(R=O[0],x=O[1],I[B.index]=B,D){D*=Math.PI/180;var z=Math.cos(D),P=Math.sin(D),q=function(U){return U.toFixed(4)},F=[q(z),q(P),q(-1*P),q(z),0,0,"cm"]}this.internal.write("q"),D?(this.internal.write([1,"0","0",1,G(T),V(C+x),"cm"].join(" ")),this.internal.write(F.join(" ")),this.internal.write([G(R),"0","0",G(x),"0","0","cm"].join(" "))):this.internal.write([G(R),"0","0",G(x),G(T),V(C+x),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+B.index+" Do"),this.internal.write("Q")},b=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},y=r.__addimage__.sHashCode=function(T){var C,R,x=0;if(typeof T=="string")for(R=T.length,C=0;C<R;C++)x=(x<<5)-x+T.charCodeAt(C),x|=0;else if(A(T))for(R=T.byteLength/2,C=0;C<R;C++)x=(x<<5)-x+T[C],x|=0;return x},m=r.__addimage__.validateStringAsBase64=function(T){(T=T||"").toString().trim();var C=!0;return T.length===0&&(C=!1),T.length%4!=0&&(C=!1),/^[A-Za-z0-9+/]+$/.test(T.substr(0,T.length-2))===!1&&(C=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(T.substr(-2))===!1&&(C=!1),C},w=r.__addimage__.extractImageFromDataUrl=function(T){var C=(T=T||"").split("base64,"),R=null;if(C.length===2){var x=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(C[0]);Array.isArray(x)&&(R={mimeType:x[1],charset:x[2],data:C[1]})}return R},S=r.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};r.__addimage__.isArrayBuffer=function(T){return S()&&T instanceof ArrayBuffer};var A=r.__addimage__.isArrayBufferView=function(T){return S()&&typeof Uint32Array<"u"&&(T instanceof Int8Array||T instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&T instanceof Uint8ClampedArray||T instanceof Int16Array||T instanceof Uint16Array||T instanceof Int32Array||T instanceof Uint32Array||T instanceof Float32Array||T instanceof Float64Array)},_=r.__addimage__.binaryStringToUint8Array=function(T){for(var C=T.length,R=new Uint8Array(C),x=0;x<C;x++)R[x]=T.charCodeAt(x);return R},E=r.__addimage__.arrayBufferToBinaryString=function(T){for(var C="",R=A(T)?T:new Uint8Array(T),x=0;x<R.length;x+=8192)C+=String.fromCharCode.apply(null,R.subarray(x,x+8192));return C};r.addImage=function(){var T,C,R,x,B,D,O,G,V;if(typeof arguments[1]=="number"?(C=e,R=arguments[1],x=arguments[2],B=arguments[3],D=arguments[4],O=arguments[5],G=arguments[6],V=arguments[7]):(C=arguments[1],R=arguments[2],x=arguments[3],B=arguments[4],D=arguments[5],O=arguments[6],G=arguments[7],V=arguments[8]),_n(T=arguments[0])==="object"&&!c(T)&&"imageData"in T){var I=T;T=I.imageData,C=I.format||C||e,R=I.x||R||0,x=I.y||x||0,B=I.w||I.width||B,D=I.h||I.height||D,O=I.alias||O,G=I.compression||G,V=I.rotation||I.angle||V}var z=this.internal.getFilters();if(G===void 0&&z.indexOf("FlateEncode")!==-1&&(G="SLOW"),isNaN(R)||isNaN(x))throw new Error("Invalid coordinates passed to jsPDF.addImage");s.call(this);var P=k.call(this,T,C,O,G);return g.call(this,R,x,B,D,P,V),this};var k=function(T,C,R,x){var B,D,O;if(typeof T=="string"&&n(T)===e){T=unescape(T);var G=M(T,!1);(G!==""||(G=r.loadFile(T,!0))!==void 0)&&(T=G)}if(c(T)&&(T=d(T,C)),C=n(T,C),!f(C))throw new Error("addImage does not support files of type '"+C+"', please ensure that a plugin for '"+C+"' support is added.");if(((O=R)==null||O.length===0)&&(R=function(V){return typeof V=="string"||A(V)?y(V):A(V.data)?y(V.data):null}(T)),(B=h.call(this,R))||(S()&&(T instanceof Uint8Array||C==="RGBA"||(D=T,T=_(T))),B=this["process"+C.toUpperCase()](T,l.call(this),R,function(V){return V&&typeof V=="string"&&(V=V.toUpperCase()),V in r.image_compression?V:v.NONE}(x),D)),!B)throw new Error("An unknown error occurred whilst processing the image.");return B},M=r.__addimage__.convertBase64ToBinaryString=function(T,C){var R;C=typeof C!="boolean"||C;var x,B="";if(typeof T=="string"){x=(R=w(T))!==null?R.data:T;try{B=sh(x)}catch(D){if(C)throw m(x)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+D.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return B};r.getImageProperties=function(T){var C,R,x="";if(c(T)&&(T=d(T)),typeof T=="string"&&n(T)===e&&((x=M(T,!1))===""&&(x=r.loadFile(T)||""),T=x),R=n(T),!f(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(!S()||T instanceof Uint8Array||(T=_(T)),!(C=this["process"+R.toUpperCase()](T)))throw new Error("An unknown error occurred whilst processing the image");return C.fileType=R,C}})(xr.API),function(r){var e=function(t){if(t!==void 0&&t!="")return!0};xr.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(t){for(var n,i,a,o=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,u=this.internal.getPageInfoByObjId(t.objId),l=t.pageContext.annotations,f=!1,c=0;c<l.length&&!f;c++)switch((n=l[c]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var d=0;d<l.length;d++){n=l[d];var h=this.internal.pdfEscape,p=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),v=this.internal.getEncryptor(g.objId),y=n.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(n.bounds.x)+" "+s(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+s(n.bounds.y)+"] ")+"/Contents ("+h(v(n.contents))+")",a+=" /Popup "+b.objId+" 0 R",a+=" /P "+u.objId+" 0 R",a+=" /T ("+h(v(y))+") >>",g.content=a;var m=g.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(n.bounds.x+30)+" "+s(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+s(n.bounds.y)+"] ")+" /Parent "+m,n.open&&(a+=" /Open true"),a+=" >>",b.content=a,this.internal.write(g.objId,"0 R",b.objId,"0 R");break;case"freetext":i="/Rect ["+o(n.bounds.x)+" "+s(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+s(n.bounds.y+n.bounds.h)+"] ";var w=n.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+h(p(n.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+w+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(n.options.name){var S=this.annotations._nameMap[n.options.name];n.options.pageNumber=S.page,n.options.top=S.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",a="",n.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+h(p(n.options.url))+") >>";else if(n.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,a+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var A=s(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),a+=" /XYZ "+n.options.left+" "+A+" "+n.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),r.createAnnotation=function(t){var n=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":n.pageContext.annotations.push(t)}},r.link=function(t,n,i,a,o){var s=this.internal.getCurrentPageInfo(),u=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:u(t),y:l(n),w:u(t+i),h:l(n+a)},options:o,type:"link"})},r.textWithLink=function(t,n,i,a){var o,s,u=this.getTextWidth(t),l=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){s=a.maxWidth;var f=this.splitTextToSize(t,s).length;o=Math.ceil(l*f)}else s=u,o=l;return this.text(t,n,i,a),i+=.2*l,a.align==="center"&&(n-=u/2),a.align==="right"&&(n-=u),this.link(n,i-l,s,o,a),u},r.getTextWidth=function(t){var n=this.internal.getFontSize();return this.getStringUnitWidth(t)*n/this.internal.scaleFactor}}(xr.API),function(r){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];r.__arabicParser__={};var a=r.__arabicParser__.isInArabicSubstitutionA=function(g){return e[g.charCodeAt(0)]!==void 0},o=r.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},s=r.__arabicParser__.isArabicEndLetter=function(g){return o(g)&&a(g)&&e[g.charCodeAt(0)].length<=2},u=r.__arabicParser__.isArabicAlfLetter=function(g){return o(g)&&i.indexOf(g.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return o(g)&&a(g)&&e[g.charCodeAt(0)].length>=1};var l=r.__arabicParser__.arabicLetterHasFinalForm=function(g){return o(g)&&a(g)&&e[g.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(g){return o(g)&&a(g)&&e[g.charCodeAt(0)].length>=3};var f=r.__arabicParser__.arabicLetterHasMedialForm=function(g){return o(g)&&a(g)&&e[g.charCodeAt(0)].length==4},c=r.__arabicParser__.resolveLigatures=function(g){var b=0,v=t,y="",m=0;for(b=0;b<g.length;b+=1)v[g.charCodeAt(b)]!==void 0?(m++,typeof(v=v[g.charCodeAt(b)])=="number"&&(y+=String.fromCharCode(v),v=t,m=0),b===g.length-1&&(v=t,y+=g.charAt(b-(m-1)),b-=m-1,m=0)):(v=t,y+=g.charAt(b-m),b-=m,m=0);return y};r.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&n[g.charCodeAt(0)]!==void 0};var d=r.__arabicParser__.getCorrectForm=function(g,b,v){return o(g)?a(g)===!1?-1:!l(g)||!o(b)&&!o(v)||!o(v)&&s(b)||s(g)&&!o(b)||s(g)&&u(b)||s(g)&&s(b)?0:f(g)&&o(b)&&!s(b)&&o(v)&&l(v)?3:s(g)||!o(v)?1:2:-1},h=function(g){var b=0,v=0,y=0,m="",w="",S="",A=(g=g||"").split("\\s+"),_=[];for(b=0;b<A.length;b+=1){for(_.push(""),v=0;v<A[b].length;v+=1)m=A[b][v],w=A[b][v-1],S=A[b][v+1],o(m)?(y=d(m,w,S),_[b]+=y!==-1?String.fromCharCode(e[m.charCodeAt(0)][y]):m):_[b]+=m;_[b]=c(_[b])}return _.join(" ")},p=r.__arabicParser__.processArabic=r.processArabic=function(){var g,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,v=[];if(Array.isArray(b)){var y=0;for(v=[],y=0;y<b.length;y+=1)Array.isArray(b[y])?v.push([h(b[y][0]),b[y][1],b[y][2]]):v.push([h(b[y])]);g=v}else g=h(b);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};r.events.push(["preProcessText",p])}(xr.API),xr.API.autoPrint=function(r){var e;switch((r=r||{}).variant=r.variant||"non-conform",r.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(r){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(s){t=s}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(s){n=isNaN(s)||Number.isInteger(s)===!1||s<0?150:s,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(s){i=isNaN(s)||Number.isInteger(s)===!1||s<0?300:s,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(s){a=s}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(s){o=s}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,n){var i;if((t=t||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(xr.API),function(r){var e={left:0,top:0,bottom:0,right:0},t=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var u=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var l=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return l},set:function(g){l=g}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(g){f=g}});var c=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var d=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var p=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return p},set:function(g){p=g}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(u){return n.call(this),this.internal.__cell__.headerFunction=typeof u=="function"?u:void 0,this},r.getTextDimensions=function(u,l){n.call(this);var f=(l=l||{}).fontSize||this.getFontSize(),c=l.font||this.getFont(),d=l.scaleFactor||this.internal.scaleFactor,h=0,p=0,g=0,b=this;if(!Array.isArray(u)&&typeof u!="string"){if(typeof u!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");u=String(u)}var v=l.maxWidth;v>0?typeof u=="string"?u=this.splitTextToSize(u,v):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce(function(m,w){return m.concat(b.splitTextToSize(w,v))},[])):u=Array.isArray(u)?u:[u];for(var y=0;y<u.length;y++)h<(g=this.getStringUnitWidth(u[y],{font:c})*f)&&(h=g);return h!==0&&(p=u.length),{w:h/=d,h:Math.max((p*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/d,0)}},r.cellAddPage=function(){n.call(this),this.addPage();var u=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(u.left,u.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=r.cell=function(){var u;u=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var l=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,c=this.internal.__cell__.margins||e,d=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return l.lineNumber!==void 0&&(l.lineNumber===u.lineNumber?(u.x=(l.x||0)+(l.width||0),u.y=l.y||0):l.y+l.height+u.height+c.bottom>this.getPageHeight()?(this.cellAddPage(),u.y=c.top,h&&d&&(this.printHeaderRow(u.lineNumber,!0),u.y+=d[0].height)):u.y=l.y+l.height||u.y),u.text[0]!==void 0&&(this.rect(u.x,u.y,u.width,u.height,t===!0?"FD":void 0),u.align==="right"?this.text(u.text,u.x+u.width-f,u.y+f,{align:"right",baseline:"top"}):u.align==="center"?this.text(u.text,u.x+u.width/2,u.y+f,{align:"center",baseline:"top",maxWidth:u.width-f-f}):this.text(u.text,u.x+f,u.y+f,{align:"left",baseline:"top",maxWidth:u.width-f-f})),this.internal.__cell__.lastCell=u,this};r.table=function(u,l,f,c,d){if(n.call(this),!f)throw new Error("No data for PDF table.");var h,p,g,b,v=[],y=[],m=[],w={},S={},A=[],_=[],E=(d=d||{}).autoSize||!1,k=d.printHeaders!==!1,M=d.css&&d.css["font-size"]!==void 0?16*d.css["font-size"]:d.fontSize||12,T=d.margins||Object.assign({width:this.getPageWidth()},e),C=typeof d.padding=="number"?d.padding:3,R=d.headerBackgroundColor||"#c8c8c8",x=d.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=k,this.internal.__cell__.margins=T,this.internal.__cell__.table_font_size=M,this.internal.__cell__.padding=C,this.internal.__cell__.headerBackgroundColor=R,this.internal.__cell__.headerTextColor=x,this.setFontSize(M),c==null)y=v=Object.keys(f[0]),m=v.map(function(){return"left"});else if(Array.isArray(c)&&_n(c[0])==="object")for(v=c.map(function(I){return I.name}),y=c.map(function(I){return I.prompt||I.name||""}),m=c.map(function(I){return I.align||"left"}),h=0;h<c.length;h+=1)S[c[h].name]=c[h].width*(19.049976/25.4);else Array.isArray(c)&&typeof c[0]=="string"&&(y=v=c,m=v.map(function(){return"left"}));if(E||Array.isArray(c)&&typeof c[0]=="string")for(h=0;h<v.length;h+=1){for(w[b=v[h]]=f.map(function(I){return I[b]}),this.setFont(void 0,"bold"),A.push(this.getTextDimensions(y[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),p=w[b],this.setFont(void 0,"normal"),g=0;g<p.length;g+=1)A.push(this.getTextDimensions(p[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);S[b]=Math.max.apply(null,A)+C+C,A=[]}if(k){var B={};for(h=0;h<v.length;h+=1)B[v[h]]={},B[v[h]].text=y[h],B[v[h]].align=m[h];var D=s.call(this,B,S);_=v.map(function(I){return new a(u,l,S[I],D,B[I].text,void 0,B[I].align)}),this.setTableHeaderRow(_),this.printHeaderRow(1,!1)}var O=c.reduce(function(I,z){return I[z.name]=z.align,I},{});for(h=0;h<f.length;h+=1){"rowStart"in d&&d.rowStart instanceof Function&&d.rowStart({row:h,data:f[h]},this);var G=s.call(this,f[h],S);for(g=0;g<v.length;g+=1){var V=f[h][v[g]];"cellStart"in d&&d.cellStart instanceof Function&&d.cellStart({row:h,col:g,data:V},this),o.call(this,new a(u,l,S[v[g]],G,V,h+2,O[v[g]]))}}return this.internal.__cell__.table_x=u,this.internal.__cell__.table_y=l,this};var s=function(u,l){var f=this.internal.__cell__.padding,c=this.internal.__cell__.table_font_size,d=this.internal.scaleFactor;return Object.keys(u).map(function(h){var p=u[h];return this.splitTextToSize(p.hasOwnProperty("text")?p.text:p,l[h]-f-f)},this).map(function(h){return this.getLineHeightFactor()*h.length*c/d+f+f},this).reduce(function(h,p){return Math.max(h,p)},0)};r.setTableHeaderRow=function(u){n.call(this),this.internal.__cell__.tableHeaderRow=u},r.printHeaderRow=function(u,l){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var c=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(c[0],c[1],c[2],c[3],void 0,-1)}this.setFont(void 0,"bold");for(var d=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){f=this.internal.__cell__.tableHeaderRow[h].clone(),l&&(f.y=this.internal.__cell__.margins.top||0,d.push(f)),f.lineNumber=u;var p=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,f),this.setTextColor(p)}d.length>0&&this.setTableHeaderRow(d),this.setFont(void 0,"normal"),t=!1}}(xr.API);var sN={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},uN=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],N2=oN(uN),lN=[100,200,300,400,500,600,700,800,900],Oq=oN(lN);function P2(r){var e=r.family.replace(/"|'/g,"").toLowerCase(),t=function(a){return sN[a=a||"normal"]?a:"normal"}(r.style),n=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(r.weight),i=function(a){return typeof N2[a=a||"normal"]=="number"?a:"normal"}(r.stretch);return{family:e,style:t,weight:n,stretch:i,src:r.src||[],ref:r.ref||{name:e,style:[i,t,n].join(" ")}}}function Gx(r,e,t,n){var i;for(i=t;i>=0&&i<e.length;i+=n)if(r[e[i]])return r[e[i]];for(i=t;i>=0&&i<e.length;i-=n)if(r[e[i]])return r[e[i]]}var Dq={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},$x={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Ux(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function Iq(r,e,t){for(var n=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},Dq,t.genericFontFamilies||{}),a=null,o=null,s=0;s<e.length;++s)if(i[(a=P2(e[s])).family]&&(a.family=i[a.family]),r.hasOwnProperty(a.family)){o=r[a.family];break}if(!(o=o||r[n]))throw new Error("Could not find a font-family for the rule '"+Ux(a)+"' and default family '"+n+"'.");if(o=function(u,l){if(l[u])return l[u];var f=N2[u],c=f<=N2.normal?-1:1,d=Gx(l,uN,f,c);if(!d)throw new Error("Could not find a matching font-stretch value for "+u);return d}(a.stretch,o),o=function(u,l){if(l[u])return l[u];for(var f=sN[u],c=0;c<f.length;++c)if(l[f[c]])return l[f[c]];throw new Error("Could not find a matching font-style for "+u)}(a.style,o),!(o=function(u,l){if(l[u])return l[u];if(u===400&&l[500])return l[500];if(u===500&&l[400])return l[400];var f=Oq[u],c=Gx(l,lN,f,u<400?-1:1);if(!c)throw new Error("Could not find a matching font-weight for value "+u);return c}(a.weight,o)))throw new Error("Failed to resolve a font for the rule '"+Ux(a)+"'.");return o}function Hx(r){return r.trimLeft()}function Rq(r,e){for(var t=0;t<r.length;){if(r.charAt(t)===e)return[r.substring(0,t),r.substring(t+1)];t+=1}return null}function Fq(r){var e=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],r.substring(e[0].length)]}var Fd,jx,Vx,wm=["times"];(function(r){var e,t,n,i,a,o,s,u,l,f=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new u,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new o,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new o,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new c(this),e=this.internal.f2,t=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,o=this.internal.Point,s=this.internal.Rectangle,u=this.internal.Matrix,l=new f}]);var c=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=P;Object.defineProperty(this,"pdf",{get:function(){return q}});var F=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return F},set:function(le){F=!!le}});var U=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return U},set:function(le){U=!!le}});var W=0;Object.defineProperty(this,"posX",{get:function(){return W},set:function(le){isNaN(le)||(W=le)}});var X=0;Object.defineProperty(this,"posY",{get:function(){return X},set:function(le){isNaN(le)||(X=le)}}),Object.defineProperty(this,"margin",{get:function(){return l.margin},set:function(le){var Z;typeof le=="number"?Z=[le,le,le,le]:((Z=new Array(4))[0]=le[0],Z[1]=le.length>=2?le[1]:Z[0],Z[2]=le.length>=3?le[2]:Z[0],Z[3]=le.length>=4?le[3]:Z[1]),l.margin=Z}});var te=!1;Object.defineProperty(this,"autoPaging",{get:function(){return te},set:function(le){te=le}});var ne=0;Object.defineProperty(this,"lastBreak",{get:function(){return ne},set:function(le){ne=le}});var he=[];Object.defineProperty(this,"pageBreaks",{get:function(){return he},set:function(le){he=le}}),Object.defineProperty(this,"ctx",{get:function(){return l},set:function(le){le instanceof f&&(l=le)}}),Object.defineProperty(this,"path",{get:function(){return l.path},set:function(le){l.path=le}});var ve=[];Object.defineProperty(this,"ctxStack",{get:function(){return ve},set:function(le){ve=le}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(le){var Z;Z=d(le),this.ctx.fillStyle=Z.style,this.ctx.isFillTransparent=Z.a===0,this.ctx.fillOpacity=Z.a,this.pdf.setFillColor(Z.r,Z.g,Z.b,{a:Z.a}),this.pdf.setTextColor(Z.r,Z.g,Z.b,{a:Z.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(le){var Z=d(le);this.ctx.strokeStyle=Z.style,this.ctx.isStrokeTransparent=Z.a===0,this.ctx.strokeOpacity=Z.a,Z.a===0?this.pdf.setDrawColor(255,255,255):(Z.a,this.pdf.setDrawColor(Z.r,Z.g,Z.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(le){["butt","round","square"].indexOf(le)!==-1&&(this.ctx.lineCap=le,this.pdf.setLineCap(le))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(le){isNaN(le)||(this.ctx.lineWidth=le,this.pdf.setLineWidth(le))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(le){["bevel","round","miter"].indexOf(le)!==-1&&(this.ctx.lineJoin=le,this.pdf.setLineJoin(le))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(le){isNaN(le)||(this.ctx.miterLimit=le,this.pdf.setMiterLimit(le))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(le){this.ctx.textBaseline=le}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(le){["right","end","center","left","start"].indexOf(le)!==-1&&(this.ctx.textAlign=le)}});var Ce=null;function Le(le,Z){if(Ce===null){var ie=function(re){var J=[];return Object.keys(re).forEach(function(fe){re[fe].forEach(function(we){var ge=null;switch(we){case"bold":ge={family:fe,weight:"bold"};break;case"italic":ge={family:fe,style:"italic"};break;case"bolditalic":ge={family:fe,weight:"bold",style:"italic"};break;case"":case"normal":ge={family:fe}}ge!==null&&(ge.ref={name:fe,style:we},J.push(ge))})}),J}(le.getFontList());Ce=function(re){for(var J={},fe=0;fe<re.length;++fe){var we=P2(re[fe]),ge=we.family,me=we.stretch,ue=we.style,ce=we.weight;J[ge]=J[ge]||{},J[ge][me]=J[ge][me]||{},J[ge][me][ue]=J[ge][me][ue]||{},J[ge][me][ue][ce]=we}return J}(ie.concat(Z))}return Ce}var K=null;Object.defineProperty(this,"fontFaces",{get:function(){return K},set:function(le){Ce=null,K=le}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(le){var Z;if(this.ctx.font=le,(Z=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(le))!==null){var ie=Z[1],re=(Z[2],Z[3]),J=Z[4],fe=(Z[5],Z[6]),we=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(J)[2];J=Math.floor(we==="px"?parseFloat(J)*this.pdf.internal.scaleFactor:we==="em"?parseFloat(J)*this.pdf.getFontSize():parseFloat(J)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(J);var ge=function(Ge){var Fe,Re,ze=[],Ie=Ge.trim();if(Ie==="")return wm;if(Ie in $x)return[$x[Ie]];for(;Ie!=="";){switch(Re=null,Fe=(Ie=Hx(Ie)).charAt(0)){case'"':case"'":Re=Rq(Ie.substring(1),Fe);break;default:Re=Fq(Ie)}if(Re===null||(ze.push(Re[0]),(Ie=Hx(Re[1]))!==""&&Ie.charAt(0)!==","))return wm;Ie=Ie.replace(/^,/,"")}return ze}(fe);if(this.fontFaces){var me=Iq(Le(this.pdf,this.fontFaces),ge.map(function(Ge){return{family:Ge,stretch:"normal",weight:re,style:ie}}));this.pdf.setFont(me.ref.name,me.ref.style)}else{var ue="";(re==="bold"||parseInt(re,10)>=700||ie==="bold")&&(ue="bold"),ie==="italic"&&(ue+="italic"),ue.length===0&&(ue="normal");for(var ce="",oe={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ae=0;Ae<ge.length;Ae++){if(this.pdf.internal.getFont(ge[Ae],ue,{noFallback:!0,disableWarning:!0})!==void 0){ce=ge[Ae];break}if(ue==="bolditalic"&&this.pdf.internal.getFont(ge[Ae],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ce=ge[Ae],ue="bold";else if(this.pdf.internal.getFont(ge[Ae],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ce=ge[Ae],ue="normal";break}}if(ce===""){for(var Te=0;Te<ge.length;Te++)if(oe[ge[Te]]){ce=oe[ge[Te]];break}}ce=ce===""?"Times":ce,this.pdf.setFont(ce,ue)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(le){this.ctx.globalCompositeOperation=le}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(le){this.ctx.globalAlpha=le}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(le){this.ctx.lineDashOffset=le,z.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(le){this.ctx.lineDash=le,z.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(le){this.ctx.ignoreClearRect=!!le}})};c.prototype.setLineDash=function(P){this.lineDash=P},c.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},c.prototype.fill=function(){w.call(this,"fill",!1)},c.prototype.stroke=function(){w.call(this,"stroke",!1)},c.prototype.beginPath=function(){this.path=[{type:"begin"}]},c.prototype.moveTo=function(P,q){if(isNaN(P)||isNaN(q))throw On.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var F=this.ctx.transform.applyToPoint(new o(P,q));this.path.push({type:"mt",x:F.x,y:F.y}),this.ctx.lastPoint=new o(P,q)},c.prototype.closePath=function(){var P=new o(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&_n(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){P=new o(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(P.x,P.y)},c.prototype.lineTo=function(P,q){if(isNaN(P)||isNaN(q))throw On.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var F=this.ctx.transform.applyToPoint(new o(P,q));this.path.push({type:"lt",x:F.x,y:F.y}),this.ctx.lastPoint=new o(F.x,F.y)},c.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),w.call(this,null,!0)},c.prototype.quadraticCurveTo=function(P,q,F,U){if(isNaN(F)||isNaN(U)||isNaN(P)||isNaN(q))throw On.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var W=this.ctx.transform.applyToPoint(new o(F,U)),X=this.ctx.transform.applyToPoint(new o(P,q));this.path.push({type:"qct",x1:X.x,y1:X.y,x:W.x,y:W.y}),this.ctx.lastPoint=new o(W.x,W.y)},c.prototype.bezierCurveTo=function(P,q,F,U,W,X){if(isNaN(W)||isNaN(X)||isNaN(P)||isNaN(q)||isNaN(F)||isNaN(U))throw On.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var te=this.ctx.transform.applyToPoint(new o(W,X)),ne=this.ctx.transform.applyToPoint(new o(P,q)),he=this.ctx.transform.applyToPoint(new o(F,U));this.path.push({type:"bct",x1:ne.x,y1:ne.y,x2:he.x,y2:he.y,x:te.x,y:te.y}),this.ctx.lastPoint=new o(te.x,te.y)},c.prototype.arc=function(P,q,F,U,W,X){if(isNaN(P)||isNaN(q)||isNaN(F)||isNaN(U)||isNaN(W))throw On.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(X=!!X,!this.ctx.transform.isIdentity){var te=this.ctx.transform.applyToPoint(new o(P,q));P=te.x,q=te.y;var ne=this.ctx.transform.applyToPoint(new o(0,F)),he=this.ctx.transform.applyToPoint(new o(0,0));F=Math.sqrt(Math.pow(ne.x-he.x,2)+Math.pow(ne.y-he.y,2))}Math.abs(W-U)>=2*Math.PI&&(U=0,W=2*Math.PI),this.path.push({type:"arc",x:P,y:q,radius:F,startAngle:U,endAngle:W,counterclockwise:X})},c.prototype.arcTo=function(P,q,F,U,W){throw new Error("arcTo not implemented.")},c.prototype.rect=function(P,q,F,U){if(isNaN(P)||isNaN(q)||isNaN(F)||isNaN(U))throw On.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,q),this.lineTo(P+F,q),this.lineTo(P+F,q+U),this.lineTo(P,q+U),this.lineTo(P,q),this.lineTo(P+F,q),this.lineTo(P,q)},c.prototype.fillRect=function(P,q,F,U){if(isNaN(P)||isNaN(q)||isNaN(F)||isNaN(U))throw On.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var W={};this.lineCap!=="butt"&&(W.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(W.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,q,F,U),this.fill(),W.hasOwnProperty("lineCap")&&(this.lineCap=W.lineCap),W.hasOwnProperty("lineJoin")&&(this.lineJoin=W.lineJoin)}},c.prototype.strokeRect=function(P,q,F,U){if(isNaN(P)||isNaN(q)||isNaN(F)||isNaN(U))throw On.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");p.call(this)||(this.beginPath(),this.rect(P,q,F,U),this.stroke())},c.prototype.clearRect=function(P,q,F,U){if(isNaN(P)||isNaN(q)||isNaN(F)||isNaN(U))throw On.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,q,F,U))},c.prototype.save=function(P){P=typeof P!="boolean"||P;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,F=0;F<this.pdf.internal.getNumberOfPages();F++)this.pdf.setPage(F+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var U=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=U}},c.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,F=0;F<this.pdf.internal.getNumberOfPages();F++)this.pdf.setPage(F+1),this.pdf.internal.out("Q");this.pdf.setPage(q),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},c.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var d=function(P){var q,F,U,W;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))q=0,F=0,U=0,W=0;else{var X=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(X!==null)q=parseInt(X[1]),F=parseInt(X[2]),U=parseInt(X[3]),W=1;else if((X=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)q=parseInt(X[1]),F=parseInt(X[2]),U=parseInt(X[3]),W=parseFloat(X[4]);else{if(W=1,typeof P=="string"&&P.charAt(0)!=="#"){var te=new eN(P);P=te.ok?te.toHex():"#000000"}P.length===4?(q=P.substring(1,2),q+=q,F=P.substring(2,3),F+=F,U=P.substring(3,4),U+=U):(q=P.substring(1,3),F=P.substring(3,5),U=P.substring(5,7)),q=parseInt(q,16),F=parseInt(F,16),U=parseInt(U,16)}}return{r:q,g:F,b:U,a:W,style:P}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},p=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};c.prototype.fillText=function(P,q,F,U){if(isNaN(q)||isNaN(F)||typeof P!="string")throw On.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(U=isNaN(U)?void 0:U,!h.call(this)){var W=G(this.ctx.transform.rotation),X=this.ctx.transform.scaleX;C.call(this,{text:P,x:q,y:F,scale:X,angle:W,align:this.textAlign,maxWidth:U})}},c.prototype.strokeText=function(P,q,F,U){if(isNaN(q)||isNaN(F)||typeof P!="string")throw On.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!p.call(this)){U=isNaN(U)?void 0:U;var W=G(this.ctx.transform.rotation),X=this.ctx.transform.scaleX;C.call(this,{text:P,x:q,y:F,scale:X,renderingMode:"stroke",angle:W,align:this.textAlign,maxWidth:U})}},c.prototype.measureText=function(P){if(typeof P!="string")throw On.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,F=this.pdf.internal.scaleFactor,U=q.internal.getFontSize(),W=q.getStringUnitWidth(P)*U/q.internal.scaleFactor,X=function(te){var ne=(te=te||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ne}}),this};return new X({width:W*=Math.round(96*F/72*1e4)/1e4})},c.prototype.scale=function(P,q){if(isNaN(P)||isNaN(q))throw On.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var F=new u(P,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(F)},c.prototype.rotate=function(P){if(isNaN(P))throw On.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new u(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},c.prototype.translate=function(P,q){if(isNaN(P)||isNaN(q))throw On.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var F=new u(1,0,0,1,P,q);this.ctx.transform=this.ctx.transform.multiply(F)},c.prototype.transform=function(P,q,F,U,W,X){if(isNaN(P)||isNaN(q)||isNaN(F)||isNaN(U)||isNaN(W)||isNaN(X))throw On.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var te=new u(P,q,F,U,W,X);this.ctx.transform=this.ctx.transform.multiply(te)},c.prototype.setTransform=function(P,q,F,U,W,X){P=isNaN(P)?1:P,q=isNaN(q)?0:q,F=isNaN(F)?0:F,U=isNaN(U)?1:U,W=isNaN(W)?0:W,X=isNaN(X)?0:X,this.ctx.transform=new u(P,q,F,U,W,X)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};c.prototype.drawImage=function(P,q,F,U,W,X,te,ne,he){var ve=this.pdf.getImageProperties(P),Ce=1,Le=1,K=1,le=1;U!==void 0&&ne!==void 0&&(K=ne/U,le=he/W,Ce=ve.width/U*ne/U,Le=ve.height/W*he/W),X===void 0&&(X=q,te=F,q=0,F=0),U!==void 0&&ne===void 0&&(ne=U,he=W),U===void 0&&ne===void 0&&(ne=ve.width,he=ve.height);for(var Z,ie=this.ctx.transform.decompose(),re=G(ie.rotate.shx),J=new u,fe=(J=(J=(J=J.multiply(ie.translate)).multiply(ie.skew)).multiply(ie.scale)).applyToRectangle(new s(X-q*K,te-F*le,U*Ce,W*Le)),we=b.call(this,fe),ge=[],me=0;me<we.length;me+=1)ge.indexOf(we[me])===-1&&ge.push(we[me]);if(m(ge),this.autoPaging)for(var ue=ge[0],ce=ge[ge.length-1],oe=ue;oe<ce+1;oe++){this.pdf.setPage(oe);var Ae=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Te=oe===1?this.posY+this.margin[0]:this.margin[0],Ge=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Fe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Re=oe===1?0:Ge+(oe-2)*Fe;if(this.ctx.clip_path.length!==0){var ze=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(Z,this.posX+this.margin[3],-Re+Te+this.ctx.prevPageLastElemOffset),S.call(this,"fill",!0),this.path=ze}var Ie=JSON.parse(JSON.stringify(fe));Ie=y([Ie],this.posX+this.margin[3],-Re+Te+this.ctx.prevPageLastElemOffset)[0];var Ve=(oe>ue||oe<ce)&&g.call(this);Ve&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ae,Fe,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",Ie.x,Ie.y,Ie.w,Ie.h,null,null,re),Ve&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",fe.x,fe.y,fe.w,fe.h,null,null,re)};var b=function(P,q,F){var U=[];q=q||this.pdf.internal.pageSize.width,F=F||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var W=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":U.push(Math.floor((P.y+W)/F)+1);break;case"arc":U.push(Math.floor((P.y+W-P.radius)/F)+1),U.push(Math.floor((P.y+W+P.radius)/F)+1);break;case"qct":var X=V(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);U.push(Math.floor((X.y+W)/F)+1),U.push(Math.floor((X.y+X.h+W)/F)+1);break;case"bct":var te=I(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);U.push(Math.floor((te.y+W)/F)+1),U.push(Math.floor((te.y+te.h+W)/F)+1);break;case"rect":U.push(Math.floor((P.y+W)/F)+1),U.push(Math.floor((P.y+P.h+W)/F)+1)}for(var ne=0;ne<U.length;ne+=1)for(;this.pdf.internal.getNumberOfPages()<U[ne];)v.call(this);return U},v=function(){var P=this.fillStyle,q=this.strokeStyle,F=this.font,U=this.lineCap,W=this.lineWidth,X=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=q,this.font=F,this.lineCap=U,this.lineWidth=W,this.lineJoin=X},y=function(P,q,F){for(var U=0;U<P.length;U++)switch(P[U].type){case"bct":P[U].x2+=q,P[U].y2+=F;case"qct":P[U].x1+=q,P[U].y1+=F;case"mt":case"lt":case"arc":default:P[U].x+=q,P[U].y+=F}return P},m=function(P){return P.sort(function(q,F){return q-F})},w=function(P,q){for(var F,U,W=this.fillStyle,X=this.strokeStyle,te=this.lineCap,ne=this.lineWidth,he=Math.abs(ne*this.ctx.transform.scaleX),ve=this.lineJoin,Ce=JSON.parse(JSON.stringify(this.path)),Le=JSON.parse(JSON.stringify(this.path)),K=[],le=0;le<Le.length;le++)if(Le[le].x!==void 0)for(var Z=b.call(this,Le[le]),ie=0;ie<Z.length;ie+=1)K.indexOf(Z[ie])===-1&&K.push(Z[ie]);for(var re=0;re<K.length;re++)for(;this.pdf.internal.getNumberOfPages()<K[re];)v.call(this);if(m(K),this.autoPaging)for(var J=K[0],fe=K[K.length-1],we=J;we<fe+1;we++){this.pdf.setPage(we),this.fillStyle=W,this.strokeStyle=X,this.lineCap=te,this.lineWidth=he,this.lineJoin=ve;var ge=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],me=we===1?this.posY+this.margin[0]:this.margin[0],ue=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ce=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],oe=we===1?0:ue+(we-2)*ce;if(this.ctx.clip_path.length!==0){var Ae=this.path;F=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(F,this.posX+this.margin[3],-oe+me+this.ctx.prevPageLastElemOffset),S.call(this,P,!0),this.path=Ae}if(U=JSON.parse(JSON.stringify(Ce)),this.path=y(U,this.posX+this.margin[3],-oe+me+this.ctx.prevPageLastElemOffset),q===!1||we===0){var Te=(we>J||we<fe)&&g.call(this);Te&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ge,ce,null).clip().discardPath()),S.call(this,P,q),Te&&this.pdf.restoreGraphicsState()}this.lineWidth=ne}else this.lineWidth=he,S.call(this,P,q),this.lineWidth=ne;this.path=Ce},S=function(P,q){if((P!=="stroke"||q||!p.call(this))&&(P==="stroke"||q||!h.call(this))){for(var F,U,W=[],X=this.path,te=0;te<X.length;te++){var ne=X[te];switch(ne.type){case"begin":W.push({begin:!0});break;case"close":W.push({close:!0});break;case"mt":W.push({start:ne,deltas:[],abs:[]});break;case"lt":var he=W.length;if(X[te-1]&&!isNaN(X[te-1].x)&&(F=[ne.x-X[te-1].x,ne.y-X[te-1].y],he>0)){for(;he>=0;he--)if(W[he-1].close!==!0&&W[he-1].begin!==!0){W[he-1].deltas.push(F),W[he-1].abs.push(ne);break}}break;case"bct":F=[ne.x1-X[te-1].x,ne.y1-X[te-1].y,ne.x2-X[te-1].x,ne.y2-X[te-1].y,ne.x-X[te-1].x,ne.y-X[te-1].y],W[W.length-1].deltas.push(F);break;case"qct":var ve=X[te-1].x+2/3*(ne.x1-X[te-1].x),Ce=X[te-1].y+2/3*(ne.y1-X[te-1].y),Le=ne.x+2/3*(ne.x1-ne.x),K=ne.y+2/3*(ne.y1-ne.y),le=ne.x,Z=ne.y;F=[ve-X[te-1].x,Ce-X[te-1].y,Le-X[te-1].x,K-X[te-1].y,le-X[te-1].x,Z-X[te-1].y],W[W.length-1].deltas.push(F);break;case"arc":W.push({deltas:[],abs:[],arc:!0}),Array.isArray(W[W.length-1].abs)&&W[W.length-1].abs.push(ne)}}U=q?null:P==="stroke"?"stroke":"fill";for(var ie=!1,re=0;re<W.length;re++)if(W[re].arc)for(var J=W[re].abs,fe=0;fe<J.length;fe++){var we=J[fe];we.type==="arc"?E.call(this,we.x,we.y,we.radius,we.startAngle,we.endAngle,we.counterclockwise,void 0,q,!ie):R.call(this,we.x,we.y),ie=!0}else if(W[re].close===!0)this.pdf.internal.out("h"),ie=!1;else if(W[re].begin!==!0){var ge=W[re].start.x,me=W[re].start.y;x.call(this,W[re].deltas,ge,me),ie=!0}U&&k.call(this,U),q&&M.call(this)}},A=function(P){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,F=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-F;case"top":return P+q-F;case"hanging":return P+q-2*F;case"middle":return P+q/2-F;case"ideographic":return P;case"alphabetic":default:return P}},_=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};c.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(q,F){this.colorStops.push([q,F])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},c.prototype.createPattern=function(){return this.createLinearGradient()},c.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(P,q,F,U,W,X,te,ne,he){for(var ve=D.call(this,F,U,W,X),Ce=0;Ce<ve.length;Ce++){var Le=ve[Ce];Ce===0&&(he?T.call(this,Le.x1+P,Le.y1+q):R.call(this,Le.x1+P,Le.y1+q)),B.call(this,P,q,Le.x2,Le.y2,Le.x3,Le.y3,Le.x4,Le.y4)}ne?M.call(this):k.call(this,te)},k=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},M=function(){this.pdf.clip(),this.pdf.discardPath()},T=function(P,q){this.pdf.internal.out(t(P)+" "+n(q)+" m")},C=function(P){var q;switch(P.align){case"right":case"end":q="right";break;case"center":q="center";break;case"left":case"start":default:q="left"}var F=this.pdf.getTextDimensions(P.text),U=A.call(this,P.y),W=_.call(this,U)-F.h,X=this.ctx.transform.applyToPoint(new o(P.x,U)),te=this.ctx.transform.decompose(),ne=new u;ne=(ne=(ne=ne.multiply(te.translate)).multiply(te.skew)).multiply(te.scale);for(var he,ve,Ce,Le=this.ctx.transform.applyToRectangle(new s(P.x,U,F.w,F.h)),K=ne.applyToRectangle(new s(P.x,W,F.w,F.h)),le=b.call(this,K),Z=[],ie=0;ie<le.length;ie+=1)Z.indexOf(le[ie])===-1&&Z.push(le[ie]);if(m(Z),this.autoPaging)for(var re=Z[0],J=Z[Z.length-1],fe=re;fe<J+1;fe++){this.pdf.setPage(fe);var we=fe===1?this.posY+this.margin[0]:this.margin[0],ge=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],me=this.pdf.internal.pageSize.height-this.margin[2],ue=me-this.margin[0],ce=this.pdf.internal.pageSize.width-this.margin[1],oe=ce-this.margin[3],Ae=fe===1?0:ge+(fe-2)*ue;if(this.ctx.clip_path.length!==0){var Te=this.path;he=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(he,this.posX+this.margin[3],-1*Ae+we),S.call(this,"fill",!0),this.path=Te}var Ge=y([JSON.parse(JSON.stringify(K))],this.posX+this.margin[3],-Ae+we+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(ve=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ve*P.scale),Ce=this.lineWidth,this.lineWidth=Ce*P.scale);var Fe=this.autoPaging!=="text";if(Fe||Ge.y+Ge.h<=me){if(Fe||Ge.y>=we&&Ge.x<=ce){var Re=Fe?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||ce-Ge.x)[0],ze=y([JSON.parse(JSON.stringify(Le))],this.posX+this.margin[3],-Ae+we+this.ctx.prevPageLastElemOffset)[0],Ie=Fe&&(fe>re||fe<J)&&g.call(this);Ie&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],oe,ue,null).clip().discardPath()),this.pdf.text(Re,ze.x,ze.y,{angle:P.angle,align:q,renderingMode:P.renderingMode}),Ie&&this.pdf.restoreGraphicsState()}}else Ge.y<me&&(this.ctx.prevPageLastElemOffset+=me-Ge.y);P.scale>=.01&&(this.pdf.setFontSize(ve),this.lineWidth=Ce)}else P.scale>=.01&&(ve=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ve*P.scale),Ce=this.lineWidth,this.lineWidth=Ce*P.scale),this.pdf.text(P.text,X.x+this.posX,X.y+this.posY,{angle:P.angle,align:q,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(ve),this.lineWidth=Ce)},R=function(P,q,F,U){F=F||0,U=U||0,this.pdf.internal.out(t(P+F)+" "+n(q+U)+" l")},x=function(P,q,F){return this.pdf.lines(P,q,F,null,null)},B=function(P,q,F,U,W,X,te,ne){this.pdf.internal.out([e(i(F+P)),e(a(U+q)),e(i(W+P)),e(a(X+q)),e(i(te+P)),e(a(ne+q)),"c"].join(" "))},D=function(P,q,F,U){for(var W=2*Math.PI,X=Math.PI/2;q>F;)q-=W;var te=Math.abs(F-q);te<W&&U&&(te=W-te);for(var ne=[],he=U?-1:1,ve=q;te>1e-5;){var Ce=ve+he*Math.min(te,X);ne.push(O.call(this,P,ve,Ce)),te-=Math.abs(Ce-ve),ve=Ce}return ne},O=function(P,q,F){var U=(F-q)/2,W=P*Math.cos(U),X=P*Math.sin(U),te=W,ne=-X,he=te*te+ne*ne,ve=he+te*W+ne*X,Ce=4/3*(Math.sqrt(2*he*ve)-ve)/(te*X-ne*W),Le=te-Ce*ne,K=ne+Ce*te,le=Le,Z=-K,ie=U+q,re=Math.cos(ie),J=Math.sin(ie);return{x1:P*Math.cos(q),y1:P*Math.sin(q),x2:Le*re-K*J,y2:Le*J+K*re,x3:le*re-Z*J,y3:le*J+Z*re,x4:P*Math.cos(F),y4:P*Math.sin(F)}},G=function(P){return 180*P/Math.PI},V=function(P,q,F,U,W,X){var te=P+.5*(F-P),ne=q+.5*(U-q),he=W+.5*(F-W),ve=X+.5*(U-X),Ce=Math.min(P,W,te,he),Le=Math.max(P,W,te,he),K=Math.min(q,X,ne,ve),le=Math.max(q,X,ne,ve);return new s(Ce,K,Le-Ce,le-K)},I=function(P,q,F,U,W,X,te,ne){var he,ve,Ce,Le,K,le,Z,ie,re,J,fe,we,ge,me,ue=F-P,ce=U-q,oe=W-F,Ae=X-U,Te=te-W,Ge=ne-X;for(ve=0;ve<41;ve++)re=(Z=(Ce=P+(he=ve/40)*ue)+he*((K=F+he*oe)-Ce))+he*(K+he*(W+he*Te-K)-Z),J=(ie=(Le=q+he*ce)+he*((le=U+he*Ae)-Le))+he*(le+he*(X+he*Ge-le)-ie),ve==0?(fe=re,we=J,ge=re,me=J):(fe=Math.min(fe,re),we=Math.min(we,J),ge=Math.max(ge,re),me=Math.max(me,J));return new s(Math.round(fe),Math.round(we),Math.round(ge-fe),Math.round(me-we))},z=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,q,F=(P=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:q}));this.prevLineDash!==F&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=F)}}})(xr.API),function(r){var e=function(a){var o,s,u,l,f,c,d,h,p,g;for(s=[],u=0,l=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;l>u;u+=4)(f=(a.charCodeAt(u)<<24)+(a.charCodeAt(u+1)<<16)+(a.charCodeAt(u+2)<<8)+a.charCodeAt(u+3))!==0?(c=(f=((f=((f=((f=(f-(g=f%85))/85)-(p=f%85))/85)-(h=f%85))/85)-(d=f%85))/85)%85,s.push(c+33,d+33,h+33,p+33,g+33)):s.push(122);return function(b,v){for(var y=v;y>0;y--)b.pop()}(s,o.length),String.fromCharCode.apply(String,s)+"~>"},t=function(a){var o,s,u,l,f,c=String,d="length",h=255,p="charCodeAt",g="slice",b="replace";for(a[g](-2),a=a[g](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),u=[],l=0,f=(a+=o="uuuuu"[g](a[d]%5||5))[d];f>l;l+=5)s=52200625*(a[p](l)-33)+614125*(a[p](l+1)-33)+7225*(a[p](l+2)-33)+85*(a[p](l+3)-33)+(a[p](l+4)-33),u.push(h&s>>24,h&s>>16,h&s>>8,h&s);return function(v,y){for(var m=y;m>0;m--)v.pop()}(u,o[d]),c.fromCharCode.apply(c,u)},n=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var s="",u=0;u<a.length;u+=2)s+=String.fromCharCode("0x"+(a[u]+a[u+1]));return s},i=function(a){for(var o=new Uint8Array(a.length),s=a.length;s--;)o[s]=a.charCodeAt(s);return a=(o=C2(o)).reduce(function(u,l){return u+String.fromCharCode(l)},"")};r.processDataByFilters=function(a,o){var s=0,u=a||"",l=[];for(typeof(o=o||[])=="string"&&(o=[o]),s=0;s<o.length;s+=1)switch(o[s]){case"ASCII85Decode":case"/ASCII85Decode":u=t(u),l.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),l.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=n(u),l.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=u.split("").map(function(f){return("0"+f.charCodeAt().toString(16)).slice(-2)}).join("")+">",l.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=i(u),l.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[s]+'" is not implemented')}return{data:u,reverseChain:l.reverse().join(" ")}}}(xr.API),function(r){r.loadFile=function(e,t,n){return function(i,a,o){a=a!==!1,o=typeof o=="function"?o:function(){};var s=void 0;try{s=function(u,l,f){var c=new XMLHttpRequest,d=0,h=function(p){var g=p.length,b=[],v=String.fromCharCode;for(d=0;d<g;d+=1)b.push(v(255&p.charCodeAt(d)));return b.join("")};if(c.open("GET",u,!l),c.overrideMimeType("text/plain; charset=x-user-defined"),l===!1&&(c.onload=function(){c.status===200?f(h(this.responseText)):f(void 0)}),c.send(null),l&&c.status===200)return h(c.responseText)}(i,a,o)}catch{}return s}(e,t,n)},r.loadImageFile=r.loadFile}(xr.API),function(r){function e(){return(Cr.html2canvas?Promise.resolve(Cr.html2canvas):w2(()=>import("./html2canvas.esm-e0a7d97b.js"),[],import.meta.url)).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function t(){return(Cr.DOMPurify?Promise.resolve(Cr.DOMPurify):w2(()=>import("./purify.es-cf254a40.js"),[],import.meta.url)).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var s=_n(o);return s==="undefined"?"undefined":s==="string"||o instanceof String?"string":s==="number"||o instanceof Number?"number":s==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":s==="object"?"object":"unknown"},i=function(o,s){var u=document.createElement(o);for(var l in s.className&&(u.className=s.className),s.innerHTML&&s.dompurify&&(u.innerHTML=s.dompurify.sanitize(s.innerHTML)),s.style)u.style[l]=s.style[l];return u},a=function o(s){var u=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),l=o.convert(Promise.resolve(),u);return l=(l=l.setProgress(1,o,1,[o])).set(s)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,s){return o.__proto__=s||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,s){return this.then(function(){switch(s=s||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(t).then(function(u){return this.set({src:i("div",{innerHTML:o,dompurify:u})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},s=function u(l,f){for(var c=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),d=l.firstChild;d;d=d.nextSibling)f!==!0&&d.nodeType===1&&d.nodeName==="SCRIPT"||c.appendChild(u(d,f));return l.nodeType===1&&(l.nodeName==="CANVAS"?(c.width=l.width,c.height=l.height,c.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(c.value=l.value),c.addEventListener("load",function(){c.scrollTop=l.scrollTop,c.scrollLeft=l.scrollLeft},!0)),c}(this.prop.src,this.opt.html2canvas.javascriptEnabled);s.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(s),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(s){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,s(this.prop.container,u)}).then(function(s){(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(s){var u=this.opt.jsPDF,l=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,c=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete c.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=l,l)for(var d=0;d<l.length;++d){var h=l[d],p=h.src.find(function(g){return g.format==="truetype"});p&&u.addFont(p.url,h.ref.name,h.ref.style)}return c.windowHeight=c.windowHeight||0,c.windowHeight=c.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):c.windowHeight,u.context2d.save(!0),s(this.prop.container,c)}).then(function(s){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,s,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(o,s):this.outputPdf(o,s)},a.prototype.outputPdf=function(o,s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,s)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(n(o)!=="object")return this;var s=Object.keys(o||{}).map(function(u){if(u in a.template.prop)return function(){this.prop[u]=o[u]};switch(u){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[u]=o[u]}}},this);return this.then(function(){return this.thenList(s)})},a.prototype.get=function(o,s){return this.then(function(){var u=o in a.template.prop?this.prop[o]:this.opt[o];return s?s(u):u})},a.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function s(u,l){return Math.floor(u*l/72*96)}return this.then(function(){(o=o||xr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:s(o.inner.width,o.k),height:s(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,s,u,l){return o!=null&&(this.progress.val=o),s!=null&&(this.progress.state=s),u!=null&&(this.progress.n=u),l!=null&&(this.progress.stack=l),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,s,u,l){return this.setProgress(o?this.progress.val+o:null,s||null,u?this.progress.n+u:null,l?this.progress.stack.concat(l):null)},a.prototype.then=function(o,s){var u=this;return this.thenCore(o,s,function(l,f){return u.updateProgress(null,null,1,[l]),Promise.prototype.then.call(this,function(c){return u.updateProgress(null,l),c}).then(l,f).then(function(c){return u.updateProgress(1),c})})},a.prototype.thenCore=function(o,s,u){u=u||Promise.prototype.then,o&&(o=o.bind(this)),s&&(s=s.bind(this));var l=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),f=u.call(l,o,s);return a.convert(f,this.__proto__)},a.prototype.thenExternal=function(o,s){return Promise.prototype.then.call(this,o,s)},a.prototype.thenList=function(o){var s=this;return o.forEach(function(u){s=s.thenCore(u)}),s},a.prototype.catch=function(o){o&&(o=o.bind(this));var s=Promise.prototype.catch.call(this,o);return a.convert(s,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,xr.getPageSize=function(o,s,u){if(_n(o)==="object"){var l=o;o=l.orientation,s=l.unit||s,u=l.format||u}s=s||"mm",u=u||"a4",o=(""+(o||"P")).toLowerCase();var f,c=(""+u).toLowerCase(),d={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(s){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+s}var h,p=0,g=0;if(d.hasOwnProperty(c))p=d[c][1]/f,g=d[c][0]/f;else try{p=u[1],g=u[0]}catch{throw new Error("Invalid format: "+u)}if(o==="p"||o==="portrait")o="p",g>p&&(h=g,g=p,p=h);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",p>g&&(h=g,g=p,p=h)}return{width:g,height:p,unit:s,k:f,orientation:o}},r.html=function(o,s){(s=s||{}).callback=s.callback||function(){},s.html2canvas=s.html2canvas||{},s.html2canvas.canvas=s.html2canvas.canvas||this.canvas,s.jsPDF=s.jsPDF||this,s.fontFaces=s.fontFaces?s.fontFaces.map(P2):null;var u=new a(s);return s.worker?u:u.from(o).doCallback()}}(xr.API),xr.API.addJS=function(r){return Vx=r,this.internal.events.subscribe("postPutResources",function(){Fd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Fd+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),jx=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Vx+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Fd!==void 0&&jx!==void 0&&this.internal.out("/Names <</JavaScript "+Fd+" 0 R>>")}),this},function(r){var e;r.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),a=0;a<i.length;a++){var o=i[a],s=n.exec(o);if(s!=null){var u=s[1];t.internal.newObjectDeferredBegin(u,!1)}t.internal.write(o)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,f=[];for(a=0;a<l;a++){var c=t.internal.newObject();f.push(c);var d=t.internal.getPageInfo(a+1);t.internal.write("<< /D["+d.objId+" 0 R /XYZ null null null]>> endobj")}var h=t.internal.newObject();for(t.internal.write("<< /Names [ "),a=0;a<f.length;a++)t.internal.write("(page_"+(a+1)+")"+f[a]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+h+" 0 R"),t.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),r.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(n,i,a){var o={title:i,options:a,children:[]};return n==null&&(n=this.root),n.children.push(o),o},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(n){n.id=t.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},t.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},t.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<n.children.length;a++){var o=n.children[a];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),a>0&&this.line("/Prev "+this.makeRef(n.children[a-1])),a<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[a+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var s=this.count=this.count_r({count:0},o);if(s>0&&this.line("/Count "+s),o.options&&o.options.pageNumber){var u=t.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+u.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var l=0;l<n.children.length;l++)this.renderItems(n.children[l])},t.outline.line=function(n){this.ctx.val+=n+`\r
`},t.outline.makeRef=function(n){return n.id+" 0 R"},t.outline.makeString=function(n){return"("+t.internal.pdfEscape(n)+")"},t.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(n,i){for(var a=0;a<i.children.length;a++)n.count++,this.count_r(n,i.children[a]);return n.count}}])}(xr.API),function(r){var e=[192,193,194,195,196,197,198,199];r.processJPEG=function(t,n,i,a,o,s){var u,l=this.decode.DCT_DECODE,f=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=o||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(u=function(c){for(var d,h=256*c.charCodeAt(4)+c.charCodeAt(5),p=c.length,g={width:0,height:0,numcomponents:1},b=4;b<p;b+=2){if(b+=h,e.indexOf(c.charCodeAt(b+1))!==-1){d=256*c.charCodeAt(b+5)+c.charCodeAt(b+6),g={width:256*c.charCodeAt(b+7)+c.charCodeAt(b+8),height:d,numcomponents:c.charCodeAt(b+9)};break}h=256*c.charCodeAt(b+2)+c.charCodeAt(b+3)}return g}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}f={data:t,width:u.width,height:u.height,colorSpace:s,bitsPerComponent:8,filter:l,index:n,alias:i}}return f}}(xr.API);var cf,Bd,Wx,Yx,Xx,Bq=function(){var r,e,t;function n(a){var o,s,u,l,f,c,d,h,p,g,b,v,y,m;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},c=null;;){switch(o=this.readUInt32(),p=(function(){var w,S;for(S=[],w=0;w<4;++w)S.push(String.fromCharCode(this.data[this.pos++]));return S}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":c&&this.animation.frames.push(c),this.pos+=4,c={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),l=this.readUInt16()||100,c.delay=1e3*f/l,c.disposeOp=this.data[this.pos++],c.blendOp=this.data[this.pos++],c.data=[];break;case"IDAT":case"fdAT":for(p==="fdAT"&&(this.pos+=4,o-=4),a=(c!=null?c.data:void 0)||this.imgData,v=0;0<=o?v<o:v>o;0<=o?++v:--v)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(u=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>u)throw new Error("More transparent colors than palette size");if((g=u-this.transparency.indexed.length)>0)for(y=0;0<=g?y<g:y>g;0<=g?++y:--y)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":d=(b=this.read(o)).indexOf(0),h=String.fromCharCode.apply(String,b.slice(0,d)),this.text[h]=String.fromCharCode.apply(String,b.slice(d+1));break;case"IEND":return c&&this.animation.frames.push(c),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(m=this.colorType)===4||m===6,s=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*s,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(a){var o,s;for(s=[],o=0;0<=a?o<a:o>a;0<=a?++o:--o)s.push(this.data[this.pos++]);return s},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(a){var o=this.pixelBitlength/8,s=new Uint8Array(this.width*this.height*o),u=0,l=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function f(c,d,h,p){var g,b,v,y,m,w,S,A,_,E,k,M,T,C,R,x,B,D,O,G,V,I=Math.ceil((l.width-c)/h),z=Math.ceil((l.height-d)/p),P=l.width==I&&l.height==z;for(C=o*I,M=P?s:new Uint8Array(C*z),w=a.length,T=0,b=0;T<z&&u<w;){switch(a[u++]){case 0:for(y=B=0;B<C;y=B+=1)M[b++]=a[u++];break;case 1:for(y=D=0;D<C;y=D+=1)g=a[u++],m=y<o?0:M[b-o],M[b++]=(g+m)%256;break;case 2:for(y=O=0;O<C;y=O+=1)g=a[u++],v=(y-y%o)/o,R=T&&M[(T-1)*C+v*o+y%o],M[b++]=(R+g)%256;break;case 3:for(y=G=0;G<C;y=G+=1)g=a[u++],v=(y-y%o)/o,m=y<o?0:M[b-o],R=T&&M[(T-1)*C+v*o+y%o],M[b++]=(g+Math.floor((m+R)/2))%256;break;case 4:for(y=V=0;V<C;y=V+=1)g=a[u++],v=(y-y%o)/o,m=y<o?0:M[b-o],T===0?R=x=0:(R=M[(T-1)*C+v*o+y%o],x=v&&M[(T-1)*C+(v-1)*o+y%o]),S=m+R-x,A=Math.abs(S-m),E=Math.abs(S-R),k=Math.abs(S-x),_=A<=E&&A<=k?m:E<=k?R:x,M[b++]=(g+_)%256;break;default:throw new Error("Invalid filter algorithm: "+a[u-1])}if(!P){var q=((d+T*p)*l.width+c)*o,F=T*C;for(y=0;y<I;y+=1){for(var U=0;U<o;U+=1)s[q++]=M[F++];q+=(h-1)*o}}T++}}return a=yq(a),l.interlaceMethod==1?(f(0,0,8,8),f(4,0,8,8),f(0,4,4,8),f(2,0,4,4),f(0,2,2,4),f(1,0,2,2),f(0,1,1,2)):f(0,0,1,1),s},n.prototype.decodePalette=function(){var a,o,s,u,l,f,c,d,h;for(s=this.palette,f=this.transparency.indexed||[],l=new Uint8Array((f.length||0)+s.length),u=0,a=0,o=c=0,d=s.length;c<d;o=c+=3)l[u++]=s[o],l[u++]=s[o+1],l[u++]=s[o+2],l[u++]=(h=f[a++])!=null?h:255;return l},n.prototype.copyToImageData=function(a,o){var s,u,l,f,c,d,h,p,g,b,v;if(u=this.colors,g=null,s=this.hasAlphaChannel,this.palette.length&&(g=(v=this._decodedPalette)!=null?v:this._decodedPalette=this.decodePalette(),u=4,s=!0),p=(l=a.data||a).length,c=g||o,f=d=0,u===1)for(;f<p;)h=g?4*o[f/4]:d,b=c[h++],l[f++]=b,l[f++]=b,l[f++]=b,l[f++]=s?c[h++]:255,d=h;else for(;f<p;)h=g?4*o[f/4]:d,l[f++]=c[h++],l[f++]=c[h++],l[f++]=c[h++],l[f++]=s?c[h++]:255,d=h},n.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var i=function(){if(Object.prototype.toString.call(Cr)==="[object Window]"){try{e=Cr.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),r=function(a){var o;if(i()===!0)return t.width=a.width,t.height=a.height,t.clearRect(0,0,a.width,a.height),t.putImageData(a,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(a){var o,s,u,l,f,c,d,h;if(this.animation){for(h=[],s=f=0,c=(d=this.animation.frames).length;f<c;s=++f)o=d[s],u=a.createImageData(o.width,o.height),l=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(u,l),o.imageData=u,h.push(o.image=r(u));return h}},n.prototype.renderFrame=function(a,o){var s,u,l;return s=(u=this.animation.frames)[o],l=u[o-1],o===0&&a.clearRect(0,0,this.width,this.height),(l!=null?l.disposeOp:void 0)===1?a.clearRect(l.xOffset,l.yOffset,l.width,l.height):(l!=null?l.disposeOp:void 0)===2&&a.putImageData(l.imageData,l.xOffset,l.yOffset),s.blendOp===0&&a.clearRect(s.xOffset,s.yOffset,s.width,s.height),a.drawImage(s.image,s.xOffset,s.yOffset)},n.prototype.animate=function(a){var o,s,u,l,f,c,d=this;return s=0,c=this.animation,l=c.numFrames,u=c.frames,f=c.numPlays,(o=function(){var h,p;if(h=s++%l,p=u[h],d.renderFrame(a,h),l>1&&s/l<f)return d.animation._timeout=setTimeout(o,p.delay)})()},n.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},n.prototype.render=function(a){var o,s;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,o=a.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(s=o.createImageData(this.width,this.height),this.copyToImageData(s,this.decodePixels()),o.putImageData(s,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function zq(r){var e=0;if(r[e++]!==71||r[e++]!==73||r[e++]!==70||r[e++]!==56||(r[e++]+1&253)!=56||r[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=r[e++]|r[e++]<<8,n=r[e++]|r[e++]<<8,i=r[e++],a=i>>7,o=1<<(7&i)+1;r[e++],r[e++];var s=null,u=null;a&&(s=e,u=o,e+=3*o);var l=!0,f=[],c=0,d=null,h=0,p=null;for(this.width=t,this.height=n;l&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(r[e]!==11||r[e+1]==78&&r[e+2]==69&&r[e+3]==84&&r[e+4]==83&&r[e+5]==67&&r[e+6]==65&&r[e+7]==80&&r[e+8]==69&&r[e+9]==50&&r[e+10]==46&&r[e+11]==48&&r[e+12]==3&&r[e+13]==1&&r[e+16]==0)e+=14,p=r[e++]|r[e++]<<8,e++;else for(e+=12;;){if(!((T=r[e++])>=0))throw Error("Invalid block size");if(T===0)break;e+=T}break;case 249:if(r[e++]!==4||r[e+4]!==0)throw new Error("Invalid graphics extension block.");var g=r[e++];c=r[e++]|r[e++]<<8,d=r[e++],!(1&g)&&(d=null),h=g>>2&7,e++;break;case 254:for(;;){if(!((T=r[e++])>=0))throw Error("Invalid block size");if(T===0)break;e+=T}break;default:throw new Error("Unknown graphic control label: 0x"+r[e-1].toString(16))}break;case 44:var b=r[e++]|r[e++]<<8,v=r[e++]|r[e++]<<8,y=r[e++]|r[e++]<<8,m=r[e++]|r[e++]<<8,w=r[e++],S=w>>6&1,A=1<<(7&w)+1,_=s,E=u,k=!1;w>>7&&(k=!0,_=e,E=A,e+=3*A);var M=e;for(e++;;){var T;if(!((T=r[e++])>=0))throw Error("Invalid block size");if(T===0)break;e+=T}f.push({x:b,y:v,width:y,height:m,has_local_palette:k,palette_offset:_,palette_size:E,data_offset:M,data_length:e-M,transparent_index:d,interlaced:!!S,delay:c,disposal:h});break;case 59:l=!1;break;default:throw new Error("Unknown gif block: 0x"+r[e-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return p},this.frameInfo=function(C){if(C<0||C>=f.length)throw new Error("Frame index out of range.");return f[C]},this.decodeAndBlitFrameBGRA=function(C,R){var x=this.frameInfo(C),B=x.width*x.height,D=new Uint8Array(B);Kx(r,x.data_offset,D,B);var O=x.palette_offset,G=x.transparent_index;G===null&&(G=256);var V=x.width,I=t-V,z=V,P=4*(x.y*t+x.x),q=4*((x.y+x.height)*t+x.x),F=P,U=4*I;x.interlaced===!0&&(U+=4*t*7);for(var W=8,X=0,te=D.length;X<te;++X){var ne=D[X];if(z===0&&(z=V,(F+=U)>=q&&(U=4*I+4*t*(W-1),F=P+(V+I)*(W<<1),W>>=1)),ne===G)F+=4;else{var he=r[O+3*ne],ve=r[O+3*ne+1],Ce=r[O+3*ne+2];R[F++]=Ce,R[F++]=ve,R[F++]=he,R[F++]=255}--z}},this.decodeAndBlitFrameRGBA=function(C,R){var x=this.frameInfo(C),B=x.width*x.height,D=new Uint8Array(B);Kx(r,x.data_offset,D,B);var O=x.palette_offset,G=x.transparent_index;G===null&&(G=256);var V=x.width,I=t-V,z=V,P=4*(x.y*t+x.x),q=4*((x.y+x.height)*t+x.x),F=P,U=4*I;x.interlaced===!0&&(U+=4*t*7);for(var W=8,X=0,te=D.length;X<te;++X){var ne=D[X];if(z===0&&(z=V,(F+=U)>=q&&(U=4*I+4*t*(W-1),F=P+(V+I)*(W<<1),W>>=1)),ne===G)F+=4;else{var he=r[O+3*ne],ve=r[O+3*ne+1],Ce=r[O+3*ne+2];R[F++]=he,R[F++]=ve,R[F++]=Ce,R[F++]=255}--z}}}function Kx(r,e,t,n){for(var i=r[e++],a=1<<i,o=a+1,s=o+1,u=i+1,l=(1<<u)-1,f=0,c=0,d=0,h=r[e++],p=new Int32Array(4096),g=null;;){for(;f<16&&h!==0;)c|=r[e++]<<f,f+=8,h===1?h=r[e++]:--h;if(f<u)break;var b=c&l;if(c>>=u,f-=u,b!==a){if(b===o)break;for(var v=b<s?b:g,y=0,m=v;m>a;)m=p[m]>>8,++y;var w=m;if(d+y+(v!==b?1:0)>n)return void On.log("Warning, gif stream longer than expected.");t[d++]=w;var S=d+=y;for(v!==b&&(t[d++]=w),m=v;y--;)m=p[m],t[--S]=255&m,m>>=8;g!==null&&s<4096&&(p[s++]=g<<8|w,s>=l+1&&u<12&&(++u,l=l<<1|1)),g=b}else s=o+1,l=(1<<(u=i+1))-1,g=null}return d!==n&&On.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function _m(r){var e,t,n,i,a,o=Math.floor,s=new Array(64),u=new Array(64),l=new Array(64),f=new Array(64),c=new Array(65535),d=new Array(65535),h=new Array(64),p=new Array(64),g=[],b=0,v=7,y=new Array(64),m=new Array(64),w=new Array(64),S=new Array(256),A=new Array(2048),_=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],C=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],x=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],B=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function D(P,q){for(var F=0,U=0,W=new Array,X=1;X<=16;X++){for(var te=1;te<=P[X];te++)W[q[U]]=[],W[q[U]][0]=F,W[q[U]][1]=X,U++,F++;F*=2}return W}function O(P){for(var q=P[0],F=P[1]-1;F>=0;)q&1<<F&&(b|=1<<v),F--,--v<0&&(b==255?(G(255),G(0)):G(b),v=7,b=0)}function G(P){g.push(P)}function V(P){G(P>>8&255),G(255&P)}function I(P,q,F,U,W){for(var X,te=W[0],ne=W[240],he=function(J,fe){var we,ge,me,ue,ce,oe,Ae,Te,Ge,Fe,Re=0;for(Ge=0;Ge<8;++Ge){we=J[Re],ge=J[Re+1],me=J[Re+2],ue=J[Re+3],ce=J[Re+4],oe=J[Re+5],Ae=J[Re+6];var ze=we+(Te=J[Re+7]),Ie=we-Te,Ve=ge+Ae,We=ge-Ae,Ze=me+oe,at=me-oe,ft=ue+ce,wt=ue-ce,dt=ze+ft,vt=ze-ft,Et=Ve+Ze,Mt=Ve-Ze;J[Re]=dt+Et,J[Re+4]=dt-Et;var mt=.707106781*(Mt+vt);J[Re+2]=vt+mt,J[Re+6]=vt-mt;var Dt=.382683433*((dt=wt+at)-(Mt=We+Ie)),Lt=.5411961*dt+Dt,Tt=1.306562965*Mt+Dt,nr=.707106781*(Et=at+We),$t=Ie+nr,pt=Ie-nr;J[Re+5]=pt+Lt,J[Re+3]=pt-Lt,J[Re+1]=$t+Tt,J[Re+7]=$t-Tt,Re+=8}for(Re=0,Ge=0;Ge<8;++Ge){we=J[Re],ge=J[Re+8],me=J[Re+16],ue=J[Re+24],ce=J[Re+32],oe=J[Re+40],Ae=J[Re+48];var hr=we+(Te=J[Re+56]),Rt=we-Te,Bt=ge+Ae,ur=ge-Ae,nt=me+oe,Xe=me-oe,ct=ue+ce,zt=ue-ce,rr=hr+ct,Zt=hr-ct,br=Bt+nt,Gr=Bt-nt;J[Re]=rr+br,J[Re+32]=rr-br;var Rr=.707106781*(Gr+Zt);J[Re+16]=Zt+Rr,J[Re+48]=Zt-Rr;var Fr=.382683433*((rr=zt+Xe)-(Gr=ur+Rt)),gr=.5411961*rr+Fr,Zr=1.306562965*Gr+Fr,gn=.707106781*(br=Xe+ur),Hn=Rt+gn,jn=Rt-gn;J[Re+40]=jn+gr,J[Re+24]=jn-gr,J[Re+8]=Hn+Zr,J[Re+56]=Hn-Zr,Re++}for(Ge=0;Ge<64;++Ge)Fe=J[Ge]*fe[Ge],h[Ge]=Fe>0?Fe+.5|0:Fe-.5|0;return h}(P,q),ve=0;ve<64;++ve)p[_[ve]]=he[ve];var Ce=p[0]-F;F=p[0],Ce==0?O(U[0]):(O(U[d[X=32767+Ce]]),O(c[X]));for(var Le=63;Le>0&&p[Le]==0;)Le--;if(Le==0)return O(te),F;for(var K,le=1;le<=Le;){for(var Z=le;p[le]==0&&le<=Le;)++le;var ie=le-Z;if(ie>=16){K=ie>>4;for(var re=1;re<=K;++re)O(ne);ie&=15}X=32767+p[le],O(W[(ie<<4)+d[X]]),O(c[X]),le++}return Le!=63&&O(te),F}function z(P){P=Math.min(Math.max(P,1),100),a!=P&&(function(q){for(var F=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],U=0;U<64;U++){var W=o((F[U]*q+50)/100);W=Math.min(Math.max(W,1),255),s[_[U]]=W}for(var X=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],te=0;te<64;te++){var ne=o((X[te]*q+50)/100);ne=Math.min(Math.max(ne,1),255),u[_[te]]=ne}for(var he=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ve=0,Ce=0;Ce<8;Ce++)for(var Le=0;Le<8;Le++)l[ve]=1/(s[_[ve]]*he[Ce]*he[Le]*8),f[ve]=1/(u[_[ve]]*he[Ce]*he[Le]*8),ve++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),a=P)}this.encode=function(P,q){q&&z(q),g=new Array,b=0,v=7,V(65496),V(65504),V(16),G(74),G(70),G(73),G(70),G(0),G(1),G(1),G(0),V(1),V(1),G(0),G(0),function(){V(65499),V(132),G(0);for(var ge=0;ge<64;ge++)G(s[ge]);G(1);for(var me=0;me<64;me++)G(u[me])}(),function(ge,me){V(65472),V(17),G(8),V(me),V(ge),G(3),G(1),G(17),G(0),G(2),G(17),G(1),G(3),G(17),G(1)}(P.width,P.height),function(){V(65476),V(418),G(0);for(var ge=0;ge<16;ge++)G(E[ge+1]);for(var me=0;me<=11;me++)G(k[me]);G(16);for(var ue=0;ue<16;ue++)G(M[ue+1]);for(var ce=0;ce<=161;ce++)G(T[ce]);G(1);for(var oe=0;oe<16;oe++)G(C[oe+1]);for(var Ae=0;Ae<=11;Ae++)G(R[Ae]);G(17);for(var Te=0;Te<16;Te++)G(x[Te+1]);for(var Ge=0;Ge<=161;Ge++)G(B[Ge])}(),V(65498),V(12),G(3),G(1),G(0),G(2),G(17),G(3),G(17),G(0),G(63),G(0);var F=0,U=0,W=0;b=0,v=7,this.encode.displayName="_encode_";for(var X,te,ne,he,ve,Ce,Le,K,le,Z=P.data,ie=P.width,re=P.height,J=4*ie,fe=0;fe<re;){for(X=0;X<J;){for(ve=J*fe+X,Le=-1,K=0,le=0;le<64;le++)Ce=ve+(K=le>>3)*J+(Le=4*(7&le)),fe+K>=re&&(Ce-=J*(fe+1+K-re)),X+Le>=J&&(Ce-=X+Le-J+4),te=Z[Ce++],ne=Z[Ce++],he=Z[Ce++],y[le]=(A[te]+A[ne+256>>0]+A[he+512>>0]>>16)-128,m[le]=(A[te+768>>0]+A[ne+1024>>0]+A[he+1280>>0]>>16)-128,w[le]=(A[te+1280>>0]+A[ne+1536>>0]+A[he+1792>>0]>>16)-128;F=I(y,l,F,e,n),U=I(m,f,U,t,i),W=I(w,f,W,t,i),X+=32}fe+=8}if(v>=0){var we=[];we[1]=v+1,we[0]=(1<<v+1)-1,O(we)}return V(65497),new Uint8Array(g)},r=r||50,function(){for(var P=String.fromCharCode,q=0;q<256;q++)S[q]=P(q)}(),e=D(E,k),t=D(C,R),n=D(M,T),i=D(x,B),function(){for(var P=1,q=2,F=1;F<=15;F++){for(var U=P;U<q;U++)d[32767+U]=F,c[32767+U]=[],c[32767+U][1]=F,c[32767+U][0]=U;for(var W=-(q-1);W<=-P;W++)d[32767+W]=F,c[32767+W]=[],c[32767+W][1]=F,c[32767+W][0]=q-1+W;P<<=1,q<<=1}}(),function(){for(var P=0;P<256;P++)A[P]=19595*P,A[P+256>>0]=38470*P,A[P+512>>0]=7471*P+32768,A[P+768>>0]=-11059*P,A[P+1024>>0]=-21709*P,A[P+1280>>0]=32768*P+8421375,A[P+1536>>0]=-27439*P,A[P+1792>>0]=-5329*P}(),z(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function bo(r,e){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Zx(r){function e(E){if(!E)throw Error("assert :P")}function t(E,k,M){for(var T=0;4>T;T++)if(E[k+T]!=M.charCodeAt(T))return!0;return!1}function n(E,k,M,T,C){for(var R=0;R<C;R++)E[k+R]=M[T+R]}function i(E,k,M,T){for(var C=0;C<T;C++)E[k+C]=M}function a(E){return new Int32Array(E)}function o(E,k){for(var M=[],T=0;T<E;T++)M.push(new k);return M}function s(E,k){var M=[];return function T(C,R,x){for(var B=x[R],D=0;D<B&&(C.push(x.length>R+1?[]:new k),!(x.length<R+1));D++)T(C[D],R+1,x)}(M,0,E),M}var u=function(){var E=this;function k(L,H){for(var Q=1<<H-1>>>0;L&Q;)Q>>>=1;return Q?(L&Q-1)+Q:L}function M(L,H,Q,se,be){e(!(se%Q));do L[H+(se-=Q)]=be;while(0<se)}function T(L,H,Q,se,be){if(e(2328>=be),512>=be)var _e=a(512);else if((_e=a(be))==null)return 0;return function(Se,Ee,ke,Pe,$e,et){var tt,Ye,_t=Ee,ut=1<<ke,Ue=a(16),je=a(16);for(e($e!=0),e(Pe!=null),e(Se!=null),e(0<ke),Ye=0;Ye<$e;++Ye){if(15<Pe[Ye])return 0;++Ue[Pe[Ye]]}if(Ue[0]==$e)return 0;for(je[1]=0,tt=1;15>tt;++tt){if(Ue[tt]>1<<tt)return 0;je[tt+1]=je[tt]+Ue[tt]}for(Ye=0;Ye<$e;++Ye)tt=Pe[Ye],0<Pe[Ye]&&(et[je[tt]++]=Ye);if(je[15]==1)return(Pe=new C).g=0,Pe.value=et[0],M(Se,_t,1,ut,Pe),ut;var yt,St=-1,bt=ut-1,Jt=0,Ut=1,_r=1,Wt=1<<ke;for(Ye=0,tt=1,$e=2;tt<=ke;++tt,$e<<=1){if(Ut+=_r<<=1,0>(_r-=Ue[tt]))return 0;for(;0<Ue[tt];--Ue[tt])(Pe=new C).g=tt,Pe.value=et[Ye++],M(Se,_t+Jt,$e,Wt,Pe),Jt=k(Jt,tt)}for(tt=ke+1,$e=2;15>=tt;++tt,$e<<=1){if(Ut+=_r<<=1,0>(_r-=Ue[tt]))return 0;for(;0<Ue[tt];--Ue[tt]){if(Pe=new C,(Jt&bt)!=St){for(_t+=Wt,yt=1<<(St=tt)-ke;15>St&&!(0>=(yt-=Ue[St]));)++St,yt<<=1;ut+=Wt=1<<(yt=St-ke),Se[Ee+(St=Jt&bt)].g=yt+ke,Se[Ee+St].value=_t-Ee-St}Pe.g=tt-ke,Pe.value=et[Ye++],M(Se,_t+(Jt>>ke),$e,Wt,Pe),Jt=k(Jt,tt)}}return Ut!=2*je[15]-1?0:ut}(L,H,Q,se,be,_e)}function C(){this.value=this.g=0}function R(){this.value=this.g=0}function x(){this.G=o(5,C),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Ui,R)}function B(L,H,Q,se){e(L!=null),e(H!=null),e(2147483648>se),L.Ca=254,L.I=0,L.b=-8,L.Ka=0,L.oa=H,L.pa=Q,L.Jd=H,L.Yc=Q+se,L.Zc=4<=se?Q+se-4+1:Q,X(L)}function D(L,H){for(var Q=0;0<H--;)Q|=ne(L,128)<<H;return Q}function O(L,H){var Q=D(L,H);return te(L)?-Q:Q}function G(L,H,Q,se){var be,_e=0;for(e(L!=null),e(H!=null),e(4294967288>se),L.Sb=se,L.Ra=0,L.u=0,L.h=0,4<se&&(se=4),be=0;be<se;++be)_e+=H[Q+be]<<8*be;L.Ra=_e,L.bb=se,L.oa=H,L.pa=Q}function V(L){for(;8<=L.u&&L.bb<L.Sb;)L.Ra>>>=8,L.Ra+=L.oa[L.pa+L.bb]<<ha-8>>>0,++L.bb,L.u-=8;F(L)&&(L.h=1,L.u=0)}function I(L,H){if(e(0<=H),!L.h&&H<=qo){var Q=q(L)&Ea[H];return L.u+=H,V(L),Q}return L.h=1,L.u=0}function z(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function q(L){return L.Ra>>>(L.u&ha-1)>>>0}function F(L){return e(L.bb<=L.Sb),L.h||L.bb==L.Sb&&L.u>ha}function U(L,H){L.u=H,L.h=F(L)}function W(L){L.u>=Qs&&(e(L.u>=Qs),V(L))}function X(L){e(L!=null&&L.oa!=null),L.pa<L.Zc?(L.I=(L.oa[L.pa++]|L.I<<8)>>>0,L.b+=8):(e(L!=null&&L.oa!=null),L.pa<L.Yc?(L.b+=8,L.I=L.oa[L.pa++]|L.I<<8):L.Ka?L.b=0:(L.I<<=8,L.b+=8,L.Ka=1))}function te(L){return D(L,1)}function ne(L,H){var Q=L.Ca;0>L.b&&X(L);var se=L.b,be=Q*H>>>8,_e=(L.I>>>se>be)+0;for(_e?(Q-=be,L.I-=be+1<<se>>>0):Q=be+1,se=Q,be=0;256<=se;)be+=8,se>>=8;return se=7^be+ki[se],L.b-=se,L.Ca=(Q<<se)-1,_e}function he(L,H,Q){L[H+0]=Q>>24&255,L[H+1]=Q>>16&255,L[H+2]=Q>>8&255,L[H+3]=Q>>0&255}function ve(L,H){return L[H+0]<<0|L[H+1]<<8}function Ce(L,H){return ve(L,H)|L[H+2]<<16}function Le(L,H){return ve(L,H)|ve(L,H+2)<<16}function K(L,H){var Q=1<<H;return e(L!=null),e(0<H),L.X=a(Q),L.X==null?0:(L.Mb=32-H,L.Xa=H,1)}function le(L,H){e(L!=null),e(H!=null),e(L.Xa==H.Xa),n(H.X,0,L.X,0,1<<H.Xa)}function Z(){this.X=[],this.Xa=this.Mb=0}function ie(L,H,Q,se){e(Q!=null),e(se!=null);var be=Q[0],_e=se[0];return be==0&&(be=(L*_e+H/2)/H),_e==0&&(_e=(H*be+L/2)/L),0>=be||0>=_e?0:(Q[0]=be,se[0]=_e,1)}function re(L,H){return L+(1<<H)-1>>>H}function J(L,H){return((4278255360&L)+(4278255360&H)>>>0&4278255360)+((16711935&L)+(16711935&H)>>>0&16711935)>>>0}function fe(L,H){E[H]=function(Q,se,be,_e,Se,Ee,ke){var Pe;for(Pe=0;Pe<Se;++Pe){var $e=E[L](Ee[ke+Pe-1],be,_e+Pe);Ee[ke+Pe]=J(Q[se+Pe],$e)}}}function we(){this.ud=this.hd=this.jd=0}function ge(L,H){return((4278124286&(L^H))>>>1)+(L&H)>>>0}function me(L){return 0<=L&&256>L?L:0>L?0:255<L?255:void 0}function ue(L,H){return me(L+(L-H+.5>>1))}function ce(L,H,Q){return Math.abs(H-Q)-Math.abs(L-Q)}function oe(L,H,Q,se,be,_e,Se){for(se=_e[Se-1],Q=0;Q<be;++Q)_e[Se+Q]=se=J(L[H+Q],se)}function Ae(L,H,Q,se,be){var _e;for(_e=0;_e<Q;++_e){var Se=L[H+_e],Ee=Se>>8&255,ke=16711935&(ke=(ke=16711935&Se)+((Ee<<16)+Ee));se[be+_e]=(4278255360&Se)+ke>>>0}}function Te(L,H){H.jd=L>>0&255,H.hd=L>>8&255,H.ud=L>>16&255}function Ge(L,H,Q,se,be,_e){var Se;for(Se=0;Se<se;++Se){var Ee=H[Q+Se],ke=Ee>>>8,Pe=Ee,$e=255&($e=($e=Ee>>>16)+((L.jd<<24>>24)*(ke<<24>>24)>>>5));Pe=255&(Pe=(Pe=Pe+((L.hd<<24>>24)*(ke<<24>>24)>>>5))+((L.ud<<24>>24)*($e<<24>>24)>>>5)),be[_e+Se]=(4278255360&Ee)+($e<<16)+Pe}}function Fe(L,H,Q,se,be){E[H]=function(_e,Se,Ee,ke,Pe,$e,et,tt,Ye){for(ke=et;ke<tt;++ke)for(et=0;et<Ye;++et)Pe[$e++]=be(Ee[se(_e[Se++])])},E[L]=function(_e,Se,Ee,ke,Pe,$e,et){var tt=8>>_e.b,Ye=_e.Ea,_t=_e.K[0],ut=_e.w;if(8>tt)for(_e=(1<<_e.b)-1,ut=(1<<tt)-1;Se<Ee;++Se){var Ue,je=0;for(Ue=0;Ue<Ye;++Ue)Ue&_e||(je=se(ke[Pe++])),$e[et++]=be(_t[je&ut]),je>>=tt}else E["VP8LMapColor"+Q](ke,Pe,_t,ut,$e,et,Se,Ee,Ye)}}function Re(L,H,Q,se,be){for(Q=H+Q;H<Q;){var _e=L[H++];se[be++]=_e>>16&255,se[be++]=_e>>8&255,se[be++]=_e>>0&255}}function ze(L,H,Q,se,be){for(Q=H+Q;H<Q;){var _e=L[H++];se[be++]=_e>>16&255,se[be++]=_e>>8&255,se[be++]=_e>>0&255,se[be++]=_e>>24&255}}function Ie(L,H,Q,se,be){for(Q=H+Q;H<Q;){var _e=(Se=L[H++])>>16&240|Se>>12&15,Se=Se>>0&240|Se>>28&15;se[be++]=_e,se[be++]=Se}}function Ve(L,H,Q,se,be){for(Q=H+Q;H<Q;){var _e=(Se=L[H++])>>16&248|Se>>13&7,Se=Se>>5&224|Se>>3&31;se[be++]=_e,se[be++]=Se}}function We(L,H,Q,se,be){for(Q=H+Q;H<Q;){var _e=L[H++];se[be++]=_e>>0&255,se[be++]=_e>>8&255,se[be++]=_e>>16&255}}function Ze(L,H,Q,se,be,_e){if(_e==0)for(Q=H+Q;H<Q;)he(se,((_e=L[H++])[0]>>24|_e[1]>>8&65280|_e[2]<<8&16711680|_e[3]<<24)>>>0),be+=32;else n(se,be,L,H,Q)}function at(L,H){E[H][0]=E[L+"0"],E[H][1]=E[L+"1"],E[H][2]=E[L+"2"],E[H][3]=E[L+"3"],E[H][4]=E[L+"4"],E[H][5]=E[L+"5"],E[H][6]=E[L+"6"],E[H][7]=E[L+"7"],E[H][8]=E[L+"8"],E[H][9]=E[L+"9"],E[H][10]=E[L+"10"],E[H][11]=E[L+"11"],E[H][12]=E[L+"12"],E[H][13]=E[L+"13"],E[H][14]=E[L+"0"],E[H][15]=E[L+"0"]}function ft(L){return L==Eg||L==Cg||L==ud||L==Ag}function wt(){this.eb=[],this.size=this.A=this.fb=0}function dt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function vt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new wt,this.f.kb=new dt,this.sd=null}function Et(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Mt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function mt(L){return alert("todo:WebPSamplerProcessPlane"),L.T}function Dt(L,H){var Q=L.T,se=H.ba.f.RGBA,be=se.eb,_e=se.fb+L.ka*se.A,Se=Qa[H.ba.S],Ee=L.y,ke=L.O,Pe=L.f,$e=L.N,et=L.ea,tt=L.W,Ye=H.cc,_t=H.dc,ut=H.Mc,Ue=H.Nc,je=L.ka,yt=L.ka+L.T,St=L.U,bt=St+1>>1;for(je==0?Se(Ee,ke,null,null,Pe,$e,et,tt,Pe,$e,et,tt,be,_e,null,null,St):(Se(H.ec,H.fc,Ee,ke,Ye,_t,ut,Ue,Pe,$e,et,tt,be,_e-se.A,be,_e,St),++Q);je+2<yt;je+=2)Ye=Pe,_t=$e,ut=et,Ue=tt,$e+=L.Rc,tt+=L.Rc,_e+=2*se.A,Se(Ee,(ke+=2*L.fa)-L.fa,Ee,ke,Ye,_t,ut,Ue,Pe,$e,et,tt,be,_e-se.A,be,_e,St);return ke+=L.fa,L.j+yt<L.o?(n(H.ec,H.fc,Ee,ke,St),n(H.cc,H.dc,Pe,$e,bt),n(H.Mc,H.Nc,et,tt,bt),Q--):1&yt||Se(Ee,ke,null,null,Pe,$e,et,tt,Pe,$e,et,tt,be,_e+se.A,null,null,St),Q}function Lt(L,H,Q){var se=L.F,be=[L.J];if(se!=null){var _e=L.U,Se=H.ba.S,Ee=Se==sd||Se==ud;H=H.ba.f.RGBA;var ke=[0],Pe=L.ka;ke[0]=L.T,L.Kb&&(Pe==0?--ke[0]:(--Pe,be[0]-=L.width),L.j+L.ka+L.T==L.o&&(ke[0]=L.o-L.j-Pe));var $e=H.eb;Pe=H.fb+Pe*H.A,L=rd(se,be[0],L.width,_e,ke,$e,Pe+(Ee?0:3),H.A),e(Q==ke),L&&ft(Se)&&tu($e,Pe,Ee,_e,ke,H.A)}return 0}function Tt(L){var H=L.ma,Q=H.ba.S,se=11>Q,be=Q==ad||Q==od||Q==sd||Q==Sg||Q==12||ft(Q);if(H.memory=null,H.Ib=null,H.Jb=null,H.Nd=null,!Ka(H.Oa,L,be?11:12))return 0;if(be&&ft(Q)&&gt(),L.da)alert("todo:use_scaling");else{if(se){if(H.Ib=mt,L.Kb){if(Q=L.U+1>>1,H.memory=a(L.U+2*Q),H.memory==null)return 0;H.ec=H.memory,H.fc=0,H.cc=H.ec,H.dc=H.fc+L.U,H.Mc=H.cc,H.Nc=H.dc+Q,H.Ib=Dt,gt()}}else alert("todo:EmitYUV");be&&(H.Jb=Lt,se&&Ke())}if(se&&!T5){for(L=0;256>L;++L)dM[L]=89858*(L-128)+fd>>ld,gM[L]=-22014*(L-128)+fd,vM[L]=-45773*(L-128),pM[L]=113618*(L-128)+fd>>ld;for(L=Sc;L<Lg;++L)H=76283*(L-16)+fd>>ld,mM[L-Sc]=ca(H,255),yM[L-Sc]=ca(H+8>>4,15);T5=1}return 1}function nr(L){var H=L.ma,Q=L.U,se=L.T;return e(!(1&L.ka)),0>=Q||0>=se?0:(Q=H.Ib(L,H),H.Jb!=null&&H.Jb(L,H,Q),H.Dc+=Q,1)}function $t(L){L.ma.memory=null}function pt(L,H,Q,se){return I(L,8)!=47?0:(H[0]=I(L,14)+1,Q[0]=I(L,14)+1,se[0]=I(L,1),I(L,3)!=0?0:!L.h)}function hr(L,H){if(4>L)return L+1;var Q=L-2>>1;return(2+(1&L)<<Q)+I(H,Q)+1}function Rt(L,H){return 120<H?H-120:1<=(Q=((Q=J4[H-1])>>4)*L+(8-(15&Q)))?Q:1;var Q}function Bt(L,H,Q){var se=q(Q),be=L[H+=255&se].g-8;return 0<be&&(U(Q,Q.u+8),se=q(Q),H+=L[H].value,H+=se&(1<<be)-1),U(Q,Q.u+L[H].g),L[H].value}function ur(L,H,Q){return Q.g+=L.g,Q.value+=L.value<<H>>>0,e(8>=Q.g),L.g}function nt(L,H,Q){var se=L.xc;return e((H=se==0?0:L.vc[L.md*(Q>>se)+(H>>se)])<L.Wb),L.Ya[H]}function Xe(L,H,Q,se){var be=L.ab,_e=L.c*H,Se=L.C;H=Se+H;var Ee=Q,ke=se;for(se=L.Ta,Q=L.Ua;0<be--;){var Pe=L.gc[be],$e=Se,et=H,tt=Ee,Ye=ke,_t=(ke=se,Ee=Q,Pe.Ea);switch(e($e<et),e(et<=Pe.nc),Pe.hc){case 2:eu(tt,Ye,(et-$e)*_t,ke,Ee);break;case 0:var ut=$e,Ue=et,je=ke,yt=Ee,St=(Wt=Pe).Ea;ut==0&&(Js(tt,Ye,null,null,1,je,yt),oe(tt,Ye+1,0,0,St-1,je,yt+1),Ye+=St,yt+=St,++ut);for(var bt=1<<Wt.b,Jt=bt-1,Ut=re(St,Wt.b),_r=Wt.K,Wt=Wt.w+(ut>>Wt.b)*Ut;ut<Ue;){var dn=_r,bn=Wt,nn=1;for(Go(tt,Ye,je,yt-St,1,je,yt);nn<St;){var Xr=(nn&~Jt)+bt;Xr>St&&(Xr=St),(0,Uo[dn[bn++]>>8&15])(tt,Ye+ +nn,je,yt+nn-St,Xr-nn,je,yt+nn),nn=Xr}Ye+=St,yt+=St,++ut&Jt||(Wt+=Ut)}et!=Pe.nc&&n(ke,Ee-_t,ke,Ee+(et-$e-1)*_t,_t);break;case 1:for(_t=tt,Ue=Ye,St=(tt=Pe.Ea)-(yt=tt&~(je=(Ye=1<<Pe.b)-1)),ut=re(tt,Pe.b),bt=Pe.K,Pe=Pe.w+($e>>Pe.b)*ut;$e<et;){for(Jt=bt,Ut=Pe,_r=new we,Wt=Ue+yt,dn=Ue+tt;Ue<Wt;)Te(Jt[Ut++],_r),Ji(_r,_t,Ue,Ye,ke,Ee),Ue+=Ye,Ee+=Ye;Ue<dn&&(Te(Jt[Ut++],_r),Ji(_r,_t,Ue,St,ke,Ee),Ue+=St,Ee+=St),++$e&je||(Pe+=ut)}break;case 3:if(tt==ke&&Ye==Ee&&0<Pe.b){for(Ue=ke,tt=_t=Ee+(et-$e)*_t-(yt=(et-$e)*re(Pe.Ea,Pe.b)),Ye=ke,je=Ee,ut=[],yt=(St=yt)-1;0<=yt;--yt)ut[yt]=Ye[je+yt];for(yt=St-1;0<=yt;--yt)Ue[tt+yt]=ut[yt];Ba(Pe,$e,et,ke,_t,ke,Ee)}else Ba(Pe,$e,et,tt,Ye,ke,Ee)}Ee=se,ke=Q}ke!=Q&&n(se,Q,Ee,ke,_e)}function ct(L,H){var Q=L.V,se=L.Ba+L.c*L.C,be=H-L.C;if(e(H<=L.l.o),e(16>=be),0<be){var _e=L.l,Se=L.Ta,Ee=L.Ua,ke=_e.width;if(Xe(L,be,Q,se),be=Ee=[Ee],e((Q=L.C)<(se=H)),e(_e.v<_e.va),se>_e.o&&(se=_e.o),Q<_e.j){var Pe=_e.j-Q;Q=_e.j,be[0]+=Pe*ke}if(Q>=se?Q=0:(be[0]+=4*_e.v,_e.ka=Q-_e.j,_e.U=_e.va-_e.v,_e.T=se-Q,Q=1),Q){if(Ee=Ee[0],11>(Q=L.ca).S){var $e=Q.f.RGBA,et=(se=Q.S,be=_e.U,_e=_e.T,Pe=$e.eb,$e.A),tt=_e;for($e=$e.fb+L.Ma*$e.A;0<tt--;){var Ye=Se,_t=Ee,ut=be,Ue=Pe,je=$e;switch(se){case id:Ca(Ye,_t,ut,Ue,je);break;case ad:Ne(Ye,_t,ut,Ue,je);break;case Eg:Ne(Ye,_t,ut,Ue,je),tu(Ue,je,0,ut,1,0);break;case m5:it(Ye,_t,ut,Ue,je);break;case od:Ze(Ye,_t,ut,Ue,je,1);break;case Cg:Ze(Ye,_t,ut,Ue,je,1),tu(Ue,je,0,ut,1,0);break;case sd:Ze(Ye,_t,ut,Ue,je,0);break;case ud:Ze(Ye,_t,ut,Ue,je,0),tu(Ue,je,1,ut,1,0);break;case Sg:qe(Ye,_t,ut,Ue,je);break;case Ag:qe(Ye,_t,ut,Ue,je),Zl(Ue,je,ut,1,0);break;case y5:Qe(Ye,_t,ut,Ue,je);break;default:e(0)}Ee+=ke,$e+=et}L.Ma+=_e}else alert("todo:EmitRescaledRowsYUVA");e(L.Ma<=Q.height)}}L.C=H,e(L.C<=L.i)}function zt(L){var H;if(0<L.ua)return 0;for(H=0;H<L.Wb;++H){var Q=L.Ya[H].G,se=L.Ya[H].H;if(0<Q[1][se[1]+0].g||0<Q[2][se[2]+0].g||0<Q[3][se[3]+0].g)return 0}return 1}function rr(L,H,Q,se,be,_e){if(L.Z!=0){var Se=L.qd,Ee=L.rd;for(e(nu[L.Z]!=null);H<Q;++H)nu[L.Z](Se,Ee,se,be,se,be,_e),Se=se,Ee=be,be+=_e;L.qd=Se,L.rd=Ee}}function Zt(L,H){var Q=L.l.ma,se=Q.Z==0||Q.Z==1?L.l.j:L.C;if(se=L.C<se?se:L.C,e(H<=L.l.o),H>se){var be=L.l.width,_e=Q.ca,Se=Q.tb+be*se,Ee=L.V,ke=L.Ba+L.c*se,Pe=L.gc;e(L.ab==1),e(Pe[0].hc==3),Qu(Pe[0],se,H,Ee,ke,_e,Se),rr(Q,se,H,_e,Se,be)}L.C=L.Ma=H}function br(L,H,Q,se,be,_e,Se){var Ee=L.$/se,ke=L.$%se,Pe=L.m,$e=L.s,et=Q+L.$,tt=et;be=Q+se*be;var Ye=Q+se*_e,_t=280+$e.ua,ut=L.Pb?Ee:16777216,Ue=0<$e.ua?$e.Wa:null,je=$e.wc,yt=et<Ye?nt($e,ke,Ee):null;e(L.C<_e),e(Ye<=be);var St=!1;e:for(;;){for(;St||et<Ye;){var bt=0;if(Ee>=ut){var Jt=et-Q;e((ut=L).Pb),ut.wd=ut.m,ut.xd=Jt,0<ut.s.ua&&le(ut.s.Wa,ut.s.vb),ut=Ee+tM}if(ke&je||(yt=nt($e,ke,Ee)),e(yt!=null),yt.Qb&&(H[et]=yt.qb,St=!0),!St)if(W(Pe),yt.jc){bt=Pe,Jt=H;var Ut=et,_r=yt.pd[q(bt)&Ui-1];e(yt.jc),256>_r.g?(U(bt,bt.u+_r.g),Jt[Ut]=_r.value,bt=0):(U(bt,bt.u+_r.g-256),e(256<=_r.value),bt=_r.value),bt==0&&(St=!0)}else bt=Bt(yt.G[0],yt.H[0],Pe);if(Pe.h)break;if(St||256>bt){if(!St)if(yt.nd)H[et]=(yt.qb|bt<<8)>>>0;else{if(W(Pe),St=Bt(yt.G[1],yt.H[1],Pe),W(Pe),Jt=Bt(yt.G[2],yt.H[2],Pe),Ut=Bt(yt.G[3],yt.H[3],Pe),Pe.h)break;H[et]=(Ut<<24|St<<16|bt<<8|Jt)>>>0}if(St=!1,++et,++ke>=se&&(ke=0,++Ee,Se!=null&&Ee<=_e&&!(Ee%16)&&Se(L,Ee),Ue!=null))for(;tt<et;)bt=H[tt++],Ue.X[(506832829*bt&4294967295)>>>Ue.Mb]=bt}else if(280>bt){if(bt=hr(bt-256,Pe),Jt=Bt(yt.G[4],yt.H[4],Pe),W(Pe),Jt=Rt(se,Jt=hr(Jt,Pe)),Pe.h)break;if(et-Q<Jt||be-et<bt)break e;for(Ut=0;Ut<bt;++Ut)H[et+Ut]=H[et+Ut-Jt];for(et+=bt,ke+=bt;ke>=se;)ke-=se,++Ee,Se!=null&&Ee<=_e&&!(Ee%16)&&Se(L,Ee);if(e(et<=be),ke&je&&(yt=nt($e,ke,Ee)),Ue!=null)for(;tt<et;)bt=H[tt++],Ue.X[(506832829*bt&4294967295)>>>Ue.Mb]=bt}else{if(!(bt<_t))break e;for(St=bt-280,e(Ue!=null);tt<et;)bt=H[tt++],Ue.X[(506832829*bt&4294967295)>>>Ue.Mb]=bt;bt=et,e(!(St>>>(Jt=Ue).Xa)),H[bt]=Jt.X[St],St=!0}St||e(Pe.h==F(Pe))}if(L.Pb&&Pe.h&&et<be)e(L.m.h),L.a=5,L.m=L.wd,L.$=L.xd,0<L.s.ua&&le(L.s.vb,L.s.Wa);else{if(Pe.h)break e;Se!=null&&Se(L,Ee>_e?_e:Ee),L.a=0,L.$=et-Q}return 1}return L.a=3,0}function Gr(L){e(L!=null),L.vc=null,L.yc=null,L.Ya=null;var H=L.Wa;H!=null&&(H.X=null),L.vb=null,e(L!=null)}function Rr(){var L=new rt;return L==null?null:(L.a=0,L.xb=_5,at("Predictor","VP8LPredictors"),at("Predictor","VP8LPredictors_C"),at("PredictorAdd","VP8LPredictorsAdd"),at("PredictorAdd","VP8LPredictorsAdd_C"),eu=Ae,Ji=Ge,Ca=Re,Ne=ze,qe=Ie,Qe=Ve,it=We,E.VP8LMapColor32b=$o,E.VP8LMapColor8b=Ju,L)}function Fr(L,H,Q,se,be){var _e=1,Se=[L],Ee=[H],ke=se.m,Pe=se.s,$e=null,et=0;e:for(;;){if(Q)for(;_e&&I(ke,1);){var tt=Se,Ye=Ee,_t=se,ut=1,Ue=_t.m,je=_t.gc[_t.ab],yt=I(Ue,2);if(_t.Oc&1<<yt)_e=0;else{switch(_t.Oc|=1<<yt,je.hc=yt,je.Ea=tt[0],je.nc=Ye[0],je.K=[null],++_t.ab,e(4>=_t.ab),yt){case 0:case 1:je.b=I(Ue,3)+2,ut=Fr(re(je.Ea,je.b),re(je.nc,je.b),0,_t,je.K),je.K=je.K[0];break;case 3:var St,bt=I(Ue,8)+1,Jt=16<bt?0:4<bt?1:2<bt?2:3;if(tt[0]=re(je.Ea,Jt),je.b=Jt,St=ut=Fr(bt,1,0,_t,je.K)){var Ut,_r=bt,Wt=je,dn=1<<(8>>Wt.b),bn=a(dn);if(bn==null)St=0;else{var nn=Wt.K[0],Xr=Wt.w;for(bn[0]=Wt.K[0][0],Ut=1;Ut<1*_r;++Ut)bn[Ut]=J(nn[Xr+Ut],bn[Ut-1]);for(;Ut<4*dn;++Ut)bn[Ut]=0;Wt.K[0]=null,Wt.K[0]=bn,St=1}}ut=St;break;case 2:break;default:e(0)}_e=ut}}if(Se=Se[0],Ee=Ee[0],_e&&I(ke,1)&&!(_e=1<=(et=I(ke,4))&&11>=et)){se.a=3;break e}var Mn;if(Mn=_e)t:{var Cn,qr,_i,Aa=se,xi=Se,Ta=Ee,wn=et,qa=Q,Ga=Aa.m,Ii=Aa.s,Hi=[null],da=1,Ja=0,Ho=eM[wn];r:for(;;){if(qa&&I(Ga,1)){var Ri=I(Ga,3)+2,ms=re(xi,Ri),el=re(Ta,Ri),Ql=ms*el;if(!Fr(ms,el,0,Aa,Hi))break r;for(Hi=Hi[0],Ii.xc=Ri,Cn=0;Cn<Ql;++Cn){var iu=Hi[Cn]>>8&65535;Hi[Cn]=iu,iu>=da&&(da=iu+1)}}if(Ga.h)break r;for(qr=0;5>qr;++qr){var ai=b5[qr];!qr&&0<wn&&(ai+=1<<wn),Ja<ai&&(Ja=ai)}var Ng=o(da*Ho,C),N5=da,P5=o(N5,x);if(P5==null)var hd=null;else e(65536>=N5),hd=P5;var Ec=a(Ja);if(hd==null||Ec==null||Ng==null){Aa.a=1;break r}var dd=Ng;for(Cn=_i=0;Cn<da;++Cn){var mo=hd[Cn],Jl=mo.G,ef=mo.H,M5=0,pd=1,O5=0;for(qr=0;5>qr;++qr){ai=b5[qr],Jl[qr]=dd,ef[qr]=_i,!qr&&0<wn&&(ai+=1<<wn);i:{var vd,Pg=ai,gd=Aa,Cc=Ec,_M=dd,xM=_i,Mg=0,au=gd.m,SM=I(au,1);if(i(Cc,0,0,Pg),SM){var EM=I(au,1)+1,CM=I(au,1),D5=I(au,CM==0?1:8);Cc[D5]=1,EM==2&&(Cc[D5=I(au,8)]=1);var md=1}else{var I5=a(19),R5=I(au,4)+4;if(19<R5){gd.a=3;var yd=0;break i}for(vd=0;vd<R5;++vd)I5[Q4[vd]]=I(au,3);var Og=void 0,Ac=void 0,F5=gd,AM=I5,bd=Pg,B5=Cc,Dg=0,ou=F5.m,z5=8,q5=o(128,C);n:for(;T(q5,0,7,AM,19);){if(I(ou,1)){var TM=2+2*I(ou,3);if((Og=2+I(ou,TM))>bd)break n}else Og=bd;for(Ac=0;Ac<bd&&Og--;){W(ou);var G5=q5[0+(127&q(ou))];U(ou,ou.u+G5.g);var tf=G5.value;if(16>tf)B5[Ac++]=tf,tf!=0&&(z5=tf);else{var kM=tf==16,$5=tf-16,LM=K4[$5],U5=I(ou,X4[$5])+LM;if(Ac+U5>bd)break n;for(var NM=kM?z5:0;0<U5--;)B5[Ac++]=NM}}Dg=1;break n}Dg||(F5.a=3),md=Dg}(md=md&&!au.h)&&(Mg=T(_M,xM,8,Cc,Pg)),md&&Mg!=0?yd=Mg:(gd.a=3,yd=0)}if(yd==0)break r;if(pd&&Z4[qr]==1&&(pd=dd[_i].g==0),M5+=dd[_i].g,_i+=yd,3>=qr){var Tc,Ig=Ec[0];for(Tc=1;Tc<ai;++Tc)Ec[Tc]>Ig&&(Ig=Ec[Tc]);O5+=Ig}}if(mo.nd=pd,mo.Qb=0,pd&&(mo.qb=(Jl[3][ef[3]+0].value<<24|Jl[1][ef[1]+0].value<<16|Jl[2][ef[2]+0].value)>>>0,M5==0&&256>Jl[0][ef[0]+0].value&&(mo.Qb=1,mo.qb+=Jl[0][ef[0]+0].value<<8)),mo.jc=!mo.Qb&&6>O5,mo.jc){var wd,ys=mo;for(wd=0;wd<Ui;++wd){var su=wd,uu=ys.pd[su],_d=ys.G[0][ys.H[0]+su];256<=_d.value?(uu.g=_d.g+256,uu.value=_d.value):(uu.g=0,uu.value=0,su>>=ur(_d,8,uu),su>>=ur(ys.G[1][ys.H[1]+su],16,uu),su>>=ur(ys.G[2][ys.H[2]+su],0,uu),ur(ys.G[3][ys.H[3]+su],24,uu))}}}Ii.vc=Hi,Ii.Wb=da,Ii.Ya=hd,Ii.yc=Ng,Mn=1;break t}Mn=0}if(!(_e=Mn)){se.a=3;break e}if(0<et){if(Pe.ua=1<<et,!K(Pe.Wa,et)){se.a=1,_e=0;break e}}else Pe.ua=0;var Rg=se,H5=Se,PM=Ee,Fg=Rg.s,Bg=Fg.xc;if(Rg.c=H5,Rg.i=PM,Fg.md=re(H5,Bg),Fg.wc=Bg==0?-1:(1<<Bg)-1,Q){se.xb=uM;break e}if(($e=a(Se*Ee))==null){se.a=1,_e=0;break e}_e=(_e=br(se,$e,0,Se,Ee,Ee,null))&&!ke.h;break e}return _e?(be!=null?be[0]=$e:(e($e==null),e(Q)),se.$=0,Q||Gr(Pe)):Gr(Pe),_e}function gr(L,H){var Q=L.c*L.i,se=Q+H+16*H;return e(L.c<=H),L.V=a(se),L.V==null?(L.Ta=null,L.Ua=0,L.a=1,0):(L.Ta=L.V,L.Ua=L.Ba+Q+H,1)}function Zr(L,H){var Q=L.C,se=H-Q,be=L.V,_e=L.Ba+L.c*Q;for(e(H<=L.l.o);0<se;){var Se=16<se?16:se,Ee=L.l.ma,ke=L.l.width,Pe=ke*Se,$e=Ee.ca,et=Ee.tb+ke*Q,tt=L.Ta,Ye=L.Ua;Xe(L,Se,be,_e),c5(tt,Ye,$e,et,Pe),rr(Ee,Q,Q+Se,$e,et,ke),se-=Se,be+=Se*L.c,Q+=Se}e(Q==H),L.C=L.Ma=H}function gn(){this.ub=this.yd=this.td=this.Rb=0}function Hn(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function jn(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function di(){this.Yb=function(){var L=[];return function H(Q,se,be){for(var _e=be[se],Se=0;Se<_e&&(Q.push(be.length>se+1?[]:0),!(be.length<se+1));Se++)H(Q[Se],se+1,be)}(L,0,[3,11]),L}()}function mn(){this.jb=a(3),this.Wc=s([4,8],di),this.Xc=s([4,17],di)}function Gi(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function bi(){this.ld=this.La=this.dd=this.tc=0}function Fn(){this.Na=this.la=0}function yn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function xn(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function $i(){this.uc=this.M=this.Nb=0,this.wa=Array(new bi),this.Y=0,this.ya=Array(new xn),this.aa=0,this.l=new Pr}function cn(){this.y=a(16),this.f=a(8),this.ea=a(8)}function vr(){this.cb=this.a=0,this.sc="",this.m=new z,this.Od=new gn,this.Kc=new Hn,this.ed=new Gi,this.Qa=new jn,this.Ic=this.$c=this.Aa=0,this.D=new $i,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,z),this.ia=0,this.pb=o(4,yn),this.Pa=new mn,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new cn),this.Hd=0,this.rb=Array(new Fn),this.sb=0,this.wa=Array(new bi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new xn),this.L=this.aa=0,this.gd=s([4,2],bi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Pr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Nn(){var L=new vr;return L!=null&&(L.a=0,L.sc="OK",L.cb=0,L.Xb=0,xc||(xc=uo)),L}function zr(L,H,Q){return L.a==0&&(L.a=H,L.sc=Q,L.cb=0),0}function Zn(L,H,Q){return 3<=Q&&L[H+0]==157&&L[H+1]==1&&L[H+2]==42}function la(L,H){if(L==null)return 0;if(L.a=0,L.sc="OK",H==null)return zr(L,2,"null VP8Io passed to VP8GetHeaders()");var Q=H.data,se=H.w,be=H.ha;if(4>be)return zr(L,7,"Truncated header.");var _e=Q[se+0]|Q[se+1]<<8|Q[se+2]<<16,Se=L.Od;if(Se.Rb=!(1&_e),Se.td=_e>>1&7,Se.yd=_e>>4&1,Se.ub=_e>>5,3<Se.td)return zr(L,3,"Incorrect keyframe parameters.");if(!Se.yd)return zr(L,4,"Frame not displayable.");se+=3,be-=3;var Ee=L.Kc;if(Se.Rb){if(7>be)return zr(L,7,"cannot parse picture header");if(!Zn(Q,se,be))return zr(L,3,"Bad code word");Ee.c=16383&(Q[se+4]<<8|Q[se+3]),Ee.Td=Q[se+4]>>6,Ee.i=16383&(Q[se+6]<<8|Q[se+5]),Ee.Ud=Q[se+6]>>6,se+=7,be-=7,L.za=Ee.c+15>>4,L.Ub=Ee.i+15>>4,H.width=Ee.c,H.height=Ee.i,H.Da=0,H.j=0,H.v=0,H.va=H.width,H.o=H.height,H.da=0,H.ib=H.width,H.hb=H.height,H.U=H.width,H.T=H.height,i((_e=L.Pa).jb,0,255,_e.jb.length),e((_e=L.Qa)!=null),_e.Cb=0,_e.Bb=0,_e.Fb=1,i(_e.Zb,0,0,_e.Zb.length),i(_e.Lb,0,0,_e.Lb)}if(Se.ub>be)return zr(L,7,"bad partition length");B(_e=L.m,Q,se,Se.ub),se+=Se.ub,be-=Se.ub,Se.Rb&&(Ee.Ld=te(_e),Ee.Kd=te(_e)),Ee=L.Qa;var ke,Pe=L.Pa;if(e(_e!=null),e(Ee!=null),Ee.Cb=te(_e),Ee.Cb){if(Ee.Bb=te(_e),te(_e)){for(Ee.Fb=te(_e),ke=0;4>ke;++ke)Ee.Zb[ke]=te(_e)?O(_e,7):0;for(ke=0;4>ke;++ke)Ee.Lb[ke]=te(_e)?O(_e,6):0}if(Ee.Bb)for(ke=0;3>ke;++ke)Pe.jb[ke]=te(_e)?D(_e,8):255}else Ee.Bb=0;if(_e.Ka)return zr(L,3,"cannot parse segment header");if((Ee=L.ed).zd=te(_e),Ee.Tb=D(_e,6),Ee.wb=D(_e,3),Ee.Pc=te(_e),Ee.Pc&&te(_e)){for(Pe=0;4>Pe;++Pe)te(_e)&&(Ee.vd[Pe]=O(_e,6));for(Pe=0;4>Pe;++Pe)te(_e)&&(Ee.od[Pe]=O(_e,6))}if(L.L=Ee.Tb==0?0:Ee.zd?1:2,_e.Ka)return zr(L,3,"cannot parse filter header");var $e=be;if(be=ke=se,se=ke+$e,Ee=$e,L.Xb=(1<<D(L.m,2))-1,$e<3*(Pe=L.Xb))Q=7;else{for(ke+=3*Pe,Ee-=3*Pe,$e=0;$e<Pe;++$e){var et=Q[be+0]|Q[be+1]<<8|Q[be+2]<<16;et>Ee&&(et=Ee),B(L.Jc[+$e],Q,ke,et),ke+=et,Ee-=et,be+=3}B(L.Jc[+Pe],Q,ke,Ee),Q=ke<se?0:5}if(Q!=0)return zr(L,Q,"cannot parse partitions");for(Q=D(ke=L.m,7),be=te(ke)?O(ke,4):0,se=te(ke)?O(ke,4):0,Ee=te(ke)?O(ke,4):0,Pe=te(ke)?O(ke,4):0,ke=te(ke)?O(ke,4):0,$e=L.Qa,et=0;4>et;++et){if($e.Cb){var tt=$e.Zb[et];$e.Fb||(tt+=Q)}else{if(0<et){L.pb[et]=L.pb[0];continue}tt=Q}var Ye=L.pb[et];Ye.Sc[0]=Tg[ca(tt+be,127)],Ye.Sc[1]=kg[ca(tt+0,127)],Ye.Eb[0]=2*Tg[ca(tt+se,127)],Ye.Eb[1]=101581*kg[ca(tt+Ee,127)]>>16,8>Ye.Eb[1]&&(Ye.Eb[1]=8),Ye.Qc[0]=Tg[ca(tt+Pe,117)],Ye.Qc[1]=kg[ca(tt+ke,127)],Ye.lc=tt+ke}if(!Se.Rb)return zr(L,4,"Not a key frame.");for(te(_e),Se=L.Pa,Q=0;4>Q;++Q){for(be=0;8>be;++be)for(se=0;3>se;++se)for(Ee=0;11>Ee;++Ee)Pe=ne(_e,oM[Q][be][se][Ee])?D(_e,8):iM[Q][be][se][Ee],Se.Wc[Q][be].Yb[se][Ee]=Pe;for(be=0;17>be;++be)Se.Xc[Q][be]=Se.Wc[Q][sM[be]]}return L.kc=te(_e),L.kc&&(L.Bd=D(_e,8)),L.cb=1}function uo(L,H,Q,se,be,_e,Se){var Ee=H[be].Yb[Q];for(Q=0;16>be;++be){if(!ne(L,Ee[Q+0]))return be;for(;!ne(L,Ee[Q+1]);)if(Ee=H[++be].Yb[0],Q=0,be==16)return 16;var ke=H[be+1].Yb;if(ne(L,Ee[Q+2])){var Pe=L,$e=0;if(ne(Pe,(tt=Ee)[(et=Q)+3]))if(ne(Pe,tt[et+6])){for(Ee=0,et=2*($e=ne(Pe,tt[et+8]))+(tt=ne(Pe,tt[et+9+$e])),$e=0,tt=rM[et];tt[Ee];++Ee)$e+=$e+ne(Pe,tt[Ee]);$e+=3+(8<<et)}else ne(Pe,tt[et+7])?($e=7+2*ne(Pe,165),$e+=ne(Pe,145)):$e=5+ne(Pe,159);else $e=ne(Pe,tt[et+4])?3+ne(Pe,tt[et+5]):2;Ee=ke[2]}else $e=1,Ee=ke[1];ke=Se+nM[be],0>(Pe=L).b&&X(Pe);var et,tt=Pe.b,Ye=(et=Pe.Ca>>1)-(Pe.I>>tt)>>31;--Pe.b,Pe.Ca+=Ye,Pe.Ca|=1,Pe.I-=(et+1&Ye)<<tt,_e[ke]=(($e^Ye)-Ye)*se[(0<be)+0]}return 16}function Oo(L){var H=L.rb[L.sb-1];H.la=0,H.Na=0,i(L.zc,0,0,L.zc.length),L.ja=0}function dc(L,H){if(L==null)return 0;if(H==null)return zr(L,2,"NULL VP8Io parameter in VP8Decode().");if(!L.cb&&!la(L,H))return 0;if(e(L.cb),H.ac==null||H.ac(H)){H.ob&&(L.L=0);var Q=cd[L.L];if(L.L==2?(L.yb=0,L.zb=0):(L.yb=H.v-Q>>4,L.zb=H.j-Q>>4,0>L.yb&&(L.yb=0),0>L.zb&&(L.zb=0)),L.Va=H.o+15+Q>>4,L.Hb=H.va+15+Q>>4,L.Hb>L.za&&(L.Hb=L.za),L.Va>L.Ub&&(L.Va=L.Ub),0<L.L){var se=L.ed;for(Q=0;4>Q;++Q){var be;if(L.Qa.Cb){var _e=L.Qa.Lb[Q];L.Qa.Fb||(_e+=se.Tb)}else _e=se.Tb;for(be=0;1>=be;++be){var Se=L.gd[Q][be],Ee=_e;if(se.Pc&&(Ee+=se.vd[0],be&&(Ee+=se.od[0])),0<(Ee=0>Ee?0:63<Ee?63:Ee)){var ke=Ee;0<se.wb&&(ke=4<se.wb?ke>>2:ke>>1)>9-se.wb&&(ke=9-se.wb),1>ke&&(ke=1),Se.dd=ke,Se.tc=2*Ee+ke,Se.ld=40<=Ee?2:15<=Ee?1:0}else Se.tc=0;Se.La=be}}}Q=0}else zr(L,6,"Frame setup failed"),Q=L.a;if(Q=Q==0){if(Q){L.$c=0,0<L.Aa||(L.Ic=wM);e:{Q=L.Ic,se=4*(ke=L.za);var Pe=32*ke,$e=ke+1,et=0<L.L?ke*(0<L.Aa?2:1):0,tt=(L.Aa==2?2:1)*ke;if((Se=se+832+(be=3*(16*Q+cd[L.L])/2*Pe)+(_e=L.Fa!=null&&0<L.Fa.length?L.Kc.c*L.Kc.i:0))!=Se)Q=0;else{if(Se>L.Vb){if(L.Vb=0,L.Ec=a(Se),L.Fc=0,L.Ec==null){Q=zr(L,1,"no memory during frame initialization.");break e}L.Vb=Se}Se=L.Ec,Ee=L.Fc,L.Ac=Se,L.Bc=Ee,Ee+=se,L.Gd=o(Pe,cn),L.Hd=0,L.rb=o($e+1,Fn),L.sb=1,L.wa=et?o(et,bi):null,L.Y=0,L.D.Nb=0,L.D.wa=L.wa,L.D.Y=L.Y,0<L.Aa&&(L.D.Y+=ke),e(!0),L.oc=Se,L.pc=Ee,Ee+=832,L.ya=o(tt,xn),L.aa=0,L.D.ya=L.ya,L.D.aa=L.aa,L.Aa==2&&(L.D.aa+=ke),L.R=16*ke,L.B=8*ke,ke=(Pe=cd[L.L])*L.R,Pe=Pe/2*L.B,L.sa=Se,L.ta=Ee+ke,L.qa=L.sa,L.ra=L.ta+16*Q*L.R+Pe,L.Ha=L.qa,L.Ia=L.ra+8*Q*L.B+Pe,L.$c=0,Ee+=be,L.mb=_e?Se:null,L.nb=_e?Ee:null,e(Ee+_e<=L.Fc+L.Vb),Oo(L),i(L.Ac,L.Bc,0,se),Q=1}}if(Q){if(H.ka=0,H.y=L.sa,H.O=L.ta,H.f=L.qa,H.N=L.ra,H.ea=L.Ha,H.Vd=L.Ia,H.fa=L.R,H.Rc=L.B,H.F=null,H.J=0,!g5){for(Q=-255;255>=Q;++Q)h5[255+Q]=0>Q?-Q:Q;for(Q=-1020;1020>=Q;++Q)d5[1020+Q]=-128>Q?-128:127<Q?127:Q;for(Q=-112;112>=Q;++Q)p5[112+Q]=-16>Q?-16:15<Q?15:Q;for(Q=-255;510>=Q;++Q)v5[255+Q]=0>Q?0:255<Q?255:Q;g5=1}lt=vc,It=pc,er=Qi,Ft=$l,Tr=Do,Vt=Gl,dr=N,wr=j,Or=de,lr=pe,un=ee,Pn=ae,Bn=xe,Ur=Be,Wr=Fo,En=Ya,Qr=Xa,vs=_c,go[0]=Sa,go[1]=lo,go[2]=gc,go[3]=mc,go[4]=jl,go[5]=Ys,go[6]=Vl,go[7]=Xu,go[8]=bc,go[9]=yc,ru[0]=Ws,ru[1]=Yu,ru[2]=co,ru[3]=Wa,ru[4]=Ti,ru[5]=Ul,ru[6]=Hl,gs[0]=po,gs[1]=fo,gs[2]=wc,gs[3]=Xs,gs[4]=Io,gs[5]=Ku,gs[6]=Ks,Q=1}else Q=0}Q&&(Q=function(Ye,_t){for(Ye.M=0;Ye.M<Ye.Va;++Ye.M){var ut,Ue=Ye.Jc[Ye.M&Ye.Xb],je=Ye.m,yt=Ye;for(ut=0;ut<yt.za;++ut){var St=je,bt=yt,Jt=bt.Ac,Ut=bt.Bc+4*ut,_r=bt.zc,Wt=bt.ya[bt.aa+ut];if(bt.Qa.Bb?Wt.$b=ne(St,bt.Pa.jb[0])?2+ne(St,bt.Pa.jb[2]):ne(St,bt.Pa.jb[1]):Wt.$b=0,bt.kc&&(Wt.Ad=ne(St,bt.Bd)),Wt.Za=!ne(St,145)+0,Wt.Za){var dn=Wt.Ob,bn=0;for(bt=0;4>bt;++bt){var nn,Xr=_r[0+bt];for(nn=0;4>nn;++nn){Xr=aM[Jt[Ut+nn]][Xr];for(var Mn=w5[ne(St,Xr[0])];0<Mn;)Mn=w5[2*Mn+ne(St,Xr[Mn])];Xr=-Mn,Jt[Ut+nn]=Xr}n(dn,bn,Jt,Ut,4),bn+=4,_r[0+bt]=Xr}}else Xr=ne(St,156)?ne(St,128)?1:3:ne(St,163)?2:0,Wt.Ob[0]=Xr,i(Jt,Ut,Xr,4),i(_r,0,Xr,4);Wt.Dd=ne(St,142)?ne(St,114)?ne(St,183)?1:3:2:0}if(yt.m.Ka)return zr(Ye,7,"Premature end-of-partition0 encountered.");for(;Ye.ja<Ye.za;++Ye.ja){if(yt=Ue,St=(je=Ye).rb[je.sb-1],Jt=je.rb[je.sb+je.ja],ut=je.ya[je.aa+je.ja],Ut=je.kc?ut.Ad:0)St.la=Jt.la=0,ut.Za||(St.Na=Jt.Na=0),ut.Hc=0,ut.Gc=0,ut.ia=0;else{var Cn,qr;if(St=Jt,Jt=yt,Ut=je.Pa.Xc,_r=je.ya[je.aa+je.ja],Wt=je.pb[_r.$b],bt=_r.ad,dn=0,bn=je.rb[je.sb-1],Xr=nn=0,i(bt,dn,0,384),_r.Za)var _i=0,Aa=Ut[3];else{Mn=a(16);var xi=St.Na+bn.Na;if(xi=xc(Jt,Ut[1],xi,Wt.Eb,0,Mn,0),St.Na=bn.Na=(0<xi)+0,1<xi)lt(Mn,0,bt,dn);else{var Ta=Mn[0]+3>>3;for(Mn=0;256>Mn;Mn+=16)bt[dn+Mn]=Ta}_i=1,Aa=Ut[0]}var wn=15&St.la,qa=15&bn.la;for(Mn=0;4>Mn;++Mn){var Ga=1&qa;for(Ta=qr=0;4>Ta;++Ta)wn=wn>>1|(Ga=(xi=xc(Jt,Aa,xi=Ga+(1&wn),Wt.Sc,_i,bt,dn))>_i)<<7,qr=qr<<2|(3<xi?3:1<xi?2:bt[dn+0]!=0),dn+=16;wn>>=4,qa=qa>>1|Ga<<7,nn=(nn<<8|qr)>>>0}for(Aa=wn,_i=qa>>4,Cn=0;4>Cn;Cn+=2){for(qr=0,wn=St.la>>4+Cn,qa=bn.la>>4+Cn,Mn=0;2>Mn;++Mn){for(Ga=1&qa,Ta=0;2>Ta;++Ta)xi=Ga+(1&wn),wn=wn>>1|(Ga=0<(xi=xc(Jt,Ut[2],xi,Wt.Qc,0,bt,dn)))<<3,qr=qr<<2|(3<xi?3:1<xi?2:bt[dn+0]!=0),dn+=16;wn>>=2,qa=qa>>1|Ga<<5}Xr|=qr<<4*Cn,Aa|=wn<<4<<Cn,_i|=(240&qa)<<Cn}St.la=Aa,bn.la=_i,_r.Hc=nn,_r.Gc=Xr,_r.ia=43690&Xr?0:Wt.ia,Ut=!(nn|Xr)}if(0<je.L&&(je.wa[je.Y+je.ja]=je.gd[ut.$b][ut.Za],je.wa[je.Y+je.ja].La|=!Ut),yt.Ka)return zr(Ye,7,"Premature end-of-file encountered.")}if(Oo(Ye),je=_t,yt=1,ut=(Ue=Ye).D,St=0<Ue.L&&Ue.M>=Ue.zb&&Ue.M<=Ue.Va,Ue.Aa==0)e:{if(ut.M=Ue.M,ut.uc=St,zo(Ue,ut),yt=1,ut=(qr=Ue.D).Nb,St=(Xr=cd[Ue.L])*Ue.R,Jt=Xr/2*Ue.B,Mn=16*ut*Ue.R,Ta=8*ut*Ue.B,Ut=Ue.sa,_r=Ue.ta-St+Mn,Wt=Ue.qa,bt=Ue.ra-Jt+Ta,dn=Ue.Ha,bn=Ue.Ia-Jt+Ta,qa=(wn=qr.M)==0,nn=wn>=Ue.Va-1,Ue.Aa==2&&zo(Ue,qr),qr.uc)for(Ga=(xi=Ue).D.M,e(xi.D.uc),qr=xi.yb;qr<xi.Hb;++qr){_i=qr,Aa=Ga;var Ii=(Hi=(ai=xi).D).Nb;Cn=ai.R;var Hi=Hi.wa[Hi.Y+_i],da=ai.sa,Ja=ai.ta+16*Ii*Cn+16*_i,Ho=Hi.dd,Ri=Hi.tc;if(Ri!=0)if(e(3<=Ri),ai.L==1)0<_i&&En(da,Ja,Cn,Ri+4),Hi.La&&vs(da,Ja,Cn,Ri),0<Aa&&Wr(da,Ja,Cn,Ri+4),Hi.La&&Qr(da,Ja,Cn,Ri);else{var ms=ai.B,el=ai.qa,Ql=ai.ra+8*Ii*ms+8*_i,iu=ai.Ha,ai=ai.Ia+8*Ii*ms+8*_i;Ii=Hi.ld,0<_i&&(wr(da,Ja,Cn,Ri+4,Ho,Ii),lr(el,Ql,iu,ai,ms,Ri+4,Ho,Ii)),Hi.La&&(Pn(da,Ja,Cn,Ri,Ho,Ii),Ur(el,Ql,iu,ai,ms,Ri,Ho,Ii)),0<Aa&&(dr(da,Ja,Cn,Ri+4,Ho,Ii),Or(el,Ql,iu,ai,ms,Ri+4,Ho,Ii)),Hi.La&&(un(da,Ja,Cn,Ri,Ho,Ii),Bn(el,Ql,iu,ai,ms,Ri,Ho,Ii))}}if(Ue.ia&&alert("todo:DitherRow"),je.put!=null){if(qr=16*wn,wn=16*(wn+1),qa?(je.y=Ue.sa,je.O=Ue.ta+Mn,je.f=Ue.qa,je.N=Ue.ra+Ta,je.ea=Ue.Ha,je.W=Ue.Ia+Ta):(qr-=Xr,je.y=Ut,je.O=_r,je.f=Wt,je.N=bt,je.ea=dn,je.W=bn),nn||(wn-=Xr),wn>je.o&&(wn=je.o),je.F=null,je.J=null,Ue.Fa!=null&&0<Ue.Fa.length&&qr<wn&&(je.J=Qn(Ue,je,qr,wn-qr),je.F=Ue.mb,je.F==null&&je.F.length==0)){yt=zr(Ue,3,"Could not decode alpha data.");break e}qr<je.j&&(Xr=je.j-qr,qr=je.j,e(!(1&Xr)),je.O+=Ue.R*Xr,je.N+=Ue.B*(Xr>>1),je.W+=Ue.B*(Xr>>1),je.F!=null&&(je.J+=je.width*Xr)),qr<wn&&(je.O+=je.v,je.N+=je.v>>1,je.W+=je.v>>1,je.F!=null&&(je.J+=je.v),je.ka=qr-je.j,je.U=je.va-je.v,je.T=wn-qr,yt=je.put(je))}ut+1!=Ue.Ic||nn||(n(Ue.sa,Ue.ta-St,Ut,_r+16*Ue.R,St),n(Ue.qa,Ue.ra-Jt,Wt,bt+8*Ue.B,Jt),n(Ue.Ha,Ue.Ia-Jt,dn,bn+8*Ue.B,Jt))}if(!yt)return zr(Ye,6,"Output aborted.")}return 1}(L,H)),H.bc!=null&&H.bc(H),Q&=1}return Q?(L.cb=0,Q):0}function fa(L,H,Q,se,be){be=L[H+Q+32*se]+(be>>3),L[H+Q+32*se]=-256&be?0>be?0:255:be}function ds(L,H,Q,se,be,_e){fa(L,H,0,Q,se+be),fa(L,H,1,Q,se+_e),fa(L,H,2,Q,se-_e),fa(L,H,3,Q,se-be)}function Ai(L){return(20091*L>>16)+L}function Vs(L,H,Q,se){var be,_e=0,Se=a(16);for(be=0;4>be;++be){var Ee=L[H+0]+L[H+8],ke=L[H+0]-L[H+8],Pe=(35468*L[H+4]>>16)-Ai(L[H+12]),$e=Ai(L[H+4])+(35468*L[H+12]>>16);Se[_e+0]=Ee+$e,Se[_e+1]=ke+Pe,Se[_e+2]=ke-Pe,Se[_e+3]=Ee-$e,_e+=4,H++}for(be=_e=0;4>be;++be)Ee=(L=Se[_e+0]+4)+Se[_e+8],ke=L-Se[_e+8],Pe=(35468*Se[_e+4]>>16)-Ai(Se[_e+12]),fa(Q,se,0,0,Ee+($e=Ai(Se[_e+4])+(35468*Se[_e+12]>>16))),fa(Q,se,1,0,ke+Pe),fa(Q,se,2,0,ke-Pe),fa(Q,se,3,0,Ee-$e),_e++,se+=32}function Gl(L,H,Q,se){var be=L[H+0]+4,_e=35468*L[H+4]>>16,Se=Ai(L[H+4]),Ee=35468*L[H+1]>>16;ds(Q,se,0,be+Se,L=Ai(L[H+1]),Ee),ds(Q,se,1,be+_e,L,Ee),ds(Q,se,2,be-_e,L,Ee),ds(Q,se,3,be-Se,L,Ee)}function pc(L,H,Q,se,be){Vs(L,H,Q,se),be&&Vs(L,H+16,Q,se+4)}function Qi(L,H,Q,se){It(L,H+0,Q,se,1),It(L,H+32,Q,se+128,1)}function $l(L,H,Q,se){var be;for(L=L[H+0]+4,be=0;4>be;++be)for(H=0;4>H;++H)fa(Q,se,H,be,L)}function Do(L,H,Q,se){L[H+0]&&Ft(L,H+0,Q,se),L[H+16]&&Ft(L,H+16,Q,se+4),L[H+32]&&Ft(L,H+32,Q,se+128),L[H+48]&&Ft(L,H+48,Q,se+128+4)}function vc(L,H,Q,se){var be,_e=a(16);for(be=0;4>be;++be){var Se=L[H+0+be]+L[H+12+be],Ee=L[H+4+be]+L[H+8+be],ke=L[H+4+be]-L[H+8+be],Pe=L[H+0+be]-L[H+12+be];_e[0+be]=Se+Ee,_e[8+be]=Se-Ee,_e[4+be]=Pe+ke,_e[12+be]=Pe-ke}for(be=0;4>be;++be)Se=(L=_e[0+4*be]+3)+_e[3+4*be],Ee=_e[1+4*be]+_e[2+4*be],ke=_e[1+4*be]-_e[2+4*be],Pe=L-_e[3+4*be],Q[se+0]=Se+Ee>>3,Q[se+16]=Pe+ke>>3,Q[se+32]=Se-Ee>>3,Q[se+48]=Pe-ke>>3,se+=64}function Wu(L,H,Q){var se,be=H-32,_e=za,Se=255-L[be-1];for(se=0;se<Q;++se){var Ee,ke=_e,Pe=Se+L[H-1];for(Ee=0;Ee<Q;++Ee)L[H+Ee]=ke[Pe+L[be+Ee]];H+=32}}function lo(L,H){Wu(L,H,4)}function fo(L,H){Wu(L,H,8)}function Yu(L,H){Wu(L,H,16)}function co(L,H){var Q;for(Q=0;16>Q;++Q)n(L,H+32*Q,L,H-32,16)}function Wa(L,H){var Q;for(Q=16;0<Q;--Q)i(L,H,L[H-1],16),H+=32}function ps(L,H,Q){var se;for(se=0;16>se;++se)i(H,Q+32*se,L,16)}function Ws(L,H){var Q,se=16;for(Q=0;16>Q;++Q)se+=L[H-1+32*Q]+L[H+Q-32];ps(se>>5,L,H)}function Ti(L,H){var Q,se=8;for(Q=0;16>Q;++Q)se+=L[H-1+32*Q];ps(se>>4,L,H)}function Ul(L,H){var Q,se=8;for(Q=0;16>Q;++Q)se+=L[H+Q-32];ps(se>>4,L,H)}function Hl(L,H){ps(128,L,H)}function Ar(L,H,Q){return L+2*H+Q+2>>2}function gc(L,H){var Q,se=H-32;for(se=new Uint8Array([Ar(L[se-1],L[se+0],L[se+1]),Ar(L[se+0],L[se+1],L[se+2]),Ar(L[se+1],L[se+2],L[se+3]),Ar(L[se+2],L[se+3],L[se+4])]),Q=0;4>Q;++Q)n(L,H+32*Q,se,0,se.length)}function mc(L,H){var Q=L[H-1],se=L[H-1+32],be=L[H-1+64],_e=L[H-1+96];he(L,H+0,16843009*Ar(L[H-1-32],Q,se)),he(L,H+32,16843009*Ar(Q,se,be)),he(L,H+64,16843009*Ar(se,be,_e)),he(L,H+96,16843009*Ar(be,_e,_e))}function Sa(L,H){var Q,se=4;for(Q=0;4>Q;++Q)se+=L[H+Q-32]+L[H-1+32*Q];for(se>>=3,Q=0;4>Q;++Q)i(L,H+32*Q,se,4)}function jl(L,H){var Q=L[H-1+0],se=L[H-1+32],be=L[H-1+64],_e=L[H-1-32],Se=L[H+0-32],Ee=L[H+1-32],ke=L[H+2-32],Pe=L[H+3-32];L[H+0+96]=Ar(se,be,L[H-1+96]),L[H+1+96]=L[H+0+64]=Ar(Q,se,be),L[H+2+96]=L[H+1+64]=L[H+0+32]=Ar(_e,Q,se),L[H+3+96]=L[H+2+64]=L[H+1+32]=L[H+0+0]=Ar(Se,_e,Q),L[H+3+64]=L[H+2+32]=L[H+1+0]=Ar(Ee,Se,_e),L[H+3+32]=L[H+2+0]=Ar(ke,Ee,Se),L[H+3+0]=Ar(Pe,ke,Ee)}function Vl(L,H){var Q=L[H+1-32],se=L[H+2-32],be=L[H+3-32],_e=L[H+4-32],Se=L[H+5-32],Ee=L[H+6-32],ke=L[H+7-32];L[H+0+0]=Ar(L[H+0-32],Q,se),L[H+1+0]=L[H+0+32]=Ar(Q,se,be),L[H+2+0]=L[H+1+32]=L[H+0+64]=Ar(se,be,_e),L[H+3+0]=L[H+2+32]=L[H+1+64]=L[H+0+96]=Ar(be,_e,Se),L[H+3+32]=L[H+2+64]=L[H+1+96]=Ar(_e,Se,Ee),L[H+3+64]=L[H+2+96]=Ar(Se,Ee,ke),L[H+3+96]=Ar(Ee,ke,ke)}function Ys(L,H){var Q=L[H-1+0],se=L[H-1+32],be=L[H-1+64],_e=L[H-1-32],Se=L[H+0-32],Ee=L[H+1-32],ke=L[H+2-32],Pe=L[H+3-32];L[H+0+0]=L[H+1+64]=_e+Se+1>>1,L[H+1+0]=L[H+2+64]=Se+Ee+1>>1,L[H+2+0]=L[H+3+64]=Ee+ke+1>>1,L[H+3+0]=ke+Pe+1>>1,L[H+0+96]=Ar(be,se,Q),L[H+0+64]=Ar(se,Q,_e),L[H+0+32]=L[H+1+96]=Ar(Q,_e,Se),L[H+1+32]=L[H+2+96]=Ar(_e,Se,Ee),L[H+2+32]=L[H+3+96]=Ar(Se,Ee,ke),L[H+3+32]=Ar(Ee,ke,Pe)}function Xu(L,H){var Q=L[H+0-32],se=L[H+1-32],be=L[H+2-32],_e=L[H+3-32],Se=L[H+4-32],Ee=L[H+5-32],ke=L[H+6-32],Pe=L[H+7-32];L[H+0+0]=Q+se+1>>1,L[H+1+0]=L[H+0+64]=se+be+1>>1,L[H+2+0]=L[H+1+64]=be+_e+1>>1,L[H+3+0]=L[H+2+64]=_e+Se+1>>1,L[H+0+32]=Ar(Q,se,be),L[H+1+32]=L[H+0+96]=Ar(se,be,_e),L[H+2+32]=L[H+1+96]=Ar(be,_e,Se),L[H+3+32]=L[H+2+96]=Ar(_e,Se,Ee),L[H+3+64]=Ar(Se,Ee,ke),L[H+3+96]=Ar(Ee,ke,Pe)}function yc(L,H){var Q=L[H-1+0],se=L[H-1+32],be=L[H-1+64],_e=L[H-1+96];L[H+0+0]=Q+se+1>>1,L[H+2+0]=L[H+0+32]=se+be+1>>1,L[H+2+32]=L[H+0+64]=be+_e+1>>1,L[H+1+0]=Ar(Q,se,be),L[H+3+0]=L[H+1+32]=Ar(se,be,_e),L[H+3+32]=L[H+1+64]=Ar(be,_e,_e),L[H+3+64]=L[H+2+64]=L[H+0+96]=L[H+1+96]=L[H+2+96]=L[H+3+96]=_e}function bc(L,H){var Q=L[H-1+0],se=L[H-1+32],be=L[H-1+64],_e=L[H-1+96],Se=L[H-1-32],Ee=L[H+0-32],ke=L[H+1-32],Pe=L[H+2-32];L[H+0+0]=L[H+2+32]=Q+Se+1>>1,L[H+0+32]=L[H+2+64]=se+Q+1>>1,L[H+0+64]=L[H+2+96]=be+se+1>>1,L[H+0+96]=_e+be+1>>1,L[H+3+0]=Ar(Ee,ke,Pe),L[H+2+0]=Ar(Se,Ee,ke),L[H+1+0]=L[H+3+32]=Ar(Q,Se,Ee),L[H+1+32]=L[H+3+64]=Ar(se,Q,Se),L[H+1+64]=L[H+3+96]=Ar(be,se,Q),L[H+1+96]=Ar(_e,be,se)}function wc(L,H){var Q;for(Q=0;8>Q;++Q)n(L,H+32*Q,L,H-32,8)}function Xs(L,H){var Q;for(Q=0;8>Q;++Q)i(L,H,L[H-1],8),H+=32}function ho(L,H,Q){var se;for(se=0;8>se;++se)i(H,Q+32*se,L,8)}function po(L,H){var Q,se=8;for(Q=0;8>Q;++Q)se+=L[H+Q-32]+L[H-1+32*Q];ho(se>>4,L,H)}function Ku(L,H){var Q,se=4;for(Q=0;8>Q;++Q)se+=L[H+Q-32];ho(se>>3,L,H)}function Io(L,H){var Q,se=4;for(Q=0;8>Q;++Q)se+=L[H-1+32*Q];ho(se>>3,L,H)}function Ks(L,H){ho(128,L,H)}function Ro(L,H,Q){var se=L[H-Q],be=L[H+0],_e=3*(be-se)+xg[1020+L[H-2*Q]-L[H+Q]],Se=nd[112+(_e+4>>3)];L[H-Q]=za[255+se+nd[112+(_e+3>>3)]],L[H+0]=za[255+be-Se]}function Wl(L,H,Q,se){var be=L[H+0],_e=L[H+Q];return Za[255+L[H-2*Q]-L[H-Q]]>se||Za[255+_e-be]>se}function Yl(L,H,Q,se){return 4*Za[255+L[H-Q]-L[H+0]]+Za[255+L[H-2*Q]-L[H+Q]]<=se}function Xl(L,H,Q,se,be){var _e=L[H-3*Q],Se=L[H-2*Q],Ee=L[H-Q],ke=L[H+0],Pe=L[H+Q],$e=L[H+2*Q],et=L[H+3*Q];return 4*Za[255+Ee-ke]+Za[255+Se-Pe]>se?0:Za[255+L[H-4*Q]-_e]<=be&&Za[255+_e-Se]<=be&&Za[255+Se-Ee]<=be&&Za[255+et-$e]<=be&&Za[255+$e-Pe]<=be&&Za[255+Pe-ke]<=be}function Fo(L,H,Q,se){var be=2*se+1;for(se=0;16>se;++se)Yl(L,H+se,Q,be)&&Ro(L,H+se,Q)}function Ya(L,H,Q,se){var be=2*se+1;for(se=0;16>se;++se)Yl(L,H+se*Q,1,be)&&Ro(L,H+se*Q,1)}function Xa(L,H,Q,se){var be;for(be=3;0<be;--be)Fo(L,H+=4*Q,Q,se)}function _c(L,H,Q,se){var be;for(be=3;0<be;--be)Ya(L,H+=4,Q,se)}function Bo(L,H,Q,se,be,_e,Se,Ee){for(_e=2*_e+1;0<be--;){if(Xl(L,H,Q,_e,Se))if(Wl(L,H,Q,Ee))Ro(L,H,Q);else{var ke=L,Pe=H,$e=Q,et=ke[Pe-2*$e],tt=ke[Pe-$e],Ye=ke[Pe+0],_t=ke[Pe+$e],ut=ke[Pe+2*$e],Ue=27*(yt=xg[1020+3*(Ye-tt)+xg[1020+et-_t]])+63>>7,je=18*yt+63>>7,yt=9*yt+63>>7;ke[Pe-3*$e]=za[255+ke[Pe-3*$e]+yt],ke[Pe-2*$e]=za[255+et+je],ke[Pe-$e]=za[255+tt+Ue],ke[Pe+0]=za[255+Ye-Ue],ke[Pe+$e]=za[255+_t-je],ke[Pe+2*$e]=za[255+ut-yt]}H+=se}}function Fa(L,H,Q,se,be,_e,Se,Ee){for(_e=2*_e+1;0<be--;){if(Xl(L,H,Q,_e,Se))if(Wl(L,H,Q,Ee))Ro(L,H,Q);else{var ke=L,Pe=H,$e=Q,et=ke[Pe-$e],tt=ke[Pe+0],Ye=ke[Pe+$e],_t=nd[112+((ut=3*(tt-et))+4>>3)],ut=nd[112+(ut+3>>3)],Ue=_t+1>>1;ke[Pe-2*$e]=za[255+ke[Pe-2*$e]+Ue],ke[Pe-$e]=za[255+et+ut],ke[Pe+0]=za[255+tt-_t],ke[Pe+$e]=za[255+Ye-Ue]}H+=se}}function N(L,H,Q,se,be,_e){Bo(L,H,Q,1,16,se,be,_e)}function j(L,H,Q,se,be,_e){Bo(L,H,1,Q,16,se,be,_e)}function ee(L,H,Q,se,be,_e){var Se;for(Se=3;0<Se;--Se)Fa(L,H+=4*Q,Q,1,16,se,be,_e)}function ae(L,H,Q,se,be,_e){var Se;for(Se=3;0<Se;--Se)Fa(L,H+=4,1,Q,16,se,be,_e)}function de(L,H,Q,se,be,_e,Se,Ee){Bo(L,H,be,1,8,_e,Se,Ee),Bo(Q,se,be,1,8,_e,Se,Ee)}function pe(L,H,Q,se,be,_e,Se,Ee){Bo(L,H,1,be,8,_e,Se,Ee),Bo(Q,se,1,be,8,_e,Se,Ee)}function xe(L,H,Q,se,be,_e,Se,Ee){Fa(L,H+4*be,be,1,8,_e,Se,Ee),Fa(Q,se+4*be,be,1,8,_e,Se,Ee)}function Be(L,H,Q,se,be,_e,Se,Ee){Fa(L,H+4,1,be,8,_e,Se,Ee),Fa(Q,se+4,1,be,8,_e,Se,Ee)}function Oe(){this.ba=new vt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Mt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function He(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ot(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ht(){this.ua=0,this.Wa=new Z,this.vb=new Z,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new x,this.yc=new C}function rt(){this.xb=this.a=0,this.l=new Pr,this.ca=new vt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ht,this.ab=0,this.gc=o(4,ot),this.Oc=0}function Ct(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Pr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function mr(L,H,Q,se,be,_e,Se){for(L=L==null?0:L[H+0],H=0;H<Se;++H)be[_e+H]=L+Q[se+H]&255,L=be[_e+H]}function $r(L,H,Q,se,be,_e,Se){var Ee;if(L==null)mr(null,null,Q,se,be,_e,Se);else for(Ee=0;Ee<Se;++Ee)be[_e+Ee]=L[H+Ee]+Q[se+Ee]&255}function Er(L,H,Q,se,be,_e,Se){if(L==null)mr(null,null,Q,se,be,_e,Se);else{var Ee,ke=L[H+0],Pe=ke,$e=ke;for(Ee=0;Ee<Se;++Ee)Pe=$e+(ke=L[H+Ee])-Pe,$e=Q[se+Ee]+(-256&Pe?0>Pe?0:255:Pe)&255,Pe=ke,be[_e+Ee]=$e}}function Qn(L,H,Q,se){var be=H.width,_e=H.o;if(e(L!=null&&H!=null),0>Q||0>=se||Q+se>_e)return null;if(!L.Cc){if(L.ga==null){var Se;if(L.ga=new Ct,(Se=L.ga==null)||(Se=H.width*H.o,e(L.Gb.length==0),L.Gb=a(Se),L.Uc=0,L.Gb==null?Se=0:(L.mb=L.Gb,L.nb=L.Uc,L.rc=null,Se=1),Se=!Se),!Se){Se=L.ga;var Ee=L.Fa,ke=L.P,Pe=L.qc,$e=L.mb,et=L.nb,tt=ke+1,Ye=Pe-1,_t=Se.l;if(e(Ee!=null&&$e!=null&&H!=null),nu[0]=null,nu[1]=mr,nu[2]=$r,nu[3]=Er,Se.ca=$e,Se.tb=et,Se.c=H.width,Se.i=H.height,e(0<Se.c&&0<Se.i),1>=Pe)H=0;else if(Se.$a=Ee[ke+0]>>0&3,Se.Z=Ee[ke+0]>>2&3,Se.Lc=Ee[ke+0]>>4&3,ke=Ee[ke+0]>>6&3,0>Se.$a||1<Se.$a||4<=Se.Z||1<Se.Lc||ke)H=0;else if(_t.put=nr,_t.ac=Tt,_t.bc=$t,_t.ma=Se,_t.width=H.width,_t.height=H.height,_t.Da=H.Da,_t.v=H.v,_t.va=H.va,_t.j=H.j,_t.o=H.o,Se.$a)e:{e(Se.$a==1),H=Rr();t:for(;;){if(H==null){H=0;break e}if(e(Se!=null),Se.mc=H,H.c=Se.c,H.i=Se.i,H.l=Se.l,H.l.ma=Se,H.l.width=Se.c,H.l.height=Se.i,H.a=0,G(H.m,Ee,tt,Ye),!Fr(Se.c,Se.i,1,H,null)||(H.ab==1&&H.gc[0].hc==3&&zt(H.s)?(Se.ic=1,Ee=H.c*H.i,H.Ta=null,H.Ua=0,H.V=a(Ee),H.Ba=0,H.V==null?(H.a=1,H=0):H=1):(Se.ic=0,H=gr(H,Se.c)),!H))break t;H=1;break e}Se.mc=null,H=0}else H=Ye>=Se.c*Se.i;Se=!H}if(Se)return null;L.ga.Lc!=1?L.Ga=0:se=_e-Q}e(L.ga!=null),e(Q+se<=_e);e:{if(H=(Ee=L.ga).c,_e=Ee.l.o,Ee.$a==0){if(tt=L.rc,Ye=L.Vc,_t=L.Fa,ke=L.P+1+Q*H,Pe=L.mb,$e=L.nb+Q*H,e(ke<=L.P+L.qc),Ee.Z!=0)for(e(nu[Ee.Z]!=null),Se=0;Se<se;++Se)nu[Ee.Z](tt,Ye,_t,ke,Pe,$e,H),tt=Pe,Ye=$e,$e+=H,ke+=H;else for(Se=0;Se<se;++Se)n(Pe,$e,_t,ke,H),tt=Pe,Ye=$e,$e+=H,ke+=H;L.rc=tt,L.Vc=Ye}else{if(e(Ee.mc!=null),H=Q+se,e((Se=Ee.mc)!=null),e(H<=Se.i),Se.C>=H)H=1;else if(Ee.ic||Ke(),Ee.ic){Ee=Se.V,tt=Se.Ba,Ye=Se.c;var ut=Se.i,Ue=(_t=1,ke=Se.$/Ye,Pe=Se.$%Ye,$e=Se.m,et=Se.s,Se.$),je=Ye*ut,yt=Ye*H,St=et.wc,bt=Ue<yt?nt(et,Pe,ke):null;e(Ue<=je),e(H<=ut),e(zt(et));t:for(;;){for(;!$e.h&&Ue<yt;){if(Pe&St||(bt=nt(et,Pe,ke)),e(bt!=null),W($e),256>(ut=Bt(bt.G[0],bt.H[0],$e)))Ee[tt+Ue]=ut,++Ue,++Pe>=Ye&&(Pe=0,++ke<=H&&!(ke%16)&&Zt(Se,ke));else{if(!(280>ut)){_t=0;break t}ut=hr(ut-256,$e);var Jt,Ut=Bt(bt.G[4],bt.H[4],$e);if(W($e),!(Ue>=(Ut=Rt(Ye,Ut=hr(Ut,$e)))&&je-Ue>=ut)){_t=0;break t}for(Jt=0;Jt<ut;++Jt)Ee[tt+Ue+Jt]=Ee[tt+Ue+Jt-Ut];for(Ue+=ut,Pe+=ut;Pe>=Ye;)Pe-=Ye,++ke<=H&&!(ke%16)&&Zt(Se,ke);Ue<yt&&Pe&St&&(bt=nt(et,Pe,ke))}e($e.h==F($e))}Zt(Se,ke>H?H:ke);break t}!_t||$e.h&&Ue<je?(_t=0,Se.a=$e.h?5:3):Se.$=Ue,H=_t}else H=br(Se,Se.V,Se.Ba,Se.c,Se.i,H,Zr);if(!H){se=0;break e}}Q+se>=_e&&(L.Cc=1),se=1}if(!se)return null;if(L.Cc&&((se=L.ga)!=null&&(se.mc=null),L.ga=null,0<L.Ga))return alert("todo:WebPDequantizeLevels"),null}return L.nb+Q*be}function Y(L,H,Q,se,be,_e){for(;0<be--;){var Se,Ee=L,ke=H+(Q?1:0),Pe=L,$e=H+(Q?0:3);for(Se=0;Se<se;++Se){var et=Pe[$e+4*Se];et!=255&&(et*=32897,Ee[ke+4*Se+0]=Ee[ke+4*Se+0]*et>>23,Ee[ke+4*Se+1]=Ee[ke+4*Se+1]*et>>23,Ee[ke+4*Se+2]=Ee[ke+4*Se+2]*et>>23)}H+=_e}}function ye(L,H,Q,se,be){for(;0<se--;){var _e;for(_e=0;_e<Q;++_e){var Se=L[H+2*_e+0],Ee=15&(Pe=L[H+2*_e+1]),ke=4369*Ee,Pe=(240&Pe|Pe>>4)*ke>>16;L[H+2*_e+0]=(240&Se|Se>>4)*ke>>16&240|(15&Se|Se<<4)*ke>>16>>4&15,L[H+2*_e+1]=240&Pe|Ee}H+=be}}function Me(L,H,Q,se,be,_e,Se,Ee){var ke,Pe,$e=255;for(Pe=0;Pe<be;++Pe){for(ke=0;ke<se;++ke){var et=L[H+ke];_e[Se+4*ke]=et,$e&=et}H+=Q,Se+=Ee}return $e!=255}function De(L,H,Q,se,be){var _e;for(_e=0;_e<be;++_e)Q[se+_e]=L[H+_e]>>8}function Ke(){tu=Y,Zl=ye,rd=Me,c5=De}function Je(L,H,Q){E[L]=function(se,be,_e,Se,Ee,ke,Pe,$e,et,tt,Ye,_t,ut,Ue,je,yt,St){var bt,Jt=St-1>>1,Ut=Ee[ke+0]|Pe[$e+0]<<16,_r=et[tt+0]|Ye[_t+0]<<16;e(se!=null);var Wt=3*Ut+_r+131074>>2;for(H(se[be+0],255&Wt,Wt>>16,ut,Ue),_e!=null&&(Wt=3*_r+Ut+131074>>2,H(_e[Se+0],255&Wt,Wt>>16,je,yt)),bt=1;bt<=Jt;++bt){var dn=Ee[ke+bt]|Pe[$e+bt]<<16,bn=et[tt+bt]|Ye[_t+bt]<<16,nn=Ut+dn+_r+bn+524296,Xr=nn+2*(dn+_r)>>3;Wt=Xr+Ut>>1,Ut=(nn=nn+2*(Ut+bn)>>3)+dn>>1,H(se[be+2*bt-1],255&Wt,Wt>>16,ut,Ue+(2*bt-1)*Q),H(se[be+2*bt-0],255&Ut,Ut>>16,ut,Ue+(2*bt-0)*Q),_e!=null&&(Wt=nn+_r>>1,Ut=Xr+bn>>1,H(_e[Se+2*bt-1],255&Wt,Wt>>16,je,yt+(2*bt-1)*Q),H(_e[Se+2*bt+0],255&Ut,Ut>>16,je,yt+(2*bt+0)*Q)),Ut=dn,_r=bn}1&St||(Wt=3*Ut+_r+131074>>2,H(se[be+St-1],255&Wt,Wt>>16,ut,Ue+(St-1)*Q),_e!=null&&(Wt=3*_r+Ut+131074>>2,H(_e[Se+St-1],255&Wt,Wt>>16,je,yt+(St-1)*Q)))}}function gt(){Qa[id]=lM,Qa[ad]=x5,Qa[m5]=fM,Qa[od]=S5,Qa[sd]=E5,Qa[Sg]=C5,Qa[y5]=cM,Qa[Eg]=x5,Qa[Cg]=S5,Qa[ud]=E5,Qa[Ag]=C5}function jt(L){return L&~hM?0>L?0:255:L>>A5}function cr(L,H){return jt((19077*L>>8)+(26149*H>>8)-14234)}function yr(L,H,Q){return jt((19077*L>>8)-(6419*H>>8)-(13320*Q>>8)+8708)}function kr(L,H){return jt((19077*L>>8)+(33050*H>>8)-17685)}function Mr(L,H,Q,se,be){se[be+0]=cr(L,Q),se[be+1]=yr(L,H,Q),se[be+2]=kr(L,H)}function sn(L,H,Q,se,be){se[be+0]=kr(L,H),se[be+1]=yr(L,H,Q),se[be+2]=cr(L,Q)}function hn(L,H,Q,se,be){var _e=yr(L,H,Q);H=_e<<3&224|kr(L,H)>>3,se[be+0]=248&cr(L,Q)|_e>>5,se[be+1]=H}function rn(L,H,Q,se,be){var _e=240&kr(L,H)|15;se[be+0]=240&cr(L,Q)|yr(L,H,Q)>>4,se[be+1]=_e}function wi(L,H,Q,se,be){se[be+0]=255,Mr(L,H,Q,se,be+1)}function Sn(L,H,Q,se,be){sn(L,H,Q,se,be),se[be+3]=255}function pi(L,H,Q,se,be){Mr(L,H,Q,se,be),se[be+3]=255}function ca(L,H){return 0>L?0:L>H?H:L}function vo(L,H,Q){E[L]=function(se,be,_e,Se,Ee,ke,Pe,$e,et){for(var tt=$e+(-2&et)*Q;$e!=tt;)H(se[be+0],_e[Se+0],Ee[ke+0],Pe,$e),H(se[be+1],_e[Se+0],Ee[ke+0],Pe,$e+Q),be+=2,++Se,++ke,$e+=2*Q;1&et&&H(se[be+0],_e[Se+0],Ee[ke+0],Pe,$e)}}function Kl(L,H,Q){return Q==0?L==0?H==0?6:5:H==0?4:0:Q}function en(L,H,Q,se,be){switch(L>>>30){case 3:It(H,Q,se,be,0);break;case 2:Vt(H,Q,se,be);break;case 1:Ft(H,Q,se,be)}}function zo(L,H){var Q,se,be=H.M,_e=H.Nb,Se=L.oc,Ee=L.pc+40,ke=L.oc,Pe=L.pc+584,$e=L.oc,et=L.pc+600;for(Q=0;16>Q;++Q)Se[Ee+32*Q-1]=129;for(Q=0;8>Q;++Q)ke[Pe+32*Q-1]=129,$e[et+32*Q-1]=129;for(0<be?Se[Ee-1-32]=ke[Pe-1-32]=$e[et-1-32]=129:(i(Se,Ee-32-1,127,21),i(ke,Pe-32-1,127,9),i($e,et-32-1,127,9)),se=0;se<L.za;++se){var tt=H.ya[H.aa+se];if(0<se){for(Q=-1;16>Q;++Q)n(Se,Ee+32*Q-4,Se,Ee+32*Q+12,4);for(Q=-1;8>Q;++Q)n(ke,Pe+32*Q-4,ke,Pe+32*Q+4,4),n($e,et+32*Q-4,$e,et+32*Q+4,4)}var Ye=L.Gd,_t=L.Hd+se,ut=tt.ad,Ue=tt.Hc;if(0<be&&(n(Se,Ee-32,Ye[_t].y,0,16),n(ke,Pe-32,Ye[_t].f,0,8),n($e,et-32,Ye[_t].ea,0,8)),tt.Za){var je=Se,yt=Ee-32+16;for(0<be&&(se>=L.za-1?i(je,yt,Ye[_t].y[15],4):n(je,yt,Ye[_t+1].y,0,4)),Q=0;4>Q;Q++)je[yt+128+Q]=je[yt+256+Q]=je[yt+384+Q]=je[yt+0+Q];for(Q=0;16>Q;++Q,Ue<<=2)je=Se,yt=Ee+k5[Q],go[tt.Ob[Q]](je,yt),en(Ue,ut,16*+Q,je,yt)}else if(je=Kl(se,be,tt.Ob[0]),ru[je](Se,Ee),Ue!=0)for(Q=0;16>Q;++Q,Ue<<=2)en(Ue,ut,16*+Q,Se,Ee+k5[Q]);for(Q=tt.Gc,je=Kl(se,be,tt.Dd),gs[je](ke,Pe),gs[je]($e,et),Ue=ut,je=ke,yt=Pe,255&(tt=Q>>0)&&(170&tt?er(Ue,256,je,yt):Tr(Ue,256,je,yt)),tt=$e,Ue=et,255&(Q>>=8)&&(170&Q?er(ut,320,tt,Ue):Tr(ut,320,tt,Ue)),be<L.Ub-1&&(n(Ye[_t].y,0,Se,Ee+480,16),n(Ye[_t].f,0,ke,Pe+224,8),n(Ye[_t].ea,0,$e,et+224,8)),Q=8*_e*L.B,Ye=L.sa,_t=L.ta+16*se+16*_e*L.R,ut=L.qa,tt=L.ra+8*se+Q,Ue=L.Ha,je=L.Ia+8*se+Q,Q=0;16>Q;++Q)n(Ye,_t+Q*L.R,Se,Ee+32*Q,16);for(Q=0;8>Q;++Q)n(ut,tt+Q*L.B,ke,Pe+32*Q,8),n(Ue,je+Q*L.B,$e,et+32*Q,8)}}function Di(L,H,Q,se,be,_e,Se,Ee,ke){var Pe=[0],$e=[0],et=0,tt=ke!=null?ke.kd:0,Ye=ke??new He;if(L==null||12>Q)return 7;Ye.data=L,Ye.w=H,Ye.ha=Q,H=[H],Q=[Q],Ye.gb=[Ye.gb];e:{var _t=H,ut=Q,Ue=Ye.gb;if(e(L!=null),e(ut!=null),e(Ue!=null),Ue[0]=0,12<=ut[0]&&!t(L,_t[0],"RIFF")){if(t(L,_t[0]+8,"WEBP")){Ue=3;break e}var je=Le(L,_t[0]+4);if(12>je||4294967286<je){Ue=3;break e}if(tt&&je>ut[0]-8){Ue=7;break e}Ue[0]=je,_t[0]+=12,ut[0]-=12}Ue=0}if(Ue!=0)return Ue;for(je=0<Ye.gb[0],Q=Q[0];;){e:{var yt=L;ut=H,Ue=Q;var St=Pe,bt=$e,Jt=_t=[0];if((Wt=et=[et])[0]=0,8>Ue[0])Ue=7;else{if(!t(yt,ut[0],"VP8X")){if(Le(yt,ut[0]+4)!=10){Ue=3;break e}if(18>Ue[0]){Ue=7;break e}var Ut=Le(yt,ut[0]+8),_r=1+Ce(yt,ut[0]+12);if(2147483648<=_r*(yt=1+Ce(yt,ut[0]+15))){Ue=3;break e}Jt!=null&&(Jt[0]=Ut),St!=null&&(St[0]=_r),bt!=null&&(bt[0]=yt),ut[0]+=18,Ue[0]-=18,Wt[0]=1}Ue=0}}if(et=et[0],_t=_t[0],Ue!=0)return Ue;if(ut=!!(2&_t),!je&&et)return 3;if(_e!=null&&(_e[0]=!!(16&_t)),Se!=null&&(Se[0]=ut),Ee!=null&&(Ee[0]=0),Se=Pe[0],_t=$e[0],et&&ut&&ke==null){Ue=0;break}if(4>Q){Ue=7;break}if(je&&et||!je&&!et&&!t(L,H[0],"ALPH")){Q=[Q],Ye.na=[Ye.na],Ye.P=[Ye.P],Ye.Sa=[Ye.Sa];e:{Ut=L,Ue=H,je=Q;var Wt=Ye.gb;St=Ye.na,bt=Ye.P,Jt=Ye.Sa,_r=22,e(Ut!=null),e(je!=null),yt=Ue[0];var dn=je[0];for(e(St!=null),e(Jt!=null),St[0]=null,bt[0]=null,Jt[0]=0;;){if(Ue[0]=yt,je[0]=dn,8>dn){Ue=7;break e}var bn=Le(Ut,yt+4);if(4294967286<bn){Ue=3;break e}var nn=8+bn+1&-2;if(_r+=nn,0<Wt&&_r>Wt){Ue=3;break e}if(!t(Ut,yt,"VP8 ")||!t(Ut,yt,"VP8L")){Ue=0;break e}if(dn[0]<nn){Ue=7;break e}t(Ut,yt,"ALPH")||(St[0]=Ut,bt[0]=yt+8,Jt[0]=bn),yt+=nn,dn-=nn}}if(Q=Q[0],Ye.na=Ye.na[0],Ye.P=Ye.P[0],Ye.Sa=Ye.Sa[0],Ue!=0)break}Q=[Q],Ye.Ja=[Ye.Ja],Ye.xa=[Ye.xa];e:if(Wt=L,Ue=H,je=Q,St=Ye.gb[0],bt=Ye.Ja,Jt=Ye.xa,Ut=Ue[0],yt=!t(Wt,Ut,"VP8 "),_r=!t(Wt,Ut,"VP8L"),e(Wt!=null),e(je!=null),e(bt!=null),e(Jt!=null),8>je[0])Ue=7;else{if(yt||_r){if(Wt=Le(Wt,Ut+4),12<=St&&Wt>St-12){Ue=3;break e}if(tt&&Wt>je[0]-8){Ue=7;break e}bt[0]=Wt,Ue[0]+=8,je[0]-=8,Jt[0]=_r}else Jt[0]=5<=je[0]&&Wt[Ut+0]==47&&!(Wt[Ut+4]>>5),bt[0]=je[0];Ue=0}if(Q=Q[0],Ye.Ja=Ye.Ja[0],Ye.xa=Ye.xa[0],H=H[0],Ue!=0)break;if(4294967286<Ye.Ja)return 3;if(Ee==null||ut||(Ee[0]=Ye.xa?2:1),Se=[Se],_t=[_t],Ye.xa){if(5>Q){Ue=7;break}Ee=Se,tt=_t,ut=_e,L==null||5>Q?L=0:5<=Q&&L[H+0]==47&&!(L[H+4]>>5)?(je=[0],Wt=[0],St=[0],G(bt=new P,L,H,Q),pt(bt,je,Wt,St)?(Ee!=null&&(Ee[0]=je[0]),tt!=null&&(tt[0]=Wt[0]),ut!=null&&(ut[0]=St[0]),L=1):L=0):L=0}else{if(10>Q){Ue=7;break}Ee=_t,L==null||10>Q||!Zn(L,H+3,Q-3)?L=0:(tt=L[H+0]|L[H+1]<<8|L[H+2]<<16,ut=16383&(L[H+7]<<8|L[H+6]),L=16383&(L[H+9]<<8|L[H+8]),1&tt||3<(tt>>1&7)||!(tt>>4&1)||tt>>5>=Ye.Ja||!ut||!L?L=0:(Se&&(Se[0]=ut),Ee&&(Ee[0]=L),L=1))}if(!L||(Se=Se[0],_t=_t[0],et&&(Pe[0]!=Se||$e[0]!=_t)))return 3;ke!=null&&(ke[0]=Ye,ke.offset=H-ke.w,e(4294967286>H-ke.w),e(ke.offset==ke.ha-Q));break}return Ue==0||Ue==7&&et&&ke==null?(_e!=null&&(_e[0]|=Ye.na!=null&&0<Ye.na.length),se!=null&&(se[0]=Se),be!=null&&(be[0]=_t),0):Ue}function Ka(L,H,Q){var se=H.width,be=H.height,_e=0,Se=0,Ee=se,ke=be;if(H.Da=L!=null&&0<L.Da,H.Da&&(Ee=L.cd,ke=L.bd,_e=L.v,Se=L.j,11>Q||(_e&=-2,Se&=-2),0>_e||0>Se||0>=Ee||0>=ke||_e+Ee>se||Se+ke>be))return 0;if(H.v=_e,H.j=Se,H.va=_e+Ee,H.o=Se+ke,H.U=Ee,H.T=ke,H.da=L!=null&&0<L.da,H.da){if(!ie(Ee,ke,Q=[L.ib],_e=[L.hb]))return 0;H.ib=Q[0],H.hb=_e[0]}return H.ob=L!=null&&L.ob,H.Kb=L==null||!L.Sd,H.da&&(H.ob=H.ib<3*se/4&&H.hb<3*be/4,H.Kb=0),1}function Zu(L){if(L==null)return 2;if(11>L.S){var H=L.f.RGBA;H.fb+=(L.height-1)*H.A,H.A=-H.A}else H=L.f.kb,L=L.height,H.O+=(L-1)*H.fa,H.fa=-H.fa,H.N+=(L-1>>1)*H.Ab,H.Ab=-H.Ab,H.W+=(L-1>>1)*H.Db,H.Db=-H.Db,H.F!=null&&(H.J+=(L-1)*H.lb,H.lb=-H.lb);return 0}function Zs(L,H,Q,se){if(se==null||0>=L||0>=H)return 2;if(Q!=null){if(Q.Da){var be=Q.cd,_e=Q.bd,Se=-2&Q.v,Ee=-2&Q.j;if(0>Se||0>Ee||0>=be||0>=_e||Se+be>L||Ee+_e>H)return 2;L=be,H=_e}if(Q.da){if(!ie(L,H,be=[Q.ib],_e=[Q.hb]))return 2;L=be[0],H=_e[0]}}se.width=L,se.height=H;e:{var ke=se.width,Pe=se.height;if(L=se.S,0>=ke||0>=Pe||!(L>=id&&13>L))L=2;else{if(0>=se.Rd&&se.sd==null){Se=_e=be=H=0;var $e=(Ee=ke*L5[L])*Pe;if(11>L||(_e=(Pe+1)/2*(H=(ke+1)/2),L==12&&(Se=(be=ke)*Pe)),(Pe=a($e+2*_e+Se))==null){L=1;break e}se.sd=Pe,11>L?((ke=se.f.RGBA).eb=Pe,ke.fb=0,ke.A=Ee,ke.size=$e):((ke=se.f.kb).y=Pe,ke.O=0,ke.fa=Ee,ke.Fd=$e,ke.f=Pe,ke.N=0+$e,ke.Ab=H,ke.Cd=_e,ke.ea=Pe,ke.W=0+$e+_e,ke.Db=H,ke.Ed=_e,L==12&&(ke.F=Pe,ke.J=0+$e+2*_e),ke.Tc=Se,ke.lb=be)}if(H=1,be=se.S,_e=se.width,Se=se.height,be>=id&&13>be)if(11>be)L=se.f.RGBA,H&=(Ee=Math.abs(L.A))*(Se-1)+_e<=L.size,H&=Ee>=_e*L5[be],H&=L.eb!=null;else{L=se.f.kb,Ee=(_e+1)/2,$e=(Se+1)/2,ke=Math.abs(L.fa),Pe=Math.abs(L.Ab);var et=Math.abs(L.Db),tt=Math.abs(L.lb),Ye=tt*(Se-1)+_e;H&=ke*(Se-1)+_e<=L.Fd,H&=Pe*($e-1)+Ee<=L.Cd,H=(H&=et*($e-1)+Ee<=L.Ed)&ke>=_e&Pe>=Ee&et>=Ee,H&=L.y!=null,H&=L.f!=null,H&=L.ea!=null,be==12&&(H&=tt>=_e,H&=Ye<=L.Tc,H&=L.F!=null)}else H=0;L=H?0:2}}return L!=0||Q!=null&&Q.fd&&(L=Zu(se)),L}var Ui=64,Ea=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],qo=24,ha=32,Qs=8,ki=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];fe("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(L){return L},E.Predictor2=function(L,H,Q){return H[Q+0]},E.Predictor3=function(L,H,Q){return H[Q+1]},E.Predictor4=function(L,H,Q){return H[Q-1]},E.Predictor5=function(L,H,Q){return ge(ge(L,H[Q+1]),H[Q+0])},E.Predictor6=function(L,H,Q){return ge(L,H[Q-1])},E.Predictor7=function(L,H,Q){return ge(L,H[Q+0])},E.Predictor8=function(L,H,Q){return ge(H[Q-1],H[Q+0])},E.Predictor9=function(L,H,Q){return ge(H[Q+0],H[Q+1])},E.Predictor10=function(L,H,Q){return ge(ge(L,H[Q-1]),ge(H[Q+0],H[Q+1]))},E.Predictor11=function(L,H,Q){var se=H[Q+0];return 0>=ce(se>>24&255,L>>24&255,(H=H[Q-1])>>24&255)+ce(se>>16&255,L>>16&255,H>>16&255)+ce(se>>8&255,L>>8&255,H>>8&255)+ce(255&se,255&L,255&H)?se:L},E.Predictor12=function(L,H,Q){var se=H[Q+0];return(me((L>>24&255)+(se>>24&255)-((H=H[Q-1])>>24&255))<<24|me((L>>16&255)+(se>>16&255)-(H>>16&255))<<16|me((L>>8&255)+(se>>8&255)-(H>>8&255))<<8|me((255&L)+(255&se)-(255&H)))>>>0},E.Predictor13=function(L,H,Q){var se=H[Q-1];return(ue((L=ge(L,H[Q+0]))>>24&255,se>>24&255)<<24|ue(L>>16&255,se>>16&255)<<16|ue(L>>8&255,se>>8&255)<<8|ue(L>>0&255,se>>0&255))>>>0};var Js=E.PredictorAdd0;E.PredictorAdd1=oe,fe("Predictor2","PredictorAdd2"),fe("Predictor3","PredictorAdd3"),fe("Predictor4","PredictorAdd4"),fe("Predictor5","PredictorAdd5"),fe("Predictor6","PredictorAdd6"),fe("Predictor7","PredictorAdd7"),fe("Predictor8","PredictorAdd8"),fe("Predictor9","PredictorAdd9"),fe("Predictor10","PredictorAdd10"),fe("Predictor11","PredictorAdd11"),fe("Predictor12","PredictorAdd12"),fe("Predictor13","PredictorAdd13");var Go=E.PredictorAdd2;Fe("ColorIndexInverseTransform","MapARGB","32b",function(L){return L>>8&255},function(L){return L}),Fe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(L){return L},function(L){return L>>8&255});var eu,Ba=E.ColorIndexInverseTransform,$o=E.MapARGB,Qu=E.VP8LColorIndexInverseTransformAlpha,Ju=E.MapAlpha,Uo=E.VP8LPredictorsAdd=[];Uo.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var Ji,Ca,Ne,qe,Qe,it,lt,It,Vt,er,Ft,Tr,dr,wr,Or,lr,un,Pn,Bn,Ur,Wr,En,Qr,vs,tu,Zl,rd,c5,h5=a(511),d5=a(2041),p5=a(225),v5=a(767),g5=0,xg=d5,nd=p5,za=v5,Za=h5,id=0,ad=1,m5=2,od=3,sd=4,Sg=5,y5=6,Eg=7,Cg=8,ud=9,Ag=10,X4=[2,3,7],K4=[3,3,11],b5=[280,256,256,256,40],Z4=[0,1,1,1,0],Q4=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],J4=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],eM=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],tM=8,Tg=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],kg=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],xc=null,rM=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],nM=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],w5=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],iM=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],aM=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],oM=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],sM=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ru=[],go=[],gs=[],uM=1,_5=2,nu=[],Qa=[];Je("UpsampleRgbLinePair",Mr,3),Je("UpsampleBgrLinePair",sn,3),Je("UpsampleRgbaLinePair",pi,4),Je("UpsampleBgraLinePair",Sn,4),Je("UpsampleArgbLinePair",wi,4),Je("UpsampleRgba4444LinePair",rn,2),Je("UpsampleRgb565LinePair",hn,2);var lM=E.UpsampleRgbLinePair,fM=E.UpsampleBgrLinePair,x5=E.UpsampleRgbaLinePair,S5=E.UpsampleBgraLinePair,E5=E.UpsampleArgbLinePair,C5=E.UpsampleRgba4444LinePair,cM=E.UpsampleRgb565LinePair,ld=16,fd=1<<ld-1,Sc=-227,Lg=482,A5=6,hM=(256<<A5)-1,T5=0,dM=a(256),pM=a(256),vM=a(256),gM=a(256),mM=a(Lg-Sc),yM=a(Lg-Sc);vo("YuvToRgbRow",Mr,3),vo("YuvToBgrRow",sn,3),vo("YuvToRgbaRow",pi,4),vo("YuvToBgraRow",Sn,4),vo("YuvToArgbRow",wi,4),vo("YuvToRgba4444Row",rn,2),vo("YuvToRgb565Row",hn,2);var k5=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],cd=[0,2,8],bM=[8,7,6,4,4,2,2,2,1,1,1,1],wM=1;this.WebPDecodeRGBA=function(L,H,Q,se,be){var _e=ad,Se=new Oe,Ee=new vt;Se.ba=Ee,Ee.S=_e,Ee.width=[Ee.width],Ee.height=[Ee.height];var ke=Ee.width,Pe=Ee.height,$e=new Et;if($e==null||L==null)var et=2;else e($e!=null),et=Di(L,H,Q,$e.width,$e.height,$e.Pd,$e.Qd,$e.format,null);if(et!=0?ke=0:(ke!=null&&(ke[0]=$e.width[0]),Pe!=null&&(Pe[0]=$e.height[0]),ke=1),ke){Ee.width=Ee.width[0],Ee.height=Ee.height[0],se!=null&&(se[0]=Ee.width),be!=null&&(be[0]=Ee.height);e:{if(se=new Pr,(be=new He).data=L,be.w=H,be.ha=Q,be.kd=1,H=[0],e(be!=null),((L=Di(be.data,be.w,be.ha,null,null,null,H,null,be))==0||L==7)&&H[0]&&(L=4),(H=L)==0){if(e(Se!=null),se.data=be.data,se.w=be.w+be.offset,se.ha=be.ha-be.offset,se.put=nr,se.ac=Tt,se.bc=$t,se.ma=Se,be.xa){if((L=Rr())==null){Se=1;break e}if(function(tt,Ye){var _t=[0],ut=[0],Ue=[0];t:for(;;){if(tt==null)return 0;if(Ye==null)return tt.a=2,0;if(tt.l=Ye,tt.a=0,G(tt.m,Ye.data,Ye.w,Ye.ha),!pt(tt.m,_t,ut,Ue)){tt.a=3;break t}if(tt.xb=_5,Ye.width=_t[0],Ye.height=ut[0],!Fr(_t[0],ut[0],1,tt,null))break t;return 1}return e(tt.a!=0),0}(L,se)){if(se=(H=Zs(se.width,se.height,Se.Oa,Se.ba))==0){t:{se=L;r:for(;;){if(se==null){se=0;break t}if(e(se.s.yc!=null),e(se.s.Ya!=null),e(0<se.s.Wb),e((Q=se.l)!=null),e((be=Q.ma)!=null),se.xb!=0){if(se.ca=be.ba,se.tb=be.tb,e(se.ca!=null),!Ka(be.Oa,Q,od)){se.a=2;break r}if(!gr(se,Q.width)||Q.da)break r;if((Q.da||ft(se.ca.S))&&Ke(),11>se.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),se.ca.f.kb.F!=null&&Ke()),se.Pb&&0<se.s.ua&&se.s.vb.X==null&&!K(se.s.vb,se.s.Wa.Xa)){se.a=1;break r}se.xb=0}if(!br(se,se.V,se.Ba,se.c,se.i,Q.o,ct))break r;be.Dc=se.Ma,se=1;break t}e(se.a!=0),se=0}se=!se}se&&(H=L.a)}else H=L.a}else{if((L=new Nn)==null){Se=1;break e}if(L.Fa=be.na,L.P=be.P,L.qc=be.Sa,la(L,se)){if((H=Zs(se.width,se.height,Se.Oa,Se.ba))==0){if(L.Aa=0,Q=Se.Oa,e((be=L)!=null),Q!=null){if(0<(ke=0>(ke=Q.Md)?0:100<ke?255:255*ke/100)){for(Pe=$e=0;4>Pe;++Pe)12>(et=be.pb[Pe]).lc&&(et.ia=ke*bM[0>et.lc?0:et.lc]>>3),$e|=et.ia;$e&&(alert("todo:VP8InitRandom"),be.ia=1)}be.Ga=Q.Id,100<be.Ga?be.Ga=100:0>be.Ga&&(be.Ga=0)}dc(L,se)||(H=L.a)}}else H=L.a}H==0&&Se.Oa!=null&&Se.Oa.fd&&(H=Zu(Se.ba))}Se=H}_e=Se!=0?null:11>_e?Ee.f.RGBA.eb:Ee.f.kb.y}else _e=null;return _e};var L5=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function l(E,k){for(var M="",T=0;T<4;T++)M+=String.fromCharCode(E[k++]);return M}function f(E,k){return(E[k+0]<<0|E[k+1]<<8|E[k+2]<<16)>>>0}function c(E,k){return(E[k+0]<<0|E[k+1]<<8|E[k+2]<<16|E[k+3]<<24)>>>0}new u;var d=[0],h=[0],p=[],g=new u,b=r,v=function(E,k){var M={},T=0,C=!1,R=0,x=0;if(M.frames=[],!function(q,F,U,W){for(var X=0;X<W;X++)if(q[F+X]!=U.charCodeAt(X))return!0;return!1}(E,k,"RIFF",4)){var B,D;for(c(E,k+=4),k+=8;k<E.length;){var O=l(E,k),G=c(E,k+=4);k+=4;var V=G+(1&G);switch(O){case"VP8 ":case"VP8L":M.frames[T]===void 0&&(M.frames[T]={}),(P=M.frames[T]).src_off=C?x:k-8,P.src_size=R+G+8,T++,C&&(C=!1,R=0,x=0);break;case"VP8X":(P=M.header={}).feature_flags=E[k];var I=k+4;P.canvas_width=1+f(E,I),I+=3,P.canvas_height=1+f(E,I),I+=3;break;case"ALPH":C=!0,R=V+8,x=k-8;break;case"ANIM":(P=M.header).bgcolor=c(E,k),I=k+4,P.loop_count=(B=E)[(D=I)+0]<<0|B[D+1]<<8,I+=2;break;case"ANMF":var z,P;(P=M.frames[T]={}).offset_x=2*f(E,k),k+=3,P.offset_y=2*f(E,k),k+=3,P.width=1+f(E,k),k+=3,P.height=1+f(E,k),k+=3,P.duration=f(E,k),k+=3,z=E[k++],P.dispose=1&z,P.blend=z>>1&1}O!="ANMF"&&(k+=V)}return M}}(b,0);v.response=b,v.rgbaoutput=!0,v.dataurl=!1;var y=v.header?v.header:null,m=v.frames?v.frames:null;if(y){y.loop_counter=y.loop_count,d=[y.canvas_height],h=[y.canvas_width];for(var w=0;w<m.length&&m[w].blend!=0;w++);}var S=m[0],A=g.WebPDecodeRGBA(b,S.src_off,S.src_size,h,d);S.rgba=A,S.imgwidth=h[0],S.imgheight=d[0];for(var _=0;_<h[0]*d[0]*4;_++)p[_]=A[_];return this.width=h,this.height=d,this.data=p,this}(function(r){var e=function(){return typeof C2=="function"},t=function(d,h,p,g){var b=4,v=o;switch(g){case r.image_compression.FAST:b=1,v=a;break;case r.image_compression.MEDIUM:b=6,v=s;break;case r.image_compression.SLOW:b=9,v=u}d=n(d,h,p,v);var y=C2(d,{level:b});return r.__addimage__.arrayBufferToBinaryString(y)},n=function(d,h,p,g){for(var b,v,y,m=d.length/h,w=new Uint8Array(d.length+m),S=f(),A=0;A<m;A+=1){if(y=A*h,b=d.subarray(y,y+h),g)w.set(g(b,p,v),y+A);else{for(var _,E=S.length,k=[];_<E;_+=1)k[_]=S[_](b,p,v);var M=c(k.concat());w.set(k[M],y+A)}v=b}return w},i=function(d){var h=Array.apply([],d);return h.unshift(0),h},a=function(d,h){var p,g=[],b=d.length;g[0]=1;for(var v=0;v<b;v+=1)p=d[v-h]||0,g[v+1]=d[v]-p+256&255;return g},o=function(d,h,p){var g,b=[],v=d.length;b[0]=2;for(var y=0;y<v;y+=1)g=p&&p[y]||0,b[y+1]=d[y]-g+256&255;return b},s=function(d,h,p){var g,b,v=[],y=d.length;v[0]=3;for(var m=0;m<y;m+=1)g=d[m-h]||0,b=p&&p[m]||0,v[m+1]=d[m]+256-(g+b>>>1)&255;return v},u=function(d,h,p){var g,b,v,y,m=[],w=d.length;m[0]=4;for(var S=0;S<w;S+=1)g=d[S-h]||0,b=p&&p[S]||0,v=p&&p[S-h]||0,y=l(g,b,v),m[S+1]=d[S]-y+256&255;return m},l=function(d,h,p){if(d===h&&h===p)return d;var g=Math.abs(h-p),b=Math.abs(d-p),v=Math.abs(d+h-p-p);return g<=b&&g<=v?d:b<=v?h:p},f=function(){return[i,a,o,s,u]},c=function(d){var h=d.map(function(p){return p.reduce(function(g,b){return g+Math.abs(b)},0)});return h.indexOf(Math.min.apply(null,h))};r.processPNG=function(d,h,p,g){var b,v,y,m,w,S,A,_,E,k,M,T,C,R,x,B=this.decode.FLATE_DECODE,D="";if(this.__addimage__.isArrayBuffer(d)&&(d=new Uint8Array(d)),this.__addimage__.isArrayBufferView(d)){if(d=(y=new Bq(d)).imgData,v=y.bits,b=y.colorSpace,w=y.colors,[4,6].indexOf(y.colorType)!==-1){if(y.bits===8){E=(_=y.pixelBitlength==32?new Uint32Array(y.decodePixels().buffer):y.pixelBitlength==16?new Uint16Array(y.decodePixels().buffer):new Uint8Array(y.decodePixels().buffer)).length,M=new Uint8Array(E*y.colors),k=new Uint8Array(E);var O,G=y.pixelBitlength-y.bits;for(R=0,x=0;R<E;R++){for(C=_[R],O=0;O<G;)M[x++]=C>>>O&255,O+=y.bits;k[R]=C>>>O&255}}if(y.bits===16){E=(_=new Uint32Array(y.decodePixels().buffer)).length,M=new Uint8Array(E*(32/y.pixelBitlength)*y.colors),k=new Uint8Array(E*(32/y.pixelBitlength)),T=y.colors>1,R=0,x=0;for(var V=0;R<E;)C=_[R++],M[x++]=C>>>0&255,T&&(M[x++]=C>>>16&255,C=_[R++],M[x++]=C>>>0&255),k[V++]=C>>>16&255;v=8}g!==r.image_compression.NONE&&e()?(d=t(M,y.width*y.colors,y.colors,g),A=t(k,y.width,1,g)):(d=M,A=k,B=void 0)}if(y.colorType===3&&(b=this.color_spaces.INDEXED,S=y.palette,y.transparency.indexed)){var I=y.transparency.indexed,z=0;for(R=0,E=I.length;R<E;++R)z+=I[R];if((z/=255)===E-1&&I.indexOf(0)!==-1)m=[I.indexOf(0)];else if(z!==E){for(_=y.decodePixels(),k=new Uint8Array(_.length),R=0,E=_.length;R<E;R++)k[R]=I[_[R]];A=t(k,y.width,1)}}var P=function(q){var F;switch(q){case r.image_compression.FAST:F=11;break;case r.image_compression.MEDIUM:F=13;break;case r.image_compression.SLOW:F=14;break;default:F=12}return F}(g);return B===this.decode.FLATE_DECODE&&(D="/Predictor "+P+" "),D+="/Colors "+w+" /BitsPerComponent "+v+" /Columns "+y.width,(this.__addimage__.isArrayBuffer(d)||this.__addimage__.isArrayBufferView(d))&&(d=this.__addimage__.arrayBufferToBinaryString(d)),(A&&this.__addimage__.isArrayBuffer(A)||this.__addimage__.isArrayBufferView(A))&&(A=this.__addimage__.arrayBufferToBinaryString(A)),{alias:p,data:d,index:h,filter:B,decodeParameters:D,transparency:m,palette:S,sMask:A,predictor:P,width:y.width,height:y.height,bitsPerComponent:v,colorSpace:b}}}})(xr.API),function(r){r.processGIF89A=function(e,t,n,i){var a=new zq(e),o=a.width,s=a.height,u=[];a.decodeAndBlitFrameRGBA(0,u);var l={data:u,width:o,height:s},f=new _m(100).encode(l,100);return r.processJPEG.call(this,f,t,n,i)},r.processGIF87A=r.processGIF89A}(xr.API),bo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var e=0;e<r;e++){var t=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:n,blue:t,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},bo.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[r]()}catch(t){On.log("bit decode error:"+t)}},bo.prototype.bit1=function(){var r,e=Math.ceil(this.width/8),t=e%4;for(r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<e;i++)for(var a=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*i*4,s=0;s<8&&8*i+s<this.width;s++){var u=this.palette[a>>7-s&1];this.data[o+4*s]=u.blue,this.data[o+4*s+1]=u.green,this.data[o+4*s+2]=u.red,this.data[o+4*s+3]=255}t!==0&&(this.pos+=4-t)}},bo.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),e=r%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<r;i++){var a=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*i*4,s=a>>4,u=15&a,l=this.palette[s];if(this.data[o]=l.blue,this.data[o+1]=l.green,this.data[o+2]=l.red,this.data[o+3]=255,2*i+1>=this.width)break;l=this.palette[u],this.data[o+4]=l.blue,this.data[o+4+1]=l.green,this.data[o+4+2]=l.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},bo.prototype.bit8=function(){for(var r=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;if(i<this.palette.length){var o=this.palette[i];this.data[a]=o.red,this.data[a+1]=o.green,this.data[a+2]=o.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}r!==0&&(this.pos+=4-r)}},bo.prototype.bit15=function(){for(var r=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,s=(a>>5&e)/e*255|0,u=(a>>10&e)/e*255|0,l=a>>15?255:0,f=n*this.width*4+4*i;this.data[f]=u,this.data[f+1]=s,this.data[f+2]=o,this.data[f+3]=l}this.pos+=r}},bo.prototype.bit16=function(){for(var r=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,u=(o>>5&t)/t*255|0,l=(o>>11)/e*255|0,f=i*this.width*4+4*a;this.data[f]=l,this.data[f+1]=u,this.data[f+2]=s,this.data[f+3]=255}this.pos+=r}},bo.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},bo.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*t;this.data[s]=a,this.data[s+1]=i,this.data[s+2]=n,this.data[s+3]=o}},bo.prototype.getData=function(){return this.data},function(r){r.processBMP=function(e,t,n,i){var a=new bo(e,!1),o=a.width,s=a.height,u={data:a.getData(),width:o,height:s},l=new _m(100).encode(u,100);return r.processJPEG.call(this,l,t,n,i)}}(xr.API),Zx.prototype.getData=function(){return this.data},function(r){r.processWEBP=function(e,t,n,i){var a=new Zx(e),o=a.width,s=a.height,u={data:a.getData(),width:o,height:s},l=new _m(100).encode(u,100);return r.processJPEG.call(this,l,t,n,i)}}(xr.API),xr.API.processRGBA=function(r,e,t){for(var n=r.data,i=n.length,a=new Uint8Array(i/4*3),o=new Uint8Array(i/4),s=0,u=0,l=0;l<i;l+=4){var f=n[l],c=n[l+1],d=n[l+2],h=n[l+3];a[s++]=f,a[s++]=c,a[s++]=d,o[u++]=h}var p=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:p,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},xr.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},cf=xr.API,Bd=cf.getCharWidthsArray=function(r,e){var t,n,i=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),s=e.widths?e.widths:i.metadata.Unicode.widths,u=s.fof?s.fof:1,l=e.kerning?e.kerning:i.metadata.Unicode.kerning,f=l.fof?l.fof:1,c=e.doKerning!==!1,d=0,h=r.length,p=0,g=s[0]||u,b=[];for(t=0;t<h;t++)n=r.charCodeAt(t),typeof i.metadata.widthOfString=="function"?b.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+o*(1e3/a)||0)/1e3):(d=c&&_n(l[n])==="object"&&!isNaN(parseInt(l[n][p],10))?l[n][p]/f:0,b.push((s[n]||g)/u+d)),p=n;return b},Wx=cf.getStringUnitWidth=function(r,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return cf.processArabic&&(r=cf.processArabic(r)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(r,t,i)/t:Bd.apply(this,arguments).reduce(function(a,o){return a+o},0)},Yx=function(r,e,t,n){for(var i=[],a=0,o=r.length,s=0;a!==o&&s+e[a]<t;)s+=e[a],a++;i.push(r.slice(0,a));var u=a;for(s=0;a!==o;)s+e[a]>n&&(i.push(r.slice(u,a)),s=0,u=a),s+=e[a],a++;return u!==a&&i.push(r.slice(u,a)),i},Xx=function(r,e,t){t||(t={});var n,i,a,o,s,u,l,f=[],c=[f],d=t.textIndent||0,h=0,p=0,g=r.split(" "),b=Bd.apply(this,[" ",t])[0];if(u=t.lineIndent===-1?g[0].length+2:t.lineIndent||0){var v=Array(u).join(" "),y=[];g.map(function(w){(w=w.split(/\s*\n/)).length>1?y=y.concat(w.map(function(S,A){return(A&&S.length?`
`:"")+S})):y.push(w[0])}),g=y,u=Wx.apply(this,[v,t])}for(a=0,o=g.length;a<o;a++){var m=0;if(n=g[a],u&&n[0]==`
`&&(n=n.substr(1),m=1),d+h+(p=(i=Bd.apply(this,[n,t])).reduce(function(w,S){return w+S},0))>e||m){if(p>e){for(s=Yx.apply(this,[n,i,e-(d+h),e]),f.push(s.shift()),f=[s.pop()];s.length;)c.push([s.shift()]);p=i.slice(n.length-(f[0]?f[0].length:0)).reduce(function(w,S){return w+S},0)}else f=[n];c.push(f),d=p+u,h=b}else f.push(n),d+=h+p,h=b}return l=u?function(w,S){return(S?v:"")+w.join(" ")}:function(w){return w.join(" ")},c.map(l)},cf.splitTextToSize=function(r,e,t){var n,i=(t=t||{}).fontSize||this.internal.getFontSize(),a=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var c=this.internal.getFont(f.fontName,f.fontStyle);return c.metadata.Unicode?{widths:c.metadata.Unicode.widths||{0:1},kerning:c.metadata.Unicode.kerning||{}}:{font:c.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);n=Array.isArray(r)?r:String(r).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;a.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=t.lineIndent;var s,u,l=[];for(s=0,u=n.length;s<u;s++)l=l.concat(Xx.apply(this,[n[s],o,a]));return l},function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},n={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],n["0123456789abcdef"[i]]=e[i];var a=function(c){return"0x"+parseInt(c,10).toString(16)},o=r.__fontmetrics__.compress=function(c){var d,h,p,g,b=["{"];for(var v in c){if(d=c[v],isNaN(parseInt(v,10))?h="'"+v+"'":(v=parseInt(v,10),h=(h=a(v).slice(2)).slice(0,-1)+n[h.slice(-1)]),typeof d=="number")d<0?(p=a(d).slice(3),g="-"):(p=a(d).slice(2),g=""),p=g+p.slice(0,-1)+n[p.slice(-1)];else{if(_n(d)!=="object")throw new Error("Don't know what to do with value type "+_n(d)+".");p=o(d)}b.push(h+p)}return b.push("}"),b.join("")},s=r.__fontmetrics__.uncompress=function(c){if(typeof c!="string")throw new Error("Invalid argument passed to uncompress.");for(var d,h,p,g,b={},v=1,y=b,m=[],w="",S="",A=c.length-1,_=1;_<A;_+=1)(g=c[_])=="'"?d?(p=d.join(""),d=void 0):d=[]:d?d.push(g):g=="{"?(m.push([y,p]),y={},p=void 0):g=="}"?((h=m.pop())[0][h[1]]=y,p=void 0,y=h[0]):g=="-"?v=-1:p===void 0?t.hasOwnProperty(g)?(w+=t[g],p=parseInt(w,16)*v,v=1,w=""):w+=g:t.hasOwnProperty(g)?(S+=t[g],y[p]=parseInt(S,16)*v,v=1,p=void 0,S=""):S+=g;return b},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:s("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},l={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":s("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":s("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:s("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:s("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":s("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":s("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(c){var d=c.font,h=f.Unicode[d.postScriptName];h&&(d.metadata.Unicode={},d.metadata.Unicode.widths=h.widths,d.metadata.Unicode.kerning=h.kerning);var p=l.Unicode[d.postScriptName];p&&(d.metadata.Unicode.encoding=p,d.encoding=p.codePages[0])}])}(xr.API),function(r){var e=function(t){for(var n=t.length,i=new Uint8Array(n),a=0;a<n;a++)i[a]=t.charCodeAt(a);return i};r.API.events.push(["addFont",function(t){var n=void 0,i=t.font,a=t.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,s){s=/^\x00\x01\x00\x00/.test(s)?e(s):e(sh(s)),o.metadata=r.API.TTFFont.open(s),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,n)}}])}(xr),function(r){function e(){return(Cr.canvg?Promise.resolve(Cr.canvg):w2(()=>import("./index.es-7d994066.js"),[],import.meta.url)).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}xr.API.addSvgAsImage=function(t,n,i,a,o,s,u,l){if(isNaN(n)||isNaN(i))throw On.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(o))throw On.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=a,f.height=o;var c=f.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,f.width,f.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return e().then(function(p){return p.fromString(c,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(d)}).then(function(){h.addImage(f.toDataURL("image/jpeg",1),n,i,a,o,u,l)})}}(),xr.API.putTotalPages=function(r){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(r,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(e,t);return this},xr.API.viewerPreferences=function(r,e){var t;r=r||{},e=e||!1;var n,i,a,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(o),u=[],l=0,f=0,c=0;function d(p,g){var b,v=!1;for(b=0;b<p.length;b+=1)p[b]===g&&(v=!0);return v}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,r==="reset"||e===!0){var h=s.length;for(c=0;c<h;c+=1)t[s[c]].value=t[s[c]].defaultValue,t[s[c]].explicitSet=!1}if(_n(r)==="object"){for(i in r)if(a=r[i],d(s,i)&&a!==void 0){if(t[i].type==="boolean"&&typeof a=="boolean")t[i].value=a;else if(t[i].type==="name"&&d(t[i].valueSet,a))t[i].value=a;else if(t[i].type==="integer"&&Number.isInteger(a))t[i].value=a;else if(t[i].type==="array"){for(l=0;l<a.length;l+=1)if(n=!0,a[l].length===1&&typeof a[l][0]=="number")u.push(String(a[l]-1));else if(a[l].length>1){for(f=0;f<a[l].length;f+=1)typeof a[l][f]!="number"&&(n=!1);n===!0&&u.push([a[l][0]-1,a[l][1]-1].join(" "))}t[i].value="["+u.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var p,g=[];for(p in t)t[p].explicitSet===!0&&(t[p].type==="name"?g.push("/"+p+" /"+t[p].value):g.push("/"+p+" "+t[p].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(r){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),u=unescape(encodeURIComponent("</x:xmpmeta>")),l=a.length+o.length+s.length+i.length+u.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+l+" >>"),this.internal.write("stream"),this.internal.write(i+a+o+s+u),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(xr.API),function(r){var e=r.API,t=e.pdfEscape16=function(a,o){for(var s,u=o.metadata.Unicode.widths,l=["","0","00","000","0000"],f=[""],c=0,d=a.length;c<d;++c){if(s=o.metadata.characterToGlyph(a.charCodeAt(c)),o.metadata.glyIdsUsed.push(s),o.metadata.toUnicode[s]=a.charCodeAt(c),u.indexOf(s)==-1&&(u.push(s),u.push([parseInt(o.metadata.widthOfGlyph(s),10)])),s=="0")return f.join("");s=s.toString(16),f.push(l[4-s.length],s)}return f.join("")},n=function(a){var o,s,u,l,f,c,d;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,u=[],c=0,d=(s=Object.keys(a).sort(function(h,p){return h-p})).length;c<d;c++)o=s[c],u.length>=100&&(f+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar`,u=[]),a[o]!==void 0&&a[o]!==null&&typeof a[o].toString=="function"&&(l=("0000"+a[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),u.push("<"+o+"><"+l+">"));return u.length&&(f+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar
`),f+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(o){var s=o.font,u=o.out,l=o.newObject,f=o.putStream;if(s.metadata instanceof r.API.TTFFont&&s.encoding==="Identity-H"){for(var c=s.metadata.Unicode.widths,d=s.metadata.subset.encode(s.metadata.glyIdsUsed,1),h="",p=0;p<d.length;p++)h+=String.fromCharCode(d[p]);var g=l();f({data:h,addLength1:!0,objectId:g}),u("endobj");var b=l();f({data:n(s.metadata.toUnicode),addLength1:!0,objectId:b}),u("endobj");var v=l();u("<<"),u("/Type /FontDescriptor"),u("/FontName /"+_f(s.fontName)),u("/FontFile2 "+g+" 0 R"),u("/FontBBox "+r.API.PDFObject.convert(s.metadata.bbox)),u("/Flags "+s.metadata.flags),u("/StemV "+s.metadata.stemV),u("/ItalicAngle "+s.metadata.italicAngle),u("/Ascent "+s.metadata.ascender),u("/Descent "+s.metadata.decender),u("/CapHeight "+s.metadata.capHeight),u(">>"),u("endobj");var y=l();u("<<"),u("/Type /Font"),u("/BaseFont /"+_f(s.fontName)),u("/FontDescriptor "+v+" 0 R"),u("/W "+r.API.PDFObject.convert(c)),u("/CIDToGIDMap /Identity"),u("/DW 1000"),u("/Subtype /CIDFontType2"),u("/CIDSystemInfo"),u("<<"),u("/Supplement 0"),u("/Registry (Adobe)"),u("/Ordering ("+s.encoding+")"),u(">>"),u(">>"),u("endobj"),s.objectNumber=l(),u("<<"),u("/Type /Font"),u("/Subtype /Type0"),u("/ToUnicode "+b+" 0 R"),u("/BaseFont /"+_f(s.fontName)),u("/Encoding /"+s.encoding),u("/DescendantFonts ["+y+" 0 R]"),u(">>"),u("endobj"),s.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(o){var s=o.font,u=o.out,l=o.newObject,f=o.putStream;if(s.metadata instanceof r.API.TTFFont&&s.encoding==="WinAnsiEncoding"){for(var c=s.metadata.rawData,d="",h=0;h<c.length;h++)d+=String.fromCharCode(c[h]);var p=l();f({data:d,addLength1:!0,objectId:p}),u("endobj");var g=l();f({data:n(s.metadata.toUnicode),addLength1:!0,objectId:g}),u("endobj");var b=l();u("<<"),u("/Descent "+s.metadata.decender),u("/CapHeight "+s.metadata.capHeight),u("/StemV "+s.metadata.stemV),u("/Type /FontDescriptor"),u("/FontFile2 "+p+" 0 R"),u("/Flags 96"),u("/FontBBox "+r.API.PDFObject.convert(s.metadata.bbox)),u("/FontName /"+_f(s.fontName)),u("/ItalicAngle "+s.metadata.italicAngle),u("/Ascent "+s.metadata.ascender),u(">>"),u("endobj"),s.objectNumber=l();for(var v=0;v<s.metadata.hmtx.widths.length;v++)s.metadata.hmtx.widths[v]=parseInt(s.metadata.hmtx.widths[v]*(1e3/s.metadata.head.unitsPerEm));u("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+_f(s.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+s.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(s.metadata.hmtx.widths)+">>"),u("endobj"),s.isAlreadyPutted=!0}})(a)}]);var i=function(a){var o,s=a.text||"",u=a.x,l=a.y,f=a.options||{},c=a.mutex||{},d=c.pdfEscape,h=c.activeFontKey,p=c.fonts,g=h,b="",v=0,y="",m=p[g].encoding;if(p[g].encoding!=="Identity-H")return{text:s,x:u,y:l,options:f,mutex:c};for(y=s,g=h,Array.isArray(s)&&(y=s[0]),v=0;v<y.length;v+=1)p[g].metadata.hasOwnProperty("cmap")&&(o=p[g].metadata.cmap.unicode.codeMap[y[v].charCodeAt(0)]),o||y[v].charCodeAt(0)<256&&p[g].metadata.hasOwnProperty("Unicode")?b+=y[v]:b+="";var w="";return parseInt(g.slice(1))<14||m==="WinAnsiEncoding"?w=d(b,g).split("").map(function(S){return S.charCodeAt(0).toString(16)}).join(""):m==="Identity-H"&&(w=t(b,p[g])),c.isHex=!0,{text:w,x:u,y:l,options:f,mutex:c}};e.events.push(["postProcessText",function(a){var o=a.text||"",s=[],u={text:o,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(o)){var l=0;for(l=0;l<o.length;l+=1)Array.isArray(o[l])&&o[l].length===3?s.push([i(Object.assign({},u,{text:o[l][0]})).text,o[l][1],o[l][2]]):s.push(i(Object.assign({},u,{text:o[l]})).text);a.text=s}else a.text=i(Object.assign({},u,{text:o})).text}])}(xr),function(r){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},r.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},r.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(xr.API),function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(n){var i,a,o,s,u,l,f,c=e,d=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],p={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],v=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),y=!1,m=0;this.__bidiEngine__={};var w=function(T){var C=T.charCodeAt(),R=C>>8,x=g[R];return x!==void 0?c[256*x+(255&C)]:R===252||R===253?"AL":v.test(R)?"L":R===8?"R":"N"},S=function(T){for(var C,R=0;R<T.length;R++){if((C=w(T.charAt(R)))==="L")return!1;if(C==="R")return!0}return!1},A=function(T,C,R,x){var B,D,O,G,V=C[x];switch(V){case"L":case"R":y=!1;break;case"N":case"AN":break;case"EN":y&&(V="AN");break;case"AL":y=!0,V="R";break;case"WS":V="N";break;case"CS":x<1||x+1>=C.length||(B=R[x-1])!=="EN"&&B!=="AN"||(D=C[x+1])!=="EN"&&D!=="AN"?V="N":y&&(D="AN"),V=D===B?D:"N";break;case"ES":V=(B=x>0?R[x-1]:"B")==="EN"&&x+1<C.length&&C[x+1]==="EN"?"EN":"N";break;case"ET":if(x>0&&R[x-1]==="EN"){V="EN";break}if(y){V="N";break}for(O=x+1,G=C.length;O<G&&C[O]==="ET";)O++;V=O<G&&C[O]==="EN"?"EN":"N";break;case"NSM":if(o&&!s){for(G=C.length,O=x+1;O<G&&C[O]==="NSM";)O++;if(O<G){var I=T[x],z=I>=1425&&I<=2303||I===64286;if(B=C[O],z&&(B==="R"||B==="AL")){V="R";break}}}V=x<1||(B=C[x-1])==="B"?"N":R[x-1];break;case"B":y=!1,i=!0,V=m;break;case"S":a=!0,V="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":y=!1;break;case"BN":V="N"}return V},_=function(T,C,R){var x=T.split("");return R&&E(x,R,{hiLevel:m}),x.reverse(),C&&C.reverse(),x.join("")},E=function(T,C,R){var x,B,D,O,G,V=-1,I=T.length,z=0,P=[],q=m?h:d,F=[];for(y=!1,i=!1,a=!1,B=0;B<I;B++)F[B]=w(T[B]);for(D=0;D<I;D++){if(G=z,P[D]=A(T,F,P,D),x=240&(z=q[G][p[P[D]]]),z&=15,C[D]=O=q[z][5],x>0)if(x===16){for(B=V;B<D;B++)C[B]=1;V=-1}else V=-1;if(q[z][6])V===-1&&(V=D);else if(V>-1){for(B=V;B<D;B++)C[B]=O;V=-1}F[D]==="B"&&(C[D]=0),R.hiLevel|=O}a&&function(U,W,X){for(var te=0;te<X;te++)if(U[te]==="S"){W[te]=m;for(var ne=te-1;ne>=0&&U[ne]==="WS";ne--)W[ne]=m}}(F,C,I)},k=function(T,C,R,x,B){if(!(B.hiLevel<T)){if(T===1&&m===1&&!i)return C.reverse(),void(R&&R.reverse());for(var D,O,G,V,I=C.length,z=0;z<I;){if(x[z]>=T){for(G=z+1;G<I&&x[G]>=T;)G++;for(V=z,O=G-1;V<O;V++,O--)D=C[V],C[V]=C[O],C[O]=D,R&&(D=R[V],R[V]=R[O],R[O]=D);z=G}z++}}},M=function(T,C,R){var x=T.split(""),B={hiLevel:m};return R||(R=[]),E(x,R,B),function(D,O,G){if(G.hiLevel!==0&&f)for(var V,I=0;I<D.length;I++)O[I]===1&&(V=b.indexOf(D[I]))>=0&&(D[I]=b[V+1])}(x,R,B),k(2,x,C,R,B),k(1,x,C,R,B),x.join("")};return this.__bidiEngine__.doBidiReorder=function(T,C,R){if(function(B,D){if(D)for(var O=0;O<B.length;O++)D[O]=O;s===void 0&&(s=S(B)),l===void 0&&(l=S(B))}(T,C),o||!u||l)if(o&&u&&s^l)m=s?1:0,T=_(T,C,R);else if(!o&&u&&l)m=s?1:0,T=M(T,C,R),T=_(T,C);else if(!o||s||u||l){if(o&&!u&&s^l)T=_(T,C),s?(m=0,T=M(T,C,R)):(m=1,T=M(T,C,R),T=_(T,C));else if(o&&s&&!u&&l)m=1,T=M(T,C,R),T=_(T,C);else if(!o&&!u&&s^l){var x=f;s?(m=1,T=M(T,C,R),m=0,f=!1,T=M(T,C,R),f=x):(m=0,T=M(T,C,R),T=_(T,C),m=1,f=!1,T=M(T,C,R),f=x,T=_(T,C))}}else m=0,T=M(T,C,R);else m=s?1:0,T=M(T,C,R);return T},this.__bidiEngine__.setOptions=function(T){T&&(o=T.isInputVisual,u=T.isOutputVisual,s=T.isInputRtl,l=T.isOutputRtl,f=T.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(n){var i=n.text,a=(n.x,n.y,n.options||{}),o=(n.mutex,a.lang,[]);if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,t.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var s=0;for(o=[],s=0;s<i.length;s+=1)Object.prototype.toString.call(i[s])==="[object Array]"?o.push([t.doBidiReorder(i[s][0]),i[s][1],i[s][2]]):o.push([t.doBidiReorder(i[s])]);n.text=o}else n.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(xr),xr.API.TTFFont=function(){function r(e){var t;if(this.rawData=e,t=this.contents=new Ou(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new e9(this),this.registerTTF()}return r.open=function(e){return new r(e)},r.prototype.parse=function(){return this.directory=new qq(this.contents),this.head=new $q(this),this.name=new Wq(this),this.cmap=new fN(this),this.toUnicode={},this.hhea=new Uq(this),this.maxp=new Yq(this),this.hmtx=new Xq(this),this.post=new jq(this),this.os2=new Hq(this),this.loca=new Jq(this),this.glyf=new Kq(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var e,t,n,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,s,u,l;for(l=[],o=0,s=(u=this.bbox).length;o<s;o++)e=u[o],l.push(Math.round(e*this.scaleFactor));return l}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},r.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},r.prototype.widthOfString=function(e,t,n){var i,a,o,s;for(o=0,a=0,s=(e=""+e).length;0<=s?a<s:a>s;a=0<=s?++a:--a)i=e.charCodeAt(a),o+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/t)||0;return o*(t/1e3)},r.prototype.lineHeight=function(e,t){var n;return t==null&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},r}();var No,Ou=function(){function r(e){this.data=e??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(e){return this.data[this.pos++]=e},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},r.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},r.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},r.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},r.prototype.writeString=function(e){var t,n,i;for(i=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(e){return this.writeInt16(e)},r.prototype.readLongLong=function(){var e,t,n,i,a,o,s,u;return e=this.readByte(),t=this.readByte(),n=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),s=this.readByte(),u=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^a)+65536*(255^o)+256*(255^s)+(255^u)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*i+16777216*a+65536*o+256*s+u},r.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(e){return this.writeInt32(e)},r.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},r.prototype.write=function(e){var t,n,i,a;for(a=[],n=0,i=e.length;n<i;n++)t=e[n],a.push(this.writeByte(t));return a},r}(),qq=function(){var r;function e(t){var n,i,a;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)n={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(t){var n,i,a,o,s,u,l,f,c,d,h,p,g;for(g in h=Object.keys(t).length,u=Math.log(2),c=16*Math.floor(Math.log(h)/u),o=Math.floor(c/u),f=16*h-c,(i=new Ou).writeInt(this.scalarType),i.writeShort(h),i.writeShort(c),i.writeShort(o),i.writeShort(f),a=16*h,l=i.pos+a,s=null,p=[],t)for(d=t[g],i.writeString(g),i.writeInt(r(d)),i.writeInt(l),i.writeInt(d.length),p=p.concat(d),g==="head"&&(s=l),l+=d.length;l%4;)p.push(0),l++;return i.write(p),n=2981146554-r(i.data),i.pos=s+8,i.writeUInt32(n),i.data},r=function(t){var n,i,a,o;for(t=cN.call(t);t.length%4;)t.push(0);for(a=new Ou(t),i=0,n=0,o=t.length;n<o;n=n+=4)i+=a.readUInt32();return 4294967295&i},e}(),Gq={}.hasOwnProperty,ls=function(r,e){for(var t in e)Gq.call(e,t)&&(r[t]=e[t]);function n(){this.constructor=r}return n.prototype=e.prototype,r.prototype=new n,r.__super__=e.prototype,r};No=function(){function r(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r}();var $q=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return ls(e,No),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var n;return(n=new Ou).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(t),n.writeShort(this.glyphDataFormat),n.data},e}(),Qx=function(){function r(e,t){var n,i,a,o,s,u,l,f,c,d,h,p,g,b,v,y,m;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),c=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(u=0;u<256;++u)this.codeMap[u]=e.readByte();break;case 4:for(h=e.readUInt16(),d=h/2,e.pos+=6,a=function(){var w,S;for(S=[],u=w=0;0<=d?w<d:w>d;u=0<=d?++w:--w)S.push(e.readUInt16());return S}(),e.pos+=2,g=function(){var w,S;for(S=[],u=w=0;0<=d?w<d:w>d;u=0<=d?++w:--w)S.push(e.readUInt16());return S}(),l=function(){var w,S;for(S=[],u=w=0;0<=d?w<d:w>d;u=0<=d?++w:--w)S.push(e.readUInt16());return S}(),f=function(){var w,S;for(S=[],u=w=0;0<=d?w<d:w>d;u=0<=d?++w:--w)S.push(e.readUInt16());return S}(),i=(this.length-e.pos+this.offset)/2,s=function(){var w,S;for(S=[],u=w=0;0<=i?w<i:w>i;u=0<=i?++w:--w)S.push(e.readUInt16());return S}(),u=v=0,m=a.length;v<m;u=++v)for(b=a[u],n=y=p=g[u];p<=b?y<=b:y>=b;n=p<=b?++y:--y)f[u]===0?o=n+l[u]:(o=s[f[u]/2+(n-p)-(d-u)]||0)!==0&&(o+=l[u]),this.codeMap[n]=65535&o}e.pos=c}return r.encode=function(e,t){var n,i,a,o,s,u,l,f,c,d,h,p,g,b,v,y,m,w,S,A,_,E,k,M,T,C,R,x,B,D,O,G,V,I,z,P,q,F,U,W,X,te,ne,he,ve,Ce;switch(x=new Ou,o=Object.keys(e).sort(function(Le,K){return Le-K}),t){case"macroman":for(g=0,b=function(){var Le=[];for(p=0;p<256;++p)Le.push(0);return Le}(),y={0:0},a={},B=0,V=o.length;B<V;B++)y[ne=e[i=o[B]]]==null&&(y[ne]=++g),a[i]={old:e[i],new:y[e[i]]},b[i]=y[e[i]];return x.writeUInt16(1),x.writeUInt16(0),x.writeUInt32(12),x.writeUInt16(0),x.writeUInt16(262),x.writeUInt16(0),x.write(b),{charMap:a,subtable:x.data,maxGlyphID:g+1};case"unicode":for(C=[],c=[],m=0,y={},n={},v=l=null,D=0,I=o.length;D<I;D++)y[S=e[i=o[D]]]==null&&(y[S]=++m),n[i]={old:S,new:y[S]},s=y[S]-i,v!=null&&s===l||(v&&c.push(v),C.push(i),l=s),v=i;for(v&&c.push(v),c.push(65535),C.push(65535),M=2*(k=C.length),E=2*Math.pow(Math.log(k)/Math.LN2,2),d=Math.log(E/2)/Math.LN2,_=2*k-E,u=[],A=[],h=[],p=O=0,z=C.length;O<z;p=++O){if(T=C[p],f=c[p],T===65535){u.push(0),A.push(0);break}if(T-(R=n[T].new)>=32768)for(u.push(0),A.push(2*(h.length+k-p)),i=G=T;T<=f?G<=f:G>=f;i=T<=f?++G:--G)h.push(n[i].new);else u.push(R-T),A.push(0)}for(x.writeUInt16(3),x.writeUInt16(1),x.writeUInt32(12),x.writeUInt16(4),x.writeUInt16(16+8*k+2*h.length),x.writeUInt16(0),x.writeUInt16(M),x.writeUInt16(E),x.writeUInt16(d),x.writeUInt16(_),X=0,P=c.length;X<P;X++)i=c[X],x.writeUInt16(i);for(x.writeUInt16(0),te=0,q=C.length;te<q;te++)i=C[te],x.writeUInt16(i);for(he=0,F=u.length;he<F;he++)s=u[he],x.writeUInt16(s);for(ve=0,U=A.length;ve<U;ve++)w=A[ve],x.writeUInt16(w);for(Ce=0,W=h.length;Ce<W;Ce++)g=h[Ce],x.writeUInt16(g);return{charMap:n,subtable:x.data,maxGlyphID:m+1}}},r}(),fN=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return ls(e,No),e.prototype.tag="cmap",e.prototype.parse=function(t){var n,i,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)n=new Qx(t,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(t,n){var i,a;return n==null&&(n="macroman"),i=Qx.encode(t,n),(a=new Ou).writeUInt16(0),a.writeUInt16(1),i.table=a.data.concat(i.subtable),i},e}(),Uq=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return ls(e,No),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),Hq=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return ls(e,No),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var n,i;for(i=[],n=0;n<10;++n)i.push(t.readByte());return i}(),this.charRange=function(){var n,i;for(i=[],n=0;n<4;++n)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var n,i;for(i=[],n=0;n<2;n=++n)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),jq=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return ls(e,No),e.prototype.tag="post",e.prototype.parse=function(t){var n,i,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var o;for(i=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)n=t.readByte(),a.push(this.names.push(t.readString(n)));return a;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var s,u,l;for(l=[],o=s=0,u=this.file.maxp.numGlyphs;0<=u?s<u:s>u;o=0<=u?++s:--s)l.push(t.readUInt32());return l}).call(this)}},e}(),Vq=function(r,e){this.raw=r,this.length=r.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Wq=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return ls(e,No),e.prototype.tag="name",e.prototype.parse=function(t){var n,i,a,o,s,u,l,f,c,d,h;for(t.pos=this.offset,t.readShort(),n=t.readShort(),u=t.readShort(),i=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+u+t.readShort()});for(l={},o=c=0,d=i.length;c<d;o=++c)a=i[o],t.pos=a.offset,f=t.readString(a.length),s=new Vq(f,a),l[h=a.nameID]==null&&(l[h]=[]),l[a.nameID].push(s);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},e}(),Yq=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return ls(e,No),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),Xq=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return ls(e,No),e.prototype.tag="hmtx",e.prototype.parse=function(t){var n,i,a,o,s,u,l;for(t.pos=this.offset,this.metrics=[],n=0,u=this.file.hhea.numberOfMetrics;0<=u?n<u:n>u;n=0<=u?++n:--n)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var f,c;for(c=[],n=f=0;0<=a?f<a:f>a;n=0<=a?++f:--f)c.push(t.readInt16());return c}(),this.widths=(function(){var f,c,d,h;for(h=[],f=0,c=(d=this.metrics).length;f<c;f++)o=d[f],h.push(o.advance);return h}).call(this),i=this.widths[this.widths.length-1],l=[],n=s=0;0<=a?s<a:s>a;n=0<=a?++s:--s)l.push(this.widths.push(i));return l},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),cN=[].slice,Kq=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return ls(e,No),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var n,i,a,o,s,u,l,f,c,d;return t in this.cache?this.cache[t]:(o=this.file.loca,n=this.file.contents,i=o.indexOf(t),(a=o.lengthOf(t))===0?this.cache[t]=null:(n.pos=this.offset+i,s=(u=new Ou(n.read(a))).readShort(),f=u.readShort(),d=u.readShort(),l=u.readShort(),c=u.readShort(),this.cache[t]=s===-1?new Qq(u,f,d,l,c):new Zq(u,s,f,d,l,c),this.cache[t]))},e.prototype.encode=function(t,n,i){var a,o,s,u,l;for(s=[],o=[],u=0,l=n.length;u<l;u++)a=t[n[u]],o.push(s.length),a&&(s=s.concat(a.encode(i)));return o.push(s.length),{table:s,offsets:o}},e}(),Zq=function(){function r(e,t,n,i,a,o){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=i,this.xMax=a,this.yMax=o,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r}(),Qq=function(){function r(e,t,n,i,a){var o,s;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;s=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&s;)o.pos+=1&s?4:2,128&s?o.pos+=8:64&s?o.pos+=4:8&s&&(o.pos+=2)}return r.prototype.encode=function(){var e,t,n;for(t=new Ou(cN.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},r}(),Jq=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return ls(e,No),e.prototype.tag="loca",e.prototype.parse=function(t){var n,i;return t.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var a,o;for(o=[],i=0,a=this.length;i<a;i+=2)o.push(2*t.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],i=0,a=this.length;i<a;i+=4)o.push(t.readUInt32());return o}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,n){for(var i=new Uint32Array(this.offsets.length),a=0,o=0,s=0;s<i.length;++s)if(i[s]=a,o<n.length&&n[o]==s){++o,i[s]=a;var u=this.offsets[s],l=this.offsets[s+1]-u;l>0&&(a+=l)}for(var f=new Array(4*i.length),c=0;c<i.length;++c)f[4*c+3]=255&i[c],f[4*c+2]=(65280&i[c])>>8,f[4*c+1]=(16711680&i[c])>>16,f[4*c]=(4278190080&i[c])>>24;return f},e}(),e9=function(){function r(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var e,t,n,i,a;for(t in i=this.font.cmap.tables[0].codeMap,e={},a=this.subset)n=a[t],e[t]=i[n];return e},r.prototype.glyphsFor=function(e){var t,n,i,a,o,s,u;for(i={},o=0,s=e.length;o<s;o++)i[a=e[o]]=this.font.glyf.glyphFor(a);for(a in t=[],i)(n=i[a])!=null&&n.compound&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(a in u=this.glyphsFor(t))n=u[a],i[a]=n;return i},r.prototype.encode=function(e,t){var n,i,a,o,s,u,l,f,c,d,h,p,g,b,v;for(i in n=fN.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),h={0:0},v=n.charMap)h[(u=v[i]).old]=u.new;for(p in d=n.maxGlyphID,o)p in h||(h[p]=d++);return f=function(y){var m,w;for(m in w={},y)w[y[m]]=m;return w}(h),c=Object.keys(f).sort(function(y,m){return y-m}),g=function(){var y,m,w;for(w=[],y=0,m=c.length;y<m;y++)s=c[y],w.push(f[s]);return w}(),a=this.font.glyf.encode(o,g,h),l=this.font.loca.encode(a.offsets,g),b={cmap:this.font.cmap.raw(),glyf:a.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},r}();xr.API.PDFObject=function(){var r;function e(){}return r=function(t,n){return(Array(n+1).join("0")+t).slice(-n)},e.convert=function(t){var n,i,a,o;if(Array.isArray(t))return"["+function(){var s,u,l;for(l=[],s=0,u=t.length;s<u;s++)n=t[s],l.push(e.convert(n));return l}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+r(t.getUTCFullYear(),4)+r(t.getUTCMonth(),2)+r(t.getUTCDate(),2)+r(t.getUTCHours(),2)+r(t.getUTCMinutes(),2)+r(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in a=["<<"],t)o=t[i],a.push("/"+i+" "+e.convert(o));return a.push(">>"),a.join(`
`)}return""+t},e}();/*! https://mths.be/cssesc v3.0.0 by @mathias */var t9={},r9=t9.hasOwnProperty,n9=function(e,t){if(!e)return t;var n={};for(var i in t)n[i]=r9.call(e,i)?e[i]:t[i];return n},i9=/[ -,\.\/:-@\[-\^`\{-~]/,a9=/[ -,\.\/:-@\[\]\^`\{-~]/,o9=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,Sw=function r(e,t){t=n9(t,r.options),t.quotes!="single"&&t.quotes!="double"&&(t.quotes="single");for(var n=t.quotes=="double"?'"':"'",i=t.isIdentifier,a=e.charAt(0),o="",s=0,u=e.length;s<u;){var l=e.charAt(s++),f=l.charCodeAt(),c=void 0;if(f<32||f>126){if(f>=55296&&f<=56319&&s<u){var d=e.charCodeAt(s++);(d&64512)==56320?f=((f&1023)<<10)+(d&1023)+65536:s--}c="\\"+f.toString(16).toUpperCase()+" "}else t.escapeEverything?i9.test(l)?c="\\"+l:c="\\"+f.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(l)?c="\\"+f.toString(16).toUpperCase()+" ":l=="\\"||!i&&(l=='"'&&n==l||l=="'"&&n==l)||i&&a9.test(l)?c="\\"+l:c=l;o+=c}return i&&(/^-[-\d]/.test(o)?o="\\-"+o.slice(1):/\d/.test(a)&&(o="\\3"+a+" "+o.slice(1))),o=o.replace(o9,function(h,p,g){return p&&p.length%2?h:(p||"")+g}),!i&&t.wrap?n+o+n:o};Sw.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1};Sw.version="3.0.0";var s9=Sw;const hN=qi(s9);var Rc=0,xm=1,Jx=2,zd=3,eS=4,tS=5,rS=6,Sm=/[a-z0-9_-]/i,qd=/[\s\t]/,u9=function(r){for(var e=!0,t=Rc,n="",i=0,a,o,s=[];;){if(o=r[i],t===Rc){if(!o&&e)break;if(!o&&!e)throw new Error("Parse error");if(o==='"'||o==="'")a=o,t=xm,e=!1;else if(!qd.test(o))if(Sm.test(o))t=zd,e=!1,i--;else throw new Error("Parse error")}else if(t===xm)if(o)o==="\\"?t=Jx:o===a?(s.push(n),n="",t=eS):n+=o;else throw new Error("Parse Error");else if(t===Jx)if(o===a||o==="\\")n+=o,t=xm;else throw new Error("Parse error");else if(t===zd)if(o)Sm.test(o)?n+=o:o===","?(s.push(n),n="",t=Rc):qd.test(o)?t=tS:o==="\\"&&(t=rS);else{s.push(n);break}else if(t===rS){if(/[0-9a-f]/i.test(o))throw new Error("Parse error");n+=o,t=zd}else if(t===tS)if(o){if(Sm.test(o))n+=" "+o,t=zd;else if(o===",")s.push(n),n="",t=Rc;else if(!qd.test(o))throw new Error("Parse error")}else{s.push(n);break}else if(t===eS)if(o){if(o===",")t=Rc;else if(!qd.test(o))throw new Error("Parse error")}else break;i++}return s},l9=/[^a-z0-9_-]/i,f9=function(r,e){var t=e&&e.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Quote must be `'` or `\"`");for(var n=new RegExp(t,"g"),i=[],a=0;a<r.length;++a){var o=r[a];l9.test(o)&&(o=o.replace(/\\/g,"\\\\").replace(n,"\\"+t),o=t+o+t),i.push(o)}return i.join(", ")},c9={parse:u9,stringify:f9};const h9=qi(c9);var cp={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},d9=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function p9(r){return r===10||r===13||r===8232||r===8233||r===32||r===9||r===11||r===12||r===160||r>=5760&&d9.indexOf(r)>=0}function v9(r){switch(r|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}function g9(r){return(r|32)===97}function hf(r){return r>=48&&r<=57}function m9(r){return r>=48&&r<=57||r===43||r===45||r===46}function y9(r){this.index=0,this.path=r,this.max=r.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function hp(r){for(;r.index<r.max&&p9(r.path.charCodeAt(r.index));)r.index++}function b9(r){var e=r.path.charCodeAt(r.index);if(e===48){r.param=0,r.index++;return}if(e===49){r.param=1,r.index++;return}r.err="SvgPath: arc flag can be 0 or 1 only (at pos "+r.index+")"}function w9(r){var e=r.index,t=e,n=r.max,i=!1,a=!1,o=!1,s=!1,u;if(t>=n){r.err="SvgPath: missed param (at pos "+t+")";return}if(u=r.path.charCodeAt(t),(u===43||u===45)&&(t++,u=t<n?r.path.charCodeAt(t):0),!hf(u)&&u!==46){r.err="SvgPath: param should start with 0..9 or `.` (at pos "+t+")";return}if(u!==46){if(i=u===48,t++,u=t<n?r.path.charCodeAt(t):0,i&&t<n&&u&&hf(u)){r.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+e+")";return}for(;t<n&&hf(r.path.charCodeAt(t));)t++,a=!0;u=t<n?r.path.charCodeAt(t):0}if(u===46){for(s=!0,t++;hf(r.path.charCodeAt(t));)t++,o=!0;u=t<n?r.path.charCodeAt(t):0}if(u===101||u===69){if(s&&!a&&!o){r.err="SvgPath: invalid float exponent (at pos "+t+")";return}if(t++,u=t<n?r.path.charCodeAt(t):0,(u===43||u===45)&&t++,t<n&&hf(r.path.charCodeAt(t)))for(;t<n&&hf(r.path.charCodeAt(t));)t++;else{r.err="SvgPath: invalid float exponent (at pos "+t+")";return}}r.index=t,r.param=parseFloat(r.path.slice(e,t))+0}function Em(r){var e,t;e=r.path[r.segmentStart],t=e.toLowerCase();var n=r.data;if(t==="m"&&n.length>2&&(r.result.push([e,n[0],n[1]]),n=n.slice(2),t="l",e=e==="m"?"l":"L"),t==="r")r.result.push([e].concat(n));else for(;n.length>=cp[t]&&(r.result.push([e].concat(n.splice(0,cp[t]))),!!cp[t]););}function _9(r){var e=r.max,t,n,i,a,o;if(r.segmentStart=r.index,t=r.path.charCodeAt(r.index),n=g9(t),!v9(t)){r.err="SvgPath: bad command "+r.path[r.index]+" (at pos "+r.index+")";return}if(a=cp[r.path[r.index].toLowerCase()],r.index++,hp(r),r.data=[],!a){Em(r);return}for(i=!1;;){for(o=a;o>0;o--){if(n&&(o===3||o===4)?b9(r):w9(r),r.err.length){Em(r);return}r.data.push(r.param),hp(r),i=!1,r.index<e&&r.path.charCodeAt(r.index)===44&&(r.index++,hp(r),i=!0)}if(!i&&(r.index>=r.max||!m9(r.path.charCodeAt(r.index))))break}Em(r)}var x9=function(e){var t=new y9(e),n=t.max;for(hp(t);t.index<n&&!t.err.length;)_9(t);return t.result.length&&("mM".indexOf(t.result[0][0])<0?(t.err="SvgPath: string should start with `M` or `m`",t.result=[]):t.result[0][0]="M"),{err:t.err,segments:t.result}};function S9(r,e){return[r[0]*e[0]+r[2]*e[1],r[1]*e[0]+r[3]*e[1],r[0]*e[2]+r[2]*e[3],r[1]*e[2]+r[3]*e[3],r[0]*e[4]+r[2]*e[5]+r[4],r[1]*e[4]+r[3]*e[5]+r[5]]}function Co(){if(!(this instanceof Co))return new Co;this.queue=[],this.cache=null}Co.prototype.matrix=function(r){return r[0]===1&&r[1]===0&&r[2]===0&&r[3]===1&&r[4]===0&&r[5]===0?this:(this.cache=null,this.queue.push(r),this)};Co.prototype.translate=function(r,e){return(r!==0||e!==0)&&(this.cache=null,this.queue.push([1,0,0,1,r,e])),this};Co.prototype.scale=function(r,e){return(r!==1||e!==1)&&(this.cache=null,this.queue.push([r,0,0,e,0,0])),this};Co.prototype.rotate=function(r,e,t){var n,i,a;return r!==0&&(this.translate(e,t),n=r*Math.PI/180,i=Math.cos(n),a=Math.sin(n),this.queue.push([i,a,-a,i,0,0]),this.cache=null,this.translate(-e,-t)),this};Co.prototype.skewX=function(r){return r!==0&&(this.cache=null,this.queue.push([1,0,Math.tan(r*Math.PI/180),1,0,0])),this};Co.prototype.skewY=function(r){return r!==0&&(this.cache=null,this.queue.push([1,Math.tan(r*Math.PI/180),0,1,0,0])),this};Co.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],this.queue.length===1)return this.cache;for(var r=1;r<this.queue.length;r++)this.cache=S9(this.cache,this.queue[r]);return this.cache};Co.prototype.calc=function(r,e,t){var n;return this.queue.length?(this.cache||(this.cache=this.toArray()),n=this.cache,[r*n[0]+e*n[2]+(t?0:n[4]),r*n[1]+e*n[3]+(t?0:n[5])]):[r,e]};var dN=Co,E9=dN,C9={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},A9=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,T9=/[\s,]+/,k9=function(e){var t=new E9,n,i;return e.split(A9).forEach(function(a){if(a.length){if(typeof C9[a]<"u"){n=a;return}switch(i=a.split(T9).map(function(o){return+o||0}),n){case"matrix":i.length===6&&t.matrix(i);return;case"scale":i.length===1?t.scale(i[0],i[0]):i.length===2&&t.scale(i[0],i[1]);return;case"rotate":i.length===1?t.rotate(i[0],0,0):i.length===3&&t.rotate(i[0],i[1],i[2]);return;case"translate":i.length===1?t.translate(i[0],0):i.length===2&&t.translate(i[0],i[1]);return;case"skewX":i.length===1&&t.skewX(i[0]);return;case"skewY":i.length===1&&t.skewY(i[0]);return}}}),t},uh=Math.PI*2;function nS(r,e,t,n){var i=r*n-e*t<0?-1:1,a=r*t+e*n;return a>1&&(a=1),a<-1&&(a=-1),i*Math.acos(a)}function L9(r,e,t,n,i,a,o,s,u,l){var f=l*(r-t)/2+u*(e-n)/2,c=-u*(r-t)/2+l*(e-n)/2,d=o*o,h=s*s,p=f*f,g=c*c,b=d*h-d*g-h*p;b<0&&(b=0),b/=d*g+h*p,b=Math.sqrt(b)*(i===a?-1:1);var v=b*o/s*c,y=b*-s/o*f,m=l*v-u*y+(r+t)/2,w=u*v+l*y+(e+n)/2,S=(f-v)/o,A=(c-y)/s,_=(-f-v)/o,E=(-c-y)/s,k=nS(1,0,S,A),M=nS(S,A,_,E);return a===0&&M>0&&(M-=uh),a===1&&M<0&&(M+=uh),[m,w,k,M]}function N9(r,e){var t=1.3333333333333333*Math.tan(e/4),n=Math.cos(r),i=Math.sin(r),a=Math.cos(r+e),o=Math.sin(r+e);return[n,i,n-i*t,i+n*t,a+o*t,o-a*t,a,o]}var P9=function(e,t,n,i,a,o,s,u,l){var f=Math.sin(l*uh/360),c=Math.cos(l*uh/360),d=c*(e-n)/2+f*(t-i)/2,h=-f*(e-n)/2+c*(t-i)/2;if(d===0&&h===0)return[];if(s===0||u===0)return[];s=Math.abs(s),u=Math.abs(u);var p=d*d/(s*s)+h*h/(u*u);p>1&&(s*=Math.sqrt(p),u*=Math.sqrt(p));var g=L9(e,t,n,i,a,o,s,u,f,c),b=[],v=g[2],y=g[3],m=Math.max(Math.ceil(Math.abs(y)/(uh/4)),1);y/=m;for(var w=0;w<m;w++)b.push(N9(v,y)),v+=y;return b.map(function(S){for(var A=0;A<S.length;A+=2){var _=S[A+0],E=S[A+1];_*=s,E*=u;var k=c*_-f*E,M=f*_+c*E;S[A+0]=k+g[0],S[A+1]=M+g[1]}return S})},lh=1e-10,iS=Math.PI/180;function Sh(r,e,t){if(!(this instanceof Sh))return new Sh(r,e,t);this.rx=r,this.ry=e,this.ax=t}Sh.prototype.transform=function(r){var e=Math.cos(this.ax*iS),t=Math.sin(this.ax*iS),n=[this.rx*(r[0]*e+r[2]*t),this.rx*(r[1]*e+r[3]*t),this.ry*(-r[0]*t+r[2]*e),this.ry*(-r[1]*t+r[3]*e)],i=n[0]*n[0]+n[2]*n[2],a=n[1]*n[1]+n[3]*n[3],o=((n[0]-n[3])*(n[0]-n[3])+(n[2]+n[1])*(n[2]+n[1]))*((n[0]+n[3])*(n[0]+n[3])+(n[2]-n[1])*(n[2]-n[1])),s=(i+a)/2;if(o<lh*s)return this.rx=this.ry=Math.sqrt(s),this.ax=0,this;var u=n[0]*n[1]+n[2]*n[3];o=Math.sqrt(o);var l=s+o/2,f=s-o/2;return this.ax=Math.abs(u)<lh&&Math.abs(l-a)<lh?90:Math.atan(Math.abs(u)>Math.abs(l-a)?(l-i)/u:u/(l-a))*180/Math.PI,this.ax>=0?(this.rx=Math.sqrt(l),this.ry=Math.sqrt(f)):(this.ax+=90,this.rx=Math.sqrt(f),this.ry=Math.sqrt(l)),this};Sh.prototype.isDegenerate=function(){return this.rx<lh*this.ry||this.ry<lh*this.rx};var M9=Sh,O9=x9,D9=k9,Bu=dN,I9=P9,R9=M9;function ri(r){if(!(this instanceof ri))return new ri(r);var e=O9(r);this.segments=e.segments,this.err=e.err,this.__stack=[]}ri.from=function(r){if(typeof r=="string")return new ri(r);if(r instanceof ri){var e=new ri("");return e.err=r.err,e.segments=r.segments.map(function(t){return t.slice()}),e.__stack=r.__stack.map(function(t){return Bu().matrix(t.toArray())}),e}throw new Error("SvgPath.from: invalid param type "+r)};ri.prototype.__matrix=function(r){var e=this,t;r.queue.length&&this.iterate(function(n,i,a,o){var s,u,l,f;switch(n[0]){case"v":s=r.calc(0,n[1],!0),u=s[0]===0?["v",s[1]]:["l",s[0],s[1]];break;case"V":s=r.calc(a,n[1],!1),u=s[0]===r.calc(a,o,!1)[0]?["V",s[1]]:["L",s[0],s[1]];break;case"h":s=r.calc(n[1],0,!0),u=s[1]===0?["h",s[0]]:["l",s[0],s[1]];break;case"H":s=r.calc(n[1],o,!1),u=s[1]===r.calc(a,o,!1)[1]?["H",s[0]]:["L",s[0],s[1]];break;case"a":case"A":var c=r.toArray(),d=R9(n[1],n[2],n[3]).transform(c);if(c[0]*c[3]-c[1]*c[2]<0&&(n[5]=n[5]?"0":"1"),s=r.calc(n[6],n[7],n[0]==="a"),n[0]==="A"&&n[6]===a&&n[7]===o||n[0]==="a"&&n[6]===0&&n[7]===0){u=[n[0]==="a"?"l":"L",s[0],s[1]];break}d.isDegenerate()?u=[n[0]==="a"?"l":"L",s[0],s[1]]:u=[n[0],d.rx,d.ry,d.ax,n[4],n[5],s[0],s[1]];break;case"m":f=i>0,s=r.calc(n[1],n[2],f),u=["m",s[0],s[1]];break;default:for(l=n[0],u=[l],f=l.toLowerCase()===l,t=1;t<n.length;t+=2)s=r.calc(n[t],n[t+1],f),u.push(s[0],s[1])}e.segments[i]=u},!0)};ri.prototype.__evaluateStack=function(){var r,e;if(this.__stack.length){if(this.__stack.length===1){this.__matrix(this.__stack[0]),this.__stack=[];return}for(r=Bu(),e=this.__stack.length;--e>=0;)r.matrix(this.__stack[e].toArray());this.__matrix(r),this.__stack=[]}};ri.prototype.toString=function(){var r="",e="",t=!1;this.__evaluateStack();for(var n=0,i=this.segments.length;n<i;n++){var a=this.segments[n],o=a[0];o!==e||o==="m"||o==="M"?(o==="m"&&e==="z"&&(r+=" "),r+=o,t=!1):t=!0;for(var s=1;s<a.length;s++){var u=a[s];s===1?t&&u>=0&&(r+=" "):u>=0&&(r+=" "),r+=u}e=o}return r};ri.prototype.translate=function(r,e){return this.__stack.push(Bu().translate(r,e||0)),this};ri.prototype.scale=function(r,e){return this.__stack.push(Bu().scale(r,!e&&e!==0?r:e)),this};ri.prototype.rotate=function(r,e,t){return this.__stack.push(Bu().rotate(r,e||0,t||0)),this};ri.prototype.skewX=function(r){return this.__stack.push(Bu().skewX(r)),this};ri.prototype.skewY=function(r){return this.__stack.push(Bu().skewY(r)),this};ri.prototype.matrix=function(r){return this.__stack.push(Bu().matrix(r)),this};ri.prototype.transform=function(r){return r.trim()?(this.__stack.push(D9(r)),this):this};ri.prototype.round=function(r){var e=0,t=0,n=0,i=0,a;return r=r||0,this.__evaluateStack(),this.segments.forEach(function(o){var s=o[0].toLowerCase()===o[0];switch(o[0]){case"H":case"h":s&&(o[1]+=n),n=o[1]-o[1].toFixed(r),o[1]=+o[1].toFixed(r);return;case"V":case"v":s&&(o[1]+=i),i=o[1]-o[1].toFixed(r),o[1]=+o[1].toFixed(r);return;case"Z":case"z":n=e,i=t;return;case"M":case"m":s&&(o[1]+=n,o[2]+=i),n=o[1]-o[1].toFixed(r),i=o[2]-o[2].toFixed(r),e=n,t=i,o[1]=+o[1].toFixed(r),o[2]=+o[2].toFixed(r);return;case"A":case"a":s&&(o[6]+=n,o[7]+=i),n=o[6]-o[6].toFixed(r),i=o[7]-o[7].toFixed(r),o[1]=+o[1].toFixed(r),o[2]=+o[2].toFixed(r),o[3]=+o[3].toFixed(r+2),o[6]=+o[6].toFixed(r),o[7]=+o[7].toFixed(r);return;default:a=o.length,s&&(o[a-2]+=n,o[a-1]+=i),n=o[a-2]-o[a-2].toFixed(r),i=o[a-1]-o[a-1].toFixed(r),o.forEach(function(u,l){l&&(o[l]=+o[l].toFixed(r))});return}}),this};ri.prototype.iterate=function(r,e){var t=this.segments,n={},i=!1,a=0,o=0,s=0,u=0,l,f,c;if(e||this.__evaluateStack(),t.forEach(function(d,h){var p=r(d,h,a,o);Array.isArray(p)&&(n[h]=p,i=!0);var g=d[0]===d[0].toLowerCase();switch(d[0]){case"m":case"M":a=d[1]+(g?a:0),o=d[2]+(g?o:0),s=a,u=o;return;case"h":case"H":a=d[1]+(g?a:0);return;case"v":case"V":o=d[1]+(g?o:0);return;case"z":case"Z":a=s,o=u;return;default:a=d[d.length-2]+(g?a:0),o=d[d.length-1]+(g?o:0)}}),!i)return this;for(c=[],l=0;l<t.length;l++)if(typeof n[l]<"u")for(f=0;f<n[l].length;f++)c.push(n[l][f]);else c.push(t[l]);return this.segments=c,this};ri.prototype.abs=function(){return this.iterate(function(r,e,t,n){var i=r[0],a=i.toUpperCase(),o;if(i!==a)switch(r[0]=a,i){case"v":r[1]+=n;return;case"a":r[6]+=t,r[7]+=n;return;default:for(o=1;o<r.length;o++)r[o]+=o%2?t:n}},!0),this};ri.prototype.rel=function(){return this.iterate(function(r,e,t,n){var i=r[0],a=i.toLowerCase(),o;if(i!==a&&!(e===0&&i==="M"))switch(r[0]=a,i){case"V":r[1]-=n;return;case"A":r[6]-=t,r[7]-=n;return;default:for(o=1;o<r.length;o++)r[o]-=o%2?t:n}},!0),this};ri.prototype.unarc=function(){return this.iterate(function(r,e,t,n){var i,a,o,s=[],u=r[0];return u!=="A"&&u!=="a"?null:(u==="a"?(a=t+r[6],o=n+r[7]):(a=r[6],o=r[7]),i=I9(t,n,a,o,r[4],r[5],r[1],r[2],r[3]),i.length===0?[[r[0]==="a"?"l":"L",r[6],r[7]]]:(i.forEach(function(l){s.push(["C",l[2],l[3],l[4],l[5],l[6],l[7]])}),s))}),this};ri.prototype.unshort=function(){var r=this.segments,e,t,n,i,a;return this.iterate(function(o,s,u,l){var f=o[0],c=f.toUpperCase(),d;s&&(c==="T"?(d=f==="t",n=r[s-1],n[0]==="Q"?(e=n[1]-u,t=n[2]-l):n[0]==="q"?(e=n[1]-n[3],t=n[2]-n[4]):(e=0,t=0),i=-e,a=-t,d||(i+=u,a+=l),r[s]=[d?"q":"Q",i,a,o[1],o[2]]):c==="S"&&(d=f==="s",n=r[s-1],n[0]==="C"?(e=n[3]-u,t=n[4]-l):n[0]==="c"?(e=n[3]-n[5],t=n[4]-n[6]):(e=0,t=0),i=-e,a=-t,d||(i+=u,a+=l),r[s]=[d?"c":"C",i,a,o[1],o[2],o[3],o[4]]))}),this};var F9=ri,B9=F9;const z9=qi(B9);var aS=function(r){var e=r,t,n={a:0,b:0,c:0},i=[],a=/(\[[^\]]+\])/g,o=/(#[^\#\s\+>~\.\[:\)]+)/g,s=/(\.[^\s\+>~\.\[:\)]+)/g,u=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,l=/(:(?!not|global|local)[\w-]+\([^\)]*\))/gi,f=/(:(?!not|global|local)[^\s\+>~\.\[:]+)/g,c=/([^\s\+>~\.\[:]+)/g;return t=function(d,h){var p,g,b,v,y,m;if(d.test(e))for(p=e.match(d),g=0,b=p.length;g<b;g+=1)n[h]+=1,v=p[g],y=e.indexOf(v),m=v.length,i.push({selector:r.substr(y,m),type:h,index:y,length:m}),e=e.replace(v,Array(m+1).join(" "))},function(){var d=function(b){var v,y,m,w;if(b.test(e))for(v=e.match(b),y=0,m=v.length;y<m;y+=1)w=v[y],e=e.replace(w,Array(w.length+1).join("A"))},h=/\\[0-9A-Fa-f]{6}\s?/g,p=/\\[0-9A-Fa-f]{1,5}\s/g,g=/\\./g;d(h),d(p),d(g)}(),function(){var d=/{[^]*/gm,h,p,g,b;if(d.test(e))for(h=e.match(d),p=0,g=h.length;p<g;p+=1)b=h[p],e=e.replace(b,Array(b.length+1).join(" "))}(),t(a,"b"),t(o,"a"),t(s,"b"),t(u,"c"),t(l,"b"),t(f,"b"),e=e.replace(/[\*\s\+>~]/g," "),e=e.replace(/[#\.]/g," "),e=e.replace(/:not/g,"    "),e=e.replace(/:local/g,"      "),e=e.replace(/:global/g,"       "),e=e.replace(/[\(\)]/g," "),t(c,"c"),i.sort(function(d,h){return d.index-h.index}),{selector:r,specificity:"0,"+n.a.toString()+","+n.b.toString()+","+n.c.toString(),specificityArray:[0,n.a,n.b,n.c],parts:i}},q9=function(r,e){var t,n,i;if(typeof r=="string"){if(r.indexOf(",")!==-1)throw"Invalid CSS selector";t=aS(r).specificityArray}else if(Array.isArray(r)){if(r.filter(function(a){return typeof a=="number"}).length!==4)throw"Invalid specificity array";t=r}else throw"Invalid CSS selector or specificity array";if(typeof e=="string"){if(e.indexOf(",")!==-1)throw"Invalid CSS selector";n=aS(e).specificityArray}else if(Array.isArray(e)){if(e.filter(function(a){return typeof a=="number"}).length!==4)throw"Invalid specificity array";n=e}else throw"Invalid CSS selector or specificity array";for(i=0;i<4;i+=1){if(t[i]<n[i])return-1;if(t[i]>n[i])return 1}return 0};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var pN=function(r,e){return(pN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(r,e)};function Rn(r,e){function t(){this.constructor=r}pN(r,e),r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var M2=function(){return(M2=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r}).apply(this,arguments)};function Gn(r,e,t,n){return new(t||(t=Promise))(function(i,a){function o(l){try{u(n.next(l))}catch(f){a(f)}}function s(l){try{u(n.throw(l))}catch(f){a(f)}}function u(l){var f;l.done?i(l.value):(f=l.value,f instanceof t?f:new t(function(c){c(f)})).then(o,s)}u((n=n.apply(r,e||[])).next())})}function $n(r,e){var t,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return function(f){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,n&&(i=2&f[0]?n.return:f[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,f[1])).done)return i;switch(n=0,i&&(f=[2&f[0],i.value]),f[0]){case 0:case 1:i=f;break;case 4:return o.label++,{value:f[1],done:!1};case 5:o.label++,n=f[1],f=[0];continue;case 7:f=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!((i=i.length>0&&i[i.length-1])||f[0]!==6&&f[0]!==2)){o=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){o.label=f[1];break}if(f[0]===6&&o.label<i[1]){o.label=i[1],i=f;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(f);break}i[2]&&o.ops.pop(),o.trys.pop();continue}f=e.call(r,o)}catch(c){f=[6,c],n=0}finally{t=i=0}if(5&f[0])throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}([u,l])}}}var rs=function(){function r(e){if(this.a=void 0,this.r=0,this.g=0,this.b=0,this.simpleColors={},this.colorDefs=[],this.ok=!1,e){for(var t in e.charAt(0)=="#"&&(e=e.substr(1,6)),e=(e=e.replace(/ /g,"")).toLowerCase(),this.simpleColors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},this.simpleColors)e==t&&(e=this.simpleColors[t]);this.colorDefs=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}];for(var n=0;n<this.colorDefs.length;n++){var i=this.colorDefs[n].re,a=this.colorDefs[n].process,o=i.exec(e);if(o){var s=a(o);this.r=s[0],this.g=s[1],this.b=s[2],this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b}}return r.prototype.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},r.prototype.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+(this.a||"1")+")"},r.prototype.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),n=this.b.toString(16);return e.length==1&&(e="0"+e),t.length==1&&(t="0"+t),n.length==1&&(n="0"+n),"#"+e+t+n},r.prototype.getHelpXML=function(){for(var e=[],t=0;t<this.colorDefs.length;t++)for(var n=this.colorDefs[t].example,i=0;i<n.length;i++)e[e.length]=n[i];for(var a in this.simpleColors)e[e.length]=a;var o=document.createElement("ul");for(o.setAttribute("id","rgbcolor-examples"),t=0;t<e.length;t++)try{var s=document.createElement("li"),u=new r(e[t]),l=document.createElement("div");l.style.cssText="margin: 3px; border: 1px solid black; background:"+u.toHex()+"; color:"+u.toHex(),l.appendChild(document.createTextNode("test"));var f=document.createTextNode(" "+e[t]+" -> "+u.toRGB()+" -> "+u.toHex());s.appendChild(l),s.appendChild(f),o.appendChild(s)}catch{}return o},r}(),ya=function(){function r(e){this.color=e}return r.prototype.getFillData=function(e,t){return Gn(this,void 0,void 0,function(){return $n(this,function(n){return[2,void 0]})})},r}(),G9=function(){function r(){this.xmlSpace="",this.fill=null,this.fillOpacity=1,this.fontFamily="",this.fontSize=16,this.fontStyle="",this.fontWeight="",this.opacity=1,this.stroke=null,this.strokeDasharray=null,this.strokeDashoffset=0,this.strokeLinecap="",this.strokeLinejoin="",this.strokeMiterlimit=4,this.strokeOpacity=1,this.strokeWidth=1,this.alignmentBaseline="",this.textAnchor="",this.visibility="",this.color=null}return r.prototype.clone=function(){var e=new r;return e.xmlSpace=this.xmlSpace,e.fill=this.fill,e.fillOpacity=this.fillOpacity,e.fontFamily=this.fontFamily,e.fontSize=this.fontSize,e.fontStyle=this.fontStyle,e.fontWeight=this.fontWeight,e.opacity=this.opacity,e.stroke=this.stroke,e.strokeDasharray=this.strokeDasharray,e.strokeDashoffset=this.strokeDashoffset,e.strokeLinecap=this.strokeLinecap,e.strokeLinejoin=this.strokeLinejoin,e.strokeMiterlimit=this.strokeMiterlimit,e.strokeOpacity=this.strokeOpacity,e.strokeWidth=this.strokeWidth,e.textAnchor=this.textAnchor,e.alignmentBaseline=this.alignmentBaseline,e.visibility=this.visibility,e.color=this.color,e},r.default=function(){var e=new r;return e.xmlSpace="default",e.fill=new ya(new rs("rgb(0, 0, 0)")),e.fillOpacity=1,e.fontFamily="times",e.fontSize=16,e.fontStyle="normal",e.fontWeight="normal",e.opacity=1,e.stroke=null,e.strokeDasharray=null,e.strokeDashoffset=0,e.strokeLinecap="butt",e.strokeLinejoin="miter",e.strokeMiterlimit=4,e.strokeOpacity=1,e.strokeWidth=1,e.alignmentBaseline="baseline",e.textAnchor="start",e.visibility="visible",e.color=new rs("rgb(0, 0, 0)"),e},r}(),zu=function(){function r(e,t){var n,i,a;this.pdf=e,this.svg2pdfParameters=t.svg2pdfParameters,this.attributeState=t.attributeState?t.attributeState.clone():G9.default(),this.viewport=t.viewport,this.refsHandler=t.refsHandler,this.styleSheets=t.styleSheets,this.textMeasure=t.textMeasure,this.transform=(n=t.transform)!==null&&n!==void 0?n:this.pdf.unitMatrix,this.withinClipPath=(i=t.withinClipPath)!==null&&i!==void 0&&i,this.withinUse=(a=t.withinUse)!==null&&a!==void 0&&a}return r.prototype.clone=function(e){var t,n,i,a;return e===void 0&&(e={}),new r(this.pdf,{svg2pdfParameters:this.svg2pdfParameters,attributeState:e.attributeState?e.attributeState.clone():this.attributeState.clone(),viewport:(t=e.viewport)!==null&&t!==void 0?t:this.viewport,refsHandler:this.refsHandler,styleSheets:this.styleSheets,textMeasure:this.textMeasure,transform:(n=e.transform)!==null&&n!==void 0?n:this.transform,withinClipPath:(i=e.withinClipPath)!==null&&i!==void 0?i:this.withinClipPath,withinUse:(a=e.withinUse)!==null&&a!==void 0?a:this.withinUse})},r}(),vN=function(){function r(e){this.renderedElements={},this.idMap=e,this.idPrefix=String(r.instanceCounter++)}return r.prototype.getRendered=function(e,t,n){return Gn(this,void 0,void 0,function(){var i,a;return $n(this,function(o){switch(o.label){case 0:return i=this.generateKey(e,t),this.renderedElements.hasOwnProperty(i)?[2,this.renderedElements[e]]:(a=this.get(e),this.renderedElements[i]=a,[4,n(a)]);case 1:return o.sent(),[2,a]}})})},r.prototype.get=function(e){return this.idMap[hN(e,{isIdentifier:!0})]},r.prototype.generateKey=function(e,t){return this.idPrefix+"|"+e+"|"+(t||new rs("rgb(0,0,0)")).toRGBA()},r.instanceCounter=0,r}();function oS(r,e){return Math.atan2(e[1]-r[1],e[0]-r[0])}function sS(r,e){return[2/3*(e[0]-r[0])+r[0],2/3*(e[1]-r[1])+r[1]]}function Qc(r){var e=Math.sqrt(r[0]*r[0]+r[1]*r[1]);return[r[0]/e,r[1]/e]}function df(r,e){return Qc([e[0]-r[0],e[1]-r[1]])}function Gd(r,e){return[r[0]+e[0],r[1]+e[1]]}function Cm(r,e){var t=r[0],n=r[1];return[e.a*t+e.c*n+e.e,e.b*t+e.d*n+e.f]}var Gf=function(){function r(){this.segments=[]}return r.prototype.moveTo=function(e,t){return this.segments.push(new Fi(e,t)),this},r.prototype.lineTo=function(e,t){return this.segments.push(new mu(e,t)),this},r.prototype.curveTo=function(e,t,n,i,a,o){return this.segments.push(new Xo(e,t,n,i,a,o)),this},r.prototype.close=function(){return this.segments.push(new O2),this},r.prototype.transform=function(e){this.segments.forEach(function(t){if(t instanceof Fi||t instanceof mu||t instanceof Xo){var n=Cm([t.x,t.y],e);t.x=n[0],t.y=n[1]}if(t instanceof Xo){var i=Cm([t.x1,t.y1],e),a=Cm([t.x2,t.y2],e);t.x1=i[0],t.y1=i[1],t.x2=a[0],t.y2=a[1]}})},r.prototype.draw=function(e){var t=e.pdf;this.segments.forEach(function(n){n instanceof Fi?t.moveTo(n.x,n.y):n instanceof mu?t.lineTo(n.x,n.y):n instanceof Xo?t.curveTo(n.x1,n.y1,n.x2,n.y2,n.x,n.y):t.close()})},r}(),Fi=function(r,e){this.x=r,this.y=e},mu=function(r,e){this.x=r,this.y=e},Xo=function(r,e,t,n,i,a){this.x1=r,this.y1=e,this.x2=t,this.y2=n,this.x=i,this.y=a},O2=function(){};function Du(r,e){return e.split(",").indexOf((r.nodeName||r.tagName).toLowerCase())>=0}function Ot(r,e,t,n){var i;n===void 0&&(n=t);var a=(i=r.style)===null||i===void 0?void 0:i.getPropertyValue(n);if(a)return a;var o=e.getPropertyValue(r,n);return o||r.hasAttribute(t)&&r.getAttribute(t)||void 0}function Bs(r,e,t){if(Ot(r.element,t.styleSheets,"display")==="none")return!1;var n=e,i=Ot(r.element,t.styleSheets,"visibility");return i&&(n=i!=="hidden"),n}function qu(r,e,t){var n=Bs(r,e,t);return r.element.childNodes.length!==0&&(r.children.forEach(function(i){i.isVisible(n,t)&&(n=!0)}),n)}var $9=function(){function r(){this.markers=[]}return r.prototype.addMarker=function(e){this.markers.push(e)},r.prototype.draw=function(e){return Gn(this,void 0,void 0,function(){var t,n,i,a,o,s,u;return $n(this,function(l){switch(l.label){case 0:t=0,l.label=1;case 1:return t<this.markers.length?(n=this.markers[t],i=void 0,a=n.angle,o=n.anchor,s=Math.cos(a),u=Math.sin(a),i=e.pdf.Matrix(s,u,-u,s,o[0],o[1]),i=e.pdf.matrixMult(e.pdf.Matrix(e.attributeState.strokeWidth,0,0,e.attributeState.strokeWidth,0,0),i),i=e.pdf.matrixMult(i,e.transform),e.pdf.saveGraphicsState(),[4,e.refsHandler.getRendered(n.id,null,function(f){return f.apply(e)})]):[3,4];case 2:l.sent(),e.pdf.doFormObject(n.id,i),e.pdf.restoreGraphicsState(),l.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},r}(),du=function(r,e,t){this.id=r,this.anchor=e,this.angle=t},Ew=/url\(["']?#([^"']+)["']?\)/,U9={bottom:"bottom","text-bottom":"bottom",top:"top","text-top":"top",hanging:"hanging",middle:"middle",central:"middle",center:"middle",mathematical:"middle",ideographic:"ideographic",alphabetic:"alphabetic",baseline:"alphabetic"};function As(r,e){var t;return(t=r&&r.toString().match(/^([\-0-9.]+)em$/))?parseFloat(t[1])*e:(t=r&&r.toString().match(/^([\-0-9.]+)(px|)$/))?parseFloat(t[1]):0}function gN(r){return U9[r]||"alphabetic"}function no(r){for(var e,t=[],n=/[+-]?(?:(?:\d+\.?\d*)|(?:\d*\.?\d+))(?:[eE][+-]?\d+)?/g;e=n.exec(r);)t.push(parseFloat(e[0]));return t}function Rf(r,e){if(r==="transparent"){var t=new rs("rgb(0,0,0)");return t.a=0,t}if(r.toLowerCase()==="currentcolor")return e||new rs("rgb(0,0,0)");var n=/\s*rgba\(((?:[^,\)]*,){3}[^,\)]*)\)\s*/.exec(r);if(n){var i=no(n[1]),a=new rs("rgb("+i.slice(0,3).join(",")+")");return a.a=i[3],a}return new rs(r)}var ks={"sans-serif":"helvetica",verdana:"helvetica",arial:"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",serif:"times",cursive:"times",fantasy:"times"},Am,H9=(Am=xr.version.split("."),parseFloat(Am[0])===2&&parseFloat(Am[1])===3);function mN(r,e){return H9?e==400?r=="italic"?"italic":"normal":e==700&&r!=="italic"?"bold":r+""+e:e==400||e==="normal"?r==="italic"?"italic":"normal":e!=700&&e!=="bold"||r!=="normal"?(e==700?"bold":e)+""+r:"bold"}function Cw(r,e){if(Ot(e.element,r.styleSheets,"display")==="none")return[0,0,0,0];var t=[0,0,0,0];return e.children.forEach(function(n){var i=n.getBoundingBox(r);t=[Math.min(t[0],i[0]),Math.min(t[1],i[1]),Math.max(t[0]+t[2],i[0]+i[2])-Math.min(t[0],i[0]),Math.max(t[1]+t[3],i[1]+i[3])-Math.min(t[1],i[1])]}),t}function $h(r,e){var t=parseFloat,n=t(r.getAttribute("x1"))||t(Ot(r,e.styleSheets,"x"))||t(Ot(r,e.styleSheets,"cx"))-t(Ot(r,e.styleSheets,"r"))||0,i=t(r.getAttribute("x2"))||n+t(Ot(r,e.styleSheets,"width"))||t(Ot(r,e.styleSheets,"cx"))+t(Ot(r,e.styleSheets,"r"))||0,a=t(r.getAttribute("y1"))||t(Ot(r,e.styleSheets,"y"))||t(Ot(r,e.styleSheets,"cy"))-t(Ot(r,e.styleSheets,"r"))||0,o=t(r.getAttribute("y2"))||a+t(Ot(r,e.styleSheets,"height"))||t(Ot(r,e.styleSheets,"cy"))+t(Ot(r,e.styleSheets,"r"))||0;return[Math.min(n,i),Math.min(a,o),Math.max(n,i)-Math.min(n,i),Math.max(a,o)-Math.min(a,o)]}function cv(r,e,t,n,i,a,o,s){s===void 0&&(s=!1);var u,l,f=e[0],c=e[1],d=e[2],h=e[3],p=i/d,g=a/h,b=r.getAttribute("preserveAspectRatio");if(b){var v=b.split(" ");v[0]==="defer"&&(v=v.slice(1)),u=v[0],l=v[1]||"meet"}else u="xMidYMid",l="meet";if(u!=="none"&&(l==="meet"?p=g=Math.min(p,g):l==="slice"&&(p=g=Math.max(p,g))),s)return o.pdf.Matrix(p,0,0,g,0,0);var y=t-f*p,m=n-c*g;u.indexOf("xMid")>=0?y+=(i-d*p)/2:u.indexOf("xMax")>=0&&(y+=i-d*p),u.indexOf("YMid")>=0?m+=(a-h*g)/2:u.indexOf("YMax")>=0&&(m+=a-h*g);var w=o.pdf.Matrix(1,0,0,1,y,m),S=o.pdf.Matrix(p,0,0,g,0,0);return o.pdf.matrixMult(S,w)}function hv(r,e){if(!r||r==="none")return e.pdf.unitMatrix;for(var t,n,i=/^[\s,]*matrix\(([^)]+)\)\s*/,a=/^[\s,]*translate\(([^)]+)\)\s*/,o=/^[\s,]*rotate\(([^)]+)\)\s*/,s=/^[\s,]*scale\(([^)]+)\)\s*/,u=/^[\s,]*skewX\(([^)]+)\)\s*/,l=/^[\s,]*skewY\(([^)]+)\)\s*/,f=e.pdf.unitMatrix;r.length>0&&r.length!==n;){n=r.length;var c=i.exec(r);if(c&&(t=no(c[1]),f=e.pdf.matrixMult(e.pdf.Matrix(t[0],t[1],t[2],t[3],t[4],t[5]),f),r=r.substr(c[0].length)),c=o.exec(r)){t=no(c[1]);var d=Math.PI*t[0]/180;if(f=e.pdf.matrixMult(e.pdf.Matrix(Math.cos(d),Math.sin(d),-Math.sin(d),Math.cos(d),0,0),f),t[1]||t[2]){var h=e.pdf.Matrix(1,0,0,1,t[1],t[2]),p=e.pdf.Matrix(1,0,0,1,-t[1],-t[2]);f=e.pdf.matrixMult(p,e.pdf.matrixMult(f,h))}r=r.substr(c[0].length)}(c=a.exec(r))&&(t=no(c[1]),f=e.pdf.matrixMult(e.pdf.Matrix(1,0,0,1,t[0],t[1]||0),f),r=r.substr(c[0].length)),(c=s.exec(r))&&((t=no(c[1]))[1]||(t[1]=t[0]),f=e.pdf.matrixMult(e.pdf.Matrix(t[0],0,0,t[1],0,0),f),r=r.substr(c[0].length)),(c=u.exec(r))&&(t=parseFloat(c[1]),t*=Math.PI/180,f=e.pdf.matrixMult(e.pdf.Matrix(1,0,Math.tan(t),1,0,0),f),r=r.substr(c[0].length)),(c=l.exec(r))&&(t=parseFloat(c[1]),t*=Math.PI/180,f=e.pdf.matrixMult(e.pdf.Matrix(1,Math.tan(t),0,1,0,0),f),r=r.substr(c[0].length))}return f}var Aw=function(){function r(e,t){this.element=e,this.children=t,this.parent=null}return r.prototype.setParent=function(e){this.parent=e},r.prototype.getParent=function(){return this.parent},r.prototype.getBoundingBox=function(e){return Ot(this.element,e.styleSheets,"display")==="none"?[0,0,0,0]:this.getBoundingBoxCore(e)},r.prototype.computeNodeTransform=function(e){var t=this.computeNodeTransformCore(e),n=Ot(this.element,e.styleSheets,"transform");return n?e.pdf.matrixMult(t,hv(n,e)):t},r}(),Uh=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return Rn(e,r),e.prototype.render=function(t){return Promise.resolve()},e.prototype.getBoundingBoxCore=function(t){return[]},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e}(Aw),yN=function(r){function e(t,n,i){var a=r.call(this,n,i)||this;return a.pdfGradientType=t,a.contextColor=void 0,a}return Rn(e,r),e.prototype.apply=function(t){return Gn(this,void 0,void 0,function(){var n,i,a,o,s,u;return $n(this,function(l){return(n=this.element.getAttribute("id"))?(i=this.getStops(t.styleSheets),a=0,o=!1,i.forEach(function(f){var c=f.opacity;c&&c!==1&&(a+=c,o=!0)}),o&&(s=new El({opacity:a/i.length})),u=new gu(this.pdfGradientType,this.getCoordinates(),i,s),t.pdf.addShadingPattern(n,u),[2]):[2]})})},e.prototype.getStops=function(t){var n=this;if(this.stops)return this.stops;if(this.contextColor===void 0){this.contextColor=null;for(var i=this;i;){var a=Ot(i.element,t,"color");if(a){this.contextColor=Rf(a,null);break}i=i.getParent()}}var o=[];return this.children.forEach(function(s){if(s.element.tagName.toLowerCase()==="stop"){var u=Ot(s.element,t,"color"),l=Rf(Ot(s.element,t,"stop-color")||"",u?Rf(u,null):n.contextColor),f=parseFloat(Ot(s.element,t,"stop-opacity")||"1");o.push({offset:e.parseGradientOffset(s.element.getAttribute("offset")||"0"),color:[l.r,l.g,l.b],opacity:f})}}),this.stops=o},e.prototype.getBoundingBoxCore=function(t){return $h(this.element,t)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,n){return qu(this,t,n)},e.parseGradientOffset=function(t){var n=parseFloat(t);return!isNaN(n)&&t.indexOf("%")>=0?n/100:n},e}(Uh),bN=function(r){function e(t,n){return r.call(this,"axial",t,n)||this}return Rn(e,r),e.prototype.getCoordinates=function(){return[parseFloat(this.element.getAttribute("x1")||"0"),parseFloat(this.element.getAttribute("y1")||"0"),parseFloat(this.element.getAttribute("x2")||"1"),parseFloat(this.element.getAttribute("y2")||"0")]},e}(yN),wN=function(r){function e(t,n){return r.call(this,"radial",t,n)||this}return Rn(e,r),e.prototype.getCoordinates=function(){var t=this.element.getAttribute("cx"),n=this.element.getAttribute("cy"),i=this.element.getAttribute("fx"),a=this.element.getAttribute("fy");return[parseFloat(i||t||"0.5"),parseFloat(a||n||"0.5"),0,parseFloat(t||"0.5"),parseFloat(n||"0.5"),parseFloat(this.element.getAttribute("r")||"0.5")]},e}(yN),j9=function(){function r(e,t){this.key=e,this.gradient=t}return r.prototype.getFillData=function(e,t){return Gn(this,void 0,void 0,function(){var n,i,a;return $n(this,function(o){switch(o.label){case 0:return[4,t.refsHandler.getRendered(this.key,null,function(s){return s.apply(new zu(t.pdf,{refsHandler:t.refsHandler,textMeasure:t.textMeasure,styleSheets:t.styleSheets,viewport:t.viewport,svg2pdfParameters:t.svg2pdfParameters}))})];case 1:return o.sent(),this.gradient.element.hasAttribute("gradientUnits")&&this.gradient.element.getAttribute("gradientUnits").toLowerCase()!=="objectboundingbox"?n=t.pdf.unitMatrix:(i=e.getBoundingBox(t),n=t.pdf.Matrix(i[2],0,0,i[3],i[0],i[1])),a=hv(Ot(this.gradient.element,t.styleSheets,"gradientTransform","transform"),t),[2,{key:this.key,matrix:t.pdf.matrixMult(a,n)}]}})})},r}(),_N=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return Rn(e,r),e.prototype.apply=function(t){return Gn(this,void 0,void 0,function(){var n,i,a,o,s;return $n(this,function(u){switch(u.label){case 0:if(!(n=this.element.getAttribute("id")))return[2];i=this.getBoundingBox(t),a=new cl([i[0],i[1],i[0]+i[2],i[1]+i[3]],i[2],i[3]),t.pdf.beginTilingPattern(a),o=0,s=this.children,u.label=1;case 1:return o<s.length?[4,s[o].render(new zu(t.pdf,{attributeState:t.attributeState,refsHandler:t.refsHandler,styleSheets:t.styleSheets,viewport:t.viewport,svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure}))]:[3,4];case 2:u.sent(),u.label=3;case 3:return o++,[3,1];case 4:return t.pdf.endTilingPattern(n,a),[2]}})})},e.prototype.getBoundingBoxCore=function(t){return $h(this.element,t)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,n){return qu(this,t,n)},e}(Uh),V9=function(){function r(e,t){this.key=e,this.pattern=t}return r.prototype.getFillData=function(e,t){return Gn(this,void 0,void 0,function(){var n,i,a,o,s,u,l,f,c,d,h,p;return $n(this,function(g){switch(g.label){case 0:return[4,t.refsHandler.getRendered(this.key,null,function(b){return b.apply(new zu(t.pdf,{refsHandler:t.refsHandler,textMeasure:t.textMeasure,styleSheets:t.styleSheets,viewport:t.viewport,svg2pdfParameters:t.svg2pdfParameters}))})];case 1:return g.sent(),n={key:this.key,boundingBox:void 0,xStep:0,yStep:0,matrix:void 0},a=t.pdf.unitMatrix,this.pattern.element.hasAttribute("patternUnits")&&this.pattern.element.getAttribute("patternUnits").toLowerCase()!=="objectboundingbox"||(i=e.getBoundingBox(t),a=t.pdf.Matrix(1,0,0,1,i[0],i[1]),s=this.pattern.getBoundingBox(t),u=s[0]*i[0]||0,l=s[1]*i[1]||0,f=s[2]*i[2]||0,c=s[3]*i[3]||0,n.boundingBox=[u,l,u+f,l+c],n.xStep=f,n.yStep=c),o=t.pdf.unitMatrix,this.pattern.element.hasAttribute("patternContentUnits")&&this.pattern.element.getAttribute("patternContentUnits").toLowerCase()==="objectboundingbox"&&(i||(i=e.getBoundingBox(t)),o=t.pdf.Matrix(i[2],0,0,i[3],0,0),s=n.boundingBox||this.pattern.getBoundingBox(t),u=s[0]/i[0]||0,l=s[1]/i[1]||0,f=s[2]/i[2]||0,c=s[3]/i[3]||0,n.boundingBox=[u,l,u+f,l+c],n.xStep=f,n.yStep=c),d=t.pdf.unitMatrix,(h=Ot(this.pattern.element,t.styleSheets,"patternTransform","transform"))&&(d=hv(h,t)),p=o,p=t.pdf.matrixMult(p,a),p=t.pdf.matrixMult(p,d),p=t.pdf.matrixMult(p,t.transform),n.matrix=p,[2,n]}})})},r}();function W9(r,e){var t=Ew.exec(r);if(t){var n=t[1],i=e.refsHandler.get(n);return i&&(i instanceof bN||i instanceof wN)?function(o,s,u){var l=s.getStops(u.styleSheets);if(l.length===0)return null;if(l.length===1){var f=l[0].color,c=new rs;return c.ok=!0,c.r=f[0],c.g=f[1],c.b=f[2],c.a=l[0].opacity,new ya(c)}return new j9(o,s)}(n,i,e):i&&i instanceof _N?new V9(n,i):new ya(new rs("rgb(0, 0, 0)"))}var a=Rf(r,e.attributeState.color);return a.ok?new ya(a):null}function Tw(r,e,t){var n=t||e.element,i=Ot(n,r.styleSheets,"color");if(i){var a=Rf(i,r.attributeState.color);a.ok?r.attributeState.color=a:r.attributeState.color=new rs("rgb(0,0,0)")}var o=Ot(n,r.styleSheets,"visibility");o&&(r.attributeState.visibility=o);var s=Ot(n,r.styleSheets,"fill");s&&(r.attributeState.fill=W9(s,r));var u=Ot(n,r.styleSheets,"fill-opacity");u&&(r.attributeState.fillOpacity=parseFloat(u));var l=Ot(n,r.styleSheets,"stroke-opacity");l&&(r.attributeState.strokeOpacity=parseFloat(l));var f=Ot(n,r.styleSheets,"opacity");f&&(r.attributeState.opacity=parseFloat(f));var c=Ot(n,r.styleSheets,"stroke-width");c!==void 0&&c!==""&&(r.attributeState.strokeWidth=Math.abs(parseFloat(c)));var d=Ot(n,r.styleSheets,"stroke");if(d)if(d==="none")r.attributeState.stroke=null;else{var h=Rf(d,r.attributeState.color);h.ok&&(r.attributeState.stroke=new ya(h))}var p=Ot(n,r.styleSheets,"stroke-linecap");p&&(r.attributeState.strokeLinecap=p);var g=Ot(n,r.styleSheets,"stroke-linejoin");g&&(r.attributeState.strokeLinejoin=g);var b=Ot(n,r.styleSheets,"stroke-dasharray");if(b){var v=parseInt(Ot(n,r.styleSheets,"stroke-dashoffset")||"0");r.attributeState.strokeDasharray=no(b),r.attributeState.strokeDashoffset=v}var y=Ot(n,r.styleSheets,"stroke-miterlimit");y!==void 0&&y!==""&&(r.attributeState.strokeMiterlimit=parseFloat(y));var m=n.getAttribute("xml:space");m&&(r.attributeState.xmlSpace=m);var w=Ot(n,r.styleSheets,"font-weight");w&&(r.attributeState.fontWeight=w);var S=Ot(n,r.styleSheets,"font-style");S&&(r.attributeState.fontStyle=S);var A=Ot(n,r.styleSheets,"font-family");if(A){var _=h9.parse(A);r.attributeState.fontFamily=function(R,x,B){var D=mN(R.fontStyle,R.fontWeight),O=B.pdf.getFontList(),G="";return x.some(function(V){var I=O[V];return I&&I.indexOf(D)>=0?(G=V,!0):(V=V.toLowerCase(),!!ks.hasOwnProperty(V)&&(G=V,!0))})||(G="times"),G}(r.attributeState,_,r)}var E=Ot(n,r.styleSheets,"font-size");if(E){var k=r.pdf.getFontSize();r.attributeState.fontSize=As(E,k)}var M=Ot(n,r.styleSheets,"vertical-align")||Ot(n,r.styleSheets,"alignment-baseline");if(M){var T=M.match(/(baseline|text-bottom|alphabetic|ideographic|middle|central|mathematical|text-top|bottom|center|top|hanging)/);T&&(r.attributeState.alignmentBaseline=T[0])}var C=Ot(n,r.styleSheets,"text-anchor");C&&(r.attributeState.textAnchor=C)}function kw(r,e,t){var n=1,i=1;n*=r.attributeState.fillOpacity,n*=r.attributeState.opacity,r.attributeState.fill instanceof ya&&r.attributeState.fill.color.a!==void 0&&(n*=r.attributeState.fill.color.a),i*=r.attributeState.strokeOpacity,i*=r.attributeState.opacity,r.attributeState.stroke instanceof ya&&r.attributeState.stroke.color.a!==void 0&&(i*=r.attributeState.stroke.color.a);var a,o,s=n<1,u=i<1;if(Du(t,"use")?(s=!0,u=!0,n*=r.attributeState.fill?1:0,i*=r.attributeState.stroke?1:0):r.withinUse&&(r.attributeState.fill!==e.attributeState.fill?(s=!0,n*=r.attributeState.fill?1:0):s&&!r.attributeState.fill&&(n=0),r.attributeState.stroke!==e.attributeState.stroke?(u=!0,i*=r.attributeState.stroke?1:0):u&&!r.attributeState.stroke&&(i=0)),s||u){var l={};s&&(l.opacity=n),u&&(l["stroke-opacity"]=i),r.pdf.setGState(new El(l))}if(r.attributeState.fill&&r.attributeState.fill!==e.attributeState.fill&&r.attributeState.fill instanceof ya&&r.attributeState.fill.color.ok&&!Du(t,"text")&&r.pdf.setFillColor(r.attributeState.fill.color.r,r.attributeState.fill.color.g,r.attributeState.fill.color.b),r.attributeState.strokeWidth!==e.attributeState.strokeWidth&&r.pdf.setLineWidth(r.attributeState.strokeWidth),r.attributeState.stroke!==e.attributeState.stroke&&r.attributeState.stroke instanceof ya&&r.pdf.setDrawColor(r.attributeState.stroke.color.r,r.attributeState.stroke.color.g,r.attributeState.stroke.color.b),r.attributeState.strokeLinecap!==e.attributeState.strokeLinecap&&r.pdf.setLineCap(r.attributeState.strokeLinecap),r.attributeState.strokeLinejoin!==e.attributeState.strokeLinejoin&&r.pdf.setLineJoin(r.attributeState.strokeLinejoin),r.attributeState.strokeDasharray===e.attributeState.strokeDasharray&&r.attributeState.strokeDashoffset===e.attributeState.strokeDashoffset||!r.attributeState.strokeDasharray||r.pdf.setLineDashPattern(r.attributeState.strokeDasharray,r.attributeState.strokeDashoffset),r.attributeState.strokeMiterlimit!==e.attributeState.strokeMiterlimit&&r.pdf.setLineMiterLimit(r.attributeState.strokeMiterlimit),r.attributeState.fontFamily!==e.attributeState.fontFamily&&(a=ks.hasOwnProperty(r.attributeState.fontFamily)?ks[r.attributeState.fontFamily]:r.attributeState.fontFamily),r.attributeState.fill&&r.attributeState.fill!==e.attributeState.fill&&r.attributeState.fill instanceof ya&&r.attributeState.fill.color.ok){var f=r.attributeState.fill.color;r.pdf.setTextColor(f.r,f.g,f.b)}r.attributeState.fontWeight===e.attributeState.fontWeight&&r.attributeState.fontStyle===e.attributeState.fontStyle||(o=mN(r.attributeState.fontStyle,r.attributeState.fontWeight)),a===void 0&&o===void 0||(a===void 0&&(a=ks.hasOwnProperty(r.attributeState.fontFamily)?ks[r.attributeState.fontFamily]:r.attributeState.fontFamily),r.pdf.setFont(a,o)),r.attributeState.fontSize!==e.attributeState.fontSize&&r.pdf.setFontSize(r.attributeState.fontSize*r.pdf.internal.scaleFactor)}function xN(r,e,t){var n=Ew.exec(r);if(n){var i=n[1];return t.refsHandler.get(i)||void 0}}function SN(r,e,t){return Gn(this,void 0,void 0,function(){var n,i;return $n(this,function(a){switch(a.label){case 0:return n=t.clone(),e.element.hasAttribute("clipPathUnits")&&e.element.getAttribute("clipPathUnits").toLowerCase()==="objectboundingbox"&&(i=r.getBoundingBox(t),n.transform=t.pdf.matrixMult(t.pdf.Matrix(i[2],0,0,i[3],i[0],i[1]),t.transform)),[4,e.apply(n)];case 1:return a.sent(),[2]}})})}var EN=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return Rn(e,r),e.prototype.render=function(t){return Gn(this,void 0,void 0,function(){var n,i,a,o;return $n(this,function(s){switch(s.label){case 0:return this.isVisible(t.attributeState.visibility!=="hidden",t)?((n=t.clone()).transform=n.pdf.matrixMult(this.computeNodeTransform(n),t.transform),Tw(n,this),i=Ot(this.element,n.styleSheets,"clip-path"),(a=i&&i!=="none")?(o=xN(i,0,n))?o.isVisible(!0,n)?(n.pdf.saveGraphicsState(),[4,SN(this,o,n)]):[3,2]:[3,4]:[3,5]):[2];case 1:return s.sent(),[3,3];case 2:return[2];case 3:return[3,5];case 4:a=!1,s.label=5;case 5:return n.withinClipPath||n.pdf.saveGraphicsState(),kw(n,t,this.element),[4,this.renderCore(n)];case 6:return s.sent(),n.withinClipPath||n.pdf.restoreGraphicsState(),a&&n.pdf.restoreGraphicsState(),[2]}})})},e}(Aw),dv=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return Rn(e,r),e}(EN),Hh=function(r){function e(t,n,i){var a=r.call(this,n,i)||this;return a.cachedPath=null,a.hasMarkers=t,a}return Rn(e,r),e.prototype.renderCore=function(t){return Gn(this,void 0,void 0,function(){var n;return $n(this,function(i){switch(i.label){case 0:return(n=this.getCachedPath(t))===null||n.segments.length===0?[2]:(t.withinClipPath?n.transform(t.transform):t.pdf.setCurrentTransformationMatrix(t.transform),n.draw(t),[4,this.fillOrStroke(t)]);case 1:return i.sent(),this.hasMarkers?[4,this.drawMarkers(t,n)]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}})})},e.prototype.getCachedPath=function(t){return this.cachedPath||(this.cachedPath=this.getPath(t))},e.prototype.drawMarkers=function(t,n){return Gn(this,void 0,void 0,function(){return $n(this,function(i){switch(i.label){case 0:return[4,this.getMarkers(n,t).draw(t.clone({transform:t.pdf.unitMatrix}))];case 1:return i.sent(),[2]}})})},e.prototype.fillOrStroke=function(t){return Gn(this,void 0,void 0,function(){var n,i,a,o,s;return $n(this,function(u){switch(u.label){case 0:return t.withinClipPath?[2]:(n=t.attributeState.fill,i=t.attributeState.stroke&&t.attributeState.strokeWidth!==0,n?[4,n.getFillData(this,t)]:[3,2]);case 1:return o=u.sent(),[3,3];case 2:o=void 0,u.label=3;case 3:return a=o,s=Ot(this.element,t.styleSheets,"fill-rule")==="evenodd",n&&i||t.withinUse?s?t.pdf.fillStrokeEvenOdd(a):t.pdf.fillStroke(a):n?s?t.pdf.fillEvenOdd(a):t.pdf.fill(a):i?t.pdf.stroke():t.pdf.discardPath(),[2]}})})},e.prototype.getBoundingBoxCore=function(t){var n=this.getCachedPath(t);if(!n||!n.segments.length)return[0,0,0,0];for(var i=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,u=0,l=0,f=0;f<n.segments.length;f++){var c=n.segments[f];(c instanceof Fi||c instanceof mu||c instanceof Xo)&&(u=c.x,l=c.y),c instanceof Xo?(i=Math.min(i,u,c.x1,c.x2,c.x),o=Math.max(o,u,c.x1,c.x2,c.x),a=Math.min(a,l,c.y1,c.y2,c.y),s=Math.max(s,l,c.y1,c.y2,c.y)):(i=Math.min(i,u),o=Math.max(o,u),a=Math.min(a,l),s=Math.max(s,l))}return[i,a,o-i,s-a]},e.prototype.getMarkers=function(t,n){var i=Ot(this.element,n.styleSheets,"marker-start"),a=Ot(this.element,n.styleSheets,"marker-mid"),o=Ot(this.element,n.styleSheets,"marker-end"),s=new $9;if(i||a||o){o&&(o=Tm(o)),i&&(i=Tm(i)),a&&(a=Tm(a));for(var u=t.segments,l=[1,0],f=void 0,c=!1,d=[1,0],h=!1,p=function(b){var v=u[b],y=i&&(b===1||!(u[b]instanceof Fi)&&u[b-1]instanceof Fi);y&&u.forEach(function(E,k){if(!h&&E instanceof O2&&k>b){var M=u[k-1];h=(M instanceof Fi||M instanceof mu||M instanceof Xo)&&M}});var m=o&&(b===u.length-1||!(u[b]instanceof Fi)&&u[b+1]instanceof Fi),w=a&&b>0&&!(b===1&&u[b-1]instanceof Fi),S=u[b-1]||null;if(S instanceof Fi||S instanceof mu||S instanceof Xo)if(v instanceof Xo)y&&s.addMarker(new du(i,[S.x,S.y],oS(h?[h.x,h.y]:[S.x,S.y],[v.x1,v.y1]))),m&&s.addMarker(new du(o,[v.x,v.y],oS([v.x2,v.y2],[v.x,v.y]))),w&&(f=df([S.x,S.y],[v.x1,v.y1]),f=S instanceof Fi?f:Qc(Gd(l,f)),s.addMarker(new du(a,[S.x,S.y],Math.atan2(f[1],f[0])))),l=df([v.x2,v.y2],[v.x,v.y]);else if(v instanceof Fi||v instanceof mu){if(f=df([S.x,S.y],[v.x,v.y]),y){var A=h?df([h.x,h.y],[v.x,v.y]):f;s.addMarker(new du(i,[S.x,S.y],Math.atan2(A[1],A[0])))}m&&s.addMarker(new du(o,[v.x,v.y],Math.atan2(f[1],f[0]))),w&&(A=v instanceof Fi?l:S instanceof Fi?f:Qc(Gd(l,f)),s.addMarker(new du(a,[S.x,S.y],Math.atan2(A[1],A[0])))),l=f}else v instanceof O2&&(f=df([S.x,S.y],[c.x,c.y]),w&&(A=S instanceof Fi?f:Qc(Gd(l,f)),s.addMarker(new du(a,[S.x,S.y],Math.atan2(A[1],A[0])))),m&&(A=Qc(Gd(f,d)),s.addMarker(new du(o,[c.x,c.y],Math.atan2(A[1],A[0])))),l=f);else{c=v instanceof Fi&&v;var _=u[b+1];(_ instanceof Fi||_ instanceof mu||_ instanceof Xo)&&(d=df([c.x,c.y],[_.x,_.y]))}},g=0;g<u.length;g++)p(g)}return s},e}(dv);function Tm(r){var e=Ew.exec(r);return e&&e[1]||void 0}var Y9=function(r){function e(t,n){return r.call(this,!0,t,n)||this}return Rn(e,r),e.prototype.getPath=function(t){if(t.withinClipPath||t.attributeState.stroke===null)return null;var n=parseFloat(this.element.getAttribute("x1")||"0"),i=parseFloat(this.element.getAttribute("y1")||"0"),a=parseFloat(this.element.getAttribute("x2")||"0"),o=parseFloat(this.element.getAttribute("y2")||"0");return n||a||i||o?new Gf().moveTo(n,i).lineTo(a,o):null},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,n){return Bs(this,t,n)},e.prototype.fillOrStroke=function(t){return Gn(this,void 0,void 0,function(){return $n(this,function(n){switch(n.label){case 0:return t.attributeState.fill=null,[4,r.prototype.fillOrStroke.call(this,t)];case 1:return n.sent(),[2]}})})},e}(Hh),CN=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return Rn(e,r),e.prototype.apply=function(t){return Gn(this,void 0,void 0,function(){var n,i,a,o,s;return $n(this,function(u){switch(u.label){case 0:return this.isVisible(t.attributeState.visibility!=="hidden",t)?((n=t.clone()).transform=n.pdf.unitMatrix,Tw(n,this),i=Ot(this.element,n.styleSheets,"clip-path"),i&&i!=="none"&&(a=xN(i,0,n))?a.isVisible(!0,n)?[4,SN(this,a,n)]:[3,2]:[3,3]):[2];case 1:return u.sent(),[3,3];case 2:return[2];case 3:kw(n,t,this.element),o=0,s=this.children,u.label=4;case 4:return o<s.length?[4,s[o].render(n)]:[3,7];case 5:u.sent(),u.label=6;case 6:return o++,[3,4];case 7:return[2]}})})},e.prototype.getBoundingBoxCore=function(t){return Cw(t,this)},e.prototype.isVisible=function(t,n){return qu(this,t,n)},e.prototype.computeNodeTransformCore=function(t){var n=parseFloat(Ot(this.element,t.styleSheets,"x")||"0"),i=parseFloat(Ot(this.element,t.styleSheets,"y")||"0"),a=this.element.getAttribute("viewBox");if(a){var o=no(a),s=parseFloat(Ot(this.element,t.styleSheets,"width")||Ot(this.element.ownerSVGElement,t.styleSheets,"width")||a[2]),u=parseFloat(Ot(this.element,t.styleSheets,"height")||Ot(this.element.ownerSVGElement,t.styleSheets,"height")||a[3]);return cv(this.element,o,n,i,s,u,t)}return t.pdf.Matrix(1,0,0,1,n,i)},e}(Uh),pv=function(r,e){this.width=r,this.height=e},X9=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return Rn(e,r),e.prototype.renderCore=function(t){return Gn(this,void 0,void 0,function(){var n,i,a,o,s,u,l,f,c,d,h,p,g;return $n(this,function(b){switch(b.label){case 0:return n=parseFloat,(i=this.element.getAttribute("href")||this.element.getAttribute("xlink:href"))?(a=i.substring(1),o=t.refsHandler.get(a),s=Du(o.element,"symbol,svg")&&o.element.hasAttribute("viewBox"),u=n(Ot(this.element,t.styleSheets,"x")||"0"),l=n(Ot(this.element,t.styleSheets,"y")||"0"),f=void 0,c=void 0,s?(f=n(Ot(this.element,t.styleSheets,"width")||Ot(o.element,t.styleSheets,"width")||"0"),c=n(Ot(this.element,t.styleSheets,"height")||Ot(o.element,t.styleSheets,"height")||"0"),u+=n(Ot(o.element,t.styleSheets,"x")||"0"),l+=n(Ot(o.element,t.styleSheets,"y")||"0"),h=no(o.element.getAttribute("viewBox")),d=cv(o.element,h,u,l,f,c,t)):d=t.pdf.Matrix(1,0,0,1,u,l),p=new zu(t.pdf,{refsHandler:t.refsHandler,styleSheets:t.styleSheets,withinUse:!0,viewport:s?new pv(f,c):t.viewport,svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure}),g=t.attributeState.color,[4,t.refsHandler.getRendered(a,g,function(v){return e.renderReferencedNode(v,a,g,p)})]):[2];case 1:return b.sent(),t.pdf.saveGraphicsState(),t.pdf.setCurrentTransformationMatrix(t.transform),s&&Ot(o.element,t.styleSheets,"overflow")!=="visible"&&(t.pdf.rect(u,l,f,c),t.pdf.clip().discardPath()),t.pdf.doFormObject(t.refsHandler.generateKey(a,g),d),t.pdf.restoreGraphicsState(),[2]}})})},e.renderReferencedNode=function(t,n,i,a){return Gn(this,void 0,void 0,function(){var o;return $n(this,function(s){switch(s.label){case 0:return o=[(o=t.getBoundingBox(a))[0]-.5*o[2],o[1]-.5*o[3],2*o[2],2*o[3]],a.attributeState.color=i,a.pdf.beginFormObject(o[0],o[1],o[2],o[3],a.pdf.unitMatrix),t instanceof CN?[4,t.apply(a)]:[3,2];case 1:return s.sent(),[3,4];case 2:return[4,t.render(a)];case 3:s.sent(),s.label=4;case 4:return a.pdf.endFormObject(a.refsHandler.generateKey(n,i)),[2]}})})},e.prototype.getBoundingBoxCore=function(t){return $h(this.element,t)},e.prototype.isVisible=function(t,n){return Bs(this,t,n)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e}(dv),K9=function(r){function e(t,n){return r.call(this,!1,t,n)||this}return Rn(e,r),e.prototype.getPath=function(t){var n=parseFloat(Ot(this.element,t.styleSheets,"width")||"0"),i=parseFloat(Ot(this.element,t.styleSheets,"height")||"0");if(!isFinite(n)||n<=0||!isFinite(i)||i<=0)return null;var a=Ot(this.element,t.styleSheets,"rx"),o=Ot(this.element,t.styleSheets,"ry"),s=Math.min(parseFloat(a||o||"0"),.5*n),u=Math.min(parseFloat(o||a||"0"),.5*i),l=parseFloat(Ot(this.element,t.styleSheets,"x")||"0"),f=parseFloat(Ot(this.element,t.styleSheets,"y")||"0"),c=4/3*(Math.SQRT2-1);return s===0&&u===0?new Gf().moveTo(l,f).lineTo(l+n,f).lineTo(l+n,f+i).lineTo(l,f+i).close():new Gf().moveTo(l+=s,f).lineTo(l+=n-2*s,f).curveTo(l+s*c,f,l+s,f+(u-u*c),l+=s,f+=u).lineTo(l,f+=i-2*u).curveTo(l,f+u*c,l-s*c,f+u,l-=s,f+=u).lineTo(l+=2*s-n,f).curveTo(l-s*c,f,l-s,f-u*c,l-=s,f-=u).lineTo(l,f+=2*u-i).curveTo(l,f-u*c,l+s*c,f-u,l+=s,f-=u).close()},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,n){return Bs(this,t,n)},e}(Hh),AN=function(r){function e(t,n){return r.call(this,!1,t,n)||this}return Rn(e,r),e.prototype.getPath=function(t){var n=this.getRx(t),i=this.getRy(t);if(!isFinite(n)||i<=0||!isFinite(i)||i<=0)return null;var a=parseFloat(Ot(this.element,t.styleSheets,"cx")||"0"),o=parseFloat(Ot(this.element,t.styleSheets,"cy")||"0"),s=4/3*(Math.SQRT2-1)*n,u=4/3*(Math.SQRT2-1)*i;return new Gf().moveTo(a+n,o).curveTo(a+n,o-u,a+s,o-i,a,o-i).curveTo(a-s,o-i,a-n,o-u,a-n,o).curveTo(a-n,o+u,a-s,o+i,a,o+i).curveTo(a+s,o+i,a+n,o+u,a+n,o)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,n){return Bs(this,t,n)},e}(Hh),Z9=function(r){function e(t,n){return r.call(this,t,n)||this}return Rn(e,r),e.prototype.getRx=function(t){return parseFloat(Ot(this.element,t.styleSheets,"rx")||"0")},e.prototype.getRy=function(t){return parseFloat(Ot(this.element,t.styleSheets,"ry")||"0")},e}(AN);function TN(r){var e="invisible",t=r.stroke&&r.strokeWidth!==0,n=r.fill;return n&&t?e="fillThenStroke":n?e="fill":t&&(e="stroke"),e}function uS(r){return r.replace(/[\n\r]/g,"")}function lS(r){return r.replace(/[\t]/g," ")}function fS(r){return r.replace(/ +/g," ")}function cS(r,e,t){switch(Ot(r,t.styleSheets,"text-transform")){case"uppercase":return e.toUpperCase();case"lowercase":return e.toLowerCase();default:return e}}var km=function(){function r(e,t,n,i){this.textNode=e,this.texts=[],this.textNodes=[],this.contexts=[],this.textAnchor=t,this.originX=n,this.originY=i,this.textMeasures=[]}return r.prototype.setX=function(e){this.originX=e},r.prototype.setY=function(e){this.originY=e},r.prototype.add=function(e,t,n){this.texts.push(t),this.textNodes.push(e),this.contexts.push(n)},r.prototype.rightTrimText=function(){for(var e=this.texts.length-1;e>=0;e--)if(this.contexts[e].attributeState.xmlSpace==="default"&&(this.texts[e]=this.texts[e].replace(/\s+$/,"")),this.texts[e].match(/[^\s]/))return!1;return!0},r.prototype.measureText=function(e){for(var t=0;t<this.texts.length;t++)this.textMeasures.push({width:e.textMeasure.measureTextWidth(this.texts[t],this.contexts[t].attributeState),length:this.texts[t].length})},r.prototype.put=function(e,t){var n,i,a,o,s=[],u=[],l=[],f=this.originX,c=this.originY,d=f,h=f;for(n=0;n<this.textNodes.length;n++){i=this.textNodes[n],a=this.contexts[n],o=this.textMeasures[n]||{width:e.textMeasure.measureTextWidth(this.texts[n],this.contexts[n].attributeState),length:this.texts[n].length};var p=f,g=c;if(i.nodeName!=="#text"&&!s.includes(i)){s.push(i);var b=r.resolveRelativePositionAttribute(i,"dx");b!==null&&(p+=As(b,a.attributeState.fontSize));var v=r.resolveRelativePositionAttribute(i,"dy");v!==null&&(g+=As(v,a.attributeState.fontSize))}u[n]=p,l[n]=g,f=p+o.width+o.length*t,c=g,d=Math.min(d,p),h=Math.max(h,f)}var y=0;switch(this.textAnchor){case"start":y=0;break;case"middle":y=(h-d)/2;break;case"end":y=h-d}for(n=0;n<this.textNodes.length;n++)if(i=this.textNodes[n],a=this.contexts[n],i.nodeName==="#text"||a.attributeState.visibility!=="hidden"){e.pdf.saveGraphicsState(),kw(a,e,i);var m=a.attributeState.alignmentBaseline,w=TN(a.attributeState);e.pdf.text(this.texts[n],u[n]-y,l[n],{baseline:gN(m),angle:e.transform,renderingMode:w==="fill"?void 0:w,charSpace:t===0?void 0:t}),e.pdf.restoreGraphicsState()}return[f,c]},r.resolveRelativePositionAttribute=function(e,t){for(var n,i=e;i&&Du(i,"tspan");){if(i.hasAttribute(t))return i.getAttribute(t);if(((n=e.parentElement)===null||n===void 0?void 0:n.firstChild)!==e)break;i=i.parentElement}return null},r}(),Q9=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return Rn(e,r),e.prototype.processTSpans=function(t,n,i,a,o,s){for(var u=i.pdf.getFontSize(),l=i.attributeState.xmlSpace,f=!0,c=!1,d=0;d<n.childNodes.length;d++){var h=n.childNodes[d];if(h.textContent){var p=h.textContent;if(h.nodeName==="#text"){var g=uS(p);g=lS(g),l==="default"&&(g=fS(g),f&&g.match(/^\s/)&&(c=!0),g.match(/[^\s]/)&&(f=!1),s.prevText.match(/\s$/)&&(g=g.replace(/^\s+/,"")));var b=cS(n,g,i);o.add(n,b,i),s.prevText=p,s.prevContext=i}else if(!Du(h,"title")){if(Du(h,"tspan")){var v=h,y=v.getAttribute("x");if(y!==null){var m=As(y,u);o=new km(this,Ot(v,i.styleSheets,"text-anchor")||i.attributeState.textAnchor,m,0),a.push({type:"y",chunk:o})}var w=v.getAttribute("y");if(w!==null){var S=As(w,u);o=new km(this,Ot(v,i.styleSheets,"text-anchor")||i.attributeState.textAnchor,0,S),a.push({type:"x",chunk:o})}var A=i.clone();Tw(A,t,v),this.processTSpans(t,v,A,a,o,s)}}}}return c},e.prototype.renderCore=function(t){return Gn(this,void 0,void 0,function(){var n,i,a,o,s,u,l,f,c,d,h,p,g,b,v,y,m,w,S,A,_,E,k;return $n(this,function(M){if(t.pdf.saveGraphicsState(),n=0,i=0,a=1,o=t.pdf.getFontSize(),s=As(this.element.getAttribute("x"),o),u=As(this.element.getAttribute("y"),o),l=As(this.element.getAttribute("dx"),o),f=As(this.element.getAttribute("dy"),o),c=parseFloat(this.element.getAttribute("textLength")||"0"),d=t.attributeState.visibility,this.element.childElementCount===0)h=this.element.textContent||"",p=function(T,C){return T=lS(T=uS(T)),C.xmlSpace==="default"&&(T=fS(T=T.trim())),T}(h,t.attributeState),g=cS(this.element,p,t),n=t.textMeasure.getTextOffset(g,t.attributeState),c>0&&(b=t.textMeasure.measureTextWidth(g,t.attributeState),t.attributeState.xmlSpace==="default"&&h.match(/^\s/)&&(a=0),i=(c-b)/(g.length-a)||0),d==="visible"&&(v=t.attributeState.alignmentBaseline,y=TN(t.attributeState),t.pdf.text(g,s+l-n,u+f,{baseline:gN(v),angle:t.transform,renderingMode:y==="fill"?void 0:y,charSpace:i===0?void 0:i}));else{for(m=[],w=new km(this,t.attributeState.textAnchor,s+l,u+f),m.push({type:"",chunk:w}),S=this.processTSpans(this,this.element,t,m,w,{prevText:" ",prevContext:t}),a=S?0:1,A=!0,_=m.length-1;_>=0;_--)A&&(A=m[_].chunk.rightTrimText());c>0&&(E=0,k=0,m.forEach(function(T){var C=T.chunk;C.measureText(t),C.textMeasures.forEach(function(R){var x=R.width,B=R.length;E+=x,k+=B})}),i=(c-E)/(k-a)),m.reduce(function(T,C){var R=C.type,x=C.chunk;return R==="x"?x.setX(T[0]):R==="y"&&x.setY(T[1]),x.put(t,i)},[0,0])}return t.pdf.restoreGraphicsState(),[2]})})},e.prototype.isVisible=function(t,n){return qu(this,t,n)},e.prototype.getBoundingBoxCore=function(t){return $h(this.element,t)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e}(dv),J9=function(r){function e(t,n){return r.call(this,!0,t,n)||this}return Rn(e,r),e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,n){return Bs(this,t,n)},e.prototype.getPath=function(t){var n,i,a=new z9(Ot(this.element,t.styleSheets,"d")||"").unshort().unarc().abs(),o=new Gf;return a.iterate(function(s){switch(s[0]){case"M":o.moveTo(s[1],s[2]);break;case"L":o.lineTo(s[1],s[2]);break;case"H":o.lineTo(s[1],i);break;case"V":o.lineTo(n,s[1]);break;case"C":o.curveTo(s[1],s[2],s[3],s[4],s[5],s[6]);break;case"Q":var u=sS([n,i],[s[1],s[2]]),l=sS([s[3],s[4]],[s[1],s[2]]);o.curveTo(u[0],u[1],l[0],l[1],s[3],s[4]);break;case"Z":o.close()}switch(s[0]){case"M":case"L":n=s[1],i=s[2];break;case"H":n=s[1];break;case"V":i=s[1];break;case"C":n=s[5],i=s[6];break;case"Q":n=s[3],i=s[4]}}),o},e}(Hh),eG=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,((?:.|\s)*)$/i,tG=function(r){function e(t,n){var i=r.call(this,t,n)||this;return i.imageLoadingPromise=null,i.imageUrl=i.element.getAttribute("xlink:href")||i.element.getAttribute("href"),i.imageUrl&&(i.imageLoadingPromise=e.fetchImageData(i.imageUrl)),i}return Rn(e,r),e.prototype.renderCore=function(t){return Gn(this,void 0,void 0,function(){var n,i,a,o,s,u,l,f,c,d,h,p;return $n(this,function(g){switch(g.label){case 0:return this.imageLoadingPromise?(t.pdf.setCurrentTransformationMatrix(t.transform),n=parseFloat(Ot(this.element,t.styleSheets,"width")||"0"),i=parseFloat(Ot(this.element,t.styleSheets,"height")||"0"),a=parseFloat(Ot(this.element,t.styleSheets,"x")||"0"),o=parseFloat(Ot(this.element,t.styleSheets,"y")||"0"),!isFinite(n)||n<=0||!isFinite(i)||i<=0?[2]:[4,this.imageLoadingPromise]):[2];case 1:return s=g.sent(),u=s.data,(l=s.format).indexOf("svg")!==0?[3,3]:(f=new DOMParser,c=f.parseFromString(u,"image/svg+xml").firstElementChild,(!(d=this.element.getAttribute("preserveAspectRatio"))||d.indexOf("defer")<0||!c.getAttribute("preserveAspectRatio"))&&c.setAttribute("preserveAspectRatio",d||""),c.setAttribute("x",String(a)),c.setAttribute("y",String(o)),c.setAttribute("width",String(n)),c.setAttribute("height",String(i)),[4,Lw(c,h={}).render(new zu(t.pdf,{refsHandler:new vN(h),styleSheets:t.styleSheets,viewport:new pv(n,i),svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure}))]);case 2:return g.sent(),[2];case 3:p="data:image/"+l+";base64,"+btoa(u);try{t.pdf.addImage(p,"",a,o,n,i)}catch(b){typeof console=="object"&&console.warn&&console.warn("Could not load image "+this.imageUrl+`. 
`+b)}g.label=4;case 4:return[2]}})})},e.prototype.getBoundingBoxCore=function(t){return $h(this.element,t)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,n){return Bs(this,t,n)},e.fetchImageData=function(t){return Gn(this,void 0,void 0,function(){var n,i,a,o,s;return $n(this,function(u){switch(u.label){case 0:if(!(a=t.match(eG)))return[3,1];if(o=a[2],(s=o.split("/"))[0]!=="image")throw new Error("Unsupported image URL: "+t);return i=s[1],n=a[5],a[4]==="base64"?(n=n.replace(/\s/g,""),n=atob(n)):n=decodeURIComponent(n),[3,3];case 1:return[4,e.fetchImage(t)];case 2:n=u.sent(),i=t.substring(t.lastIndexOf(".")+1),u.label=3;case 3:return[2,{data:n,format:i}]}})})},e.fetchImage=function(t){return new Promise(function(n,i){var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){if(a.status!==200)throw new Error("Error "+a.status+": Failed to load image '"+t+"'");for(var o=new Uint8Array(a.response),s="",u=0;u<o.length;u++)s+=String.fromCharCode(o[u]);n(s)},a.onerror=i,a.onabort=i,a.send(null)})},e.getMimeType=function(t){switch(t=t.toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";default:return"image/"+t}},e}(dv),kN=function(r){function e(t,n,i){var a=r.call(this,!0,n,i)||this;return a.closed=t,a}return Rn(e,r),e.prototype.getPath=function(t){if(!this.element.hasAttribute("points")||this.element.getAttribute("points")==="")return null;var n=e.parsePointsString(this.element.getAttribute("points")),i=new Gf;if(n.length<1)return i;i.moveTo(n[0][0],n[0][1]);for(var a=1;a<n.length;a++)i.lineTo(n[a][0],n[a][1]);return this.closed&&i.close(),i},e.prototype.isVisible=function(t,n){return Bs(this,t,n)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.parsePointsString=function(t){for(var n=no(t),i=[],a=0;a<n.length-1;a+=2){var o=n[a],s=n[a+1];i.push([o,s])}return i},e}(Hh),rG=function(r){function e(t,n){return r.call(this,!0,t,n)||this}return Rn(e,r),e}(kN),nG=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return Rn(e,r),e.prototype.render=function(t){return Promise.resolve()},e.prototype.getBoundingBoxCore=function(t){return[0,0,0,0]},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,n){return Bs(this,t,n)},e}(Aw),iG=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return Rn(e,r),e.prototype.apply=function(t){return Gn(this,void 0,void 0,function(){var n,i,a,o,s;return $n(this,function(u){switch(u.label){case 0:n=this.computeNodeTransform(t),i=this.getBoundingBox(t),t.pdf.beginFormObject(i[0],i[1],i[2],i[3],n),function(l){var f=l.attributeState,c=l.pdf,d=1,h=1;d*=f.fillOpacity,d*=f.opacity,f.fill instanceof ya&&f.fill.color.a!==void 0&&(d*=f.fill.color.a),h*=f.strokeOpacity,h*=f.opacity,f.stroke instanceof ya&&f.stroke.color.a!==void 0&&(h*=f.stroke.color.a);var p,g={};if(g.opacity=d,g["stroke-opacity"]=h,c.setGState(new El(g)),f.fill&&f.fill instanceof ya&&f.fill.color.ok?c.setFillColor(f.fill.color.r,f.fill.color.g,f.fill.color.b):c.setFillColor(0,0,0),c.setLineWidth(f.strokeWidth),f.stroke instanceof ya?c.setDrawColor(f.stroke.color.r,f.stroke.color.g,f.stroke.color.b):c.setDrawColor(0,0,0),c.setLineCap(f.strokeLinecap),c.setLineJoin(f.strokeLinejoin),f.strokeDasharray?c.setLineDashPattern(f.strokeDasharray,f.strokeDashoffset):c.setLineDashPattern([],0),c.setLineMiterLimit(f.strokeMiterlimit),p=ks.hasOwnProperty(f.fontFamily)?ks[f.fontFamily]:f.fontFamily,f.fill&&f.fill instanceof ya&&f.fill.color.ok){var b=f.fill.color;c.setTextColor(b.r,b.g,b.b)}else c.setTextColor(0,0,0);var v="";f.fontWeight==="bold"&&(v="bold"),f.fontStyle==="italic"&&(v+="italic"),v===""&&(v="normal"),p!==void 0||v!==void 0?(p===void 0&&(p=ks.hasOwnProperty(f.fontFamily)?ks[f.fontFamily]:f.fontFamily),c.setFont(p,v)):c.setFont("helvetica",v),c.setFontSize(f.fontSize*c.internal.scaleFactor)}(a=new zu(t.pdf,{refsHandler:t.refsHandler,styleSheets:t.styleSheets,viewport:t.viewport,svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure})),o=0,s=this.children,u.label=1;case 1:return o<s.length?[4,s[o].render(a)]:[3,4];case 2:u.sent(),u.label=3;case 3:return o++,[3,1];case 4:return t.pdf.endFormObject(this.element.getAttribute("id")),[2]}})})},e.prototype.getBoundingBoxCore=function(t){var n,i=this.element.getAttribute("viewBox");return i&&(n=no(i)),[n&&n[0]||0,n&&n[1]||0,n&&n[2]||parseFloat(this.element.getAttribute("markerWidth")||"3"),n&&n[3]||parseFloat(this.element.getAttribute("markerHeight")||"3")]},e.prototype.computeNodeTransformCore=function(t){var n,i=parseFloat(this.element.getAttribute("refX")||"0"),a=parseFloat(this.element.getAttribute("refY")||"0"),o=this.element.getAttribute("viewBox");if(o){var s=no(o);n=cv(this.element,s,0,0,parseFloat(this.element.getAttribute("markerWidth")||"3"),parseFloat(this.element.getAttribute("markerHeight")||"3"),t,!0),n=t.pdf.matrixMult(t.pdf.Matrix(1,0,0,1,-i,-a),n)}else n=t.pdf.Matrix(1,0,0,1,-i,-a);return n},e.prototype.isVisible=function(t,n){return qu(this,t,n)},e}(Uh),aG=function(r){function e(t,n){return r.call(this,t,n)||this}return Rn(e,r),e.prototype.getR=function(t){var n;return(n=this.r)!==null&&n!==void 0?n:this.r=parseFloat(Ot(this.element,t.styleSheets,"r")||"0")},e.prototype.getRx=function(t){return this.getR(t)},e.prototype.getRy=function(t){return this.getR(t)},e}(AN),oG=function(r){function e(t,n){return r.call(this,!1,t,n)||this}return Rn(e,r),e}(kN),LN=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return Rn(e,r),e.prototype.renderCore=function(t){return Gn(this,void 0,void 0,function(){var n,i;return $n(this,function(a){switch(a.label){case 0:n=0,i=this.children,a.label=1;case 1:return n<i.length?[4,i[n].render(t)]:[3,4];case 2:a.sent(),a.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},e.prototype.getBoundingBoxCore=function(t){return Cw(t,this)},e}(EN),sG=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return Rn(e,r),e.prototype.isVisible=function(t,n){return qu(this,t,n)},e.prototype.render=function(t){return Gn(this,void 0,void 0,function(){var n,i,a,o,s;return $n(this,function(u){switch(u.label){case 0:return this.isVisible(t.attributeState.visibility!=="hidden",t)?(n=this.getX(t),i=this.getY(t),a=this.getWidth(t),o=this.getHeight(t),t.pdf.saveGraphicsState(),s=t.transform,this.element.hasAttribute("transform")&&(s=t.pdf.matrixMult(hv(this.element.getAttribute("transform"),t),s)),t.pdf.setCurrentTransformationMatrix(s),t.withinUse||Ot(this.element,t.styleSheets,"overflow")==="visible"||t.pdf.rect(n,i,a,o).clip().discardPath(),[4,r.prototype.render.call(this,t.clone({transform:t.pdf.unitMatrix,viewport:t.withinUse?t.viewport:new pv(a,o)}))]):[2];case 1:return u.sent(),t.pdf.restoreGraphicsState(),[2]}})})},e.prototype.computeNodeTransform=function(t){return this.computeNodeTransformCore(t)},e.prototype.computeNodeTransformCore=function(t){if(t.withinUse)return t.pdf.unitMatrix;var n,i=this.getX(t),a=this.getY(t),o=this.getViewBox();if(o){var s=this.getWidth(t),u=this.getHeight(t);n=cv(this.element,o,i,a,s,u,t)}else n=t.pdf.Matrix(1,0,0,1,i,a);return n},e.prototype.getWidth=function(t){if(this.width!==void 0)return this.width;var n,i,a=t.svg2pdfParameters;if(this.isOutermostSvg(t))if(a.width!=null)n=a.width;else if(i=Ot(this.element,t.styleSheets,"width"))n=parseFloat(i);else{var o=this.getViewBox();if(o&&(a.height!=null||Ot(this.element,t.styleSheets,"height"))){var s=o[2]/o[3];n=this.getHeight(t)*s}else n=Math.min(300,t.viewport.width,2*t.viewport.height)}else n=(i=Ot(this.element,t.styleSheets,"width"))?parseFloat(i):t.viewport.width;return this.width=n},e.prototype.getHeight=function(t){if(this.height!==void 0)return this.height;var n,i,a=t.svg2pdfParameters;if(this.isOutermostSvg(t))if(a.height!=null)n=a.height;else if(i=Ot(this.element,t.styleSheets,"height"))n=parseFloat(i);else{var o=this.getViewBox();if(o){var s=o[2]/o[3];n=this.getWidth(t)/s}else n=Math.min(150,t.viewport.width/2,t.viewport.height)}else n=(i=Ot(this.element,t.styleSheets,"height"))?parseFloat(i):t.viewport.height;return this.height=n},e.prototype.getX=function(t){if(this.x!==void 0)return this.x;if(this.isOutermostSvg(t))return this.x=0;var n=Ot(this.element,t.styleSheets,"x");return this.x=n?parseFloat(n):0},e.prototype.getY=function(t){if(this.y!==void 0)return this.y;if(this.isOutermostSvg(t))return this.y=0;var n=Ot(this.element,t.styleSheets,"y");return this.y=n?parseFloat(n):0},e.prototype.getViewBox=function(){if(this.viewBox!==void 0)return this.viewBox;var t=this.element.getAttribute("viewBox");return this.viewBox=t?no(t):void 0},e.prototype.isOutermostSvg=function(t){return t.svg2pdfParameters.element===this.element},e}(LN),uG=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return Rn(e,r),e.prototype.isVisible=function(t,n){return qu(this,t,n)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e}(LN),lG=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return Rn(e,r),e.prototype.apply=function(t){return Gn(this,void 0,void 0,function(){var n,i,a;return $n(this,function(o){switch(o.label){case 0:if(!this.isVisible(!0,t))return[2];n=t.pdf.matrixMult(this.computeNodeTransform(t),t.transform),t.pdf.setCurrentTransformationMatrix(n),i=0,a=this.children,o.label=1;case 1:return i<a.length?[4,a[i].render(new zu(t.pdf,{refsHandler:t.refsHandler,styleSheets:t.styleSheets,viewport:t.viewport,withinClipPath:!0,svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure}))]:[3,4];case 2:o.sent(),o.label=3;case 3:return i++,[3,1];case 4:return t.pdf.clip().discardPath(),t.pdf.setCurrentTransformationMatrix(n.inversed()),[2]}})})},e.prototype.getBoundingBoxCore=function(t){return Cw(t,this)},e.prototype.isVisible=function(t,n){return qu(this,t,n)},e}(Uh);function Lw(r,e){var t,n=[];switch(function(a,o){for(var s=[],u=0;u<a.childNodes.length;u++){var l=a.childNodes[u];l.nodeName.charAt(0)!=="#"&&s.push(l)}for(u=0;u<s.length;u++)o(u,s[u])}(r,function(a,o){return n.push(Lw(o,e))}),r.tagName.toLowerCase()){case"a":case"g":t=new uG(r,n);break;case"circle":t=new aG(r,n);break;case"clippath":t=new lG(r,n);break;case"ellipse":t=new Z9(r,n);break;case"lineargradient":t=new bN(r,n);break;case"image":t=new tG(r,n);break;case"line":t=new Y9(r,n);break;case"marker":t=new iG(r,n);break;case"path":t=new J9(r,n);break;case"pattern":t=new _N(r,n);break;case"polygon":t=new rG(r,n);break;case"polyline":t=new oG(r,n);break;case"radialgradient":t=new wN(r,n);break;case"rect":t=new K9(r,n);break;case"svg":t=new sG(r,n);break;case"symbol":t=new CN(r,n);break;case"text":t=new Q9(r,n);break;case"use":t=new X9(r,n);break;default:t=new nG(r,n)}if(e!=null&&t.element.hasAttribute("id")){var i=hN(t.element.id,{isIdentifier:!0});e[i]=e[i]||t}return t.children.forEach(function(a){return a.setParent(t)}),t}var fG=function(){function r(e,t){this.rootSvg=e,this.loadExternalSheets=t,this.styleSheets=[]}return r.prototype.load=function(){return Gn(this,void 0,void 0,function(){var e;return $n(this,function(t){switch(t.label){case 0:return[4,this.collectStyleSheetTexts()];case 1:return e=t.sent(),this.parseCssSheets(e),[2]}})})},r.prototype.collectStyleSheetTexts=function(){return Gn(this,void 0,void 0,function(){var e,t,n,i,a;return $n(this,function(o){switch(o.label){case 0:if(e=[],this.loadExternalSheets&&this.rootSvg.ownerDocument)for(i=0;i<this.rootSvg.ownerDocument.childNodes.length;i++)(t=this.rootSvg.ownerDocument.childNodes[i]).nodeName==="xml-stylesheet"&&typeof t.data=="string"&&e.push(r.loadSheet(t.data.match(/href=["'].*?["']/)[0].split("=")[1].slice(1,-1)));for(n=this.rootSvg.querySelectorAll("style,link"),i=0;i<n.length;i++)Du(a=n[i],"style")?e.push(a.textContent):this.loadExternalSheets&&Du(a,"link")&&a.getAttribute("rel")==="stylesheet"&&a.hasAttribute("href")&&e.push(r.loadSheet(a.getAttribute("href")));return[4,Promise.all(e)];case 1:return[2,o.sent().filter(function(s){return s!==null})]}})})},r.prototype.parseCssSheets=function(e){for(var t=document.implementation.createHTMLDocument(""),n=0,i=e;n<i.length;n++){var a=i[n],o=t.createElement("style");o.textContent=a,t.body.appendChild(o);var s=o.sheet;if(s instanceof CSSStyleSheet){for(var u=s.cssRules.length-1;u>=0;u--){var l=s.cssRules[u];if(l instanceof CSSStyleRule){var f=l;if(f.selectorText.indexOf(",")>=0){s.deleteRule(u);for(var c=f.cssText.substring(f.selectorText.length),d=r.splitSelectorAtCommas(f.selectorText),h=0;h<d.length;h++)s.insertRule(d[h]+c,u+h)}}else s.deleteRule(u)}this.styleSheets.push(s)}}},r.splitSelectorAtCommas=function(e){for(var t,n=/,|["']/g,i=/[^\\]["]/g,a=/[^\\][']/g,o=[],s="initial",u=-1,l=i,f=0;f<e.length;)switch(s){case"initial":n.lastIndex=f,(t=n.exec(e))?(t[0]===","?(o.push(e.substring(u+1,n.lastIndex-1).trim()),u=n.lastIndex-1):(s="withinQuotes",l=t[0]==='"'?i:a),f=n.lastIndex):(o.push(e.substring(u+1).trim()),f=e.length);break;case"withinQuotes":l.lastIndex=f,(t=l.exec(e))&&(f=l.lastIndex,s="initial")}return o},r.loadSheet=function(e){return new Promise(function(t,n){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="text",i.onload=function(){i.status!==200&&n(new Error("Error "+i.status+": Failed to load '"+e+"'")),t(i.responseText)},i.onerror=n,i.onabort=n,i.send(null)}).catch(function(){return null})},r.prototype.getPropertyValue=function(e,t){for(var n=[],i=0,a=this.styleSheets;i<a.length;i++)for(var o=a[i],s=0;s<o.cssRules.length;s++){var u=o.cssRules[s];u.style.getPropertyValue(t)&&e.matches(u.selectorText)&&n.push(u)}if(n.length!==0)return n.reduce(function(l,f){return d=f,((h=(c=l).style.getPropertyPriority(t))!==d.style.getPropertyPriority(t)?h==="important"?1:-1:q9(c.selectorText,d.selectorText))===1?l:f;var c,d,h}).style.getPropertyValue(t)||void 0},r}(),cG=function(){function r(){this.measureMethods={}}return r.prototype.getTextOffset=function(e,t){var n=t.textAnchor;if(n==="start")return 0;var i=this.measureTextWidth(e,t),a=0;switch(n){case"end":a=i;break;case"middle":a=i/2}return a},r.prototype.measureTextWidth=function(e,t){if(e.length===0)return 0;var n=t.fontFamily;return this.getMeasureFunction(n).call(this,e,t.fontFamily,t.fontSize+"px",t.fontStyle,t.fontWeight)},r.prototype.getMeasurementTextNode=function(){if(!this.textMeasuringTextElement){this.textMeasuringTextElement=document.createElementNS("http://www.w3.org/2000/svg","text");var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.appendChild(this.textMeasuringTextElement),e.style.setProperty("position","absolute"),e.style.setProperty("visibility","hidden"),document.body.appendChild(e)}return this.textMeasuringTextElement},r.prototype.canvasTextMeasure=function(e,t,n,i,a){var o=document.createElement("canvas").getContext("2d");return o!=null?(o.font=[i,a,n,t].join(" "),o.measureText(e).width):0},r.prototype.svgTextMeasure=function(e,t,n,i,a,o){o===void 0&&(o=this.getMeasurementTextNode());var s=o;return s.setAttribute("font-family",t),s.setAttribute("font-size",n),s.setAttribute("font-style",i),s.setAttribute("font-weight",a),s.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),s.textContent=e,s.getBBox().width},r.prototype.getMeasureFunction=function(e){var t=this.measureMethods[e];if(!t){var n=this.canvasTextMeasure(r.testString,e,"16px","normal","normal"),i=this.svgTextMeasure(r.testString,e,"16px","normal","normal");t=Math.abs(n-i)<r.epsilon?this.canvasTextMeasure:this.svgTextMeasure,this.measureMethods[e]=t}return t},r.prototype.cleanupTextMeasuring=function(){if(this.textMeasuringTextElement){var e=this.textMeasuringTextElement.parentNode;e&&document.body.removeChild(e),this.textMeasuringTextElement=void 0}},r.testString=`abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789!"$%&/()=?'\\+*-_.:,;^}][{#~|<>`,r.epsilon=.1,r}();function NN(r,e,t){var n,i,a;return t===void 0&&(t={}),Gn(this,void 0,void 0,function(){var o,s,u,l,f,c,d,h,p,g,b;return $n(this,function(v){switch(v.label){case 0:return o=(n=t.x)!==null&&n!==void 0?n:0,s=(i=t.y)!==null&&i!==void 0?i:0,u=(a=t.loadExternalStyleSheets)!==null&&a!==void 0&&a,f=new vN(l={}),[4,(c=new fG(r,u)).load()];case 1:return v.sent(),d=new pv(e.internal.pageSize.getWidth(),e.internal.pageSize.getHeight()),h=M2(M2({},t),{element:r}),p=new cG,g=new zu(e,{refsHandler:f,styleSheets:c,viewport:d,svg2pdfParameters:h,textMeasure:p}),e.advancedAPI(),e.saveGraphicsState(),e.setCurrentTransformationMatrix(e.Matrix(1,0,0,1,o,s)),e.setLineWidth(g.attributeState.strokeWidth),b=g.attributeState.fill.color,e.setFillColor(b.r,b.g,b.b),e.setFont(g.attributeState.fontFamily),e.setFontSize(g.attributeState.fontSize*e.internal.scaleFactor),[4,Lw(r,l).render(g)];case 2:return v.sent(),e.restoreGraphicsState(),e.compatAPI(),g.textMeasure.cleanupTextMeasuring(),[2,e]}})})}xr.API.svg=function(r,e){return e===void 0&&(e={}),NN(r,this,e)};function hG(r){let e,t;return e=new ww({props:{name:"File",menuItems:r[1],minimal:!r[0]}}),{c(){Qt(e.$$.fragment)},m(n,i){Xt(e,n,i),t=!0},p(n,[i]){const a={};i&2&&(a.menuItems=n[1]),i&1&&(a.minimal=!n[0]),e.$set(a)},i(n){t||(xt(e.$$.fragment,n),t=!0)},o(n){At(e.$$.fragment,n),t=!1},d(n){Kt(e,n)}}}function hS(r,e){for(let t in e)e.hasOwnProperty(t)&&e[t]!==void 0&&(r[t]=e[t])}function dG(){document.getElementById("dataUpload-fileInput").click()}function pG(r,e,t){let n,i,a,o,s;Kr(r,sr,T=>t(2,n=T)),Kr(r,o2,T=>t(3,i=T)),Kr(r,Ts,T=>t(4,a=T)),Kr(r,tn,T=>t(5,o=T)),Kr(r,Jn,T=>t(6,s=T));let{full:u=!0}=e;ir.use(eq);function l(){n.modelEmpty?f():bootbox.confirm("Are you sure you want to create a new model? This will delete the current model.",function(T){T&&f()})}function f(){Lr(jr).elements().remove(),jL(),tr(sr,n.parsedModel=!1,n),tr(tn,o.fix_first=!0,o),tr(tn,o.mode="user model",o),Shiny.setInputValue("show_help",Math.random());for(let C in a)tr(Ts,a[C]=null,a)}function c(T){f();let C=JSON.parse(T),R=Lr(jr),x;x=JSON.parse(C.model);const B=JSON.parse(C.modelOpt),D=JSON.parse(C.gridViewOpt);if(hS(o,B),hS(s,D),C.fitCache!=null){const O=JSON.parse(C.fitCache);tr(Ts,a=O,a)}tr(sr,n.loadingMode=!0,n),R.json({elements:x}),R.style(zL),R.edgeEditing(hz),R.style().update(),R.minZoom(Zc.minZoom),R.maxZoom(Zc.maxZoom),R.autolock(Zc.autolock),R.autoungrabify(Zc.autoungrabify),n.dataAvail&&b2(n.columnNames),o.mode!=="user model"?tr(Jn,s.showLav=!0,s):tr(Jn,s.showLav=!1,s),R.nodes().forEach(O=>{$a(O.id())}),tr(sr,n.loadingMode=!1,n)}async function d(){const T=document.createElement("input");T.setAttribute("type","file"),T.setAttribute("accept",".json");const C=await new Promise(x=>{T.addEventListener("change",B=>x(B.target.files[0])),T.click()}),R=await new Promise(x=>{const B=new FileReader;B.readAsText(C,"UTF-8"),B.onload=()=>x(B.result)});c(R)}function h(){n.modelEmpty?d():bootbox.confirm("Are you sure you want to load a model? This will delete the current model.",function(T){T&&d()})}function p(){n.modelEmpty?g():bootbox.confirm("Are you sure you want to load a model? This will delete the current model.",function(T){T&&g()})}function g(){const T=document.createElement("input");T.setAttribute("type","file"),T.setAttribute("accept",".zip"),T.addEventListener("change",function(C){const R=C.target.files[0],x=new FileReader;x.readAsArrayBuffer(R),x.onload=function(){const B=x.result;Vz.loadAsync(B).then(function(D){D.file("data.csv").async("base64").then(function(O){Shiny.setInputValue("dataUpload-fileInput",{content:O});const G=setInterval(()=>{n.dataAvail&&(clearInterval(G),D.file("model.json").async("text").then(function(V){c(V)}))},100)})})}}),T.click()}function b(){const T=Lr(jr);ir();let C=T.json().elements;C.nodes.forEach(G=>{G.classes=G.classes.split(" ").filter(V=>V!==Cf).join(" ")});const R=JSON.stringify(C),x=JSON.stringify(o),B=JSON.stringify(o),D=JSON.stringify(a);return JSON.stringify({model:R,modelOpt:x,gridViewOpt:B,fitCache:D})}function v(){const T=b();let C=new Blob([T],{type:"application/json;charset=utf-8"}),R=URL.createObjectURL(C);window.$("<a>").attr({href:R,download:"diagram.json"})[0].click()}async function y(){const T=b();Shiny.setInputValue("down-model",T),await new Promise(C=>setTimeout(C,1)),document.getElementById("down-downloadData").click()}function m(){const T=Lr(jr);tr(sr,n.dataAvail=!1,n),tr(sr,n.columnNames=null,n),tr(sr,n.loadedFileName=null,n),tr(sr,n.ids=null,n),tr(o2,i=null,i),T.nodes().unlink(),Shiny.setInputValue("dataUpload-deleteData",Math.random())}function w(T,C){tq.saveAs(T,"model."+C)}function S(){const T=Lr(jr);w(T.png({bg:"white"}),"png")}function A(){const T=Lr(jr);w(T.jpg(),"jpg")}function _(){return Lr(jr).svg({scale:1,full:!0})}function E(){const T=_(),C=new Blob([T],{type:"image/svg+xml;charset=utf-8"});w(C,"svg")}async function k(){const T=_(),R=new DOMParser().parseFromString(T,"image/svg+xml").documentElement;R.style.position="absolute",R.style.left="-9999px",document.body.appendChild(R);const x=R.getBoundingClientRect();document.body.removeChild(R);const B=x.width,D=x.height,O=new xr({orientation:B>D?"landscape":"portrait",unit:"pt",format:[B,D]});await NN(R,O,{width:B,height:D}),O.save("model.pdf")}let M;return r.$$set=T=>{"full"in T&&t(0,u=T.full)},r.$$.update=()=>{if(r.$$.dirty&5){let T=[{name:"New Model",action:l},{name:"Load Model",action:h},{name:"Load Data",action:dG},{name:"Load Model and Data",action:p},{name:"Download Model",action:v,disable:n.modelEmpty},{name:"Remove Data",action:m,disable:!n.dataAvail},{name:"Download Model and Data",disable:n.modelEmpty||!n.dataAvail,action:y,divider:!0},{name:"Export Diagram to PNG",disable:n.modelEmpty,action:S},{name:"Export Diagram to JPG",disable:n.modelEmpty,action:A},{name:"Export Diagram to SVG",disable:n.modelEmpty,action:E},{name:"Export Diagram to PDF",disable:n.modelEmpty,action:k}];t(1,M=u?T:T.slice(-4))}},[u,M,n]}class PN extends Ir{constructor(e){super(),Dr(this,e,pG,hG,Nr,{full:0})}}function vG(r){let e;return{c(){e=Yt("span"),st(e,"class","glyphicon glyphicon-ok check-mark invisible"),st(e,"aria-hidden","true")},m(t,n){Pt(t,e,n)},d(t){t&&Nt(e)}}}function gG(r){let e;return{c(){e=Yt("span"),st(e,"class","glyphicon glyphicon-ok check-mark"),st(e,"aria-hidden","true")},m(t,n){Pt(t,e,n)},d(t){t&&Nt(e)}}}function mG(r){let e,t,n,i,a,o,s,u,l;function f(h,p){return h[0]?gG:vG}let c=f(r),d=c(r);return{c(){e=Yt("li"),t=Yt("label"),n=Yt("input"),i=qt(),d.c(),a=qt(),o=ia(r[1]),st(n,"type","checkbox"),st(n,"class","check-box svelte-17cge7g"),n.disabled=r[2],st(t,"class",s=yu(r[2]?"disabled-label":"")+" svelte-17cge7g"),st(e,"class","svelte-17cge7g")},m(h,p){Pt(h,e,p),Gt(e,t),Gt(t,n),n.checked=r[0],Gt(t,i),d.m(t,null),Gt(t,a),Gt(t,o),u||(l=kn(n,"change",r[3]),u=!0)},p(h,[p]){p&4&&(n.disabled=h[2]),p&1&&(n.checked=h[0]),c!==(c=f(h))&&(d.d(1),d=c(h),d&&(d.c(),d.m(t,a))),p&2&&Au(o,h[1]),p&4&&s!==(s=yu(h[2]?"disabled-label":"")+" svelte-17cge7g")&&st(t,"class",s)},i:Yr,o:Yr,d(h){h&&Nt(e),d.d(),u=!1,l()}}}function yG(r,e,t){let{name:n}=e,{checked:i}=e,{disable:a=!1}=e;function o(){i=this.checked,t(0,i)}return r.$$set=s=>{"name"in s&&t(1,n=s.name),"checked"in s&&t(0,i=s.checked),"disable"in s&&t(2,a=s.disable)},[i,n,a,o]}class Zo extends Ir{constructor(e){super(),Dr(this,e,yG,mG,Nr,{name:1,checked:0,disable:2})}}function bG(r){let e;return{c(){e=Yt("span"),st(e,"class","glyphicon glyphicon-ok check-mark invisible"),st(e,"aria-hidden","true")},m(t,n){Pt(t,e,n)},d(t){t&&Nt(e)}}}function wG(r){let e;return{c(){e=Yt("span"),st(e,"class","glyphicon glyphicon-ok check-mark"),st(e,"aria-hidden","true")},m(t,n){Pt(t,e,n)},d(t){t&&Nt(e)}}}function _G(r){let e,t,n,i=!1,a,o,s,u,l,f,c,d;function h(b,v){return b[0]===b[2]?wG:bG}let p=h(r),g=p(r);return f=DM(r[5][0]),{c(){e=Yt("div"),t=Yt("label"),n=Yt("input"),a=qt(),g.c(),o=qt(),s=ia(r[1]),st(n,"type","radio"),st(n,"name","meanStruc"),n.__value=r[2],n.value=n.__value,n.disabled=r[3],st(n,"class","svelte-lbhkwe"),st(t,"class",u=yu(r[3]?"text-muted":"")+" svelte-lbhkwe"),st(e,"class",l=yu(r[3]?"radio disabled":"radio")+" svelte-lbhkwe"),f.p(n)},m(b,v){Pt(b,e,v),Gt(e,t),Gt(t,n),n.checked=n.__value===r[0],Gt(t,a),g.m(t,null),Gt(t,o),Gt(t,s),c||(d=kn(n,"change",r[4]),c=!0)},p(b,[v]){v&4&&(n.__value=b[2],n.value=n.__value,i=!0),v&8&&(n.disabled=b[3]),(i||v&1)&&(n.checked=n.__value===b[0]),p!==(p=h(b))&&(g.d(1),g=p(b),g&&(g.c(),g.m(t,o))),v&2&&Au(s,b[1]),v&8&&u!==(u=yu(b[3]?"text-muted":"")+" svelte-lbhkwe")&&st(t,"class",u),v&8&&l!==(l=yu(b[3]?"radio disabled":"radio")+" svelte-lbhkwe")&&st(e,"class",l)},i:Yr,o:Yr,d(b){b&&Nt(e),g.d(),f.r(),c=!1,d()}}}function xG(r,e,t){let{name:n}=e,{value:i}=e,{group:a}=e,{isDisabled:o=!1}=e;const s=[[]];function u(){a=this.__value,t(0,a)}return r.$$set=l=>{"name"in l&&t(1,n=l.name),"value"in l&&t(2,i=l.value),"group"in l&&t(0,a=l.group),"isDisabled"in l&&t(3,o=l.isDisabled)},[a,n,i,o,u,s]}class jh extends Ir{constructor(e){super(),Dr(this,e,xG,_G,Nr,{name:1,value:2,group:0,isDisabled:3})}}const dS=[{name:"Arrows Created by Lavaan",modelSlot:"showLav"},{name:"Variance Arrows",modelSlot:"showVar"},{name:"Mean Arrows",modelSlot:"showMean"}];let pS=[{name:"Estimate",value:"est"},{name:"Confidence Interval",value:"ci"},{name:"Estimate + p-value (stars)",value:"estPVal"},{name:"Estimate + Standard Error",value:"estSE"}];function SG(r,e,t){const n=Lr(jr),i=e?"_std":"",a=MN(r,i,t);n.style().selector("edge.hasEst").style({label:a}).update();const o=AG(r,i,t);n.style().selector("edge.hasEst.label").style({label:o}).update()}function EG(r,e,t,n){function i(f){return f.reduce((c,d,h)=>(d&&c.push(h),c),[])}const a=Lr(jr),o=[e,r,t],s=i(o),u=i(o.map(f=>!f));function l(f,c){return[h=>h.isLavaanAdded(),h=>h.isLoop(),h=>h.isMean()][f](c)}for(let f of s)a.elements(function(c){return l(f,c)}).show();for(let f of u)a.elements(function(c){return l(f,c)}).hide()}function CG(r){return r===null?"NA":r<.001?"***":r<.01?"**":r<.05?"*":""}function MN(r,e,t){const n=i=>i===null?"NA":i.toFixed(t);switch(r){case"est":return i=>n(i.data("estimates")["est"+e]);case"ci":return i=>`[${n(i.data("estimates")["ciLow"+e])}, ${n(i.data("estimates")["ciHigh"+e])}]`;case"estPVal":return i=>`${n(i.data("estimates")["est"+e])}${CG(i.data("estimates").p_value)}`;case"estSE":return i=>`${n(i.data("estimates")["est"+e])} (${n(i.data("estimates")["se"+e])})`;default:return()=>"NA"}}function AG(r,e,t){const n=MN(r,e,t);return i=>`${i.data("label")} = ${n(i)}`}function TG(r){let e,t,n,i,a,o;return{c(){e=Yt("li"),t=ia(r[1]),n=qt(),i=Yt("input"),Oa(i,"width","4em"),st(i,"type","number"),st(i,"id","gridSpacing"),st(i,"min",r[2]),Oa(e,"padding-left","28px")},m(s,u){Pt(s,e,u),Gt(e,t),Gt(e,n),Gt(e,i),pp(i,r[0]),a||(o=kn(i,"input",r[3]),a=!0)},p(s,[u]){u&2&&Au(t,s[1]),u&4&&st(i,"min",s[2]),u&1&&Bp(i.value)!==s[0]&&pp(i,s[0])},i:Yr,o:Yr,d(s){s&&Nt(e),a=!1,o()}}}function kG(r,e,t){let{name:n}=e,{value:i}=e,{min:a}=e;function o(){i=Bp(this.value),t(0,i)}return r.$$set=s=>{"name"in s&&t(1,n=s.name),"value"in s&&t(0,i=s.value),"min"in s&&t(2,a=s.min)},[i,n,a,o]}class kp extends Ir{constructor(e){super(),Dr(this,e,kG,TG,Nr,{name:1,value:0,min:2})}}function vS(r,e,t){const n=r.slice();return n[9]=e[t],n}function gS(r,e,t){const n=r.slice();return n[9]=e[t],n[12]=e,n[13]=t,n}function mS(r){let e,t,n,i;function a(u){r[3](u,r[9])}function o(u){r[4](u,r[9])}let s={disable:!1};return r[9].name!==void 0&&(s.name=r[9].name),r[1][r[9].modelSlot]!==void 0&&(s.checked=r[1][r[9].modelSlot]),e=new Zo({props:s}),qn.push(()=>ti(e,"name",a)),qn.push(()=>ti(e,"checked",o)),{c(){Qt(e.$$.fragment)},m(u,l){Xt(e,u,l),i=!0},p(u,l){r=u;const f={};!t&&l&4&&(t=!0,f.name=r[9].name,ei(()=>t=!1)),!n&&l&6&&(n=!0,f.checked=r[1][r[9].modelSlot],ei(()=>n=!1)),e.$set(f)},i(u){i||(xt(e.$$.fragment,u),i=!0)},o(u){At(e.$$.fragment,u),i=!1},d(u){Kt(e,u)}}}function yS(r){let e,t,n;function i(o){r[6](o)}let a={name:r[9].name,value:r[9].value};return r[1].view!==void 0&&(a.group=r[1].view),e=new jh({props:a}),qn.push(()=>ti(e,"group",i)),{c(){Qt(e.$$.fragment)},m(o,s){Xt(e,o,s),n=!0},p(o,s){const u={};!t&&s&2&&(t=!0,u.group=o[1].view,ei(()=>t=!1)),e.$set(u)},i(o){n||(xt(e.$$.fragment,o),n=!0)},o(o){At(e.$$.fragment,o),n=!1},d(o){Kt(e,o)}}}function LG(r){let e,t,n,i,a,o,s,u,l,f,c,d,h,p,g,b,v,y,m,w,S=r[2],A=[];for(let B=0;B<S.length;B+=1)A[B]=mS(gS(r,S,B));const _=B=>At(A[B],1,1,()=>{A[B]=null});function E(B){r[5](B)}let k={name:"Standardized Estimates",disable:!1};r[1].std!==void 0&&(k.checked=r[1].std),i=new Zo({props:k}),qn.push(()=>ti(i,"checked",E));let M=pS,T=[];for(let B=0;B<M.length;B+=1)T[B]=yS(vS(r,M,B));const C=B=>At(T[B],1,1,()=>{T[B]=null});function R(B){r[8](B)}let x={name:"Number Digits",min:0};return r[1].number_digits!==void 0&&(x.value=r[1].number_digits),b=new kp({props:x}),qn.push(()=>ti(b,"value",R)),{c(){for(let B=0;B<A.length;B+=1)A[B].c();e=qt(),t=Yt("li"),n=qt(),Qt(i.$$.fragment),o=qt(),s=Yt("li"),u=qt();for(let B=0;B<T.length;B+=1)T[B].c();l=qt(),f=Yt("li"),c=qt(),d=Yt("li"),h=ia(`Confidence Level
    `),p=Yt("input"),g=qt(),Qt(b.$$.fragment),st(t,"class","divider"),st(s,"class","divider"),st(f,"class","divider"),st(p,"type","number"),st(p,"min","0"),st(p,"max","0.999999"),st(p,"step","0.01"),Oa(p,"width","4em"),Oa(d,"padding-left","28px")},m(B,D){for(let O=0;O<A.length;O+=1)A[O]&&A[O].m(B,D);Pt(B,e,D),Pt(B,t,D),Pt(B,n,D),Xt(i,B,D),Pt(B,o,D),Pt(B,s,D),Pt(B,u,D);for(let O=0;O<T.length;O+=1)T[O]&&T[O].m(B,D);Pt(B,l,D),Pt(B,f,D),Pt(B,c,D),Pt(B,d,D),Gt(d,h),Gt(d,p),pp(p,r[1].ci),Pt(B,g,D),Xt(b,B,D),y=!0,m||(w=kn(p,"input",r[7]),m=!0)},p(B,D){if(D&6){S=B[2];let V;for(V=0;V<S.length;V+=1){const I=gS(B,S,V);A[V]?(A[V].p(I,D),xt(A[V],1)):(A[V]=mS(I),A[V].c(),xt(A[V],1),A[V].m(e.parentNode,e))}for(io(),V=S.length;V<A.length;V+=1)_(V);ao()}const O={};if(!a&&D&2&&(a=!0,O.checked=B[1].std,ei(()=>a=!1)),i.$set(O),D&2){M=pS;let V;for(V=0;V<M.length;V+=1){const I=vS(B,M,V);T[V]?(T[V].p(I,D),xt(T[V],1)):(T[V]=yS(I),T[V].c(),xt(T[V],1),T[V].m(l.parentNode,l))}for(io(),V=M.length;V<T.length;V+=1)C(V);ao()}D&2&&Bp(p.value)!==B[1].ci&&pp(p,B[1].ci);const G={};!v&&D&2&&(v=!0,G.value=B[1].number_digits,ei(()=>v=!1)),b.$set(G)},i(B){if(!y){for(let D=0;D<S.length;D+=1)xt(A[D]);xt(i.$$.fragment,B);for(let D=0;D<M.length;D+=1)xt(T[D]);xt(b.$$.fragment,B),y=!0}},o(B){A=A.filter(Boolean);for(let D=0;D<A.length;D+=1)At(A[D]);At(i.$$.fragment,B),T=T.filter(Boolean);for(let D=0;D<T.length;D+=1)At(T[D]);At(b.$$.fragment,B),y=!1},d(B){Ls(A,B),B&&Nt(e),B&&Nt(t),B&&Nt(n),Kt(i,B),B&&Nt(o),B&&Nt(s),B&&Nt(u),Ls(T,B),B&&Nt(l),B&&Nt(f),B&&Nt(c),B&&Nt(d),B&&Nt(g),Kt(b,B),m=!1,w()}}}function NG(r){let e,t;return e=new ac({props:{name:"View",minimal:r[0],$$slots:{default:[LG]},$$scope:{ctx:r}}}),{c(){Qt(e.$$.fragment)},m(n,i){Xt(e,n,i),t=!0},p(n,[i]){const a={};i&1&&(a.minimal=n[0]),i&16390&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){t||(xt(e.$$.fragment,n),t=!0)},o(n){At(e.$$.fragment,n),t=!1},d(n){Kt(e,n)}}}function PG(r,e,t){let n;Kr(r,Jn,c=>t(1,n=c));let{minimal:i=!1}=e;function a(c,d){r.$$.not_equal(d.name,c)&&(d.name=c,t(2,dS))}function o(c,d){r.$$.not_equal(n[d.modelSlot],c)&&(n[d.modelSlot]=c,Jn.set(n))}function s(c){r.$$.not_equal(n.std,c)&&(n.std=c,Jn.set(n))}function u(c){r.$$.not_equal(n.view,c)&&(n.view=c,Jn.set(n))}function l(){n.ci=Bp(this.value),Jn.set(n)}function f(c){r.$$.not_equal(n.number_digits,c)&&(n.number_digits=c,Jn.set(n))}return r.$$set=c=>{"minimal"in c&&t(0,i=c.minimal)},r.$$.update=()=>{r.$$.dirty&2&&Shiny.setInputValue("ests-confindence_level",n.ci)},[i,n,dS,a,o,s,u,l,f]}class ON extends Ir{constructor(e){super(),Dr(this,e,PG,NG,Nr,{minimal:0})}}function bS(r,e,t){const n=r.slice();return n[8]=e[t],n}function wS(r){let e,t,n;function i(o){r[3](o)}let a={name:r[8].name,value:r[8].value};return r[0].meanStruc!==void 0&&(a.group=r[0].meanStruc),e=new jh({props:a}),qn.push(()=>ti(e,"group",i)),{c(){Qt(e.$$.fragment)},m(o,s){Xt(e,o,s),n=!0},p(o,s){const u={};!t&&s&1&&(t=!0,u.group=o[0].meanStruc,ei(()=>t=!1)),e.$set(u)},i(o){n||(xt(e.$$.fragment,o),n=!0)},o(o){At(e.$$.fragment,o),n=!1},d(o){Kt(e,o)}}}function MG(r){let e,t,n,i,a,o,s,u,l,f,c,d,h,p=r[2],g=[];for(let _=0;_<p.length;_+=1)g[_]=wS(bS(r,p,_));const b=_=>At(g[_],1,1,()=>{g[_]=null});function v(_){r[4](_)}function y(_){r[5](_)}let m={name:"Add Intercepts for all Observed Variables"};r[0].intOvFree!==void 0&&(m.checked=r[0].intOvFree),r[1]!==void 0&&(m.disable=r[1]),o=new Zo({props:m}),qn.push(()=>ti(o,"checked",v)),qn.push(()=>ti(o,"disable",y));function w(_){r[6](_)}function S(_){r[7](_)}let A={name:"Add Intercepts for all Latent Variables"};return r[0].intLvFree!==void 0&&(A.checked=r[0].intLvFree),r[1]!==void 0&&(A.disable=r[1]),f=new Zo({props:A}),qn.push(()=>ti(f,"checked",w)),qn.push(()=>ti(f,"disable",S)),{c(){e=Yt("li"),t=Yt("a"),t.textContent="Model Means?",n=qt(),i=Yt("ul");for(let _=0;_<g.length;_+=1)g[_].c();a=qt(),Qt(o.$$.fragment),l=qt(),Qt(f.$$.fragment),st(t,"tabindex","-1"),st(t,"href","#"),st(t,"class","svelte-143y7r6"),st(i,"class","dropdown-menu svelte-143y7r6"),st(e,"class","dropdown-submenu svelte-143y7r6")},m(_,E){Pt(_,e,E),Gt(e,t),Gt(e,n),Gt(e,i);for(let k=0;k<g.length;k+=1)g[k]&&g[k].m(i,null);Pt(_,a,E),Xt(o,_,E),Pt(_,l,E),Xt(f,_,E),h=!0},p(_,E){if(E&5){p=_[2];let T;for(T=0;T<p.length;T+=1){const C=bS(_,p,T);g[T]?(g[T].p(C,E),xt(g[T],1)):(g[T]=wS(C),g[T].c(),xt(g[T],1),g[T].m(i,null))}for(io(),T=p.length;T<g.length;T+=1)b(T);ao()}const k={};!s&&E&1&&(s=!0,k.checked=_[0].intOvFree,ei(()=>s=!1)),!u&&E&2&&(u=!0,k.disable=_[1],ei(()=>u=!1)),o.$set(k);const M={};!c&&E&1&&(c=!0,M.checked=_[0].intLvFree,ei(()=>c=!1)),!d&&E&2&&(d=!0,M.disable=_[1],ei(()=>d=!1)),f.$set(M)},i(_){if(!h){for(let E=0;E<p.length;E+=1)xt(g[E]);xt(o.$$.fragment,_),xt(f.$$.fragment,_),h=!0}},o(_){g=g.filter(Boolean);for(let E=0;E<g.length;E+=1)At(g[E]);At(o.$$.fragment,_),At(f.$$.fragment,_),h=!1},d(_){_&&Nt(e),Ls(g,_),_&&Nt(a),Kt(o,_),_&&Nt(l),Kt(f,_)}}}function OG(r){let e,t;return e=new ac({props:{name:DG,$$slots:{default:[MG]},$$scope:{ctx:r}}}),{c(){Qt(e.$$.fragment)},m(n,i){Xt(e,n,i),t=!0},p(n,[i]){const a={};i&2051&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){t||(xt(e.$$.fragment,n),t=!0)},o(n){At(e.$$.fragment,n),t=!1},d(n){Kt(e,n)}}}let DG="Mean Options";function IG(r,e,t){let n,i;Kr(r,tn,c=>t(0,i=c));let a=[{name:"Automatic",value:"default"},{name:"Yes",value:"true"},{name:"No",value:"false"}];function o(c){r.$$.not_equal(i.meanStruc,c)&&(i.meanStruc=c,tn.set(i))}function s(c){r.$$.not_equal(i.intOvFree,c)&&(i.intOvFree=c,tn.set(i))}function u(c){n=c,t(1,n),t(0,i)}function l(c){r.$$.not_equal(i.intLvFree,c)&&(i.intLvFree=c,tn.set(i))}function f(c){n=c,t(1,n),t(0,i)}return r.$$.update=()=>{r.$$.dirty&1&&t(1,n=i.meanStruc==="false")},[i,n,a,o,s,u,l,f]}class RG extends Ir{constructor(e){super(),Dr(this,e,IG,OG,Nr,{})}}function _S(r,e,t){const n=r.slice();return n[9]=e[t],n}function xS(r,e,t){const n=r.slice();return n[9]=e[t],n}function SS(r,e,t){const n=r.slice();return n[9]=e[t],n}function ES(r){let e,t,n;function i(o){r[4](o)}let a={name:r[9].name,value:r[9].value};return r[0].estimator!==void 0&&(a.group=r[0].estimator),e=new jh({props:a}),qn.push(()=>ti(e,"group",i)),{c(){Qt(e.$$.fragment)},m(o,s){Xt(e,o,s),n=!0},p(o,s){const u={};!t&&s&1&&(t=!0,u.group=o[0].estimator,ei(()=>t=!1)),e.$set(u)},i(o){n||(xt(e.$$.fragment,o),n=!0)},o(o){At(e.$$.fragment,o),n=!1},d(o){Kt(e,o)}}}function CS(r){let e,t,n;function i(o){r[5](o)}let a={name:r[9].name,value:r[9].value};return r[0].se!==void 0&&(a.group=r[0].se),e=new jh({props:a}),qn.push(()=>ti(e,"group",i)),{c(){Qt(e.$$.fragment)},m(o,s){Xt(e,o,s),n=!0},p(o,s){const u={};!t&&s&1&&(t=!0,u.group=o[0].se,ei(()=>t=!1)),e.$set(u)},i(o){n||(xt(e.$$.fragment,o),n=!0)},o(o){At(e.$$.fragment,o),n=!1},d(o){Kt(e,o)}}}function AS(r){let e,t,n;function i(o){r[7](o)}let a={name:r[9].name,value:r[9].value};return r[0].missing!==void 0&&(a.group=r[0].missing),e=new jh({props:a}),qn.push(()=>ti(e,"group",i)),{c(){Qt(e.$$.fragment)},m(o,s){Xt(e,o,s),n=!0},p(o,s){const u={};!t&&s&1&&(t=!0,u.group=o[0].missing,ei(()=>t=!1)),e.$set(u)},i(o){n||(xt(e.$$.fragment,o),n=!0)},o(o){At(e.$$.fragment,o),n=!1},d(o){Kt(e,o)}}}function FG(r){let e,t,n,i,a,o,s,u,l,f,c,d,h,p,g,b,v,y,m=r[1],w=[];for(let x=0;x<m.length;x+=1)w[x]=ES(SS(r,m,x));const S=x=>At(w[x],1,1,()=>{w[x]=null});let A=r[2],_=[];for(let x=0;x<A.length;x+=1)_[x]=CS(xS(r,A,x));const E=x=>At(_[x],1,1,()=>{_[x]=null});function k(x){r[6](x)}let M={name:"Number of Bootstrap Samples:",min:5};r[0].n_boot!==void 0&&(M.value=r[0].n_boot),c=new kp({props:M}),qn.push(()=>ti(c,"value",k));let T=r[3],C=[];for(let x=0;x<T.length;x+=1)C[x]=AS(_S(r,T,x));const R=x=>At(C[x],1,1,()=>{C[x]=null});return{c(){e=Yt("li"),t=Yt("a"),t.textContent="Estimator",n=qt(),i=Yt("ul");for(let x=0;x<w.length;x+=1)w[x].c();a=qt(),o=Yt("li"),s=Yt("a"),s.textContent="Standard Error",u=qt(),l=Yt("ul");for(let x=0;x<_.length;x+=1)_[x].c();f=qt(),Qt(c.$$.fragment),h=qt(),p=Yt("li"),g=Yt("a"),g.textContent="Missing Values",b=qt(),v=Yt("ul");for(let x=0;x<C.length;x+=1)C[x].c();st(t,"tabindex","-1"),st(t,"href","#"),st(t,"class","svelte-143y7r6"),st(i,"class","dropdown-menu svelte-143y7r6"),st(e,"class","dropdown-submenu svelte-143y7r6"),st(s,"tabindex","-1"),st(s,"href","#"),st(s,"class","svelte-143y7r6"),st(l,"class","dropdown-menu svelte-143y7r6"),st(o,"class","dropdown-submenu svelte-143y7r6"),st(g,"tabindex","-1"),st(g,"href","#"),st(g,"class","svelte-143y7r6"),st(v,"class","dropdown-menu svelte-143y7r6"),st(p,"class","dropdown-submenu svelte-143y7r6")},m(x,B){Pt(x,e,B),Gt(e,t),Gt(e,n),Gt(e,i);for(let D=0;D<w.length;D+=1)w[D]&&w[D].m(i,null);Pt(x,a,B),Pt(x,o,B),Gt(o,s),Gt(o,u),Gt(o,l);for(let D=0;D<_.length;D+=1)_[D]&&_[D].m(l,null);Gt(l,f),Xt(c,l,null),Pt(x,h,B),Pt(x,p,B),Gt(p,g),Gt(p,b),Gt(p,v);for(let D=0;D<C.length;D+=1)C[D]&&C[D].m(v,null);y=!0},p(x,B){if(B&3){m=x[1];let O;for(O=0;O<m.length;O+=1){const G=SS(x,m,O);w[O]?(w[O].p(G,B),xt(w[O],1)):(w[O]=ES(G),w[O].c(),xt(w[O],1),w[O].m(i,null))}for(io(),O=m.length;O<w.length;O+=1)S(O);ao()}if(B&5){A=x[2];let O;for(O=0;O<A.length;O+=1){const G=xS(x,A,O);_[O]?(_[O].p(G,B),xt(_[O],1)):(_[O]=CS(G),_[O].c(),xt(_[O],1),_[O].m(l,f))}for(io(),O=A.length;O<_.length;O+=1)E(O);ao()}const D={};if(!d&&B&1&&(d=!0,D.value=x[0].n_boot,ei(()=>d=!1)),c.$set(D),B&9){T=x[3];let O;for(O=0;O<T.length;O+=1){const G=_S(x,T,O);C[O]?(C[O].p(G,B),xt(C[O],1)):(C[O]=AS(G),C[O].c(),xt(C[O],1),C[O].m(v,null))}for(io(),O=T.length;O<C.length;O+=1)R(O);ao()}},i(x){if(!y){for(let B=0;B<m.length;B+=1)xt(w[B]);for(let B=0;B<A.length;B+=1)xt(_[B]);xt(c.$$.fragment,x);for(let B=0;B<T.length;B+=1)xt(C[B]);y=!0}},o(x){w=w.filter(Boolean);for(let B=0;B<w.length;B+=1)At(w[B]);_=_.filter(Boolean);for(let B=0;B<_.length;B+=1)At(_[B]);At(c.$$.fragment,x),C=C.filter(Boolean);for(let B=0;B<C.length;B+=1)At(C[B]);y=!1},d(x){x&&Nt(e),Ls(w,x),x&&Nt(a),x&&Nt(o),Ls(_,x),Kt(c),x&&Nt(h),x&&Nt(p),Ls(C,x)}}}function BG(r){let e,t;return e=new ac({props:{name:zG,$$slots:{default:[FG]},$$scope:{ctx:r}}}),{c(){Qt(e.$$.fragment)},m(n,i){Xt(e,n,i),t=!0},p(n,[i]){const a={};i&65537&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){t||(xt(e.$$.fragment,n),t=!0)},o(n){At(e.$$.fragment,n),t=!1},d(n){Kt(e,n)}}}const zG="Estimation";function qG(r,e,t){let n;Kr(r,tn,c=>t(0,n=c));const i=[{value:"default",name:"Default"},{value:"ML",name:"Maximum Likelihood (ML)"},{value:"GLS",name:"Generalized Least Squares (GLS)"},{value:"WLS",name:"Weighted Least Squares (WLS)"},{value:"ULS",name:"Unweighted Least Squares (ULS)"},{value:"DLS",name:"Distributionally-weighted Least Squares (DLW)"}],a=[{value:"default",name:"Default"},{value:"robust",name:"Robust"},{value:"boot",name:"Bootstrap"}],o=[{value:"listwise",name:"Listwise"},{value:"ml",name:"Full Information Maximum Likelihood (FIML)"}];function s(c){r.$$.not_equal(n.estimator,c)&&(n.estimator=c,tn.set(n))}function u(c){r.$$.not_equal(n.se,c)&&(n.se=c,tn.set(n))}function l(c){r.$$.not_equal(n.n_boot,c)&&(n.n_boot=c,tn.set(n))}function f(c){r.$$.not_equal(n.missing,c)&&(n.missing=c,tn.set(n))}return[n,i,a,o,s,u,l,f]}class GG extends Ir{constructor(e){super(),Dr(this,e,qG,BG,Nr,{})}}var DN={exports:{}},Lm,TS;function $G(){if(TS)return Lm;TS=1;var r=Gp;function e(){this.__data__=new r,this.size=0}return Lm=e,Lm}var Nm,kS;function UG(){if(kS)return Nm;kS=1;function r(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}return Nm=r,Nm}var Pm,LS;function HG(){if(LS)return Pm;LS=1;function r(e){return this.__data__.get(e)}return Pm=r,Pm}var Mm,NS;function jG(){if(NS)return Mm;NS=1;function r(e){return this.__data__.has(e)}return Mm=r,Mm}var Om,PS;function VG(){if(PS)return Om;PS=1;var r=Gp,e=X2,t=K2,n=200;function i(a,o){var s=this.__data__;if(s instanceof r){var u=s.__data__;if(!e||u.length<n-1)return u.push([a,o]),this.size=++s.size,this;s=this.__data__=new t(u)}return s.set(a,o),this.size=s.size,this}return Om=i,Om}var Dm,MS;function vv(){if(MS)return Dm;MS=1;var r=Gp,e=$G(),t=UG(),n=HG(),i=jG(),a=VG();function o(s){var u=this.__data__=new r(s);this.size=u.size}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=n,o.prototype.has=i,o.prototype.set=a,Dm=o,Dm}var Im,OS;function Nw(){if(OS)return Im;OS=1;function r(e,t){for(var n=-1,i=e==null?0:e.length;++n<i&&t(e[n],n,e)!==!1;);return e}return Im=r,Im}var Rm,DS;function Vh(){if(DS)return Rm;DS=1;var r=Vp,e=jp;function t(n,i,a,o){var s=!a;a||(a={});for(var u=-1,l=i.length;++u<l;){var f=i[u],c=o?o(a[f],n[f],f,a,n):void 0;c===void 0&&(c=n[f]),s?e(a,f,c):r(a,f,c)}return a}return Rm=t,Rm}var Fm,IS;function WG(){if(IS)return Fm;IS=1;function r(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}return Fm=r,Fm}var Bm,RS;function YG(){if(RS)return Bm;RS=1;var r=Tl,e=os,t="[object Arguments]";function n(i){return e(i)&&r(i)==t}return Bm=n,Bm}var zm,FS;function Wh(){if(FS)return zm;FS=1;var r=YG(),e=os,t=Object.prototype,n=t.hasOwnProperty,i=t.propertyIsEnumerable,a=r(function(){return arguments}())?r:function(o){return e(o)&&n.call(o,"callee")&&!i.call(o,"callee")};return zm=a,zm}var Jc={exports:{}},qm,BS;function XG(){if(BS)return qm;BS=1;function r(){return!1}return qm=r,qm}Jc.exports;var zS;function oc(){return zS||(zS=1,function(r,e){var t=ko,n=XG(),i=e&&!e.nodeType&&e,a=i&&!0&&r&&!r.nodeType&&r,o=a&&a.exports===i,s=o?t.Buffer:void 0,u=s?s.isBuffer:void 0,l=u||n;r.exports=l}(Jc,Jc.exports)),Jc.exports}var Gm,qS;function Pw(){if(qS)return Gm;qS=1;var r=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=r}return Gm=e,Gm}var $m,GS;function KG(){if(GS)return $m;GS=1;var r=Tl,e=Pw(),t=os,n="[object Arguments]",i="[object Array]",a="[object Boolean]",o="[object Date]",s="[object Error]",u="[object Function]",l="[object Map]",f="[object Number]",c="[object Object]",d="[object RegExp]",h="[object Set]",p="[object String]",g="[object WeakMap]",b="[object ArrayBuffer]",v="[object DataView]",y="[object Float32Array]",m="[object Float64Array]",w="[object Int8Array]",S="[object Int16Array]",A="[object Int32Array]",_="[object Uint8Array]",E="[object Uint8ClampedArray]",k="[object Uint16Array]",M="[object Uint32Array]",T={};T[y]=T[m]=T[w]=T[S]=T[A]=T[_]=T[E]=T[k]=T[M]=!0,T[n]=T[i]=T[b]=T[a]=T[v]=T[o]=T[s]=T[u]=T[l]=T[f]=T[c]=T[d]=T[h]=T[p]=T[g]=!1;function C(R){return t(R)&&e(R.length)&&!!T[r(R)]}return $m=C,$m}var Um,$S;function gv(){if($S)return Um;$S=1;function r(e){return function(t){return e(t)}}return Um=r,Um}var eh={exports:{}};eh.exports;var US;function Mw(){return US||(US=1,function(r,e){var t=ek,n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,a=i&&i.exports===n,o=a&&t.process,s=function(){try{var u=i&&i.require&&i.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}}();r.exports=s}(eh,eh.exports)),eh.exports}var Hm,HS;function Yh(){if(HS)return Hm;HS=1;var r=KG(),e=gv(),t=Mw(),n=t&&t.isTypedArray,i=n?e(n):r;return Hm=i,Hm}var jm,jS;function IN(){if(jS)return jm;jS=1;var r=WG(),e=Wh(),t=yi,n=oc(),i=Wp,a=Yh(),o=Object.prototype,s=o.hasOwnProperty;function u(l,f){var c=t(l),d=!c&&e(l),h=!c&&!d&&n(l),p=!c&&!d&&!h&&a(l),g=c||d||h||p,b=g?r(l.length,String):[],v=b.length;for(var y in l)(f||s.call(l,y))&&!(g&&(y=="length"||h&&(y=="offset"||y=="parent")||p&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||i(y,v)))&&b.push(y);return b}return jm=u,jm}var Vm,VS;function mv(){if(VS)return Vm;VS=1;var r=Object.prototype;function e(t){var n=t&&t.constructor,i=typeof n=="function"&&n.prototype||r;return t===i}return Vm=e,Vm}var Wm,WS;function RN(){if(WS)return Wm;WS=1;function r(e,t){return function(n){return e(t(n))}}return Wm=r,Wm}var Ym,YS;function ZG(){if(YS)return Ym;YS=1;var r=RN(),e=r(Object.keys,Object);return Ym=e,Ym}var Xm,XS;function Ow(){if(XS)return Xm;XS=1;var r=mv(),e=ZG(),t=Object.prototype,n=t.hasOwnProperty;function i(a){if(!r(a))return e(a);var o=[];for(var s in Object(a))n.call(a,s)&&s!="constructor"&&o.push(s);return o}return Xm=i,Xm}var Km,KS;function zs(){if(KS)return Km;KS=1;var r=Nh,e=Pw();function t(n){return n!=null&&e(n.length)&&!r(n)}return Km=t,Km}var Zm,ZS;function Gu(){if(ZS)return Zm;ZS=1;var r=IN(),e=Ow(),t=zs();function n(i){return t(i)?r(i):e(i)}return Zm=n,Zm}var Qm,QS;function QG(){if(QS)return Qm;QS=1;var r=Vh(),e=Gu();function t(n,i){return n&&r(i,e(i),n)}return Qm=t,Qm}var Jm,JS;function JG(){if(JS)return Jm;JS=1;function r(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}return Jm=r,Jm}var e0,eE;function e$(){if(eE)return e0;eE=1;var r=ja,e=mv(),t=JG(),n=Object.prototype,i=n.hasOwnProperty;function a(o){if(!r(o))return t(o);var s=e(o),u=[];for(var l in o)l=="constructor"&&(s||!i.call(o,l))||u.push(l);return u}return e0=a,e0}var t0,tE;function Ol(){if(tE)return t0;tE=1;var r=IN(),e=e$(),t=zs();function n(i){return t(i)?r(i,!0):e(i)}return t0=n,t0}var r0,rE;function t$(){if(rE)return r0;rE=1;var r=Vh(),e=Ol();function t(n,i){return n&&r(i,e(i),n)}return r0=t,r0}var th={exports:{}};th.exports;var nE;function FN(){return nE||(nE=1,function(r,e){var t=ko,n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,a=i&&i.exports===n,o=a?t.Buffer:void 0,s=o?o.allocUnsafe:void 0;function u(l,f){if(f)return l.slice();var c=l.length,d=s?s(c):new l.constructor(c);return l.copy(d),d}r.exports=u}(th,th.exports)),th.exports}var n0,iE;function BN(){if(iE)return n0;iE=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,a=0,o=[];++n<i;){var s=e[n];t(s,n,e)&&(o[a++]=s)}return o}return n0=r,n0}var i0,aE;function zN(){if(aE)return i0;aE=1;function r(){return[]}return i0=r,i0}var a0,oE;function Dw(){if(oE)return a0;oE=1;var r=BN(),e=zN(),t=Object.prototype,n=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(o){return o==null?[]:(o=Object(o),r(i(o),function(s){return n.call(o,s)}))}:e;return a0=a,a0}var o0,sE;function r$(){if(sE)return o0;sE=1;var r=Vh(),e=Dw();function t(n,i){return r(n,e(n),i)}return o0=t,o0}var s0,uE;function Iw(){if(uE)return s0;uE=1;function r(e,t){for(var n=-1,i=t.length,a=e.length;++n<i;)e[a+n]=t[n];return e}return s0=r,s0}var u0,lE;function yv(){if(lE)return u0;lE=1;var r=RN(),e=r(Object.getPrototypeOf,Object);return u0=e,u0}var l0,fE;function qN(){if(fE)return l0;fE=1;var r=Iw(),e=yv(),t=Dw(),n=zN(),i=Object.getOwnPropertySymbols,a=i?function(o){for(var s=[];o;)r(s,t(o)),o=e(o);return s}:n;return l0=a,l0}var f0,cE;function n$(){if(cE)return f0;cE=1;var r=Vh(),e=qN();function t(n,i){return r(n,e(n),i)}return f0=t,f0}var c0,hE;function GN(){if(hE)return c0;hE=1;var r=Iw(),e=yi;function t(n,i,a){var o=i(n);return e(n)?o:r(o,a(n))}return c0=t,c0}var h0,dE;function $N(){if(dE)return h0;dE=1;var r=GN(),e=Dw(),t=Gu();function n(i){return r(i,t,e)}return h0=n,h0}var d0,pE;function i$(){if(pE)return d0;pE=1;var r=GN(),e=qN(),t=Ol();function n(i){return r(i,t,e)}return d0=n,d0}var p0,vE;function a$(){if(vE)return p0;vE=1;var r=Ll,e=ko,t=r(e,"DataView");return p0=t,p0}var v0,gE;function o$(){if(gE)return v0;gE=1;var r=Ll,e=ko,t=r(e,"Promise");return v0=t,v0}var g0,mE;function UN(){if(mE)return g0;mE=1;var r=Ll,e=ko,t=r(e,"Set");return g0=t,g0}var m0,yE;function s$(){if(yE)return m0;yE=1;var r=Ll,e=ko,t=r(e,"WeakMap");return m0=t,m0}var y0,bE;function sc(){if(bE)return y0;bE=1;var r=a$(),e=X2,t=o$(),n=UN(),i=s$(),a=Tl,o=ak,s="[object Map]",u="[object Object]",l="[object Promise]",f="[object Set]",c="[object WeakMap]",d="[object DataView]",h=o(r),p=o(e),g=o(t),b=o(n),v=o(i),y=a;return(r&&y(new r(new ArrayBuffer(1)))!=d||e&&y(new e)!=s||t&&y(t.resolve())!=l||n&&y(new n)!=f||i&&y(new i)!=c)&&(y=function(m){var w=a(m),S=w==u?m.constructor:void 0,A=S?o(S):"";if(A)switch(A){case h:return d;case p:return s;case g:return l;case b:return f;case v:return c}return w}),y0=y,y0}var b0,wE;function u$(){if(wE)return b0;wE=1;var r=Object.prototype,e=r.hasOwnProperty;function t(n){var i=n.length,a=new n.constructor(i);return i&&typeof n[0]=="string"&&e.call(n,"index")&&(a.index=n.index,a.input=n.input),a}return b0=t,b0}var w0,_E;function HN(){if(_E)return w0;_E=1;var r=ko,e=r.Uint8Array;return w0=e,w0}var _0,xE;function Rw(){if(xE)return _0;xE=1;var r=HN();function e(t){var n=new t.constructor(t.byteLength);return new r(n).set(new r(t)),n}return _0=e,_0}var x0,SE;function l$(){if(SE)return x0;SE=1;var r=Rw();function e(t,n){var i=n?r(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}return x0=e,x0}var S0,EE;function f$(){if(EE)return S0;EE=1;var r=/\w*$/;function e(t){var n=new t.constructor(t.source,r.exec(t));return n.lastIndex=t.lastIndex,n}return S0=e,S0}var E0,CE;function c$(){if(CE)return E0;CE=1;var r=Vf,e=r?r.prototype:void 0,t=e?e.valueOf:void 0;function n(i){return t?Object(t.call(i)):{}}return E0=n,E0}var C0,AE;function jN(){if(AE)return C0;AE=1;var r=Rw();function e(t,n){var i=n?r(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}return C0=e,C0}var A0,TE;function h$(){if(TE)return A0;TE=1;var r=Rw(),e=l$(),t=f$(),n=c$(),i=jN(),a="[object Boolean]",o="[object Date]",s="[object Map]",u="[object Number]",l="[object RegExp]",f="[object Set]",c="[object String]",d="[object Symbol]",h="[object ArrayBuffer]",p="[object DataView]",g="[object Float32Array]",b="[object Float64Array]",v="[object Int8Array]",y="[object Int16Array]",m="[object Int32Array]",w="[object Uint8Array]",S="[object Uint8ClampedArray]",A="[object Uint16Array]",_="[object Uint32Array]";function E(k,M,T){var C=k.constructor;switch(M){case h:return r(k);case a:case o:return new C(+k);case p:return e(k,T);case g:case b:case v:case y:case m:case w:case S:case A:case _:return i(k,T);case s:return new C;case u:case c:return new C(k);case l:return t(k);case f:return new C;case d:return n(k)}}return A0=E,A0}var T0,kE;function VN(){if(kE)return T0;kE=1;var r=ja,e=Object.create,t=function(){function n(){}return function(i){if(!r(i))return{};if(e)return e(i);n.prototype=i;var a=new n;return n.prototype=void 0,a}}();return T0=t,T0}var k0,LE;function WN(){if(LE)return k0;LE=1;var r=VN(),e=yv(),t=mv();function n(i){return typeof i.constructor=="function"&&!t(i)?r(e(i)):{}}return k0=n,k0}var L0,NE;function d$(){if(NE)return L0;NE=1;var r=sc(),e=os,t="[object Map]";function n(i){return e(i)&&r(i)==t}return L0=n,L0}var N0,PE;function p$(){if(PE)return N0;PE=1;var r=d$(),e=gv(),t=Mw(),n=t&&t.isMap,i=n?e(n):r;return N0=i,N0}var P0,ME;function v$(){if(ME)return P0;ME=1;var r=sc(),e=os,t="[object Set]";function n(i){return e(i)&&r(i)==t}return P0=n,P0}var M0,OE;function g$(){if(OE)return M0;OE=1;var r=v$(),e=gv(),t=Mw(),n=t&&t.isSet,i=n?e(n):r;return M0=i,M0}var O0,DE;function YN(){if(DE)return O0;DE=1;var r=vv(),e=Nw(),t=Vp,n=QG(),i=t$(),a=FN(),o=J2,s=r$(),u=n$(),l=$N(),f=i$(),c=sc(),d=u$(),h=h$(),p=WN(),g=yi,b=oc(),v=p$(),y=ja,m=g$(),w=Gu(),S=Ol(),A=1,_=2,E=4,k="[object Arguments]",M="[object Array]",T="[object Boolean]",C="[object Date]",R="[object Error]",x="[object Function]",B="[object GeneratorFunction]",D="[object Map]",O="[object Number]",G="[object Object]",V="[object RegExp]",I="[object Set]",z="[object String]",P="[object Symbol]",q="[object WeakMap]",F="[object ArrayBuffer]",U="[object DataView]",W="[object Float32Array]",X="[object Float64Array]",te="[object Int8Array]",ne="[object Int16Array]",he="[object Int32Array]",ve="[object Uint8Array]",Ce="[object Uint8ClampedArray]",Le="[object Uint16Array]",K="[object Uint32Array]",le={};le[k]=le[M]=le[F]=le[U]=le[T]=le[C]=le[W]=le[X]=le[te]=le[ne]=le[he]=le[D]=le[O]=le[G]=le[V]=le[I]=le[z]=le[P]=le[ve]=le[Ce]=le[Le]=le[K]=!0,le[R]=le[x]=le[q]=!1;function Z(ie,re,J,fe,we,ge){var me,ue=re&A,ce=re&_,oe=re&E;if(J&&(me=we?J(ie,fe,we,ge):J(ie)),me!==void 0)return me;if(!y(ie))return ie;var Ae=g(ie);if(Ae){if(me=d(ie),!ue)return o(ie,me)}else{var Te=c(ie),Ge=Te==x||Te==B;if(b(ie))return a(ie,ue);if(Te==G||Te==k||Ge&&!we){if(me=ce||Ge?{}:p(ie),!ue)return ce?u(ie,i(me,ie)):s(ie,n(me,ie))}else{if(!le[Te])return we?ie:{};me=h(ie,Te,ue)}}ge||(ge=new r);var Fe=ge.get(ie);if(Fe)return Fe;ge.set(ie,me),m(ie)?ie.forEach(function(Ie){me.add(Z(Ie,re,J,Ie,ie,ge))}):v(ie)&&ie.forEach(function(Ie,Ve){me.set(Ve,Z(Ie,re,J,Ve,ie,ge))});var Re=oe?ce?f:l:ce?S:w,ze=Ae?void 0:Re(ie);return e(ze||ie,function(Ie,Ve){ze&&(Ve=Ie,Ie=ie[Ve]),t(me,Ve,Z(Ie,re,J,Ve,ie,ge))}),me}return O0=Z,O0}var D0,IE;function m$(){if(IE)return D0;IE=1;var r=YN(),e=4;function t(n){return r(n,e)}return D0=t,D0}var I0,RE;function Fw(){if(RE)return I0;RE=1;function r(e){return function(){return e}}return I0=r,I0}var R0,FE;function y$(){if(FE)return R0;FE=1;function r(e){return function(t,n,i){for(var a=-1,o=Object(t),s=i(t),u=s.length;u--;){var l=s[e?u:++a];if(n(o[l],l,o)===!1)break}return t}}return R0=r,R0}var F0,BE;function Bw(){if(BE)return F0;BE=1;var r=y$(),e=r();return F0=e,F0}var B0,zE;function zw(){if(zE)return B0;zE=1;var r=Bw(),e=Gu();function t(n,i){return n&&r(n,i,e)}return B0=t,B0}var z0,qE;function b$(){if(qE)return z0;qE=1;var r=zs();function e(t,n){return function(i,a){if(i==null)return i;if(!r(i))return t(i,a);for(var o=i.length,s=n?o:-1,u=Object(i);(n?s--:++s<o)&&a(u[s],s,u)!==!1;);return i}}return z0=e,z0}var q0,GE;function bv(){if(GE)return q0;GE=1;var r=zw(),e=b$(),t=e(r);return q0=t,q0}var G0,$E;function Dl(){if($E)return G0;$E=1;function r(e){return e}return G0=r,G0}var $0,UE;function XN(){if(UE)return $0;UE=1;var r=Dl();function e(t){return typeof t=="function"?t:r}return $0=e,$0}var U0,HE;function KN(){if(HE)return U0;HE=1;var r=Nw(),e=bv(),t=XN(),n=yi;function i(a,o){var s=n(a)?r:e;return s(a,t(o))}return U0=i,U0}var H0,jE;function ZN(){return jE||(jE=1,H0=KN()),H0}var j0,VE;function w$(){if(VE)return j0;VE=1;var r=bv();function e(t,n){var i=[];return r(t,function(a,o,s){n(a,o,s)&&i.push(a)}),i}return j0=e,j0}var V0,WE;function _$(){if(WE)return V0;WE=1;var r="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,r),this}return V0=e,V0}var W0,YE;function x$(){if(YE)return W0;YE=1;function r(e){return this.__data__.has(e)}return W0=r,W0}var Y0,XE;function QN(){if(XE)return Y0;XE=1;var r=K2,e=_$(),t=x$();function n(i){var a=-1,o=i==null?0:i.length;for(this.__data__=new r;++a<o;)this.add(i[a])}return n.prototype.add=n.prototype.push=e,n.prototype.has=t,Y0=n,Y0}var X0,KE;function S$(){if(KE)return X0;KE=1;function r(e,t){for(var n=-1,i=e==null?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}return X0=r,X0}var K0,ZE;function JN(){if(ZE)return K0;ZE=1;function r(e,t){return e.has(t)}return K0=r,K0}var Z0,QE;function eP(){if(QE)return Z0;QE=1;var r=QN(),e=S$(),t=JN(),n=1,i=2;function a(o,s,u,l,f,c){var d=u&n,h=o.length,p=s.length;if(h!=p&&!(d&&p>h))return!1;var g=c.get(o),b=c.get(s);if(g&&b)return g==s&&b==o;var v=-1,y=!0,m=u&i?new r:void 0;for(c.set(o,s),c.set(s,o);++v<h;){var w=o[v],S=s[v];if(l)var A=d?l(S,w,v,s,o,c):l(w,S,v,o,s,c);if(A!==void 0){if(A)continue;y=!1;break}if(m){if(!e(s,function(_,E){if(!t(m,E)&&(w===_||f(w,_,u,l,c)))return m.push(E)})){y=!1;break}}else if(!(w===S||f(w,S,u,l,c))){y=!1;break}}return c.delete(o),c.delete(s),y}return Z0=a,Z0}var Q0,JE;function E$(){if(JE)return Q0;JE=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i,a){n[++t]=[a,i]}),n}return Q0=r,Q0}var J0,eC;function qw(){if(eC)return J0;eC=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i){n[++t]=i}),n}return J0=r,J0}var ey,tC;function C$(){if(tC)return ey;tC=1;var r=Vf,e=HN(),t=Yf,n=eP(),i=E$(),a=qw(),o=1,s=2,u="[object Boolean]",l="[object Date]",f="[object Error]",c="[object Map]",d="[object Number]",h="[object RegExp]",p="[object Set]",g="[object String]",b="[object Symbol]",v="[object ArrayBuffer]",y="[object DataView]",m=r?r.prototype:void 0,w=m?m.valueOf:void 0;function S(A,_,E,k,M,T,C){switch(E){case y:if(A.byteLength!=_.byteLength||A.byteOffset!=_.byteOffset)return!1;A=A.buffer,_=_.buffer;case v:return!(A.byteLength!=_.byteLength||!T(new e(A),new e(_)));case u:case l:case d:return t(+A,+_);case f:return A.name==_.name&&A.message==_.message;case h:case g:return A==_+"";case c:var R=i;case p:var x=k&o;if(R||(R=a),A.size!=_.size&&!x)return!1;var B=C.get(A);if(B)return B==_;k|=s,C.set(A,_);var D=n(R(A),R(_),k,M,T,C);return C.delete(A),D;case b:if(w)return w.call(A)==w.call(_)}return!1}return ey=S,ey}var ty,rC;function A$(){if(rC)return ty;rC=1;var r=$N(),e=1,t=Object.prototype,n=t.hasOwnProperty;function i(a,o,s,u,l,f){var c=s&e,d=r(a),h=d.length,p=r(o),g=p.length;if(h!=g&&!c)return!1;for(var b=h;b--;){var v=d[b];if(!(c?v in o:n.call(o,v)))return!1}var y=f.get(a),m=f.get(o);if(y&&m)return y==o&&m==a;var w=!0;f.set(a,o),f.set(o,a);for(var S=c;++b<h;){v=d[b];var A=a[v],_=o[v];if(u)var E=c?u(_,A,v,o,a,f):u(A,_,v,a,o,f);if(!(E===void 0?A===_||l(A,_,s,u,f):E)){w=!1;break}S||(S=v=="constructor")}if(w&&!S){var k=a.constructor,M=o.constructor;k!=M&&"constructor"in a&&"constructor"in o&&!(typeof k=="function"&&k instanceof k&&typeof M=="function"&&M instanceof M)&&(w=!1)}return f.delete(a),f.delete(o),w}return ty=i,ty}var ry,nC;function T$(){if(nC)return ry;nC=1;var r=vv(),e=eP(),t=C$(),n=A$(),i=sc(),a=yi,o=oc(),s=Yh(),u=1,l="[object Arguments]",f="[object Array]",c="[object Object]",d=Object.prototype,h=d.hasOwnProperty;function p(g,b,v,y,m,w){var S=a(g),A=a(b),_=S?f:i(g),E=A?f:i(b);_=_==l?c:_,E=E==l?c:E;var k=_==c,M=E==c,T=_==E;if(T&&o(g)){if(!o(b))return!1;S=!0,k=!1}if(T&&!k)return w||(w=new r),S||s(g)?e(g,b,v,y,m,w):t(g,b,_,v,y,m,w);if(!(v&u)){var C=k&&h.call(g,"__wrapped__"),R=M&&h.call(b,"__wrapped__");if(C||R){var x=C?g.value():g,B=R?b.value():b;return w||(w=new r),m(x,B,v,y,w)}}return T?(w||(w=new r),n(g,b,v,y,m,w)):!1}return ry=p,ry}var ny,iC;function tP(){if(iC)return ny;iC=1;var r=T$(),e=os;function t(n,i,a,o,s){return n===i?!0:n==null||i==null||!e(n)&&!e(i)?n!==n&&i!==i:r(n,i,a,o,t,s)}return ny=t,ny}var iy,aC;function k$(){if(aC)return iy;aC=1;var r=vv(),e=tP(),t=1,n=2;function i(a,o,s,u){var l=s.length,f=l,c=!u;if(a==null)return!f;for(a=Object(a);l--;){var d=s[l];if(c&&d[2]?d[1]!==a[d[0]]:!(d[0]in a))return!1}for(;++l<f;){d=s[l];var h=d[0],p=a[h],g=d[1];if(c&&d[2]){if(p===void 0&&!(h in a))return!1}else{var b=new r;if(u)var v=u(p,g,h,a,o,b);if(!(v===void 0?e(g,p,t|n,u,b):v))return!1}}return!0}return iy=i,iy}var ay,oC;function rP(){if(oC)return ay;oC=1;var r=ja;function e(t){return t===t&&!r(t)}return ay=e,ay}var oy,sC;function L$(){if(sC)return oy;sC=1;var r=rP(),e=Gu();function t(n){for(var i=e(n),a=i.length;a--;){var o=i[a],s=n[o];i[a]=[o,s,r(s)]}return i}return oy=t,oy}var sy,uC;function nP(){if(uC)return sy;uC=1;function r(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}return sy=r,sy}var uy,lC;function N$(){if(lC)return uy;lC=1;var r=k$(),e=L$(),t=nP();function n(i){var a=e(i);return a.length==1&&a[0][2]?t(a[0][0],a[0][1]):function(o){return o===i||r(o,i,a)}}return uy=n,uy}var ly,fC;function P$(){if(fC)return ly;fC=1;function r(e,t){return e!=null&&t in Object(e)}return ly=r,ly}var fy,cC;function iP(){if(cC)return fy;cC=1;var r=Up,e=Wh(),t=yi,n=Wp,i=Pw(),a=Zf;function o(s,u,l){u=r(u,s);for(var f=-1,c=u.length,d=!1;++f<c;){var h=a(u[f]);if(!(d=s!=null&&l(s,h)))break;s=s[h]}return d||++f!=c?d:(c=s==null?0:s.length,!!c&&i(c)&&n(h,c)&&(t(s)||e(s)))}return fy=o,fy}var hy,hC;function aP(){if(hC)return hy;hC=1;var r=P$(),e=iP();function t(n,i){return n!=null&&e(n,i,r)}return hy=t,hy}var dy,dC;function M$(){if(dC)return dy;dC=1;var r=tP(),e=lk,t=aP(),n=Y2,i=rP(),a=nP(),o=Zf,s=1,u=2;function l(f,c){return n(f)&&i(c)?a(o(f),c):function(d){var h=e(d,f);return h===void 0&&h===c?t(d,f):r(c,h,s|u)}}return dy=l,dy}var py,pC;function oP(){if(pC)return py;pC=1;function r(e){return function(t){return t==null?void 0:t[e]}}return py=r,py}var vy,vC;function O$(){if(vC)return vy;vC=1;var r=Hp;function e(t){return function(n){return r(n,t)}}return vy=e,vy}var gy,gC;function D$(){if(gC)return gy;gC=1;var r=oP(),e=O$(),t=Y2,n=Zf;function i(a){return t(a)?r(n(a)):e(a)}return gy=i,gy}var my,mC;function qs(){if(mC)return my;mC=1;var r=N$(),e=M$(),t=Dl(),n=yi,i=D$();function a(o){return typeof o=="function"?o:o==null?t:typeof o=="object"?n(o)?e(o[0],o[1]):r(o):i(o)}return my=a,my}var yy,yC;function sP(){if(yC)return yy;yC=1;var r=BN(),e=w$(),t=qs(),n=yi;function i(a,o){var s=n(a)?r:e;return s(a,t(o,3))}return yy=i,yy}var by,bC;function I$(){if(bC)return by;bC=1;var r=Object.prototype,e=r.hasOwnProperty;function t(n,i){return n!=null&&e.call(n,i)}return by=t,by}var wy,wC;function uP(){if(wC)return wy;wC=1;var r=I$(),e=iP();function t(n,i){return n!=null&&e(n,i,r)}return wy=t,wy}var _y,_C;function R$(){if(_C)return _y;_C=1;var r=Ow(),e=sc(),t=Wh(),n=yi,i=zs(),a=oc(),o=mv(),s=Yh(),u="[object Map]",l="[object Set]",f=Object.prototype,c=f.hasOwnProperty;function d(h){if(h==null)return!0;if(i(h)&&(n(h)||typeof h=="string"||typeof h.splice=="function"||a(h)||s(h)||t(h)))return!h.length;var p=e(h);if(p==u||p==l)return!h.size;if(o(h))return!r(h).length;for(var g in h)if(c.call(h,g))return!1;return!0}return _y=d,_y}var xy,xC;function lP(){if(xC)return xy;xC=1;function r(e){return e===void 0}return xy=r,xy}var Sy,SC;function fP(){if(SC)return Sy;SC=1;var r=bv(),e=zs();function t(n,i){var a=-1,o=e(n)?Array(n.length):[];return r(n,function(s,u,l){o[++a]=i(s,u,l)}),o}return Sy=t,Sy}var Ey,EC;function cP(){if(EC)return Ey;EC=1;var r=Ph,e=qs(),t=fP(),n=yi;function i(a,o){var s=n(a)?r:t;return s(a,e(o,3))}return Ey=i,Ey}var Cy,CC;function F$(){if(CC)return Cy;CC=1;function r(e,t,n,i){var a=-1,o=e==null?0:e.length;for(i&&o&&(n=e[++a]);++a<o;)n=t(n,e[a],a,e);return n}return Cy=r,Cy}var Ay,AC;function B$(){if(AC)return Ay;AC=1;function r(e,t,n,i,a){return a(e,function(o,s,u){n=i?(i=!1,o):t(n,o,s,u)}),n}return Ay=r,Ay}var Ty,TC;function hP(){if(TC)return Ty;TC=1;var r=F$(),e=bv(),t=qs(),n=B$(),i=yi;function a(o,s,u){var l=i(o)?r:n,f=arguments.length<3;return l(o,t(s,4),u,f,e)}return Ty=a,Ty}var ky,kC;function z$(){if(kC)return ky;kC=1;var r=Tl,e=yi,t=os,n="[object String]";function i(a){return typeof a=="string"||!e(a)&&t(a)&&r(a)==n}return ky=i,ky}var Ly,LC;function q$(){if(LC)return Ly;LC=1;var r=oP(),e=r("length");return Ly=e,Ly}var Ny,NC;function G$(){if(NC)return Ny;NC=1;var r="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+t+n,a="\\ufe0e\\ufe0f",o="\\u200d",s=RegExp("["+o+r+i+a+"]");function u(l){return s.test(l)}return Ny=u,Ny}var Py,PC;function $$(){if(PC)return Py;PC=1;var r="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+t+n,a="\\ufe0e\\ufe0f",o="["+r+"]",s="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",l="(?:"+s+"|"+u+")",f="[^"+r+"]",c="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",h="\\u200d",p=l+"?",g="["+a+"]?",b="(?:"+h+"(?:"+[f,c,d].join("|")+")"+g+p+")*",v=g+p+b,y="(?:"+[f+s+"?",s,c,d,o].join("|")+")",m=RegExp(u+"(?="+u+")|"+y+v,"g");function w(S){for(var A=m.lastIndex=0;m.test(S);)++A;return A}return Py=w,Py}var My,MC;function U$(){if(MC)return My;MC=1;var r=q$(),e=G$(),t=$$();function n(i){return e(i)?t(i):r(i)}return My=n,My}var Oy,OC;function H$(){if(OC)return Oy;OC=1;var r=Ow(),e=sc(),t=zs(),n=z$(),i=U$(),a="[object Map]",o="[object Set]";function s(u){if(u==null)return 0;if(t(u))return n(u)?i(u):u.length;var l=e(u);return l==a||l==o?u.size:r(u).length}return Oy=s,Oy}var Dy,DC;function j$(){if(DC)return Dy;DC=1;var r=Nw(),e=VN(),t=zw(),n=qs(),i=yv(),a=yi,o=oc(),s=Nh,u=ja,l=Yh();function f(c,d,h){var p=a(c),g=p||o(c)||l(c);if(d=n(d,4),h==null){var b=c&&c.constructor;g?h=p?new b:[]:u(c)?h=s(b)?e(i(c)):{}:h={}}return(g?r:t)(c,function(v,y,m){return d(h,v,y,m)}),h}return Dy=f,Dy}var Iy,IC;function V$(){if(IC)return Iy;IC=1;var r=Vf,e=Wh(),t=yi,n=r?r.isConcatSpreadable:void 0;function i(a){return t(a)||e(a)||!!(n&&a&&a[n])}return Iy=i,Iy}var Ry,RC;function Gw(){if(RC)return Ry;RC=1;var r=Iw(),e=V$();function t(n,i,a,o,s){var u=-1,l=n.length;for(a||(a=e),s||(s=[]);++u<l;){var f=n[u];i>0&&a(f)?i>1?t(f,i-1,a,o,s):r(s,f):o||(s[s.length]=f)}return s}return Ry=t,Ry}var Fy,FC;function W$(){if(FC)return Fy;FC=1;function r(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}return Fy=r,Fy}var By,BC;function dP(){if(BC)return By;BC=1;var r=W$(),e=Math.max;function t(n,i,a){return i=e(i===void 0?n.length-1:i,0),function(){for(var o=arguments,s=-1,u=e(o.length-i,0),l=Array(u);++s<u;)l[s]=o[i+s];s=-1;for(var f=Array(i+1);++s<i;)f[s]=o[s];return f[i]=a(l),r(n,this,f)}}return By=t,By}var zy,zC;function Y$(){if(zC)return zy;zC=1;var r=Fw(),e=fk,t=Dl(),n=e?function(i,a){return e(i,"toString",{configurable:!0,enumerable:!1,value:r(a),writable:!0})}:t;return zy=n,zy}var qy,qC;function X$(){if(qC)return qy;qC=1;var r=800,e=16,t=Date.now;function n(i){var a=0,o=0;return function(){var s=t(),u=e-(s-o);if(o=s,u>0){if(++a>=r)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return qy=n,qy}var Gy,GC;function pP(){if(GC)return Gy;GC=1;var r=Y$(),e=X$(),t=e(r);return Gy=t,Gy}var $y,$C;function wv(){if($C)return $y;$C=1;var r=Dl(),e=dP(),t=pP();function n(i,a){return t(e(i,a,r),i+"")}return $y=n,$y}var Uy,UC;function vP(){if(UC)return Uy;UC=1;function r(e,t,n,i){for(var a=e.length,o=n+(i?1:-1);i?o--:++o<a;)if(t(e[o],o,e))return o;return-1}return Uy=r,Uy}var Hy,HC;function K$(){if(HC)return Hy;HC=1;function r(e){return e!==e}return Hy=r,Hy}var jy,jC;function Z$(){if(jC)return jy;jC=1;function r(e,t,n){for(var i=n-1,a=e.length;++i<a;)if(e[i]===t)return i;return-1}return jy=r,jy}var Vy,VC;function Q$(){if(VC)return Vy;VC=1;var r=vP(),e=K$(),t=Z$();function n(i,a,o){return a===a?t(i,a,o):r(i,e,o)}return Vy=n,Vy}var Wy,WC;function J$(){if(WC)return Wy;WC=1;var r=Q$();function e(t,n){var i=t==null?0:t.length;return!!i&&r(t,n,0)>-1}return Wy=e,Wy}var Yy,YC;function eU(){if(YC)return Yy;YC=1;function r(e,t,n){for(var i=-1,a=e==null?0:e.length;++i<a;)if(n(t,e[i]))return!0;return!1}return Yy=r,Yy}var Xy,XC;function tU(){if(XC)return Xy;XC=1;function r(){}return Xy=r,Xy}var Ky,KC;function rU(){if(KC)return Ky;KC=1;var r=UN(),e=tU(),t=qw(),n=1/0,i=r&&1/t(new r([,-0]))[1]==n?function(a){return new r(a)}:e;return Ky=i,Ky}var Zy,ZC;function nU(){if(ZC)return Zy;ZC=1;var r=QN(),e=J$(),t=eU(),n=JN(),i=rU(),a=qw(),o=200;function s(u,l,f){var c=-1,d=e,h=u.length,p=!0,g=[],b=g;if(f)p=!1,d=t;else if(h>=o){var v=l?null:i(u);if(v)return a(v);p=!1,d=n,b=new r}else b=l?[]:g;e:for(;++c<h;){var y=u[c],m=l?l(y):y;if(y=f||y!==0?y:0,p&&m===m){for(var w=b.length;w--;)if(b[w]===m)continue e;l&&b.push(m),g.push(y)}else d(b,m,f)||(b!==g&&b.push(m),g.push(y))}return g}return Zy=s,Zy}var Qy,QC;function gP(){if(QC)return Qy;QC=1;var r=zs(),e=os;function t(n){return e(n)&&r(n)}return Qy=t,Qy}var Jy,JC;function iU(){if(JC)return Jy;JC=1;var r=Gw(),e=wv(),t=nU(),n=gP(),i=e(function(a){return t(r(a,1,n,!0))});return Jy=i,Jy}var e1,eA;function aU(){if(eA)return e1;eA=1;var r=Ph;function e(t,n){return r(n,function(i){return t[i]})}return e1=e,e1}var t1,tA;function mP(){if(tA)return t1;tA=1;var r=aU(),e=Gu();function t(n){return n==null?[]:r(n,e(n))}return t1=t,t1}var r1,rA;function so(){if(rA)return r1;rA=1;var r;if(typeof fl=="function")try{r={clone:m$(),constant:Fw(),each:ZN(),filter:sP(),has:uP(),isArray:yi,isEmpty:R$(),isFunction:Nh,isUndefined:lP(),keys:Gu(),map:cP(),reduce:hP(),size:H$(),transform:j$(),union:iU(),values:mP()}}catch{}return r||(r=window._),r1=r,r1}var n1,nA;function $w(){if(nA)return n1;nA=1;var r=so();n1=i;var e="\0",t="\0",n="";function i(f){this._isDirected=r.has(f,"directed")?f.directed:!0,this._isMultigraph=r.has(f,"multigraph")?f.multigraph:!1,this._isCompound=r.has(f,"compound")?f.compound:!1,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[t]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(f){return this._label=f,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(f){return r.isFunction(f)||(f=r.constant(f)),this._defaultNodeLabelFn=f,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return r.keys(this._nodes)},i.prototype.sources=function(){var f=this;return r.filter(this.nodes(),function(c){return r.isEmpty(f._in[c])})},i.prototype.sinks=function(){var f=this;return r.filter(this.nodes(),function(c){return r.isEmpty(f._out[c])})},i.prototype.setNodes=function(f,c){var d=arguments,h=this;return r.each(f,function(p){d.length>1?h.setNode(p,c):h.setNode(p)}),this},i.prototype.setNode=function(f,c){return r.has(this._nodes,f)?(arguments.length>1&&(this._nodes[f]=c),this):(this._nodes[f]=arguments.length>1?c:this._defaultNodeLabelFn(f),this._isCompound&&(this._parent[f]=t,this._children[f]={},this._children[t][f]=!0),this._in[f]={},this._preds[f]={},this._out[f]={},this._sucs[f]={},++this._nodeCount,this)},i.prototype.node=function(f){return this._nodes[f]},i.prototype.hasNode=function(f){return r.has(this._nodes,f)},i.prototype.removeNode=function(f){var c=this;if(r.has(this._nodes,f)){var d=function(h){c.removeEdge(c._edgeObjs[h])};delete this._nodes[f],this._isCompound&&(this._removeFromParentsChildList(f),delete this._parent[f],r.each(this.children(f),function(h){c.setParent(h)}),delete this._children[f]),r.each(r.keys(this._in[f]),d),delete this._in[f],delete this._preds[f],r.each(r.keys(this._out[f]),d),delete this._out[f],delete this._sucs[f],--this._nodeCount}return this},i.prototype.setParent=function(f,c){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r.isUndefined(c))c=t;else{c+="";for(var d=c;!r.isUndefined(d);d=this.parent(d))if(d===f)throw new Error("Setting "+c+" as parent of "+f+" would create a cycle");this.setNode(c)}return this.setNode(f),this._removeFromParentsChildList(f),this._parent[f]=c,this._children[c][f]=!0,this},i.prototype._removeFromParentsChildList=function(f){delete this._children[this._parent[f]][f]},i.prototype.parent=function(f){if(this._isCompound){var c=this._parent[f];if(c!==t)return c}},i.prototype.children=function(f){if(r.isUndefined(f)&&(f=t),this._isCompound){var c=this._children[f];if(c)return r.keys(c)}else{if(f===t)return this.nodes();if(this.hasNode(f))return[]}},i.prototype.predecessors=function(f){var c=this._preds[f];if(c)return r.keys(c)},i.prototype.successors=function(f){var c=this._sucs[f];if(c)return r.keys(c)},i.prototype.neighbors=function(f){var c=this.predecessors(f);if(c)return r.union(c,this.successors(f))},i.prototype.isLeaf=function(f){var c;return this.isDirected()?c=this.successors(f):c=this.neighbors(f),c.length===0},i.prototype.filterNodes=function(f){var c=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});c.setGraph(this.graph());var d=this;r.each(this._nodes,function(g,b){f(b)&&c.setNode(b,g)}),r.each(this._edgeObjs,function(g){c.hasNode(g.v)&&c.hasNode(g.w)&&c.setEdge(g,d.edge(g))});var h={};function p(g){var b=d.parent(g);return b===void 0||c.hasNode(b)?(h[g]=b,b):b in h?h[b]:p(b)}return this._isCompound&&r.each(c.nodes(),function(g){c.setParent(g,p(g))}),c},i.prototype.setDefaultEdgeLabel=function(f){return r.isFunction(f)||(f=r.constant(f)),this._defaultEdgeLabelFn=f,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return r.values(this._edgeObjs)},i.prototype.setPath=function(f,c){var d=this,h=arguments;return r.reduce(f,function(p,g){return h.length>1?d.setEdge(p,g,c):d.setEdge(p,g),g}),this},i.prototype.setEdge=function(){var f,c,d,h,p=!1,g=arguments[0];typeof g=="object"&&g!==null&&"v"in g?(f=g.v,c=g.w,d=g.name,arguments.length===2&&(h=arguments[1],p=!0)):(f=g,c=arguments[1],d=arguments[3],arguments.length>2&&(h=arguments[2],p=!0)),f=""+f,c=""+c,r.isUndefined(d)||(d=""+d);var b=s(this._isDirected,f,c,d);if(r.has(this._edgeLabels,b))return p&&(this._edgeLabels[b]=h),this;if(!r.isUndefined(d)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(f),this.setNode(c),this._edgeLabels[b]=p?h:this._defaultEdgeLabelFn(f,c,d);var v=u(this._isDirected,f,c,d);return f=v.v,c=v.w,Object.freeze(v),this._edgeObjs[b]=v,a(this._preds[c],f),a(this._sucs[f],c),this._in[c][b]=v,this._out[f][b]=v,this._edgeCount++,this},i.prototype.edge=function(f,c,d){var h=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,f,c,d);return this._edgeLabels[h]},i.prototype.hasEdge=function(f,c,d){var h=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,f,c,d);return r.has(this._edgeLabels,h)},i.prototype.removeEdge=function(f,c,d){var h=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,f,c,d),p=this._edgeObjs[h];return p&&(f=p.v,c=p.w,delete this._edgeLabels[h],delete this._edgeObjs[h],o(this._preds[c],f),o(this._sucs[f],c),delete this._in[c][h],delete this._out[f][h],this._edgeCount--),this},i.prototype.inEdges=function(f,c){var d=this._in[f];if(d){var h=r.values(d);return c?r.filter(h,function(p){return p.v===c}):h}},i.prototype.outEdges=function(f,c){var d=this._out[f];if(d){var h=r.values(d);return c?r.filter(h,function(p){return p.w===c}):h}},i.prototype.nodeEdges=function(f,c){var d=this.inEdges(f,c);if(d)return d.concat(this.outEdges(f,c))};function a(f,c){f[c]?f[c]++:f[c]=1}function o(f,c){--f[c]||delete f[c]}function s(f,c,d,h){var p=""+c,g=""+d;if(!f&&p>g){var b=p;p=g,g=b}return p+n+g+n+(r.isUndefined(h)?e:h)}function u(f,c,d,h){var p=""+c,g=""+d;if(!f&&p>g){var b=p;p=g,g=b}var v={v:p,w:g};return h&&(v.name=h),v}function l(f,c){return s(f,c.v,c.w,c.name)}return n1}var i1,iA;function oU(){return iA||(iA=1,i1="2.1.8"),i1}var a1,aA;function sU(){return aA||(aA=1,a1={Graph:$w(),version:oU()}),a1}var o1,oA;function uU(){if(oA)return o1;oA=1;var r=so(),e=$w();o1={write:t,read:a};function t(o){var s={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:n(o),edges:i(o)};return r.isUndefined(o.graph())||(s.value=r.clone(o.graph())),s}function n(o){return r.map(o.nodes(),function(s){var u=o.node(s),l=o.parent(s),f={v:s};return r.isUndefined(u)||(f.value=u),r.isUndefined(l)||(f.parent=l),f})}function i(o){return r.map(o.edges(),function(s){var u=o.edge(s),l={v:s.v,w:s.w};return r.isUndefined(s.name)||(l.name=s.name),r.isUndefined(u)||(l.value=u),l})}function a(o){var s=new e(o.options).setGraph(o.value);return r.each(o.nodes,function(u){s.setNode(u.v,u.value),u.parent&&s.setParent(u.v,u.parent)}),r.each(o.edges,function(u){s.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),s}return o1}var s1,sA;function lU(){if(sA)return s1;sA=1;var r=so();s1=e;function e(t){var n={},i=[],a;function o(s){r.has(n,s)||(n[s]=!0,a.push(s),r.each(t.successors(s),o),r.each(t.predecessors(s),o))}return r.each(t.nodes(),function(s){a=[],o(s),a.length&&i.push(a)}),i}return s1}var u1,uA;function yP(){if(uA)return u1;uA=1;var r=so();u1=e;function e(){this._arr=[],this._keyIndices={}}return e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(t){return t.key})},e.prototype.has=function(t){return r.has(this._keyIndices,t)},e.prototype.priority=function(t){var n=this._keyIndices[t];if(n!==void 0)return this._arr[n].priority},e.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(t,n){var i=this._keyIndices;if(t=String(t),!r.has(i,t)){var a=this._arr,o=a.length;return i[t]=o,a.push({key:t,priority:n}),this._decrease(o),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},e.prototype.decrease=function(t,n){var i=this._keyIndices[t];if(n>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[i].priority+" New: "+n);this._arr[i].priority=n,this._decrease(i)},e.prototype._heapify=function(t){var n=this._arr,i=2*t,a=i+1,o=t;i<n.length&&(o=n[i].priority<n[o].priority?i:o,a<n.length&&(o=n[a].priority<n[o].priority?a:o),o!==t&&(this._swap(t,o),this._heapify(o)))},e.prototype._decrease=function(t){for(var n=this._arr,i=n[t].priority,a;t!==0&&(a=t>>1,!(n[a].priority<i));)this._swap(t,a),t=a},e.prototype._swap=function(t,n){var i=this._arr,a=this._keyIndices,o=i[t],s=i[n];i[t]=s,i[n]=o,a[s.key]=t,a[o.key]=n},u1}var l1,lA;function bP(){if(lA)return l1;lA=1;var r=so(),e=yP();l1=n;var t=r.constant(1);function n(a,o,s,u){return i(a,String(o),s||t,u||function(l){return a.outEdges(l)})}function i(a,o,s,u){var l={},f=new e,c,d,h=function(p){var g=p.v!==c?p.v:p.w,b=l[g],v=s(p),y=d.distance+v;if(v<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+p+" Weight: "+v);y<b.distance&&(b.distance=y,b.predecessor=c,f.decrease(g,y))};for(a.nodes().forEach(function(p){var g=p===o?0:Number.POSITIVE_INFINITY;l[p]={distance:g},f.add(p,g)});f.size()>0&&(c=f.removeMin(),d=l[c],d.distance!==Number.POSITIVE_INFINITY);)u(c).forEach(h);return l}return l1}var f1,fA;function fU(){if(fA)return f1;fA=1;var r=bP(),e=so();f1=t;function t(n,i,a){return e.transform(n.nodes(),function(o,s){o[s]=r(n,s,i,a)},{})}return f1}var c1,cA;function wP(){if(cA)return c1;cA=1;var r=so();c1=e;function e(t){var n=0,i=[],a={},o=[];function s(u){var l=a[u]={onStack:!0,lowlink:n,index:n++};if(i.push(u),t.successors(u).forEach(function(d){r.has(a,d)?a[d].onStack&&(l.lowlink=Math.min(l.lowlink,a[d].index)):(s(d),l.lowlink=Math.min(l.lowlink,a[d].lowlink))}),l.lowlink===l.index){var f=[],c;do c=i.pop(),a[c].onStack=!1,f.push(c);while(u!==c);o.push(f)}}return t.nodes().forEach(function(u){r.has(a,u)||s(u)}),o}return c1}var h1,hA;function cU(){if(hA)return h1;hA=1;var r=so(),e=wP();h1=t;function t(n){return r.filter(e(n),function(i){return i.length>1||i.length===1&&n.hasEdge(i[0],i[0])})}return h1}var d1,dA;function hU(){if(dA)return d1;dA=1;var r=so();d1=t;var e=r.constant(1);function t(i,a,o){return n(i,a||e,o||function(s){return i.outEdges(s)})}function n(i,a,o){var s={},u=i.nodes();return u.forEach(function(l){s[l]={},s[l][l]={distance:0},u.forEach(function(f){l!==f&&(s[l][f]={distance:Number.POSITIVE_INFINITY})}),o(l).forEach(function(f){var c=f.v===l?f.w:f.v,d=a(f);s[l][c]={distance:d,predecessor:l}})}),u.forEach(function(l){var f=s[l];u.forEach(function(c){var d=s[c];u.forEach(function(h){var p=d[l],g=f[h],b=d[h],v=p.distance+g.distance;v<b.distance&&(b.distance=v,b.predecessor=g.predecessor)})})}),s}return d1}var p1,pA;function _P(){if(pA)return p1;pA=1;var r=so();p1=e,e.CycleException=t;function e(n){var i={},a={},o=[];function s(u){if(r.has(a,u))throw new t;r.has(i,u)||(a[u]=!0,i[u]=!0,r.each(n.predecessors(u),s),delete a[u],o.push(u))}if(r.each(n.sinks(),s),r.size(i)!==n.nodeCount())throw new t;return o}function t(){}return t.prototype=new Error,p1}var v1,vA;function dU(){if(vA)return v1;vA=1;var r=_P();v1=e;function e(t){try{r(t)}catch(n){if(n instanceof r.CycleException)return!1;throw n}return!0}return v1}var g1,gA;function xP(){if(gA)return g1;gA=1;var r=so();g1=e;function e(n,i,a){r.isArray(i)||(i=[i]);var o=(n.isDirected()?n.successors:n.neighbors).bind(n),s=[],u={};return r.each(i,function(l){if(!n.hasNode(l))throw new Error("Graph does not have node: "+l);t(n,l,a==="post",u,o,s)}),s}function t(n,i,a,o,s,u){r.has(o,i)||(o[i]=!0,a||u.push(i),r.each(s(i),function(l){t(n,l,a,o,s,u)}),a&&u.push(i))}return g1}var m1,mA;function pU(){if(mA)return m1;mA=1;var r=xP();m1=e;function e(t,n){return r(t,n,"post")}return m1}var y1,yA;function vU(){if(yA)return y1;yA=1;var r=xP();y1=e;function e(t,n){return r(t,n,"pre")}return y1}var b1,bA;function gU(){if(bA)return b1;bA=1;var r=so(),e=$w(),t=yP();b1=n;function n(i,a){var o=new e,s={},u=new t,l;function f(d){var h=d.v===l?d.w:d.v,p=u.priority(h);if(p!==void 0){var g=a(d);g<p&&(s[h]=l,u.decrease(h,g))}}if(i.nodeCount()===0)return o;r.each(i.nodes(),function(d){u.add(d,Number.POSITIVE_INFINITY),o.setNode(d)}),u.decrease(i.nodes()[0],0);for(var c=!1;u.size()>0;){if(l=u.removeMin(),r.has(s,l))o.setEdge(l,s[l]);else{if(c)throw new Error("Input graph is not connected: "+i);c=!0}i.nodeEdges(l).forEach(f)}return o}return b1}var w1,wA;function mU(){return wA||(wA=1,w1={components:lU(),dijkstra:bP(),dijkstraAll:fU(),findCycles:cU(),floydWarshall:hU(),isAcyclic:dU(),postorder:pU(),preorder:vU(),prim:gU(),tarjan:wP(),topsort:_P()}),w1}var _1,_A;function yU(){if(_A)return _1;_A=1;var r=sU();return _1={Graph:r.Graph,json:uU(),alg:mU(),version:r.version},_1}var x1,xA;function Ao(){if(xA)return x1;xA=1;var r;if(typeof fl=="function")try{r=yU()}catch{}return r||(r=window.graphlib),x1=r,x1}var S1,SA;function bU(){if(SA)return S1;SA=1;var r=YN(),e=1,t=4;function n(i){return r(i,e|t)}return S1=n,S1}var E1,EA;function _v(){if(EA)return E1;EA=1;var r=Yf,e=zs(),t=Wp,n=ja;function i(a,o,s){if(!n(s))return!1;var u=typeof o;return(u=="number"?e(s)&&t(o,s.length):u=="string"&&o in s)?r(s[o],a):!1}return E1=i,E1}var C1,CA;function wU(){if(CA)return C1;CA=1;var r=wv(),e=Yf,t=_v(),n=Ol(),i=Object.prototype,a=i.hasOwnProperty,o=r(function(s,u){s=Object(s);var l=-1,f=u.length,c=f>2?u[2]:void 0;for(c&&t(u[0],u[1],c)&&(f=1);++l<f;)for(var d=u[l],h=n(d),p=-1,g=h.length;++p<g;){var b=h[p],v=s[b];(v===void 0||e(v,i[b])&&!a.call(s,b))&&(s[b]=d[b])}return s});return C1=o,C1}var A1,AA;function _U(){if(AA)return A1;AA=1;var r=qs(),e=zs(),t=Gu();function n(i){return function(a,o,s){var u=Object(a);if(!e(a)){var l=r(o,3);a=t(a),o=function(c){return l(u[c],c,u)}}var f=i(a,o,s);return f>-1?u[l?a[f]:f]:void 0}}return A1=n,A1}var T1,TA;function SP(){if(TA)return T1;TA=1;var r=nk,e=1/0,t=17976931348623157e292;function n(i){if(!i)return i===0?i:0;if(i=r(i),i===e||i===-e){var a=i<0?-1:1;return a*t}return i===i?i:0}return T1=n,T1}var k1,kA;function xU(){if(kA)return k1;kA=1;var r=SP();function e(t){var n=r(t),i=n%1;return n===n?i?n-i:n:0}return k1=e,k1}var L1,LA;function SU(){if(LA)return L1;LA=1;var r=vP(),e=qs(),t=xU(),n=Math.max;function i(a,o,s){var u=a==null?0:a.length;if(!u)return-1;var l=s==null?0:t(s);return l<0&&(l=n(u+l,0)),r(a,e(o,3),l)}return L1=i,L1}var N1,NA;function EU(){if(NA)return N1;NA=1;var r=_U(),e=SU(),t=r(e);return N1=t,N1}var P1,PA;function EP(){if(PA)return P1;PA=1;var r=Gw();function e(t){var n=t==null?0:t.length;return n?r(t,1):[]}return P1=e,P1}var M1,MA;function CU(){if(MA)return M1;MA=1;var r=Bw(),e=XN(),t=Ol();function n(i,a){return i==null?i:r(i,e(a),t)}return M1=n,M1}var O1,OA;function AU(){if(OA)return O1;OA=1;function r(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}return O1=r,O1}var D1,DA;function TU(){if(DA)return D1;DA=1;var r=jp,e=zw(),t=qs();function n(i,a){var o={};return a=t(a,3),e(i,function(s,u,l){r(o,u,a(s,u,l))}),o}return D1=n,D1}var I1,IA;function Uw(){if(IA)return I1;IA=1;var r=kl;function e(t,n,i){for(var a=-1,o=t.length;++a<o;){var s=t[a],u=n(s);if(u!=null&&(l===void 0?u===u&&!r(u):i(u,l)))var l=u,f=s}return f}return I1=e,I1}var R1,RA;function kU(){if(RA)return R1;RA=1;function r(e,t){return e>t}return R1=r,R1}var F1,FA;function LU(){if(FA)return F1;FA=1;var r=Uw(),e=kU(),t=Dl();function n(i){return i&&i.length?r(i,t,e):void 0}return F1=n,F1}var B1,BA;function CP(){if(BA)return B1;BA=1;var r=jp,e=Yf;function t(n,i,a){(a!==void 0&&!e(n[i],a)||a===void 0&&!(i in n))&&r(n,i,a)}return B1=t,B1}var z1,zA;function NU(){if(zA)return z1;zA=1;var r=Tl,e=yv(),t=os,n="[object Object]",i=Function.prototype,a=Object.prototype,o=i.toString,s=a.hasOwnProperty,u=o.call(Object);function l(f){if(!t(f)||r(f)!=n)return!1;var c=e(f);if(c===null)return!0;var d=s.call(c,"constructor")&&c.constructor;return typeof d=="function"&&d instanceof d&&o.call(d)==u}return z1=l,z1}var q1,qA;function AP(){if(qA)return q1;qA=1;function r(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}return q1=r,q1}var G1,GA;function PU(){if(GA)return G1;GA=1;var r=Vh(),e=Ol();function t(n){return r(n,e(n))}return G1=t,G1}var $1,$A;function MU(){if($A)return $1;$A=1;var r=CP(),e=FN(),t=jN(),n=J2,i=WN(),a=Wh(),o=yi,s=gP(),u=oc(),l=Nh,f=ja,c=NU(),d=Yh(),h=AP(),p=PU();function g(b,v,y,m,w,S,A){var _=h(b,y),E=h(v,y),k=A.get(E);if(k){r(b,y,k);return}var M=S?S(_,E,y+"",b,v,A):void 0,T=M===void 0;if(T){var C=o(E),R=!C&&u(E),x=!C&&!R&&d(E);M=E,C||R||x?o(_)?M=_:s(_)?M=n(_):R?(T=!1,M=e(E,!0)):x?(T=!1,M=t(E,!0)):M=[]:c(E)||a(E)?(M=_,a(_)?M=p(_):(!f(_)||l(_))&&(M=i(E))):T=!1}T&&(A.set(E,M),w(M,E,m,S,A),A.delete(E)),r(b,y,M)}return $1=g,$1}var U1,UA;function OU(){if(UA)return U1;UA=1;var r=vv(),e=CP(),t=Bw(),n=MU(),i=ja,a=Ol(),o=AP();function s(u,l,f,c,d){u!==l&&t(l,function(h,p){if(d||(d=new r),i(h))n(u,l,p,f,s,c,d);else{var g=c?c(o(u,p),h,p+"",u,l,d):void 0;g===void 0&&(g=h),e(u,p,g)}},a)}return U1=s,U1}var H1,HA;function DU(){if(HA)return H1;HA=1;var r=wv(),e=_v();function t(n){return r(function(i,a){var o=-1,s=a.length,u=s>1?a[s-1]:void 0,l=s>2?a[2]:void 0;for(u=n.length>3&&typeof u=="function"?(s--,u):void 0,l&&e(a[0],a[1],l)&&(u=s<3?void 0:u,s=1),i=Object(i);++o<s;){var f=a[o];f&&n(i,f,o,u)}return i})}return H1=t,H1}var j1,jA;function IU(){if(jA)return j1;jA=1;var r=OU(),e=DU(),t=e(function(n,i,a){r(n,i,a)});return j1=t,j1}var V1,VA;function TP(){if(VA)return V1;VA=1;function r(e,t){return e<t}return V1=r,V1}var W1,WA;function RU(){if(WA)return W1;WA=1;var r=Uw(),e=TP(),t=Dl();function n(i){return i&&i.length?r(i,t,e):void 0}return W1=n,W1}var Y1,YA;function FU(){if(YA)return Y1;YA=1;var r=Uw(),e=qs(),t=TP();function n(i,a){return i&&i.length?r(i,e(a,2),t):void 0}return Y1=n,Y1}var X1,XA;function BU(){if(XA)return X1;XA=1;var r=Hp,e=ck,t=Up;function n(i,a,o){for(var s=-1,u=a.length,l={};++s<u;){var f=a[s],c=r(i,f);o(c,f)&&e(l,t(f,i),c)}return l}return X1=n,X1}var K1,KA;function zU(){if(KA)return K1;KA=1;var r=BU(),e=aP();function t(n,i){return r(n,i,function(a,o){return e(n,o)})}return K1=t,K1}var Z1,ZA;function qU(){if(ZA)return Z1;ZA=1;var r=EP(),e=dP(),t=pP();function n(i){return t(e(i,void 0,r),i+"")}return Z1=n,Z1}var Q1,QA;function GU(){if(QA)return Q1;QA=1;var r=zU(),e=qU(),t=e(function(n,i){return n==null?{}:r(n,i)});return Q1=t,Q1}var J1,JA;function $U(){if(JA)return J1;JA=1;var r=Math.ceil,e=Math.max;function t(n,i,a,o){for(var s=-1,u=e(r((i-n)/(a||1)),0),l=Array(u);u--;)l[o?u:++s]=n,n+=a;return l}return J1=t,J1}var eb,eT;function UU(){if(eT)return eb;eT=1;var r=$U(),e=_v(),t=SP();function n(i){return function(a,o,s){return s&&typeof s!="number"&&e(a,o,s)&&(o=s=void 0),a=t(a),o===void 0?(o=a,a=0):o=t(o),s=s===void 0?a<o?1:-1:t(s),r(a,o,s,i)}}return eb=n,eb}var tb,tT;function HU(){if(tT)return tb;tT=1;var r=UU(),e=r();return tb=e,tb}var rb,rT;function jU(){if(rT)return rb;rT=1;function r(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}return rb=r,rb}var nb,nT;function VU(){if(nT)return nb;nT=1;var r=kl;function e(t,n){if(t!==n){var i=t!==void 0,a=t===null,o=t===t,s=r(t),u=n!==void 0,l=n===null,f=n===n,c=r(n);if(!l&&!c&&!s&&t>n||s&&u&&f&&!l&&!c||a&&u&&f||!i&&f||!o)return 1;if(!a&&!s&&!c&&t<n||c&&i&&o&&!a&&!s||l&&i&&o||!u&&o||!f)return-1}return 0}return nb=e,nb}var ib,iT;function WU(){if(iT)return ib;iT=1;var r=VU();function e(t,n,i){for(var a=-1,o=t.criteria,s=n.criteria,u=o.length,l=i.length;++a<u;){var f=r(o[a],s[a]);if(f){if(a>=l)return f;var c=i[a];return f*(c=="desc"?-1:1)}}return t.index-n.index}return ib=e,ib}var ab,aT;function YU(){if(aT)return ab;aT=1;var r=Ph,e=Hp,t=qs(),n=fP(),i=jU(),a=gv(),o=WU(),s=Dl(),u=yi;function l(f,c,d){c.length?c=r(c,function(g){return u(g)?function(b){return e(b,g.length===1?g[0]:g)}:g}):c=[s];var h=-1;c=r(c,a(t));var p=n(f,function(g,b,v){var y=r(c,function(m){return m(g)});return{criteria:y,index:++h,value:g}});return i(p,function(g,b){return o(g,b,d)})}return ab=l,ab}var ob,oT;function XU(){if(oT)return ob;oT=1;var r=Gw(),e=YU(),t=wv(),n=_v(),i=t(function(a,o){if(a==null)return[];var s=o.length;return s>1&&n(a,o[0],o[1])?o=[]:s>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),e(a,r(o,1),[])});return ob=i,ob}var sb,sT;function KU(){if(sT)return sb;sT=1;var r=Q2,e=0;function t(n){var i=++e;return r(n)+i}return sb=t,sb}var ub,uT;function ZU(){if(uT)return ub;uT=1;function r(e,t,n){for(var i=-1,a=e.length,o=t.length,s={};++i<a;){var u=i<o?t[i]:void 0;n(s,e[i],u)}return s}return ub=r,ub}var lb,lT;function QU(){if(lT)return lb;lT=1;var r=Vp,e=ZU();function t(n,i){return e(n||[],i||[],r)}return lb=t,lb}var fb,fT;function Xn(){if(fT)return fb;fT=1;var r;if(typeof fl=="function")try{r={cloneDeep:bU(),constant:Fw(),defaults:wU(),each:ZN(),filter:sP(),find:EU(),flatten:EP(),forEach:KN(),forIn:CU(),has:uP(),isUndefined:lP(),last:AU(),map:cP(),mapValues:TU(),max:LU(),merge:IU(),min:RU(),minBy:FU(),now:tk,pick:GU(),range:HU(),reduce:hP(),sortBy:XU(),uniqueId:KU(),values:mP(),zipObject:QU()}}catch{}return r||(r=window._),fb=r,fb}var cb,cT;function JU(){if(cT)return cb;cT=1,cb=r;function r(){var n={};n._next=n._prev=n,this._sentinel=n}r.prototype.dequeue=function(){var n=this._sentinel,i=n._prev;if(i!==n)return e(i),i},r.prototype.enqueue=function(n){var i=this._sentinel;n._prev&&n._next&&e(n),n._next=i._next,i._next._prev=n,i._next=n,n._prev=i},r.prototype.toString=function(){for(var n=[],i=this._sentinel,a=i._prev;a!==i;)n.push(JSON.stringify(a,t)),a=a._prev;return"["+n.join(", ")+"]"};function e(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function t(n,i){if(n!=="_next"&&n!=="_prev")return i}return cb}var hb,hT;function eH(){if(hT)return hb;hT=1;var r=Xn(),e=Ao().Graph,t=JU();hb=i;var n=r.constant(1);function i(l,f){if(l.nodeCount()<=1)return[];var c=s(l,f||n),d=a(c.graph,c.buckets,c.zeroIdx);return r.flatten(r.map(d,function(h){return l.outEdges(h.v,h.w)}),!0)}function a(l,f,c){for(var d=[],h=f[f.length-1],p=f[0],g;l.nodeCount();){for(;g=p.dequeue();)o(l,f,c,g);for(;g=h.dequeue();)o(l,f,c,g);if(l.nodeCount()){for(var b=f.length-2;b>0;--b)if(g=f[b].dequeue(),g){d=d.concat(o(l,f,c,g,!0));break}}}return d}function o(l,f,c,d,h){var p=h?[]:void 0;return r.forEach(l.inEdges(d.v),function(g){var b=l.edge(g),v=l.node(g.v);h&&p.push({v:g.v,w:g.w}),v.out-=b,u(f,c,v)}),r.forEach(l.outEdges(d.v),function(g){var b=l.edge(g),v=g.w,y=l.node(v);y.in-=b,u(f,c,y)}),l.removeNode(d.v),p}function s(l,f){var c=new e,d=0,h=0;r.forEach(l.nodes(),function(b){c.setNode(b,{v:b,in:0,out:0})}),r.forEach(l.edges(),function(b){var v=c.edge(b.v,b.w)||0,y=f(b),m=v+y;c.setEdge(b.v,b.w,m),h=Math.max(h,c.node(b.v).out+=y),d=Math.max(d,c.node(b.w).in+=y)});var p=r.range(h+d+3).map(function(){return new t}),g=d+1;return r.forEach(c.nodes(),function(b){u(p,g,c.node(b))}),{graph:c,buckets:p,zeroIdx:g}}function u(l,f,c){c.out?c.in?l[c.out-c.in+f].enqueue(c):l[l.length-1].enqueue(c):l[0].enqueue(c)}return hb}var db,dT;function tH(){if(dT)return db;dT=1;var r=Xn(),e=eH();db={run:t,undo:i};function t(a){var o=a.graph().acyclicer==="greedy"?e(a,s(a)):n(a);r.forEach(o,function(u){var l=a.edge(u);a.removeEdge(u),l.forwardName=u.name,l.reversed=!0,a.setEdge(u.w,u.v,l,r.uniqueId("rev"))});function s(u){return function(l){return u.edge(l).weight}}}function n(a){var o=[],s={},u={};function l(f){r.has(u,f)||(u[f]=!0,s[f]=!0,r.forEach(a.outEdges(f),function(c){r.has(s,c.w)?o.push(c):l(c.w)}),delete s[f])}return r.forEach(a.nodes(),l),o}function i(a){r.forEach(a.edges(),function(o){var s=a.edge(o);if(s.reversed){a.removeEdge(o);var u=s.forwardName;delete s.reversed,delete s.forwardName,a.setEdge(o.w,o.v,s,u)}})}return db}var pb,pT;function Da(){if(pT)return pb;pT=1;var r=Xn(),e=Ao().Graph;pb={addDummyNode:t,simplify:n,asNonCompoundGraph:i,successorWeights:a,predecessorWeights:o,intersectRect:s,buildLayerMatrix:u,normalizeRanks:l,removeEmptyRanks:f,addBorderNode:c,maxRank:d,partition:h,time:p,notime:g};function t(b,v,y,m){var w;do w=r.uniqueId(m);while(b.hasNode(w));return y.dummy=v,b.setNode(w,y),w}function n(b){var v=new e().setGraph(b.graph());return r.forEach(b.nodes(),function(y){v.setNode(y,b.node(y))}),r.forEach(b.edges(),function(y){var m=v.edge(y.v,y.w)||{weight:0,minlen:1},w=b.edge(y);v.setEdge(y.v,y.w,{weight:m.weight+w.weight,minlen:Math.max(m.minlen,w.minlen)})}),v}function i(b){var v=new e({multigraph:b.isMultigraph()}).setGraph(b.graph());return r.forEach(b.nodes(),function(y){b.children(y).length||v.setNode(y,b.node(y))}),r.forEach(b.edges(),function(y){v.setEdge(y,b.edge(y))}),v}function a(b){var v=r.map(b.nodes(),function(y){var m={};return r.forEach(b.outEdges(y),function(w){m[w.w]=(m[w.w]||0)+b.edge(w).weight}),m});return r.zipObject(b.nodes(),v)}function o(b){var v=r.map(b.nodes(),function(y){var m={};return r.forEach(b.inEdges(y),function(w){m[w.v]=(m[w.v]||0)+b.edge(w).weight}),m});return r.zipObject(b.nodes(),v)}function s(b,v){var y=b.x,m=b.y,w=v.x-y,S=v.y-m,A=b.width/2,_=b.height/2;if(!w&&!S)throw new Error("Not possible to find intersection inside of the rectangle");var E,k;return Math.abs(S)*A>Math.abs(w)*_?(S<0&&(_=-_),E=_*w/S,k=_):(w<0&&(A=-A),E=A,k=A*S/w),{x:y+E,y:m+k}}function u(b){var v=r.map(r.range(d(b)+1),function(){return[]});return r.forEach(b.nodes(),function(y){var m=b.node(y),w=m.rank;r.isUndefined(w)||(v[w][m.order]=y)}),v}function l(b){var v=r.min(r.map(b.nodes(),function(y){return b.node(y).rank}));r.forEach(b.nodes(),function(y){var m=b.node(y);r.has(m,"rank")&&(m.rank-=v)})}function f(b){var v=r.min(r.map(b.nodes(),function(S){return b.node(S).rank})),y=[];r.forEach(b.nodes(),function(S){var A=b.node(S).rank-v;y[A]||(y[A]=[]),y[A].push(S)});var m=0,w=b.graph().nodeRankFactor;r.forEach(y,function(S,A){r.isUndefined(S)&&A%w!==0?--m:m&&r.forEach(S,function(_){b.node(_).rank+=m})})}function c(b,v,y,m){var w={width:0,height:0};return arguments.length>=4&&(w.rank=y,w.order=m),t(b,"border",w,v)}function d(b){return r.max(r.map(b.nodes(),function(v){var y=b.node(v).rank;if(!r.isUndefined(y))return y}))}function h(b,v){var y={lhs:[],rhs:[]};return r.forEach(b,function(m){v(m)?y.lhs.push(m):y.rhs.push(m)}),y}function p(b,v){var y=r.now();try{return v()}finally{console.log(b+" time: "+(r.now()-y)+"ms")}}function g(b,v){return v()}return pb}var vb,vT;function rH(){if(vT)return vb;vT=1;var r=Xn(),e=Da();vb={run:t,undo:i};function t(a){a.graph().dummyChains=[],r.forEach(a.edges(),function(o){n(a,o)})}function n(a,o){var s=o.v,u=a.node(s).rank,l=o.w,f=a.node(l).rank,c=o.name,d=a.edge(o),h=d.labelRank;if(f!==u+1){a.removeEdge(o);var p,g,b;for(b=0,++u;u<f;++b,++u)d.points=[],g={width:0,height:0,edgeLabel:d,edgeObj:o,rank:u},p=e.addDummyNode(a,"edge",g,"_d"),u===h&&(g.width=d.width,g.height=d.height,g.dummy="edge-label",g.labelpos=d.labelpos),a.setEdge(s,p,{weight:d.weight},c),b===0&&a.graph().dummyChains.push(p),s=p;a.setEdge(s,l,{weight:d.weight},c)}}function i(a){r.forEach(a.graph().dummyChains,function(o){var s=a.node(o),u=s.edgeLabel,l;for(a.setEdge(s.edgeObj,u);s.dummy;)l=a.successors(o)[0],a.removeNode(o),u.points.push({x:s.x,y:s.y}),s.dummy==="edge-label"&&(u.x=s.x,u.y=s.y,u.width=s.width,u.height=s.height),o=l,s=a.node(o)})}return vb}var gb,gT;function Lp(){if(gT)return gb;gT=1;var r=Xn();gb={longestPath:e,slack:t};function e(n){var i={};function a(o){var s=n.node(o);if(r.has(i,o))return s.rank;i[o]=!0;var u=r.min(r.map(n.outEdges(o),function(l){return a(l.w)-n.edge(l).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),s.rank=u}r.forEach(n.sources(),a)}function t(n,i){return n.node(i.w).rank-n.node(i.v).rank-n.edge(i).minlen}return gb}var mb,mT;function kP(){if(mT)return mb;mT=1;var r=Xn(),e=Ao().Graph,t=Lp().slack;mb=n;function n(s){var u=new e({directed:!1}),l=s.nodes()[0],f=s.nodeCount();u.setNode(l,{});for(var c,d;i(u,s)<f;)c=a(u,s),d=u.hasNode(c.v)?t(s,c):-t(s,c),o(u,s,d);return u}function i(s,u){function l(f){r.forEach(u.nodeEdges(f),function(c){var d=c.v,h=f===d?c.w:d;!s.hasNode(h)&&!t(u,c)&&(s.setNode(h,{}),s.setEdge(f,h,{}),l(h))})}return r.forEach(s.nodes(),l),s.nodeCount()}function a(s,u){return r.minBy(u.edges(),function(l){if(s.hasNode(l.v)!==s.hasNode(l.w))return t(u,l)})}function o(s,u,l){r.forEach(s.nodes(),function(f){u.node(f).rank+=l})}return mb}var yb,yT;function nH(){if(yT)return yb;yT=1;var r=Xn(),e=kP(),t=Lp().slack,n=Lp().longestPath,i=Ao().alg.preorder,a=Ao().alg.postorder,o=Da().simplify;yb=s,s.initLowLimValues=c,s.initCutValues=u,s.calcCutValue=f,s.leaveEdge=h,s.enterEdge=p,s.exchangeEdges=g;function s(m){m=o(m),n(m);var w=e(m);c(w),u(w,m);for(var S,A;S=h(w);)A=p(w,m,S),g(w,m,S,A)}function u(m,w){var S=a(m,m.nodes());S=S.slice(0,S.length-1),r.forEach(S,function(A){l(m,w,A)})}function l(m,w,S){var A=m.node(S),_=A.parent;m.edge(S,_).cutvalue=f(m,w,S)}function f(m,w,S){var A=m.node(S),_=A.parent,E=!0,k=w.edge(S,_),M=0;return k||(E=!1,k=w.edge(_,S)),M=k.weight,r.forEach(w.nodeEdges(S),function(T){var C=T.v===S,R=C?T.w:T.v;if(R!==_){var x=C===E,B=w.edge(T).weight;if(M+=x?B:-B,v(m,S,R)){var D=m.edge(S,R).cutvalue;M+=x?-D:D}}}),M}function c(m,w){arguments.length<2&&(w=m.nodes()[0]),d(m,{},1,w)}function d(m,w,S,A,_){var E=S,k=m.node(A);return w[A]=!0,r.forEach(m.neighbors(A),function(M){r.has(w,M)||(S=d(m,w,S,M,A))}),k.low=E,k.lim=S++,_?k.parent=_:delete k.parent,S}function h(m){return r.find(m.edges(),function(w){return m.edge(w).cutvalue<0})}function p(m,w,S){var A=S.v,_=S.w;w.hasEdge(A,_)||(A=S.w,_=S.v);var E=m.node(A),k=m.node(_),M=E,T=!1;E.lim>k.lim&&(M=k,T=!0);var C=r.filter(w.edges(),function(R){return T===y(m,m.node(R.v),M)&&T!==y(m,m.node(R.w),M)});return r.minBy(C,function(R){return t(w,R)})}function g(m,w,S,A){var _=S.v,E=S.w;m.removeEdge(_,E),m.setEdge(A.v,A.w,{}),c(m),u(m,w),b(m,w)}function b(m,w){var S=r.find(m.nodes(),function(_){return!w.node(_).parent}),A=i(m,S);A=A.slice(1),r.forEach(A,function(_){var E=m.node(_).parent,k=w.edge(_,E),M=!1;k||(k=w.edge(E,_),M=!0),w.node(_).rank=w.node(E).rank+(M?k.minlen:-k.minlen)})}function v(m,w,S){return m.hasEdge(w,S)}function y(m,w,S){return S.low<=w.lim&&w.lim<=S.lim}return yb}var bb,bT;function iH(){if(bT)return bb;bT=1;var r=Lp(),e=r.longestPath,t=kP(),n=nH();bb=i;function i(u){switch(u.graph().ranker){case"network-simplex":s(u);break;case"tight-tree":o(u);break;case"longest-path":a(u);break;default:s(u)}}var a=e;function o(u){e(u),t(u)}function s(u){n(u)}return bb}var wb,wT;function aH(){if(wT)return wb;wT=1;var r=Xn();wb=e;function e(i){var a=n(i);r.forEach(i.graph().dummyChains,function(o){for(var s=i.node(o),u=s.edgeObj,l=t(i,a,u.v,u.w),f=l.path,c=l.lca,d=0,h=f[d],p=!0;o!==u.w;){if(s=i.node(o),p){for(;(h=f[d])!==c&&i.node(h).maxRank<s.rank;)d++;h===c&&(p=!1)}if(!p){for(;d<f.length-1&&i.node(h=f[d+1]).minRank<=s.rank;)d++;h=f[d]}i.setParent(o,h),o=i.successors(o)[0]}})}function t(i,a,o,s){var u=[],l=[],f=Math.min(a[o].low,a[s].low),c=Math.max(a[o].lim,a[s].lim),d,h;d=o;do d=i.parent(d),u.push(d);while(d&&(a[d].low>f||c>a[d].lim));for(h=d,d=s;(d=i.parent(d))!==h;)l.push(d);return{path:u.concat(l.reverse()),lca:h}}function n(i){var a={},o=0;function s(u){var l=o;r.forEach(i.children(u),s),a[u]={low:l,lim:o++}}return r.forEach(i.children(),s),a}return wb}var _b,_T;function oH(){if(_T)return _b;_T=1;var r=Xn(),e=Da();_b={run:t,cleanup:o};function t(s){var u=e.addDummyNode(s,"root",{},"_root"),l=i(s),f=r.max(r.values(l))-1,c=2*f+1;s.graph().nestingRoot=u,r.forEach(s.edges(),function(h){s.edge(h).minlen*=c});var d=a(s)+1;r.forEach(s.children(),function(h){n(s,u,c,d,f,l,h)}),s.graph().nodeRankFactor=c}function n(s,u,l,f,c,d,h){var p=s.children(h);if(!p.length){h!==u&&s.setEdge(u,h,{weight:0,minlen:l});return}var g=e.addBorderNode(s,"_bt"),b=e.addBorderNode(s,"_bb"),v=s.node(h);s.setParent(g,h),v.borderTop=g,s.setParent(b,h),v.borderBottom=b,r.forEach(p,function(y){n(s,u,l,f,c,d,y);var m=s.node(y),w=m.borderTop?m.borderTop:y,S=m.borderBottom?m.borderBottom:y,A=m.borderTop?f:2*f,_=w!==S?1:c-d[h]+1;s.setEdge(g,w,{weight:A,minlen:_,nestingEdge:!0}),s.setEdge(S,b,{weight:A,minlen:_,nestingEdge:!0})}),s.parent(h)||s.setEdge(u,g,{weight:0,minlen:c+d[h]})}function i(s){var u={};function l(f,c){var d=s.children(f);d&&d.length&&r.forEach(d,function(h){l(h,c+1)}),u[f]=c}return r.forEach(s.children(),function(f){l(f,1)}),u}function a(s){return r.reduce(s.edges(),function(u,l){return u+s.edge(l).weight},0)}function o(s){var u=s.graph();s.removeNode(u.nestingRoot),delete u.nestingRoot,r.forEach(s.edges(),function(l){var f=s.edge(l);f.nestingEdge&&s.removeEdge(l)})}return _b}var xb,xT;function sH(){if(xT)return xb;xT=1;var r=Xn(),e=Da();xb=t;function t(i){function a(o){var s=i.children(o),u=i.node(o);if(s.length&&r.forEach(s,a),r.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var l=u.minRank,f=u.maxRank+1;l<f;++l)n(i,"borderLeft","_bl",o,u,l),n(i,"borderRight","_br",o,u,l)}}r.forEach(i.children(),a)}function n(i,a,o,s,u,l){var f={width:0,height:0,rank:l,borderType:a},c=u[a][l-1],d=e.addDummyNode(i,"border",f,o);u[a][l]=d,i.setParent(d,s),c&&i.setEdge(c,d,{weight:1})}return xb}var Sb,ST;function uH(){if(ST)return Sb;ST=1;var r=Xn();Sb={adjust:e,undo:t};function e(l){var f=l.graph().rankdir.toLowerCase();(f==="lr"||f==="rl")&&n(l)}function t(l){var f=l.graph().rankdir.toLowerCase();(f==="bt"||f==="rl")&&a(l),(f==="lr"||f==="rl")&&(s(l),n(l))}function n(l){r.forEach(l.nodes(),function(f){i(l.node(f))}),r.forEach(l.edges(),function(f){i(l.edge(f))})}function i(l){var f=l.width;l.width=l.height,l.height=f}function a(l){r.forEach(l.nodes(),function(f){o(l.node(f))}),r.forEach(l.edges(),function(f){var c=l.edge(f);r.forEach(c.points,o),r.has(c,"y")&&o(c)})}function o(l){l.y=-l.y}function s(l){r.forEach(l.nodes(),function(f){u(l.node(f))}),r.forEach(l.edges(),function(f){var c=l.edge(f);r.forEach(c.points,u),r.has(c,"x")&&u(c)})}function u(l){var f=l.x;l.x=l.y,l.y=f}return Sb}var Eb,ET;function lH(){if(ET)return Eb;ET=1;var r=Xn();Eb=e;function e(t){var n={},i=r.filter(t.nodes(),function(l){return!t.children(l).length}),a=r.max(r.map(i,function(l){return t.node(l).rank})),o=r.map(r.range(a+1),function(){return[]});function s(l){if(!r.has(n,l)){n[l]=!0;var f=t.node(l);o[f.rank].push(l),r.forEach(t.successors(l),s)}}var u=r.sortBy(i,function(l){return t.node(l).rank});return r.forEach(u,s),o}return Eb}var Cb,CT;function fH(){if(CT)return Cb;CT=1;var r=Xn();Cb=e;function e(n,i){for(var a=0,o=1;o<i.length;++o)a+=t(n,i[o-1],i[o]);return a}function t(n,i,a){for(var o=r.zipObject(a,r.map(a,function(d,h){return h})),s=r.flatten(r.map(i,function(d){return r.sortBy(r.map(n.outEdges(d),function(h){return{pos:o[h.w],weight:n.edge(h).weight}}),"pos")}),!0),u=1;u<a.length;)u<<=1;var l=2*u-1;u-=1;var f=r.map(new Array(l),function(){return 0}),c=0;return r.forEach(s.forEach(function(d){var h=d.pos+u;f[h]+=d.weight;for(var p=0;h>0;)h%2&&(p+=f[h+1]),h=h-1>>1,f[h]+=d.weight;c+=d.weight*p})),c}return Cb}var Ab,AT;function cH(){if(AT)return Ab;AT=1;var r=Xn();Ab=e;function e(t,n){return r.map(n,function(i){var a=t.inEdges(i);if(a.length){var o=r.reduce(a,function(s,u){var l=t.edge(u),f=t.node(u.v);return{sum:s.sum+l.weight*f.order,weight:s.weight+l.weight}},{sum:0,weight:0});return{v:i,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:i}})}return Ab}var Tb,TT;function hH(){if(TT)return Tb;TT=1;var r=Xn();Tb=e;function e(i,a){var o={};r.forEach(i,function(u,l){var f=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:l};r.isUndefined(u.barycenter)||(f.barycenter=u.barycenter,f.weight=u.weight)}),r.forEach(a.edges(),function(u){var l=o[u.v],f=o[u.w];!r.isUndefined(l)&&!r.isUndefined(f)&&(f.indegree++,l.out.push(o[u.w]))});var s=r.filter(o,function(u){return!u.indegree});return t(s)}function t(i){var a=[];function o(l){return function(f){f.merged||(r.isUndefined(f.barycenter)||r.isUndefined(l.barycenter)||f.barycenter>=l.barycenter)&&n(l,f)}}function s(l){return function(f){f.in.push(l),--f.indegree===0&&i.push(f)}}for(;i.length;){var u=i.pop();a.push(u),r.forEach(u.in.reverse(),o(u)),r.forEach(u.out,s(u))}return r.map(r.filter(a,function(l){return!l.merged}),function(l){return r.pick(l,["vs","i","barycenter","weight"])})}function n(i,a){var o=0,s=0;i.weight&&(o+=i.barycenter*i.weight,s+=i.weight),a.weight&&(o+=a.barycenter*a.weight,s+=a.weight),i.vs=a.vs.concat(i.vs),i.barycenter=o/s,i.weight=s,i.i=Math.min(a.i,i.i),a.merged=!0}return Tb}var kb,kT;function dH(){if(kT)return kb;kT=1;var r=Xn(),e=Da();kb=t;function t(a,o){var s=e.partition(a,function(g){return r.has(g,"barycenter")}),u=s.lhs,l=r.sortBy(s.rhs,function(g){return-g.i}),f=[],c=0,d=0,h=0;u.sort(i(!!o)),h=n(f,l,h),r.forEach(u,function(g){h+=g.vs.length,f.push(g.vs),c+=g.barycenter*g.weight,d+=g.weight,h=n(f,l,h)});var p={vs:r.flatten(f,!0)};return d&&(p.barycenter=c/d,p.weight=d),p}function n(a,o,s){for(var u;o.length&&(u=r.last(o)).i<=s;)o.pop(),a.push(u.vs),s++;return s}function i(a){return function(o,s){return o.barycenter<s.barycenter?-1:o.barycenter>s.barycenter?1:a?s.i-o.i:o.i-s.i}}return kb}var Lb,LT;function pH(){if(LT)return Lb;LT=1;var r=Xn(),e=cH(),t=hH(),n=dH();Lb=i;function i(s,u,l,f){var c=s.children(u),d=s.node(u),h=d?d.borderLeft:void 0,p=d?d.borderRight:void 0,g={};h&&(c=r.filter(c,function(S){return S!==h&&S!==p}));var b=e(s,c);r.forEach(b,function(S){if(s.children(S.v).length){var A=i(s,S.v,l,f);g[S.v]=A,r.has(A,"barycenter")&&o(S,A)}});var v=t(b,l);a(v,g);var y=n(v,f);if(h&&(y.vs=r.flatten([h,y.vs,p],!0),s.predecessors(h).length)){var m=s.node(s.predecessors(h)[0]),w=s.node(s.predecessors(p)[0]);r.has(y,"barycenter")||(y.barycenter=0,y.weight=0),y.barycenter=(y.barycenter*y.weight+m.order+w.order)/(y.weight+2),y.weight+=2}return y}function a(s,u){r.forEach(s,function(l){l.vs=r.flatten(l.vs.map(function(f){return u[f]?u[f].vs:f}),!0)})}function o(s,u){r.isUndefined(s.barycenter)?(s.barycenter=u.barycenter,s.weight=u.weight):(s.barycenter=(s.barycenter*s.weight+u.barycenter*u.weight)/(s.weight+u.weight),s.weight+=u.weight)}return Lb}var Nb,NT;function vH(){if(NT)return Nb;NT=1;var r=Xn(),e=Ao().Graph;Nb=t;function t(i,a,o){var s=n(i),u=new e({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(function(l){return i.node(l)});return r.forEach(i.nodes(),function(l){var f=i.node(l),c=i.parent(l);(f.rank===a||f.minRank<=a&&a<=f.maxRank)&&(u.setNode(l),u.setParent(l,c||s),r.forEach(i[o](l),function(d){var h=d.v===l?d.w:d.v,p=u.edge(h,l),g=r.isUndefined(p)?0:p.weight;u.setEdge(h,l,{weight:i.edge(d).weight+g})}),r.has(f,"minRank")&&u.setNode(l,{borderLeft:f.borderLeft[a],borderRight:f.borderRight[a]}))}),u}function n(i){for(var a;i.hasNode(a=r.uniqueId("_root")););return a}return Nb}var Pb,PT;function gH(){if(PT)return Pb;PT=1;var r=Xn();Pb=e;function e(t,n,i){var a={},o;r.forEach(i,function(s){for(var u=t.parent(s),l,f;u;){if(l=t.parent(u),l?(f=a[l],a[l]=u):(f=o,o=u),f&&f!==u){n.setEdge(f,u);return}u=l}})}return Pb}var Mb,MT;function mH(){if(MT)return Mb;MT=1;var r=Xn(),e=lH(),t=fH(),n=pH(),i=vH(),a=gH(),o=Ao().Graph,s=Da();Mb=u;function u(d){var h=s.maxRank(d),p=l(d,r.range(1,h+1),"inEdges"),g=l(d,r.range(h-1,-1,-1),"outEdges"),b=e(d);c(d,b);for(var v=Number.POSITIVE_INFINITY,y,m=0,w=0;w<4;++m,++w){f(m%2?p:g,m%4>=2),b=s.buildLayerMatrix(d);var S=t(d,b);S<v&&(w=0,y=r.cloneDeep(b),v=S)}c(d,y)}function l(d,h,p){return r.map(h,function(g){return i(d,g,p)})}function f(d,h){var p=new o;r.forEach(d,function(g){var b=g.graph().root,v=n(g,b,p,h);r.forEach(v.vs,function(y,m){g.node(y).order=m}),a(g,p,v.vs)})}function c(d,h){r.forEach(h,function(p){r.forEach(p,function(g,b){d.node(g).order=b})})}return Mb}var Ob,OT;function yH(){if(OT)return Ob;OT=1;var r=Xn(),e=Ao().Graph,t=Da();Ob={positionX:p,findType1Conflicts:n,findType2Conflicts:i,addConflict:o,hasConflict:s,verticalAlignment:u,horizontalCompaction:l,alignCoordinates:d,findSmallestWidthAlignment:c,balance:h};function n(v,y){var m={};function w(S,A){var _=0,E=0,k=S.length,M=r.last(A);return r.forEach(A,function(T,C){var R=a(v,T),x=R?v.node(R).order:k;(R||T===M)&&(r.forEach(A.slice(E,C+1),function(B){r.forEach(v.predecessors(B),function(D){var O=v.node(D),G=O.order;(G<_||x<G)&&!(O.dummy&&v.node(B).dummy)&&o(m,D,B)})}),E=C+1,_=x)}),A}return r.reduce(y,w),m}function i(v,y){var m={};function w(A,_,E,k,M){var T;r.forEach(r.range(_,E),function(C){T=A[C],v.node(T).dummy&&r.forEach(v.predecessors(T),function(R){var x=v.node(R);x.dummy&&(x.order<k||x.order>M)&&o(m,R,T)})})}function S(A,_){var E=-1,k,M=0;return r.forEach(_,function(T,C){if(v.node(T).dummy==="border"){var R=v.predecessors(T);R.length&&(k=v.node(R[0]).order,w(_,M,C,E,k),M=C,E=k)}w(_,M,_.length,k,A.length)}),_}return r.reduce(y,S),m}function a(v,y){if(v.node(y).dummy)return r.find(v.predecessors(y),function(m){return v.node(m).dummy})}function o(v,y,m){if(y>m){var w=y;y=m,m=w}var S=v[y];S||(v[y]=S={}),S[m]=!0}function s(v,y,m){if(y>m){var w=y;y=m,m=w}return r.has(v[y],m)}function u(v,y,m,w){var S={},A={},_={};return r.forEach(y,function(E){r.forEach(E,function(k,M){S[k]=k,A[k]=k,_[k]=M})}),r.forEach(y,function(E){var k=-1;r.forEach(E,function(M){var T=w(M);if(T.length){T=r.sortBy(T,function(D){return _[D]});for(var C=(T.length-1)/2,R=Math.floor(C),x=Math.ceil(C);R<=x;++R){var B=T[R];A[M]===M&&k<_[B]&&!s(m,M,B)&&(A[B]=M,A[M]=S[M]=S[B],k=_[B])}}})}),{root:S,align:A}}function l(v,y,m,w,S){var A={},_=f(v,y,m,S),E=S?"borderLeft":"borderRight";function k(C,R){for(var x=_.nodes(),B=x.pop(),D={};B;)D[B]?C(B):(D[B]=!0,x.push(B),x=x.concat(R(B))),B=x.pop()}function M(C){A[C]=_.inEdges(C).reduce(function(R,x){return Math.max(R,A[x.v]+_.edge(x))},0)}function T(C){var R=_.outEdges(C).reduce(function(B,D){return Math.min(B,A[D.w]-_.edge(D))},Number.POSITIVE_INFINITY),x=v.node(C);R!==Number.POSITIVE_INFINITY&&x.borderType!==E&&(A[C]=Math.max(A[C],R))}return k(M,_.predecessors.bind(_)),k(T,_.successors.bind(_)),r.forEach(w,function(C){A[C]=A[m[C]]}),A}function f(v,y,m,w){var S=new e,A=v.graph(),_=g(A.nodesep,A.edgesep,w);return r.forEach(y,function(E){var k;r.forEach(E,function(M){var T=m[M];if(S.setNode(T),k){var C=m[k],R=S.edge(C,T);S.setEdge(C,T,Math.max(_(v,M,k),R||0))}k=M})}),S}function c(v,y){return r.minBy(r.values(y),function(m){var w=Number.NEGATIVE_INFINITY,S=Number.POSITIVE_INFINITY;return r.forIn(m,function(A,_){var E=b(v,_)/2;w=Math.max(A+E,w),S=Math.min(A-E,S)}),w-S})}function d(v,y){var m=r.values(y),w=r.min(m),S=r.max(m);r.forEach(["u","d"],function(A){r.forEach(["l","r"],function(_){var E=A+_,k=v[E],M;if(k!==y){var T=r.values(k);M=_==="l"?w-r.min(T):S-r.max(T),M&&(v[E]=r.mapValues(k,function(C){return C+M}))}})})}function h(v,y){return r.mapValues(v.ul,function(m,w){if(y)return v[y.toLowerCase()][w];var S=r.sortBy(r.map(v,w));return(S[1]+S[2])/2})}function p(v){var y=t.buildLayerMatrix(v),m=r.merge(n(v,y),i(v,y)),w={},S;r.forEach(["u","d"],function(_){S=_==="u"?y:r.values(y).reverse(),r.forEach(["l","r"],function(E){E==="r"&&(S=r.map(S,function(C){return r.values(C).reverse()}));var k=(_==="u"?v.predecessors:v.successors).bind(v),M=u(v,S,m,k),T=l(v,S,M.root,M.align,E==="r");E==="r"&&(T=r.mapValues(T,function(C){return-C})),w[_+E]=T})});var A=c(v,w);return d(w,A),h(w,v.graph().align)}function g(v,y,m){return function(w,S,A){var _=w.node(S),E=w.node(A),k=0,M;if(k+=_.width/2,r.has(_,"labelpos"))switch(_.labelpos.toLowerCase()){case"l":M=-_.width/2;break;case"r":M=_.width/2;break}if(M&&(k+=m?M:-M),M=0,k+=(_.dummy?y:v)/2,k+=(E.dummy?y:v)/2,k+=E.width/2,r.has(E,"labelpos"))switch(E.labelpos.toLowerCase()){case"l":M=E.width/2;break;case"r":M=-E.width/2;break}return M&&(k+=m?M:-M),M=0,k}}function b(v,y){return v.node(y).width}return Ob}var Db,DT;function bH(){if(DT)return Db;DT=1;var r=Xn(),e=Da(),t=yH().positionX;Db=n;function n(a){a=e.asNonCompoundGraph(a),i(a),r.forEach(t(a),function(o,s){a.node(s).x=o})}function i(a){var o=e.buildLayerMatrix(a),s=a.graph().ranksep,u=0;r.forEach(o,function(l){var f=r.max(r.map(l,function(c){return a.node(c).height}));r.forEach(l,function(c){a.node(c).y=u+f/2}),u+=f+s})}return Db}var Ib,IT;function wH(){if(IT)return Ib;IT=1;var r=Xn(),e=tH(),t=rH(),n=iH(),i=Da().normalizeRanks,a=aH(),o=Da().removeEmptyRanks,s=oH(),u=sH(),l=uH(),f=mH(),c=bH(),d=Da(),h=Ao().Graph;Ib=p;function p(F,U){var W=U&&U.debugTiming?d.time:d.notime;W("layout",function(){var X=W("  buildLayoutGraph",function(){return k(F)});W("  runLayout",function(){g(X,W)}),W("  updateInputGraph",function(){b(F,X)})})}function g(F,U){U("    makeSpaceForEdgeLabels",function(){M(F)}),U("    removeSelfEdges",function(){V(F)}),U("    acyclic",function(){e.run(F)}),U("    nestingGraph.run",function(){s.run(F)}),U("    rank",function(){n(d.asNonCompoundGraph(F))}),U("    injectEdgeLabelProxies",function(){T(F)}),U("    removeEmptyRanks",function(){o(F)}),U("    nestingGraph.cleanup",function(){s.cleanup(F)}),U("    normalizeRanks",function(){i(F)}),U("    assignRankMinMax",function(){C(F)}),U("    removeEdgeLabelProxies",function(){R(F)}),U("    normalize.run",function(){t.run(F)}),U("    parentDummyChains",function(){a(F)}),U("    addBorderSegments",function(){u(F)}),U("    order",function(){f(F)}),U("    insertSelfEdges",function(){I(F)}),U("    adjustCoordinateSystem",function(){l.adjust(F)}),U("    position",function(){c(F)}),U("    positionSelfEdges",function(){z(F)}),U("    removeBorderNodes",function(){G(F)}),U("    normalize.undo",function(){t.undo(F)}),U("    fixupEdgeLabelCoords",function(){D(F)}),U("    undoCoordinateSystem",function(){l.undo(F)}),U("    translateGraph",function(){x(F)}),U("    assignNodeIntersects",function(){B(F)}),U("    reversePoints",function(){O(F)}),U("    acyclic.undo",function(){e.undo(F)})}function b(F,U){r.forEach(F.nodes(),function(W){var X=F.node(W),te=U.node(W);X&&(X.x=te.x,X.y=te.y,U.children(W).length&&(X.width=te.width,X.height=te.height))}),r.forEach(F.edges(),function(W){var X=F.edge(W),te=U.edge(W);X.points=te.points,r.has(te,"x")&&(X.x=te.x,X.y=te.y)}),F.graph().width=U.graph().width,F.graph().height=U.graph().height}var v=["nodesep","edgesep","ranksep","marginx","marginy"],y={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},m=["acyclicer","ranker","rankdir","align"],w=["width","height"],S={width:0,height:0},A=["minlen","weight","width","height","labeloffset"],_={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},E=["labelpos"];function k(F){var U=new h({multigraph:!0,compound:!0}),W=q(F.graph());return U.setGraph(r.merge({},y,P(W,v),r.pick(W,m))),r.forEach(F.nodes(),function(X){var te=q(F.node(X));U.setNode(X,r.defaults(P(te,w),S)),U.setParent(X,F.parent(X))}),r.forEach(F.edges(),function(X){var te=q(F.edge(X));U.setEdge(X,r.merge({},_,P(te,A),r.pick(te,E)))}),U}function M(F){var U=F.graph();U.ranksep/=2,r.forEach(F.edges(),function(W){var X=F.edge(W);X.minlen*=2,X.labelpos.toLowerCase()!=="c"&&(U.rankdir==="TB"||U.rankdir==="BT"?X.width+=X.labeloffset:X.height+=X.labeloffset)})}function T(F){r.forEach(F.edges(),function(U){var W=F.edge(U);if(W.width&&W.height){var X=F.node(U.v),te=F.node(U.w),ne={rank:(te.rank-X.rank)/2+X.rank,e:U};d.addDummyNode(F,"edge-proxy",ne,"_ep")}})}function C(F){var U=0;r.forEach(F.nodes(),function(W){var X=F.node(W);X.borderTop&&(X.minRank=F.node(X.borderTop).rank,X.maxRank=F.node(X.borderBottom).rank,U=r.max(U,X.maxRank))}),F.graph().maxRank=U}function R(F){r.forEach(F.nodes(),function(U){var W=F.node(U);W.dummy==="edge-proxy"&&(F.edge(W.e).labelRank=W.rank,F.removeNode(U))})}function x(F){var U=Number.POSITIVE_INFINITY,W=0,X=Number.POSITIVE_INFINITY,te=0,ne=F.graph(),he=ne.marginx||0,ve=ne.marginy||0;function Ce(Le){var K=Le.x,le=Le.y,Z=Le.width,ie=Le.height;U=Math.min(U,K-Z/2),W=Math.max(W,K+Z/2),X=Math.min(X,le-ie/2),te=Math.max(te,le+ie/2)}r.forEach(F.nodes(),function(Le){Ce(F.node(Le))}),r.forEach(F.edges(),function(Le){var K=F.edge(Le);r.has(K,"x")&&Ce(K)}),U-=he,X-=ve,r.forEach(F.nodes(),function(Le){var K=F.node(Le);K.x-=U,K.y-=X}),r.forEach(F.edges(),function(Le){var K=F.edge(Le);r.forEach(K.points,function(le){le.x-=U,le.y-=X}),r.has(K,"x")&&(K.x-=U),r.has(K,"y")&&(K.y-=X)}),ne.width=W-U+he,ne.height=te-X+ve}function B(F){r.forEach(F.edges(),function(U){var W=F.edge(U),X=F.node(U.v),te=F.node(U.w),ne,he;W.points?(ne=W.points[0],he=W.points[W.points.length-1]):(W.points=[],ne=te,he=X),W.points.unshift(d.intersectRect(X,ne)),W.points.push(d.intersectRect(te,he))})}function D(F){r.forEach(F.edges(),function(U){var W=F.edge(U);if(r.has(W,"x"))switch((W.labelpos==="l"||W.labelpos==="r")&&(W.width-=W.labeloffset),W.labelpos){case"l":W.x-=W.width/2+W.labeloffset;break;case"r":W.x+=W.width/2+W.labeloffset;break}})}function O(F){r.forEach(F.edges(),function(U){var W=F.edge(U);W.reversed&&W.points.reverse()})}function G(F){r.forEach(F.nodes(),function(U){if(F.children(U).length){var W=F.node(U),X=F.node(W.borderTop),te=F.node(W.borderBottom),ne=F.node(r.last(W.borderLeft)),he=F.node(r.last(W.borderRight));W.width=Math.abs(he.x-ne.x),W.height=Math.abs(te.y-X.y),W.x=ne.x+W.width/2,W.y=X.y+W.height/2}}),r.forEach(F.nodes(),function(U){F.node(U).dummy==="border"&&F.removeNode(U)})}function V(F){r.forEach(F.edges(),function(U){if(U.v===U.w){var W=F.node(U.v);W.selfEdges||(W.selfEdges=[]),W.selfEdges.push({e:U,label:F.edge(U)}),F.removeEdge(U)}})}function I(F){var U=d.buildLayerMatrix(F);r.forEach(U,function(W){var X=0;r.forEach(W,function(te,ne){var he=F.node(te);he.order=ne+X,r.forEach(he.selfEdges,function(ve){d.addDummyNode(F,"selfedge",{width:ve.label.width,height:ve.label.height,rank:he.rank,order:ne+ ++X,e:ve.e,label:ve.label},"_se")}),delete he.selfEdges})})}function z(F){r.forEach(F.nodes(),function(U){var W=F.node(U);if(W.dummy==="selfedge"){var X=F.node(W.e.v),te=X.x+X.width/2,ne=X.y,he=W.x-te,ve=X.height/2;F.setEdge(W.e,W.label),F.removeNode(U),W.label.points=[{x:te+2*he/3,y:ne-ve},{x:te+5*he/6,y:ne-ve},{x:te+he,y:ne},{x:te+5*he/6,y:ne+ve},{x:te+2*he/3,y:ne+ve}],W.label.x=W.x,W.label.y=W.y}})}function P(F,U){return r.mapValues(r.pick(F,U),Number)}function q(F){var U={};return r.forEach(F,function(W,X){U[X.toLowerCase()]=W}),U}return Ib}var Rb,RT;function _H(){if(RT)return Rb;RT=1;var r=Xn(),e=Da(),t=Ao().Graph;Rb={debugOrdering:n};function n(i){var a=e.buildLayerMatrix(i),o=new t({compound:!0,multigraph:!0}).setGraph({});return r.forEach(i.nodes(),function(s){o.setNode(s,{label:s}),o.setParent(s,"layer"+i.node(s).rank)}),r.forEach(i.edges(),function(s){o.setEdge(s.v,s.w,{},s.name)}),r.forEach(a,function(s,u){var l="layer"+u;o.setNode(l,{rank:"same"}),r.reduce(s,function(f,c){return o.setEdge(f,c,{style:"invis"}),c})}),o}return Rb}var Fb,FT;function xH(){return FT||(FT=1,Fb="0.8.5"),Fb}var Bb,BT;function SH(){return BT||(BT=1,Bb={graphlib:Ao(),layout:wH(),debug:_H(),util:{time:Da().time,notime:Da().notime},version:xH()}),Bb}(function(r,e){(function(n,i){r.exports=i(SH())})(kt,function(t){return function(n){var i={};function a(o){if(i[o])return i[o].exports;var s=i[o]={i:o,l:!1,exports:{}};return n[o].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=n,a.c=i,a.d=function(o,s,u){a.o(o,s)||Object.defineProperty(o,s,{enumerable:!0,get:u})},a.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},a.t=function(o,s){if(s&1&&(o=a(o)),s&8||s&4&&typeof o=="object"&&o&&o.__esModule)return o;var u=Object.create(null);if(a.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:o}),s&2&&typeof o!="string")for(var l in o)a.d(u,l,(function(f){return o[f]}).bind(null,l));return u},a.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(s,"a",s),s},a.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},a.p="",a(a.s=0)}([function(n,i,a){var o=a(1),s=function(l){l&&l("layout","dagre",o)};typeof cytoscape<"u"&&s(cytoscape),n.exports=s},function(n,i,a){function o(d){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o=function(p){return typeof p}:o=function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},o(d)}var s=function(h){return typeof h=="function"},u=a(2),l=a(3),f=a(4);function c(d){this.options=l({},u,d)}c.prototype.run=function(){var d=this.options,h=this,p=d.cy,g=d.eles,b=function(z,P){return s(P)?P.apply(z,[z]):P},v=d.boundingBox||{x1:0,y1:0,w:p.width(),h:p.height()};v.x2===void 0&&(v.x2=v.x1+v.w),v.w===void 0&&(v.w=v.x2-v.x1),v.y2===void 0&&(v.y2=v.y1+v.h),v.h===void 0&&(v.h=v.y2-v.y1);var y=new f.graphlib.Graph({multigraph:!0,compound:!0}),m={},w=function(z,P){P!=null&&(m[z]=P)};w("nodesep",d.nodeSep),w("edgesep",d.edgeSep),w("ranksep",d.rankSep),w("rankdir",d.rankDir),w("align",d.align),w("ranker",d.ranker),w("acyclicer",d.acyclicer),y.setGraph(m),y.setDefaultEdgeLabel(function(){return{}}),y.setDefaultNodeLabel(function(){return{}});var S=g.nodes();s(d.sort)&&(S=S.sort(d.sort));for(var A=0;A<S.length;A++){var _=S[A],E=_.layoutDimensions(d);y.setNode(_.id(),{width:E.w,height:E.h,name:_.id()})}for(var k=0;k<S.length;k++){var M=S[k];M.isChild()&&y.setParent(M.id(),M.parent().id())}var T=g.edges().stdFilter(function(I){return!I.source().isParent()&&!I.target().isParent()});s(d.sort)&&(T=T.sort(d.sort));for(var C=0;C<T.length;C++){var R=T[C];y.setEdge(R.source().id(),R.target().id(),{minlen:b(R,d.minLen),weight:b(R,d.edgeWeight),name:R.id()},R.id())}f.layout(y);for(var x=y.nodes(),B=0;B<x.length;B++){var D=x[B],O=y.node(D);p.getElementById(D).scratch().dagre=O}var G;d.boundingBox?(G={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0},S.forEach(function(I){var z=I.scratch().dagre;G.x1=Math.min(G.x1,z.x),G.x2=Math.max(G.x2,z.x),G.y1=Math.min(G.y1,z.y),G.y2=Math.max(G.y2,z.y)}),G.w=G.x2-G.x1,G.h=G.y2-G.y1):G=v;var V=function(z){if(d.boundingBox){var P=G.w===0?0:(z.x-G.x1)/G.w,q=G.h===0?0:(z.y-G.y1)/G.h;return{x:v.x1+P*v.w,y:v.y1+q*v.h}}else return z};return S.layoutPositions(h,d,function(I){I=o(I)==="object"?I:this;var z=I.scratch().dagre;return V({x:z.x,y:z.y})}),this},n.exports=c},function(n,i){var a={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,align:void 0,acyclicer:void 0,ranker:void 0,minLen:function(s){return 1},edgeWeight:function(s){return 1},fit:!0,padding:30,spacingFactor:void 0,nodeDimensionsIncludeLabels:!1,animate:!1,animateFilter:function(s,u){return!0},animationDuration:500,animationEasing:void 0,boundingBox:void 0,transform:function(s,u){return u},ready:function(){},sort:void 0,stop:function(){}};n.exports=a},function(n,i){n.exports=Object.assign!=null?Object.assign.bind(Object):function(a){for(var o=arguments.length,s=new Array(o>1?o-1:0),u=1;u<o;u++)s[u-1]=arguments[u];return s.forEach(function(l){Object.keys(l).forEach(function(f){return a[f]=l[f]})}),a}},function(n,i){n.exports=t}])})})(DN);var EH=DN.exports;const CH=qi(EH);var LP={exports:{}},zb={exports:{}},qb={exports:{}},zT;function AH(){return zT||(zT=1,function(r,e){(function(n,i){r.exports=i()})(kt,function(){return function(t){var n={};function i(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=n,i.i=function(a){return a},i.d=function(a,o,s){i.o(a,o)||Object.defineProperty(a,o,{configurable:!1,enumerable:!0,get:s})},i.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(o,"a",o),o},i.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},i.p="",i(i.s=28)}([function(t,n,i){function a(){}a.QUALITY=1,a.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,a.DEFAULT_INCREMENTAL=!1,a.DEFAULT_ANIMATION_ON_LAYOUT=!0,a.DEFAULT_ANIMATION_DURING_LAYOUT=!1,a.DEFAULT_ANIMATION_PERIOD=50,a.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,a.DEFAULT_GRAPH_MARGIN=15,a.NODE_DIMENSIONS_INCLUDE_LABELS=!1,a.SIMPLE_NODE_SIZE=40,a.SIMPLE_NODE_HALF_SIZE=a.SIMPLE_NODE_SIZE/2,a.EMPTY_COMPOUND_NODE_SIZE=40,a.MIN_EDGE_LENGTH=1,a.WORLD_BOUNDARY=1e6,a.INITIAL_WORLD_BOUNDARY=a.WORLD_BOUNDARY/1e3,a.WORLD_CENTER_X=1200,a.WORLD_CENTER_Y=900,t.exports=a},function(t,n,i){var a=i(2),o=i(8),s=i(9);function u(f,c,d){a.call(this,d),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=d,this.bendpoints=[],this.source=f,this.target=c}u.prototype=Object.create(a.prototype);for(var l in a)u[l]=a[l];u.prototype.getSource=function(){return this.source},u.prototype.getTarget=function(){return this.target},u.prototype.isInterGraph=function(){return this.isInterGraph},u.prototype.getLength=function(){return this.length},u.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},u.prototype.getBendpoints=function(){return this.bendpoints},u.prototype.getLca=function(){return this.lca},u.prototype.getSourceInLca=function(){return this.sourceInLca},u.prototype.getTargetInLca=function(){return this.targetInLca},u.prototype.getOtherEnd=function(f){if(this.source===f)return this.target;if(this.target===f)return this.source;throw"Node is not incident with this edge"},u.prototype.getOtherEndInGraph=function(f,c){for(var d=this.getOtherEnd(f),h=c.getGraphManager().getRoot();;){if(d.getOwner()==c)return d;if(d.getOwner()==h)break;d=d.getOwner().getParent()}return null},u.prototype.updateLength=function(){var f=new Array(4);this.isOverlapingSourceAndTarget=o.getIntersection(this.target.getRect(),this.source.getRect(),f),this.isOverlapingSourceAndTarget||(this.lengthX=f[0]-f[2],this.lengthY=f[1]-f[3],Math.abs(this.lengthX)<1&&(this.lengthX=s.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=s.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},u.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=s.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=s.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},t.exports=u},function(t,n,i){function a(o){this.vGraphObject=o}t.exports=a},function(t,n,i){var a=i(2),o=i(10),s=i(13),u=i(0),l=i(16),f=i(5);function c(h,p,g,b){g==null&&b==null&&(b=p),a.call(this,b),h.graphManager!=null&&(h=h.graphManager),this.estimatedSize=o.MIN_VALUE,this.inclusionTreeDepth=o.MAX_VALUE,this.vGraphObject=b,this.edges=[],this.graphManager=h,g!=null&&p!=null?this.rect=new s(p.x,p.y,g.width,g.height):this.rect=new s}c.prototype=Object.create(a.prototype);for(var d in a)c[d]=a[d];c.prototype.getEdges=function(){return this.edges},c.prototype.getChild=function(){return this.child},c.prototype.getOwner=function(){return this.owner},c.prototype.getWidth=function(){return this.rect.width},c.prototype.setWidth=function(h){this.rect.width=h},c.prototype.getHeight=function(){return this.rect.height},c.prototype.setHeight=function(h){this.rect.height=h},c.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},c.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},c.prototype.getCenter=function(){return new f(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},c.prototype.getLocation=function(){return new f(this.rect.x,this.rect.y)},c.prototype.getRect=function(){return this.rect},c.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},c.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},c.prototype.setRect=function(h,p){this.rect.x=h.x,this.rect.y=h.y,this.rect.width=p.width,this.rect.height=p.height},c.prototype.setCenter=function(h,p){this.rect.x=h-this.rect.width/2,this.rect.y=p-this.rect.height/2},c.prototype.setLocation=function(h,p){this.rect.x=h,this.rect.y=p},c.prototype.moveBy=function(h,p){this.rect.x+=h,this.rect.y+=p},c.prototype.getEdgeListToNode=function(h){var p=[],g=this;return g.edges.forEach(function(b){if(b.target==h){if(b.source!=g)throw"Incorrect edge source!";p.push(b)}}),p},c.prototype.getEdgesBetween=function(h){var p=[],g=this;return g.edges.forEach(function(b){if(!(b.source==g||b.target==g))throw"Incorrect edge source and/or target";(b.target==h||b.source==h)&&p.push(b)}),p},c.prototype.getNeighborsList=function(){var h=new Set,p=this;return p.edges.forEach(function(g){if(g.source==p)h.add(g.target);else{if(g.target!=p)throw"Incorrect incidency!";h.add(g.source)}}),h},c.prototype.withChildren=function(){var h=new Set,p,g;if(h.add(this),this.child!=null)for(var b=this.child.getNodes(),v=0;v<b.length;v++)p=b[v],g=p.withChildren(),g.forEach(function(y){h.add(y)});return h},c.prototype.getNoOfChildren=function(){var h=0,p;if(this.child==null)h=1;else for(var g=this.child.getNodes(),b=0;b<g.length;b++)p=g[b],h+=p.getNoOfChildren();return h==0&&(h=1),h},c.prototype.getEstimatedSize=function(){if(this.estimatedSize==o.MIN_VALUE)throw"assert failed";return this.estimatedSize},c.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},c.prototype.scatter=function(){var h,p,g=-u.INITIAL_WORLD_BOUNDARY,b=u.INITIAL_WORLD_BOUNDARY;h=u.WORLD_CENTER_X+l.nextDouble()*(b-g)+g;var v=-u.INITIAL_WORLD_BOUNDARY,y=u.INITIAL_WORLD_BOUNDARY;p=u.WORLD_CENTER_Y+l.nextDouble()*(y-v)+v,this.rect.x=h,this.rect.y=p},c.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var h=this.getChild();if(h.updateBounds(!0),this.rect.x=h.getLeft(),this.rect.y=h.getTop(),this.setWidth(h.getRight()-h.getLeft()),this.setHeight(h.getBottom()-h.getTop()),u.NODE_DIMENSIONS_INCLUDE_LABELS){var p=h.getRight()-h.getLeft(),g=h.getBottom()-h.getTop();this.labelWidth&&(this.labelPosHorizontal=="left"?(this.rect.x-=this.labelWidth,this.setWidth(p+this.labelWidth)):this.labelPosHorizontal=="center"&&this.labelWidth>p?(this.rect.x-=(this.labelWidth-p)/2,this.setWidth(this.labelWidth)):this.labelPosHorizontal=="right"&&this.setWidth(p+this.labelWidth)),this.labelHeight&&(this.labelPosVertical=="top"?(this.rect.y-=this.labelHeight,this.setHeight(g+this.labelHeight)):this.labelPosVertical=="center"&&this.labelHeight>g?(this.rect.y-=(this.labelHeight-g)/2,this.setHeight(this.labelHeight)):this.labelPosVertical=="bottom"&&this.setHeight(g+this.labelHeight))}}},c.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==o.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},c.prototype.transform=function(h){var p=this.rect.x;p>u.WORLD_BOUNDARY?p=u.WORLD_BOUNDARY:p<-u.WORLD_BOUNDARY&&(p=-u.WORLD_BOUNDARY);var g=this.rect.y;g>u.WORLD_BOUNDARY?g=u.WORLD_BOUNDARY:g<-u.WORLD_BOUNDARY&&(g=-u.WORLD_BOUNDARY);var b=new f(p,g),v=h.inverseTransformPoint(b);this.setLocation(v.x,v.y)},c.prototype.getLeft=function(){return this.rect.x},c.prototype.getRight=function(){return this.rect.x+this.rect.width},c.prototype.getTop=function(){return this.rect.y},c.prototype.getBottom=function(){return this.rect.y+this.rect.height},c.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},t.exports=c},function(t,n,i){var a=i(0);function o(){}for(var s in a)o[s]=a[s];o.MAX_ITERATIONS=2500,o.DEFAULT_EDGE_LENGTH=50,o.DEFAULT_SPRING_STRENGTH=.45,o.DEFAULT_REPULSION_STRENGTH=4500,o.DEFAULT_GRAVITY_STRENGTH=.4,o.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,o.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,o.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,o.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,o.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,o.COOLING_ADAPTATION_FACTOR=.33,o.ADAPTATION_LOWER_NODE_LIMIT=1e3,o.ADAPTATION_UPPER_NODE_LIMIT=5e3,o.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,o.MAX_NODE_DISPLACEMENT=o.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,o.MIN_REPULSION_DIST=o.DEFAULT_EDGE_LENGTH/10,o.CONVERGENCE_CHECK_PERIOD=100,o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,o.MIN_EDGE_LENGTH=1,o.GRID_CALCULATION_CHECK_PERIOD=10,t.exports=o},function(t,n,i){function a(o,s){o==null&&s==null?(this.x=0,this.y=0):(this.x=o,this.y=s)}a.prototype.getX=function(){return this.x},a.prototype.getY=function(){return this.y},a.prototype.setX=function(o){this.x=o},a.prototype.setY=function(o){this.y=o},a.prototype.getDifference=function(o){return new DimensionD(this.x-o.x,this.y-o.y)},a.prototype.getCopy=function(){return new a(this.x,this.y)},a.prototype.translate=function(o){return this.x+=o.width,this.y+=o.height,this},t.exports=a},function(t,n,i){var a=i(2),o=i(10),s=i(0),u=i(7),l=i(3),f=i(1),c=i(13),d=i(12),h=i(11);function p(b,v,y){a.call(this,y),this.estimatedSize=o.MIN_VALUE,this.margin=s.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=b,v!=null&&v instanceof u?this.graphManager=v:v!=null&&v instanceof Layout&&(this.graphManager=v.graphManager)}p.prototype=Object.create(a.prototype);for(var g in a)p[g]=a[g];p.prototype.getNodes=function(){return this.nodes},p.prototype.getEdges=function(){return this.edges},p.prototype.getGraphManager=function(){return this.graphManager},p.prototype.getParent=function(){return this.parent},p.prototype.getLeft=function(){return this.left},p.prototype.getRight=function(){return this.right},p.prototype.getTop=function(){return this.top},p.prototype.getBottom=function(){return this.bottom},p.prototype.isConnected=function(){return this.isConnected},p.prototype.add=function(b,v,y){if(v==null&&y==null){var m=b;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(m)>-1)throw"Node already in graph!";return m.owner=this,this.getNodes().push(m),m}else{var w=b;if(!(this.getNodes().indexOf(v)>-1&&this.getNodes().indexOf(y)>-1))throw"Source or target not in graph!";if(!(v.owner==y.owner&&v.owner==this))throw"Both owners must be this graph!";return v.owner!=y.owner?null:(w.source=v,w.target=y,w.isInterGraph=!1,this.getEdges().push(w),v.edges.push(w),y!=v&&y.edges.push(w),w)}},p.prototype.remove=function(b){var v=b;if(b instanceof l){if(v==null)throw"Node is null!";if(!(v.owner!=null&&v.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var y=v.edges.slice(),m,w=y.length,S=0;S<w;S++)m=y[S],m.isInterGraph?this.graphManager.remove(m):m.source.owner.remove(m);var A=this.nodes.indexOf(v);if(A==-1)throw"Node not in owner node list!";this.nodes.splice(A,1)}else if(b instanceof f){var m=b;if(m==null)throw"Edge is null!";if(!(m.source!=null&&m.target!=null))throw"Source and/or target is null!";if(!(m.source.owner!=null&&m.target.owner!=null&&m.source.owner==this&&m.target.owner==this))throw"Source and/or target owner is invalid!";var _=m.source.edges.indexOf(m),E=m.target.edges.indexOf(m);if(!(_>-1&&E>-1))throw"Source and/or target doesn't know this edge!";m.source.edges.splice(_,1),m.target!=m.source&&m.target.edges.splice(E,1);var A=m.source.owner.getEdges().indexOf(m);if(A==-1)throw"Not in owner's edge list!";m.source.owner.getEdges().splice(A,1)}},p.prototype.updateLeftTop=function(){for(var b=o.MAX_VALUE,v=o.MAX_VALUE,y,m,w,S=this.getNodes(),A=S.length,_=0;_<A;_++){var E=S[_];y=E.getTop(),m=E.getLeft(),b>y&&(b=y),v>m&&(v=m)}return b==o.MAX_VALUE?null:(S[0].getParent().paddingLeft!=null?w=S[0].getParent().paddingLeft:w=this.margin,this.left=v-w,this.top=b-w,new d(this.left,this.top))},p.prototype.updateBounds=function(b){for(var v=o.MAX_VALUE,y=-o.MAX_VALUE,m=o.MAX_VALUE,w=-o.MAX_VALUE,S,A,_,E,k,M=this.nodes,T=M.length,C=0;C<T;C++){var R=M[C];b&&R.child!=null&&R.updateBounds(),S=R.getLeft(),A=R.getRight(),_=R.getTop(),E=R.getBottom(),v>S&&(v=S),y<A&&(y=A),m>_&&(m=_),w<E&&(w=E)}var x=new c(v,m,y-v,w-m);v==o.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),M[0].getParent().paddingLeft!=null?k=M[0].getParent().paddingLeft:k=this.margin,this.left=x.x-k,this.right=x.x+x.width+k,this.top=x.y-k,this.bottom=x.y+x.height+k},p.calculateBounds=function(b){for(var v=o.MAX_VALUE,y=-o.MAX_VALUE,m=o.MAX_VALUE,w=-o.MAX_VALUE,S,A,_,E,k=b.length,M=0;M<k;M++){var T=b[M];S=T.getLeft(),A=T.getRight(),_=T.getTop(),E=T.getBottom(),v>S&&(v=S),y<A&&(y=A),m>_&&(m=_),w<E&&(w=E)}var C=new c(v,m,y-v,w-m);return C},p.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},p.prototype.getEstimatedSize=function(){if(this.estimatedSize==o.MIN_VALUE)throw"assert failed";return this.estimatedSize},p.prototype.calcEstimatedSize=function(){for(var b=0,v=this.nodes,y=v.length,m=0;m<y;m++){var w=v[m];b+=w.calcEstimatedSize()}return b==0?this.estimatedSize=s.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=b/Math.sqrt(this.nodes.length),this.estimatedSize},p.prototype.updateConnected=function(){var b=this;if(this.nodes.length==0){this.isConnected=!0;return}var v=new h,y=new Set,m=this.nodes[0],w,S,A=m.withChildren();for(A.forEach(function(C){v.push(C),y.add(C)});v.length!==0;){m=v.shift(),w=m.getEdges();for(var _=w.length,E=0;E<_;E++){var k=w[E];if(S=k.getOtherEndInGraph(m,this),S!=null&&!y.has(S)){var M=S.withChildren();M.forEach(function(C){v.push(C),y.add(C)})}}}if(this.isConnected=!1,y.size>=this.nodes.length){var T=0;y.forEach(function(C){C.owner==b&&T++}),T==this.nodes.length&&(this.isConnected=!0)}},t.exports=p},function(t,n,i){var a,o=i(1);function s(u){a=i(6),this.layout=u,this.graphs=[],this.edges=[]}s.prototype.addRoot=function(){var u=this.layout.newGraph(),l=this.layout.newNode(null),f=this.add(u,l);return this.setRootGraph(f),this.rootGraph},s.prototype.add=function(u,l,f,c,d){if(f==null&&c==null&&d==null){if(u==null)throw"Graph is null!";if(l==null)throw"Parent node is null!";if(this.graphs.indexOf(u)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(u),u.parent!=null)throw"Already has a parent!";if(l.child!=null)throw"Already has a child!";return u.parent=l,l.child=u,u}else{d=f,c=l,f=u;var h=c.getOwner(),p=d.getOwner();if(!(h!=null&&h.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(p!=null&&p.getGraphManager()==this))throw"Target not in this graph mgr!";if(h==p)return f.isInterGraph=!1,h.add(f,c,d);if(f.isInterGraph=!0,f.source=c,f.target=d,this.edges.indexOf(f)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(f),!(f.source!=null&&f.target!=null))throw"Edge source and/or target is null!";if(!(f.source.edges.indexOf(f)==-1&&f.target.edges.indexOf(f)==-1))throw"Edge already in source and/or target incidency list!";return f.source.edges.push(f),f.target.edges.push(f),f}},s.prototype.remove=function(u){if(u instanceof a){var l=u;if(l.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(l==this.rootGraph||l.parent!=null&&l.parent.graphManager==this))throw"Invalid parent node!";var f=[];f=f.concat(l.getEdges());for(var c,d=f.length,h=0;h<d;h++)c=f[h],l.remove(c);var p=[];p=p.concat(l.getNodes());var g;d=p.length;for(var h=0;h<d;h++)g=p[h],l.remove(g);l==this.rootGraph&&this.setRootGraph(null);var b=this.graphs.indexOf(l);this.graphs.splice(b,1),l.parent=null}else if(u instanceof o){if(c=u,c==null)throw"Edge is null!";if(!c.isInterGraph)throw"Not an inter-graph edge!";if(!(c.source!=null&&c.target!=null))throw"Source and/or target is null!";if(!(c.source.edges.indexOf(c)!=-1&&c.target.edges.indexOf(c)!=-1))throw"Source and/or target doesn't know this edge!";var b=c.source.edges.indexOf(c);if(c.source.edges.splice(b,1),b=c.target.edges.indexOf(c),c.target.edges.splice(b,1),!(c.source.owner!=null&&c.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(c.source.owner.getGraphManager().edges.indexOf(c)==-1)throw"Not in owner graph manager's edge list!";var b=c.source.owner.getGraphManager().edges.indexOf(c);c.source.owner.getGraphManager().edges.splice(b,1)}},s.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},s.prototype.getGraphs=function(){return this.graphs},s.prototype.getAllNodes=function(){if(this.allNodes==null){for(var u=[],l=this.getGraphs(),f=l.length,c=0;c<f;c++)u=u.concat(l[c].getNodes());this.allNodes=u}return this.allNodes},s.prototype.resetAllNodes=function(){this.allNodes=null},s.prototype.resetAllEdges=function(){this.allEdges=null},s.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},s.prototype.getAllEdges=function(){if(this.allEdges==null){var u=[],l=this.getGraphs();l.length;for(var f=0;f<l.length;f++)u=u.concat(l[f].getEdges());u=u.concat(this.edges),this.allEdges=u}return this.allEdges},s.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},s.prototype.setAllNodesToApplyGravitation=function(u){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=u},s.prototype.getRoot=function(){return this.rootGraph},s.prototype.setRootGraph=function(u){if(u.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=u,u.parent==null&&(u.parent=this.layout.newNode("Root node"))},s.prototype.getLayout=function(){return this.layout},s.prototype.isOneAncestorOfOther=function(u,l){if(!(u!=null&&l!=null))throw"assert failed";if(u==l)return!0;var f=u.getOwner(),c;do{if(c=f.getParent(),c==null)break;if(c==l)return!0;if(f=c.getOwner(),f==null)break}while(!0);f=l.getOwner();do{if(c=f.getParent(),c==null)break;if(c==u)return!0;if(f=c.getOwner(),f==null)break}while(!0);return!1},s.prototype.calcLowestCommonAncestors=function(){for(var u,l,f,c,d,h=this.getAllEdges(),p=h.length,g=0;g<p;g++){if(u=h[g],l=u.source,f=u.target,u.lca=null,u.sourceInLca=l,u.targetInLca=f,l==f){u.lca=l.getOwner();continue}for(c=l.getOwner();u.lca==null;){for(u.targetInLca=f,d=f.getOwner();u.lca==null;){if(d==c){u.lca=d;break}if(d==this.rootGraph)break;if(u.lca!=null)throw"assert failed";u.targetInLca=d.getParent(),d=u.targetInLca.getOwner()}if(c==this.rootGraph)break;u.lca==null&&(u.sourceInLca=c.getParent(),c=u.sourceInLca.getOwner())}if(u.lca==null)throw"assert failed"}},s.prototype.calcLowestCommonAncestor=function(u,l){if(u==l)return u.getOwner();var f=u.getOwner();do{if(f==null)break;var c=l.getOwner();do{if(c==null)break;if(c==f)return c;c=c.getParent().getOwner()}while(!0);f=f.getParent().getOwner()}while(!0);return f},s.prototype.calcInclusionTreeDepths=function(u,l){u==null&&l==null&&(u=this.rootGraph,l=1);for(var f,c=u.getNodes(),d=c.length,h=0;h<d;h++)f=c[h],f.inclusionTreeDepth=l,f.child!=null&&this.calcInclusionTreeDepths(f.child,l+1)},s.prototype.includesInvalidEdge=function(){for(var u,l=[],f=this.edges.length,c=0;c<f;c++)u=this.edges[c],this.isOneAncestorOfOther(u.source,u.target)&&l.push(u);for(var c=0;c<l.length;c++)this.remove(l[c]);return!1},t.exports=s},function(t,n,i){var a=i(12);function o(){}o.calcSeparationAmount=function(s,u,l,f){if(!s.intersects(u))throw"assert failed";var c=new Array(2);this.decideDirectionsForOverlappingNodes(s,u,c),l[0]=Math.min(s.getRight(),u.getRight())-Math.max(s.x,u.x),l[1]=Math.min(s.getBottom(),u.getBottom())-Math.max(s.y,u.y),s.getX()<=u.getX()&&s.getRight()>=u.getRight()?l[0]+=Math.min(u.getX()-s.getX(),s.getRight()-u.getRight()):u.getX()<=s.getX()&&u.getRight()>=s.getRight()&&(l[0]+=Math.min(s.getX()-u.getX(),u.getRight()-s.getRight())),s.getY()<=u.getY()&&s.getBottom()>=u.getBottom()?l[1]+=Math.min(u.getY()-s.getY(),s.getBottom()-u.getBottom()):u.getY()<=s.getY()&&u.getBottom()>=s.getBottom()&&(l[1]+=Math.min(s.getY()-u.getY(),u.getBottom()-s.getBottom()));var d=Math.abs((u.getCenterY()-s.getCenterY())/(u.getCenterX()-s.getCenterX()));u.getCenterY()===s.getCenterY()&&u.getCenterX()===s.getCenterX()&&(d=1);var h=d*l[0],p=l[1]/d;l[0]<p?p=l[0]:h=l[1],l[0]=-1*c[0]*(p/2+f),l[1]=-1*c[1]*(h/2+f)},o.decideDirectionsForOverlappingNodes=function(s,u,l){s.getCenterX()<u.getCenterX()?l[0]=-1:l[0]=1,s.getCenterY()<u.getCenterY()?l[1]=-1:l[1]=1},o.getIntersection2=function(s,u,l){var f=s.getCenterX(),c=s.getCenterY(),d=u.getCenterX(),h=u.getCenterY();if(s.intersects(u))return l[0]=f,l[1]=c,l[2]=d,l[3]=h,!0;var p=s.getX(),g=s.getY(),b=s.getRight(),v=s.getX(),y=s.getBottom(),m=s.getRight(),w=s.getWidthHalf(),S=s.getHeightHalf(),A=u.getX(),_=u.getY(),E=u.getRight(),k=u.getX(),M=u.getBottom(),T=u.getRight(),C=u.getWidthHalf(),R=u.getHeightHalf(),x=!1,B=!1;if(f===d){if(c>h)return l[0]=f,l[1]=g,l[2]=d,l[3]=M,!1;if(c<h)return l[0]=f,l[1]=y,l[2]=d,l[3]=_,!1}else if(c===h){if(f>d)return l[0]=p,l[1]=c,l[2]=E,l[3]=h,!1;if(f<d)return l[0]=b,l[1]=c,l[2]=A,l[3]=h,!1}else{var D=s.height/s.width,O=u.height/u.width,G=(h-c)/(d-f),V=void 0,I=void 0,z=void 0,P=void 0,q=void 0,F=void 0;if(-D===G?f>d?(l[0]=v,l[1]=y,x=!0):(l[0]=b,l[1]=g,x=!0):D===G&&(f>d?(l[0]=p,l[1]=g,x=!0):(l[0]=m,l[1]=y,x=!0)),-O===G?d>f?(l[2]=k,l[3]=M,B=!0):(l[2]=E,l[3]=_,B=!0):O===G&&(d>f?(l[2]=A,l[3]=_,B=!0):(l[2]=T,l[3]=M,B=!0)),x&&B)return!1;if(f>d?c>h?(V=this.getCardinalDirection(D,G,4),I=this.getCardinalDirection(O,G,2)):(V=this.getCardinalDirection(-D,G,3),I=this.getCardinalDirection(-O,G,1)):c>h?(V=this.getCardinalDirection(-D,G,1),I=this.getCardinalDirection(-O,G,3)):(V=this.getCardinalDirection(D,G,2),I=this.getCardinalDirection(O,G,4)),!x)switch(V){case 1:P=g,z=f+-S/G,l[0]=z,l[1]=P;break;case 2:z=m,P=c+w*G,l[0]=z,l[1]=P;break;case 3:P=y,z=f+S/G,l[0]=z,l[1]=P;break;case 4:z=v,P=c+-w*G,l[0]=z,l[1]=P;break}if(!B)switch(I){case 1:F=_,q=d+-R/G,l[2]=q,l[3]=F;break;case 2:q=T,F=h+C*G,l[2]=q,l[3]=F;break;case 3:F=M,q=d+R/G,l[2]=q,l[3]=F;break;case 4:q=k,F=h+-C*G,l[2]=q,l[3]=F;break}}return!1},o.getCardinalDirection=function(s,u,l){return s>u?l:1+l%4},o.getIntersection=function(s,u,l,f){if(f==null)return this.getIntersection2(s,u,l);var c=s.x,d=s.y,h=u.x,p=u.y,g=l.x,b=l.y,v=f.x,y=f.y,m=void 0,w=void 0,S=void 0,A=void 0,_=void 0,E=void 0,k=void 0,M=void 0,T=void 0;return S=p-d,_=c-h,k=h*d-c*p,A=y-b,E=g-v,M=v*b-g*y,T=S*E-A*_,T===0?null:(m=(_*M-E*k)/T,w=(A*k-S*M)/T,new a(m,w))},o.angleOfVector=function(s,u,l,f){var c=void 0;return s!==l?(c=Math.atan((f-u)/(l-s)),l<s?c+=Math.PI:f<u&&(c+=this.TWO_PI)):f<u?c=this.ONE_AND_HALF_PI:c=this.HALF_PI,c},o.doIntersect=function(s,u,l,f){var c=s.x,d=s.y,h=u.x,p=u.y,g=l.x,b=l.y,v=f.x,y=f.y,m=(h-c)*(y-b)-(v-g)*(p-d);if(m===0)return!1;var w=((y-b)*(v-c)+(g-v)*(y-d))/m,S=((d-p)*(v-c)+(h-c)*(y-d))/m;return 0<w&&w<1&&0<S&&S<1},o.findCircleLineIntersections=function(s,u,l,f,c,d,h){var p=(l-s)*(l-s)+(f-u)*(f-u),g=2*((s-c)*(l-s)+(u-d)*(f-u)),b=(s-c)*(s-c)+(u-d)*(u-d)-h*h,v=g*g-4*p*b;if(v>=0){var y=(-g+Math.sqrt(g*g-4*p*b))/(2*p),m=(-g-Math.sqrt(g*g-4*p*b))/(2*p),w=null;return y>=0&&y<=1?[y]:m>=0&&m<=1?[m]:w}else return null},o.HALF_PI=.5*Math.PI,o.ONE_AND_HALF_PI=1.5*Math.PI,o.TWO_PI=2*Math.PI,o.THREE_PI=3*Math.PI,t.exports=o},function(t,n,i){function a(){}a.sign=function(o){return o>0?1:o<0?-1:0},a.floor=function(o){return o<0?Math.ceil(o):Math.floor(o)},a.ceil=function(o){return o<0?Math.floor(o):Math.ceil(o)},t.exports=a},function(t,n,i){function a(){}a.MAX_VALUE=2147483647,a.MIN_VALUE=-2147483648,t.exports=a},function(t,n,i){var a=function(){function c(d,h){for(var p=0;p<h.length;p++){var g=h[p];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(d,g.key,g)}}return function(d,h,p){return h&&c(d.prototype,h),p&&c(d,p),d}}();function o(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}var s=function(d){return{value:d,next:null,prev:null}},u=function(d,h,p,g){return d!==null?d.next=h:g.head=h,p!==null?p.prev=h:g.tail=h,h.prev=d,h.next=p,g.length++,h},l=function(d,h){var p=d.prev,g=d.next;return p!==null?p.next=g:h.head=g,g!==null?g.prev=p:h.tail=p,d.prev=d.next=null,h.length--,d},f=function(){function c(d){var h=this;o(this,c),this.length=0,this.head=null,this.tail=null,d!=null&&d.forEach(function(p){return h.push(p)})}return a(c,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(h,p){return u(p.prev,s(h),p,this)}},{key:"insertAfter",value:function(h,p){return u(p,s(h),p.next,this)}},{key:"insertNodeBefore",value:function(h,p){return u(p.prev,h,p,this)}},{key:"insertNodeAfter",value:function(h,p){return u(p,h,p.next,this)}},{key:"push",value:function(h){return u(this.tail,s(h),null,this)}},{key:"unshift",value:function(h){return u(null,s(h),this.head,this)}},{key:"remove",value:function(h){return l(h,this)}},{key:"pop",value:function(){return l(this.tail,this).value}},{key:"popNode",value:function(){return l(this.tail,this)}},{key:"shift",value:function(){return l(this.head,this).value}},{key:"shiftNode",value:function(){return l(this.head,this)}},{key:"get_object_at",value:function(h){if(h<=this.length()){for(var p=1,g=this.head;p<h;)g=g.next,p++;return g.value}}},{key:"set_object_at",value:function(h,p){if(h<=this.length()){for(var g=1,b=this.head;g<h;)b=b.next,g++;b.value=p}}}]),c}();t.exports=f},function(t,n,i){function a(o,s,u){this.x=null,this.y=null,o==null&&s==null&&u==null?(this.x=0,this.y=0):typeof o=="number"&&typeof s=="number"&&u==null?(this.x=o,this.y=s):o.constructor.name=="Point"&&s==null&&u==null&&(u=o,this.x=u.x,this.y=u.y)}a.prototype.getX=function(){return this.x},a.prototype.getY=function(){return this.y},a.prototype.getLocation=function(){return new a(this.x,this.y)},a.prototype.setLocation=function(o,s,u){o.constructor.name=="Point"&&s==null&&u==null?(u=o,this.setLocation(u.x,u.y)):typeof o=="number"&&typeof s=="number"&&u==null&&(parseInt(o)==o&&parseInt(s)==s?this.move(o,s):(this.x=Math.floor(o+.5),this.y=Math.floor(s+.5)))},a.prototype.move=function(o,s){this.x=o,this.y=s},a.prototype.translate=function(o,s){this.x+=o,this.y+=s},a.prototype.equals=function(o){if(o.constructor.name=="Point"){var s=o;return this.x==s.x&&this.y==s.y}return this==o},a.prototype.toString=function(){return new a().constructor.name+"[x="+this.x+",y="+this.y+"]"},t.exports=a},function(t,n,i){function a(o,s,u,l){this.x=0,this.y=0,this.width=0,this.height=0,o!=null&&s!=null&&u!=null&&l!=null&&(this.x=o,this.y=s,this.width=u,this.height=l)}a.prototype.getX=function(){return this.x},a.prototype.setX=function(o){this.x=o},a.prototype.getY=function(){return this.y},a.prototype.setY=function(o){this.y=o},a.prototype.getWidth=function(){return this.width},a.prototype.setWidth=function(o){this.width=o},a.prototype.getHeight=function(){return this.height},a.prototype.setHeight=function(o){this.height=o},a.prototype.getRight=function(){return this.x+this.width},a.prototype.getBottom=function(){return this.y+this.height},a.prototype.intersects=function(o){return!(this.getRight()<o.x||this.getBottom()<o.y||o.getRight()<this.x||o.getBottom()<this.y)},a.prototype.getCenterX=function(){return this.x+this.width/2},a.prototype.getMinX=function(){return this.getX()},a.prototype.getMaxX=function(){return this.getX()+this.width},a.prototype.getCenterY=function(){return this.y+this.height/2},a.prototype.getMinY=function(){return this.getY()},a.prototype.getMaxY=function(){return this.getY()+this.height},a.prototype.getWidthHalf=function(){return this.width/2},a.prototype.getHeightHalf=function(){return this.height/2},t.exports=a},function(t,n,i){var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s};function o(){}o.lastID=0,o.createID=function(s){return o.isPrimitive(s)?s:(s.uniqueID!=null||(s.uniqueID=o.getString(),o.lastID++),s.uniqueID)},o.getString=function(s){return s==null&&(s=o.lastID),"Object#"+s},o.isPrimitive=function(s){var u=typeof s>"u"?"undefined":a(s);return s==null||u!="object"&&u!="function"},t.exports=o},function(t,n,i){function a(g){if(Array.isArray(g)){for(var b=0,v=Array(g.length);b<g.length;b++)v[b]=g[b];return v}else return Array.from(g)}var o=i(0),s=i(7),u=i(3),l=i(1),f=i(6),c=i(5),d=i(17),h=i(29);function p(g){h.call(this),this.layoutQuality=o.QUALITY,this.createBendsAsNeeded=o.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=o.DEFAULT_INCREMENTAL,this.animationOnLayout=o.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=o.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=o.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=o.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new s(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,g!=null&&(this.isRemoteUse=g)}p.RANDOM_SEED=1,p.prototype=Object.create(h.prototype),p.prototype.getGraphManager=function(){return this.graphManager},p.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},p.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},p.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},p.prototype.newGraphManager=function(){var g=new s(this);return this.graphManager=g,g},p.prototype.newGraph=function(g){return new f(null,this.graphManager,g)},p.prototype.newNode=function(g){return new u(this.graphManager,g)},p.prototype.newEdge=function(g){return new l(null,null,g)},p.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},p.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var g;return this.checkLayoutSuccess()?g=!1:g=this.layout(),o.ANIMATE==="during"?!1:(g&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,g)},p.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},p.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var g=this.graphManager.getAllEdges(),b=0;b<g.length;b++)g[b];for(var v=this.graphManager.getRoot().getNodes(),b=0;b<v.length;b++)v[b];this.update(this.graphManager.getRoot())}},p.prototype.update=function(g){if(g==null)this.update2();else if(g instanceof u){var b=g;if(b.getChild()!=null)for(var v=b.getChild().getNodes(),y=0;y<v.length;y++)update(v[y]);if(b.vGraphObject!=null){var m=b.vGraphObject;m.update(b)}}else if(g instanceof l){var w=g;if(w.vGraphObject!=null){var S=w.vGraphObject;S.update(w)}}else if(g instanceof f){var A=g;if(A.vGraphObject!=null){var _=A.vGraphObject;_.update(A)}}},p.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=o.QUALITY,this.animationDuringLayout=o.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=o.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=o.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=o.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=o.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=o.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},p.prototype.transform=function(g){if(g==null)this.transform(new c(0,0));else{var b=new d,v=this.graphManager.getRoot().updateLeftTop();if(v!=null){b.setWorldOrgX(g.x),b.setWorldOrgY(g.y),b.setDeviceOrgX(v.x),b.setDeviceOrgY(v.y);for(var y=this.getAllNodes(),m,w=0;w<y.length;w++)m=y[w],m.transform(b)}}},p.prototype.positionNodesRandomly=function(g){if(g==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var b,v,y=g.getNodes(),m=0;m<y.length;m++)b=y[m],v=b.getChild(),v==null||v.getNodes().length==0?b.scatter():(this.positionNodesRandomly(v),b.updateBounds())},p.prototype.getFlatForest=function(){for(var g=[],b=!0,v=this.graphManager.getRoot().getNodes(),y=!0,m=0;m<v.length;m++)v[m].getChild()!=null&&(y=!1);if(!y)return g;var w=new Set,S=[],A=new Map,_=[];for(_=_.concat(v);_.length>0&&b;){for(S.push(_[0]);S.length>0&&b;){var E=S[0];S.splice(0,1),w.add(E);for(var k=E.getEdges(),m=0;m<k.length;m++){var M=k[m].getOtherEnd(E);if(A.get(E)!=M)if(!w.has(M))S.push(M),A.set(M,E);else{b=!1;break}}}if(!b)g=[];else{var T=[].concat(a(w));g.push(T);for(var m=0;m<T.length;m++){var C=T[m],R=_.indexOf(C);R>-1&&_.splice(R,1)}w=new Set,A=new Map}}return g},p.prototype.createDummyNodesForBendpoints=function(g){for(var b=[],v=g.source,y=this.graphManager.calcLowestCommonAncestor(g.source,g.target),m=0;m<g.bendpoints.length;m++){var w=this.newNode(null);w.setRect(new Point(0,0),new Dimension(1,1)),y.add(w);var S=this.newEdge(null);this.graphManager.add(S,v,w),b.add(w),v=w}var S=this.newEdge(null);return this.graphManager.add(S,v,g.target),this.edgeToDummyNodes.set(g,b),g.isInterGraph()?this.graphManager.remove(g):y.remove(g),b},p.prototype.createBendpointsFromDummyNodes=function(){var g=[];g=g.concat(this.graphManager.getAllEdges()),g=[].concat(a(this.edgeToDummyNodes.keys())).concat(g);for(var b=0;b<g.length;b++){var v=g[b];if(v.bendpoints.length>0){for(var y=this.edgeToDummyNodes.get(v),m=0;m<y.length;m++){var w=y[m],S=new c(w.getCenterX(),w.getCenterY()),A=v.bendpoints.get(m);A.x=S.x,A.y=S.y,w.getOwner().remove(w)}this.graphManager.add(v,v.source,v.target)}}},p.transform=function(g,b,v,y){if(v!=null&&y!=null){var m=b;if(g<=50){var w=b/v;m-=(b-w)/50*(50-g)}else{var S=b*y;m+=(S-b)/50*(g-50)}return m}else{var A,_;return g<=50?(A=9*b/500,_=b/10):(A=9*b/50,_=-8*b),A*g+_}},p.findCenterOfTree=function(g){var b=[];b=b.concat(g);var v=[],y=new Map,m=!1,w=null;(b.length==1||b.length==2)&&(m=!0,w=b[0]);for(var S=0;S<b.length;S++){var A=b[S],_=A.getNeighborsList().size;y.set(A,A.getNeighborsList().size),_==1&&v.push(A)}var E=[];for(E=E.concat(v);!m;){var k=[];k=k.concat(E),E=[];for(var S=0;S<b.length;S++){var A=b[S],M=b.indexOf(A);M>=0&&b.splice(M,1);var T=A.getNeighborsList();T.forEach(function(x){if(v.indexOf(x)<0){var B=y.get(x),D=B-1;D==1&&E.push(x),y.set(x,D)}})}v=v.concat(E),(b.length==1||b.length==2)&&(m=!0,w=b[0])}return w},p.prototype.setGraphManager=function(g){this.graphManager=g},t.exports=p},function(t,n,i){function a(){}a.seed=1,a.x=0,a.nextDouble=function(){return a.x=Math.sin(a.seed++)*1e4,a.x-Math.floor(a.x)},t.exports=a},function(t,n,i){var a=i(5);function o(s,u){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}o.prototype.getWorldOrgX=function(){return this.lworldOrgX},o.prototype.setWorldOrgX=function(s){this.lworldOrgX=s},o.prototype.getWorldOrgY=function(){return this.lworldOrgY},o.prototype.setWorldOrgY=function(s){this.lworldOrgY=s},o.prototype.getWorldExtX=function(){return this.lworldExtX},o.prototype.setWorldExtX=function(s){this.lworldExtX=s},o.prototype.getWorldExtY=function(){return this.lworldExtY},o.prototype.setWorldExtY=function(s){this.lworldExtY=s},o.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},o.prototype.setDeviceOrgX=function(s){this.ldeviceOrgX=s},o.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},o.prototype.setDeviceOrgY=function(s){this.ldeviceOrgY=s},o.prototype.getDeviceExtX=function(){return this.ldeviceExtX},o.prototype.setDeviceExtX=function(s){this.ldeviceExtX=s},o.prototype.getDeviceExtY=function(){return this.ldeviceExtY},o.prototype.setDeviceExtY=function(s){this.ldeviceExtY=s},o.prototype.transformX=function(s){var u=0,l=this.lworldExtX;return l!=0&&(u=this.ldeviceOrgX+(s-this.lworldOrgX)*this.ldeviceExtX/l),u},o.prototype.transformY=function(s){var u=0,l=this.lworldExtY;return l!=0&&(u=this.ldeviceOrgY+(s-this.lworldOrgY)*this.ldeviceExtY/l),u},o.prototype.inverseTransformX=function(s){var u=0,l=this.ldeviceExtX;return l!=0&&(u=this.lworldOrgX+(s-this.ldeviceOrgX)*this.lworldExtX/l),u},o.prototype.inverseTransformY=function(s){var u=0,l=this.ldeviceExtY;return l!=0&&(u=this.lworldOrgY+(s-this.ldeviceOrgY)*this.lworldExtY/l),u},o.prototype.inverseTransformPoint=function(s){var u=new a(this.inverseTransformX(s.x),this.inverseTransformY(s.y));return u},t.exports=o},function(t,n,i){function a(h){if(Array.isArray(h)){for(var p=0,g=Array(h.length);p<h.length;p++)g[p]=h[p];return g}else return Array.from(h)}var o=i(15),s=i(4),u=i(0),l=i(8),f=i(9);function c(){o.call(this),this.useSmartIdealEdgeLengthCalculation=s.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=s.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=s.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=s.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*s.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=s.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=s.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=s.MAX_ITERATIONS}c.prototype=Object.create(o.prototype);for(var d in o)c[d]=o[d];c.prototype.initParameters=function(){o.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=s.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},c.prototype.calcIdealEdgeLengths=function(){for(var h,p,g,b,v,y,m,w=this.getGraphManager().getAllEdges(),S=0;S<w.length;S++)h=w[S],p=h.idealLength,h.isInterGraph&&(b=h.getSource(),v=h.getTarget(),y=h.getSourceInLca().getEstimatedSize(),m=h.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(h.idealLength+=y+m-2*u.SIMPLE_NODE_SIZE),g=h.getLca().getInclusionTreeDepth(),h.idealLength+=p*s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(b.getInclusionTreeDepth()+v.getInclusionTreeDepth()-2*g))},c.prototype.initSpringEmbedder=function(){var h=this.getAllNodes().length;this.incremental?(h>s.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*s.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(h-s.ADAPTATION_LOWER_NODE_LIMIT)/(s.ADAPTATION_UPPER_NODE_LIMIT-s.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-s.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=s.MAX_NODE_DISPLACEMENT_INCREMENTAL):(h>s.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(s.COOLING_ADAPTATION_FACTOR,1-(h-s.ADAPTATION_LOWER_NODE_LIMIT)/(s.ADAPTATION_UPPER_NODE_LIMIT-s.ADAPTATION_LOWER_NODE_LIMIT)*(1-s.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=s.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.displacementThresholdPerNode=3*s.DEFAULT_EDGE_LENGTH/100,this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},c.prototype.calcSpringForces=function(){for(var h=this.getAllEdges(),p,g=0;g<h.length;g++)p=h[g],this.calcSpringForce(p,p.idealLength)},c.prototype.calcRepulsionForces=function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,g,b,v,y,m=this.getAllNodes(),w;if(this.useFRGridVariant)for(this.totalIterations%s.GRID_CALCULATION_CHECK_PERIOD==1&&h&&this.updateGrid(),w=new Set,g=0;g<m.length;g++)v=m[g],this.calculateRepulsionForceOfANode(v,w,h,p),w.add(v);else for(g=0;g<m.length;g++)for(v=m[g],b=g+1;b<m.length;b++)y=m[b],v.getOwner()==y.getOwner()&&this.calcRepulsionForce(v,y)},c.prototype.calcGravitationalForces=function(){for(var h,p=this.getAllNodesToApplyGravitation(),g=0;g<p.length;g++)h=p[g],this.calcGravitationalForce(h)},c.prototype.moveNodes=function(){for(var h=this.getAllNodes(),p,g=0;g<h.length;g++)p=h[g],p.move()},c.prototype.calcSpringForce=function(h,p){var g=h.getSource(),b=h.getTarget(),v,y,m,w;if(this.uniformLeafNodeSizes&&g.getChild()==null&&b.getChild()==null)h.updateLengthSimple();else if(h.updateLength(),h.isOverlapingSourceAndTarget)return;v=h.getLength(),v!=0&&(y=h.edgeElasticity*(v-p),m=y*(h.lengthX/v),w=y*(h.lengthY/v),g.springForceX+=m,g.springForceY+=w,b.springForceX-=m,b.springForceY-=w)},c.prototype.calcRepulsionForce=function(h,p){var g=h.getRect(),b=p.getRect(),v=new Array(2),y=new Array(4),m,w,S,A,_,E,k;if(g.intersects(b)){l.calcSeparationAmount(g,b,v,s.DEFAULT_EDGE_LENGTH/2),E=2*v[0],k=2*v[1];var M=h.noOfChildren*p.noOfChildren/(h.noOfChildren+p.noOfChildren);h.repulsionForceX-=M*E,h.repulsionForceY-=M*k,p.repulsionForceX+=M*E,p.repulsionForceY+=M*k}else this.uniformLeafNodeSizes&&h.getChild()==null&&p.getChild()==null?(m=b.getCenterX()-g.getCenterX(),w=b.getCenterY()-g.getCenterY()):(l.getIntersection(g,b,y),m=y[2]-y[0],w=y[3]-y[1]),Math.abs(m)<s.MIN_REPULSION_DIST&&(m=f.sign(m)*s.MIN_REPULSION_DIST),Math.abs(w)<s.MIN_REPULSION_DIST&&(w=f.sign(w)*s.MIN_REPULSION_DIST),S=m*m+w*w,A=Math.sqrt(S),_=(h.nodeRepulsion/2+p.nodeRepulsion/2)*h.noOfChildren*p.noOfChildren/S,E=_*m/A,k=_*w/A,h.repulsionForceX-=E,h.repulsionForceY-=k,p.repulsionForceX+=E,p.repulsionForceY+=k},c.prototype.calcGravitationalForce=function(h){var p,g,b,v,y,m,w,S;p=h.getOwner(),g=(p.getRight()+p.getLeft())/2,b=(p.getTop()+p.getBottom())/2,v=h.getCenterX()-g,y=h.getCenterY()-b,m=Math.abs(v)+h.getWidth()/2,w=Math.abs(y)+h.getHeight()/2,h.getOwner()==this.graphManager.getRoot()?(S=p.getEstimatedSize()*this.gravityRangeFactor,(m>S||w>S)&&(h.gravitationForceX=-this.gravityConstant*v,h.gravitationForceY=-this.gravityConstant*y)):(S=p.getEstimatedSize()*this.compoundGravityRangeFactor,(m>S||w>S)&&(h.gravitationForceX=-this.gravityConstant*v*this.compoundGravityConstant,h.gravitationForceY=-this.gravityConstant*y*this.compoundGravityConstant))},c.prototype.isConverged=function(){var h,p=!1;return this.totalIterations>this.maxIterations/3&&(p=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),h=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,h||p},c.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},c.prototype.calcNoOfChildrenForAllNodes=function(){for(var h,p=this.graphManager.getAllNodes(),g=0;g<p.length;g++)h=p[g],h.noOfChildren=h.getNoOfChildren()},c.prototype.calcGrid=function(h){var p=0,g=0;p=parseInt(Math.ceil((h.getRight()-h.getLeft())/this.repulsionRange)),g=parseInt(Math.ceil((h.getBottom()-h.getTop())/this.repulsionRange));for(var b=new Array(p),v=0;v<p;v++)b[v]=new Array(g);for(var v=0;v<p;v++)for(var y=0;y<g;y++)b[v][y]=new Array;return b},c.prototype.addNodeToGrid=function(h,p,g){var b=0,v=0,y=0,m=0;b=parseInt(Math.floor((h.getRect().x-p)/this.repulsionRange)),v=parseInt(Math.floor((h.getRect().width+h.getRect().x-p)/this.repulsionRange)),y=parseInt(Math.floor((h.getRect().y-g)/this.repulsionRange)),m=parseInt(Math.floor((h.getRect().height+h.getRect().y-g)/this.repulsionRange));for(var w=b;w<=v;w++)for(var S=y;S<=m;S++)this.grid[w][S].push(h),h.setGridCoordinates(b,v,y,m)},c.prototype.updateGrid=function(){var h,p,g=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),h=0;h<g.length;h++)p=g[h],this.addNodeToGrid(p,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},c.prototype.calculateRepulsionForceOfANode=function(h,p,g,b){if(this.totalIterations%s.GRID_CALCULATION_CHECK_PERIOD==1&&g||b){var v=new Set;h.surrounding=new Array;for(var y,m=this.grid,w=h.startX-1;w<h.finishX+2;w++)for(var S=h.startY-1;S<h.finishY+2;S++)if(!(w<0||S<0||w>=m.length||S>=m[0].length)){for(var A=0;A<m[w][S].length;A++)if(y=m[w][S][A],!(h.getOwner()!=y.getOwner()||h==y)&&!p.has(y)&&!v.has(y)){var _=Math.abs(h.getCenterX()-y.getCenterX())-(h.getWidth()/2+y.getWidth()/2),E=Math.abs(h.getCenterY()-y.getCenterY())-(h.getHeight()/2+y.getHeight()/2);_<=this.repulsionRange&&E<=this.repulsionRange&&v.add(y)}}h.surrounding=[].concat(a(v))}for(w=0;w<h.surrounding.length;w++)this.calcRepulsionForce(h,h.surrounding[w])},c.prototype.calcRepulsionRange=function(){return 0},t.exports=c},function(t,n,i){var a=i(1),o=i(4);function s(l,f,c){a.call(this,l,f,c),this.idealLength=o.DEFAULT_EDGE_LENGTH,this.edgeElasticity=o.DEFAULT_SPRING_STRENGTH}s.prototype=Object.create(a.prototype);for(var u in a)s[u]=a[u];t.exports=s},function(t,n,i){var a=i(3),o=i(4);function s(l,f,c,d){a.call(this,l,f,c,d),this.nodeRepulsion=o.DEFAULT_REPULSION_STRENGTH,this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}s.prototype=Object.create(a.prototype);for(var u in a)s[u]=a[u];s.prototype.setGridCoordinates=function(l,f,c,d){this.startX=l,this.finishX=f,this.startY=c,this.finishY=d},t.exports=s},function(t,n,i){function a(o,s){this.width=0,this.height=0,o!==null&&s!==null&&(this.height=s,this.width=o)}a.prototype.getWidth=function(){return this.width},a.prototype.setWidth=function(o){this.width=o},a.prototype.getHeight=function(){return this.height},a.prototype.setHeight=function(o){this.height=o},t.exports=a},function(t,n,i){var a=i(14);function o(){this.map={},this.keys=[]}o.prototype.put=function(s,u){var l=a.createID(s);this.contains(l)||(this.map[l]=u,this.keys.push(s))},o.prototype.contains=function(s){return a.createID(s),this.map[s]!=null},o.prototype.get=function(s){var u=a.createID(s);return this.map[u]},o.prototype.keySet=function(){return this.keys},t.exports=o},function(t,n,i){var a=i(14);function o(){this.set={}}o.prototype.add=function(s){var u=a.createID(s);this.contains(u)||(this.set[u]=s)},o.prototype.remove=function(s){delete this.set[a.createID(s)]},o.prototype.clear=function(){this.set={}},o.prototype.contains=function(s){return this.set[a.createID(s)]==s},o.prototype.isEmpty=function(){return this.size()===0},o.prototype.size=function(){return Object.keys(this.set).length},o.prototype.addAllTo=function(s){for(var u=Object.keys(this.set),l=u.length,f=0;f<l;f++)s.push(this.set[u[f]])},o.prototype.size=function(){return Object.keys(this.set).length},o.prototype.addAll=function(s){for(var u=s.length,l=0;l<u;l++){var f=s[l];this.add(f)}},t.exports=o},function(t,n,i){function a(){}a.multMat=function(o,s){for(var u=[],l=0;l<o.length;l++){u[l]=[];for(var f=0;f<s[0].length;f++){u[l][f]=0;for(var c=0;c<o[0].length;c++)u[l][f]+=o[l][c]*s[c][f]}}return u},a.transpose=function(o){for(var s=[],u=0;u<o[0].length;u++){s[u]=[];for(var l=0;l<o.length;l++)s[u][l]=o[l][u]}return s},a.multCons=function(o,s){for(var u=[],l=0;l<o.length;l++)u[l]=o[l]*s;return u},a.minusOp=function(o,s){for(var u=[],l=0;l<o.length;l++)u[l]=o[l]-s[l];return u},a.dotProduct=function(o,s){for(var u=0,l=0;l<o.length;l++)u+=o[l]*s[l];return u},a.mag=function(o){return Math.sqrt(this.dotProduct(o,o))},a.normalize=function(o){for(var s=[],u=this.mag(o),l=0;l<o.length;l++)s[l]=o[l]/u;return s},a.multGamma=function(o){for(var s=[],u=0,l=0;l<o.length;l++)u+=o[l];u*=-1/o.length;for(var f=0;f<o.length;f++)s[f]=u+o[f];return s},a.multL=function(o,s,u){for(var l=[],f=[],c=[],d=0;d<s[0].length;d++){for(var h=0,p=0;p<s.length;p++)h+=-.5*s[p][d]*o[p];f[d]=h}for(var g=0;g<u.length;g++){for(var b=0,v=0;v<u.length;v++)b+=u[g][v]*f[v];c[g]=b}for(var y=0;y<s.length;y++){for(var m=0,w=0;w<s[0].length;w++)m+=s[y][w]*c[w];l[y]=m}return l},t.exports=a},function(t,n,i){var a=function(){function l(f,c){for(var d=0;d<c.length;d++){var h=c[d];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(f,h.key,h)}}return function(f,c,d){return c&&l(f.prototype,c),d&&l(f,d),f}}();function o(l,f){if(!(l instanceof f))throw new TypeError("Cannot call a class as a function")}var s=i(11),u=function(){function l(f,c){o(this,l),(c!==null||c!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var d=void 0;f instanceof s?d=f.size():d=f.length,this._quicksort(f,0,d-1)}return a(l,[{key:"_quicksort",value:function(c,d,h){if(d<h){var p=this._partition(c,d,h);this._quicksort(c,d,p),this._quicksort(c,p+1,h)}}},{key:"_partition",value:function(c,d,h){for(var p=this._get(c,d),g=d,b=h;;){for(;this.compareFunction(p,this._get(c,b));)b--;for(;this.compareFunction(this._get(c,g),p);)g++;if(g<b)this._swap(c,g,b),g++,b--;else return b}}},{key:"_get",value:function(c,d){return c instanceof s?c.get_object_at(d):c[d]}},{key:"_set",value:function(c,d,h){c instanceof s?c.set_object_at(d,h):c[d]=h}},{key:"_swap",value:function(c,d,h){var p=this._get(c,d);this._set(c,d,this._get(c,h)),this._set(c,h,p)}},{key:"_defaultCompareFunction",value:function(c,d){return d>c}}]),l}();t.exports=u},function(t,n,i){function a(){}a.svd=function(o){this.U=null,this.V=null,this.s=null,this.m=0,this.n=0,this.m=o.length,this.n=o[0].length;var s=Math.min(this.m,this.n);this.s=function(Rt){for(var Bt=[];Rt-- >0;)Bt.push(0);return Bt}(Math.min(this.m+1,this.n)),this.U=function(Rt){var Bt=function ur(nt){if(nt.length==0)return 0;for(var Xe=[],ct=0;ct<nt[0];ct++)Xe.push(ur(nt.slice(1)));return Xe};return Bt(Rt)}([this.m,s]),this.V=function(Rt){var Bt=function ur(nt){if(nt.length==0)return 0;for(var Xe=[],ct=0;ct<nt[0];ct++)Xe.push(ur(nt.slice(1)));return Xe};return Bt(Rt)}([this.n,this.n]);for(var u=function(Rt){for(var Bt=[];Rt-- >0;)Bt.push(0);return Bt}(this.n),l=function(Rt){for(var Bt=[];Rt-- >0;)Bt.push(0);return Bt}(this.m),f=!0,c=Math.min(this.m-1,this.n),d=Math.max(0,Math.min(this.n-2,this.m)),h=0;h<Math.max(c,d);h++){if(h<c){this.s[h]=0;for(var p=h;p<this.m;p++)this.s[h]=a.hypot(this.s[h],o[p][h]);if(this.s[h]!==0){o[h][h]<0&&(this.s[h]=-this.s[h]);for(var g=h;g<this.m;g++)o[g][h]/=this.s[h];o[h][h]+=1}this.s[h]=-this.s[h]}for(var b=h+1;b<this.n;b++){if(function(Rt,Bt){return Rt&&Bt}(h<c,this.s[h]!==0)){for(var v=0,y=h;y<this.m;y++)v+=o[y][h]*o[y][b];v=-v/o[h][h];for(var m=h;m<this.m;m++)o[m][b]+=v*o[m][h]}u[b]=o[h][b]}if(function(Rt,Bt){return Rt&&Bt}(f,h<c))for(var w=h;w<this.m;w++)this.U[w][h]=o[w][h];if(h<d){u[h]=0;for(var S=h+1;S<this.n;S++)u[h]=a.hypot(u[h],u[S]);if(u[h]!==0){u[h+1]<0&&(u[h]=-u[h]);for(var A=h+1;A<this.n;A++)u[A]/=u[h];u[h+1]+=1}if(u[h]=-u[h],function(Rt,Bt){return Rt&&Bt}(h+1<this.m,u[h]!==0)){for(var _=h+1;_<this.m;_++)l[_]=0;for(var E=h+1;E<this.n;E++)for(var k=h+1;k<this.m;k++)l[k]+=u[E]*o[k][E];for(var M=h+1;M<this.n;M++)for(var T=-u[M]/u[h+1],C=h+1;C<this.m;C++)o[C][M]+=T*l[C]}for(var R=h+1;R<this.n;R++)this.V[R][h]=u[R]}}var x=Math.min(this.n,this.m+1);c<this.n&&(this.s[c]=o[c][c]),this.m<x&&(this.s[x-1]=0),d+1<x&&(u[d]=o[d][x-1]),u[x-1]=0;{for(var B=c;B<s;B++){for(var D=0;D<this.m;D++)this.U[D][B]=0;this.U[B][B]=1}for(var O=c-1;O>=0;O--)if(this.s[O]!==0){for(var G=O+1;G<s;G++){for(var V=0,I=O;I<this.m;I++)V+=this.U[I][O]*this.U[I][G];V=-V/this.U[O][O];for(var z=O;z<this.m;z++)this.U[z][G]+=V*this.U[z][O]}for(var P=O;P<this.m;P++)this.U[P][O]=-this.U[P][O];this.U[O][O]=1+this.U[O][O];for(var q=0;q<O-1;q++)this.U[q][O]=0}else{for(var F=0;F<this.m;F++)this.U[F][O]=0;this.U[O][O]=1}}for(var U=this.n-1;U>=0;U--){if(function(Rt,Bt){return Rt&&Bt}(U<d,u[U]!==0))for(var W=U+1;W<s;W++){for(var X=0,te=U+1;te<this.n;te++)X+=this.V[te][U]*this.V[te][W];X=-X/this.V[U+1][U];for(var ne=U+1;ne<this.n;ne++)this.V[ne][W]+=X*this.V[ne][U]}for(var he=0;he<this.n;he++)this.V[he][U]=0;this.V[U][U]=1}for(var ve=x-1,Ce=Math.pow(2,-52),Le=Math.pow(2,-966);x>0;){var K=void 0,le=void 0;for(K=x-2;K>=-1&&K!==-1;K--)if(Math.abs(u[K])<=Le+Ce*(Math.abs(this.s[K])+Math.abs(this.s[K+1]))){u[K]=0;break}if(K===x-2)le=4;else{var Z=void 0;for(Z=x-1;Z>=K&&Z!==K;Z--){var ie=(Z!==x?Math.abs(u[Z]):0)+(Z!==K+1?Math.abs(u[Z-1]):0);if(Math.abs(this.s[Z])<=Le+Ce*ie){this.s[Z]=0;break}}Z===K?le=3:Z===x-1?le=1:(le=2,K=Z)}switch(K++,le){case 1:{var re=u[x-2];u[x-2]=0;for(var J=x-2;J>=K;J--){var fe=a.hypot(this.s[J],re),we=this.s[J]/fe,ge=re/fe;this.s[J]=fe,J!==K&&(re=-ge*u[J-1],u[J-1]=we*u[J-1]);for(var me=0;me<this.n;me++)fe=we*this.V[me][J]+ge*this.V[me][x-1],this.V[me][x-1]=-ge*this.V[me][J]+we*this.V[me][x-1],this.V[me][J]=fe}}break;case 2:{var ue=u[K-1];u[K-1]=0;for(var ce=K;ce<x;ce++){var oe=a.hypot(this.s[ce],ue),Ae=this.s[ce]/oe,Te=ue/oe;this.s[ce]=oe,ue=-Te*u[ce],u[ce]=Ae*u[ce];for(var Ge=0;Ge<this.m;Ge++)oe=Ae*this.U[Ge][ce]+Te*this.U[Ge][K-1],this.U[Ge][K-1]=-Te*this.U[Ge][ce]+Ae*this.U[Ge][K-1],this.U[Ge][ce]=oe}}break;case 3:{var Fe=Math.max(Math.max(Math.max(Math.max(Math.abs(this.s[x-1]),Math.abs(this.s[x-2])),Math.abs(u[x-2])),Math.abs(this.s[K])),Math.abs(u[K])),Re=this.s[x-1]/Fe,ze=this.s[x-2]/Fe,Ie=u[x-2]/Fe,Ve=this.s[K]/Fe,We=u[K]/Fe,Ze=((ze+Re)*(ze-Re)+Ie*Ie)/2,at=Re*Ie*(Re*Ie),ft=0;(function(Rt,Bt){return Rt||Bt})(Ze!==0,at!==0)&&(ft=Math.sqrt(Ze*Ze+at),Ze<0&&(ft=-ft),ft=at/(Ze+ft));for(var wt=(Ve+Re)*(Ve-Re)+ft,dt=Ve*We,vt=K;vt<x-1;vt++){var Et=a.hypot(wt,dt),Mt=wt/Et,mt=dt/Et;vt!==K&&(u[vt-1]=Et),wt=Mt*this.s[vt]+mt*u[vt],u[vt]=Mt*u[vt]-mt*this.s[vt],dt=mt*this.s[vt+1],this.s[vt+1]=Mt*this.s[vt+1];for(var Dt=0;Dt<this.n;Dt++)Et=Mt*this.V[Dt][vt]+mt*this.V[Dt][vt+1],this.V[Dt][vt+1]=-mt*this.V[Dt][vt]+Mt*this.V[Dt][vt+1],this.V[Dt][vt]=Et;if(Et=a.hypot(wt,dt),Mt=wt/Et,mt=dt/Et,this.s[vt]=Et,wt=Mt*u[vt]+mt*this.s[vt+1],this.s[vt+1]=-mt*u[vt]+Mt*this.s[vt+1],dt=mt*u[vt+1],u[vt+1]=Mt*u[vt+1],vt<this.m-1)for(var Lt=0;Lt<this.m;Lt++)Et=Mt*this.U[Lt][vt]+mt*this.U[Lt][vt+1],this.U[Lt][vt+1]=-mt*this.U[Lt][vt]+Mt*this.U[Lt][vt+1],this.U[Lt][vt]=Et}u[x-2]=wt}break;case 4:{if(this.s[K]<=0){this.s[K]=this.s[K]<0?-this.s[K]:0;for(var Tt=0;Tt<=ve;Tt++)this.V[Tt][K]=-this.V[Tt][K]}for(;K<ve&&!(this.s[K]>=this.s[K+1]);){var nr=this.s[K];if(this.s[K]=this.s[K+1],this.s[K+1]=nr,K<this.n-1)for(var $t=0;$t<this.n;$t++)nr=this.V[$t][K+1],this.V[$t][K+1]=this.V[$t][K],this.V[$t][K]=nr;if(K<this.m-1)for(var pt=0;pt<this.m;pt++)nr=this.U[pt][K+1],this.U[pt][K+1]=this.U[pt][K],this.U[pt][K]=nr;K++}x--}break}}var hr={U:this.U,V:this.V,S:this.s};return hr},a.hypot=function(o,s){var u=void 0;return Math.abs(o)>Math.abs(s)?(u=s/o,u=Math.abs(o)*Math.sqrt(1+u*u)):s!=0?(u=o/s,u=Math.abs(s)*Math.sqrt(1+u*u)):u=0,u},t.exports=a},function(t,n,i){var a=function(){function u(l,f){for(var c=0;c<f.length;c++){var d=f[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(l,d.key,d)}}return function(l,f,c){return f&&u(l.prototype,f),c&&u(l,c),l}}();function o(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}var s=function(){function u(l,f){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;o(this,u),this.sequence1=l,this.sequence2=f,this.match_score=c,this.mismatch_penalty=d,this.gap_penalty=h,this.iMax=l.length+1,this.jMax=f.length+1,this.grid=new Array(this.iMax);for(var p=0;p<this.iMax;p++){this.grid[p]=new Array(this.jMax);for(var g=0;g<this.jMax;g++)this.grid[p][g]=0}this.tracebackGrid=new Array(this.iMax);for(var b=0;b<this.iMax;b++){this.tracebackGrid[b]=new Array(this.jMax);for(var v=0;v<this.jMax;v++)this.tracebackGrid[b][v]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return a(u,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var f=1;f<this.jMax;f++)this.grid[0][f]=this.grid[0][f-1]+this.gap_penalty,this.tracebackGrid[0][f]=[!1,!1,!0];for(var c=1;c<this.iMax;c++)this.grid[c][0]=this.grid[c-1][0]+this.gap_penalty,this.tracebackGrid[c][0]=[!1,!0,!1];for(var d=1;d<this.iMax;d++)for(var h=1;h<this.jMax;h++){var p=void 0;this.sequence1[d-1]===this.sequence2[h-1]?p=this.grid[d-1][h-1]+this.match_score:p=this.grid[d-1][h-1]+this.mismatch_penalty;var g=this.grid[d-1][h]+this.gap_penalty,b=this.grid[d][h-1]+this.gap_penalty,v=[p,g,b],y=this.arrayAllMaxIndexes(v);this.grid[d][h]=v[y[0]],this.tracebackGrid[d][h]=[y.includes(0),y.includes(1),y.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var f=[];for(f.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});f[0];){var c=f[0],d=this.tracebackGrid[c.pos[0]][c.pos[1]];d[0]&&f.push({pos:[c.pos[0]-1,c.pos[1]-1],seq1:this.sequence1[c.pos[0]-1]+c.seq1,seq2:this.sequence2[c.pos[1]-1]+c.seq2}),d[1]&&f.push({pos:[c.pos[0]-1,c.pos[1]],seq1:this.sequence1[c.pos[0]-1]+c.seq1,seq2:"-"+c.seq2}),d[2]&&f.push({pos:[c.pos[0],c.pos[1]-1],seq1:"-"+c.seq1,seq2:this.sequence2[c.pos[1]-1]+c.seq2}),c.pos[0]===0&&c.pos[1]===0&&this.alignments.push({sequence1:c.seq1,sequence2:c.seq2}),f.shift()}return this.alignments}},{key:"getAllIndexes",value:function(f,c){for(var d=[],h=-1;(h=f.indexOf(c,h+1))!==-1;)d.push(h);return d}},{key:"arrayAllMaxIndexes",value:function(f){return this.getAllIndexes(f,Math.max.apply(null,f))}}]),u}();t.exports=s},function(t,n,i){var a=function(){};a.FDLayout=i(18),a.FDLayoutConstants=i(4),a.FDLayoutEdge=i(19),a.FDLayoutNode=i(20),a.DimensionD=i(21),a.HashMap=i(22),a.HashSet=i(23),a.IGeometry=i(8),a.IMath=i(9),a.Integer=i(10),a.Point=i(12),a.PointD=i(5),a.RandomSeed=i(16),a.RectangleD=i(13),a.Transform=i(17),a.UniqueIDGeneretor=i(14),a.Quicksort=i(25),a.LinkedList=i(11),a.LGraphObject=i(2),a.LGraph=i(6),a.LEdge=i(1),a.LGraphManager=i(7),a.LNode=i(3),a.Layout=i(15),a.LayoutConstants=i(0),a.NeedlemanWunsch=i(27),a.Matrix=i(24),a.SVD=i(26),t.exports=a},function(t,n,i){function a(){this.listeners=[]}var o=a.prototype;o.addListener=function(s,u){this.listeners.push({event:s,callback:u})},o.removeListener=function(s,u){for(var l=this.listeners.length;l>=0;l--){var f=this.listeners[l];f.event===s&&f.callback===u&&this.listeners.splice(l,1)}},o.emit=function(s,u){for(var l=0;l<this.listeners.length;l++){var f=this.listeners[l];s===f.event&&f.callback(u)}},t.exports=a}])})}(qb)),qb.exports}var qT;function TH(){return qT||(qT=1,function(r,e){(function(n,i){r.exports=i(AH())})(kt,function(t){return(()=>{var n={45:(s,u,l)=>{var f={};f.layoutBase=l(551),f.CoSEConstants=l(806),f.CoSEEdge=l(767),f.CoSEGraph=l(880),f.CoSEGraphManager=l(578),f.CoSELayout=l(765),f.CoSENode=l(991),f.ConstraintHandler=l(902),s.exports=f},806:(s,u,l)=>{var f=l(551).FDLayoutConstants;function c(){}for(var d in f)c[d]=f[d];c.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,c.DEFAULT_RADIAL_SEPARATION=f.DEFAULT_EDGE_LENGTH,c.DEFAULT_COMPONENT_SEPERATION=60,c.TILE=!0,c.TILING_PADDING_VERTICAL=10,c.TILING_PADDING_HORIZONTAL=10,c.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,c.ENFORCE_CONSTRAINTS=!0,c.APPLY_LAYOUT=!0,c.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,c.TREE_REDUCTION_ON_INCREMENTAL=!0,c.PURE_INCREMENTAL=c.DEFAULT_INCREMENTAL,s.exports=c},767:(s,u,l)=>{var f=l(551).FDLayoutEdge;function c(h,p,g){f.call(this,h,p,g)}c.prototype=Object.create(f.prototype);for(var d in f)c[d]=f[d];s.exports=c},880:(s,u,l)=>{var f=l(551).LGraph;function c(h,p,g){f.call(this,h,p,g)}c.prototype=Object.create(f.prototype);for(var d in f)c[d]=f[d];s.exports=c},578:(s,u,l)=>{var f=l(551).LGraphManager;function c(h){f.call(this,h)}c.prototype=Object.create(f.prototype);for(var d in f)c[d]=f[d];s.exports=c},765:(s,u,l)=>{var f=l(551).FDLayout,c=l(578),d=l(880),h=l(991),p=l(767),g=l(806),b=l(902),v=l(551).FDLayoutConstants,y=l(551).LayoutConstants,m=l(551).Point,w=l(551).PointD,S=l(551).DimensionD,A=l(551).Layout,_=l(551).Integer,E=l(551).IGeometry,k=l(551).LGraph,M=l(551).Transform,T=l(551).LinkedList;function C(){f.call(this),this.toBeTiled={},this.constraints={}}C.prototype=Object.create(f.prototype);for(var R in f)C[R]=f[R];C.prototype.newGraphManager=function(){var x=new c(this);return this.graphManager=x,x},C.prototype.newGraph=function(x){return new d(null,this.graphManager,x)},C.prototype.newNode=function(x){return new h(this.graphManager,x)},C.prototype.newEdge=function(x){return new p(null,null,x)},C.prototype.initParameters=function(){f.prototype.initParameters.call(this,arguments),this.isSubLayout||(g.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=g.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=g.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=v.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=v.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=v.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=v.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},C.prototype.initSpringEmbedder=function(){f.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/v.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},C.prototype.layout=function(){var x=y.DEFAULT_CREATE_BENDS_AS_NEEDED;return x&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},C.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(g.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var B=new Set(this.getAllNodes()),D=this.nodesWithGravity.filter(function(V){return B.has(V)});this.graphManager.setAllNodesToApplyGravitation(D)}}else{var x=this.getFlatForest();if(x.length>0)this.positionNodesRadially(x);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var B=new Set(this.getAllNodes()),D=this.nodesWithGravity.filter(function(O){return B.has(O)});this.graphManager.setAllNodesToApplyGravitation(D),this.positionNodesRandomly()}}return Object.keys(this.constraints).length>0&&(b.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),g.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},C.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%v.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var x=new Set(this.getAllNodes()),B=this.nodesWithGravity.filter(function(G){return x.has(G)});this.graphManager.setAllNodesToApplyGravitation(B),this.graphManager.updateBounds(),this.updateGrid(),g.PURE_INCREMENTAL?this.coolingFactor=v.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:this.coolingFactor=v.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),g.PURE_INCREMENTAL?this.coolingFactor=v.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):this.coolingFactor=v.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var D=!this.isTreeGrowing&&!this.isGrowthFinished,O=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(D,O),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},C.prototype.getPositionsData=function(){for(var x=this.graphManager.getAllNodes(),B={},D=0;D<x.length;D++){var O=x[D].rect,G=x[D].id;B[G]={id:G,x:O.getCenterX(),y:O.getCenterY(),w:O.width,h:O.height}}return B},C.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var x=!1;if(v.ANIMATE==="during")this.emit("layoutstarted");else{for(;!x;)x=this.tick();this.graphManager.updateBounds()}},C.prototype.moveNodes=function(){for(var x=this.getAllNodes(),B,D=0;D<x.length;D++)B=x[D],B.calculateDisplacement();Object.keys(this.constraints).length>0&&this.updateDisplacements();for(var D=0;D<x.length;D++)B=x[D],B.move()},C.prototype.initConstraintVariables=function(){var x=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var B=this.graphManager.getAllNodes(),D=0;D<B.length;D++){var O=B[D];this.idToNodeMap.set(O.id,O)}var G=function ne(he){for(var ve=he.getChild().getNodes(),Ce,Le=0,K=0;K<ve.length;K++)Ce=ve[K],Ce.getChild()==null?x.fixedNodeSet.has(Ce.id)&&(Le+=100):Le+=ne(Ce);return Le};if(this.constraints.fixedNodeConstraint){this.constraints.fixedNodeConstraint.forEach(function(ve){x.fixedNodeSet.add(ve.nodeId)});for(var B=this.graphManager.getAllNodes(),O,D=0;D<B.length;D++)if(O=B[D],O.getChild()!=null){var V=G(O);V>0&&(O.fixedNodeWeight=V)}}if(this.constraints.relativePlacementConstraint){var I=new Map,z=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach(function(ne){x.fixedNodesOnHorizontal.add(ne),x.fixedNodesOnVertical.add(ne)}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var P=this.constraints.alignmentConstraint.vertical,D=0;D<P.length;D++)this.dummyToNodeForVerticalAlignment.set("dummy"+D,[]),P[D].forEach(function(he){I.set(he,"dummy"+D),x.dummyToNodeForVerticalAlignment.get("dummy"+D).push(he),x.fixedNodeSet.has(he)&&x.fixedNodesOnHorizontal.add("dummy"+D)});if(this.constraints.alignmentConstraint.horizontal)for(var q=this.constraints.alignmentConstraint.horizontal,D=0;D<q.length;D++)this.dummyToNodeForHorizontalAlignment.set("dummy"+D,[]),q[D].forEach(function(he){z.set(he,"dummy"+D),x.dummyToNodeForHorizontalAlignment.get("dummy"+D).push(he),x.fixedNodeSet.has(he)&&x.fixedNodesOnVertical.add("dummy"+D)})}if(g.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(ne){var he,ve,Ce;for(Ce=ne.length-1;Ce>=2*ne.length/3;Ce--)he=Math.floor(Math.random()*(Ce+1)),ve=ne[Ce],ne[Ce]=ne[he],ne[he]=ve;return ne},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach(function(ne){if(ne.left){var he=I.has(ne.left)?I.get(ne.left):ne.left,ve=I.has(ne.right)?I.get(ne.right):ne.right;x.nodesInRelativeHorizontal.includes(he)||(x.nodesInRelativeHorizontal.push(he),x.nodeToRelativeConstraintMapHorizontal.set(he,[]),x.dummyToNodeForVerticalAlignment.has(he)?x.nodeToTempPositionMapHorizontal.set(he,x.idToNodeMap.get(x.dummyToNodeForVerticalAlignment.get(he)[0]).getCenterX()):x.nodeToTempPositionMapHorizontal.set(he,x.idToNodeMap.get(he).getCenterX())),x.nodesInRelativeHorizontal.includes(ve)||(x.nodesInRelativeHorizontal.push(ve),x.nodeToRelativeConstraintMapHorizontal.set(ve,[]),x.dummyToNodeForVerticalAlignment.has(ve)?x.nodeToTempPositionMapHorizontal.set(ve,x.idToNodeMap.get(x.dummyToNodeForVerticalAlignment.get(ve)[0]).getCenterX()):x.nodeToTempPositionMapHorizontal.set(ve,x.idToNodeMap.get(ve).getCenterX())),x.nodeToRelativeConstraintMapHorizontal.get(he).push({right:ve,gap:ne.gap}),x.nodeToRelativeConstraintMapHorizontal.get(ve).push({left:he,gap:ne.gap})}else{var Ce=z.has(ne.top)?z.get(ne.top):ne.top,Le=z.has(ne.bottom)?z.get(ne.bottom):ne.bottom;x.nodesInRelativeVertical.includes(Ce)||(x.nodesInRelativeVertical.push(Ce),x.nodeToRelativeConstraintMapVertical.set(Ce,[]),x.dummyToNodeForHorizontalAlignment.has(Ce)?x.nodeToTempPositionMapVertical.set(Ce,x.idToNodeMap.get(x.dummyToNodeForHorizontalAlignment.get(Ce)[0]).getCenterY()):x.nodeToTempPositionMapVertical.set(Ce,x.idToNodeMap.get(Ce).getCenterY())),x.nodesInRelativeVertical.includes(Le)||(x.nodesInRelativeVertical.push(Le),x.nodeToRelativeConstraintMapVertical.set(Le,[]),x.dummyToNodeForHorizontalAlignment.has(Le)?x.nodeToTempPositionMapVertical.set(Le,x.idToNodeMap.get(x.dummyToNodeForHorizontalAlignment.get(Le)[0]).getCenterY()):x.nodeToTempPositionMapVertical.set(Le,x.idToNodeMap.get(Le).getCenterY())),x.nodeToRelativeConstraintMapVertical.get(Ce).push({bottom:Le,gap:ne.gap}),x.nodeToRelativeConstraintMapVertical.get(Le).push({top:Ce,gap:ne.gap})}});else{var F=new Map,U=new Map;this.constraints.relativePlacementConstraint.forEach(function(ne){if(ne.left){var he=I.has(ne.left)?I.get(ne.left):ne.left,ve=I.has(ne.right)?I.get(ne.right):ne.right;F.has(he)?F.get(he).push(ve):F.set(he,[ve]),F.has(ve)?F.get(ve).push(he):F.set(ve,[he])}else{var Ce=z.has(ne.top)?z.get(ne.top):ne.top,Le=z.has(ne.bottom)?z.get(ne.bottom):ne.bottom;U.has(Ce)?U.get(Ce).push(Le):U.set(Ce,[Le]),U.has(Le)?U.get(Le).push(Ce):U.set(Le,[Ce])}});var W=function(he,ve){var Ce=[],Le=[],K=new T,le=new Set,Z=0;return he.forEach(function(ie,re){if(!le.has(re)){Ce[Z]=[],Le[Z]=!1;var J=re;for(K.push(J),le.add(J),Ce[Z].push(J);K.length!=0;){J=K.shift(),ve.has(J)&&(Le[Z]=!0);var fe=he.get(J);fe.forEach(function(we){le.has(we)||(K.push(we),le.add(we),Ce[Z].push(we))})}Z++}}),{components:Ce,isFixed:Le}},X=W(F,x.fixedNodesOnHorizontal);this.componentsOnHorizontal=X.components,this.fixedComponentsOnHorizontal=X.isFixed;var te=W(U,x.fixedNodesOnVertical);this.componentsOnVertical=te.components,this.fixedComponentsOnVertical=te.isFixed}}},C.prototype.updateDisplacements=function(){var x=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach(function(te){var ne=x.idToNodeMap.get(te.nodeId);ne.displacementX=0,ne.displacementY=0}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var B=this.constraints.alignmentConstraint.vertical,D=0;D<B.length;D++){for(var O=0,G=0;G<B[D].length;G++){if(this.fixedNodeSet.has(B[D][G])){O=0;break}O+=this.idToNodeMap.get(B[D][G]).displacementX}for(var V=O/B[D].length,G=0;G<B[D].length;G++)this.idToNodeMap.get(B[D][G]).displacementX=V}if(this.constraints.alignmentConstraint.horizontal)for(var I=this.constraints.alignmentConstraint.horizontal,D=0;D<I.length;D++){for(var z=0,G=0;G<I[D].length;G++){if(this.fixedNodeSet.has(I[D][G])){z=0;break}z+=this.idToNodeMap.get(I[D][G]).displacementY}for(var P=z/I[D].length,G=0;G<I[D].length;G++)this.idToNodeMap.get(I[D][G]).displacementY=P}}if(this.constraints.relativePlacementConstraint)if(g.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach(function(te){if(!x.fixedNodesOnHorizontal.has(te)){var ne=0;x.dummyToNodeForVerticalAlignment.has(te)?ne=x.idToNodeMap.get(x.dummyToNodeForVerticalAlignment.get(te)[0]).displacementX:ne=x.idToNodeMap.get(te).displacementX,x.nodeToRelativeConstraintMapHorizontal.get(te).forEach(function(he){if(he.right){var ve=x.nodeToTempPositionMapHorizontal.get(he.right)-x.nodeToTempPositionMapHorizontal.get(te)-ne;ve<he.gap&&(ne-=he.gap-ve)}else{var ve=x.nodeToTempPositionMapHorizontal.get(te)-x.nodeToTempPositionMapHorizontal.get(he.left)+ne;ve<he.gap&&(ne+=he.gap-ve)}}),x.nodeToTempPositionMapHorizontal.set(te,x.nodeToTempPositionMapHorizontal.get(te)+ne),x.dummyToNodeForVerticalAlignment.has(te)?x.dummyToNodeForVerticalAlignment.get(te).forEach(function(he){x.idToNodeMap.get(he).displacementX=ne}):x.idToNodeMap.get(te).displacementX=ne}}),this.nodesInRelativeVertical.forEach(function(te){if(!x.fixedNodesOnHorizontal.has(te)){var ne=0;x.dummyToNodeForHorizontalAlignment.has(te)?ne=x.idToNodeMap.get(x.dummyToNodeForHorizontalAlignment.get(te)[0]).displacementY:ne=x.idToNodeMap.get(te).displacementY,x.nodeToRelativeConstraintMapVertical.get(te).forEach(function(he){if(he.bottom){var ve=x.nodeToTempPositionMapVertical.get(he.bottom)-x.nodeToTempPositionMapVertical.get(te)-ne;ve<he.gap&&(ne-=he.gap-ve)}else{var ve=x.nodeToTempPositionMapVertical.get(te)-x.nodeToTempPositionMapVertical.get(he.top)+ne;ve<he.gap&&(ne+=he.gap-ve)}}),x.nodeToTempPositionMapVertical.set(te,x.nodeToTempPositionMapVertical.get(te)+ne),x.dummyToNodeForHorizontalAlignment.has(te)?x.dummyToNodeForHorizontalAlignment.get(te).forEach(function(he){x.idToNodeMap.get(he).displacementY=ne}):x.idToNodeMap.get(te).displacementY=ne}});else{for(var D=0;D<this.componentsOnHorizontal.length;D++){var q=this.componentsOnHorizontal[D];if(this.fixedComponentsOnHorizontal[D])for(var G=0;G<q.length;G++)this.dummyToNodeForVerticalAlignment.has(q[G])?this.dummyToNodeForVerticalAlignment.get(q[G]).forEach(function(he){x.idToNodeMap.get(he).displacementX=0}):this.idToNodeMap.get(q[G]).displacementX=0;else{for(var F=0,U=0,G=0;G<q.length;G++)if(this.dummyToNodeForVerticalAlignment.has(q[G])){var W=this.dummyToNodeForVerticalAlignment.get(q[G]);F+=W.length*this.idToNodeMap.get(W[0]).displacementX,U+=W.length}else F+=this.idToNodeMap.get(q[G]).displacementX,U++;for(var X=F/U,G=0;G<q.length;G++)this.dummyToNodeForVerticalAlignment.has(q[G])?this.dummyToNodeForVerticalAlignment.get(q[G]).forEach(function(he){x.idToNodeMap.get(he).displacementX=X}):this.idToNodeMap.get(q[G]).displacementX=X}}for(var D=0;D<this.componentsOnVertical.length;D++){var q=this.componentsOnVertical[D];if(this.fixedComponentsOnVertical[D])for(var G=0;G<q.length;G++)this.dummyToNodeForHorizontalAlignment.has(q[G])?this.dummyToNodeForHorizontalAlignment.get(q[G]).forEach(function(ve){x.idToNodeMap.get(ve).displacementY=0}):this.idToNodeMap.get(q[G]).displacementY=0;else{for(var F=0,U=0,G=0;G<q.length;G++)if(this.dummyToNodeForHorizontalAlignment.has(q[G])){var W=this.dummyToNodeForHorizontalAlignment.get(q[G]);F+=W.length*this.idToNodeMap.get(W[0]).displacementY,U+=W.length}else F+=this.idToNodeMap.get(q[G]).displacementY,U++;for(var X=F/U,G=0;G<q.length;G++)this.dummyToNodeForHorizontalAlignment.has(q[G])?this.dummyToNodeForHorizontalAlignment.get(q[G]).forEach(function(K){x.idToNodeMap.get(K).displacementY=X}):this.idToNodeMap.get(q[G]).displacementY=X}}}},C.prototype.calculateNodesToApplyGravitationTo=function(){var x=[],B,D=this.graphManager.getGraphs(),O=D.length,G;for(G=0;G<O;G++)B=D[G],B.updateConnected(),B.isConnected||(x=x.concat(B.getNodes()));return x},C.prototype.createBendpoints=function(){var x=[];x=x.concat(this.graphManager.getAllEdges());var B=new Set,D;for(D=0;D<x.length;D++){var O=x[D];if(!B.has(O)){var G=O.getSource(),V=O.getTarget();if(G==V)O.getBendpoints().push(new w),O.getBendpoints().push(new w),this.createDummyNodesForBendpoints(O),B.add(O);else{var I=[];if(I=I.concat(G.getEdgeListToNode(V)),I=I.concat(V.getEdgeListToNode(G)),!B.has(I[0])){if(I.length>1){var z;for(z=0;z<I.length;z++){var P=I[z];P.getBendpoints().push(new w),this.createDummyNodesForBendpoints(P)}}I.forEach(function(q){B.add(q)})}}}if(B.size==x.length)break}},C.prototype.positionNodesRadially=function(x){for(var B=new m(0,0),D=Math.ceil(Math.sqrt(x.length)),O=0,G=0,V=0,I=new w(0,0),z=0;z<x.length;z++){z%D==0&&(V=0,G=O,z!=0&&(G+=g.DEFAULT_COMPONENT_SEPERATION),O=0);var P=x[z],q=A.findCenterOfTree(P);B.x=V,B.y=G,I=C.radialLayout(P,q,B),I.y>O&&(O=Math.floor(I.y)),V=Math.floor(I.x+g.DEFAULT_COMPONENT_SEPERATION)}this.transform(new w(y.WORLD_CENTER_X-I.x/2,y.WORLD_CENTER_Y-I.y/2))},C.radialLayout=function(x,B,D){var O=Math.max(this.maxDiagonalInTree(x),g.DEFAULT_RADIAL_SEPARATION);C.branchRadialLayout(B,null,0,359,0,O);var G=k.calculateBounds(x),V=new M;V.setDeviceOrgX(G.getMinX()),V.setDeviceOrgY(G.getMinY()),V.setWorldOrgX(D.x),V.setWorldOrgY(D.y);for(var I=0;I<x.length;I++){var z=x[I];z.transform(V)}var P=new w(G.getMaxX(),G.getMaxY());return V.inverseTransformPoint(P)},C.branchRadialLayout=function(x,B,D,O,G,V){var I=(O-D+1)/2;I<0&&(I+=180);var z=(I+D)%360,P=z*E.TWO_PI/360,q=G*Math.cos(P),F=G*Math.sin(P);x.setCenter(q,F);var U=[];U=U.concat(x.getEdges());var W=U.length;B!=null&&W--;for(var X=0,te=U.length,ne,he=x.getEdgesBetween(B);he.length>1;){var ve=he[0];he.splice(0,1);var Ce=U.indexOf(ve);Ce>=0&&U.splice(Ce,1),te--,W--}B!=null?ne=(U.indexOf(he[0])+1)%te:ne=0;for(var Le=Math.abs(O-D)/W,K=ne;X!=W;K=++K%te){var le=U[K].getOtherEnd(x);if(le!=B){var Z=(D+X*Le)%360,ie=(Z+Le)%360;C.branchRadialLayout(le,x,Z,ie,G+V,V),X++}}},C.maxDiagonalInTree=function(x){for(var B=_.MIN_VALUE,D=0;D<x.length;D++){var O=x[D],G=O.getDiagonal();G>B&&(B=G)}return B},C.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},C.prototype.groupZeroDegreeMembers=function(){var x=this,B={};this.memberGroups={},this.idToDummyNode={};for(var D=[],O=this.graphManager.getAllNodes(),G=0;G<O.length;G++){var V=O[G],I=V.getParent();this.getNodeDegreeWithChildren(V)===0&&(I.id==null||!this.getToBeTiled(I))&&D.push(V)}for(var G=0;G<D.length;G++){var V=D[G],z=V.getParent().id;typeof B[z]>"u"&&(B[z]=[]),B[z]=B[z].concat(V)}Object.keys(B).forEach(function(P){if(B[P].length>1){var q="DummyCompound_"+P;x.memberGroups[q]=B[P];var F=B[P][0].getParent(),U=new h(x.graphManager);U.id=q,U.paddingLeft=F.paddingLeft||0,U.paddingRight=F.paddingRight||0,U.paddingBottom=F.paddingBottom||0,U.paddingTop=F.paddingTop||0,x.idToDummyNode[q]=U;var W=x.getGraphManager().add(x.newGraph(),U),X=F.getChild();X.add(U);for(var te=0;te<B[P].length;te++){var ne=B[P][te];X.remove(ne),W.add(ne)}}})},C.prototype.clearCompounds=function(){var x={},B={};this.performDFSOnCompounds();for(var D=0;D<this.compoundOrder.length;D++)B[this.compoundOrder[D].id]=this.compoundOrder[D],x[this.compoundOrder[D].id]=[].concat(this.compoundOrder[D].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[D].getChild()),this.compoundOrder[D].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(x,B)},C.prototype.clearZeroDegreeMembers=function(){var x=this,B=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(D){var O=x.idToDummyNode[D];if(B[D]=x.tileNodes(x.memberGroups[D],O.paddingLeft+O.paddingRight),O.rect.width=B[D].width,O.rect.height=B[D].height,O.setCenter(B[D].centerX,B[D].centerY),O.labelMarginLeft=0,O.labelMarginTop=0,g.NODE_DIMENSIONS_INCLUDE_LABELS){var G=O.rect.width,V=O.rect.height;O.labelWidth&&(O.labelPosHorizontal=="left"?(O.rect.x-=O.labelWidth,O.setWidth(G+O.labelWidth),O.labelMarginLeft=O.labelWidth):O.labelPosHorizontal=="center"&&O.labelWidth>G?(O.rect.x-=(O.labelWidth-G)/2,O.setWidth(O.labelWidth),O.labelMarginLeft=(O.labelWidth-G)/2):O.labelPosHorizontal=="right"&&O.setWidth(G+O.labelWidth)),O.labelHeight&&(O.labelPosVertical=="top"?(O.rect.y-=O.labelHeight,O.setHeight(V+O.labelHeight),O.labelMarginTop=O.labelHeight):O.labelPosVertical=="center"&&O.labelHeight>V?(O.rect.y-=(O.labelHeight-V)/2,O.setHeight(O.labelHeight),O.labelMarginTop=(O.labelHeight-V)/2):O.labelPosVertical=="bottom"&&O.setHeight(V+O.labelHeight))}})},C.prototype.repopulateCompounds=function(){for(var x=this.compoundOrder.length-1;x>=0;x--){var B=this.compoundOrder[x],D=B.id,O=B.paddingLeft,G=B.paddingTop,V=B.labelMarginLeft,I=B.labelMarginTop;this.adjustLocations(this.tiledMemberPack[D],B.rect.x,B.rect.y,O,G,V,I)}},C.prototype.repopulateZeroDegreeMembers=function(){var x=this,B=this.tiledZeroDegreePack;Object.keys(B).forEach(function(D){var O=x.idToDummyNode[D],G=O.paddingLeft,V=O.paddingTop,I=O.labelMarginLeft,z=O.labelMarginTop;x.adjustLocations(B[D],O.rect.x,O.rect.y,G,V,I,z)})},C.prototype.getToBeTiled=function(x){var B=x.id;if(this.toBeTiled[B]!=null)return this.toBeTiled[B];var D=x.getChild();if(D==null)return this.toBeTiled[B]=!1,!1;for(var O=D.getNodes(),G=0;G<O.length;G++){var V=O[G];if(this.getNodeDegree(V)>0)return this.toBeTiled[B]=!1,!1;if(V.getChild()==null){this.toBeTiled[V.id]=!1;continue}if(!this.getToBeTiled(V))return this.toBeTiled[B]=!1,!1}return this.toBeTiled[B]=!0,!0},C.prototype.getNodeDegree=function(x){x.id;for(var B=x.getEdges(),D=0,O=0;O<B.length;O++){var G=B[O];G.getSource().id!==G.getTarget().id&&(D=D+1)}return D},C.prototype.getNodeDegreeWithChildren=function(x){var B=this.getNodeDegree(x);if(x.getChild()==null)return B;for(var D=x.getChild().getNodes(),O=0;O<D.length;O++){var G=D[O];B+=this.getNodeDegreeWithChildren(G)}return B},C.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},C.prototype.fillCompexOrderByDFS=function(x){for(var B=0;B<x.length;B++){var D=x[B];D.getChild()!=null&&this.fillCompexOrderByDFS(D.getChild().getNodes()),this.getToBeTiled(D)&&this.compoundOrder.push(D)}},C.prototype.adjustLocations=function(x,B,D,O,G,V,I){B+=O+V,D+=G+I;for(var z=B,P=0;P<x.rows.length;P++){var q=x.rows[P];B=z;for(var F=0,U=0;U<q.length;U++){var W=q[U];W.rect.x=B,W.rect.y=D,B+=W.rect.width+x.horizontalPadding,W.rect.height>F&&(F=W.rect.height)}D+=F+x.verticalPadding}},C.prototype.tileCompoundMembers=function(x,B){var D=this;this.tiledMemberPack=[],Object.keys(x).forEach(function(O){var G=B[O];if(D.tiledMemberPack[O]=D.tileNodes(x[O],G.paddingLeft+G.paddingRight),G.rect.width=D.tiledMemberPack[O].width,G.rect.height=D.tiledMemberPack[O].height,G.setCenter(D.tiledMemberPack[O].centerX,D.tiledMemberPack[O].centerY),G.labelMarginLeft=0,G.labelMarginTop=0,g.NODE_DIMENSIONS_INCLUDE_LABELS){var V=G.rect.width,I=G.rect.height;G.labelWidth&&(G.labelPosHorizontal=="left"?(G.rect.x-=G.labelWidth,G.setWidth(V+G.labelWidth),G.labelMarginLeft=G.labelWidth):G.labelPosHorizontal=="center"&&G.labelWidth>V?(G.rect.x-=(G.labelWidth-V)/2,G.setWidth(G.labelWidth),G.labelMarginLeft=(G.labelWidth-V)/2):G.labelPosHorizontal=="right"&&G.setWidth(V+G.labelWidth)),G.labelHeight&&(G.labelPosVertical=="top"?(G.rect.y-=G.labelHeight,G.setHeight(I+G.labelHeight),G.labelMarginTop=G.labelHeight):G.labelPosVertical=="center"&&G.labelHeight>I?(G.rect.y-=(G.labelHeight-I)/2,G.setHeight(G.labelHeight),G.labelMarginTop=(G.labelHeight-I)/2):G.labelPosVertical=="bottom"&&G.setHeight(I+G.labelHeight))}})},C.prototype.tileNodes=function(x,B){var D=this.tileNodesByFavoringDim(x,B,!0),O=this.tileNodesByFavoringDim(x,B,!1),G=this.getOrgRatio(D),V=this.getOrgRatio(O),I;return V<G?I=O:I=D,I},C.prototype.getOrgRatio=function(x){var B=x.width,D=x.height,O=B/D;return O<1&&(O=1/O),O},C.prototype.calcIdealRowWidth=function(x,B){var D=g.TILING_PADDING_VERTICAL,O=g.TILING_PADDING_HORIZONTAL,G=x.length,V=0,I=0,z=0;x.forEach(function(te){V+=te.getWidth(),I+=te.getHeight(),te.getWidth()>z&&(z=te.getWidth())});var P=V/G,q=I/G,F=Math.pow(D-O,2)+4*(P+O)*(q+D)*G,U=(O-D+Math.sqrt(F))/(2*(P+O)),W;B?(W=Math.ceil(U),W==U&&W++):W=Math.floor(U);var X=W*(P+O)-O;return z>X&&(X=z),X+=O*2,X},C.prototype.tileNodesByFavoringDim=function(x,B,D){var O=g.TILING_PADDING_VERTICAL,G=g.TILING_PADDING_HORIZONTAL,V=g.TILING_COMPARE_BY,I={rows:[],rowWidth:[],rowHeight:[],width:0,height:B,verticalPadding:O,horizontalPadding:G,centerX:0,centerY:0};V&&(I.idealRowWidth=this.calcIdealRowWidth(x,D));var z=function(ne){return ne.rect.width*ne.rect.height},P=function(ne,he){return z(he)-z(ne)};x.sort(function(te,ne){var he=P;return I.idealRowWidth?(he=V,he(te.id,ne.id)):he(te,ne)});for(var q=0,F=0,U=0;U<x.length;U++){var W=x[U];q+=W.getCenterX(),F+=W.getCenterY()}I.centerX=q/x.length,I.centerY=F/x.length;for(var U=0;U<x.length;U++){var W=x[U];if(I.rows.length==0)this.insertNodeToRow(I,W,0,B);else if(this.canAddHorizontal(I,W.rect.width,W.rect.height)){var X=I.rows.length-1;I.idealRowWidth||(X=this.getShortestRowIndex(I)),this.insertNodeToRow(I,W,X,B)}else this.insertNodeToRow(I,W,I.rows.length,B);this.shiftToLastRow(I)}return I},C.prototype.insertNodeToRow=function(x,B,D,O){var G=O;if(D==x.rows.length){var V=[];x.rows.push(V),x.rowWidth.push(G),x.rowHeight.push(0)}var I=x.rowWidth[D]+B.rect.width;x.rows[D].length>0&&(I+=x.horizontalPadding),x.rowWidth[D]=I,x.width<I&&(x.width=I);var z=B.rect.height;D>0&&(z+=x.verticalPadding);var P=0;z>x.rowHeight[D]&&(P=x.rowHeight[D],x.rowHeight[D]=z,P=x.rowHeight[D]-P),x.height+=P,x.rows[D].push(B)},C.prototype.getShortestRowIndex=function(x){for(var B=-1,D=Number.MAX_VALUE,O=0;O<x.rows.length;O++)x.rowWidth[O]<D&&(B=O,D=x.rowWidth[O]);return B},C.prototype.getLongestRowIndex=function(x){for(var B=-1,D=Number.MIN_VALUE,O=0;O<x.rows.length;O++)x.rowWidth[O]>D&&(B=O,D=x.rowWidth[O]);return B},C.prototype.canAddHorizontal=function(x,B,D){if(x.idealRowWidth){var O=x.rows.length-1,G=x.rowWidth[O];return G+B+x.horizontalPadding<=x.idealRowWidth}var V=this.getShortestRowIndex(x);if(V<0)return!0;var I=x.rowWidth[V];if(I+x.horizontalPadding+B<=x.width)return!0;var z=0;x.rowHeight[V]<D&&V>0&&(z=D+x.verticalPadding-x.rowHeight[V]);var P;x.width-I>=B+x.horizontalPadding?P=(x.height+z)/(I+B+x.horizontalPadding):P=(x.height+z)/x.width,z=D+x.verticalPadding;var q;return x.width<B?q=(x.height+z)/B:q=(x.height+z)/x.width,q<1&&(q=1/q),P<1&&(P=1/P),P<q},C.prototype.shiftToLastRow=function(x){var B=this.getLongestRowIndex(x),D=x.rowWidth.length-1,O=x.rows[B],G=O[O.length-1],V=G.width+x.horizontalPadding;if(x.width-x.rowWidth[D]>V&&B!=D){O.splice(-1,1),x.rows[D].push(G),x.rowWidth[B]=x.rowWidth[B]-V,x.rowWidth[D]=x.rowWidth[D]+V,x.width=x.rowWidth[instance.getLongestRowIndex(x)];for(var I=Number.MIN_VALUE,z=0;z<O.length;z++)O[z].height>I&&(I=O[z].height);B>0&&(I+=x.verticalPadding);var P=x.rowHeight[B]+x.rowHeight[D];x.rowHeight[B]=I,x.rowHeight[D]<G.height+x.verticalPadding&&(x.rowHeight[D]=G.height+x.verticalPadding);var q=x.rowHeight[B]+x.rowHeight[D];x.height+=q-P,this.shiftToLastRow(x)}},C.prototype.tilingPreLayout=function(){g.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},C.prototype.tilingPostLayout=function(){g.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},C.prototype.reduceTrees=function(){for(var x=[],B=!0,D;B;){var O=this.graphManager.getAllNodes(),G=[];B=!1;for(var V=0;V<O.length;V++)if(D=O[V],D.getEdges().length==1&&!D.getEdges()[0].isInterGraph&&D.getChild()==null){if(g.PURE_INCREMENTAL){var I=D.getEdges()[0].getOtherEnd(D),z=new S(D.getCenterX()-I.getCenterX(),D.getCenterY()-I.getCenterY());G.push([D,D.getEdges()[0],D.getOwner(),z])}else G.push([D,D.getEdges()[0],D.getOwner()]);B=!0}if(B==!0){for(var P=[],q=0;q<G.length;q++)G[q][0].getEdges().length==1&&(P.push(G[q]),G[q][0].getOwner().remove(G[q][0]));x.push(P),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=x},C.prototype.growTree=function(x){for(var B=x.length,D=x[B-1],O,G=0;G<D.length;G++)O=D[G],this.findPlaceforPrunedNode(O),O[2].add(O[0]),O[2].add(O[1],O[1].source,O[1].target);x.splice(x.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},C.prototype.findPlaceforPrunedNode=function(x){var B,D,O=x[0];if(O==x[1].source?D=x[1].target:D=x[1].source,g.PURE_INCREMENTAL)O.setCenter(D.getCenterX()+x[3].getWidth(),D.getCenterY()+x[3].getHeight());else{var G=D.startX,V=D.finishX,I=D.startY,z=D.finishY,P=0,q=0,F=0,U=0,W=[P,F,q,U];if(I>0)for(var X=G;X<=V;X++)W[0]+=this.grid[X][I-1].length+this.grid[X][I].length-1;if(V<this.grid.length-1)for(var X=I;X<=z;X++)W[1]+=this.grid[V+1][X].length+this.grid[V][X].length-1;if(z<this.grid[0].length-1)for(var X=G;X<=V;X++)W[2]+=this.grid[X][z+1].length+this.grid[X][z].length-1;if(G>0)for(var X=I;X<=z;X++)W[3]+=this.grid[G-1][X].length+this.grid[G][X].length-1;for(var te=_.MAX_VALUE,ne,he,ve=0;ve<W.length;ve++)W[ve]<te?(te=W[ve],ne=1,he=ve):W[ve]==te&&ne++;if(ne==3&&te==0)W[0]==0&&W[1]==0&&W[2]==0?B=1:W[0]==0&&W[1]==0&&W[3]==0?B=0:W[0]==0&&W[2]==0&&W[3]==0?B=3:W[1]==0&&W[2]==0&&W[3]==0&&(B=2);else if(ne==2&&te==0){var Ce=Math.floor(Math.random()*2);W[0]==0&&W[1]==0?Ce==0?B=0:B=1:W[0]==0&&W[2]==0?Ce==0?B=0:B=2:W[0]==0&&W[3]==0?Ce==0?B=0:B=3:W[1]==0&&W[2]==0?Ce==0?B=1:B=2:W[1]==0&&W[3]==0?Ce==0?B=1:B=3:Ce==0?B=2:B=3}else if(ne==4&&te==0){var Ce=Math.floor(Math.random()*4);B=Ce}else B=he;B==0?O.setCenter(D.getCenterX(),D.getCenterY()-D.getHeight()/2-v.DEFAULT_EDGE_LENGTH-O.getHeight()/2):B==1?O.setCenter(D.getCenterX()+D.getWidth()/2+v.DEFAULT_EDGE_LENGTH+O.getWidth()/2,D.getCenterY()):B==2?O.setCenter(D.getCenterX(),D.getCenterY()+D.getHeight()/2+v.DEFAULT_EDGE_LENGTH+O.getHeight()/2):O.setCenter(D.getCenterX()-D.getWidth()/2-v.DEFAULT_EDGE_LENGTH-O.getWidth()/2,D.getCenterY())}},s.exports=C},991:(s,u,l)=>{var f=l(551).FDLayoutNode,c=l(551).IMath;function d(p,g,b,v){f.call(this,p,g,b,v)}d.prototype=Object.create(f.prototype);for(var h in f)d[h]=f[h];d.prototype.calculateDisplacement=function(){var p=this.graphManager.getLayout();this.getChild()!=null&&this.fixedNodeWeight?(this.displacementX+=p.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=p.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=p.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=p.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>p.coolingFactor*p.maxNodeDisplacement&&(this.displacementX=p.coolingFactor*p.maxNodeDisplacement*c.sign(this.displacementX)),Math.abs(this.displacementY)>p.coolingFactor*p.maxNodeDisplacement&&(this.displacementY=p.coolingFactor*p.maxNodeDisplacement*c.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},d.prototype.propogateDisplacementToChildren=function(p,g){for(var b=this.getChild().getNodes(),v,y=0;y<b.length;y++)v=b[y],v.getChild()==null?(v.displacementX+=p,v.displacementY+=g):v.propogateDisplacementToChildren(p,g)},d.prototype.move=function(){var p=this.graphManager.getLayout();(this.child==null||this.child.getNodes().length==0)&&(this.moveBy(this.displacementX,this.displacementY),p.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},d.prototype.setPred1=function(p){this.pred1=p},d.prototype.getPred1=function(){return pred1},d.prototype.getPred2=function(){return pred2},d.prototype.setNext=function(p){this.next=p},d.prototype.getNext=function(){return next},d.prototype.setProcessed=function(p){this.processed=p},d.prototype.isProcessed=function(){return processed},s.exports=d},902:(s,u,l)=>{function f(b){if(Array.isArray(b)){for(var v=0,y=Array(b.length);v<b.length;v++)y[v]=b[v];return y}else return Array.from(b)}var c=l(806),d=l(551).LinkedList,h=l(551).Matrix,p=l(551).SVD;function g(){}g.handleConstraints=function(b){var v={};v.fixedNodeConstraint=b.constraints.fixedNodeConstraint,v.alignmentConstraint=b.constraints.alignmentConstraint,v.relativePlacementConstraint=b.constraints.relativePlacementConstraint;for(var y=new Map,m=new Map,w=[],S=[],A=b.getAllNodes(),_=0,E=0;E<A.length;E++){var k=A[E];k.getChild()==null&&(m.set(k.id,_++),w.push(k.getCenterX()),S.push(k.getCenterY()),y.set(k.id,k))}v.relativePlacementConstraint&&v.relativePlacementConstraint.forEach(function(ze){!ze.gap&&ze.gap!=0&&(ze.left?ze.gap=c.DEFAULT_EDGE_LENGTH+y.get(ze.left).getWidth()/2+y.get(ze.right).getWidth()/2:ze.gap=c.DEFAULT_EDGE_LENGTH+y.get(ze.top).getHeight()/2+y.get(ze.bottom).getHeight()/2)});var M=function(Ie,Ve){return{x:Ie.x-Ve.x,y:Ie.y-Ve.y}},T=function(Ie){var Ve=0,We=0;return Ie.forEach(function(Ze){Ve+=w[m.get(Ze)],We+=S[m.get(Ze)]}),{x:Ve/Ie.size,y:We/Ie.size}},C=function(Ie,Ve,We,Ze,at){function ft(Lt,Tt){var nr=new Set(Lt),$t=!0,pt=!1,hr=void 0;try{for(var Rt=Tt[Symbol.iterator](),Bt;!($t=(Bt=Rt.next()).done);$t=!0){var ur=Bt.value;nr.add(ur)}}catch(nt){pt=!0,hr=nt}finally{try{!$t&&Rt.return&&Rt.return()}finally{if(pt)throw hr}}return nr}var wt=new Map;Ie.forEach(function(Lt,Tt){wt.set(Tt,0)}),Ie.forEach(function(Lt,Tt){Lt.forEach(function(nr){wt.set(nr.id,wt.get(nr.id)+1)})});var dt=new Map,vt=new Map,Et=new d;wt.forEach(function(Lt,Tt){Lt==0?(Et.push(Tt),We||(Ve=="horizontal"?dt.set(Tt,m.has(Tt)?w[m.get(Tt)]:Ze.get(Tt)):dt.set(Tt,m.has(Tt)?S[m.get(Tt)]:Ze.get(Tt)))):dt.set(Tt,Number.NEGATIVE_INFINITY),We&&vt.set(Tt,new Set([Tt]))}),We&&at.forEach(function(Lt){var Tt=[];if(Lt.forEach(function(pt){We.has(pt)&&Tt.push(pt)}),Tt.length>0){var nr=0;Tt.forEach(function(pt){Ve=="horizontal"?(dt.set(pt,m.has(pt)?w[m.get(pt)]:Ze.get(pt)),nr+=dt.get(pt)):(dt.set(pt,m.has(pt)?S[m.get(pt)]:Ze.get(pt)),nr+=dt.get(pt))}),nr=nr/Tt.length,Lt.forEach(function(pt){We.has(pt)||dt.set(pt,nr)})}else{var $t=0;Lt.forEach(function(pt){Ve=="horizontal"?$t+=m.has(pt)?w[m.get(pt)]:Ze.get(pt):$t+=m.has(pt)?S[m.get(pt)]:Ze.get(pt)}),$t=$t/Lt.length,Lt.forEach(function(pt){dt.set(pt,$t)})}});for(var Mt=function(){var Tt=Et.shift(),nr=Ie.get(Tt);nr.forEach(function($t){if(dt.get($t.id)<dt.get(Tt)+$t.gap)if(We&&We.has($t.id)){var pt=void 0;if(Ve=="horizontal"?pt=m.has($t.id)?w[m.get($t.id)]:Ze.get($t.id):pt=m.has($t.id)?S[m.get($t.id)]:Ze.get($t.id),dt.set($t.id,pt),pt<dt.get(Tt)+$t.gap){var hr=dt.get(Tt)+$t.gap-pt;vt.get(Tt).forEach(function(Rt){dt.set(Rt,dt.get(Rt)-hr)})}}else dt.set($t.id,dt.get(Tt)+$t.gap);wt.set($t.id,wt.get($t.id)-1),wt.get($t.id)==0&&Et.push($t.id),We&&vt.set($t.id,ft(vt.get(Tt),vt.get($t.id)))})};Et.length!=0;)Mt();if(We){var mt=new Set;Ie.forEach(function(Lt,Tt){Lt.length==0&&mt.add(Tt)});var Dt=[];vt.forEach(function(Lt,Tt){if(mt.has(Tt)){var nr=!1,$t=!0,pt=!1,hr=void 0;try{for(var Rt=Lt[Symbol.iterator](),Bt;!($t=(Bt=Rt.next()).done);$t=!0){var ur=Bt.value;We.has(ur)&&(nr=!0)}}catch(ct){pt=!0,hr=ct}finally{try{!$t&&Rt.return&&Rt.return()}finally{if(pt)throw hr}}if(!nr){var nt=!1,Xe=void 0;Dt.forEach(function(ct,zt){ct.has([].concat(f(Lt))[0])&&(nt=!0,Xe=zt)}),nt?Lt.forEach(function(ct){Dt[Xe].add(ct)}):Dt.push(new Set(Lt))}}}),Dt.forEach(function(Lt,Tt){var nr=Number.POSITIVE_INFINITY,$t=Number.POSITIVE_INFINITY,pt=Number.NEGATIVE_INFINITY,hr=Number.NEGATIVE_INFINITY,Rt=!0,Bt=!1,ur=void 0;try{for(var nt=Lt[Symbol.iterator](),Xe;!(Rt=(Xe=nt.next()).done);Rt=!0){var ct=Xe.value,zt=void 0;Ve=="horizontal"?zt=m.has(ct)?w[m.get(ct)]:Ze.get(ct):zt=m.has(ct)?S[m.get(ct)]:Ze.get(ct);var rr=dt.get(ct);zt<nr&&(nr=zt),zt>pt&&(pt=zt),rr<$t&&($t=rr),rr>hr&&(hr=rr)}}catch(gn){Bt=!0,ur=gn}finally{try{!Rt&&nt.return&&nt.return()}finally{if(Bt)throw ur}}var Zt=(nr+pt)/2-($t+hr)/2,br=!0,Gr=!1,Rr=void 0;try{for(var Fr=Lt[Symbol.iterator](),gr;!(br=(gr=Fr.next()).done);br=!0){var Zr=gr.value;dt.set(Zr,dt.get(Zr)+Zt)}}catch(gn){Gr=!0,Rr=gn}finally{try{!br&&Fr.return&&Fr.return()}finally{if(Gr)throw Rr}}})}return dt},R=function(Ie){var Ve=0,We=0,Ze=0,at=0;if(Ie.forEach(function(vt){vt.left?w[m.get(vt.left)]-w[m.get(vt.right)]>=0?Ve++:We++:S[m.get(vt.top)]-S[m.get(vt.bottom)]>=0?Ze++:at++}),Ve>We&&Ze>at)for(var ft=0;ft<m.size;ft++)w[ft]=-1*w[ft],S[ft]=-1*S[ft];else if(Ve>We)for(var wt=0;wt<m.size;wt++)w[wt]=-1*w[wt];else if(Ze>at)for(var dt=0;dt<m.size;dt++)S[dt]=-1*S[dt]},x=function(Ie){var Ve=[],We=new d,Ze=new Set,at=0;return Ie.forEach(function(ft,wt){if(!Ze.has(wt)){Ve[at]=[];var dt=wt;for(We.push(dt),Ze.add(dt),Ve[at].push(dt);We.length!=0;){dt=We.shift();var vt=Ie.get(dt);vt.forEach(function(Et){Ze.has(Et.id)||(We.push(Et.id),Ze.add(Et.id),Ve[at].push(Et.id))})}at++}}),Ve},B=function(Ie){var Ve=new Map;return Ie.forEach(function(We,Ze){Ve.set(Ze,[])}),Ie.forEach(function(We,Ze){We.forEach(function(at){Ve.get(Ze).push(at),Ve.get(at.id).push({id:Ze,gap:at.gap,direction:at.direction})})}),Ve},D=function(Ie){var Ve=new Map;return Ie.forEach(function(We,Ze){Ve.set(Ze,[])}),Ie.forEach(function(We,Ze){We.forEach(function(at){Ve.get(at.id).push({id:Ze,gap:at.gap,direction:at.direction})})}),Ve},O=[],G=[],V=!1,I=!1,z=new Set,P=new Map,q=new Map,F=[];if(v.fixedNodeConstraint&&v.fixedNodeConstraint.forEach(function(ze){z.add(ze.nodeId)}),v.relativePlacementConstraint&&(v.relativePlacementConstraint.forEach(function(ze){ze.left?(P.has(ze.left)?P.get(ze.left).push({id:ze.right,gap:ze.gap,direction:"horizontal"}):P.set(ze.left,[{id:ze.right,gap:ze.gap,direction:"horizontal"}]),P.has(ze.right)||P.set(ze.right,[])):(P.has(ze.top)?P.get(ze.top).push({id:ze.bottom,gap:ze.gap,direction:"vertical"}):P.set(ze.top,[{id:ze.bottom,gap:ze.gap,direction:"vertical"}]),P.has(ze.bottom)||P.set(ze.bottom,[]))}),q=B(P),F=x(q)),c.TRANSFORM_ON_CONSTRAINT_HANDLING){if(v.fixedNodeConstraint&&v.fixedNodeConstraint.length>1)v.fixedNodeConstraint.forEach(function(ze,Ie){O[Ie]=[ze.position.x,ze.position.y],G[Ie]=[w[m.get(ze.nodeId)],S[m.get(ze.nodeId)]]}),V=!0;else if(v.alignmentConstraint)(function(){var ze=0;if(v.alignmentConstraint.vertical){for(var Ie=v.alignmentConstraint.vertical,Ve=function(dt){var vt=new Set;Ie[dt].forEach(function(mt){vt.add(mt)});var Et=new Set([].concat(f(vt)).filter(function(mt){return z.has(mt)})),Mt=void 0;Et.size>0?Mt=w[m.get(Et.values().next().value)]:Mt=T(vt).x,Ie[dt].forEach(function(mt){O[ze]=[Mt,S[m.get(mt)]],G[ze]=[w[m.get(mt)],S[m.get(mt)]],ze++})},We=0;We<Ie.length;We++)Ve(We);V=!0}if(v.alignmentConstraint.horizontal){for(var Ze=v.alignmentConstraint.horizontal,at=function(dt){var vt=new Set;Ze[dt].forEach(function(mt){vt.add(mt)});var Et=new Set([].concat(f(vt)).filter(function(mt){return z.has(mt)})),Mt=void 0;Et.size>0?Mt=w[m.get(Et.values().next().value)]:Mt=T(vt).y,Ze[dt].forEach(function(mt){O[ze]=[w[m.get(mt)],Mt],G[ze]=[w[m.get(mt)],S[m.get(mt)]],ze++})},ft=0;ft<Ze.length;ft++)at(ft);V=!0}v.relativePlacementConstraint&&(I=!0)})();else if(v.relativePlacementConstraint){for(var U=0,W=0,X=0;X<F.length;X++)F[X].length>U&&(U=F[X].length,W=X);if(U<q.size/2)R(v.relativePlacementConstraint),V=!1,I=!1;else{var te=new Map,ne=new Map,he=[];F[W].forEach(function(ze){P.get(ze).forEach(function(Ie){Ie.direction=="horizontal"?(te.has(ze)?te.get(ze).push(Ie):te.set(ze,[Ie]),te.has(Ie.id)||te.set(Ie.id,[]),he.push({left:ze,right:Ie.id})):(ne.has(ze)?ne.get(ze).push(Ie):ne.set(ze,[Ie]),ne.has(Ie.id)||ne.set(Ie.id,[]),he.push({top:ze,bottom:Ie.id}))})}),R(he),I=!1;var ve=C(te,"horizontal"),Ce=C(ne,"vertical");F[W].forEach(function(ze,Ie){G[Ie]=[w[m.get(ze)],S[m.get(ze)]],O[Ie]=[],ve.has(ze)?O[Ie][0]=ve.get(ze):O[Ie][0]=w[m.get(ze)],Ce.has(ze)?O[Ie][1]=Ce.get(ze):O[Ie][1]=S[m.get(ze)]}),V=!0}}if(V){for(var Le=void 0,K=h.transpose(O),le=h.transpose(G),Z=0;Z<K.length;Z++)K[Z]=h.multGamma(K[Z]),le[Z]=h.multGamma(le[Z]);var ie=h.multMat(K,h.transpose(le)),re=p.svd(ie);Le=h.multMat(re.V,h.transpose(re.U));for(var J=0;J<m.size;J++){var fe=[w[J],S[J]],we=[Le[0][0],Le[1][0]],ge=[Le[0][1],Le[1][1]];w[J]=h.dotProduct(fe,we),S[J]=h.dotProduct(fe,ge)}I&&R(v.relativePlacementConstraint)}}if(c.ENFORCE_CONSTRAINTS){if(v.fixedNodeConstraint&&v.fixedNodeConstraint.length>0){var me={x:0,y:0};v.fixedNodeConstraint.forEach(function(ze,Ie){var Ve={x:w[m.get(ze.nodeId)],y:S[m.get(ze.nodeId)]},We=ze.position,Ze=M(We,Ve);me.x+=Ze.x,me.y+=Ze.y}),me.x/=v.fixedNodeConstraint.length,me.y/=v.fixedNodeConstraint.length,w.forEach(function(ze,Ie){w[Ie]+=me.x}),S.forEach(function(ze,Ie){S[Ie]+=me.y}),v.fixedNodeConstraint.forEach(function(ze){w[m.get(ze.nodeId)]=ze.position.x,S[m.get(ze.nodeId)]=ze.position.y})}if(v.alignmentConstraint){if(v.alignmentConstraint.vertical)for(var ue=v.alignmentConstraint.vertical,ce=function(Ie){var Ve=new Set;ue[Ie].forEach(function(at){Ve.add(at)});var We=new Set([].concat(f(Ve)).filter(function(at){return z.has(at)})),Ze=void 0;We.size>0?Ze=w[m.get(We.values().next().value)]:Ze=T(Ve).x,Ve.forEach(function(at){z.has(at)||(w[m.get(at)]=Ze)})},oe=0;oe<ue.length;oe++)ce(oe);if(v.alignmentConstraint.horizontal)for(var Ae=v.alignmentConstraint.horizontal,Te=function(Ie){var Ve=new Set;Ae[Ie].forEach(function(at){Ve.add(at)});var We=new Set([].concat(f(Ve)).filter(function(at){return z.has(at)})),Ze=void 0;We.size>0?Ze=S[m.get(We.values().next().value)]:Ze=T(Ve).y,Ve.forEach(function(at){z.has(at)||(S[m.get(at)]=Ze)})},Ge=0;Ge<Ae.length;Ge++)Te(Ge)}v.relativePlacementConstraint&&function(){var ze=new Map,Ie=new Map,Ve=new Map,We=new Map,Ze=new Map,at=new Map,ft=new Set,wt=new Set;if(z.forEach(function(cn){ft.add(cn),wt.add(cn)}),v.alignmentConstraint){if(v.alignmentConstraint.vertical)for(var dt=v.alignmentConstraint.vertical,vt=function(vr){Ve.set("dummy"+vr,[]),dt[vr].forEach(function(Pr){ze.set(Pr,"dummy"+vr),Ve.get("dummy"+vr).push(Pr),z.has(Pr)&&ft.add("dummy"+vr)}),Ze.set("dummy"+vr,w[m.get(dt[vr][0])])},Et=0;Et<dt.length;Et++)vt(Et);if(v.alignmentConstraint.horizontal)for(var Mt=v.alignmentConstraint.horizontal,mt=function(vr){We.set("dummy"+vr,[]),Mt[vr].forEach(function(Pr){Ie.set(Pr,"dummy"+vr),We.get("dummy"+vr).push(Pr),z.has(Pr)&&wt.add("dummy"+vr)}),at.set("dummy"+vr,S[m.get(Mt[vr][0])])},Dt=0;Dt<Mt.length;Dt++)mt(Dt)}var Lt=new Map,Tt=new Map,nr=function(vr){P.get(vr).forEach(function(Pr){var Nn=void 0,zr=void 0;Pr.direction=="horizontal"?(Nn=ze.get(vr)?ze.get(vr):vr,ze.get(Pr.id)?zr={id:ze.get(Pr.id),gap:Pr.gap,direction:Pr.direction}:zr=Pr,Lt.has(Nn)?Lt.get(Nn).push(zr):Lt.set(Nn,[zr]),Lt.has(zr.id)||Lt.set(zr.id,[])):(Nn=Ie.get(vr)?Ie.get(vr):vr,Ie.get(Pr.id)?zr={id:Ie.get(Pr.id),gap:Pr.gap,direction:Pr.direction}:zr=Pr,Tt.has(Nn)?Tt.get(Nn).push(zr):Tt.set(Nn,[zr]),Tt.has(zr.id)||Tt.set(zr.id,[]))})},$t=!0,pt=!1,hr=void 0;try{for(var Rt=P.keys()[Symbol.iterator](),Bt;!($t=(Bt=Rt.next()).done);$t=!0){var ur=Bt.value;nr(ur)}}catch(cn){pt=!0,hr=cn}finally{try{!$t&&Rt.return&&Rt.return()}finally{if(pt)throw hr}}var nt=B(Lt),Xe=B(Tt),ct=x(nt),zt=x(Xe),rr=D(Lt),Zt=D(Tt),br=[],Gr=[];ct.forEach(function(cn,vr){br[vr]=[],cn.forEach(function(Pr){rr.get(Pr).length==0&&br[vr].push(Pr)})}),zt.forEach(function(cn,vr){Gr[vr]=[],cn.forEach(function(Pr){Zt.get(Pr).length==0&&Gr[vr].push(Pr)})});var Rr=C(Lt,"horizontal",ft,Ze,br),Fr=C(Tt,"vertical",wt,at,Gr),gr=function(vr){Ve.get(vr)?Ve.get(vr).forEach(function(Pr){w[m.get(Pr)]=Rr.get(vr)}):w[m.get(vr)]=Rr.get(vr)},Zr=!0,gn=!1,Hn=void 0;try{for(var jn=Rr.keys()[Symbol.iterator](),di;!(Zr=(di=jn.next()).done);Zr=!0){var mn=di.value;gr(mn)}}catch(cn){gn=!0,Hn=cn}finally{try{!Zr&&jn.return&&jn.return()}finally{if(gn)throw Hn}}var Gi=function(vr){We.get(vr)?We.get(vr).forEach(function(Pr){S[m.get(Pr)]=Fr.get(vr)}):S[m.get(vr)]=Fr.get(vr)},bi=!0,Fn=!1,yn=void 0;try{for(var xn=Fr.keys()[Symbol.iterator](),$i;!(bi=($i=xn.next()).done);bi=!0){var mn=$i.value;Gi(mn)}}catch(cn){Fn=!0,yn=cn}finally{try{!bi&&xn.return&&xn.return()}finally{if(Fn)throw yn}}}()}for(var Fe=0;Fe<A.length;Fe++){var Re=A[Fe];Re.getChild()==null&&Re.setCenter(w[m.get(Re.id)],S[m.get(Re.id)])}},s.exports=g},551:s=>{s.exports=t}},i={};function a(s){var u=i[s];if(u!==void 0)return u.exports;var l=i[s]={exports:{}};return n[s](l,l.exports,a),l.exports}var o=a(45);return o})()})}(zb)),zb.exports}(function(r,e){(function(n,i){r.exports=i(TH())})(kt,function(t){return(()=>{var n={658:s=>{s.exports=Object.assign!=null?Object.assign.bind(Object):function(u){for(var l=arguments.length,f=Array(l>1?l-1:0),c=1;c<l;c++)f[c-1]=arguments[c];return f.forEach(function(d){Object.keys(d).forEach(function(h){return u[h]=d[h]})}),u}},548:(s,u,l)=>{var f=function(){function h(p,g){var b=[],v=!0,y=!1,m=void 0;try{for(var w=p[Symbol.iterator](),S;!(v=(S=w.next()).done)&&(b.push(S.value),!(g&&b.length===g));v=!0);}catch(A){y=!0,m=A}finally{try{!v&&w.return&&w.return()}finally{if(y)throw m}}return b}return function(p,g){if(Array.isArray(p))return p;if(Symbol.iterator in Object(p))return h(p,g);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=l(140).layoutBase.LinkedList,d={};d.getTopMostNodes=function(h){for(var p={},g=0;g<h.length;g++)p[h[g].id()]=!0;var b=h.filter(function(v,y){typeof v=="number"&&(v=y);for(var m=v.parent()[0];m!=null;){if(p[m.id()])return!1;m=m.parent()[0]}return!0});return b},d.connectComponents=function(h,p,g,b){var v=new c,y=new Set,m=[],w=void 0,S=void 0,A=void 0,_=!1,E=1,k=[],M=[],T=function(){var R=h.collection();M.push(R);var x=g[0],B=h.collection();B.merge(x).merge(x.descendants().intersection(p)),m.push(x),B.forEach(function(G){v.push(G),y.add(G),R.merge(G)});for(var D=function(){x=v.shift();var V=h.collection();x.neighborhood().nodes().forEach(function(q){p.intersection(x.edgesWith(q)).length>0&&V.merge(q)});for(var I=0;I<V.length;I++){var z=V[I];if(w=g.intersection(z.union(z.ancestors())),w!=null&&!y.has(w[0])){var P=w.union(w.descendants());P.forEach(function(q){v.push(q),y.add(q),R.merge(q),g.has(q)&&m.push(q)})}}};v.length!=0;)D();if(R.forEach(function(G){p.intersection(G.connectedEdges()).forEach(function(V){R.has(V.source())&&R.has(V.target())&&R.merge(V)})}),m.length==g.length&&(_=!0),!_||_&&E>1){S=m[0],A=S.connectedEdges().length,m.forEach(function(G){G.connectedEdges().length<A&&(A=G.connectedEdges().length,S=G)}),k.push(S.id());var O=h.collection();O.merge(m[0]),m.forEach(function(G){O.merge(G)}),m=[],g=g.difference(O),E++}};do T();while(!_);return b&&k.length>0&&b.set("dummy"+(b.size+1),k),M},d.relocateComponent=function(h,p,g){if(!g.fixedNodeConstraint){var b=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,y=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY;if(g.quality=="draft"){var w=!0,S=!1,A=void 0;try{for(var _=p.nodeIndexes[Symbol.iterator](),E;!(w=(E=_.next()).done);w=!0){var k=E.value,M=f(k,2),T=M[0],C=M[1],R=g.cy.getElementById(T);if(R){var x=R.boundingBox(),B=p.xCoords[C]-x.w/2,D=p.xCoords[C]+x.w/2,O=p.yCoords[C]-x.h/2,G=p.yCoords[C]+x.h/2;B<b&&(b=B),D>v&&(v=D),O<y&&(y=O),G>m&&(m=G)}}}catch(q){S=!0,A=q}finally{try{!w&&_.return&&_.return()}finally{if(S)throw A}}var V=h.x-(v+b)/2,I=h.y-(m+y)/2;p.xCoords=p.xCoords.map(function(q){return q+V}),p.yCoords=p.yCoords.map(function(q){return q+I})}else{Object.keys(p).forEach(function(q){var F=p[q],U=F.getRect().x,W=F.getRect().x+F.getRect().width,X=F.getRect().y,te=F.getRect().y+F.getRect().height;U<b&&(b=U),W>v&&(v=W),X<y&&(y=X),te>m&&(m=te)});var z=h.x-(v+b)/2,P=h.y-(m+y)/2;Object.keys(p).forEach(function(q){var F=p[q];F.setCenter(F.getCenterX()+z,F.getCenterY()+P)})}}},d.calcBoundingBox=function(h,p,g,b){for(var v=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER,m=Number.MAX_SAFE_INTEGER,w=Number.MIN_SAFE_INTEGER,S=void 0,A=void 0,_=void 0,E=void 0,k=h.descendants().not(":parent"),M=k.length,T=0;T<M;T++){var C=k[T];S=p[b.get(C.id())]-C.width()/2,A=p[b.get(C.id())]+C.width()/2,_=g[b.get(C.id())]-C.height()/2,E=g[b.get(C.id())]+C.height()/2,v>S&&(v=S),y<A&&(y=A),m>_&&(m=_),w<E&&(w=E)}var R={};return R.topLeftX=v,R.topLeftY=m,R.width=y-v,R.height=w-m,R},d.calcParentsWithoutChildren=function(h,p){var g=h.collection();return p.nodes(":parent").forEach(function(b){var v=!1;b.children().forEach(function(y){y.css("display")!="none"&&(v=!0)}),v||g.merge(b)}),g},s.exports=d},816:(s,u,l)=>{var f=l(548),c=l(140).CoSELayout,d=l(140).CoSENode,h=l(140).layoutBase.PointD,p=l(140).layoutBase.DimensionD,g=l(140).layoutBase.LayoutConstants,b=l(140).layoutBase.FDLayoutConstants,v=l(140).CoSEConstants,y=function(w,S){var A=w.cy,_=w.eles,E=_.nodes(),k=_.edges(),M=void 0,T=void 0,C=void 0,R={};w.randomize&&(M=S.nodeIndexes,T=S.xCoords,C=S.yCoords);var x=function(q){return typeof q=="function"},B=function(q,F){return x(q)?q(F):q},D=f.calcParentsWithoutChildren(A,_),O=function P(q,F,U,W){for(var X=F.length,te=0;te<X;te++){var ne=F[te],he=null;ne.intersection(D).length==0&&(he=ne.children());var ve=void 0,Ce=ne.layoutDimensions({nodeDimensionsIncludeLabels:W.nodeDimensionsIncludeLabels});if(ne.outerWidth()!=null&&ne.outerHeight()!=null)if(W.randomize)if(!ne.isParent())ve=q.add(new d(U.graphManager,new h(T[M.get(ne.id())]-Ce.w/2,C[M.get(ne.id())]-Ce.h/2),new p(parseFloat(Ce.w),parseFloat(Ce.h))));else{var Le=f.calcBoundingBox(ne,T,C,M);ne.intersection(D).length==0?ve=q.add(new d(U.graphManager,new h(Le.topLeftX,Le.topLeftY),new p(Le.width,Le.height))):ve=q.add(new d(U.graphManager,new h(Le.topLeftX,Le.topLeftY),new p(parseFloat(Ce.w),parseFloat(Ce.h))))}else ve=q.add(new d(U.graphManager,new h(ne.position("x")-Ce.w/2,ne.position("y")-Ce.h/2),new p(parseFloat(Ce.w),parseFloat(Ce.h))));else ve=q.add(new d(this.graphManager));if(ve.id=ne.data("id"),ve.nodeRepulsion=B(W.nodeRepulsion,ne),ve.paddingLeft=parseInt(ne.css("padding")),ve.paddingTop=parseInt(ne.css("padding")),ve.paddingRight=parseInt(ne.css("padding")),ve.paddingBottom=parseInt(ne.css("padding")),W.nodeDimensionsIncludeLabels&&(ve.labelWidth=ne.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).w,ve.labelHeight=ne.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).h,ve.labelPosVertical=ne.css("text-valign"),ve.labelPosHorizontal=ne.css("text-halign")),R[ne.data("id")]=ve,isNaN(ve.rect.x)&&(ve.rect.x=0),isNaN(ve.rect.y)&&(ve.rect.y=0),he!=null&&he.length>0){var K=void 0;K=U.getGraphManager().add(U.newGraph(),ve),P(K,he,U,W)}}},G=function(q,F,U){for(var W=0,X=0,te=0;te<U.length;te++){var ne=U[te],he=R[ne.data("source")],ve=R[ne.data("target")];if(he&&ve&&he!==ve&&he.getEdgesBetween(ve).length==0){var Ce=F.add(q.newEdge(),he,ve);Ce.id=ne.id(),Ce.idealLength=B(w.idealEdgeLength,ne),Ce.edgeElasticity=B(w.edgeElasticity,ne),W+=Ce.idealLength,X++}}w.idealEdgeLength!=null&&(X>0?v.DEFAULT_EDGE_LENGTH=b.DEFAULT_EDGE_LENGTH=W/X:x(w.idealEdgeLength)?v.DEFAULT_EDGE_LENGTH=b.DEFAULT_EDGE_LENGTH=50:v.DEFAULT_EDGE_LENGTH=b.DEFAULT_EDGE_LENGTH=w.idealEdgeLength,v.MIN_REPULSION_DIST=b.MIN_REPULSION_DIST=b.DEFAULT_EDGE_LENGTH/10,v.DEFAULT_RADIAL_SEPARATION=b.DEFAULT_EDGE_LENGTH)},V=function(q,F){F.fixedNodeConstraint&&(q.constraints.fixedNodeConstraint=F.fixedNodeConstraint),F.alignmentConstraint&&(q.constraints.alignmentConstraint=F.alignmentConstraint),F.relativePlacementConstraint&&(q.constraints.relativePlacementConstraint=F.relativePlacementConstraint)};w.nestingFactor!=null&&(v.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=b.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=w.nestingFactor),w.gravity!=null&&(v.DEFAULT_GRAVITY_STRENGTH=b.DEFAULT_GRAVITY_STRENGTH=w.gravity),w.numIter!=null&&(v.MAX_ITERATIONS=b.MAX_ITERATIONS=w.numIter),w.gravityRange!=null&&(v.DEFAULT_GRAVITY_RANGE_FACTOR=b.DEFAULT_GRAVITY_RANGE_FACTOR=w.gravityRange),w.gravityCompound!=null&&(v.DEFAULT_COMPOUND_GRAVITY_STRENGTH=b.DEFAULT_COMPOUND_GRAVITY_STRENGTH=w.gravityCompound),w.gravityRangeCompound!=null&&(v.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=b.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=w.gravityRangeCompound),w.initialEnergyOnIncremental!=null&&(v.DEFAULT_COOLING_FACTOR_INCREMENTAL=b.DEFAULT_COOLING_FACTOR_INCREMENTAL=w.initialEnergyOnIncremental),w.tilingCompareBy!=null&&(v.TILING_COMPARE_BY=w.tilingCompareBy),w.quality=="proof"?g.QUALITY=2:g.QUALITY=0,v.NODE_DIMENSIONS_INCLUDE_LABELS=b.NODE_DIMENSIONS_INCLUDE_LABELS=g.NODE_DIMENSIONS_INCLUDE_LABELS=w.nodeDimensionsIncludeLabels,v.DEFAULT_INCREMENTAL=b.DEFAULT_INCREMENTAL=g.DEFAULT_INCREMENTAL=!w.randomize,v.ANIMATE=b.ANIMATE=g.ANIMATE=w.animate,v.TILE=w.tile,v.TILING_PADDING_VERTICAL=typeof w.tilingPaddingVertical=="function"?w.tilingPaddingVertical.call():w.tilingPaddingVertical,v.TILING_PADDING_HORIZONTAL=typeof w.tilingPaddingHorizontal=="function"?w.tilingPaddingHorizontal.call():w.tilingPaddingHorizontal,v.DEFAULT_INCREMENTAL=b.DEFAULT_INCREMENTAL=g.DEFAULT_INCREMENTAL=!0,v.PURE_INCREMENTAL=!w.randomize,g.DEFAULT_UNIFORM_LEAF_NODE_SIZES=w.uniformNodeDimensions,w.step=="transformed"&&(v.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,v.ENFORCE_CONSTRAINTS=!1,v.APPLY_LAYOUT=!1),w.step=="enforced"&&(v.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,v.ENFORCE_CONSTRAINTS=!0,v.APPLY_LAYOUT=!1),w.step=="cose"&&(v.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,v.ENFORCE_CONSTRAINTS=!1,v.APPLY_LAYOUT=!0),w.step=="all"&&(w.randomize?v.TRANSFORM_ON_CONSTRAINT_HANDLING=!0:v.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,v.ENFORCE_CONSTRAINTS=!0,v.APPLY_LAYOUT=!0),w.fixedNodeConstraint||w.alignmentConstraint||w.relativePlacementConstraint?v.TREE_REDUCTION_ON_INCREMENTAL=!1:v.TREE_REDUCTION_ON_INCREMENTAL=!0;var I=new c,z=I.newGraphManager();return O(z.addRoot(),f.getTopMostNodes(E),I,w),G(I,z,k),V(I,w),I.runLayout(),R};s.exports={coseLayout:y}},212:(s,u,l)=>{var f=function(){function w(S,A){for(var _=0;_<A.length;_++){var E=A[_];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(S,E.key,E)}}return function(S,A,_){return A&&w(S.prototype,A),_&&w(S,_),S}}();function c(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}var d=l(658),h=l(548),p=l(657),g=p.spectralLayout,b=l(816),v=b.coseLayout,y=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,uniformNodeDimensions:!1,packComponents:!0,step:"all",samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:function(S){return 4500},idealEdgeLength:function(S){return 50},edgeElasticity:function(S){return .45},nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,tilingCompareBy:void 0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:void 0,alignmentConstraint:void 0,relativePlacementConstraint:void 0,ready:function(){},stop:function(){}}),m=function(){function w(S){c(this,w),this.options=d({},y,S)}return f(w,[{key:"run",value:function(){var A=this,_=this.options,E=_.cy,k=_.eles,M=[],T=[],C=void 0,R=[];_.fixedNodeConstraint&&(!Array.isArray(_.fixedNodeConstraint)||_.fixedNodeConstraint.length==0)&&(_.fixedNodeConstraint=void 0),_.alignmentConstraint&&(_.alignmentConstraint.vertical&&(!Array.isArray(_.alignmentConstraint.vertical)||_.alignmentConstraint.vertical.length==0)&&(_.alignmentConstraint.vertical=void 0),_.alignmentConstraint.horizontal&&(!Array.isArray(_.alignmentConstraint.horizontal)||_.alignmentConstraint.horizontal.length==0)&&(_.alignmentConstraint.horizontal=void 0)),_.relativePlacementConstraint&&(!Array.isArray(_.relativePlacementConstraint)||_.relativePlacementConstraint.length==0)&&(_.relativePlacementConstraint=void 0);var x=_.fixedNodeConstraint||_.alignmentConstraint||_.relativePlacementConstraint;x&&(_.tile=!1,_.packComponents=!1);var B=void 0,D=!1;if(E.layoutUtilities&&_.packComponents&&(B=E.layoutUtilities("get"),B||(B=E.layoutUtilities()),D=!0),k.nodes().length>0)if(D){var V=h.getTopMostNodes(_.eles.nodes());if(C=h.connectComponents(E,_.eles,V),C.forEach(function(ie){var re=ie.boundingBox();R.push({x:re.x1+re.w/2,y:re.y1+re.h/2})}),_.randomize&&C.forEach(function(ie){_.eles=ie,M.push(g(_))}),_.quality=="default"||_.quality=="proof"){var I=E.collection();if(_.tile){var z=new Map,P=[],q=[],F=0,U={nodeIndexes:z,xCoords:P,yCoords:q},W=[];if(C.forEach(function(ie,re){ie.edges().length==0&&(ie.nodes().forEach(function(J,fe){I.merge(ie.nodes()[fe]),J.isParent()||(U.nodeIndexes.set(ie.nodes()[fe].id(),F++),U.xCoords.push(ie.nodes()[0].position().x),U.yCoords.push(ie.nodes()[0].position().y))}),W.push(re))}),I.length>1){var X=I.boundingBox();R.push({x:X.x1+X.w/2,y:X.y1+X.h/2}),C.push(I),M.push(U);for(var te=W.length-1;te>=0;te--)C.splice(W[te],1),M.splice(W[te],1),R.splice(W[te],1)}}C.forEach(function(ie,re){_.eles=ie,T.push(v(_,M[re])),h.relocateComponent(R[re],T[re],_)})}else C.forEach(function(ie,re){h.relocateComponent(R[re],M[re],_)});var ne=new Set;if(C.length>1){var he=[],ve=k.filter(function(ie){return ie.css("display")=="none"});C.forEach(function(ie,re){var J=void 0;if(_.quality=="draft"&&(J=M[re].nodeIndexes),ie.nodes().not(ve).length>0){var fe={};fe.edges=[],fe.nodes=[];var we=void 0;ie.nodes().not(ve).forEach(function(ge){if(_.quality=="draft")if(!ge.isParent())we=J.get(ge.id()),fe.nodes.push({x:M[re].xCoords[we]-ge.boundingbox().w/2,y:M[re].yCoords[we]-ge.boundingbox().h/2,width:ge.boundingbox().w,height:ge.boundingbox().h});else{var me=h.calcBoundingBox(ge,M[re].xCoords,M[re].yCoords,J);fe.nodes.push({x:me.topLeftX,y:me.topLeftY,width:me.width,height:me.height})}else T[re][ge.id()]&&fe.nodes.push({x:T[re][ge.id()].getLeft(),y:T[re][ge.id()].getTop(),width:T[re][ge.id()].getWidth(),height:T[re][ge.id()].getHeight()})}),ie.edges().forEach(function(ge){var me=ge.source(),ue=ge.target();if(me.css("display")!="none"&&ue.css("display")!="none")if(_.quality=="draft"){var ce=J.get(me.id()),oe=J.get(ue.id()),Ae=[],Te=[];if(me.isParent()){var Ge=h.calcBoundingBox(me,M[re].xCoords,M[re].yCoords,J);Ae.push(Ge.topLeftX+Ge.width/2),Ae.push(Ge.topLeftY+Ge.height/2)}else Ae.push(M[re].xCoords[ce]),Ae.push(M[re].yCoords[ce]);if(ue.isParent()){var Fe=h.calcBoundingBox(ue,M[re].xCoords,M[re].yCoords,J);Te.push(Fe.topLeftX+Fe.width/2),Te.push(Fe.topLeftY+Fe.height/2)}else Te.push(M[re].xCoords[oe]),Te.push(M[re].yCoords[oe]);fe.edges.push({startX:Ae[0],startY:Ae[1],endX:Te[0],endY:Te[1]})}else T[re][me.id()]&&T[re][ue.id()]&&fe.edges.push({startX:T[re][me.id()].getCenterX(),startY:T[re][me.id()].getCenterY(),endX:T[re][ue.id()].getCenterX(),endY:T[re][ue.id()].getCenterY()})}),fe.nodes.length>0&&(he.push(fe),ne.add(re))}});var Ce=B.packComponents(he,_.randomize).shifts;if(_.quality=="draft")M.forEach(function(ie,re){var J=ie.xCoords.map(function(we){return we+Ce[re].dx}),fe=ie.yCoords.map(function(we){return we+Ce[re].dy});ie.xCoords=J,ie.yCoords=fe});else{var Le=0;ne.forEach(function(ie){Object.keys(T[ie]).forEach(function(re){var J=T[ie][re];J.setCenter(J.getCenterX()+Ce[Le].dx,J.getCenterY()+Ce[Le].dy)}),Le++})}}}else{var O=_.eles.boundingBox();if(R.push({x:O.x1+O.w/2,y:O.y1+O.h/2}),_.randomize){var G=g(_);M.push(G)}_.quality=="default"||_.quality=="proof"?(T.push(v(_,M[0])),h.relocateComponent(R[0],T[0],_)):h.relocateComponent(R[0],M[0],_)}var K=function(re,J){if(_.quality=="default"||_.quality=="proof"){typeof re=="number"&&(re=J);var fe=void 0,we=void 0,ge=re.data("id");return T.forEach(function(ue){ge in ue&&(fe={x:ue[ge].getRect().getCenterX(),y:ue[ge].getRect().getCenterY()},we=ue[ge])}),_.nodeDimensionsIncludeLabels&&(we.labelWidth&&(we.labelPosHorizontal=="left"?fe.x+=we.labelWidth/2:we.labelPosHorizontal=="right"&&(fe.x-=we.labelWidth/2)),we.labelHeight&&(we.labelPosVertical=="top"?fe.y+=we.labelHeight/2:we.labelPosVertical=="bottom"&&(fe.y-=we.labelHeight/2))),fe==null&&(fe={x:re.position("x"),y:re.position("y")}),{x:fe.x,y:fe.y}}else{var me=void 0;return M.forEach(function(ue){var ce=ue.nodeIndexes.get(re.id());ce!=null&&(me={x:ue.xCoords[ce],y:ue.yCoords[ce]})}),me==null&&(me={x:re.position("x"),y:re.position("y")}),{x:me.x,y:me.y}}};if(_.quality=="default"||_.quality=="proof"||_.randomize){var le=h.calcParentsWithoutChildren(E,k),Z=k.filter(function(ie){return ie.css("display")=="none"});_.eles=k.not(Z),k.nodes().not(":parent").not(Z).layoutPositions(A,_,K),le.length>0&&le.forEach(function(ie){ie.position(K(ie))})}else console.log("If randomize option is set to false, then quality option must be 'default' or 'proof'.")}}]),w}();s.exports=m},657:(s,u,l)=>{var f=l(548),c=l(140).layoutBase.Matrix,d=l(140).layoutBase.SVD,h=function(g){var b=g.cy,v=g.eles,y=v.nodes(),m=v.nodes(":parent"),w=new Map,S=new Map,A=new Map,_=[],E=[],k=[],M=[],T=[],C=[],R=[],x=[],B=void 0,D=1e8,O=1e-9,G=g.piTol,V=g.samplingType,I=g.nodeSeparation,z=void 0,P=function(){for(var Ie=0,Ve=0,We=!1;Ve<z;){Ie=Math.floor(Math.random()*B),We=!1;for(var Ze=0;Ze<Ve;Ze++)if(M[Ze]==Ie){We=!0;break}if(!We)M[Ve]=Ie,Ve++;else continue}},q=function(Ie,Ve,We){for(var Ze=[],at=0,ft=0,wt=0,dt=void 0,vt=[],Et=0,Mt=1,mt=0;mt<B;mt++)vt[mt]=D;for(Ze[ft]=Ie,vt[Ie]=0;ft>=at;){wt=Ze[at++];for(var Dt=_[wt],Lt=0;Lt<Dt.length;Lt++)dt=S.get(Dt[Lt]),vt[dt]==D&&(vt[dt]=vt[wt]+1,Ze[++ft]=dt);C[wt][Ve]=vt[wt]*I}if(We){for(var Tt=0;Tt<B;Tt++)C[Tt][Ve]<T[Tt]&&(T[Tt]=C[Tt][Ve]);for(var nr=0;nr<B;nr++)T[nr]>Et&&(Et=T[nr],Mt=nr)}return Mt},F=function(Ie){var Ve=void 0;if(Ie){Ve=Math.floor(Math.random()*B);for(var Ze=0;Ze<B;Ze++)T[Ze]=D;for(var at=0;at<z;at++)M[at]=Ve,Ve=q(Ve,at,Ie)}else{P();for(var We=0;We<z;We++)q(M[We],We,Ie)}for(var ft=0;ft<B;ft++)for(var wt=0;wt<z;wt++)C[ft][wt]*=C[ft][wt];for(var dt=0;dt<z;dt++)R[dt]=[];for(var vt=0;vt<z;vt++)for(var Et=0;Et<z;Et++)R[vt][Et]=C[M[Et]][vt]},U=function(){for(var Ie=d.svd(R),Ve=Ie.S,We=Ie.U,Ze=Ie.V,at=Ve[0]*Ve[0]*Ve[0],ft=[],wt=0;wt<z;wt++){ft[wt]=[];for(var dt=0;dt<z;dt++)ft[wt][dt]=0,wt==dt&&(ft[wt][dt]=Ve[wt]/(Ve[wt]*Ve[wt]+at/(Ve[wt]*Ve[wt])))}x=c.multMat(c.multMat(Ze,ft),c.transpose(We))},W=function(){for(var Ie=void 0,Ve=void 0,We=[],Ze=[],at=[],ft=[],wt=0;wt<B;wt++)We[wt]=Math.random(),Ze[wt]=Math.random();We=c.normalize(We),Ze=c.normalize(Ze);for(var dt=O,vt=O,Et=void 0;;){for(var Mt=0;Mt<B;Mt++)at[Mt]=We[Mt];if(We=c.multGamma(c.multL(c.multGamma(at),C,x)),Ie=c.dotProduct(at,We),We=c.normalize(We),dt=c.dotProduct(at,We),Et=Math.abs(dt/vt),Et<=1+G&&Et>=1)break;vt=dt}for(var mt=0;mt<B;mt++)at[mt]=We[mt];for(vt=O;;){for(var Dt=0;Dt<B;Dt++)ft[Dt]=Ze[Dt];if(ft=c.minusOp(ft,c.multCons(at,c.dotProduct(at,ft))),Ze=c.multGamma(c.multL(c.multGamma(ft),C,x)),Ve=c.dotProduct(ft,Ze),Ze=c.normalize(Ze),dt=c.dotProduct(ft,Ze),Et=Math.abs(dt/vt),Et<=1+G&&Et>=1)break;vt=dt}for(var Lt=0;Lt<B;Lt++)ft[Lt]=Ze[Lt];E=c.multCons(at,Math.sqrt(Math.abs(Ie))),k=c.multCons(ft,Math.sqrt(Math.abs(Ve)))};f.connectComponents(b,v,f.getTopMostNodes(y),w),m.forEach(function(ze){f.connectComponents(b,v,f.getTopMostNodes(ze.descendants().intersection(v)),w)});for(var X=0,te=0;te<y.length;te++)y[te].isParent()||S.set(y[te].id(),X++);var ne=!0,he=!1,ve=void 0;try{for(var Ce=w.keys()[Symbol.iterator](),Le;!(ne=(Le=Ce.next()).done);ne=!0){var K=Le.value;S.set(K,X++)}}catch(ze){he=!0,ve=ze}finally{try{!ne&&Ce.return&&Ce.return()}finally{if(he)throw ve}}for(var le=0;le<S.size;le++)_[le]=[];m.forEach(function(ze){for(var Ie=ze.children().intersection(v);Ie.nodes(":childless").length==0;)Ie=Ie.nodes()[0].children().intersection(v);var Ve=0,We=Ie.nodes(":childless")[0].connectedEdges().length;Ie.nodes(":childless").forEach(function(Ze,at){Ze.connectedEdges().length<We&&(We=Ze.connectedEdges().length,Ve=at)}),A.set(ze.id(),Ie.nodes(":childless")[Ve].id())}),y.forEach(function(ze){var Ie=void 0;ze.isParent()?Ie=S.get(A.get(ze.id())):Ie=S.get(ze.id()),ze.neighborhood().nodes().forEach(function(Ve){v.intersection(ze.edgesWith(Ve)).length>0&&(Ve.isParent()?_[Ie].push(A.get(Ve.id())):_[Ie].push(Ve.id()))})});var Z=function(Ie){var Ve=S.get(Ie),We=void 0;w.get(Ie).forEach(function(Ze){b.getElementById(Ze).isParent()?We=A.get(Ze):We=Ze,_[Ve].push(We),_[S.get(We)].push(Ie)})},ie=!0,re=!1,J=void 0;try{for(var fe=w.keys()[Symbol.iterator](),we;!(ie=(we=fe.next()).done);ie=!0){var ge=we.value;Z(ge)}}catch(ze){re=!0,J=ze}finally{try{!ie&&fe.return&&fe.return()}finally{if(re)throw J}}B=S.size;var me=void 0;if(B>2){z=B<g.sampleSize?B:g.sampleSize;for(var ue=0;ue<B;ue++)C[ue]=[];for(var ce=0;ce<z;ce++)x[ce]=[];return g.quality=="draft"||g.step=="all"?(F(V),U(),W(),me={nodeIndexes:S,xCoords:E,yCoords:k}):(S.forEach(function(ze,Ie){E.push(b.getElementById(Ie).position("x")),k.push(b.getElementById(Ie).position("y"))}),me={nodeIndexes:S,xCoords:E,yCoords:k}),me}else{var oe=S.keys(),Ae=b.getElementById(oe.next().value),Te=Ae.position(),Ge=Ae.outerWidth();if(E.push(Te.x),k.push(Te.y),B==2){var Fe=b.getElementById(oe.next().value),Re=Fe.outerWidth();E.push(Te.x+Ge/2+Re/2+g.idealEdgeLength),k.push(Te.y)}return me={nodeIndexes:S,xCoords:E,yCoords:k},me}};s.exports={spectralLayout:h}},579:(s,u,l)=>{var f=l(212),c=function(h){h&&h("layout","fcose",f)};typeof cytoscape<"u"&&c(cytoscape),s.exports=c},140:s=>{s.exports=t}},i={};function a(s){var u=i[s];if(u!==void 0)return u.exports;var l=i[s]={exports:{}};return n[s](l,l.exports,a),l.exports}var o=a(579);return o})()})})(LP);var kH=LP.exports;const LH=qi(kH);var NP={exports:{}},Gb={},Fc={},$b={},_s={},GT;function PP(){if(GT)return _s;GT=1,Object.defineProperty(_s,"__esModule",{value:!0});var r=function(){function u(l,f,c){this.source=l,this.target=f,this.type=c}return u}();_s.PowerEdge=r;var e=function(){function u(l,f,c,d){var h=this;if(this.linkAccessor=c,this.modules=new Array(l),this.roots=[],d)this.initModulesFromGroup(d);else{this.roots.push(new a);for(var p=0;p<l;++p)this.roots[0].add(this.modules[p]=new n(p))}this.R=f.length,f.forEach(function(g){var b=h.modules[c.getSourceIndex(g)],v=h.modules[c.getTargetIndex(g)],y=c.getType(g);b.outgoing.add(y,v),v.incoming.add(y,b)})}return u.prototype.initModulesFromGroup=function(l){var f=new a;this.roots.push(f);for(var c=0;c<l.leaves.length;++c){var d=l.leaves[c],h=new n(d.id);this.modules[d.id]=h,f.add(h)}if(l.groups)for(var p=0;p<l.groups.length;++p){var g=l.groups[p],b={};for(var v in g)v!=="leaves"&&v!=="groups"&&g.hasOwnProperty(v)&&(b[v]=g[v]);f.add(new n(-1-p,new o,new o,this.initModulesFromGroup(g),b))}return f},u.prototype.merge=function(l,f,c){c===void 0&&(c=0);var d=l.incoming.intersection(f.incoming),h=l.outgoing.intersection(f.outgoing),p=new a;p.add(l),p.add(f);var g=new n(this.modules.length,h,d,p);this.modules.push(g);var b=function(v,y,m){v.forAll(function(w,S){w.forAll(function(A){var _=A[y];_.add(S,g),_.remove(S,l),_.remove(S,f),l[m].remove(S,A),f[m].remove(S,A)})})};return b(h,"incoming","outgoing"),b(d,"outgoing","incoming"),this.R-=d.count()+h.count(),this.roots[c].remove(l),this.roots[c].remove(f),this.roots[c].add(g),g},u.prototype.rootMerges=function(l){l===void 0&&(l=0);for(var f=this.roots[l].modules(),c=f.length,d=new Array(c*(c-1)),h=0,p=0,g=c-1;p<g;++p)for(var b=p+1;b<c;++b){var v=f[p],y=f[b];d[h]={id:h,nEdges:this.nEdges(v,y),a:v,b:y},h++}return d},u.prototype.greedyMerge=function(){for(var l=0;l<this.roots.length;++l)if(!(this.roots[l].modules().length<2)){var f=this.rootMerges(l).sort(function(d,h){return d.nEdges==h.nEdges?d.id-h.id:d.nEdges-h.nEdges}),c=f[0];if(!(c.nEdges>=this.R))return this.merge(c.a,c.b,l),!0}},u.prototype.nEdges=function(l,f){var c=l.incoming.intersection(f.incoming),d=l.outgoing.intersection(f.outgoing);return this.R-c.count()-d.count()},u.prototype.getGroupHierarchy=function(l){var f=this,c=[],d={};t(this.roots[0],d,c);var h=this.allEdges();return h.forEach(function(p){var g=f.modules[p.source],b=f.modules[p.target];l.push(new r(typeof g.gid>"u"?p.source:c[g.gid],typeof b.gid>"u"?p.target:c[b.gid],p.type))}),c},u.prototype.allEdges=function(){var l=[];return u.getEdges(this.roots[0],l),l},u.getEdges=function(l,f){l.forAll(function(c){c.getEdges(f),u.getEdges(c.children,f)})},u}();_s.Configuration=e;function t(u,l,f){u.forAll(function(c){if(c.isLeaf())l.leaves||(l.leaves=[]),l.leaves.push(c.id);else{var d=l;if(c.gid=f.length,!c.isIsland()||c.isPredefined()){if(d={id:c.gid},c.isPredefined())for(var h in c.definition)d[h]=c.definition[h];l.groups||(l.groups=[]),l.groups.push(c.gid),f.push(d)}t(c.children,d,f)}})}var n=function(){function u(l,f,c,d,h){f===void 0&&(f=new o),c===void 0&&(c=new o),d===void 0&&(d=new a),this.id=l,this.outgoing=f,this.incoming=c,this.children=d,this.definition=h}return u.prototype.getEdges=function(l){var f=this;this.outgoing.forAll(function(c,d){c.forAll(function(h){l.push(new r(f.id,h.id,d))})})},u.prototype.isLeaf=function(){return this.children.count()===0},u.prototype.isIsland=function(){return this.outgoing.count()===0&&this.incoming.count()===0},u.prototype.isPredefined=function(){return typeof this.definition<"u"},u}();_s.Module=n;function i(u,l){var f={};for(var c in u)c in l&&(f[c]=u[c]);return f}var a=function(){function u(){this.table={}}return u.prototype.count=function(){return Object.keys(this.table).length},u.prototype.intersection=function(l){var f=new u;return f.table=i(this.table,l.table),f},u.prototype.intersectionCount=function(l){return this.intersection(l).count()},u.prototype.contains=function(l){return l in this.table},u.prototype.add=function(l){this.table[l.id]=l},u.prototype.remove=function(l){delete this.table[l.id]},u.prototype.forAll=function(l){for(var f in this.table)l(this.table[f])},u.prototype.modules=function(){var l=[];return this.forAll(function(f){f.isPredefined()||l.push(f)}),l},u}();_s.ModuleSet=a;var o=function(){function u(){this.sets={},this.n=0}return u.prototype.count=function(){return this.n},u.prototype.contains=function(l){var f=!1;return this.forAllModules(function(c){!f&&c.id==l&&(f=!0)}),f},u.prototype.add=function(l,f){var c=l in this.sets?this.sets[l]:this.sets[l]=new a;c.add(f),++this.n},u.prototype.remove=function(l,f){var c=this.sets[l];c.remove(f),c.count()===0&&delete this.sets[l],--this.n},u.prototype.forAll=function(l){for(var f in this.sets)l(this.sets[f],Number(f))},u.prototype.forAllModules=function(l){this.forAll(function(f,c){return f.forAll(l)})},u.prototype.intersection=function(l){var f=new u;return this.forAll(function(c,d){if(d in l.sets){var h=c.intersection(l.sets[d]),p=h.count();p>0&&(f.sets[d]=h,f.n+=p)}}),f},u}();_s.LinkSets=o;function s(u,l,f,c){for(var d=u.length,h=new e(d,l,f,c);h.greedyMerge(););var p=[],g=h.getGroupHierarchy(p);return p.forEach(function(b){var v=function(y){var m=b[y];typeof m=="number"&&(b[y]=u[m])};v("source"),v("target")}),{groups:g,powerEdges:p}}return _s.getGroups=s,_s}var tl={},$T;function Hw(){if($T)return tl;$T=1,Object.defineProperty(tl,"__esModule",{value:!0});function r(u,l){var f={};for(var c in u)f[c]={};for(var c in l)f[c]={};return Object.keys(f).length}function e(u,l){var f=0;for(var c in u)typeof l[c]<"u"&&++f;return f}function t(u,l){var f={},c=function(d,h){typeof f[d]>"u"&&(f[d]={}),f[d][h]={}};return u.forEach(function(d){var h=l.getSourceIndex(d),p=l.getTargetIndex(d);c(h,p),c(p,h)}),f}function n(u,l,f,c){var d=t(u,c);u.forEach(function(h){var p=d[c.getSourceIndex(h)],g=d[c.getTargetIndex(h)];c.setLength(h,1+l*f(p,g))})}function i(u,l,f){f===void 0&&(f=1),n(u,f,function(c,d){return Math.sqrt(r(c,d)-e(c,d))},l)}tl.symmetricDiffLinkLengths=i;function a(u,l,f){f===void 0&&(f=1),n(u,f,function(c,d){return Math.min(Object.keys(c).length,Object.keys(d).length)<1.1?0:e(c,d)/r(c,d)},l)}tl.jaccardLinkLengths=a;function o(u,l,f,c){var d=s(u,l,c),h={};d.forEach(function(g,b){return g.forEach(function(v){return h[v]=b})});var p=[];return l.forEach(function(g){var b=c.getSourceIndex(g),v=c.getTargetIndex(g),y=h[b],m=h[v];y!==m&&p.push({axis:f,left:b,right:v,gap:c.getMinSeparation(g)})}),p}tl.generateDirectedEdgeConstraints=o;function s(u,l,f){var c=[],d=0,h=[],p=[];function g(k){k.index=k.lowlink=d++,h.push(k),k.onStack=!0;for(var M=0,T=k.out;M<T.length;M++){var C=T[M];typeof C.index>"u"?(g(C),k.lowlink=Math.min(k.lowlink,C.lowlink)):C.onStack&&(k.lowlink=Math.min(k.lowlink,C.index))}if(k.lowlink===k.index){for(var R=[];h.length&&(C=h.pop(),C.onStack=!1,R.push(C),C!==k););p.push(R.map(function(x){return x.id}))}}for(var b=0;b<u;b++)c.push({id:b,out:[]});for(var v=0,y=l;v<y.length;v++){var m=y[v],w=c[f.getSourceIndex(m)],S=c[f.getTargetIndex(m)];w.out.push(S)}for(var A=0,_=c;A<_.length;A++){var E=_[A];typeof E.index>"u"&&g(E)}return p}return tl.stronglyConnectedComponents=s,tl}var pf={},UT;function jw(){if(UT)return pf;UT=1,Object.defineProperty(pf,"__esModule",{value:!0});var r=function(){function n(){this.locks={}}return n.prototype.add=function(i,a){this.locks[i]=a},n.prototype.clear=function(){this.locks={}},n.prototype.isEmpty=function(){for(var i in this.locks)return!1;return!0},n.prototype.apply=function(i){for(var a in this.locks)i(Number(a),this.locks[a])},n}();pf.Locks=r;var e=function(){function n(i,a,o){o===void 0&&(o=null),this.D=a,this.G=o,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new t,this.project=null,this.x=i,this.k=i.length;var s=this.n=i[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new r,this.minD=Number.MAX_VALUE;for(var u=s,l;u--;)for(l=s;--l>u;){var f=a[u][l];f>0&&f<this.minD&&(this.minD=f)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),u=this.k;u--;){for(this.g[u]=new Array(s),this.H[u]=new Array(s),l=s;l--;)this.H[u][l]=new Array(s);this.Hd[u]=new Array(s),this.a[u]=new Array(s),this.b[u]=new Array(s),this.c[u]=new Array(s),this.d[u]=new Array(s),this.e[u]=new Array(s),this.ia[u]=new Array(s),this.ib[u]=new Array(s),this.xtmp[u]=new Array(s)}}return n.createSquareMatrix=function(i,a){for(var o=new Array(i),s=0;s<i;++s){o[s]=new Array(i);for(var u=0;u<i;++u)o[s][u]=a(s,u)}return o},n.prototype.offsetDir=function(){for(var i=this,a=new Array(this.k),o=0,s=0;s<this.k;++s){var u=a[s]=this.random.getNextBetween(.01,1)-.5;o+=u*u}return o=Math.sqrt(o),a.map(function(l){return l*=i.minD/o})},n.prototype.computeDerivatives=function(i){var a=this,o=this.n;if(!(o<1)){for(var s,u=new Array(this.k),l=new Array(this.k),f=new Array(this.k),c=0,d=0;d<o;++d){for(s=0;s<this.k;++s)f[s]=this.g[s][d]=0;for(var h=0;h<o;++h)if(d!==h){for(var p=o;p--;){var g=0;for(s=0;s<this.k;++s){var b=u[s]=i[s][d]-i[s][h];g+=l[s]=b*b}if(g>1e-9)break;var v=this.offsetDir();for(s=0;s<this.k;++s)i[s][h]+=v[s]}var y=Math.sqrt(g),m=this.D[d][h],w=this.G!=null?this.G[d][h]:1;if(w>1&&y>m||!isFinite(m)){for(s=0;s<this.k;++s)this.H[s][d][h]=0;continue}w>1&&(w=1);var S=m*m,A=2*w*(y-m)/(S*y),_=y*y*y,E=2*-w/(S*_);for(isFinite(A)||console.log(A),s=0;s<this.k;++s)this.g[s][d]+=u[s]*A,f[s]-=this.H[s][d][h]=E*(_+m*(l[s]-g)+y*g)}for(s=0;s<this.k;++s)c=Math.max(c,this.H[s][d][d]=f[s])}for(var k=this.snapGridSize/2,M=this.snapGridSize,T=this.snapStrength,C=T/(k*k),R=this.numGridSnapNodes,d=0;d<R;++d)for(s=0;s<this.k;++s){var x=this.x[s][d],B=x/M,D=B%1,O=B-D,G=Math.abs(D),b=G<=.5?x-O*M:x>0?x-(O+1)*M:x-(O-1)*M;-k<b&&b<=k&&(this.scaleSnapByMaxH?(this.g[s][d]+=c*C*b,this.H[s][d][d]+=c*C):(this.g[s][d]+=C*b,this.H[s][d][d]+=C))}this.locks.isEmpty()||this.locks.apply(function(V,I){for(s=0;s<a.k;++s)a.H[s][V][V]+=c,a.g[s][V]-=c*(I[s]-i[s][V])})}},n.dotProd=function(i,a){for(var o=0,s=i.length;s--;)o+=i[s]*a[s];return o},n.rightMultiply=function(i,a,o){for(var s=i.length;s--;)o[s]=n.dotProd(i[s],a)},n.prototype.computeStepSize=function(i){for(var a=0,o=0,s=0;s<this.k;++s)a+=n.dotProd(this.g[s],i[s]),n.rightMultiply(this.H[s],i[s],this.Hd[s]),o+=n.dotProd(i[s],this.Hd[s]);return o===0||!isFinite(o)?0:1*a/o},n.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var i=this.computeStepSize(this.g),a=0;a<this.k;++a)this.takeDescentStep(this.x[a],this.g[a],i);return this.computeStress()},n.copy=function(i,a){for(var o=i.length,s=a[0].length,u=0;u<o;++u)for(var l=0;l<s;++l)a[u][l]=i[u][l]},n.prototype.stepAndProject=function(i,a,o,s){n.copy(i,a),this.takeDescentStep(a[0],o[0],s),this.project&&this.project[0](i[0],i[1],a[0]),this.takeDescentStep(a[1],o[1],s),this.project&&this.project[1](a[0],i[1],a[1]);for(var u=2;u<this.k;u++)this.takeDescentStep(a[u],o[u],s)},n.mApply=function(i,a,o){for(var s=i;s-- >0;)for(var u=a;u-- >0;)o(s,u)},n.prototype.matrixApply=function(i){n.mApply(this.k,this.n,i)},n.prototype.computeNextPosition=function(i,a){var o=this;this.computeDerivatives(i);var s=this.computeStepSize(this.g);if(this.stepAndProject(i,a,this.g,s),this.project){this.matrixApply(function(l,f){return o.e[l][f]=i[l][f]-a[l][f]});var u=this.computeStepSize(this.e);u=Math.max(.2,Math.min(u,1)),this.stepAndProject(i,a,this.e,u)}},n.prototype.run=function(i){for(var a=Number.MAX_VALUE,o=!1;!o&&i-- >0;){var s=this.rungeKutta();o=Math.abs(a/s-1)<this.threshold,a=s}return a},n.prototype.rungeKutta=function(){var i=this;this.computeNextPosition(this.x,this.a),n.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),n.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var a=0;return this.matrixApply(function(o,s){var u=(i.a[o][s]+2*i.b[o][s]+2*i.c[o][s]+i.d[o][s])/6,l=i.x[o][s]-u;a+=l*l,i.x[o][s]=u}),a},n.mid=function(i,a,o){n.mApply(i.length,i[0].length,function(s,u){return o[s][u]=i[s][u]+(a[s][u]-i[s][u])/2})},n.prototype.takeDescentStep=function(i,a,o){for(var s=0;s<this.n;++s)i[s]=i[s]-o*a[s]},n.prototype.computeStress=function(){for(var i=0,a=0,o=this.n-1;a<o;++a)for(var s=a+1,u=this.n;s<u;++s){for(var l=0,f=0;f<this.k;++f){var c=this.x[f][a]-this.x[f][s];l+=c*c}l=Math.sqrt(l);var d=this.D[a][s];if(isFinite(d)){var h=d-l,p=d*d;i+=h*h/p}}return i},n.zeroDistance=1e-10,n}();pf.Descent=e;var t=function(){function n(i){i===void 0&&(i=1),this.seed=i,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return n.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},n.prototype.getNextBetween=function(i,a){return i+this.getNext()*(a-i)},n}();return pf.PseudoRandom=t,pf}var ka={},jo={},HT;function Vw(){if(HT)return jo;HT=1,Object.defineProperty(jo,"__esModule",{value:!0});var r=function(){function s(u){this.scale=u,this.AB=0,this.AD=0,this.A2=0}return s.prototype.addVariable=function(u){var l=this.scale/u.scale,f=u.offset/u.scale,c=u.weight;this.AB+=c*l*f,this.AD+=c*l*u.desiredPosition,this.A2+=c*l*l},s.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},s}();jo.PositionStats=r;var e=function(){function s(u,l,f,c){c===void 0&&(c=!1),this.left=u,this.right=l,this.gap=f,this.equality=c,this.active=!1,this.unsatisfiable=!1,this.left=u,this.right=l,this.gap=f,this.equality=c}return s.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},s}();jo.Constraint=e;var t=function(){function s(u,l,f){l===void 0&&(l=1),f===void 0&&(f=1),this.desiredPosition=u,this.weight=l,this.scale=f,this.offset=0}return s.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},s.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},s.prototype.visitNeighbours=function(u,l){var f=function(c,d){return c.active&&u!==d&&l(c,d)};this.cOut.forEach(function(c){return f(c,c.right)}),this.cIn.forEach(function(c){return f(c,c.left)})},s}();jo.Variable=t;var n=function(){function s(u){this.vars=[],u.offset=0,this.ps=new r(u.scale),this.addVariable(u)}return s.prototype.addVariable=function(u){u.block=this,this.vars.push(u),this.ps.addVariable(u),this.posn=this.ps.getPosn()},s.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var u=0,l=this.vars.length;u<l;++u)this.ps.addVariable(this.vars[u]);this.posn=this.ps.getPosn()},s.prototype.compute_lm=function(u,l,f){var c=this,d=u.dfdv();return u.visitNeighbours(l,function(h,p){var g=c.compute_lm(p,u,f);p===h.right?(d+=g*h.left.scale,h.lm=g):(d+=g*h.right.scale,h.lm=-g),f(h)}),d/u.scale},s.prototype.populateSplitBlock=function(u,l){var f=this;u.visitNeighbours(l,function(c,d){d.offset=u.offset+(d===c.right?c.gap:-c.gap),f.addVariable(d),f.populateSplitBlock(d,u)})},s.prototype.traverse=function(u,l,f,c){var d=this;f===void 0&&(f=this.vars[0]),c===void 0&&(c=null),f.visitNeighbours(c,function(h,p){l.push(u(h)),d.traverse(u,l,p,f)})},s.prototype.findMinLM=function(){var u=null;return this.compute_lm(this.vars[0],null,function(l){!l.equality&&(u===null||l.lm<u.lm)&&(u=l)}),u},s.prototype.findMinLMBetween=function(u,l){this.compute_lm(u,null,function(){});var f=null;return this.findPath(u,null,l,function(c,d){!c.equality&&c.right===d&&(f===null||c.lm<f.lm)&&(f=c)}),f},s.prototype.findPath=function(u,l,f,c){var d=this,h=!1;return u.visitNeighbours(l,function(p,g){!h&&(g===f||d.findPath(g,u,f,c))&&(h=!0,c(p,g))}),h},s.prototype.isActiveDirectedPathBetween=function(u,l){if(u===l)return!0;for(var f=u.cOut.length;f--;){var c=u.cOut[f];if(c.active&&this.isActiveDirectedPathBetween(c.right,l))return!0}return!1},s.split=function(u){return u.active=!1,[s.createSplitBlock(u.left),s.createSplitBlock(u.right)]},s.createSplitBlock=function(u){var l=new s(u);return l.populateSplitBlock(u,null),l},s.prototype.splitBetween=function(u,l){var f=this.findMinLMBetween(u,l);if(f!==null){var c=s.split(f);return{constraint:f,lb:c[0],rb:c[1]}}return null},s.prototype.mergeAcross=function(u,l,f){l.active=!0;for(var c=0,d=u.vars.length;c<d;++c){var h=u.vars[c];h.offset+=f,this.addVariable(h)}this.posn=this.ps.getPosn()},s.prototype.cost=function(){for(var u=0,l=this.vars.length;l--;){var f=this.vars[l],c=f.position()-f.desiredPosition;u+=c*c*f.weight}return u},s}();jo.Block=n;var i=function(){function s(u){this.vs=u;var l=u.length;for(this.list=new Array(l);l--;){var f=new n(u[l]);this.list[l]=f,f.blockInd=l}}return s.prototype.cost=function(){for(var u=0,l=this.list.length;l--;)u+=this.list[l].cost();return u},s.prototype.insert=function(u){u.blockInd=this.list.length,this.list.push(u)},s.prototype.remove=function(u){var l=this.list.length-1,f=this.list[l];this.list.length=l,u!==f&&(this.list[u.blockInd]=f,f.blockInd=u.blockInd)},s.prototype.merge=function(u){var l=u.left.block,f=u.right.block,c=u.right.offset-u.left.offset-u.gap;l.vars.length<f.vars.length?(f.mergeAcross(l,u,c),this.remove(l)):(l.mergeAcross(f,u,-c),this.remove(f))},s.prototype.forEach=function(u){this.list.forEach(u)},s.prototype.updateBlockPositions=function(){this.list.forEach(function(u){return u.updateWeightedPosition()})},s.prototype.split=function(u){var l=this;this.updateBlockPositions(),this.list.forEach(function(f){var c=f.findMinLM();c!==null&&c.lm<a.LAGRANGIAN_TOLERANCE&&(f=c.left.block,n.split(c).forEach(function(d){return l.insert(d)}),l.remove(f),u.push(c))})},s}();jo.Blocks=i;var a=function(){function s(u,l){this.vs=u,this.cs=l,this.vs=u,u.forEach(function(f){f.cIn=[],f.cOut=[]}),this.cs=l,l.forEach(function(f){f.left.cOut.push(f),f.right.cIn.push(f)}),this.inactive=l.map(function(f){return f.active=!1,f}),this.bs=null}return s.prototype.cost=function(){return this.bs.cost()},s.prototype.setStartingPositions=function(u){this.inactive=this.cs.map(function(l){return l.active=!1,l}),this.bs=new i(this.vs),this.bs.forEach(function(l,f){return l.posn=u[f]})},s.prototype.setDesiredPositions=function(u){this.vs.forEach(function(l,f){return l.desiredPosition=u[f]})},s.prototype.mostViolated=function(){for(var u=Number.MAX_VALUE,l=null,f=this.inactive,c=f.length,d=c,h=0;h<c;++h){var p=f[h];if(!p.unsatisfiable){var g=p.slack();if((p.equality||g<u)&&(u=g,l=p,d=h,p.equality))break}}return d!==c&&(u<s.ZERO_UPPERBOUND&&!l.active||l.equality)&&(f[d]=f[c-1],f.length=c-1),l},s.prototype.satisfy=function(){this.bs==null&&(this.bs=new i(this.vs)),this.bs.split(this.inactive);for(var u=null;(u=this.mostViolated())&&(u.equality||u.slack()<s.ZERO_UPPERBOUND&&!u.active);){var l=u.left.block,f=u.right.block;if(l!==f)this.bs.merge(u);else{if(l.isActiveDirectedPathBetween(u.right,u.left)){u.unsatisfiable=!0;continue}var c=l.splitBetween(u.left,u.right);if(c!==null)this.bs.insert(c.lb),this.bs.insert(c.rb),this.bs.remove(l),this.inactive.push(c.constraint);else{u.unsatisfiable=!0;continue}u.slack()>=0?this.inactive.push(u):this.bs.merge(u)}}},s.prototype.solve=function(){this.satisfy();for(var u=Number.MAX_VALUE,l=this.bs.cost();Math.abs(u-l)>1e-4;)this.satisfy(),u=l,l=this.bs.cost();return l},s.LAGRANGIAN_TOLERANCE=-1e-4,s.ZERO_UPPERBOUND=-1e-10,s}();jo.Solver=a;function o(s,u,l){for(var f=s.map(function(_){return new t(_.desiredCenter)}),c=[],d=s.length,h=0;h<d-1;h++){var p=s[h],g=s[h+1];c.push(new e(f[h],f[h+1],(p.size+g.size)/2))}var b=f[0],v=f[d-1],y=s[0].size/2,m=s[d-1].size/2,w=null,S=null;u&&(w=new t(u,b.weight*1e3),f.push(w),c.push(new e(w,b,y))),l&&(S=new t(l,v.weight*1e3),f.push(S),c.push(new e(v,S,m)));var A=new a(f,c);return A.solve(),{newCenters:f.slice(0,s.length).map(function(_){return _.position()}),lowerBound:w?w.position():b.position()-y,upperBound:S?S.position():v.position()+m}}return jo.removeOverlapInOneDimension=o,jo}var vf={},jT;function MP(){if(jT)return vf;jT=1;var r=kt&&kt.__extends||function(){var a=function(o,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var f in l)l.hasOwnProperty(f)&&(u[f]=l[f])},a(o,s)};return function(o,s){a(o,s);function u(){this.constructor=o}o.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}();Object.defineProperty(vf,"__esModule",{value:!0});var e=function(){function a(){this.findIter=function(o){for(var s=this._root,u=this.iterator();s!==null;){var l=this._comparator(o,s.data);if(l===0)return u._cursor=s,u;u._ancestors.push(s),s=s.get_child(l>0)}return null}}return a.prototype.clear=function(){this._root=null,this.size=0},a.prototype.find=function(o){for(var s=this._root;s!==null;){var u=this._comparator(o,s.data);if(u===0)return s.data;s=s.get_child(u>0)}return null},a.prototype.lowerBound=function(o){return this._bound(o,this._comparator)},a.prototype.upperBound=function(o){var s=this._comparator;function u(l,f){return s(f,l)}return this._bound(o,u)},a.prototype.min=function(){var o=this._root;if(o===null)return null;for(;o.left!==null;)o=o.left;return o.data},a.prototype.max=function(){var o=this._root;if(o===null)return null;for(;o.right!==null;)o=o.right;return o.data},a.prototype.iterator=function(){return new t(this)},a.prototype.each=function(o){for(var s=this.iterator(),u;(u=s.next())!==null;)o(u)},a.prototype.reach=function(o){for(var s=this.iterator(),u;(u=s.prev())!==null;)o(u)},a.prototype._bound=function(o,s){for(var u=this._root,l=this.iterator();u!==null;){var f=this._comparator(o,u.data);if(f===0)return l._cursor=u,l;l._ancestors.push(u),u=u.get_child(f>0)}for(var c=l._ancestors.length-1;c>=0;--c)if(u=l._ancestors[c],s(o,u.data)>0)return l._cursor=u,l._ancestors.length=c,l;return l._ancestors.length=0,l},a}();vf.TreeBase=e;var t=function(){function a(o){this._tree=o,this._ancestors=[],this._cursor=null}return a.prototype.data=function(){return this._cursor!==null?this._cursor.data:null},a.prototype.next=function(){if(this._cursor===null){var o=this._tree._root;o!==null&&this._minNode(o)}else if(this._cursor.right===null){var s;do if(s=this._cursor,this._ancestors.length)this._cursor=this._ancestors.pop();else{this._cursor=null;break}while(this._cursor.right===s)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return this._cursor!==null?this._cursor.data:null},a.prototype.prev=function(){if(this._cursor===null){var o=this._tree._root;o!==null&&this._maxNode(o)}else if(this._cursor.left===null){var s;do if(s=this._cursor,this._ancestors.length)this._cursor=this._ancestors.pop();else{this._cursor=null;break}while(this._cursor.left===s)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return this._cursor!==null?this._cursor.data:null},a.prototype._minNode=function(o){for(;o.left!==null;)this._ancestors.push(o),o=o.left;this._cursor=o},a.prototype._maxNode=function(o){for(;o.right!==null;)this._ancestors.push(o),o=o.right;this._cursor=o},a}();vf.Iterator=t;var n=function(){function a(o){this.data=o,this.left=null,this.right=null,this.red=!0}return a.prototype.get_child=function(o){return o?this.right:this.left},a.prototype.set_child=function(o,s){o?this.right=s:this.left=s},a}(),i=function(a){r(o,a);function o(s){var u=a.call(this)||this;return u._root=null,u._comparator=s,u.size=0,u}return o.prototype.insert=function(s){var u=!1;if(this._root===null)this._root=new n(s),u=!0,this.size++;else{var l=new n(void 0),f=!1,c=!1,d=null,h=l,p=null,g=this._root;for(h.right=this._root;;){if(g===null?(g=new n(s),p.set_child(f,g),u=!0,this.size++):o.is_red(g.left)&&o.is_red(g.right)&&(g.red=!0,g.left.red=!1,g.right.red=!1),o.is_red(g)&&o.is_red(p)){var b=h.right===d;g===p.get_child(c)?h.set_child(b,o.single_rotate(d,!c)):h.set_child(b,o.double_rotate(d,!c))}var v=this._comparator(g.data,s);if(v===0)break;c=f,f=v<0,d!==null&&(h=d),d=p,p=g,g=g.get_child(f)}this._root=l.right}return this._root.red=!1,u},o.prototype.remove=function(s){if(this._root===null)return!1;var u=new n(void 0),l=u;l.right=this._root;for(var f=null,c=null,d=null,h=!0;l.get_child(h)!==null;){var p=h;c=f,f=l,l=l.get_child(h);var g=this._comparator(s,l.data);if(h=g>0,g===0&&(d=l),!o.is_red(l)&&!o.is_red(l.get_child(h))){if(o.is_red(l.get_child(!h))){var b=o.single_rotate(l,h);f.set_child(p,b),f=b}else if(!o.is_red(l.get_child(!h))){var v=f.get_child(!p);if(v!==null)if(!o.is_red(v.get_child(!p))&&!o.is_red(v.get_child(p)))f.red=!1,v.red=!0,l.red=!0;else{var y=c.right===f;o.is_red(v.get_child(p))?c.set_child(y,o.double_rotate(f,p)):o.is_red(v.get_child(!p))&&c.set_child(y,o.single_rotate(f,p));var m=c.get_child(y);m.red=!0,l.red=!0,m.left.red=!1,m.right.red=!1}}}}return d!==null&&(d.data=l.data,f.set_child(f.right===l,l.get_child(l.left===null)),this.size--),this._root=u.right,this._root!==null&&(this._root.red=!1),d!==null},o.is_red=function(s){return s!==null&&s.red},o.single_rotate=function(s,u){var l=s.get_child(!u);return s.set_child(!u,l.get_child(u)),l.set_child(u,s),s.red=!0,l.red=!1,l},o.double_rotate=function(s,u){return s.set_child(!u,o.single_rotate(s.get_child(!u),!u)),o.single_rotate(s,u)},o}(e);return vf.RBTree=i,vf}var VT;function Xh(){if(VT)return ka;VT=1;var r=kt&&kt.__extends||function(){var E=function(k,M){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,C){T.__proto__=C}||function(T,C){for(var R in C)C.hasOwnProperty(R)&&(T[R]=C[R])},E(k,M)};return function(k,M){E(k,M);function T(){this.constructor=k}k.prototype=M===null?Object.create(M):(T.prototype=M.prototype,new T)}}();Object.defineProperty(ka,"__esModule",{value:!0});var e=Vw(),t=MP();function n(E){return E.bounds=typeof E.leaves<"u"?E.leaves.reduce(function(k,M){return M.bounds.union(k)},i.empty()):i.empty(),typeof E.groups<"u"&&(E.bounds=E.groups.reduce(function(k,M){return n(M).union(k)},E.bounds)),E.bounds=E.bounds.inflate(E.padding),E.bounds}ka.computeGroupBounds=n;var i=function(){function E(k,M,T,C){this.x=k,this.X=M,this.y=T,this.Y=C}return E.empty=function(){return new E(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},E.prototype.cx=function(){return(this.x+this.X)/2},E.prototype.cy=function(){return(this.y+this.Y)/2},E.prototype.overlapX=function(k){var M=this.cx(),T=k.cx();return M<=T&&k.x<this.X?this.X-k.x:T<=M&&this.x<k.X?k.X-this.x:0},E.prototype.overlapY=function(k){var M=this.cy(),T=k.cy();return M<=T&&k.y<this.Y?this.Y-k.y:T<=M&&this.y<k.Y?k.Y-this.y:0},E.prototype.setXCentre=function(k){var M=k-this.cx();this.x+=M,this.X+=M},E.prototype.setYCentre=function(k){var M=k-this.cy();this.y+=M,this.Y+=M},E.prototype.width=function(){return this.X-this.x},E.prototype.height=function(){return this.Y-this.y},E.prototype.union=function(k){return new E(Math.min(this.x,k.x),Math.max(this.X,k.X),Math.min(this.y,k.y),Math.max(this.Y,k.Y))},E.prototype.lineIntersections=function(k,M,T,C){for(var R=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],x=[],B=0;B<4;++B){var D=E.lineIntersection(k,M,T,C,R[B][0],R[B][1],R[B][2],R[B][3]);D!==null&&x.push({x:D.x,y:D.y})}return x},E.prototype.rayIntersection=function(k,M){var T=this.lineIntersections(this.cx(),this.cy(),k,M);return T.length>0?T[0]:null},E.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y}]},E.lineIntersection=function(k,M,T,C,R,x,B,D){var O=T-k,G=B-R,V=C-M,I=D-x,z=I*O-G*V;if(z==0)return null;var P=k-R,q=M-x,F=G*q-I*P,U=F/z,W=O*q-V*P,X=W/z;return U>=0&&U<=1&&X>=0&&X<=1?{x:k+U*O,y:M+U*V}:null},E.prototype.inflate=function(k){return new E(this.x-k,this.X+k,this.y-k,this.Y+k)},E}();ka.Rectangle=i;function a(E,k,M){var T=E.rayIntersection(k.cx(),k.cy())||{x:E.cx(),y:E.cy()},C=k.rayIntersection(E.cx(),E.cy())||{x:k.cx(),y:k.cy()},R=C.x-T.x,x=C.y-T.y,B=Math.sqrt(R*R+x*x),D=B-M;return{sourceIntersection:T,targetIntersection:C,arrowStart:{x:T.x+D*R/B,y:T.y+D*x/B}}}ka.makeEdgeBetween=a;function o(E,k,M){var T=k.rayIntersection(E.x,E.y);T||(T={x:k.cx(),y:k.cy()});var C=T.x-E.x,R=T.y-E.y,x=Math.sqrt(C*C+R*R);return{x:T.x-M*C/x,y:T.y-M*R/x}}ka.makeEdgeTo=o;var s=function(){function E(k,M,T){this.v=k,this.r=M,this.pos=T,this.prev=f(),this.next=f()}return E}(),u=function(){function E(k,M,T){this.isOpen=k,this.v=M,this.pos=T}return E}();function l(E,k){return E.pos>k.pos?1:E.pos<k.pos||E.isOpen?-1:k.isOpen?1:0}function f(){return new t.RBTree(function(E,k){return E.pos-k.pos})}var c={getCentre:function(E){return E.cx()},getOpen:function(E){return E.y},getClose:function(E){return E.Y},getSize:function(E){return E.width()},makeRect:function(E,k,M,T){return new i(M-T/2,M+T/2,E,k)},findNeighbours:g},d={getCentre:function(E){return E.cy()},getOpen:function(E){return E.x},getClose:function(E){return E.X},getSize:function(E){return E.height()},makeRect:function(E,k,M,T){return new i(E,k,M-T/2,M+T/2)},findNeighbours:b};function h(E,k,M,T){T===void 0&&(T=!1);var C=E.padding,R=typeof E.groups<"u"?E.groups.length:0,x=typeof E.leaves<"u"?E.leaves.length:0,B=R?E.groups.reduce(function(ne,he){return ne.concat(h(he,k,M,!0))},[]):[],D=(T?2:0)+x+R,O=new Array(D),G=new Array(D),V=0,I=function(ne,he){G[V]=ne,O[V++]=he};if(T){var z=E.bounds,P=k.getCentre(z),q=k.getSize(z)/2,F=k.getOpen(z),U=k.getClose(z),W=P-q+C/2,X=P+q-C/2;E.minVar.desiredPosition=W,I(k.makeRect(F,U,W,C),E.minVar),E.maxVar.desiredPosition=X,I(k.makeRect(F,U,X,C),E.maxVar)}x&&E.leaves.forEach(function(ne){return I(ne.bounds,ne.variable)}),R&&E.groups.forEach(function(ne){var he=ne.bounds;I(k.makeRect(k.getOpen(he),k.getClose(he),k.getCentre(he),k.getSize(he)),ne.minVar)});var te=p(G,O,k,M);return R&&(O.forEach(function(ne){ne.cOut=[],ne.cIn=[]}),te.forEach(function(ne){ne.left.cOut.push(ne),ne.right.cIn.push(ne)}),E.groups.forEach(function(ne){var he=(ne.padding-k.getSize(ne.bounds))/2;ne.minVar.cIn.forEach(function(ve){return ve.gap+=he}),ne.minVar.cOut.forEach(function(ve){ve.left=ne.maxVar,ve.gap+=he})})),B.concat(te)}function p(E,k,M,T){var C,R=E.length,x=2*R;console.assert(k.length>=R);var B=new Array(x);for(C=0;C<R;++C){var D=E[C],O=new s(k[C],D,M.getCentre(D));B[C]=new u(!0,O,M.getOpen(D)),B[C+R]=new u(!1,O,M.getClose(D))}B.sort(l);var G=new Array,V=f();for(C=0;C<x;++C){var I=B[C],O=I.v;if(I.isOpen)V.insert(O),M.findNeighbours(O,V);else{V.remove(O);var z=function(F,U){var W=(M.getSize(F.r)+M.getSize(U.r))/2+T;G.push(new e.Constraint(F.v,U.v,W))},P=function(F,U,W){for(var X,te=O[F].iterator();(X=te[F]())!==null;)W(X,O),X[U].remove(O)};P("prev","next",function(F,U){return z(F,U)}),P("next","prev",function(F,U){return z(U,F)})}}return console.assert(V.size===0),G}function g(E,k){var M=function(T,C){for(var R=k.findIter(E),x;(x=R[T]())!==null;){var B=x.r.overlapX(E.r);if((B<=0||B<=x.r.overlapY(E.r))&&(E[T].insert(x),x[C].insert(E)),B<=0)break}};M("next","prev"),M("prev","next")}function b(E,k){var M=function(T,C){var R=k.findIter(E)[T]();R!==null&&R.r.overlapX(E.r)>0&&(E[T].insert(R),R[C].insert(E))};M("next","prev"),M("prev","next")}function v(E,k){return p(E,k,c,1e-6)}ka.generateXConstraints=v;function y(E,k){return p(E,k,d,1e-6)}ka.generateYConstraints=y;function m(E){return h(E,c,1e-6)}ka.generateXGroupConstraints=m;function w(E){return h(E,d,1e-6)}ka.generateYGroupConstraints=w;function S(E){var k=E.map(function(C){return new e.Variable(C.cx())}),M=v(E,k),T=new e.Solver(k,M);T.solve(),k.forEach(function(C,R){return E[R].setXCentre(C.position())}),k=E.map(function(C){return new e.Variable(C.cy())}),M=y(E,k),T=new e.Solver(k,M),T.solve(),k.forEach(function(C,R){return E[R].setYCentre(C.position())})}ka.removeOverlaps=S;var A=function(E){r(k,E);function k(M,T){var C=E.call(this,0,T)||this;return C.index=M,C}return k}(e.Variable);ka.IndexedVariable=A;var _=function(){function E(k,M,T,C,R){var x=this;if(T===void 0&&(T=null),C===void 0&&(C=null),R===void 0&&(R=!1),this.nodes=k,this.groups=M,this.rootGroup=T,this.avoidOverlaps=R,this.variables=k.map(function(D,O){return D.variable=new A(O,1)}),C&&this.createConstraints(C),R&&T&&typeof T.groups<"u"){k.forEach(function(D){if(!D.width||!D.height){D.bounds=new i(D.x,D.x,D.y,D.y);return}var O=D.width/2,G=D.height/2;D.bounds=new i(D.x-O,D.x+O,D.y-G,D.y+G)}),n(T);var B=k.length;M.forEach(function(D){x.variables[B]=D.minVar=new A(B++,typeof D.stiffness<"u"?D.stiffness:.01),x.variables[B]=D.maxVar=new A(B++,typeof D.stiffness<"u"?D.stiffness:.01)})}}return E.prototype.createSeparation=function(k){return new e.Constraint(this.nodes[k.left].variable,this.nodes[k.right].variable,k.gap,typeof k.equality<"u"?k.equality:!1)},E.prototype.makeFeasible=function(k){var M=this;if(this.avoidOverlaps){var T="x",C="width";k.axis==="x"&&(T="y",C="height");var R=k.offsets.map(function(B){return M.nodes[B.node]}).sort(function(B,D){return B[T]-D[T]}),x=null;R.forEach(function(B){if(x){var D=x[T]+x[C];D>B[T]&&(B[T]=D)}x=B})}},E.prototype.createAlignment=function(k){var M=this,T=this.nodes[k.offsets[0].node].variable;this.makeFeasible(k);var C=k.axis==="x"?this.xConstraints:this.yConstraints;k.offsets.slice(1).forEach(function(R){var x=M.nodes[R.node].variable;C.push(new e.Constraint(T,x,R.offset,!0))})},E.prototype.createConstraints=function(k){var M=this,T=function(C){return typeof C.type>"u"||C.type==="separation"};this.xConstraints=k.filter(function(C){return C.axis==="x"&&T(C)}).map(function(C){return M.createSeparation(C)}),this.yConstraints=k.filter(function(C){return C.axis==="y"&&T(C)}).map(function(C){return M.createSeparation(C)}),k.filter(function(C){return C.type==="alignment"}).forEach(function(C){return M.createAlignment(C)})},E.prototype.setupVariablesAndBounds=function(k,M,T,C){this.nodes.forEach(function(R,x){R.fixed?(R.variable.weight=R.fixedWeight?R.fixedWeight:1e3,T[x]=C(R)):R.variable.weight=1;var B=(R.width||0)/2,D=(R.height||0)/2,O=k[x],G=M[x];R.bounds=new i(O-B,O+B,G-D,G+D)})},E.prototype.xProject=function(k,M,T){!this.rootGroup&&!(this.avoidOverlaps||this.xConstraints)||this.project(k,M,k,T,function(C){return C.px},this.xConstraints,m,function(C){return C.bounds.setXCentre(T[C.variable.index]=C.variable.position())},function(C){var R=T[C.minVar.index]=C.minVar.position(),x=T[C.maxVar.index]=C.maxVar.position(),B=C.padding/2;C.bounds.x=R-B,C.bounds.X=x+B})},E.prototype.yProject=function(k,M,T){!this.rootGroup&&!this.yConstraints||this.project(k,M,M,T,function(C){return C.py},this.yConstraints,w,function(C){return C.bounds.setYCentre(T[C.variable.index]=C.variable.position())},function(C){var R=T[C.minVar.index]=C.minVar.position(),x=T[C.maxVar.index]=C.maxVar.position(),B=C.padding/2;C.bounds.y=R-B,C.bounds.Y=x+B})},E.prototype.projectFunctions=function(){var k=this;return[function(M,T,C){return k.xProject(M,T,C)},function(M,T,C){return k.yProject(M,T,C)}]},E.prototype.project=function(k,M,T,C,R,x,B,D,O){this.setupVariablesAndBounds(k,M,C,R),this.rootGroup&&this.avoidOverlaps&&(n(this.rootGroup),x=x.concat(B(this.rootGroup))),this.solve(this.variables,x,T,C),this.nodes.forEach(D),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(O),n(this.rootGroup))},E.prototype.solve=function(k,M,T,C){var R=new e.Solver(k,M);R.setStartingPositions(T),R.setDesiredPositions(C),R.solve()},E}();return ka.Projection=_,ka}var $d={},Bc={},WT;function OP(){if(WT)return Bc;WT=1,Object.defineProperty(Bc,"__esModule",{value:!0});var r=function(){function t(n){this.elem=n,this.subheaps=[]}return t.prototype.toString=function(n){for(var i="",a=!1,o=0;o<this.subheaps.length;++o){var s=this.subheaps[o];if(!s.elem){a=!1;continue}a&&(i=i+","),i=i+s.toString(n),a=!0}return i!==""&&(i="("+i+")"),(this.elem?n(this.elem):"")+i},t.prototype.forEach=function(n){this.empty()||(n(this.elem,this),this.subheaps.forEach(function(i){return i.forEach(n)}))},t.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce(function(n,i){return n+i.count()},0)},t.prototype.min=function(){return this.elem},t.prototype.empty=function(){return this.elem==null},t.prototype.contains=function(n){if(this===n)return!0;for(var i=0;i<this.subheaps.length;i++)if(this.subheaps[i].contains(n))return!0;return!1},t.prototype.isHeap=function(n){var i=this;return this.subheaps.every(function(a){return n(i.elem,a.elem)&&a.isHeap(n)})},t.prototype.insert=function(n,i){return this.merge(new t(n),i)},t.prototype.merge=function(n,i){return this.empty()?n:n.empty()?this:i(this.elem,n.elem)?(this.subheaps.push(n),this):(n.subheaps.push(this),n)},t.prototype.removeMin=function(n){return this.empty()?null:this.mergePairs(n)},t.prototype.mergePairs=function(n){if(this.subheaps.length==0)return new t(null);if(this.subheaps.length==1)return this.subheaps[0];var i=this.subheaps.pop().merge(this.subheaps.pop(),n),a=this.mergePairs(n);return i.merge(a,n)},t.prototype.decreaseKey=function(n,i,a,o){var s=n.removeMin(o);n.elem=s.elem,n.subheaps=s.subheaps,a!==null&&s.elem!==null&&a(n.elem,n);var u=new t(i);return a!==null&&a(i,u),this.merge(u,o)},t}();Bc.PairingHeap=r;var e=function(){function t(n){this.lessThan=n}return t.prototype.top=function(){return this.empty()?null:this.root.elem},t.prototype.push=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];for(var a,o=0,s;s=n[o];++o)a=new r(s),this.root=this.empty()?a:this.root.merge(a,this.lessThan);return a},t.prototype.empty=function(){return!this.root||!this.root.elem},t.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},t.prototype.forEach=function(n){this.root.forEach(n)},t.prototype.pop=function(){if(this.empty())return null;var n=this.root.min();return this.root=this.root.removeMin(this.lessThan),n},t.prototype.reduceKey=function(n,i,a){a===void 0&&(a=null),this.root=this.root.decreaseKey(n,i,a,this.lessThan)},t.prototype.toString=function(n){return this.root.toString(n)},t.prototype.count=function(){return this.root.count()},t}();return Bc.PriorityQueue=e,Bc}var YT;function xv(){if(YT)return $d;YT=1,Object.defineProperty($d,"__esModule",{value:!0});var r=OP(),e=function(){function a(o,s){this.id=o,this.distance=s}return a}(),t=function(){function a(o){this.id=o,this.neighbours=[]}return a}(),n=function(){function a(o,s,u){this.node=o,this.prev=s,this.d=u}return a}(),i=function(){function a(o,s,u,l,f){this.n=o,this.es=s,this.neighbours=new Array(this.n);for(var c=this.n;c--;)this.neighbours[c]=new t(c);for(c=this.es.length;c--;){var d=this.es[c],h=u(d),p=l(d),g=f(d);this.neighbours[h].neighbours.push(new e(p,g)),this.neighbours[p].neighbours.push(new e(h,g))}}return a.prototype.DistanceMatrix=function(){for(var o=new Array(this.n),s=0;s<this.n;++s)o[s]=this.dijkstraNeighbours(s);return o},a.prototype.DistancesFromNode=function(o){return this.dijkstraNeighbours(o)},a.prototype.PathFromNodeToNode=function(o,s){return this.dijkstraNeighbours(o,s)},a.prototype.PathFromNodeToNodeWithPrevCost=function(o,s,u){var l=new r.PriorityQueue(function(w,S){return w.d<=S.d}),f=this.neighbours[o],c=new n(f,null,0),d={};for(l.push(c);!l.empty()&&(c=l.pop(),f=c.node,f.id!==s);)for(var h=f.neighbours.length;h--;){var p=f.neighbours[h],g=this.neighbours[p.id];if(!(c.prev&&g.id===c.prev.node.id)){var b=g.id+","+f.id;if(!(b in d&&d[b]<=c.d)){var v=c.prev?u(c.prev.node.id,f.id,g.id):0,y=c.d+p.distance+v;d[b]=y,l.push(new n(g,c,y))}}}for(var m=[];c.prev;)c=c.prev,m.push(c.node.id);return m},a.prototype.dijkstraNeighbours=function(o,s){s===void 0&&(s=-1);for(var u=new r.PriorityQueue(function(v,y){return v.d<=y.d}),l=this.neighbours.length,f=new Array(l);l--;){var c=this.neighbours[l];c.d=l===o?0:Number.POSITIVE_INFINITY,c.q=u.push(c)}for(;!u.empty();){var d=u.pop();if(f[d.id]=d.d,d.id===s){for(var h=[],p=d;typeof p.prev<"u";)h.push(p.prev.id),p=p.prev;return h}for(l=d.neighbours.length;l--;){var g=d.neighbours[l],p=this.neighbours[g.id],b=d.d+g.distance;d.d!==Number.MAX_VALUE&&p.d>b&&(p.d=b,p.prev=d,u.reduceKey(p.q,p,function(y,m){return y.q=m}))}}return f},a}();return $d.Calculator=i,$d}var oi={},XT;function DP(){if(XT)return oi;XT=1;var r=kt&&kt.__extends||function(){var R=function(x,B){return R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,O){D.__proto__=O}||function(D,O){for(var G in O)O.hasOwnProperty(G)&&(D[G]=O[G])},R(x,B)};return function(x,B){R(x,B);function D(){this.constructor=x}x.prototype=B===null?Object.create(B):(D.prototype=B.prototype,new D)}}();Object.defineProperty(oi,"__esModule",{value:!0});var e=Xh(),t=function(){function R(){}return R}();oi.Point=t;var n=function(){function R(x,B,D,O){this.x1=x,this.y1=B,this.x2=D,this.y2=O}return R}();oi.LineSegment=n;var i=function(R){r(x,R);function x(){return R!==null&&R.apply(this,arguments)||this}return x}(t);oi.PolyPoint=i;function a(R,x,B){return(x.x-R.x)*(B.y-R.y)-(B.x-R.x)*(x.y-R.y)}oi.isLeft=a;function o(R,x,B){return a(R,x,B)>0}function s(R,x,B){return a(R,x,B)<0}function u(R){var x=R.slice(0).sort(function(U,W){return U.x!==W.x?W.x-U.x:W.y-U.y}),B=R.length,D,O=0,G=x[0].x;for(D=1;D<B&&x[D].x===G;++D);var V=D-1,I=[];if(I.push(x[O]),V===B-1)x[V].y!==x[O].y&&I.push(x[V]);else{var z,P=B-1,q=x[B-1].x;for(D=B-2;D>=0&&x[D].x===q;D--);for(z=D+1,D=V;++D<=z;)if(!(a(x[O],x[z],x[D])>=0&&D<z)){for(;I.length>1&&!(a(I[I.length-2],I[I.length-1],x[D])>0);)I.length-=1;D!=O&&I.push(x[D])}P!=z&&I.push(x[P]);var F=I.length;for(D=z;--D>=V;)if(!(a(x[P],x[V],x[D])>=0&&D>V)){for(;I.length>F&&!(a(I[I.length-2],I[I.length-1],x[D])>0);)I.length-=1;D!=O&&I.push(x[D])}}return I}oi.ConvexHull=u;function l(R,x,B){x.slice(0).sort(function(D,O){return Math.atan2(D.y-R.y,D.x-R.x)-Math.atan2(O.y-R.y,O.x-R.x)}).forEach(B)}oi.clockwiseRadialSweep=l;function f(R,x){var B=x.slice(0);return B.push(x[0]),{rtan:c(R,B),ltan:d(R,B)}}function c(R,x){var B=x.length-1,D,O,G,V,I;if(s(R,x[1],x[0])&&!o(R,x[B-1],x[0]))return 0;for(D=0,O=B;;){if(O-D===1)return o(R,x[D],x[O])?D:O;if(G=Math.floor((D+O)/2),I=s(R,x[G+1],x[G]),I&&!o(R,x[G-1],x[G]))return G;V=o(R,x[D+1],x[D]),V?I||o(R,x[D],x[G])?O=G:D=G:I&&s(R,x[D],x[G])?O=G:D=G}}function d(R,x){var B=x.length-1,D,O,G,V,I;if(o(R,x[B-1],x[0])&&!s(R,x[1],x[0]))return 0;for(D=0,O=B;;){if(O-D===1)return s(R,x[D],x[O])?D:O;if(G=Math.floor((D+O)/2),I=s(R,x[G+1],x[G]),o(R,x[G-1],x[G])&&!I)return G;V=s(R,x[D+1],x[D]),V?I?s(R,x[D],x[G])?O=G:D=G:O=G:I?D=G:o(R,x[D],x[G])?O=G:D=G}}function h(R,x,B,D,O,G){var V,I;V=B(x[0],R),I=D(R[V],x);for(var z=!1;!z;){for(z=!0;V===R.length-1&&(V=0),!O(x[I],R[V],R[V+1]);)++V;for(;I===0&&(I=x.length-1),!G(R[V],x[I],x[I-1]);)--I,z=!1}return{t1:V,t2:I}}oi.tangent_PolyPolyC=h;function p(R,x){var B=g(x,R);return{t1:B.t2,t2:B.t1}}oi.LRtangent_PolyPolyC=p;function g(R,x){return h(R,x,c,d,o,s)}oi.RLtangent_PolyPolyC=g;function b(R,x){return h(R,x,d,d,s,s)}oi.LLtangent_PolyPolyC=b;function v(R,x){return h(R,x,c,c,o,o)}oi.RRtangent_PolyPolyC=v;var y=function(){function R(x,B){this.t1=x,this.t2=B}return R}();oi.BiTangent=y;var m=function(){function R(){}return R}();oi.BiTangents=m;var w=function(R){r(x,R);function x(){return R!==null&&R.apply(this,arguments)||this}return x}(t);oi.TVGPoint=w;var S=function(){function R(x,B,D,O){this.id=x,this.polyid=B,this.polyvertid=D,this.p=O,O.vv=this}return R}();oi.VisibilityVertex=S;var A=function(){function R(x,B){this.source=x,this.target=B}return R.prototype.length=function(){var x=this.source.p.x-this.target.p.x,B=this.source.p.y-this.target.p.y;return Math.sqrt(x*x+B*B)},R}();oi.VisibilityEdge=A;var _=function(){function R(x,B){if(this.P=x,this.V=[],this.E=[],B)this.V=B.V.slice(0),this.E=B.E.slice(0);else{for(var D=x.length,O=0;O<D;O++){for(var G=x[O],V=0;V<G.length;++V){var I=G[V],z=new S(this.V.length,O,V,I);this.V.push(z),V>0&&this.E.push(new A(G[V-1].vv,z))}G.length>1&&this.E.push(new A(G[0].vv,G[G.length-1].vv))}for(var O=0;O<D-1;O++)for(var P=x[O],V=O+1;V<D;V++){var q=x[V],F=k(P,q);for(var U in F){var W=F[U],X=P[W.t1],te=q[W.t2];this.addEdgeIfVisible(X,te,O,V)}}}}return R.prototype.addEdgeIfVisible=function(x,B,D,O){this.intersectsPolys(new n(x.x,x.y,B.x,B.y),D,O)||this.E.push(new A(x.vv,B.vv))},R.prototype.addPoint=function(x,B){var D=this.P.length;this.V.push(new S(this.V.length,D,0,x));for(var O=0;O<D;++O)if(O!==B){var G=this.P[O],V=f(x,G);this.addEdgeIfVisible(x,G[V.ltan],B,O),this.addEdgeIfVisible(x,G[V.rtan],B,O)}return x.vv},R.prototype.intersectsPolys=function(x,B,D){for(var O=0,G=this.P.length;O<G;++O)if(O!=B&&O!=D&&E(x,this.P[O]).length>0)return!0;return!1},R}();oi.TangentVisibilityGraph=_;function E(R,x){for(var B=[],D=1,O=x.length;D<O;++D){var G=e.Rectangle.lineIntersection(R.x1,R.y1,R.x2,R.y2,x[D-1].x,x[D-1].y,x[D].x,x[D].y);G&&B.push(G)}return B}function k(R,x){for(var B=R.length-1,D=x.length-1,O=new m,G=0;G<B;++G)for(var V=0;V<D;++V){var I=R[G==0?B-1:G-1],z=R[G],P=R[G+1],q=x[V==0?D-1:V-1],F=x[V],U=x[V+1],W=a(I,z,F),X=a(z,q,F),te=a(z,F,U),ne=a(q,F,z),he=a(F,I,z),ve=a(F,z,P);W>=0&&X>=0&&te<0&&ne>=0&&he>=0&&ve<0?O.ll=new y(G,V):W<=0&&X<=0&&te>0&&ne<=0&&he<=0&&ve>0?O.rr=new y(G,V):W<=0&&X>0&&te<=0&&ne>=0&&he<0&&ve>=0?O.rl=new y(G,V):W>=0&&X<0&&te>=0&&ne<=0&&he>0&&ve<=0&&(O.lr=new y(G,V))}return O}oi.tangents=k;function M(R,x){for(var B=1,D=x.length;B<D;++B)if(s(x[B-1],x[B],R))return!1;return!0}function T(R,x){return!R.every(function(B){return!M(B,x)})}function C(R,x){if(T(R,x)||T(x,R))return!0;for(var B=1,D=R.length;B<D;++B){var O=R[B],G=R[B-1];if(E(new n(G.x,G.y,O.x,O.y),x).length>0)return!0}return!1}return oi.polysOverlap=C,oi}var zc={},KT;function IP(){if(KT)return zc;KT=1,Object.defineProperty(zc,"__esModule",{value:!0});var r={PADDING:10,GOLDEN_SECTION:(1+Math.sqrt(5))/2,FLOAT_EPSILON:1e-4,MAX_INERATIONS:100};function e(n,i,a,p,h,u){h===void 0&&(h=1),u===void 0&&(u=!0);var l=0,f=0,c=i,d=a,h=typeof h<"u"?h:1,p=typeof p<"u"?p:0,g=0,b=0,v=0,y=0,m=[];if(n.length==0)return;w(n),A(n),u&&S(n);function w(T){T.forEach(function(R){C(R)});function C(R){var x=Number.MAX_VALUE,B=Number.MAX_VALUE,D=0,O=0;R.array.forEach(function(G){var V=typeof G.width<"u"?G.width:p,I=typeof G.height<"u"?G.height:p;V/=2,I/=2,D=Math.max(G.x+V,D),x=Math.min(G.x-V,x),O=Math.max(G.y+I,O),B=Math.min(G.y-I,B)}),R.width=D-x,R.height=O-B}}function S(T){T.forEach(function(C){var R={x:0,y:0};C.array.forEach(function(D){R.x+=D.x,R.y+=D.y}),R.x/=C.array.length,R.y/=C.array.length;var x={x:R.x-C.width/2,y:R.y-C.height/2},B={x:C.x-x.x+c/2-g/2,y:C.y-x.y+d/2-b/2};C.array.forEach(function(D){D.x+=B.x,D.y+=B.y})})}function A(T,C){var R=Number.POSITIVE_INFINITY,x=0;T.sort(function(U,W){return W.height-U.height}),v=T.reduce(function(U,W){return U.width<W.width?U.width:W.width});for(var B=q=v,D=F=k(T),O=0,G=Number.MAX_VALUE,V=Number.MAX_VALUE,I=-1,z=Number.MAX_VALUE,P=Number.MAX_VALUE;z>v||P>r.FLOAT_EPSILON;){if(I!=1)var q=D-(D-B)/r.GOLDEN_SECTION,G=_(T,q);if(I!=0)var F=B+(D-B)/r.GOLDEN_SECTION,V=_(T,F);if(z=Math.abs(q-F),P=Math.abs(G-V),G<R&&(R=G,x=q),V<R&&(R=V,x=F),G>V?(B=q,q=F,G=V,I=1):(D=F,F=q,V=G,I=0),O++>100)break}_(T,x)}function _(T,C){m=[],g=0,b=0,y=f;for(var R=0;R<T.length;R++){var x=T[R];E(x,C)}return Math.abs(M()-h)}function E(T,C){for(var R=void 0,x=0;x<m.length;x++)if(m[x].space_left>=T.height&&m[x].x+m[x].width+T.width+r.PADDING-C<=r.FLOAT_EPSILON){R=m[x];break}m.push(T),R!==void 0?(T.x=R.x+R.width+r.PADDING,T.y=R.bottom,T.space_left=T.height,T.bottom=T.y,R.space_left-=T.height+r.PADDING,R.bottom+=T.height+r.PADDING):(T.y=y,y+=T.height+r.PADDING,T.x=l,T.bottom=T.y,T.space_left=T.height),T.y+T.height-b>-r.FLOAT_EPSILON&&(b=T.y+T.height-f),T.x+T.width-g>-r.FLOAT_EPSILON&&(g=T.x+T.width-l)}function k(T){var C=0;return T.forEach(function(R){return C+=R.width+r.PADDING}),C}function M(){return g/b}}zc.applyPacking=e;function t(n,i){for(var a={},o={},s=[],u=0,l=0;l<i.length;l++){var f=i[l],c=f.source,d=f.target;o[c.index]?o[c.index].push(d):o[c.index]=[d],o[d.index]?o[d.index].push(c):o[d.index]=[c]}for(var l=0;l<n.length;l++){var h=n[l];a[h.index]||p(h,!0)}function p(g,b){if(a[g.index]===void 0){b&&(u++,s.push({array:[]})),a[g.index]=u,s[u-1].array.push(g);var v=o[g.index];if(v)for(var y=0;y<v.length;y++)p(v[y],!1)}}return s}return zc.separateGraphs=t,zc}var ZT;function Kh(){return ZT||(ZT=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=PP(),t=Hw(),n=jw(),i=Xh(),a=xv(),o=DP(),s=IP(),u;(function(c){c[c.start=0]="start",c[c.tick=1]="tick",c[c.end=2]="end"})(u=r.EventType||(r.EventType={}));function l(c){return typeof c.leaves<"u"||typeof c.groups<"u"}var f=function(){function c(){var d=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:c.getSourceIndex,getTargetIndex:c.getTargetIndex,setLength:c.setLinkLength,getType:function(h){return typeof d._linkType=="function"?d._linkType(h):0}}}return c.prototype.on=function(d,h){return this.event||(this.event={}),typeof d=="string"?this.event[u[d]]=h:this.event[d]=h,this},c.prototype.trigger=function(d){this.event&&typeof this.event[d.type]<"u"&&this.event[d.type](d)},c.prototype.kick=function(){for(;!this.tick(););},c.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:u.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var d=this._nodes.length;this._links.length;var h,p;for(this._descent.locks.clear(),p=0;p<d;++p)if(h=this._nodes[p],h.fixed){(typeof h.px>"u"||typeof h.py>"u")&&(h.px=h.x,h.py=h.y);var g=[h.px,h.py];this._descent.locks.add(p,g)}var b=this._descent.rungeKutta();return b===0?this._alpha=0:typeof this._lastStress<"u"&&(this._alpha=b),this._lastStress=b,this.updateNodePositions(),this.trigger({type:u.tick,alpha:this._alpha,stress:this._lastStress}),!1},c.prototype.updateNodePositions=function(){for(var d=this._descent.x[0],h=this._descent.x[1],p,g=this._nodes.length;g--;)p=this._nodes[g],p.x=d[g],p.y=h[g]},c.prototype.nodes=function(d){if(!d){if(this._nodes.length===0&&this._links.length>0){var h=0;this._links.forEach(function(g){h=Math.max(h,g.source,g.target)}),this._nodes=new Array(++h);for(var p=0;p<h;++p)this._nodes[p]={}}return this._nodes}return this._nodes=d,this},c.prototype.groups=function(d){var h=this;return d?(this._groups=d,this._rootGroup={},this._groups.forEach(function(p){typeof p.padding>"u"&&(p.padding=1),typeof p.leaves<"u"&&p.leaves.forEach(function(g,b){typeof g=="number"&&((p.leaves[b]=h._nodes[g]).parent=p)}),typeof p.groups<"u"&&p.groups.forEach(function(g,b){typeof g=="number"&&((p.groups[b]=h._groups[g]).parent=p)})}),this._rootGroup.leaves=this._nodes.filter(function(p){return typeof p.parent>"u"}),this._rootGroup.groups=this._groups.filter(function(p){return typeof p.parent>"u"}),this):this._groups},c.prototype.powerGraphGroups=function(d){var h=e.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(h.groups),d(h),this},c.prototype.avoidOverlaps=function(d){return arguments.length?(this._avoidOverlaps=d,this):this._avoidOverlaps},c.prototype.handleDisconnected=function(d){return arguments.length?(this._handleDisconnected=d,this):this._handleDisconnected},c.prototype.flowLayout=function(d,h){return arguments.length||(d="y"),this._directedLinkConstraints={axis:d,getMinSeparation:typeof h=="number"?function(){return h}:h},this},c.prototype.links=function(d){return arguments.length?(this._links=d,this):this._links},c.prototype.constraints=function(d){return arguments.length?(this._constraints=d,this):this._constraints},c.prototype.distanceMatrix=function(d){return arguments.length?(this._distanceMatrix=d,this):this._distanceMatrix},c.prototype.size=function(d){return d?(this._canvasSize=d,this):this._canvasSize},c.prototype.defaultNodeSize=function(d){return d?(this._defaultNodeSize=d,this):this._defaultNodeSize},c.prototype.groupCompactness=function(d){return d?(this._groupCompactness=d,this):this._groupCompactness},c.prototype.linkDistance=function(d){return d?(this._linkDistance=typeof d=="function"?d:+d,this._linkLengthCalculator=null,this):this._linkDistance},c.prototype.linkType=function(d){return this._linkType=d,this},c.prototype.convergenceThreshold=function(d){return d?(this._threshold=typeof d=="function"?d:+d,this):this._threshold},c.prototype.alpha=function(d){return arguments.length?(d=+d,this._alpha?d>0?this._alpha=d:this._alpha=0:d>0&&(this._running||(this._running=!0,this.trigger({type:u.start,alpha:this._alpha=d}),this.kick())),this):this._alpha},c.prototype.getLinkLength=function(d){return typeof this._linkDistance=="function"?+this._linkDistance(d):this._linkDistance},c.setLinkLength=function(d,h){d.length=h},c.prototype.getLinkType=function(d){return typeof this._linkType=="function"?this._linkType(d):0},c.prototype.symmetricDiffLinkLengths=function(d,h){var p=this;return h===void 0&&(h=1),this.linkDistance(function(g){return d*g.length}),this._linkLengthCalculator=function(){return t.symmetricDiffLinkLengths(p._links,p.linkAccessor,h)},this},c.prototype.jaccardLinkLengths=function(d,h){var p=this;return h===void 0&&(h=1),this.linkDistance(function(g){return d*g.length}),this._linkLengthCalculator=function(){return t.jaccardLinkLengths(p._links,p.linkAccessor,h)},this},c.prototype.start=function(d,h,p,g,b,v){var y=this;d===void 0&&(d=0),h===void 0&&(h=0),p===void 0&&(p=0),g===void 0&&(g=0),b===void 0&&(b=!0),v===void 0&&(v=!0);var m,w=this.nodes().length,S=w+2*this._groups.length;this._links.length;var A=this._canvasSize[0],_=this._canvasSize[1],E=new Array(S),k=new Array(S),M=null,T=this._avoidOverlaps;this._nodes.forEach(function(V,I){V.index=I,typeof V.x>"u"&&(V.x=A/2,V.y=_/2),E[I]=V.x,k[I]=V.y}),this._linkLengthCalculator&&this._linkLengthCalculator();var C;this._distanceMatrix?C=this._distanceMatrix:(C=new a.Calculator(S,this._links,c.getSourceIndex,c.getTargetIndex,function(V){return y.getLinkLength(V)}).DistanceMatrix(),M=n.Descent.createSquareMatrix(S,function(){return 2}),this._links.forEach(function(V){typeof V.source=="number"&&(V.source=y._nodes[V.source]),typeof V.target=="number"&&(V.target=y._nodes[V.target])}),this._links.forEach(function(V){var I=c.getSourceIndex(V),z=c.getTargetIndex(V);M[I][z]=M[z][I]=V.weight||1}));var R=n.Descent.createSquareMatrix(S,function(V,I){return C[V][I]});if(this._rootGroup&&typeof this._rootGroup.groups<"u"){var m=w,x=function(I,z,P,q){M[I][z]=M[z][I]=P,R[I][z]=R[z][I]=q};this._groups.forEach(function(I){x(m,m+1,y._groupCompactness,.1),E[m]=0,k[m++]=0,E[m]=0,k[m++]=0})}else this._rootGroup={leaves:this._nodes,groups:[]};var B=this._constraints||[];this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,B=B.concat(t.generateDirectedEdgeConstraints(w,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new n.Descent([E,k],R),this._descent.locks.clear();for(var m=0;m<w;++m){var D=this._nodes[m];if(D.fixed){D.px=D.x,D.py=D.y;var O=[D.x,D.y];this._descent.locks.add(m,O)}}if(this._descent.threshold=this._threshold,this.initialLayout(d,E,k),B.length>0&&(this._descent.project=new i.Projection(this._nodes,this._groups,this._rootGroup,B).projectFunctions()),this._descent.run(h),this.separateOverlappingComponents(A,_,v),this.avoidOverlaps(T),T&&(this._nodes.forEach(function(V,I){V.x=E[I],V.y=k[I]}),this._descent.project=new i.Projection(this._nodes,this._groups,this._rootGroup,B,!0).projectFunctions(),this._nodes.forEach(function(V,I){E[I]=V.x,k[I]=V.y})),this._descent.G=M,this._descent.run(p),g){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=w,this._descent.scaleSnapByMaxH=w!=S;var G=n.Descent.createSquareMatrix(S,function(V,I){return V>=w||I>=w?M[V][I]:0});this._descent.G=G,this._descent.run(g)}return this.updateNodePositions(),this.separateOverlappingComponents(A,_,v),b?this.resume():this},c.prototype.initialLayout=function(d,h,p){if(this._groups.length>0&&d>0){var g=this._nodes.length,b=this._links.map(function(y){return{source:y.source.index,target:y.target.index}}),v=this._nodes.map(function(y){return{index:y.index}});this._groups.forEach(function(y,m){v.push({index:y.index=g+m})}),this._groups.forEach(function(y,m){typeof y.leaves<"u"&&y.leaves.forEach(function(w){return b.push({source:y.index,target:w.index})}),typeof y.groups<"u"&&y.groups.forEach(function(w){return b.push({source:y.index,target:w.index})})}),new c().size(this.size()).nodes(v).links(b).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(d,0,0,0,!1),this._nodes.forEach(function(y){h[y.index]=v[y.index].x,p[y.index]=v[y.index].y})}else this._descent.run(d)},c.prototype.separateOverlappingComponents=function(d,h,p){var g=this;if(p===void 0&&(p=!0),!this._distanceMatrix&&this._handleDisconnected){var b=this._descent.x[0],v=this._descent.x[1];this._nodes.forEach(function(m,w){m.x=b[w],m.y=v[w]});var y=s.separateGraphs(this._nodes,this._links);s.applyPacking(y,d,h,this._defaultNodeSize,1,p),this._nodes.forEach(function(m,w){g._descent.x[0][w]=m.x,g._descent.x[1][w]=m.y,m.bounds&&(m.bounds.setXCentre(m.x),m.bounds.setYCentre(m.y))})}},c.prototype.resume=function(){return this.alpha(.1)},c.prototype.stop=function(){return this.alpha(0)},c.prototype.prepareEdgeRouting=function(d){d===void 0&&(d=0),this._visibilityGraph=new o.TangentVisibilityGraph(this._nodes.map(function(h){return h.bounds.inflate(-d).vertices()}))},c.prototype.routeEdge=function(d,h,p){h===void 0&&(h=5);var g=[],b=new o.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),v={x:d.source.x,y:d.source.y},y={x:d.target.x,y:d.target.y},m=b.addPoint(v,d.source.index),w=b.addPoint(y,d.target.index);b.addEdgeIfVisible(v,y,d.source.index,d.target.index),typeof p<"u"&&p(b);var S=function(B){return B.source.id},A=function(B){return B.target.id},_=function(B){return B.length()},E=new a.Calculator(b.V.length,b.E,S,A,_),k=E.PathFromNodeToNode(m.id,w.id);if(k.length===1||k.length===b.V.length){var M=i.makeEdgeBetween(d.source.innerBounds,d.target.innerBounds,h);g=[M.sourceIntersection,M.arrowStart]}else{for(var T=k.length-2,C=b.V[k[T]].p,R=b.V[k[0]].p,g=[d.source.innerBounds.rayIntersection(C.x,C.y)],x=T;x>=0;--x)g.push(b.V[k[x]].p);g.push(i.makeEdgeTo(R,d.target.innerBounds,h))}return g},c.getSourceIndex=function(d){return typeof d.source=="number"?d.source:d.source.index},c.getTargetIndex=function(d){return typeof d.target=="number"?d.target:d.target.index},c.linkId=function(d){return c.getSourceIndex(d)+"-"+c.getTargetIndex(d)},c.dragStart=function(d){l(d)?c.storeOffset(d,c.dragOrigin(d)):(c.stopNode(d),d.fixed|=2)},c.stopNode=function(d){d.px=d.x,d.py=d.y},c.storeOffset=function(d,h){typeof d.leaves<"u"&&d.leaves.forEach(function(p){p.fixed|=2,c.stopNode(p),p._dragGroupOffsetX=p.x-h.x,p._dragGroupOffsetY=p.y-h.y}),typeof d.groups<"u"&&d.groups.forEach(function(p){return c.storeOffset(p,h)})},c.dragOrigin=function(d){return l(d)?{x:d.bounds.cx(),y:d.bounds.cy()}:d},c.drag=function(d,h){l(d)?(typeof d.leaves<"u"&&d.leaves.forEach(function(p){d.bounds.setXCentre(h.x),d.bounds.setYCentre(h.y),p.px=p._dragGroupOffsetX+h.x,p.py=p._dragGroupOffsetY+h.y}),typeof d.groups<"u"&&d.groups.forEach(function(p){return c.drag(p,h)})):(d.px=h.x,d.py=h.y)},c.dragEnd=function(d){l(d)?(typeof d.leaves<"u"&&d.leaves.forEach(function(h){c.dragEnd(h),delete h._dragGroupOffsetX,delete h._dragGroupOffsetY}),typeof d.groups<"u"&&d.groups.forEach(c.dragEnd)):d.fixed&=-7},c.mouseOver=function(d){d.fixed|=4,d.px=d.x,d.py=d.y},c.mouseOut=function(d){d.fixed&=-5},c}();r.Layout=f}($b)),$b}var QT;function NH(){if(QT)return Fc;QT=1;var r=kt&&kt.__extends||function(){var i=function(a,o){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,u){s.__proto__=u}||function(s,u){for(var l in u)u.hasOwnProperty(l)&&(s[l]=u[l])},i(a,o)};return function(a,o){i(a,o);function s(){this.constructor=a}a.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}();Object.defineProperty(Fc,"__esModule",{value:!0});var e=Kh(),t=function(i){r(a,i);function a(o){var s=i.call(this)||this,u=o;return u.trigger&&(s.trigger=u.trigger),u.kick&&(s.kick=u.kick),u.drag&&(s.drag=u.drag),u.on&&(s.on=u.on),s.dragstart=s.dragStart=e.Layout.dragStart,s.dragend=s.dragEnd=e.Layout.dragEnd,s}return a.prototype.trigger=function(o){},a.prototype.kick=function(){},a.prototype.drag=function(){},a.prototype.on=function(o,s){return this},a}(e.Layout);Fc.LayoutAdaptor=t;function n(i){return new t(i)}return Fc.adaptor=n,Fc}var Ud={},qc={},JT;function PH(){if(JT)return qc;JT=1;var r=kt&&kt.__extends||function(){var i=function(a,o){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,u){s.__proto__=u}||function(s,u){for(var l in u)u.hasOwnProperty(l)&&(s[l]=u[l])},i(a,o)};return function(a,o){i(a,o);function s(){this.constructor=a}a.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}();Object.defineProperty(qc,"__esModule",{value:!0});var e=Kh(),t=function(i){r(a,i);function a(){var o=i.call(this)||this;o.event=d3.dispatch(e.EventType[e.EventType.start],e.EventType[e.EventType.tick],e.EventType[e.EventType.end]);var s=o;return o.drag=function(){if(!u)var u=d3.behavior.drag().origin(e.Layout.dragOrigin).on("dragstart.d3adaptor",e.Layout.dragStart).on("drag.d3adaptor",function(l){e.Layout.drag(l,d3.event),s.resume()}).on("dragend.d3adaptor",e.Layout.dragEnd);if(!arguments.length)return u;this.call(u)},o}return a.prototype.trigger=function(o){var s={type:e.EventType[o.type],alpha:o.alpha,stress:o.stress};this.event[s.type](s)},a.prototype.kick=function(){var o=this;d3.timer(function(){return i.prototype.tick.call(o)})},a.prototype.on=function(o,s){return typeof o=="string"?this.event.on(o,s):this.event.on(e.EventType[o],s),this},a}(e.Layout);qc.D3StyleLayoutAdaptor=t;function n(){return new t}return qc.d3adaptor=n,qc}var Hd={},e3;function MH(){if(e3)return Hd;e3=1;var r=kt&&kt.__extends||function(){var n=function(i,a){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var u in s)s.hasOwnProperty(u)&&(o[u]=s[u])},n(i,a)};return function(i,a){n(i,a);function o(){this.constructor=i}i.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}}();Object.defineProperty(Hd,"__esModule",{value:!0});var e=Kh(),t=function(n){r(i,n);function i(a){var o=n.call(this)||this;o.d3Context=a,o.event=a.dispatch(e.EventType[e.EventType.start],e.EventType[e.EventType.tick],e.EventType[e.EventType.end]);var s=o;return o.drag=function(){if(!u)var u=a.drag().subject(e.Layout.dragOrigin).on("start.d3adaptor",e.Layout.dragStart).on("drag.d3adaptor",function(l){e.Layout.drag(l,a.event),s.resume()}).on("end.d3adaptor",e.Layout.dragEnd);if(!arguments.length)return u;arguments[0].call(u)},o}return i.prototype.trigger=function(a){var o={type:e.EventType[a.type],alpha:a.alpha,stress:a.stress};this.event.call(o.type,o)},i.prototype.kick=function(){var a=this,o=this.d3Context.timer(function(){return n.prototype.tick.call(a)&&o.stop()})},i.prototype.on=function(a,o){return typeof a=="string"?this.event.on(a,o):this.event.on(e.EventType[a],o),this},i}(e.Layout);return Hd.D3StyleLayoutAdaptor=t,Hd}var t3;function OH(){if(t3)return Ud;t3=1,Object.defineProperty(Ud,"__esModule",{value:!0});var r=PH(),e=MH();function t(i){return!i||n(i)?new r.D3StyleLayoutAdaptor:new e.D3StyleLayoutAdaptor(i)}Ud.d3adaptor=t;function n(i){var a=/^3\./;return i.version&&i.version.match(a)!==null}return Ud}var rl={},r3;function RP(){if(r3)return rl;r3=1,Object.defineProperty(rl,"__esModule",{value:!0});var r=Xh(),e=Vw(),t=xv(),n=function(){function s(u,l,f){this.id=u,this.rect=l,this.children=f,this.leaf=typeof f>"u"||f.length===0}return s}();rl.NodeWrapper=n;var i=function(){function s(u,l,f,c,d){c===void 0&&(c=null),d===void 0&&(d=null),this.id=u,this.x=l,this.y=f,this.node=c,this.line=d}return s}();rl.Vert=i;var a=function(){function s(u,l){this.s=u,this.t=l;var f=s.findMatch(u,l),c=l.slice(0).reverse(),d=s.findMatch(u,c);f.length>=d.length?(this.length=f.length,this.si=f.si,this.ti=f.ti,this.reversed=!1):(this.length=d.length,this.si=d.si,this.ti=l.length-d.ti-d.length,this.reversed=!0)}return s.findMatch=function(u,l){for(var f=u.length,c=l.length,d={length:0,si:-1,ti:-1},h=new Array(f),p=0;p<f;p++){h[p]=new Array(c);for(var g=0;g<c;g++)if(u[p]===l[g]){var b=h[p][g]=p===0||g===0?1:h[p-1][g-1]+1;b>d.length&&(d.length=b,d.si=p-b+1,d.ti=g-b+1)}else h[p][g]=0}return d},s.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},s}();rl.LongestCommonSubsequence=a;var o=function(){function s(u,l,f){var c=this;f===void 0&&(f=12),this.originalnodes=u,this.groupPadding=f,this.leaves=null,this.nodes=u.map(function(A,_){return new n(_,l.getBounds(A),l.getChildren(A))}),this.leaves=this.nodes.filter(function(A){return A.leaf}),this.groups=this.nodes.filter(function(A){return!A.leaf}),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach(function(A){return A.children.forEach(function(_){return c.nodes[_].parent=A})}),this.root={children:[]},this.nodes.forEach(function(A){typeof A.parent>"u"&&(A.parent=c.root,c.root.children.push(A.id)),A.ports=[]}),this.backToFront=this.nodes.slice(0),this.backToFront.sort(function(A,_){return c.getDepth(A)-c.getDepth(_)});var d=this.backToFront.slice(0).reverse().filter(function(A){return!A.leaf});d.forEach(function(A){var _=r.Rectangle.empty();A.children.forEach(function(E){return _=_.union(c.nodes[E].rect)}),A.rect=_.inflate(c.groupPadding)});var h=this.midPoints(this.cols.map(function(A){return A.pos})),p=this.midPoints(this.rows.map(function(A){return A.pos})),g=h[0],b=h[h.length-1],v=p[0],y=p[p.length-1],m=this.rows.map(function(A){return{x1:g,x2:b,y1:A.pos,y2:A.pos}}).concat(p.map(function(A){return{x1:g,x2:b,y1:A,y2:A}})),w=this.cols.map(function(A){return{x1:A.pos,x2:A.pos,y1:v,y2:y}}).concat(h.map(function(A){return{x1:A,x2:A,y1:v,y2:y}})),S=m.concat(w);S.forEach(function(A){return A.verts=[]}),this.verts=[],this.edges=[],m.forEach(function(A){return w.forEach(function(_){var E=new i(c.verts.length,_.x1,A.y1);A.verts.push(E),_.verts.push(E),c.verts.push(E);for(var k=c.backToFront.length;k-- >0;){var M=c.backToFront[k],T=M.rect,C=Math.abs(E.x-T.cx()),R=Math.abs(E.y-T.cy());if(C<T.width()/2&&R<T.height()/2){E.node=M;break}}})}),S.forEach(function(A,_){c.nodes.forEach(function(R,x){R.rect.lineIntersections(A.x1,A.y1,A.x2,A.y2).forEach(function(B,D){var O=new i(c.verts.length,B.x,B.y,R,A);c.verts.push(O),A.verts.push(O),R.ports.push(O)})});var E=Math.abs(A.y1-A.y2)<.1,k=function(R,x){return E?x.x-R.x:x.y-R.y};A.verts.sort(k);for(var M=1;M<A.verts.length;M++){var T=A.verts[M-1],C=A.verts[M];T.node&&T.node===C.node&&T.node.leaf||c.edges.push({source:T.id,target:C.id,length:Math.abs(k(T,C))})}})}return s.prototype.avg=function(u){return u.reduce(function(l,f){return l+f})/u.length},s.prototype.getGridLines=function(u){for(var l=[],f=this.leaves.slice(0,this.leaves.length);f.length>0;){var c=f.filter(function(h){return h.rect["overlap"+u.toUpperCase()](f[0].rect)}),d={nodes:c,pos:this.avg(c.map(function(h){return h.rect["c"+u]()}))};l.push(d),d.nodes.forEach(function(h){return f.splice(f.indexOf(h),1)})}return l.sort(function(h,p){return h.pos-p.pos}),l},s.prototype.getDepth=function(u){for(var l=0;u.parent!==this.root;)l++,u=u.parent;return l},s.prototype.midPoints=function(u){for(var l=u[1]-u[0],f=[u[0]-l/2],c=1;c<u.length;c++)f.push((u[c]+u[c-1])/2);return f.push(u[u.length-1]+l/2),f},s.prototype.findLineage=function(u){var l=[u];do u=u.parent,l.push(u);while(u!==this.root);return l.reverse()},s.prototype.findAncestorPathBetween=function(u,l){for(var f=this.findLineage(u),c=this.findLineage(l),d=0;f[d]===c[d];)d++;return{commonAncestor:f[d-1],lineages:f.slice(d).concat(c.slice(d))}},s.prototype.siblingObstacles=function(u,l){var f=this,c=this.findAncestorPathBetween(u,l),d={};c.lineages.forEach(function(p){return d[p.id]={}});var h=c.commonAncestor.children.filter(function(p){return!(p in d)});return c.lineages.filter(function(p){return p.parent!==c.commonAncestor}).forEach(function(p){return h=h.concat(p.parent.children.filter(function(g){return g!==p.id}))}),h.map(function(p){return f.nodes[p]})},s.getSegmentSets=function(u,l,f){for(var c=[],d=0;d<u.length;d++)for(var h=u[d],p=0;p<h.length;p++){var g=h[p];g.edgeid=d,g.i=p;var b=g[1][l]-g[0][l];Math.abs(b)<.1&&c.push(g)}c.sort(function(w,S){return w[0][l]-S[0][l]});for(var v=[],y=null,m=0;m<c.length;m++){var g=c[m];(!y||Math.abs(g[0][l]-y.pos)>.1)&&(y={pos:g[0][l],segments:[]},v.push(y)),y.segments.push(g)}return v},s.nudgeSegs=function(u,l,f,c,d,h){var p=c.length;if(!(p<=1)){for(var g=c.map(function(M){return new e.Variable(M[0][u])}),b=[],v=0;v<p;v++)for(var y=0;y<p;y++)if(v!==y){var m=c[v],w=c[y],S=m.edgeid,A=w.edgeid,_=-1,E=-1;u=="x"?d(S,A)&&(m[0][l]<m[1][l]?(_=y,E=v):(_=v,E=y)):d(S,A)&&(m[0][l]<m[1][l]?(_=v,E=y):(_=y,E=v)),_>=0&&b.push(new e.Constraint(g[_],g[E],h))}var k=new e.Solver(g,b);k.solve(),g.forEach(function(M,T){var C=c[T],R=M.position();C[0][u]=C[1][u]=R;var x=f[C.edgeid];C.i>0&&(x[C.i-1][1][u]=R),C.i<x.length-1&&(x[C.i+1][0][u]=R)})}},s.nudgeSegments=function(u,l,f,c,d){for(var h=s.getSegmentSets(u,l,f),p=0;p<h.length;p++){for(var g=h[p],b=[],v=0;v<g.segments.length;v++){var y=g.segments[v];b.push({type:0,s:y,pos:Math.min(y[0][f],y[1][f])}),b.push({type:1,s:y,pos:Math.max(y[0][f],y[1][f])})}b.sort(function(S,A){return S.pos-A.pos+S.type-A.type});var m=[],w=0;b.forEach(function(S){S.type===0?(m.push(S.s),w++):w--,w==0&&(s.nudgeSegs(l,f,u,m,c,d),m=[])})}},s.prototype.routeEdges=function(u,l,f,c){var d=this,h=u.map(function(b){return d.route(f(b),c(b))}),p=s.orderEdges(h),g=h.map(function(b){return s.makeSegments(b)});return s.nudgeSegments(g,"x","y",p,l),s.nudgeSegments(g,"y","x",p,l),s.unreverseEdges(g,h),g},s.unreverseEdges=function(u,l){u.forEach(function(f,c){var d=l[c];d.reversed&&(f.reverse(),f.forEach(function(h){h.reverse()}))})},s.angleBetween2Lines=function(u,l){var f=Math.atan2(u[0].y-u[1].y,u[0].x-u[1].x),c=Math.atan2(l[0].y-l[1].y,l[0].x-l[1].x),d=f-c;return(d>Math.PI||d<-Math.PI)&&(d=c-f),d},s.isLeft=function(u,l,f){return(l.x-u.x)*(f.y-u.y)-(l.y-u.y)*(f.x-u.x)<=0},s.getOrder=function(u){for(var l={},f=0;f<u.length;f++){var c=u[f];typeof l[c.l]>"u"&&(l[c.l]={}),l[c.l][c.r]=!0}return function(d,h){return typeof l[d]<"u"&&l[d][h]}},s.orderEdges=function(u){for(var l=[],f=0;f<u.length-1;f++)for(var c=f+1;c<u.length;c++){var d=u[f],h=u[c],p=new a(d,h),g,b,v;if(p.length!==0){if(p.reversed&&(h.reverse(),h.reversed=!0,p=new a(d,h)),(p.si<=0||p.ti<=0)&&(p.si+p.length>=d.length||p.ti+p.length>=h.length)){l.push({l:f,r:c});continue}p.si+p.length>=d.length||p.ti+p.length>=h.length?(g=d[p.si+1],v=d[p.si-1],b=h[p.ti-1]):(g=d[p.si+p.length-2],b=d[p.si+p.length],v=h[p.ti+p.length]),s.isLeft(g,b,v)?l.push({l:c,r:f}):l.push({l:f,r:c})}}return s.getOrder(l)},s.makeSegments=function(u){function l(b){return{x:b.x,y:b.y}}for(var f=function(b,v,y){return Math.abs((v.x-b.x)*(y.y-b.y)-(v.y-b.y)*(y.x-b.x))<.001},c=[],d=l(u[0]),h=1;h<u.length;h++){var p=l(u[h]),g=h<u.length-1?u[h+1]:null;(!g||!f(d,p,g))&&(c.push([d,p]),d=p)}return c},s.prototype.route=function(u,l){var f=this,c=this.nodes[u],d=this.nodes[l];this.obstacles=this.siblingObstacles(c,d);var h={};this.obstacles.forEach(function(E){return h[E.id]=E}),this.passableEdges=this.edges.filter(function(E){var k=f.verts[E.source],M=f.verts[E.target];return!(k.node&&k.node.id in h||M.node&&M.node.id in h)});for(var p=1;p<c.ports.length;p++){var g=c.ports[0].id,b=c.ports[p].id;this.passableEdges.push({source:g,target:b,length:0})}for(var p=1;p<d.ports.length;p++){var g=d.ports[0].id,b=d.ports[p].id;this.passableEdges.push({source:g,target:b,length:0})}var v=function(E){return E.source},y=function(E){return E.target},m=function(E){return E.length},w=new t.Calculator(this.verts.length,this.passableEdges,v,y,m),S=function(E,k,M){var T=f.verts[E],C=f.verts[k],R=f.verts[M],x=Math.abs(R.x-T.x),B=Math.abs(R.y-T.y);return T.node===c&&T.node===C.node||C.node===d&&C.node===R.node?0:x>1&&B>1?1e3:0},A=w.PathFromNodeToNodeWithPrevCost(c.ports[0].id,d.ports[0].id,S),_=A.reverse().map(function(E){return f.verts[E]});return _.push(this.nodes[d.id].ports[0]),_.filter(function(E,k){return!(k<_.length-1&&_[k+1].node===c&&E.node===c||k>0&&E.node===d&&_[k-1].node===d)})},s.getRoutePath=function(u,l,f,c){var d={routepath:"M "+u[0][0].x+" "+u[0][0].y+" ",arrowpath:""};if(u.length>1)for(var h=0;h<u.length;h++){var p=u[h],g=p[1].x,b=p[1].y,v=g-p[0].x,y=b-p[0].y;if(h<u.length-1){Math.abs(v)>0?g-=v/Math.abs(v)*l:b-=y/Math.abs(y)*l,d.routepath+="L "+g+" "+b+" ";var m=u[h+1],w=m[0].x,S=m[0].y,A=m[1].x,_=m[1].y;v=A-w,y=_-S;var E=s.angleBetween2Lines(p,m)<0?1:0,k,M;Math.abs(v)>0?(k=w+v/Math.abs(v)*l,M=S):(k=w,M=S+y/Math.abs(y)*l);var T=Math.abs(k-g),C=Math.abs(M-b);d.routepath+="A "+T+" "+C+" 0 0 "+E+" "+k+" "+M+" "}else{var R=[g,b],x,B;Math.abs(v)>0?(g-=v/Math.abs(v)*c,x=[g,b+f],B=[g,b-f]):(b-=y/Math.abs(y)*c,x=[g+f,b],B=[g-f,b]),d.routepath+="L "+g+" "+b+" ",c>0&&(d.arrowpath="M "+R[0]+" "+R[1]+" L "+x[0]+" "+x[1]+" L "+B[0]+" "+B[1])}}else{var p=u[0],g=p[1].x,b=p[1].y,v=g-p[0].x,y=b-p[0].y,R=[g,b],x,B;Math.abs(v)>0?(g-=v/Math.abs(v)*c,x=[g,b+f],B=[g,b-f]):(b-=y/Math.abs(y)*c,x=[g+f,b],B=[g-f,b]),d.routepath+="L "+g+" "+b+" ",c>0&&(d.arrowpath="M "+R[0]+" "+R[1]+" L "+x[0]+" "+x[1]+" L "+B[0]+" "+B[1])}return d},s}();return rl.GridRouter=o,rl}var gf={},n3;function DH(){if(n3)return gf;n3=1,Object.defineProperty(gf,"__esModule",{value:!0});var r=xv(),e=jw(),t=Xh(),n=Hw(),i=function(){function u(l,f){this.source=l,this.target=f}return u.prototype.actualLength=function(l){var f=this;return Math.sqrt(l.reduce(function(c,d){var h=d[f.target]-d[f.source];return c+h*h},0))},u}();gf.Link3D=i;var a=function(){function u(l,f,c){l===void 0&&(l=0),f===void 0&&(f=0),c===void 0&&(c=0),this.x=l,this.y=f,this.z=c}return u}();gf.Node3D=a;var o=function(){function u(l,f,c){var d=this;c===void 0&&(c=1),this.nodes=l,this.links=f,this.idealLinkLength=c,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(u.k);for(var h=0;h<u.k;++h)this.result[h]=new Array(l.length);l.forEach(function(p,g){for(var b=0,v=u.dims;b<v.length;b++){var y=v[b];typeof p[y]>"u"&&(p[y]=Math.random())}d.result[0][g]=p.x,d.result[1][g]=p.y,d.result[2][g]=p.z})}return u.prototype.linkLength=function(l){return l.actualLength(this.result)},u.prototype.start=function(l){var f=this;l===void 0&&(l=100);var c=this.nodes.length,d=new s;this.useJaccardLinkLengths&&n.jaccardLinkLengths(this.links,d,1.5),this.links.forEach(function(y){return y.length*=f.idealLinkLength});var h=new r.Calculator(c,this.links,function(y){return y.source},function(y){return y.target},function(y){return y.length}).DistanceMatrix(),p=e.Descent.createSquareMatrix(c,function(y,m){return h[y][m]}),g=e.Descent.createSquareMatrix(c,function(){return 2});this.links.forEach(function(y){var m=y.source,w=y.target;return g[m][w]=g[w][m]=1}),this.descent=new e.Descent(this.result,p),this.descent.threshold=.001,this.descent.G=g,this.constraints&&(this.descent.project=new t.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var b=0;b<this.nodes.length;b++){var v=this.nodes[b];v.fixed&&this.descent.locks.add(b,[v.x,v.y,v.z])}return this.descent.run(l),this},u.prototype.tick=function(){this.descent.locks.clear();for(var l=0;l<this.nodes.length;l++){var f=this.nodes[l];f.fixed&&this.descent.locks.add(l,[f.x,f.y,f.z])}return this.descent.rungeKutta()},u.dims=["x","y","z"],u.k=u.dims.length,u}();gf.Layout3D=o;var s=function(){function u(){}return u.prototype.getSourceIndex=function(l){return l.source},u.prototype.getTargetIndex=function(l){return l.target},u.prototype.getLength=function(l){return l.length},u.prototype.setLength=function(l,f){l.length=f},u}();return gf}var Gc={},i3;function IH(){if(i3)return Gc;i3=1,Object.defineProperty(Gc,"__esModule",{value:!0});var r=Kh(),e=RP();function t(a,o,s,u){a.cola.start(0,0,0,10,!1);var l=n(a.cola.nodes(),a.cola.groups(),s,u);return l.routeEdges(a.powerGraph.powerEdges,o,function(f){return f.source.routerNode.id},function(f){return f.target.routerNode.id})}Gc.gridify=t;function n(a,o,s,u){a.forEach(function(f){f.routerNode={name:f.name,bounds:f.bounds.inflate(-s)}}),o.forEach(function(f){f.routerNode={bounds:f.bounds.inflate(-u),children:(typeof f.groups<"u"?f.groups.map(function(c){return a.length+c.id}):[]).concat(typeof f.leaves<"u"?f.leaves.map(function(c){return c.index}):[])}});var l=a.concat(o).map(function(f,c){return f.routerNode.id=c,f.routerNode});return new e.GridRouter(l,{getChildren:function(f){return f.children},getBounds:function(f){return f.bounds}},s-u)}function i(a,o,s){var u;a.nodes.forEach(function(d,h){return d.index=h}),new r.Layout().avoidOverlaps(!1).nodes(a.nodes).links(a.links).powerGraphGroups(function(d){u=d,u.groups.forEach(function(h){return h.padding=s})});var l=a.nodes.length,f=[],c=a.nodes.slice(0);return c.forEach(function(d,h){return d.index=h}),u.groups.forEach(function(d){var h=d.index=d.id+l;c.push(d),typeof d.leaves<"u"&&d.leaves.forEach(function(p){return f.push({source:h,target:p.index})}),typeof d.groups<"u"&&d.groups.forEach(function(p){return f.push({source:h,target:p.id+l})})}),u.powerEdges.forEach(function(d){f.push({source:d.source.index,target:d.target.index})}),new r.Layout().size(o).nodes(c).links(f).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:new r.Layout().convergenceThreshold(.001).size(o).avoidOverlaps(!0).nodes(a.nodes).links(a.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function(d){u=d,u.groups.forEach(function(h){h.padding=s})}).start(50,0,100,0,!1),powerGraph:u}}return Gc.powerGraphGridLayout=i,Gc}var a3;function RH(){return a3||(a3=1,function(r){function e(t){for(var n in t)r.hasOwnProperty(n)||(r[n]=t[n])}Object.defineProperty(r,"__esModule",{value:!0}),e(NH()),e(OH()),e(jw()),e(DP()),e(RP()),e(IP()),e(Kh()),e(DH()),e(Hw()),e(PP()),e(OP()),e(MP()),e(Xh()),e(xv()),e(Vw()),e(IH())}(Gb)),Gb}(function(r,e){(function(n,i){r.exports=i(RH())})(kt,function(t){return function(n){var i={};function a(o){if(i[o])return i[o].exports;var s=i[o]={i:o,l:!1,exports:{}};return n[o].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=n,a.c=i,a.i=function(o){return o},a.d=function(o,s,u){a.o(o,s)||Object.defineProperty(o,s,{configurable:!1,enumerable:!0,get:u})},a.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(s,"a",s),s},a.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},a.p="",a(a.s=3)}([function(n,i,a){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},s=a(1),u=a(2),l=a(5)||(typeof window<"u"?window.cola:null),f=a(4),c=function(m){return(typeof m>"u"?"undefined":o(m))===o("")},d=function(m){return(typeof m>"u"?"undefined":o(m))===o(0)},h=function(m){return m!=null&&(typeof m>"u"?"undefined":o(m))===o({})},p=function(m){return m!=null&&(typeof m>"u"?"undefined":o(m))===o(function(){})},g=function(){},b=function(m,w){if(p(m)){var S=m;return S.apply(w,[w])}else return m};function v(y){this.options=s({},u,y)}v.prototype.run=function(){var y=this,m=this.options;y.manuallyStopped=!1;var w=m.cy,S=m.eles,A=S.nodes(),_=S.edges(),E=!1,k=function(Ce){return Ce.isParent()},M=A.filter(k),T=A.subtract(M),C=m.boundingBox||{x1:0,y1:0,w:w.width(),h:w.height()};C.x2===void 0&&(C.x2=C.x1+C.w),C.w===void 0&&(C.w=C.x2-C.x1),C.y2===void 0&&(C.y2=C.y1+C.h),C.h===void 0&&(C.h=C.y2-C.y1);var R=function(){for(var Ce=0;Ce<A.length;Ce++){var Le=A[Ce],K=Le.layoutDimensions(m),le=Le.scratch("cola");if(!le.updatedDims){var Z=b(m.nodeSpacing,Le);le.width=K.w+2*Z,le.height=K.h+2*Z}}A.positions(function(ie){var re=ie.scratch().cola,J=void 0;return!ie.grabbed()&&T.contains(ie)&&(J={x:C.x1+re.x,y:C.y1+re.y},(!d(J.x)||!d(J.y))&&(J=void 0)),J}),A.updateCompoundBounds(),E||(B(),E=!0),m.fit&&w.fit(m.padding)},x=function(){m.ungrabifyWhileSimulating&&G.grabify(),w.off("destroy",V),A.off("grab free position",I),A.off("lock unlock",z),y.one("layoutstop",m.stop),y.trigger({type:"layoutstop",layout:y})},B=function(){y.one("layoutready",m.ready),y.trigger({type:"layoutready",layout:y})},D=m.refresh;m.refresh<0?D=1:D=Math.max(1,D);var O=y.adaptor=l.adaptor({trigger:function(Ce){var Le=l.EventType?l.EventType.tick:null,K=l.EventType?l.EventType.end:null;switch(Ce.type){case"tick":case Le:m.animate&&R();break;case"end":case K:R(),m.infinite||x();break}},kick:function(){var Ce=!0,Le=function(){if(y.manuallyStopped)return x(),!0;var ie=O.tick();return!m.infinite&&!Ce&&O.convergenceThreshold(m.convergenceThreshold),Ce=!1,ie&&m.infinite&&O.resume(),ie},K=function(){for(var ie=void 0,re=0;re<D&&!ie;re++)ie=ie||Le();return ie};if(m.animate){var le=function Z(){K()||f(Z)};f(le)}else for(;!Le(););},on:g,drag:g});y.adaptor=O;var G=A.filter(":grabbable");m.ungrabifyWhileSimulating&&G.ungrabify();var V=void 0;w.one("destroy",V=function(){y.stop()});var I=void 0;A.on("grab free position",I=function(Ce){var Le=this,K=Le.scratch().cola,le=Le.position(),Z=Ce.cyTarget===Le||Ce.target===Le;if(Z)switch(Ce.type){case"grab":O.dragstart(K);break;case"free":O.dragend(K);break;case"position":(K.px!==le.x-C.x1||K.py!==le.y-C.y1)&&(K.px=le.x-C.x1,K.py=le.y-C.y1);break}});var z=void 0;A.on("lock unlock",z=function(){var Ce=this,Le=Ce.scratch().cola;Le.fixed=Ce.locked(),Ce.locked()?O.dragstart(Le):O.dragend(Le)}),O.nodes(T.map(function(ve,Ce){var Le=b(m.nodeSpacing,ve),K=ve.position(),le=ve.layoutDimensions(m),Z=ve.scratch().cola={x:m.randomize&&!ve.locked()||K.x===void 0?Math.round(Math.random()*C.w):K.x,y:m.randomize&&!ve.locked()||K.y===void 0?Math.round(Math.random()*C.h):K.y,width:le.w+2*Le,height:le.h+2*Le,index:Ce,fixed:ve.locked()};return Z}));var P=[];if(m.alignment){if(m.alignment.vertical){var q=m.alignment.vertical;q.forEach(function(ve){var Ce=[];ve.forEach(function(Le){var K=Le.node,le=K.scratch().cola,Z=le.index;Ce.push({node:Z,offset:Le.offset?Le.offset:0})}),P.push({type:"alignment",axis:"x",offsets:Ce})})}if(m.alignment.horizontal){var F=m.alignment.horizontal;F.forEach(function(ve){var Ce=[];ve.forEach(function(Le){var K=Le.node,le=K.scratch().cola,Z=le.index;Ce.push({node:Z,offset:Le.offset?Le.offset:0})}),P.push({type:"alignment",axis:"y",offsets:Ce})})}}m.gapInequalities&&m.gapInequalities.forEach(function(ve){var Ce=ve.left.scratch().cola.index,Le=ve.right.scratch().cola.index;P.push({axis:ve.axis,left:Ce,right:Le,gap:ve.gap,equality:ve.equality})}),P.length>0&&O.constraints(P),O.groups(M.map(function(ve,Ce){var Le=b(m.nodeSpacing,ve),K=function(fe){return parseFloat(ve.style("padding-"+fe))},le=K("left")+Le,Z=K("right")+Le,ie=K("top")+Le,re=K("bottom")+Le;return ve.scratch().cola={index:Ce,padding:Math.max(le,Z,ie,re),leaves:ve.children().intersection(T).map(function(J){return J[0].scratch().cola.index}),fixed:ve.locked()},ve}).map(function(ve){return ve.scratch().cola.groups=ve.children().intersection(M).map(function(Ce){return Ce.scratch().cola.index}),ve.scratch().cola}));var U=void 0,W=void 0;m.edgeLength!=null?(U=m.edgeLength,W="linkDistance"):m.edgeSymDiffLength!=null?(U=m.edgeSymDiffLength,W="symmetricDiffLinkLengths"):m.edgeJaccardLength!=null?(U=m.edgeJaccardLength,W="jaccardLinkLengths"):(U=100,W="linkDistance");var X=function(Ce){return Ce.calcLength};if(O.links(_.stdFilter(function(ve){return T.contains(ve.source())&&T.contains(ve.target())}).map(function(ve){var Ce=ve.scratch().cola={source:ve.source()[0].scratch().cola.index,target:ve.target()[0].scratch().cola.index};return U!=null&&(Ce.calcLength=b(U,ve)),Ce})),O.size([C.w,C.h]),U!=null&&O[W](X),m.flow){var te=void 0,ne="y",he=50;c(m.flow)?te={axis:m.flow,minSeparation:he}:d(m.flow)?te={axis:ne,minSeparation:m.flow}:h(m.flow)?(te=m.flow,te.axis=te.axis||ne,te.minSeparation=te.minSeparation!=null?te.minSeparation:he):te={axis:ne,minSeparation:he},O.flowLayout(te.axis,te.minSeparation)}return y.trigger({type:"layoutstart",layout:y}),O.avoidOverlaps(m.avoidOverlap).handleDisconnected(m.handleDisconnected).start(m.unconstrIter,m.userConstIter,m.allConstIter,void 0,void 0,m.centerGraph),m.infinite||setTimeout(function(){y.manuallyStopped||O.stop()},m.maxSimulationTime),this},v.prototype.stop=function(){return this.adaptor&&(this.manuallyStopped=!0,this.adaptor.stop()),this},n.exports=v},function(n,i,a){n.exports=Object.assign!=null?Object.assign.bind(Object):function(o){for(var s=arguments.length,u=Array(s>1?s-1:0),l=1;l<s;l++)u[l-1]=arguments[l];return u.filter(function(f){return f!=null}).forEach(function(f){Object.keys(f).forEach(function(c){return o[c]=f[c]})}),o}},function(n,i,a){var o={animate:!0,refresh:1,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,ready:function(){},stop:function(){},randomize:!1,avoidOverlap:!0,handleDisconnected:!0,convergenceThreshold:.01,nodeSpacing:function(u){return 10},flow:void 0,alignment:void 0,gapInequalities:void 0,centerGraph:!0,edgeLength:void 0,edgeSymDiffLength:void 0,edgeJaccardLength:void 0,unconstrIter:void 0,userConstIter:void 0,allConstIter:void 0,infinite:!1};n.exports=o},function(n,i,a){var o=a(0),s=function(l){l&&l("layout","cola",o)};typeof cytoscape<"u"&&s(cytoscape),n.exports=s},function(n,i,a){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},s=void 0;(typeof window>"u"?"undefined":o(window))!=="undefined"?s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(u){return setTimeout(u,16)}:s=function(l){l()},n.exports=s},function(n,i){n.exports=t}])})})(NP);var FH=NP.exports;const BH=qi(FH);let Ub=0,FP=!1;function BP(){return typeof Shiny=="object"&&Shiny!==null}function zH(r){const e=Object.keys(r),t=r[e[0]].length,n=[];for(let i=0;i<t;i++){const a={};for(const o of e)a[o]=r[o][i];n.push(a)}return n}function D2(r,e=!0){FP=e,Ub=Ub+1;let t=$L(!0);t.name=r,t.counter=Ub,BP()&&Shiny.setInputValue("layout-layout",JSON.stringify(t))}BP()&&Shiny.addCustomMessageHandler("semPlotLayout",function(r){r=zH(r);const e=125,t=200;let n=1/0,i=1/0;for(let l=0;l<r.length;l++)for(let f=l+1;f<r.length;f++){const c=Math.abs(r[l].x-r[f].x),d=Math.abs(r[l].y-r[f].y);c<n&&r[l].y===r[f].y&&(n=c),d<i&&r[l].x===r[f].x&&(i=d)}const a=e/n,o=t/i;let s={};r.forEach(l=>{const f=l.x*a+400,c=l.y*-1*o+400;s[l.name]={x:f,y:c}});let u={name:"preset",positions:function(l){const f=l.data("label");return s[f]},fit:!0,padding:60,animate:!0};FP?Lr(ml).do("layout",{options:u}):Lr(jr).layout(u).run()});function qH(r){let e,t;return e=new ww({props:{name:"Apply Layout",menuItems:r[1],minimal:r[0]}}),{c(){Qt(e.$$.fragment)},m(n,i){Xt(e,n,i),t=!0},p(n,[i]){const a={};i&2&&(a.menuItems=n[1]),i&1&&(a.minimal=n[0]),e.$set(a)},i(n){t||(xt(e.$$.fragment,n),t=!0)},o(n){At(e.$$.fragment,n),t=!1},d(n){Kt(e,n)}}}function GH(r,e,t){let n,i,a;Kr(r,sr,d=>t(2,i=d)),Kr(r,ml,d=>t(3,a=d));let{minimal:o=!1}=e;Lr(jr),oo(()=>{ir.use(CH),ir.use(LH),ir.use(BH)});function s(){const d={name:"dagre",rankSep:150,animate:!0};a.do("layout",{options:d})}function u(){const d={name:"breadthfirst",animate:!0,spacingFactor:1};a.do("layout",{options:d})}function l(){const d={name:"circle",animate:!0};a.do("layout",{options:d})}function f(){const d={name:"fcose",animate:!0,idealEdgeLength:h=>150,quality:"proof",randomize:!1,nodeSeparation:200};a.do("layout",{options:d})}function c(){const d={name:"cola",animate:!0,nodeSpacing(h){return 50}};a.do("layout",{options:d})}return r.$$set=d=>{"minimal"in d&&t(0,o=d.minimal)},r.$$.update=()=>{r.$$.dirty&4&&t(1,n=[{name:"Recommended: Tree",action:()=>D2("tree"),disable:i.modelEmpty},{name:"Recommended: Tree2",action:()=>D2("tree2"),disable:i.modelEmpty},{name:"Experimental: Tree",action:s,disable:i.modelEmpty},{name:"Experimental: Tree2",action:u,disable:i.modelEmpty},{name:"Experimental: Circle",action:l,disable:i.modelEmpty},{name:"Experimental: Force-directed",action:f,disable:i.modelEmpty},{name:"Experimental: Cola",action:c,disable:i.modelEmpty}])},[o,n,i]}class zP extends Ir{constructor(e){super(),Dr(this,e,GH,qH,Nr,{minimal:0})}}function o3(r,e,t){const n=r.slice();return n[4]=e[t],n[5]=e,n[6]=t,n}function s3(r){let e,t,n,i;function a(u){r[2](u,r[4])}function o(u){r[3](u,r[4])}let s={};return r[4].name!==void 0&&(s.name=r[4].name),r[1][r[4].modelProperty]!==void 0&&(s.checked=r[1][r[4].modelProperty]),e=new Zo({props:s}),qn.push(()=>ti(e,"name",a)),qn.push(()=>ti(e,"checked",o)),{c(){Qt(e.$$.fragment)},m(u,l){Xt(e,u,l),i=!0},p(u,l){r=u;const f={};!t&&l&1&&(t=!0,f.name=r[4].name,ei(()=>t=!1)),!n&&l&3&&(n=!0,f.checked=r[1][r[4].modelProperty],ei(()=>n=!1)),e.$set(f)},i(u){i||(xt(e.$$.fragment,u),i=!0)},o(u){At(e.$$.fragment,u),i=!1},d(u){Kt(e,u)}}}function $H(r){let e,t,n=r[0],i=[];for(let o=0;o<n.length;o+=1)i[o]=s3(o3(r,n,o));const a=o=>At(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=jf()},m(o,s){for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(o,s);Pt(o,e,s),t=!0},p(o,s){if(s&3){n=o[0];let u;for(u=0;u<n.length;u+=1){const l=o3(o,n,u);i[u]?(i[u].p(l,s),xt(i[u],1)):(i[u]=s3(l),i[u].c(),xt(i[u],1),i[u].m(e.parentNode,e))}for(io(),u=n.length;u<i.length;u+=1)a(u);ao()}},i(o){if(!t){for(let s=0;s<n.length;s+=1)xt(i[s]);t=!0}},o(o){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)At(i[s]);t=!1},d(o){Ls(i,o),o&&Nt(e)}}}function UH(r){let e,t;return e=new ac({props:{name:HH,$$slots:{default:[$H]},$$scope:{ctx:r}}}),{c(){Qt(e.$$.fragment)},m(n,i){Xt(e,n,i),t=!0},p(n,[i]){const a={};i&131&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){t||(xt(e.$$.fragment,n),t=!0)},o(n){At(e.$$.fragment,n),t=!1},d(n){Kt(e,n)}}}const HH="Automatically..";function jH(r,e,t){let n;Kr(r,tn,s=>t(1,n=s));const i=[{name:"Fix Factor Loading of First Indicator at 1",modelProperty:"fix_first"},{name:"Include Variances",modelProperty:"auto_var"},{name:"Include Covariances of Exogenous Latent Variables",modelProperty:"auto_cov_lv_x"},{name:"Include Covariances of Dependent Variables",modelProperty:"auto_cov_y"},{name:"Fix Variance of Only Indicator to 0",modelProperty:"fix_single"},{name:"Treat Exogenous Observed Variables as Fixed Variables",modelProperty:"fixed_x"}];function a(s,u){r.$$.not_equal(u.name,s)&&(u.name=s,t(0,i))}function o(s,u){r.$$.not_equal(n[u.modelProperty],s)&&(n[u.modelProperty]=s,tn.set(n))}return[i,n,a,o]}class VH extends Ir{constructor(e){super(),Dr(this,e,jH,UH,Nr,{})}}function WH(r){let e,t;return e=new ww({props:{name:"Help",menuItems:r[0]}}),{c(){Qt(e.$$.fragment)},m(n,i){Xt(e,n,i),t=!0},p:Yr,i(n){t||(xt(e.$$.fragment,n),t=!0)},o(n){At(e.$$.fragment,n),t=!1},d(n){Kt(e,n)}}}function YH(){Shiny.setInputValue("show_help",Math.random())}function XH(){window.open("https://karchjd.github.io/docs.lavaangui/","_blank")}function KH(r){return[[{name:"Show Commands",action:YH},{name:"Open Manual",action:XH}]]}class ZH extends Ir{constructor(e){super(),Dr(this,e,KH,WH,Nr,{})}}function QH(r){let e,t,n,i,a,o,s,u,l,f,c,d,h,p,g,b,v,y,m,w,S;function A(I){r[2](I)}let _={name:"Show Grid"};r[1].gridShow!==void 0&&(_.checked=r[1].gridShow),e=new Zo({props:_}),qn.push(()=>ti(e,"checked",A));function E(I){r[3](I)}let k={name:"Snap to Grid"};r[1].gridSnap!==void 0&&(k.checked=r[1].gridSnap),i=new Zo({props:k}),qn.push(()=>ti(i,"checked",E));function M(I){r[4](I)}let T={name:"Resize to Grid"};r[1].gridResize!==void 0&&(T.checked=r[1].gridResize),s=new Zo({props:T}),qn.push(()=>ti(s,"checked",M));function C(I){r[5](I)}let R={name:"Snap to Alignment on Release"};r[1].gridAlign!==void 0&&(R.checked=r[1].gridAlign),f=new Zo({props:R}),qn.push(()=>ti(f,"checked",C));function x(I){r[6](I)}let B={name:"Move Grid on Pan"};r[1].gridMovePan!==void 0&&(B.checked=r[1].gridMovePan),h=new Zo({props:B}),qn.push(()=>ti(h,"checked",x));function D(I){r[7](I)}let O={name:"Grid Spacing:",min:5};r[1].gridSpace!==void 0&&(O.value=r[1].gridSpace),b=new kp({props:O}),qn.push(()=>ti(b,"value",D));function G(I){r[8](I)}let V={name:"Line Width:",min:0};return r[1].gridWidth!==void 0&&(V.value=r[1].gridWidth),m=new kp({props:V}),qn.push(()=>ti(m,"value",G)),{c(){Qt(e.$$.fragment),n=qt(),Qt(i.$$.fragment),o=qt(),Qt(s.$$.fragment),l=qt(),Qt(f.$$.fragment),d=qt(),Qt(h.$$.fragment),g=qt(),Qt(b.$$.fragment),y=qt(),Qt(m.$$.fragment)},m(I,z){Xt(e,I,z),Pt(I,n,z),Xt(i,I,z),Pt(I,o,z),Xt(s,I,z),Pt(I,l,z),Xt(f,I,z),Pt(I,d,z),Xt(h,I,z),Pt(I,g,z),Xt(b,I,z),Pt(I,y,z),Xt(m,I,z),S=!0},p(I,z){const P={};!t&&z&2&&(t=!0,P.checked=I[1].gridShow,ei(()=>t=!1)),e.$set(P);const q={};!a&&z&2&&(a=!0,q.checked=I[1].gridSnap,ei(()=>a=!1)),i.$set(q);const F={};!u&&z&2&&(u=!0,F.checked=I[1].gridResize,ei(()=>u=!1)),s.$set(F);const U={};!c&&z&2&&(c=!0,U.checked=I[1].gridAlign,ei(()=>c=!1)),f.$set(U);const W={};!p&&z&2&&(p=!0,W.checked=I[1].gridMovePan,ei(()=>p=!1)),h.$set(W);const X={};!v&&z&2&&(v=!0,X.value=I[1].gridSpace,ei(()=>v=!1)),b.$set(X);const te={};!w&&z&2&&(w=!0,te.value=I[1].gridWidth,ei(()=>w=!1)),m.$set(te)},i(I){S||(xt(e.$$.fragment,I),xt(i.$$.fragment,I),xt(s.$$.fragment,I),xt(f.$$.fragment,I),xt(h.$$.fragment,I),xt(b.$$.fragment,I),xt(m.$$.fragment,I),S=!0)},o(I){At(e.$$.fragment,I),At(i.$$.fragment,I),At(s.$$.fragment,I),At(f.$$.fragment,I),At(h.$$.fragment,I),At(b.$$.fragment,I),At(m.$$.fragment,I),S=!1},d(I){Kt(e,I),I&&Nt(n),Kt(i,I),I&&Nt(o),Kt(s,I),I&&Nt(l),Kt(f,I),I&&Nt(d),Kt(h,I),I&&Nt(g),Kt(b,I),I&&Nt(y),Kt(m,I)}}}function JH(r){let e,t;return e=new ac({props:{minimal:r[0],name:"Grid Options",$$slots:{default:[QH]},$$scope:{ctx:r}}}),{c(){Qt(e.$$.fragment)},m(n,i){Xt(e,n,i),t=!0},p(n,[i]){const a={};i&1&&(a.minimal=n[0]),i&514&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){t||(xt(e.$$.fragment,n),t=!0)},o(n){At(e.$$.fragment,n),t=!1},d(n){Kt(e,n)}}}function ej(r,e,t){let n;Kr(r,Jn,d=>t(1,n=d));let{minimal:i=!1}=e;function a(d){r.$$.not_equal(n.gridShow,d)&&(n.gridShow=d,Jn.set(n))}function o(d){r.$$.not_equal(n.gridSnap,d)&&(n.gridSnap=d,Jn.set(n))}function s(d){r.$$.not_equal(n.gridResize,d)&&(n.gridResize=d,Jn.set(n))}function u(d){r.$$.not_equal(n.gridAlign,d)&&(n.gridAlign=d,Jn.set(n))}function l(d){r.$$.not_equal(n.gridMovePan,d)&&(n.gridMovePan=d,Jn.set(n))}function f(d){r.$$.not_equal(n.gridSpace,d)&&(n.gridSpace=d,Jn.set(n))}function c(d){r.$$.not_equal(n.gridWidth,d)&&(n.gridWidth=d,Jn.set(n))}return r.$$set=d=>{"minimal"in d&&t(0,i=d.minimal)},[i,n,a,o,s,u,l,f,c]}class qP extends Ir{constructor(e){super(),Dr(this,e,ej,JH,Nr,{minimal:0})}}function tj(r){return window.$(document).ready(function(){var e=!1;window.$(".navbar .dropdown").hover(function(){e&&(window.$(".navbar .dropdown").removeClass("open"),window.$(this).addClass("open"))},function(){}),window.$(".navbar .dropdown").on("show.bs.dropdown",function(){e=!0}),window.$(".navbar .dropdown").on("hide.bs.dropdown",function(){window.$(".navbar .dropdown.open").length<=1&&(e=!1)})}),[]}class rj extends Ir{constructor(e){super(),Dr(this,e,tj,null,Nr,{})}}function nj(r){let e,t,n,i,a,o,s,u,l,f,c,d,h,p,g,b,v,y;return e=new PN({}),n=new ON({}),a=new RG({}),s=new VH({}),l=new GG({}),c=new zP({}),h=new qP({}),g=new ZH({}),v=new rj({}),{c(){Qt(e.$$.fragment),t=qt(),Qt(n.$$.fragment),i=qt(),Qt(a.$$.fragment),o=qt(),Qt(s.$$.fragment),u=qt(),Qt(l.$$.fragment),f=qt(),Qt(c.$$.fragment),d=qt(),Qt(h.$$.fragment),p=qt(),Qt(g.$$.fragment),b=qt(),Qt(v.$$.fragment)},m(m,w){Xt(e,m,w),Pt(m,t,w),Xt(n,m,w),Pt(m,i,w),Xt(a,m,w),Pt(m,o,w),Xt(s,m,w),Pt(m,u,w),Xt(l,m,w),Pt(m,f,w),Xt(c,m,w),Pt(m,d,w),Xt(h,m,w),Pt(m,p,w),Xt(g,m,w),Pt(m,b,w),Xt(v,m,w),y=!0},i(m){y||(xt(e.$$.fragment,m),xt(n.$$.fragment,m),xt(a.$$.fragment,m),xt(s.$$.fragment,m),xt(l.$$.fragment,m),xt(c.$$.fragment,m),xt(h.$$.fragment,m),xt(g.$$.fragment,m),xt(v.$$.fragment,m),y=!0)},o(m){At(e.$$.fragment,m),At(n.$$.fragment,m),At(a.$$.fragment,m),At(s.$$.fragment,m),At(l.$$.fragment,m),At(c.$$.fragment,m),At(h.$$.fragment,m),At(g.$$.fragment,m),At(v.$$.fragment,m),y=!1},d(m){Kt(e,m),m&&Nt(t),Kt(n,m),m&&Nt(i),Kt(a,m),m&&Nt(o),Kt(s,m),m&&Nt(u),Kt(l,m),m&&Nt(f),Kt(c,m),m&&Nt(d),Kt(h,m),m&&Nt(p),Kt(g,m),m&&Nt(b),Kt(v,m)}}}function ij(r){let e,t;return e=new Hz({props:{$$slots:{default:[nj]},$$scope:{ctx:r}}}),{c(){Qt(e.$$.fragment)},m(n,i){Xt(e,n,i),t=!0},p(n,[i]){const a={};i&1&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){t||(xt(e.$$.fragment,n),t=!0)},o(n){At(e.$$.fragment,n),t=!1},d(n){Kt(e,n)}}}class aj extends Ir{constructor(e){super(),Dr(this,e,null,ij,Nr,{})}}function oj(r){let e;return{c(){e=Yt("pre"),st(e,"id","res-results"),st(e,"class","shiny-html-output well svelte-74yvxb"),st(e,"data-testid","result-text")},m(t,n){Pt(t,e,n)},p:Yr,i:Yr,o:Yr,d(t){t&&Nt(e)}}}class sj extends Ir{constructor(e){super(),Dr(this,e,null,oj,Nr,{})}}function uj(r){return window.cy=Lr(jr),sr.subscribe(e=>{window.appState=e}),tn.subscribe(e=>{window.modelOptions=e}),o2.subscribe(e=>{window.dataInfo=e}),Ts.subscribe(e=>{window.fitCache=e}),Jn.subscribe(e=>{window.gridViewOptions=e}),[]}class lj extends Ir{constructor(e){super(),Dr(this,e,uj,null,Nr,{})}}var GP={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(self,function(){return(()=>{var t={621:(a,o,s)=>{function u(I,z){(z==null||z>I.length)&&(z=I.length);for(var P=0,q=new Array(z);P<z;P++)q[P]=I[P];return q}function l(I){for(var z="",P=0;P<I.length;P++)z+=I[P],P!==I.length-1&&(z+=" ");return z}function f(I,z,P){P?I.setAttribute(z,""):I.removeAttribute(z)}function c(I,z,P){customElements.get(I)===void 0&&customElements.define(I,z,{extends:P})}s.r(o),s.d(o,{contextMenus:()=>V});var d="cy-context-menus-divider",h={evtType:"cxttap",menuItems:[],menuItemClasses:["cy-context-menus-cxt-menuitem"],contextMenuClasses:["cy-context-menus-cxt-menu"],submenuIndicator:{src:"assets/submenu-indicator-default.svg",width:12,height:12}};function p(I){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(I)}function g(I,z){var P;if(typeof Symbol>"u"||I[Symbol.iterator]==null){if(Array.isArray(I)||(P=function(te,ne){if(te){if(typeof te=="string")return b(te,ne);var he=Object.prototype.toString.call(te).slice(8,-1);return he==="Object"&&te.constructor&&(he=te.constructor.name),he==="Map"||he==="Set"?Array.from(te):he==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(he)?b(te,ne):void 0}}(I))||z&&I&&typeof I.length=="number"){P&&(I=P);var q=0,F=function(){};return{s:F,n:function(){return q>=I.length?{done:!0}:{done:!1,value:I[q++]}},e:function(te){throw te},f:F}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var U,W=!0,X=!1;return{s:function(){P=I[Symbol.iterator]()},n:function(){var te=P.next();return W=te.done,te},e:function(te){X=!0,U=te},f:function(){try{W||P.return==null||P.return()}finally{if(X)throw U}}}}function b(I,z){(z==null||z>I.length)&&(z=I.length);for(var P=0,q=new Array(z);P<z;P++)q[P]=I[P];return q}function v(I,z){if(!(I instanceof z))throw new TypeError("Cannot call a class as a function")}function y(I,z){for(var P=0;P<z.length;P++){var q=z[P];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(I,q.key,q)}}function m(I,z,P){return z&&y(I.prototype,z),P&&y(I,P),I}function w(I,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(z&&z.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),z&&C(I,z)}function S(I){var z=T();return function(){var P,q=R(I);if(z){var F=R(this).constructor;P=Reflect.construct(q,arguments,F)}else P=q.apply(this,arguments);return A(this,P)}}function A(I,z){return!z||p(z)!=="object"&&typeof z!="function"?_(I):z}function _(I){if(I===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I}function E(I,z,P){return(E=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(q,F,U){var W=function(te,ne){for(;!Object.prototype.hasOwnProperty.call(te,ne)&&(te=R(te))!==null;);return te}(q,F);if(W){var X=Object.getOwnPropertyDescriptor(W,F);return X.get?X.get.call(U):X.value}})(I,z,P||I)}function k(I){var z=typeof Map=="function"?new Map:void 0;return(k=function(P){if(P===null||(q=P,Function.toString.call(q).indexOf("[native code]")===-1))return P;var q;if(typeof P!="function")throw new TypeError("Super expression must either be null or a function");if(z!==void 0){if(z.has(P))return z.get(P);z.set(P,F)}function F(){return M(P,arguments,R(this).constructor)}return F.prototype=Object.create(P.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),C(F,P)})(I)}function M(I,z,P){return(M=T()?Reflect.construct:function(q,F,U){var W=[null];W.push.apply(W,F);var X=new(Function.bind.apply(q,W));return U&&C(X,U.prototype),X}).apply(null,arguments)}function T(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function C(I,z){return(C=Object.setPrototypeOf||function(P,q){return P.__proto__=q,P})(I,z)}function R(I){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)})(I)}function x(I){I.preventDefault(),I.stopPropagation()}var B=function(I){w(P,I);var z=S(P);function P(q,F,U){var W,X,te,ne,he,ve,Ce,Le,K,le;v(this,P),E((X=_(le=z.call(this)),R(P.prototype)),"setAttribute",X).call(X,"id",q.id);var Z=le._getMenuItemClassStr(U.cxtMenuItemClasses,q.hasTrailingDivider);if(E((te=_(le),R(P.prototype)),"setAttribute",te).call(te,"class",Z),E((ne=_(le),R(P.prototype)),"setAttribute",ne).call(ne,"title",(W=q.tooltipText)!==null&&W!==void 0?W:""),q.disabled&&f(_(le),"disabled",!0),q.image){var ie=document.createElement("img");ie.src=q.image.src,ie.width=q.image.width,ie.height=q.image.height,ie.style.position="absolute",ie.style.top=q.image.y+"px",ie.style.left=q.image.x+"px",E((he=_(le),R(P.prototype)),"appendChild",he).call(he,ie)}if(le.innerHTML+=q.content,le.onMenuItemClick=F,le.data={},le.clickFns=[],le.selector=q.selector,le.hasTrailingDivider=q.hasTrailingDivider,le.show=q.show===void 0||q.show,le.coreAsWell=q.coreAsWell||!1,le.scratchpad=U,q.onClickFunction===void 0&&q.submenu===void 0)throw new Error("A menu item must either have click function or a submenu or both");return le.onClickFunction=q.onClickFunction,q.submenu instanceof Array&&le._createSubmenu(q.submenu),E((ve=_(le),R(P.prototype)),"addEventListener",ve).call(ve,"mousedown",x),E((Ce=_(le),R(P.prototype)),"addEventListener",Ce).call(Ce,"mouseup",x),E((Le=_(le),R(P.prototype)),"addEventListener",Le).call(Le,"touchstart",x),E((K=_(le),R(P.prototype)),"addEventListener",K).call(K,"touchend",x),le}return m(P,[{key:"bindOnClickFunction",value:function(q){this.clickFns.push(q),E(R(P.prototype),"addEventListener",this).call(this,"click",q)}},{key:"unbindOnClickFunctions",value:function(){var q,F=g(this.clickFns);try{for(F.s();!(q=F.n()).done;){var U=q.value;E(R(P.prototype),"removeEventListener",this).call(this,"click",U)}}catch(W){F.e(W)}finally{F.f()}this.clickFns=[]}},{key:"enable",value:function(){f(this,"disabled",!1),this.hasSubmenu()&&this.addEventListener("mouseenter",this.mouseEnterHandler)}},{key:"disable",value:function(){f(this,"disabled",!0),this.hasSubmenu()&&this.removeEventListener("mouseenter",this.mouseEnterHandler)}},{key:"hide",value:function(){this.show=!1,this.style.display="none"}},{key:"getHasTrailingDivider",value:function(){return!!this.hasTrailingDivider}},{key:"setHasTrailingDivider",value:function(q){this.hasTrailingDivider=q}},{key:"hasSubmenu",value:function(){return this.submenu instanceof D}},{key:"appendSubmenuItem",value:function(q){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.hasSubmenu()||this._createSubmenu(),this.submenu.appendMenuItem(q,F)}},{key:"isClickable",value:function(){return this.onClickFunction!==void 0}},{key:"display",value:function(){this.show=!0,this.style.display="block"}},{key:"isVisible",value:function(){return this.show===!0&&this.style.display!=="none"}},{key:"removeSubmenu",value:function(){this.hasSubmenu()&&(this.submenu.removeAllMenuItems(),this.detachSubmenu())}},{key:"detachSubmenu",value:function(){this.hasSubmenu()&&(this.removeChild(this.submenu),this.removeChild(this.indicator),this.removeEventListener("mouseenter",this.mouseEnterHandler),this.removeEventListener("mouseleave",this.mouseLeaveHandler),this.submenu=void 0,this.indicator=void 0)}},{key:"_onMouseEnter",value:function(q){var F=this.getBoundingClientRect(),U=function(he){he.style.opacity="0",he.style.display="block";var ve=he.getBoundingClientRect();return he.style.opacity="1",he.style.display="none",ve}(this.submenu),W=F.right+U.width>window.innerWidth,X=F.top+U.height>window.innerHeight;W||X?W&&!X?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.left="auto",this.submenu.style.bottom="auto"):W&&X?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.top="auto",this.submenu.style.left="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.right="auto",this.submenu.style.top="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.right="auto",this.submenu.style.bottom="auto"),this.submenu.display();var te=Array.from(this.submenu.children).filter(function(he){if(he instanceof P)return he.isVisible()}),ne=te.length;te.forEach(function(he,ve){he instanceof P&&(ve<ne-1&&he.getHasTrailingDivider()?he.classList.add(d):he.getHasTrailingDivider()&&he.classList.remove(d))})}},{key:"_onMouseLeave",value:function(q){var F,U,W,X,te;F={x:q.clientX,y:q.clientY},U=this.submenu,X=F.y,(W=F.x)>=(te=U.getBoundingClientRect()).left&&W<=te.right&&X>=te.top&&X<=te.bottom||this.submenu.hide()}},{key:"_createSubmenu",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.indicator=this.scratchpad.submenuIndicatorGen(),this.submenu=new D(this.onMenuItemClick,this.scratchpad),this.appendChild(this.indicator),this.appendChild(this.submenu);var F,U=g(q);try{for(U.s();!(F=U.n()).done;){var W=F.value,X=new P(W,this.onMenuItemClick,this.scratchpad);this.submenu.appendMenuItem(X)}}catch(te){U.e(te)}finally{U.f()}this.mouseEnterHandler=this._onMouseEnter.bind(this),this.mouseLeaveHandler=this._onMouseLeave.bind(this),this.addEventListener("mouseenter",this.mouseEnterHandler),this.addEventListener("mouseleave",this.mouseLeaveHandler)}},{key:"_getMenuItemClassStr",value:function(q,F){return F?q+" "+d:q}}],[{key:"define",value:function(){c("ctx-menu-item",P,"button")}}]),P}(k(HTMLButtonElement)),D=function(I){w(P,I);var z=S(P);function P(q,F){var U,W;return v(this,P),E((U=_(W=z.call(this)),R(P.prototype)),"setAttribute",U).call(U,"class",F.cxtMenuClasses),W.style.position="absolute",W.onMenuItemClick=q,W.scratchpad=F,W}return m(P,[{key:"hide",value:function(){this.isVisible()&&(this.hideSubmenus(),this.style.display="none")}},{key:"display",value:function(){this.style.display="block"}},{key:"isVisible",value:function(){return this.style.display!=="none"}},{key:"hideMenuItems",value:function(){var q,F=g(this.children);try{for(F.s();!(q=F.n()).done;){var U=q.value;U instanceof HTMLElement?U.style.display="none":console.warn("".concat(U," is not a HTMLElement"))}}catch(W){F.e(W)}finally{F.f()}}},{key:"hideSubmenus",value:function(){var q,F=g(this.children);try{for(F.s();!(q=F.n()).done;){var U=q.value;U instanceof B&&U.submenu&&U.submenu.hide()}}catch(W){F.e(W)}finally{F.f()}}},{key:"appendMenuItem",value:function(q){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(F!==void 0){if(F.parentNode!==this)throw new Error("The item with id='".concat(F.id,"' is not a child of the context menu"));this.insertBefore(q,F)}else this.appendChild(q);q.isClickable()&&this._performBindings(q)}},{key:"moveBefore",value:function(q,F){if(q.parentNode!==this)throw new Error("The item with id='".concat(q.id,"' is not a child of context menu"));if(F.parentNode!==this)throw new Error("The item with id='".concat(F.id,"' is not a child of context menu"));this.removeChild(q),this.insertBefore(q,F)}},{key:"removeAllMenuItems",value:function(){for(;this.firstChild;){var q=this.lastChild;q instanceof B?this._removeImmediateMenuItem(q):(console.warn("Found non menu item in the context menu: ",q),this.removeChild(q))}}},{key:"_removeImmediateMenuItem",value:function(q){if(!this._detachImmediateMenuItem(q))throw new Error("menu item(id=".concat(q.id,") is not in the context menu"));q.detachSubmenu(),q.unbindOnClickFunctions()}},{key:"_detachImmediateMenuItem",value:function(q){if(q.parentNode===this){if(this.removeChild(q),this.children.length<=0){var F=this.parentNode;F instanceof B&&F.detachSubmenu()}return!0}return!1}},{key:"_performBindings",value:function(q){var F=this._bindOnClick(q.onClickFunction);q.bindOnClickFunction(F),q.bindOnClickFunction(this.onMenuItemClick)}},{key:"_bindOnClick",value:function(q){var F=this;return function(){var U=F.scratchpad.currentCyEvent;q(U)}}}],[{key:"define",value:function(){c("menu-item-list",P,"div")}}]),P}(k(HTMLDivElement)),O=function(I){w(P,I);var z=S(P);function P(q,F){var U;return v(this,P),(U=z.call(this,q,F)).onMenuItemClick=function(W){x(W),U.hide(),q()},U}return m(P,[{key:"removeMenuItem",value:function(q){var F=q.parentElement;F instanceof D&&this.contains(F)&&F._removeImmediateMenuItem(q)}},{key:"appendMenuItem",value:function(q){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.ensureDoesntContain(q.id),E(R(P.prototype),"appendMenuItem",this).call(this,q,F)}},{key:"insertMenuItem",value:function(q){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},U=F.before,W=F.parent;if(this.ensureDoesntContain(q.id),U!==void 0){if(!this.contains(U))throw new Error("before(id=".concat(U.id,") is not in the context menu"));var X=U.parentNode;if(!(X instanceof D))throw new Error("Parent of before(id=".concat(U.id,") is not a submenu"));X.appendMenuItem(q,U)}else if(W!==void 0){if(!this.contains(W))throw new Error("parent(id=".concat(W.id,") is not a descendant of the context menu"));W.appendSubmenuItem(q)}else this.appendMenuItem(q)}},{key:"moveBefore",value:function(q,F){var U=q.parentElement;if(!this.contains(U))throw new Error("parent(id=".concat(U.id,") is not in the contex menu"));if(!this.contains(F))throw new Error("before(id=".concat(F.id,") is not in the context menu"));U.removeChild(q),this.insertMenuItem(q,{before:F})}},{key:"moveToSubmenu",value:function(q){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,W=q.parentElement;if(!(W instanceof D))throw new Error("current parent(id=".concat(W.id,") is not a submenu"));if(!this.contains(W))throw new Error("parent of the menu item(id=".concat(W.id,") is not in the context menu"));if(F!==null){if(!this.contains(F))throw new Error("parent(id=".concat(F.id,") is not in the context menu"));W._detachImmediateMenuItem(q),F.appendSubmenuItem(q)}else U!==null&&(q.selector=U.selector,q.coreAsWell=U.coreAsWell),W._detachImmediateMenuItem(q),this.appendMenuItem(q)}},{key:"ensureDoesntContain",value:function(q){var F=document.getElementById(q);if(F!==void 0&&this.contains(F))throw new Error("There is already an element with id=".concat(q," in the context menu"))}}],[{key:"define",value:function(){c("ctx-menu",P,"div")}}]),P}(D);function G(I,z){(z==null||z>I.length)&&(z=I.length);for(var P=0,q=new Array(z);P<z;P++)q[P]=I[P];return q}function V(I){var z=this;z.scratch("cycontextmenus")||z.scratch("cycontextmenus",{});var P,q,F=function(Z){return z.scratch("cycontextmenus")[Z]},U=function(Z,ie){return z.scratch("cycontextmenus")[Z]=ie},W=F("options"),X=F("cxtMenu"),te=function(Z){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,re=he(Z);if(ie!==void 0){var J=Ce(ie);X.insertMenuItem(re,{parent:J})}else X.insertMenuItem(re)},ne=function(Z){for(var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,re=0;re<Z.length;re++)te(Z[re],ie)},he=function(Z){var ie=z.scratch("cycontextmenus");return new B(Z,X.onMenuItemClick,ie)},ve=function(){F("active")&&(X.removeAllMenuItems(),z.off("tapstart",F("eventCyTapStart")),z.off(W.evtType,F("onCxttap")),z.off("viewport",F("onViewport")),document.removeEventListener("mouseup",F("hideOnNonCyClick")),X.parentNode.removeChild(X),X=void 0,U("cxtMenu",void 0),U("active",!1),U("anyVisibleChild",!1),U("onCxttap",void 0),U("onViewport",void 0),U("hideOnNonCyClick",void 0))},Ce=function(Z){var ie=document.getElementById(Z);if(ie instanceof B)return ie;throw new Error("The item with id=".concat(Z," is not a menu item"))};if(I!=="get"){B.define(),D.define(),O.define(),W=function(Z,ie){var re={};for(var J in Z)re[J]=Z[J];for(var fe in ie)re[fe]instanceof Array?re[fe]=re[fe].concat(ie[fe]):re[fe]=ie[fe];return re}(h,I),U("options",W),F("active")&&ve(),U("active",!0),U("submenuIndicatorGen",(function(Z){var ie=document.createElement("img");return ie.src=Z.src,ie.width=Z.width,ie.height=Z.height,ie.classList.add("cy-context-menus-submenu-indicator"),ie}).bind(void 0,W.submenuIndicator));var Le=l(W.contextMenuClasses);U("cxtMenuClasses",Le);var K=z.scratch("cycontextmenus");X=new O(function(){return U("cxtMenuPosition",void 0)},K),U("cxtMenu",X),z.container().appendChild(X),U("cxtMenuItemClasses",l(W.menuItemClasses));var le=W.menuItems;ne(le),q=function(Z){U("currentCyEvent",Z),function(me){var ue,ce=z.container(),oe=F("cxtMenuPosition"),Ae=me.position||me.cyPosition;if(oe!=Ae){X.hideMenuItems(),U("anyVisibleChild",!1),U("cxtMenuPosition",Ae);var Te={top:(ue=ce.getBoundingClientRect()).top,left:ue.left},Ge=me.renderedPosition||me.cyRenderedPosition,Fe=getComputedStyle(ce)["border-width"],Re=parseInt(Fe.replace("px",""))||0;Re>0&&(Te.top+=Re,Te.left+=Re);var ze=ce.clientHeight,Ie=ce.clientWidth,Ve=ze/2,We=Ie/2;Ge.y>Ve&&Ge.x<=We?(X.style.left=Ge.x+"px",X.style.bottom=ze-Ge.y+"px",X.style.right="auto",X.style.top="auto"):Ge.y>Ve&&Ge.x>We?(X.style.right=Ie-Ge.x+"px",X.style.bottom=ze-Ge.y+"px",X.style.left="auto",X.style.top="auto"):Ge.y<=Ve&&Ge.x<=We?(X.style.left=Ge.x+"px",X.style.top=Ge.y+"px",X.style.right="auto",X.style.bottom="auto"):(X.style.right=Ie-Ge.x+"px",X.style.top=Ge.y+"px",X.style.left="auto",X.style.bottom="auto")}}(Z);var ie,re=Z.target||Z.cyTarget,J=function(me,ue){var ce;if(typeof Symbol>"u"||me[Symbol.iterator]==null){if(Array.isArray(me)||(ce=function(Re,ze){if(Re){if(typeof Re=="string")return G(Re,ze);var Ie=Object.prototype.toString.call(Re).slice(8,-1);return Ie==="Object"&&Re.constructor&&(Ie=Re.constructor.name),Ie==="Map"||Ie==="Set"?Array.from(Re):Ie==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ie)?G(Re,ze):void 0}}(me))||ue&&me&&typeof me.length=="number"){ce&&(me=ce);var oe=0,Ae=function(){};return{s:Ae,n:function(){return oe>=me.length?{done:!0}:{done:!1,value:me[oe++]}},e:function(Re){throw Re},f:Ae}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Te,Ge=!0,Fe=!1;return{s:function(){ce=me[Symbol.iterator]()},n:function(){var Re=ce.next();return Ge=Re.done,Re},e:function(Re){Fe=!0,Te=Re},f:function(){try{Ge||ce.return==null||ce.return()}finally{if(Fe)throw Te}}}}(X.children);try{for(J.s();!(ie=J.n()).done;){var fe=ie.value;fe instanceof B&&(re===z?fe.coreAsWell:re.is(fe.selector))&&fe.show&&(X.display(),U("anyVisibleChild",!0),fe.display())}}catch(me){J.e(me)}finally{J.f()}var we=Array.from(X.children).filter(function(me){if(me instanceof B)return me.isVisible()}),ge=we.length;we.forEach(function(me,ue){me instanceof B&&(ue<ge-1&&me.getHasTrailingDivider()?me.classList.add(d):me.getHasTrailingDivider()&&me.classList.remove(d))}),!F("anyVisibleChild")&&!function(me){return me.offsetWidth<=0&&me.offsetHeight<=0||me.style&&me.style.display||getComputedStyle(me).display}(X)&&X.hide()},z.on(W.evtType,q),U("onCxttap",q),function(){var Z=function(re){if(X.contains(re.originalEvent.target))return!1;X.hide(),U("cxtMenuPosition",void 0),U("currentCyEvent",void 0)};z.on("tapstart",Z),U("eventCyTapStart",Z);var ie=function(){X.hide()};z.on("viewport",ie),U("onViewport",ie)}(),P=function(Z){z.container().contains(Z.target)||X.contains(Z.target)||(X.hide(),U("cxtMenuPosition",void 0))},document.addEventListener("mouseup",P),U("hideOnNonCyClick",P),function(){var Z,ie=function(re,J){var fe;if(typeof Symbol>"u"||re[Symbol.iterator]==null){if(Array.isArray(re)||(fe=function(oe,Ae){if(oe){if(typeof oe=="string")return u(oe,Ae);var Te=Object.prototype.toString.call(oe).slice(8,-1);return Te==="Object"&&oe.constructor&&(Te=oe.constructor.name),Te==="Map"||Te==="Set"?Array.from(oe):Te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Te)?u(oe,Ae):void 0}}(re))||J&&re&&typeof re.length=="number"){fe&&(re=fe);var we=0,ge=function(){};return{s:ge,n:function(){return we>=re.length?{done:!0}:{done:!1,value:re[we++]}},e:function(oe){throw oe},f:ge}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var me,ue=!0,ce=!1;return{s:function(){fe=re[Symbol.iterator]()},n:function(){var oe=fe.next();return ue=oe.done,oe},e:function(oe){ce=!0,me=oe},f:function(){try{ue||fe.return==null||fe.return()}finally{if(ce)throw me}}}}(document.getElementsByClassName("cy-context-menus-cxt-menu"));try{for(ie.s();!(Z=ie.n()).done;)Z.value.addEventListener("contextmenu",function(re){return re.preventDefault()})}catch(re){ie.e(re)}finally{ie.f()}}()}return function(Z){return{isActive:function(){return F("active")},appendMenuItem:function(ie){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return te(ie,re),Z},appendMenuItems:function(ie){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return ne(ie,re),Z},removeMenuItem:function(ie){var re=Ce(ie);return X.removeMenuItem(re),Z},setTrailingDivider:function(ie,re){var J=Ce(ie);return J.setHasTrailingDivider(re),re?J.classList.add(d):J.classList.remove(d),Z},insertBeforeMenuItem:function(ie,re){var J=he(ie),fe=Ce(re);return X.insertMenuItem(J,{before:fe}),Z},moveToSubmenu:function(ie){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,J=Ce(ie);if(re===null)X.moveToSubmenu(J);else if(typeof re=="string"){var fe=Ce(re.toString());X.moveToSubmenu(J,fe)}else re.coreAsWell!==void 0||re.selector!==void 0?X.moveToSubmenu(J,null,re):console.warn("options neither has coreAsWell nor selector property but it is an object. Are you sure that this is what you want to do?");return Z},moveBeforeOtherMenuItem:function(ie,re){var J=Ce(ie),fe=Ce(re);return X.moveBefore(J,fe),Z},disableMenuItem:function(ie){return Ce(ie).disable(),Z},enableMenuItem:function(ie){return Ce(ie).enable(),Z},hideMenuItem:function(ie){return Ce(ie).hide(),Z},showMenuItem:function(ie){return Ce(ie).display(),Z},destroy:function(){return ve(),Z}}}(this)}},579:(a,o,s)=>{var u=s(621).contextMenus,l=function(f){f&&f("core","contextMenus",u)};typeof cytoscape<"u"&&l(cytoscape),a.exports=l}},n={};function i(a){var o=n[a];if(o!==void 0)return o.exports;var s=n[a]={exports:{}};return t[a](s,s.exports,i),s.exports}return i.d=(a,o)=>{for(var s in o)i.o(o,s)&&!i.o(a,s)&&Object.defineProperty(a,s,{enumerable:!0,get:o[s]})},i.o=(a,o)=>Object.prototype.hasOwnProperty.call(a,o),i.r=a=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},i(579)})()})})(GP);var fj=GP.exports;const cj=qi(fj);/*!
 * iro.js v5.5.2
 * 2016-2021 James Daniel
 * Licensed under MPL 2.0
 * github.com/jaames/iro.js
 */var ni,Np,$P,I2,UP,Cu={},Ww=[],hj=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i;function xu(r,e){for(var t in e)r[t]=e[t];return r}function HP(r){var e=r.parentNode;e&&e.removeChild(r)}function Dn(r,e,t){var n,i,a,o,s=arguments;if(e=xu({},e),arguments.length>3)for(t=[t],n=3;n<arguments.length;n++)t.push(s[n]);if(t!=null&&(e.children=t),r!=null&&r.defaultProps!=null)for(i in r.defaultProps)e[i]===void 0&&(e[i]=r.defaultProps[i]);return o=e.key,(a=e.ref)!=null&&delete e.ref,o!=null&&delete e.key,R2(r,e,o,a)}function R2(r,e,t,n){var i={type:r,props:e,key:t,ref:n,__k:null,__p:null,__b:0,__e:null,l:null,__c:null,constructor:void 0};return ni.vnode&&ni.vnode(i),i}function Sv(r){return r.children}function dj(r){if(r==null||typeof r=="boolean")return null;if(typeof r=="string"||typeof r=="number")return R2(null,r,null,null);if(r.__e!=null||r.__c!=null){var e=R2(r.type,r.props,r.key,null);return e.__e=r.__e,e}return r}function Ff(r,e){this.props=r,this.context=e}function Pp(r,e){if(e==null)return r.__p?Pp(r.__p,r.__p.__k.indexOf(r)+1):null;for(var t;e<r.__k.length;e++)if((t=r.__k[e])!=null&&t.__e!=null)return t.__e;return typeof r.type=="function"?Pp(r):null}function jP(r){var e,t;if((r=r.__p)!=null&&r.__c!=null){for(r.__e=r.__c.base=null,e=0;e<r.__k.length;e++)if((t=r.__k[e])!=null&&t.__e!=null){r.__e=r.__c.base=t.__e;break}return jP(r)}}function Hb(r){(!r.__d&&(r.__d=!0)&&Np.push(r)===1||I2!==ni.debounceRendering)&&(I2=ni.debounceRendering,(ni.debounceRendering||$P)(pj))}function pj(){var r,e,t,n,i,a,o,s;for(Np.sort(function(u,l){return l.__v.__b-u.__v.__b});r=Np.pop();)r.__d&&(t=void 0,n=void 0,a=(i=(e=r).__v).__e,o=e.__P,s=e.u,e.u=!1,o&&(t=[],n=Xw(o,i,xu({},i),e.__n,o.ownerSVGElement!==void 0,null,t,s,a??Pp(i)),WP(t,i),n!=a&&jP(i)))}function VP(r,e,t,n,i,a,o,s,u){var l,f,c,d,h,p,g,b=t&&t.__k||Ww,v=b.length;if(s==Cu&&(s=a!=null?a[0]:v?Pp(t,0):null),l=0,e.__k=Yw(e.__k,function(y){if(y!=null){if(y.__p=e,y.__b=e.__b+1,(c=b[l])===null||c&&y.key==c.key&&y.type===c.type)b[l]=void 0;else for(f=0;f<v;f++){if((c=b[f])&&y.key==c.key&&y.type===c.type){b[f]=void 0;break}c=null}if(d=Xw(r,y,c=c||Cu,n,i,a,o,null,s,u),(f=y.ref)&&c.ref!=f&&(g||(g=[])).push(f,y.__c||d,y),d!=null){if(p==null&&(p=d),y.l!=null)d=y.l,y.l=null;else if(a==c||d!=s||d.parentNode==null){e:if(s==null||s.parentNode!==r)r.appendChild(d);else{for(h=s,f=0;(h=h.nextSibling)&&f<v;f+=2)if(h==d)break e;r.insertBefore(d,s)}e.type=="option"&&(r.value="")}s=d.nextSibling,typeof e.type=="function"&&(e.l=d)}}return l++,y}),e.__e=p,a!=null&&typeof e.type!="function")for(l=a.length;l--;)a[l]!=null&&HP(a[l]);for(l=v;l--;)b[l]!=null&&XP(b[l],b[l]);if(g)for(l=0;l<g.length;l++)YP(g[l],g[++l],g[++l])}function Yw(r,e,t){if(t==null&&(t=[]),r==null||typeof r=="boolean")e&&t.push(e(null));else if(Array.isArray(r))for(var n=0;n<r.length;n++)Yw(r[n],e,t);else t.push(e?e(dj(r)):r);return t}function vj(r,e,t,n,i){var a;for(a in t)a in e||l3(r,a,null,t[a],n);for(a in e)i&&typeof e[a]!="function"||a==="value"||a==="checked"||t[a]===e[a]||l3(r,a,e[a],t[a],n)}function u3(r,e,t){e[0]==="-"?r.setProperty(e,t):r[e]=typeof t=="number"&&hj.test(e)===!1?t+"px":t??""}function l3(r,e,t,n,i){var a,o,s,u,l;if(!((e=i?e==="className"?"class":e:e==="class"?"className":e)==="key"||e==="children"))if(e==="style")if(a=r.style,typeof t=="string")a.cssText=t;else{if(typeof n=="string"&&(a.cssText="",n=null),n)for(o in n)t&&o in t||u3(a,o,"");if(t)for(s in t)n&&t[s]===n[s]||u3(a,s,t[s])}else e[0]==="o"&&e[1]==="n"?(u=e!==(e=e.replace(/Capture$/,"")),l=e.toLowerCase(),e=(l in r?l:e).slice(2),t?(n||r.addEventListener(e,f3,u),(r.t||(r.t={}))[e]=t):r.removeEventListener(e,f3,u)):e!=="list"&&e!=="tagName"&&e!=="form"&&!i&&e in r?r[e]=t??"":typeof t!="function"&&e!=="dangerouslySetInnerHTML"&&(e!==(e=e.replace(/^xlink:?/,""))?t==null||t===!1?r.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):r.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),t):t==null||t===!1?r.removeAttribute(e):r.setAttribute(e,t))}function f3(r){return this.t[r.type](ni.event?ni.event(r):r)}function Xw(r,e,t,n,i,a,o,s,u,l){var f,c,d,h,p,g,b,v,y,m,w=e.type;if(e.constructor!==void 0)return null;(f=ni.__b)&&f(e);try{e:if(typeof w=="function"){if(v=e.props,y=(f=w.contextType)&&n[f.__c],m=f?y?y.props.value:f.__p:n,t.__c?b=(c=e.__c=t.__c).__p=c.__E:("prototype"in w&&w.prototype.render?e.__c=c=new w(v,m):(e.__c=c=new Ff(v,m),c.constructor=w,c.render=mj),y&&y.sub(c),c.props=v,c.state||(c.state={}),c.context=m,c.__n=n,d=c.__d=!0,c.__h=[]),c.__s==null&&(c.__s=c.state),w.getDerivedStateFromProps!=null&&xu(c.__s==c.state?c.__s=xu({},c.__s):c.__s,w.getDerivedStateFromProps(v,c.__s)),d)w.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),c.componentDidMount!=null&&o.push(c);else{if(w.getDerivedStateFromProps==null&&s==null&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(v,m),!s&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(v,c.__s,m)===!1){for(c.props=v,c.state=c.__s,c.__d=!1,c.__v=e,e.__e=u!=null?u!==t.__e?u:t.__e:null,e.__k=t.__k,f=0;f<e.__k.length;f++)e.__k[f]&&(e.__k[f].__p=e);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(v,c.__s,m)}for(h=c.props,p=c.state,c.context=m,c.props=v,c.state=c.__s,(f=ni.__r)&&f(e),c.__d=!1,c.__v=e,c.__P=r,f=c.render(c.props,c.state,c.context),e.__k=Yw(f!=null&&f.type==Sv&&f.key==null?f.props.children:f),c.getChildContext!=null&&(n=xu(xu({},n),c.getChildContext())),d||c.getSnapshotBeforeUpdate==null||(g=c.getSnapshotBeforeUpdate(h,p)),VP(r,e,t,n,i,a,o,u,l),c.base=e.__e;f=c.__h.pop();)c.__s&&(c.state=c.__s),f.call(c);d||h==null||c.componentDidUpdate==null||c.componentDidUpdate(h,p,g),b&&(c.__E=c.__p=null)}else e.__e=gj(t.__e,e,t,n,i,a,o,l);(f=ni.diffed)&&f(e)}catch(S){ni.__e(S,e,t)}return e.__e}function WP(r,e){for(var t;t=r.pop();)try{t.componentDidMount()}catch(n){ni.__e(n,t.__v)}ni.__c&&ni.__c(e)}function gj(r,e,t,n,i,a,o,s){var u,l,f,c,d=t.props,h=e.props;if(i=e.type==="svg"||i,r==null&&a!=null){for(u=0;u<a.length;u++)if((l=a[u])!=null&&(e.type===null?l.nodeType===3:l.localName===e.type)){r=l,a[u]=null;break}}if(r==null){if(e.type===null)return document.createTextNode(h);r=i?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type),a=null}return e.type===null?d!==h&&(a!=null&&(a[a.indexOf(r)]=null),r.data=h):e!==t&&(a!=null&&(a=Ww.slice.call(r.childNodes)),f=(d=t.props||Cu).dangerouslySetInnerHTML,c=h.dangerouslySetInnerHTML,s||(c||f)&&(c&&f&&c.__html==f.__html||(r.innerHTML=c&&c.__html||"")),vj(r,h,d,i,s),e.__k=e.props.children,c||VP(r,e,t,n,e.type!=="foreignObject"&&i,a,o,Cu,s),s||("value"in h&&h.value!==void 0&&h.value!==r.value&&(r.value=h.value==null?"":h.value),"checked"in h&&h.checked!==void 0&&h.checked!==r.checked&&(r.checked=h.checked))),r}function YP(r,e,t){try{typeof r=="function"?r(e):r.current=e}catch(n){ni.__e(n,t)}}function XP(r,e,t){var n,i,a;if(ni.unmount&&ni.unmount(r),(n=r.ref)&&YP(n,null,e),t||typeof r.type=="function"||(t=(i=r.__e)!=null),r.__e=r.l=null,(n=r.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(o){ni.__e(o,e)}n.base=n.__P=null}if(n=r.__k)for(a=0;a<n.length;a++)n[a]&&XP(n[a],e,t);i!=null&&HP(i)}function mj(r,e,t){return this.constructor(r,t)}function yj(r,e,t){var n,i,a;ni.__p&&ni.__p(r,e),i=(n=t===UP)?null:t&&t.__k||e.__k,r=Dn(Sv,null,[r]),a=[],Xw(e,n?e.__k=r:(t||e).__k=r,i||Cu,Cu,e.ownerSVGElement!==void 0,t&&!n?[t]:i?null:Ww.slice.call(e.childNodes),a,!1,t||Cu,n),WP(a,r)}ni={},Ff.prototype.setState=function(r,e){var t=this.__s!==this.state&&this.__s||(this.__s=xu({},this.state));(typeof r!="function"||(r=r(t,this.props)))&&xu(t,r),r!=null&&this.__v&&(this.u=!1,e&&this.__h.push(e),Hb(this))},Ff.prototype.forceUpdate=function(r){this.__v&&(r&&this.__h.push(r),this.u=!0,Hb(this))},Ff.prototype.render=Sv,Np=[],$P=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,I2=ni.debounceRendering,ni.__e=function(r,e,t){for(var n;e=e.__p;)if((n=e.__c)&&!n.__p)try{if(n.constructor&&n.constructor.getDerivedStateFromError!=null)n.setState(n.constructor.getDerivedStateFromError(r));else{if(n.componentDidCatch==null)continue;n.componentDidCatch(r)}return Hb(n.__E=n)}catch(i){r=i}throw r},UP=Cu;function c3(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function bj(r,e,t){return e&&c3(r.prototype,e),t&&c3(r,t),r}function Pa(){return Pa=Object.assign||function(r){for(var e=arguments,t=1;t<arguments.length;t++){var n=e[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},Pa.apply(this,arguments)}var wj="[-\\+]?\\d+%?",_j="[-\\+]?\\d*\\.\\d+%?",hl="(?:"+_j+")|(?:"+wj+")",KP="[\\s|\\(]+("+hl+")[,|\\s]+("+hl+")[,|\\s]+("+hl+")\\s*\\)?",ZP="[\\s|\\(]+("+hl+")[,|\\s]+("+hl+")[,|\\s]+("+hl+")[,|\\s]+("+hl+")\\s*\\)?",xj=new RegExp("rgb"+KP),Sj=new RegExp("rgba"+ZP),Ej=new RegExp("hsl"+KP),Cj=new RegExp("hsla"+ZP),Ev="^(?:#?|0x?)",dl="([0-9a-fA-F]{1})",pl="([0-9a-fA-F]{2})",Aj=new RegExp(Ev+dl+dl+dl+"$"),Tj=new RegExp(Ev+dl+dl+dl+dl+"$"),kj=new RegExp(Ev+pl+pl+pl+"$"),Lj=new RegExp(Ev+pl+pl+pl+pl+"$"),Nj=2e3,Pj=4e4,jd=Math.log,mf=Math.round,$c=Math.floor;function eo(r,e,t){return Math.min(Math.max(r,e),t)}function La(r,e){var t=r.indexOf("%")>-1,n=parseFloat(r);return t?e/100*n:n}function Na(r){return parseInt(r,16)}function nl(r){return r.toString(16).padStart(2,"0")}var Af=function(){function r(t,n){this.$={h:0,s:0,v:0,a:1},t&&this.set(t),this.onChange=n,this.initialValue=Pa({},this.$)}var e=r.prototype;return e.set=function(n){if(typeof n=="string")/^(?:#?|0x?)[0-9a-fA-F]{3,8}$/.test(n)?this.hexString=n:/^rgba?/.test(n)?this.rgbString=n:/^hsla?/.test(n)&&(this.hslString=n);else if(typeof n=="object")n instanceof r?this.hsva=n.hsva:"r"in n&&"g"in n&&"b"in n?this.rgb=n:"h"in n&&"s"in n&&"v"in n?this.hsv=n:"h"in n&&"s"in n&&"l"in n?this.hsl=n:"kelvin"in n&&(this.kelvin=n.kelvin);else throw new Error("Invalid color value")},e.setChannel=function(n,i,a){var o;this[n]=Pa({},this[n],(o={},o[i]=a,o))},e.reset=function(){this.hsva=this.initialValue},e.clone=function(){return new r(this)},e.unbind=function(){this.onChange=void 0},r.hsvToRgb=function(n){var i=n.h/60,a=n.s/100,o=n.v/100,s=$c(i),u=i-s,l=o*(1-a),f=o*(1-u*a),c=o*(1-(1-u)*a),d=s%6,h=[o,f,l,l,c,o][d],p=[c,o,o,f,l,l][d],g=[l,l,c,o,o,f][d];return{r:eo(h*255,0,255),g:eo(p*255,0,255),b:eo(g*255,0,255)}},r.rgbToHsv=function(n){var i=n.r/255,a=n.g/255,o=n.b/255,s=Math.max(i,a,o),u=Math.min(i,a,o),l=s-u,f=0,c=s,d=s===0?0:l/s;switch(s){case u:f=0;break;case i:f=(a-o)/l+(a<o?6:0);break;case a:f=(o-i)/l+2;break;case o:f=(i-a)/l+4;break}return{h:f*60%360,s:eo(d*100,0,100),v:eo(c*100,0,100)}},r.hsvToHsl=function(n){var i=n.s/100,a=n.v/100,o=(2-i)*a,s=o<=1?o:2-o,u=s<1e-9?0:i*a/s;return{h:n.h,s:eo(u*100,0,100),l:eo(o*50,0,100)}},r.hslToHsv=function(n){var i=n.l*2,a=n.s*(i<=100?i:200-i)/100,o=i+a<1e-9?0:2*a/(i+a);return{h:n.h,s:eo(o*100,0,100),v:eo((i+a)/2,0,100)}},r.kelvinToRgb=function(n){var i=n/100,a,o,s;return i<66?(a=255,o=-155.25485562709179-.44596950469579133*(o=i-2)+104.49216199393888*jd(o),s=i<20?0:-254.76935184120902+.8274096064007395*(s=i-10)+115.67994401066147*jd(s)):(a=351.97690566805693+.114206453784165*(a=i-55)-40.25366309332127*jd(a),o=325.4494125711974+.07943456536662342*(o=i-50)-28.0852963507957*jd(o),s=255),{r:eo($c(a),0,255),g:eo($c(o),0,255),b:eo($c(s),0,255)}},r.rgbToKelvin=function(n){for(var i=n.r,a=n.b,o=.4,s=Nj,u=Pj,l;u-s>o;){l=(u+s)*.5;var f=r.kelvinToRgb(l);f.b/f.r>=a/i?u=l:s=l}return l},bj(r,[{key:"hsv",get:function(){var n=this.$;return{h:n.h,s:n.s,v:n.v}},set:function(n){var i=this.$;if(n=Pa({},i,n),this.onChange){var a={h:!1,v:!1,s:!1,a:!1};for(var o in i)a[o]=n[o]!=i[o];this.$=n,(a.h||a.s||a.v||a.a)&&this.onChange(this,a)}else this.$=n}},{key:"hsva",get:function(){return Pa({},this.$)},set:function(n){this.hsv=n}},{key:"hue",get:function(){return this.$.h},set:function(n){this.hsv={h:n}}},{key:"saturation",get:function(){return this.$.s},set:function(n){this.hsv={s:n}}},{key:"value",get:function(){return this.$.v},set:function(n){this.hsv={v:n}}},{key:"alpha",get:function(){return this.$.a},set:function(n){this.hsv=Pa({},this.hsv,{a:n})}},{key:"kelvin",get:function(){return r.rgbToKelvin(this.rgb)},set:function(n){this.rgb=r.kelvinToRgb(n)}},{key:"red",get:function(){var n=this.rgb;return n.r},set:function(n){this.rgb=Pa({},this.rgb,{r:n})}},{key:"green",get:function(){var n=this.rgb;return n.g},set:function(n){this.rgb=Pa({},this.rgb,{g:n})}},{key:"blue",get:function(){var n=this.rgb;return n.b},set:function(n){this.rgb=Pa({},this.rgb,{b:n})}},{key:"rgb",get:function(){var n=r.hsvToRgb(this.$),i=n.r,a=n.g,o=n.b;return{r:mf(i),g:mf(a),b:mf(o)}},set:function(n){this.hsv=Pa({},r.rgbToHsv(n),{a:n.a===void 0?1:n.a})}},{key:"rgba",get:function(){return Pa({},this.rgb,{a:this.alpha})},set:function(n){this.rgb=n}},{key:"hsl",get:function(){var n=r.hsvToHsl(this.$),i=n.h,a=n.s,o=n.l;return{h:mf(i),s:mf(a),l:mf(o)}},set:function(n){this.hsv=Pa({},r.hslToHsv(n),{a:n.a===void 0?1:n.a})}},{key:"hsla",get:function(){return Pa({},this.hsl,{a:this.alpha})},set:function(n){this.hsl=n}},{key:"rgbString",get:function(){var n=this.rgb;return"rgb("+n.r+", "+n.g+", "+n.b+")"},set:function(n){var i,a,o,s,u=1;if((i=xj.exec(n))?(a=La(i[1],255),o=La(i[2],255),s=La(i[3],255)):(i=Sj.exec(n))&&(a=La(i[1],255),o=La(i[2],255),s=La(i[3],255),u=La(i[4],1)),i)this.rgb={r:a,g:o,b:s,a:u};else throw new Error("Invalid rgb string")}},{key:"rgbaString",get:function(){var n=this.rgba;return"rgba("+n.r+", "+n.g+", "+n.b+", "+n.a+")"},set:function(n){this.rgbString=n}},{key:"hexString",get:function(){var n=this.rgb;return"#"+nl(n.r)+nl(n.g)+nl(n.b)},set:function(n){var i,a,o,s,u=255;if((i=Aj.exec(n))?(a=Na(i[1])*17,o=Na(i[2])*17,s=Na(i[3])*17):(i=Tj.exec(n))?(a=Na(i[1])*17,o=Na(i[2])*17,s=Na(i[3])*17,u=Na(i[4])*17):(i=kj.exec(n))?(a=Na(i[1]),o=Na(i[2]),s=Na(i[3])):(i=Lj.exec(n))&&(a=Na(i[1]),o=Na(i[2]),s=Na(i[3]),u=Na(i[4])),i)this.rgb={r:a,g:o,b:s,a:u/255};else throw new Error("Invalid hex string")}},{key:"hex8String",get:function(){var n=this.rgba;return"#"+nl(n.r)+nl(n.g)+nl(n.b)+nl($c(n.a*255))},set:function(n){this.hexString=n}},{key:"hslString",get:function(){var n=this.hsl;return"hsl("+n.h+", "+n.s+"%, "+n.l+"%)"},set:function(n){var i,a,o,s,u=1;if((i=Ej.exec(n))?(a=La(i[1],360),o=La(i[2],100),s=La(i[3],100)):(i=Cj.exec(n))&&(a=La(i[1],360),o=La(i[2],100),s=La(i[3],100),u=La(i[4],1)),i)this.hsl={h:a,s:o,l:s,a:u};else throw new Error("Invalid hsl string")}},{key:"hslaString",get:function(){var n=this.hsla;return"hsla("+n.h+", "+n.s+"%, "+n.l+"%, "+n.a+")"},set:function(n){this.hslString=n}}]),r}(),Mj={sliderShape:"bar",sliderType:"value",minTemperature:2200,maxTemperature:11e3};function Kw(r){var e,t=r.width,n=r.sliderSize,i=r.borderWidth,a=r.handleRadius,o=r.padding,s=r.sliderShape,u=r.layoutDirection==="horizontal";return n=(e=n)!=null?e:o*2+a*2,s==="circle"?{handleStart:r.padding+r.handleRadius,handleRange:t-o*2-a*2,width:t,height:t,cx:t/2,cy:t/2,radius:t/2-i/2}:{handleStart:n/2,handleRange:t-n,radius:n/2,x:0,y:0,width:u?n:t,height:u?t:n}}function Oj(r,e){var t=e.hsva,n=e.rgb;switch(r.sliderType){case"red":return n.r/2.55;case"green":return n.g/2.55;case"blue":return n.b/2.55;case"alpha":return t.a*100;case"kelvin":var i=r.minTemperature,a=r.maxTemperature,o=a-i,s=(e.kelvin-i)/o*100;return Math.max(0,Math.min(s,100));case"hue":return t.h/=3.6;case"saturation":return t.s;case"value":default:return t.v}}function Dj(r,e,t){var n=Kw(r),i=n.handleRange,a=n.handleStart,o;r.layoutDirection==="horizontal"?o=-1*t+i+a:o=e-a,o=Math.max(Math.min(o,i),0);var s=Math.round(100/i*o);switch(r.sliderType){case"kelvin":var u=r.minTemperature,l=r.maxTemperature,f=l-u;return u+f*(s/100);case"alpha":return s/100;case"hue":return s*3.6;case"red":case"blue":case"green":return s*2.55;default:return s}}function Ij(r,e){var t=Kw(r),n=t.width,i=t.height,a=t.handleRange,o=t.handleStart,s=r.layoutDirection==="horizontal",u=Oj(r,e),l=s?n/2:i/2,f=o+u/100*a;return s&&(f=-1*f+a+o*2),{x:s?l:f,y:s?f:l}}function Rj(r,e){var t=e.hsv,n=e.rgb;switch(r.sliderType){case"red":return[[0,"rgb(0,"+n.g+","+n.b+")"],[100,"rgb(255,"+n.g+","+n.b+")"]];case"green":return[[0,"rgb("+n.r+",0,"+n.b+")"],[100,"rgb("+n.r+",255,"+n.b+")"]];case"blue":return[[0,"rgb("+n.r+","+n.g+",0)"],[100,"rgb("+n.r+","+n.g+",255)"]];case"alpha":return[[0,"rgba("+n.r+","+n.g+","+n.b+",0)"],[100,"rgb("+n.r+","+n.g+","+n.b+")"]];case"kelvin":for(var i=[],a=r.minTemperature,o=r.maxTemperature,s=8,u=o-a,l=a,f=0;l<o;l+=u/s,f+=1){var c=Af.kelvinToRgb(l),d=c.r,h=c.g,p=c.b;i.push([100/s*f,"rgb("+d+","+h+","+p+")"])}return i;case"hue":return[[0,"#f00"],[16.666,"#ff0"],[33.333,"#0f0"],[50,"#0ff"],[66.666,"#00f"],[83.333,"#f0f"],[100,"#f00"]];case"saturation":var g=Af.hsvToHsl({h:t.h,s:0,v:t.v}),b=Af.hsvToHsl({h:t.h,s:100,v:t.v});return[[0,"hsl("+g.h+","+g.s+"%,"+g.l+"%)"],[100,"hsl("+b.h+","+b.s+"%,"+b.l+"%)"]];case"value":default:var v=Af.hsvToHsl({h:t.h,s:t.s,v:100});return[[0,"#000"],[100,"hsl("+v.h+","+v.s+"%,"+v.l+"%)"]]}}var QP=Math.PI*2,Fj=function(e,t){return(e%t+t)%t},JP=function(e,t){return Math.sqrt(e*e+t*t)};function e4(r){return r.width/2-r.padding-r.handleRadius-r.borderWidth}function Bj(r,e,t){var n=Cv(r),i=n.cx,a=n.cy,o=r.width/2;return JP(i-e,a-t)<o}function Cv(r){var e=r.width/2;return{width:r.width,radius:e-r.borderWidth,cx:e,cy:e}}function t4(r,e,t){var n=r.wheelAngle,i=r.wheelDirection;return t&&i==="clockwise"?e=n+e:i==="clockwise"?e=360-n+e:t&&i==="anticlockwise"?e=n+180-e:i==="anticlockwise"&&(e=n-e),Fj(e,360)}function zj(r,e){var t=e.hsv,n=Cv(r),i=n.cx,a=n.cy,o=e4(r),s=(180+t4(r,t.h,!0))*(QP/360),u=t.s/100*o,l=r.wheelDirection==="clockwise"?-1:1;return{x:i+u*Math.cos(s)*l,y:a+u*Math.sin(s)*l}}function h3(r,e,t){var n=Cv(r),i=n.cx,a=n.cy,o=e4(r);e=i-e,t=a-t;var s=t4(r,Math.atan2(-t,-e)*(360/QP)),u=Math.min(JP(e,t),o);return{h:Math.round(s),s:Math.round(100/o*u)}}function Zw(r){var e=r.width,t=r.boxHeight,n=r.padding,i=r.handleRadius;return{width:e,height:t??e,radius:n+i}}function p3(r,e,t){var n=Zw(r),i=n.width,a=n.height,o=n.radius,s=o,u=i-o*2,l=a-o*2,f=(e-s)/u*100,c=(t-s)/l*100;return{s:Math.max(0,Math.min(f,100)),v:Math.max(0,Math.min(100-c,100))}}function qj(r,e){var t=Zw(r),n=t.width,i=t.height,a=t.radius,o=e.hsv,s=a,u=n-a*2,l=i-a*2;return{x:s+o.s/100*u,y:s+(l-o.v/100*l)}}function Gj(r,e){var t=e.hue;return[[[0,"#fff"],[100,"hsl("+t+",100%,50%)"]],[[0,"rgba(0,0,0,0)"],[100,"#000"]]]}var jb;function $j(r){jb||(jb=document.getElementsByTagName("base"));var e=window.navigator.userAgent,t=/^((?!chrome|android).)*safari/i.test(e),n=/iPhone|iPod|iPad/i.test(e),i=window.location;return(t||n)&&jb.length>0?i.protocol+"//"+i.host+i.pathname+i.search+r:r}function r4(r,e,t,n){for(var i=0;i<n.length;i++){var a=n[i].x-e,o=n[i].y-t,s=Math.sqrt(a*a+o*o);if(s<r.handleRadius)return i}return null}function Qw(r){return{boxSizing:"border-box",border:r.borderWidth+"px solid "+r.borderColor}}function F2(r,e,t){return r+"-gradient("+e+", "+t.map(function(n){var i=n[0],a=n[1];return a+" "+i+"%"}).join(",")+")"}function ma(r){return typeof r=="string"?r:r+"px"}var Uj={width:300,height:300,color:"#fff",colors:[],padding:6,layoutDirection:"vertical",borderColor:"#fff",borderWidth:0,handleRadius:8,activeHandleRadius:null,handleSvg:null,handleProps:{x:0,y:0},wheelLightness:!0,wheelAngle:0,wheelDirection:"anticlockwise",sliderSize:null,sliderMargin:12,boxHeight:null},v3=["mousemove","touchmove","mouseup","touchend"],Av=function(r){function e(t){r.call(this,t),this.uid=(Math.random()+1).toString(36).substring(5)}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.render=function(n){var i=this.handleEvent.bind(this),a={onMouseDown:i,ontouchstart:i},o=n.layoutDirection==="horizontal",s=n.margin===null?n.sliderMargin:n.margin,u={overflow:"visible",display:o?"inline-block":"block"};return n.index>0&&(u[o?"marginLeft":"marginTop"]=s),Dn(Sv,null,n.children(this.uid,a,u))},e.prototype.handleEvent=function(n){var i=this,a=this.props.onInput,o=this.base.getBoundingClientRect();n.preventDefault();var s=n.touches?n.changedTouches[0]:n,u=s.clientX-o.left,l=s.clientY-o.top;switch(n.type){case"mousedown":case"touchstart":var f=a(u,l,0);f!==!1&&v3.forEach(function(c){document.addEventListener(c,i,{passive:!1})});break;case"mousemove":case"touchmove":a(u,l,1);break;case"mouseup":case"touchend":a(u,l,2),v3.forEach(function(c){document.removeEventListener(c,i,{passive:!1})});break}},e}(Ff);function Cl(r){var e=r.r,t=r.url,n=e,i=e;return Dn("svg",{className:"IroHandle IroHandle--"+r.index+" "+(r.isActive?"IroHandle--isActive":""),style:{"-webkit-tap-highlight-color":"rgba(0, 0, 0, 0);",transform:"translate("+ma(r.x)+", "+ma(r.y)+")",willChange:"transform",top:ma(-e),left:ma(-e),width:ma(e*2),height:ma(e*2),position:"absolute",overflow:"visible"}},t&&Dn("use",Object.assign({xlinkHref:$j(t)},r.props)),!t&&Dn("circle",{cx:n,cy:i,r:e,fill:"none","stroke-width":2,stroke:"#000"}),!t&&Dn("circle",{cx:n,cy:i,r:e-2,fill:r.fill,"stroke-width":2,stroke:"#fff"}))}Cl.defaultProps={fill:"none",x:0,y:0,r:8,url:null,props:{x:0,y:0}};function Mp(r){var e=r.activeIndex,t=e!==void 0&&e<r.colors.length?r.colors[e]:r.color,n=Kw(r),i=n.width,a=n.height,o=n.radius,s=Ij(r,t),u=Rj(r,t);function l(f,c,d){var h=Dj(r,f,c);r.parent.inputActive=!0,t[r.sliderType]=h,r.onInput(d,r.id)}return Dn(Av,Object.assign({},r,{onInput:l}),function(f,c,d){return Dn("div",Object.assign({},c,{className:"IroSlider",style:Object.assign({},{position:"relative",width:ma(i),height:ma(a),borderRadius:ma(o),background:"conic-gradient(#ccc 25%, #fff 0 50%, #ccc 0 75%, #fff 0)",backgroundSize:"8px 8px"},d)}),Dn("div",{className:"IroSliderGradient",style:Object.assign({},{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:ma(o),background:F2("linear",r.layoutDirection==="horizontal"?"to top":"to right",u)},Qw(r))}),Dn(Cl,{isActive:!0,index:t.index,r:r.handleRadius,url:r.handleSvg,props:r.handleProps,x:s.x,y:s.y}))})}Mp.defaultProps=Object.assign({},Mj);function Hj(r){var e=Zw(r),t=e.width,n=e.height,i=e.radius,a=r.colors,o=r.parent,s=r.activeIndex,u=s!==void 0&&s<r.colors.length?r.colors[s]:r.color,l=Gj(r,u),f=a.map(function(d){return qj(r,d)});function c(d,h,p){if(p===0){var g=r4(r,d,h,f);g!==null?o.setActiveColor(g):(o.inputActive=!0,u.hsv=p3(r,d,h),r.onInput(p,r.id))}else p===1&&(o.inputActive=!0,u.hsv=p3(r,d,h));r.onInput(p,r.id)}return Dn(Av,Object.assign({},r,{onInput:c}),function(d,h,p){return Dn("div",Object.assign({},h,{className:"IroBox",style:Object.assign({},{width:ma(t),height:ma(n),position:"relative"},p)}),Dn("div",{className:"IroBox",style:Object.assign({},{width:"100%",height:"100%",borderRadius:ma(i)},Qw(r),{background:F2("linear","to bottom",l[1])+","+F2("linear","to right",l[0])})}),a.filter(function(g){return g!==u}).map(function(g){return Dn(Cl,{isActive:!1,index:g.index,fill:g.hslString,r:r.handleRadius,url:r.handleSvg,props:r.handleProps,x:f[g.index].x,y:f[g.index].y})}),Dn(Cl,{isActive:!0,index:u.index,fill:u.hslString,r:r.activeHandleRadius||r.handleRadius,url:r.handleSvg,props:r.handleProps,x:f[u.index].x,y:f[u.index].y}))})}var jj="conic-gradient(red, yellow, lime, aqua, blue, magenta, red)",Vj="conic-gradient(red, magenta, blue, aqua, lime, yellow, red)";function n4(r){var e=Cv(r),t=e.width,n=r.colors;r.borderWidth;var i=r.parent,a=r.color,o=a.hsv,s=n.map(function(f){return zj(r,f)}),u={position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",boxSizing:"border-box"};function l(f,c,d){if(d===0){if(!Bj(r,f,c))return!1;var h=r4(r,f,c,s);h!==null?i.setActiveColor(h):(i.inputActive=!0,a.hsv=h3(r,f,c),r.onInput(d,r.id))}else d===1&&(i.inputActive=!0,a.hsv=h3(r,f,c));r.onInput(d,r.id)}return Dn(Av,Object.assign({},r,{onInput:l}),function(f,c,d){return Dn("div",Object.assign({},c,{className:"IroWheel",style:Object.assign({},{width:ma(t),height:ma(t),position:"relative"},d)}),Dn("div",{className:"IroWheelHue",style:Object.assign({},u,{transform:"rotateZ("+(r.wheelAngle+90)+"deg)",background:r.wheelDirection==="clockwise"?jj:Vj})}),Dn("div",{className:"IroWheelSaturation",style:Object.assign({},u,{background:"radial-gradient(circle closest-side, #fff, transparent)"})}),r.wheelLightness&&Dn("div",{className:"IroWheelLightness",style:Object.assign({},u,{background:"#000",opacity:1-o.v/100})}),Dn("div",{className:"IroWheelBorder",style:Object.assign({},u,Qw(r))}),n.filter(function(h){return h!==a}).map(function(h){return Dn(Cl,{isActive:!1,index:h.index,fill:h.hslString,r:r.handleRadius,url:r.handleSvg,props:r.handleProps,x:s[h.index].x,y:s[h.index].y})}),Dn(Cl,{isActive:!0,index:a.index,fill:a.hslString,r:r.activeHandleRadius||r.handleRadius,url:r.handleSvg,props:r.handleProps,x:s[a.index].x,y:s[a.index].y}))})}function Wj(r){var e=function(t,n){var i,a=document.createElement("div");yj(Dn(r,Object.assign({},{ref:function(s){return i=s}},n)),a);function o(){var s=t instanceof Element?t:document.querySelector(t);s.appendChild(i.base),i.onMount(s)}return document.readyState!=="loading"?o():document.addEventListener("DOMContentLoaded",o),i};return e.prototype=r.prototype,Object.assign(e,r),e.__component=r,e}var i4=function(r){function e(t){var n=this;r.call(this,t),this.colors=[],this.inputActive=!1,this.events={},this.activeEvents={},this.deferredEvents={},this.id=t.id;var i=t.colors.length>0?t.colors:[t.color];i.forEach(function(a){return n.addColor(a)}),this.setActiveColor(0),this.state=Object.assign({},t,{color:this.color,colors:this.colors,layout:t.layout})}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.addColor=function(n,i){i===void 0&&(i=this.colors.length);var a=new Af(n,this.onColorChange.bind(this));this.colors.splice(i,0,a),this.colors.forEach(function(o,s){return o.index=s}),this.state&&this.setState({colors:this.colors}),this.deferredEmit("color:init",a)},e.prototype.removeColor=function(n){var i=this.colors.splice(n,1)[0];i.unbind(),this.colors.forEach(function(a,o){return a.index=o}),this.state&&this.setState({colors:this.colors}),i.index===this.color.index&&this.setActiveColor(0),this.emit("color:remove",i)},e.prototype.setActiveColor=function(n){this.color=this.colors[n],this.state&&this.setState({color:this.color}),this.emit("color:setActive",this.color)},e.prototype.setColors=function(n,i){var a=this;i===void 0&&(i=0),this.colors.forEach(function(o){return o.unbind()}),this.colors=[],n.forEach(function(o){return a.addColor(o)}),this.setActiveColor(i),this.emit("color:setAll",this.colors)},e.prototype.on=function(n,i){var a=this,o=this.events;(Array.isArray(n)?n:[n]).forEach(function(s){(o[s]||(o[s]=[])).push(i),a.deferredEvents[s]&&(a.deferredEvents[s].forEach(function(u){i.apply(null,u)}),a.deferredEvents[s]=[])})},e.prototype.off=function(n,i){var a=this;(Array.isArray(n)?n:[n]).forEach(function(o){var s=a.events[o];s&&s.splice(s.indexOf(i),1)})},e.prototype.emit=function(n){for(var i=this,a=[],o=arguments.length-1;o-- >0;)a[o]=arguments[o+1];var s=this.activeEvents,u=s.hasOwnProperty(n)?s[n]:!1;if(!u){s[n]=!0;var l=this.events[n]||[];l.forEach(function(f){return f.apply(i,a)}),s[n]=!1}},e.prototype.deferredEmit=function(n){for(var i,a=[],o=arguments.length-1;o-- >0;)a[o]=arguments[o+1];var s=this.deferredEvents;(i=this).emit.apply(i,[n].concat(a)),(s[n]||(s[n]=[])).push(a)},e.prototype.setOptions=function(n){this.setState(n)},e.prototype.resize=function(n){this.setOptions({width:n})},e.prototype.reset=function(){this.colors.forEach(function(n){return n.reset()}),this.setState({colors:this.colors})},e.prototype.onMount=function(n){this.el=n,this.deferredEmit("mount",this)},e.prototype.onColorChange=function(n,i){this.setState({color:this.color}),this.inputActive&&(this.inputActive=!1,this.emit("input:change",n,i)),this.emit("color:change",n,i)},e.prototype.emitInputEvent=function(n,i){n===0?this.emit("input:start",this.color,i):n===1?this.emit("input:move",this.color,i):n===2&&this.emit("input:end",this.color,i)},e.prototype.render=function(n,i){var a=this,o=i.layout;if(!Array.isArray(o)){switch(o){default:o=[{component:n4},{component:Mp}]}i.transparency&&o.push({component:Mp,options:{sliderType:"alpha"}})}return Dn("div",{class:"IroColorPicker",id:i.id,style:{display:i.display}},o.map(function(s,u){var l=s.component,f=s.options;return Dn(l,Object.assign({},i,f,{ref:void 0,onInput:a.emitInputEvent.bind(a),parent:a,index:u}))}))},e}(Ff);i4.defaultProps=Object.assign({},Uj,{colors:[],display:"block",id:null,layout:"default",margin:null});var Yj=Wj(i4),B2;(function(r){r.version="5.5.2",r.Color=Af,r.ColorPicker=Yj,function(e){e.h=Dn,e.ComponentBase=Av,e.Handle=Cl,e.Slider=Mp,e.Wheel=n4,e.Box=Hj}(r.ui||(r.ui={}))})(B2||(B2={}));var Xj=B2;function Kj(r){return new RegExp("^[a-zA-Z\\._][a-zA-Z0-9\\._]*(?<!\\.)$").test(r)}function g3(r){return r==""?(bootbox.alert("Provide a label"),!1):Kj(r)?!0:(bootbox.alert("Provide a valid label"),!1)}function Zj(r,e){const t=e?"full":"minimal";return r.filter(n=>n.show===t||n.show==="both")}function Qj(r,e,t){let n,i,a;Kr(r,sr,h=>t(1,n=h)),Kr(r,ml,h=>t(2,i=h)),Kr(r,tn,h=>t(3,a=h));let o=Lr(jr);ir.use(cj);var s=new Xj.ColorPicker("#picker",{width:200,color:"rgb(255, 0, 0)",borderWidth:1,borderColor:"#fff"});function u(h,p){var g;const b=o.$(":selected");if(b.length>1){if(p==="nodes"&&!b.every(v=>v.isNode()))return bootbox.alert("Not all selected elements are nodes. Aborting"),null;if(p==="edges"&&!b.every(v=>v.isEdge()))return bootbox.alert("Not all selected elements are edges. Aborting"),null;if(p==="nodes.edges"&&!b.every(v=>v.isEdge()||v.isNode()))return bootbox.alert("Not all selected elements are nodes or edges. Aborting"),null;g=b}else g=h;return g}const l=[{id:"add-observed",content:"Add Observed Variable",coreAsWell:!0,onClickFunction(h){const p=h.renderedPosition;va(Ei,p)},show:"full"},{id:"add-latent",content:"Add Latent Variable",coreAsWell:!0,onClickFunction(h){const p=h.renderedPosition;va(Li,p)},show:"full"},{id:"add-constant",content:"Add Constant Variable",coreAsWell:!0,onClickFunction(h){const p=h.renderedPosition;va(es,p)},show:"full"},{id:"label-para",content:"Add/Change Label",selector:`edge.${Wi}`,onClickFunction(h){const p=h.target||h.cyTarget;bootbox.prompt({title:"Enter a Label",callback(g){if(!g3(g))return!1;g!==null&&(p.addLabel(g),Si(a.mode))}})},show:"full",hasTrailingDivider:!1},{id:"label-remove",content:"Remove Label",selector:`edge.${vl}`,onClickFunction(h){(h.target||h.cyTarget).removeLabel(),Si(a.mode)},show:"both",hasTrailingDivider:!1},{id:"remove-edge",content:"Delete Edge",selector:`edge.${Wi}`,onClickFunction(h){(h.target||h.cyTarget).remove(),Si(a.mode)},show:"full",hasTrailingDivider:!0},{id:"fix-para",content:"Fix Parameter",selector:`edge.${Yo}.${Wi}, edge.${Cs}.${Wi}`,onClickFunction(h){const p=h.target||h.cyTarget;bootbox.prompt({title:"Enter a Value",inputType:"number",callback(g){if(g=="")return bootbox.alert("Provide a value"),!1;g!==null&&(p.fixPara(g),Si(a.mode))}})},show:"full",hasTrailingDivider:!1},{id:"free-para",content:"Free Parameter",selector:`edge.${Ko}.${Wi}, edge.${Cs}.${Wi}`,onClickFunction(h){var p=h.target||h.cyTarget;p.freePara(),Si(a.mode)},show:"full",hasTrailingDivider:!1},{id:"free-force-para",content:"Force Parameter Free",selector:`edge.${Yo}.${Wi}, edge.${Ko}.${Wi}`,onClickFunction(h){(h.target||h.cyTarget).forceFreePara(),Si(a.mode)},show:"full",hasTrailingDivider:!0},{id:"revert-arrow",content:"Revert Direction",selector:`edge[isMean="0"].${Ns}.${Wi}`,onClickFunction(h){(h.target||h.cyTarget).revert(),Si(a.mode)},show:"full",hasTrailingDivider:!1},{id:"set-undirected",content:"Set Undirected",selector:`edge[isMean="0"].${Ns}.${Wi}`,onClickFunction(h){(h.target||h.cyTarget).setUndirected(),Si(a.mode)},show:"full",hasTrailingDivider:!0},{id:"set-arrow",content:"Set Directed",selector:`edge.${Ps}.${Wi}`,onClickFunction(h){(h.target||h.cyTarget).setDirected(),Si(a.mode)},show:"full",hasTrailingDivider:!0},{id:"free-orientation",content:"Free Loop Orientation",selector:`edge.${Cp}.fixDeg`,onClickFunction(h){const p=h.target||h.cyTarget;p.removeClass("fixDeg"),$a(p.source().id())},show:"both",hasTrailingDivider:!0},{id:"change-fromUser",content:"Explicitly Include in Model",selector:`edge.${wu}`,onClickFunction(h){(h.target||h.cyTarget).markAddedUser(),Si(a.mode)},show:"full",hasTrailingDivider:!0},{id:"color-edge",content:"Change Edge Color",selector:"edge",show:"both",onClickFunction(h){var p=h.target||h.cyTarget;const g=u(p,"edges");if(g===null)return null;c(p,g,"edge")}},{id:"change-line-width",content:"Change Line Width",show:"both",selector:"edge",onClickFunction(h){var p=h.target||h.cyTarget;const g=u(p,"edges");if(g===null)return null;bootbox.prompt({title:"Enter New Line Width:",value:p.style("width"),callback(b){b!==null&&i.do("style",{eles:g,style:{width:b}})}})}},{id:"rename-node",show:"full",content:"Rename Variable",selector:`node.${Li}, node.${Ei}`,onClickFunction(h){const p=h.target||h.cyTarget,g=n.columnNames;let b;n.dataAvail&&(b=g.map(y=>`<option value="${y}">${y}</option>`).join(""));const v=n.dataAvail&&p.isObserved()?`
      <label>Or Select From Variables in Your Data:</label>
      <select class="form-control" id="label-dropdown">
        <option value="">--Select--</option>
        ${b}
      </select>
    `:"";bootbox.dialog({title:"Rename Variable",message:`
      <div>
        <label>Enter a label:</label>
        <input type="text" class="form-control" id="new-label">
        ${v}
      </div>
    `,buttons:{cancel:{label:"Cancel",className:"btn-default"},confirm:{label:"Rename",className:"btn-primary",callback(){const y=document.getElementById("new-label").value,m=n.dataAvail&&p.isObserved()?document.getElementById("label-dropdown").value:"",w=y||m;if(!g3(w))return!1;w&&(p.setLabel(w),g&&g.includes(p.getLabel())?(p.link(),ga("success",`Variable ${p.data("label")} linked to data`)):p.isLinked()&&(p.unlink(),ga("info",`Variable ${p.getLabel()} unlinked`)),Si(a.mode))}}},onShown(y){document.getElementById("new-label").addEventListener("keypress",function(m){m.key==="Enter"&&(m.preventDefault(),y.target.querySelector(".btn-primary").click())})}})}},{id:"remove-node",content:"Delete Variable",selector:`node.${Li}, node.${Ei}, node.${es}`,onClickFunction(h){(h.target||h.cyTarget).remove(),Si(a.mode)},show:"full",hasTrailingDivider:!0},{id:"change-latent",content:"Change to Latent",selector:`node.${Ei}`,onClickFunction(h){(h.target||h.cyTarget).makeLatent(),Si(a.mode)},show:"full",hasTrailingDivider:!0},{id:"change-observed",show:"full",content:"Change to Observed",selector:`node.${Li}`,hasTrailingDivider:!0,onClickFunction(h){const p=h.target||h.cyTarget;p.makeObserved();let g=n.columnNames;g&&g.includes(p.getLabel())&&(p.link(),bootbox.alert("Variable linked with data set")),Si(a.mode)}},{id:"color-node",content:"Change Background Color",selector:"node",show:"both",onClickFunction(h){var p=h.target||h.cyTarget;const g=u(p,"nodes");if(g===null)return null;c(p,g,"nodes")}},{id:"change-border-width",content:"Change Border Width",show:"both",selector:`node.${Li}, node.${Ei}, node.${es}`,onClickFunction(h){var p=h.target||h.cyTarget;const g=u(p,"nodes");if(g===null)return null;bootbox.prompt({title:"Enter New Border Width:",value:p.style("border-width"),callback(b){b!==null&&i.do("style",{eles:g,style:{"border-width":b}})}})}},{id:"change-font-size",content:"Change Font Size",show:"both",hasTrailingDivider:!0,selector:`node.${Li}, node.${Ei}, node.${es}, edge`,onClickFunction(h){var p=h.target||h.cyTarget;const g=u(p,"nodes.edges");if(g===null)return null;bootbox.prompt({title:"Enter New Font Size:",value:p.style("font-size"),callback(b){b!==null&&i.do("style",{eles:g,style:{"font-size":b}})}})}}];let f;function c(h,p,g){var b=document.getElementById("picker");b.style.display="block",b.style.left=event.pageX+"px",b.style.top=event.pageY+"px";let v;f=p;const y=function(w){v=w.hexString};s.on("color:change",y);const m=function(w){b.contains(w.target)||(g=="edge"?i.do("style",{eles:f,style:{"line-color":v,"target-arrow-color":v,"source-arrow-color":v}}):i.do("style",{eles:f,style:{"background-color":v}}),b.style.display="none",s.off("color:change",y),document.removeEventListener("click",m))};setTimeout(()=>document.addEventListener("click",m),0)}const d=Zj(l,n.full);return oo(()=>{o.contextMenus({menuItems:d})}),[]}class Jj extends Ir{constructor(e){super(),Dr(this,e,Qj,null,Nr,{})}}function eV(r){let e;return{c(){e=Yt("div"),e.innerHTML=`<label class="control-label shiny-label-null" for="fileInput" id="fileInput-label"></label> 
  <div class="input-group svelte-1qxcvef"><label class="input-group-btn input-group-prepend"><span class="btn btn-default btn-file">Browse...
        <input id="dataUpload-fileInput" name="fileInput" type="file" style="position: absolute !important; top: -99999px !important; left: -99999px !important;" accept=".csv,.sav, .xlsx, .rds"/></span></label> 
    <input type="text" class="form-control" placeholder="No file selected" readonly="readonly"/></div> 
  <div id="fileInput_progress" class="progress active shiny-file-input-progress svelte-1qxcvef"><div class="progress-bar svelte-1qxcvef"></div></div>`,st(e,"class","form-group shiny-input-container svelte-1qxcvef")},m(t,n){Pt(t,e,n)},p:Yr,i:Yr,o:Yr,d(t){t&&Nt(e)}}}class tV extends Ir{constructor(e){super(),Dr(this,e,null,eV,Nr,{})}}function rV(r){let e,t,n,i,a,o,s,u,l,f,c,d,h,p,g,b,v,y,m,w,S,A,_,E;return{c(){e=Yt("div"),t=Yt("button"),n=ia("Show Data"),a=qt(),o=Yt("div"),s=Yt("button"),u=ia("User Model"),f=qt(),c=Yt("button"),d=ia("Full Model"),p=qt(),g=Yt("button"),b=ia("Estimates"),m=qt(),w=Yt("button"),S=ia("More Results"),st(t,"class","btn btn-lg btn-default"),t.disabled=i=!r[2].dataAvail,st(s,"class",l="btn btn-lg "+(r[1]==="user model"?"btn-primary active":"btn-default")),st(c,"class",h="btn btn-lg "+(r[1]==="full model"?"btn-primary active":"btn-default")),st(g,"class",v="btn btn-lg "+(r[1]==="estimate"?"btn-primary active":"btn-default")),g.disabled=y=!r[2].dataAvail||r[2].modelEmpty,st(o,"class","btn-group btn-toggle svelte-xny576"),st(w,"class","btn btn-lg btn-default"),w.disabled=A=r[0].mode!="estimate",st(e,"class","toolbox navbar-static-bottom svelte-xny576")},m(k,M){Pt(k,e,M),Gt(e,t),Gt(t,n),Gt(e,a),Gt(e,o),Gt(o,s),Gt(s,u),Gt(o,f),Gt(o,c),Gt(c,d),Gt(o,p),Gt(o,g),Gt(g,b),Gt(e,m),Gt(e,w),Gt(w,S),_||(E=[kn(t,"click",r[6]),kn(s,"click",r[7]),kn(c,"click",r[8]),kn(g,"click",r[9]),kn(w,"click",r[10])],_=!0)},p(k,[M]){M&4&&i!==(i=!k[2].dataAvail)&&(t.disabled=i),M&2&&l!==(l="btn btn-lg "+(k[1]==="user model"?"btn-primary active":"btn-default"))&&st(s,"class",l),M&2&&h!==(h="btn btn-lg "+(k[1]==="full model"?"btn-primary active":"btn-default"))&&st(c,"class",h),M&2&&v!==(v="btn btn-lg "+(k[1]==="estimate"?"btn-primary active":"btn-default"))&&st(g,"class",v),M&4&&y!==(y=!k[2].dataAvail||k[2].modelEmpty)&&(g.disabled=y),M&1&&A!==(A=k[0].mode!="estimate")&&(w.disabled=A)},i:Yr,o:Yr,d(k){k&&Nt(e),_=!1,To(E)}}}function nV(){window.$("#data-modal-2").modal()}function iV(r,e,t){let n,i,a;Kr(r,tn,g=>t(0,n=g)),Kr(r,sr,g=>t(2,i=g)),Kr(r,Jn,g=>t(11,a=g));let o;function s(g){t(1,o=g),g!=="user model"?tr(Jn,a.showLav=!0,a):tr(Jn,a.showLav=!1,a),tr(tn,n.mode=g,n)}window.$("#data-modal-extend-results").on("hidden.bs.modal",function(){tr(sr,i.showServerErrors=!0,i)});function u(){window.$("#data-modal-extend-results").modal(),tr(sr,i.showServerErrors=!1,i)}let l=!1;oo(()=>{t(5,l=!0)});const f=()=>nV(),c=()=>s("user model"),d=()=>s("full model"),h=()=>s("estimate"),p=()=>u();return r.$$.update=()=>{r.$$.dirty&33&&l&&t(1,o=n.mode)},[n,o,i,s,u,l,f,c,d,h,p]}class aV extends Ir{constructor(e){super(),Dr(this,e,iV,rV,Nr,{})}}function oV(){return typeof Shiny=="object"&&Shiny!==null}function sV(r){let e=0,t=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY,i=r.nodes().length;r.nodes().forEach(s=>{let u=s.position();e+=u.x,u.x>t&&(t=u.x),u.y>n&&(n=u.y)});let a=e/i,o=n+100;return{x:a,y:o}}function uV(r,e){if(!r)throw new Error(e||"Assertion failed")}function lV(r,e,t){let n,i,a;Kr(r,tn,c=>t(0,n=c)),Kr(r,sr,c=>t(1,i=c)),Kr(r,Ts,c=>t(2,a=c));function o(c,d,h){let p,g,b;return d==="=~"?(p=Ns,g=c,b=h):d=="~1"?(g=1,b=c,p=Ns):(b=c,g=h,d==="~~"?c===h?p=Cp:p=Ps:p=Ns),{directed:p,source:g,target:b}}function s(c,d,h,p){let g=o(c,d,h);g.user=p;const v=Lr(jr).edges(function(y){let m;if(g.source!=1?(m=y.source().getLabel()==g.source&&y.target().getLabel()==g.target,g.directed==Ps&&(m=m||y.source().getLabel()==g.target&&y.target().getLabel()==g.source)):m=y.source().isConstant()&&y.target().getLabel()==g.target,g.user!=null)if(g.user==1)m=m&&y.isUserAdded();else if(g.user==0)m=m&&y.isLavaanAdded();else throw new Error("User was neither 0 nor 1");return m});if(v.length>1)throw new Error("Multiple edges found");return v}function u(c,d){va(c,void 0,!1,d)}function l(c,d){tr(sr,i.meansModelled=!1,i),tr(sr,i.loadingMode=!0,i);let h=Lr(jr);if(!d)h.edges().invalidate();else{const b=Array.isArray(c.obs)?c.obs:[c.obs];for(let y=0;y<b.length;y++)u(Ei,b[y]);const v=Array.isArray(c.latent)?c.latent:[c.latent];for(let y=0;y<v.length;y++)u(Li,v[y]);c=c.parTable}let p=!1,g;for(let b=0;b<c.lhs.length;b++){let v=s(c.lhs[b],c.op[b],c.rhs[b],c.user[b]);if(!d&&c.user[b]==1)uV(v.length==1),v.validate(),v.isModifiedLavaan()&&v.isFixed()&&v.revertLavaanFix(),c.free[b]==0&&!v.isFixed()&&v.fixPara(c.ustart[b]).markModifiedLavaan();else{let y;if(d||v.length==0){const m=o(c.lhs[b],c.op[b],c.rhs[b]);if(d&&i.full&&c.user[b]==0)continue;let w;if(m.source!==1)w=h.nodes(function(A){return A.getLabel()==m.source})[0].id();else{if(tr(sr,i.meansModelled=!0,i),c.free[b]==0&&c.ustart[b]==0)continue;p||(g=va(es,sV(h),!1),p=!0,h.nodes(function(_){return _.id()==g})[0].markAddedLavaan()),w=g}const S=h.nodes(function(A){return A.getLabel()==m.target})[0].id();y=h.add({groups:"edges",data:{source:w,target:S},classes:m.directed+" nolabel"}),c.label[b]!=""&&y.addLabelImport(c.label[b]),c.user[b]==1?y.markAddedUser():y.markAddedLavaan(),$a(w),$a(S)}else!d&&v.length==1&&(y=v);c.free[b]==0?c.ustart[b]!==0&&c.exo[b]!==1?y.fixPara(c.ustart[b]):y.remove():y.setFree(),d||y.validate()}}d?(D2("tree",!1),h.fit()):(h.edges().forEach(b=>{b.isValid()||b.remove()}),h.getLavaanNodes().forEach(b=>{b.connectedEdges().length==0&&(b.remove(),h.nodes().forEach(v=>{$a(v.id())}))})),i.parsedModel||tr(sr,i.parsedModel=!0,i),h.getUserEdges().length>0&&tr(sr,i.modelEmpty=!1,i),tr(sr,i.loadingMode=!1,i)}function f(c,d){Lr(jr);for(let h=0;h<c.lhs.length;h++){let p=s(c.lhs[h],c.op[h],c.rhs[h]);if(p.isFree()){let g={};g.est=c.est[h],g.p_value=c.pvalue[h],g.se=c.se[h],g.ciLow=c["ci.lower"][h],g.ciHigh=c["ci.upper"][h],g.est_std=d["est.std"][h],g.se_std=d.se[h],g.ciLow_std=d["ci.lower"][h],g.ciHigh_std=d["ci.upper"][h],p.data("estimates",g),p.addClass("hasEst")}}}return oV()&&(Shiny.addCustomMessageHandler("dataInfo",function(c){b2(c.columns),tr(sr,i.columnNames=[...c.columns],i),tr(sr,i.ids=[...c.columns],i),tr(sr,i.loadedFileName=c.name,i),tr(sr,i.dataAvail=!0,i),Si(n.mode),c.showData&&window.$("#data-modal-2").modal()}),Shiny.addCustomMessageHandler("lav_failed",function(c){tr(sr,i.fitting=!1,i),c=="stopped"?ga("danger","Fitting stopped by user"):ga("danger","Fitting failed")}),Shiny.addCustomMessageHandler("fitting",function(c){tr(sr,i.fitting=!0,i)}),Shiny.addCustomMessageHandler("lav_warning_error",function(c){const d=c.type=="warning"?"warning":"error";ga(c.type,`During ${c.origin} the following ${d} occurred: ${c.message}`)}),Shiny.addCustomMessageHandler("lav_error_fitting",function(c){tr(sr,i.fitting=!1,i),ga(c.type,"During "+c.origin+" the following error occurred: "+c.message)}),Shiny.addCustomMessageHandler("usecache",function(c){ga("info","Reusing cached results because model and data did not change since last fit")}),Shiny.addCustomMessageHandler("data_missing",function(c){ga("danger","Could not fit model because no data is available")}),Shiny.addCustomMessageHandler("columnames",function(c){tr(sr,i.columnNames=c,i),b2(c)}),Shiny.addCustomMessageHandler("missing_vars",function(c){var d=[].concat(c).join(", ");ga("danger","Could not fit model because "+d+" are observed variables in the model but not present in the data.")}),Shiny.addCustomMessageHandler("lav_model",function(c){l(c,!1)}),Shiny.addCustomMessageHandler("imported_model",function(c){l(c,!0),tr(tn,n.fix_first=!1,n),ga("warning","start_gui only imports user edges. Your full model is very likely different than what you fitted in lavaan because of different options used. To display the model, as you fitted it in lavaan, use plot_interactive")}),Shiny.addCustomMessageHandler("lav_results",function(c){tr(sr,i.loadingMode=!0,i),tr(Ts,a.lastFitLavFit=c.fitted_model,a),tr(Ts,a.lastFitModel=c.model,a),tr(Ts,a.lastFitData=c.data,a),tr(sr,i.fitting=!1,i),tr(sr,i.loadingMode=!1,i)}),Shiny.addCustomMessageHandler("lav_estimates",function(c){const d=c.normal,h=c.std;f(d,h)}),Shiny.addCustomMessageHandler("setToEstimate",function(c){tr(tn,n.mode="estimate",n)})),[]}class fV extends Ir{constructor(e){super(),Dr(this,e,lV,null,Nr,{})}}function cV(r){let e;return{c(){e=Yt("a"),e.innerHTML=`<i class="fas fa-download" role="presentation" aria-label="download icon"></i>
  Download`,st(e,"id","down-downloadData"),st(e,"class","btn btn-default shiny-download-link shinyjs-hide svelte-b5e9xv"),st(e,"href","#"),st(e,"target","_blank"),st(e,"download","")},m(t,n){Pt(t,e,n)},p:Yr,i:Yr,o:Yr,d(t){t&&Nt(e)}}}class hV extends Ir{constructor(e){super(),Dr(this,e,null,cV,Nr,{})}}var a4={exports:{}},Vb={exports:{}};/*!
 * jQuery JavaScript Library v3.7.0
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-05-11T18:29Z
 */var m3;function dV(){return m3||(m3=1,function(r){(function(e,t){r.exports=e.document?t(e,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}})(typeof window<"u"?window:kt,function(e,t){var n=[],i=Object.getPrototypeOf,a=n.slice,o=n.flat?function(N){return n.flat.call(N)}:function(N){return n.concat.apply([],N)},s=n.push,u=n.indexOf,l={},f=l.toString,c=l.hasOwnProperty,d=c.toString,h=d.call(Object),p={},g=function(j){return typeof j=="function"&&typeof j.nodeType!="number"&&typeof j.item!="function"},b=function(j){return j!=null&&j===j.window},v=e.document,y={type:!0,src:!0,nonce:!0,noModule:!0};function m(N,j,ee){ee=ee||v;var ae,de,pe=ee.createElement("script");if(pe.text=N,j)for(ae in y)de=j[ae]||j.getAttribute&&j.getAttribute(ae),de&&pe.setAttribute(ae,de);ee.head.appendChild(pe).parentNode.removeChild(pe)}function w(N){return N==null?N+"":typeof N=="object"||typeof N=="function"?l[f.call(N)]||"object":typeof N}var S="3.7.0",A=/HTML$/i,_=function(N,j){return new _.fn.init(N,j)};_.fn=_.prototype={jquery:S,constructor:_,length:0,toArray:function(){return a.call(this)},get:function(N){return N==null?a.call(this):N<0?this[N+this.length]:this[N]},pushStack:function(N){var j=_.merge(this.constructor(),N);return j.prevObject=this,j},each:function(N){return _.each(this,N)},map:function(N){return this.pushStack(_.map(this,function(j,ee){return N.call(j,ee,j)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(_.grep(this,function(N,j){return(j+1)%2}))},odd:function(){return this.pushStack(_.grep(this,function(N,j){return j%2}))},eq:function(N){var j=this.length,ee=+N+(N<0?j:0);return this.pushStack(ee>=0&&ee<j?[this[ee]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},_.extend=_.fn.extend=function(){var N,j,ee,ae,de,pe,xe=arguments[0]||{},Be=1,Oe=arguments.length,He=!1;for(typeof xe=="boolean"&&(He=xe,xe=arguments[Be]||{},Be++),typeof xe!="object"&&!g(xe)&&(xe={}),Be===Oe&&(xe=this,Be--);Be<Oe;Be++)if((N=arguments[Be])!=null)for(j in N)ae=N[j],!(j==="__proto__"||xe===ae)&&(He&&ae&&(_.isPlainObject(ae)||(de=Array.isArray(ae)))?(ee=xe[j],de&&!Array.isArray(ee)?pe=[]:!de&&!_.isPlainObject(ee)?pe={}:pe=ee,de=!1,xe[j]=_.extend(He,pe,ae)):ae!==void 0&&(xe[j]=ae));return xe},_.extend({expando:"jQuery"+(S+Math.random()).replace(/\D/g,""),isReady:!0,error:function(N){throw new Error(N)},noop:function(){},isPlainObject:function(N){var j,ee;return!N||f.call(N)!=="[object Object]"?!1:(j=i(N),j?(ee=c.call(j,"constructor")&&j.constructor,typeof ee=="function"&&d.call(ee)===h):!0)},isEmptyObject:function(N){var j;for(j in N)return!1;return!0},globalEval:function(N,j,ee){m(N,{nonce:j&&j.nonce},ee)},each:function(N,j){var ee,ae=0;if(E(N))for(ee=N.length;ae<ee&&j.call(N[ae],ae,N[ae])!==!1;ae++);else for(ae in N)if(j.call(N[ae],ae,N[ae])===!1)break;return N},text:function(N){var j,ee="",ae=0,de=N.nodeType;if(de){if(de===1||de===9||de===11)return N.textContent;if(de===3||de===4)return N.nodeValue}else for(;j=N[ae++];)ee+=_.text(j);return ee},makeArray:function(N,j){var ee=j||[];return N!=null&&(E(Object(N))?_.merge(ee,typeof N=="string"?[N]:N):s.call(ee,N)),ee},inArray:function(N,j,ee){return j==null?-1:u.call(j,N,ee)},isXMLDoc:function(N){var j=N&&N.namespaceURI,ee=N&&(N.ownerDocument||N).documentElement;return!A.test(j||ee&&ee.nodeName||"HTML")},merge:function(N,j){for(var ee=+j.length,ae=0,de=N.length;ae<ee;ae++)N[de++]=j[ae];return N.length=de,N},grep:function(N,j,ee){for(var ae,de=[],pe=0,xe=N.length,Be=!ee;pe<xe;pe++)ae=!j(N[pe],pe),ae!==Be&&de.push(N[pe]);return de},map:function(N,j,ee){var ae,de,pe=0,xe=[];if(E(N))for(ae=N.length;pe<ae;pe++)de=j(N[pe],pe,ee),de!=null&&xe.push(de);else for(pe in N)de=j(N[pe],pe,ee),de!=null&&xe.push(de);return o(xe)},guid:1,support:p}),typeof Symbol=="function"&&(_.fn[Symbol.iterator]=n[Symbol.iterator]),_.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(N,j){l["[object "+j+"]"]=j.toLowerCase()});function E(N){var j=!!N&&"length"in N&&N.length,ee=w(N);return g(N)||b(N)?!1:ee==="array"||j===0||typeof j=="number"&&j>0&&j-1 in N}function k(N,j){return N.nodeName&&N.nodeName.toLowerCase()===j.toLowerCase()}var M=n.pop,T=n.sort,C=n.splice,R="[\\x20\\t\\r\\n\\f]",x=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g");_.contains=function(N,j){var ee=j&&j.parentNode;return N===ee||!!(ee&&ee.nodeType===1&&(N.contains?N.contains(ee):N.compareDocumentPosition&&N.compareDocumentPosition(ee)&16))};var B=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function D(N,j){return j?N==="\0"?"�":N.slice(0,-1)+"\\"+N.charCodeAt(N.length-1).toString(16)+" ":"\\"+N}_.escapeSelector=function(N){return(N+"").replace(B,D)};var O=v,G=s;(function(){var N,j,ee,ae,de,pe=G,xe,Be,Oe,He,ot,ht=_.expando,rt=0,Ct=0,mr=zo(),$r=zo(),Er=zo(),Qn=zo(),Y=function(Ne,qe){return Ne===qe&&(de=!0),0},ye="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Me="(?:\\\\[\\da-fA-F]{1,6}"+R+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",De="\\["+R+"*("+Me+")(?:"+R+"*([*^$|!~]?=)"+R+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Me+"))|)"+R+"*\\]",Ke=":("+Me+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+De+")*)|.*)\\)|)",Je=new RegExp(R+"+","g"),gt=new RegExp("^"+R+"*,"+R+"*"),jt=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),cr=new RegExp(R+"|>"),yr=new RegExp(Ke),kr=new RegExp("^"+Me+"$"),Mr={ID:new RegExp("^#("+Me+")"),CLASS:new RegExp("^\\.("+Me+")"),TAG:new RegExp("^("+Me+"|[*])"),ATTR:new RegExp("^"+De),PSEUDO:new RegExp("^"+Ke),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+ye+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},sn=/^(?:input|select|textarea|button)$/i,hn=/^h\d$/i,rn=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,wi=/[+~]/,Sn=new RegExp("\\\\[\\da-fA-F]{1,6}"+R+"?|\\\\([^\\r\\n\\f])","g"),pi=function(Ne,qe){var Qe="0x"+Ne.slice(1)-65536;return qe||(Qe<0?String.fromCharCode(Qe+65536):String.fromCharCode(Qe>>10|55296,Qe&1023|56320))},ca=function(){ha()},vo=Go(function(Ne){return Ne.disabled===!0&&k(Ne,"fieldset")},{dir:"parentNode",next:"legend"});function Kl(){try{return xe.activeElement}catch{}}try{pe.apply(n=a.call(O.childNodes),O.childNodes),n[O.childNodes.length].nodeType}catch{pe={apply:function(qe,Qe){G.apply(qe,a.call(Qe))},call:function(qe){G.apply(qe,a.call(arguments,1))}}}function en(Ne,qe,Qe,it){var lt,It,Vt,er,Ft,Tr,dr,wr=qe&&qe.ownerDocument,Or=qe?qe.nodeType:9;if(Qe=Qe||[],typeof Ne!="string"||!Ne||Or!==1&&Or!==9&&Or!==11)return Qe;if(!it&&(ha(qe),qe=qe||xe,Oe)){if(Or!==11&&(Ft=rn.exec(Ne)))if(lt=Ft[1]){if(Or===9)if(Vt=qe.getElementById(lt)){if(Vt.id===lt)return pe.call(Qe,Vt),Qe}else return Qe;else if(wr&&(Vt=wr.getElementById(lt))&&en.contains(qe,Vt)&&Vt.id===lt)return pe.call(Qe,Vt),Qe}else{if(Ft[2])return pe.apply(Qe,qe.getElementsByTagName(Ne)),Qe;if((lt=Ft[3])&&qe.getElementsByClassName)return pe.apply(Qe,qe.getElementsByClassName(lt)),Qe}if(!Qn[Ne+" "]&&(!He||!He.test(Ne))){if(dr=Ne,wr=qe,Or===1&&(cr.test(Ne)||jt.test(Ne))){for(wr=wi.test(Ne)&&qo(qe.parentNode)||qe,(wr!=qe||!p.scope)&&((er=qe.getAttribute("id"))?er=_.escapeSelector(er):qe.setAttribute("id",er=ht)),Tr=ki(Ne),It=Tr.length;It--;)Tr[It]=(er?"#"+er:":scope")+" "+Js(Tr[It]);dr=Tr.join(",")}try{return pe.apply(Qe,wr.querySelectorAll(dr)),Qe}catch{Qn(Ne,!0)}finally{er===ht&&qe.removeAttribute("id")}}}return Ca(Ne.replace(x,"$1"),qe,Qe,it)}function zo(){var Ne=[];function qe(Qe,it){return Ne.push(Qe+" ")>j.cacheLength&&delete qe[Ne.shift()],qe[Qe+" "]=it}return qe}function Di(Ne){return Ne[ht]=!0,Ne}function Ka(Ne){var qe=xe.createElement("fieldset");try{return!!Ne(qe)}catch{return!1}finally{qe.parentNode&&qe.parentNode.removeChild(qe),qe=null}}function Zu(Ne){return function(qe){return k(qe,"input")&&qe.type===Ne}}function Zs(Ne){return function(qe){return(k(qe,"input")||k(qe,"button"))&&qe.type===Ne}}function Ui(Ne){return function(qe){return"form"in qe?qe.parentNode&&qe.disabled===!1?"label"in qe?"label"in qe.parentNode?qe.parentNode.disabled===Ne:qe.disabled===Ne:qe.isDisabled===Ne||qe.isDisabled!==!Ne&&vo(qe)===Ne:qe.disabled===Ne:"label"in qe?qe.disabled===Ne:!1}}function Ea(Ne){return Di(function(qe){return qe=+qe,Di(function(Qe,it){for(var lt,It=Ne([],Qe.length,qe),Vt=It.length;Vt--;)Qe[lt=It[Vt]]&&(Qe[lt]=!(it[lt]=Qe[lt]))})})}function qo(Ne){return Ne&&typeof Ne.getElementsByTagName<"u"&&Ne}function ha(Ne){var qe,Qe=Ne?Ne.ownerDocument||Ne:O;return Qe==xe||Qe.nodeType!==9||!Qe.documentElement||(xe=Qe,Be=xe.documentElement,Oe=!_.isXMLDoc(xe),ot=Be.matches||Be.webkitMatchesSelector||Be.msMatchesSelector,O!=xe&&(qe=xe.defaultView)&&qe.top!==qe&&qe.addEventListener("unload",ca),p.getById=Ka(function(it){return Be.appendChild(it).id=_.expando,!xe.getElementsByName||!xe.getElementsByName(_.expando).length}),p.disconnectedMatch=Ka(function(it){return ot.call(it,"*")}),p.scope=Ka(function(){return xe.querySelectorAll(":scope")}),p.cssHas=Ka(function(){try{return xe.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),p.getById?(j.filter.ID=function(it){var lt=it.replace(Sn,pi);return function(It){return It.getAttribute("id")===lt}},j.find.ID=function(it,lt){if(typeof lt.getElementById<"u"&&Oe){var It=lt.getElementById(it);return It?[It]:[]}}):(j.filter.ID=function(it){var lt=it.replace(Sn,pi);return function(It){var Vt=typeof It.getAttributeNode<"u"&&It.getAttributeNode("id");return Vt&&Vt.value===lt}},j.find.ID=function(it,lt){if(typeof lt.getElementById<"u"&&Oe){var It,Vt,er,Ft=lt.getElementById(it);if(Ft){if(It=Ft.getAttributeNode("id"),It&&It.value===it)return[Ft];for(er=lt.getElementsByName(it),Vt=0;Ft=er[Vt++];)if(It=Ft.getAttributeNode("id"),It&&It.value===it)return[Ft]}return[]}}),j.find.TAG=function(it,lt){return typeof lt.getElementsByTagName<"u"?lt.getElementsByTagName(it):lt.querySelectorAll(it)},j.find.CLASS=function(it,lt){if(typeof lt.getElementsByClassName<"u"&&Oe)return lt.getElementsByClassName(it)},He=[],Ka(function(it){var lt;Be.appendChild(it).innerHTML="<a id='"+ht+"' href='' disabled='disabled'></a><select id='"+ht+"-\r\\' disabled='disabled'><option selected=''></option></select>",it.querySelectorAll("[selected]").length||He.push("\\["+R+"*(?:value|"+ye+")"),it.querySelectorAll("[id~="+ht+"-]").length||He.push("~="),it.querySelectorAll("a#"+ht+"+*").length||He.push(".#.+[+~]"),it.querySelectorAll(":checked").length||He.push(":checked"),lt=xe.createElement("input"),lt.setAttribute("type","hidden"),it.appendChild(lt).setAttribute("name","D"),Be.appendChild(it).disabled=!0,it.querySelectorAll(":disabled").length!==2&&He.push(":enabled",":disabled"),lt=xe.createElement("input"),lt.setAttribute("name",""),it.appendChild(lt),it.querySelectorAll("[name='']").length||He.push("\\["+R+"*name"+R+"*="+R+`*(?:''|"")`)}),p.cssHas||He.push(":has"),He=He.length&&new RegExp(He.join("|")),Y=function(it,lt){if(it===lt)return de=!0,0;var It=!it.compareDocumentPosition-!lt.compareDocumentPosition;return It||(It=(it.ownerDocument||it)==(lt.ownerDocument||lt)?it.compareDocumentPosition(lt):1,It&1||!p.sortDetached&&lt.compareDocumentPosition(it)===It?it===xe||it.ownerDocument==O&&en.contains(O,it)?-1:lt===xe||lt.ownerDocument==O&&en.contains(O,lt)?1:ae?u.call(ae,it)-u.call(ae,lt):0:It&4?-1:1)}),xe}en.matches=function(Ne,qe){return en(Ne,null,null,qe)},en.matchesSelector=function(Ne,qe){if(ha(Ne),Oe&&!Qn[qe+" "]&&(!He||!He.test(qe)))try{var Qe=ot.call(Ne,qe);if(Qe||p.disconnectedMatch||Ne.document&&Ne.document.nodeType!==11)return Qe}catch{Qn(qe,!0)}return en(qe,xe,null,[Ne]).length>0},en.contains=function(Ne,qe){return(Ne.ownerDocument||Ne)!=xe&&ha(Ne),_.contains(Ne,qe)},en.attr=function(Ne,qe){(Ne.ownerDocument||Ne)!=xe&&ha(Ne);var Qe=j.attrHandle[qe.toLowerCase()],it=Qe&&c.call(j.attrHandle,qe.toLowerCase())?Qe(Ne,qe,!Oe):void 0;return it!==void 0?it:Ne.getAttribute(qe)},en.error=function(Ne){throw new Error("Syntax error, unrecognized expression: "+Ne)},_.uniqueSort=function(Ne){var qe,Qe=[],it=0,lt=0;if(de=!p.sortStable,ae=!p.sortStable&&a.call(Ne,0),T.call(Ne,Y),de){for(;qe=Ne[lt++];)qe===Ne[lt]&&(it=Qe.push(lt));for(;it--;)C.call(Ne,Qe[it],1)}return ae=null,Ne},_.fn.uniqueSort=function(){return this.pushStack(_.uniqueSort(a.apply(this)))},j=_.expr={cacheLength:50,createPseudo:Di,match:Mr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Ne){return Ne[1]=Ne[1].replace(Sn,pi),Ne[3]=(Ne[3]||Ne[4]||Ne[5]||"").replace(Sn,pi),Ne[2]==="~="&&(Ne[3]=" "+Ne[3]+" "),Ne.slice(0,4)},CHILD:function(Ne){return Ne[1]=Ne[1].toLowerCase(),Ne[1].slice(0,3)==="nth"?(Ne[3]||en.error(Ne[0]),Ne[4]=+(Ne[4]?Ne[5]+(Ne[6]||1):2*(Ne[3]==="even"||Ne[3]==="odd")),Ne[5]=+(Ne[7]+Ne[8]||Ne[3]==="odd")):Ne[3]&&en.error(Ne[0]),Ne},PSEUDO:function(Ne){var qe,Qe=!Ne[6]&&Ne[2];return Mr.CHILD.test(Ne[0])?null:(Ne[3]?Ne[2]=Ne[4]||Ne[5]||"":Qe&&yr.test(Qe)&&(qe=ki(Qe,!0))&&(qe=Qe.indexOf(")",Qe.length-qe)-Qe.length)&&(Ne[0]=Ne[0].slice(0,qe),Ne[2]=Qe.slice(0,qe)),Ne.slice(0,3))}},filter:{TAG:function(Ne){var qe=Ne.replace(Sn,pi).toLowerCase();return Ne==="*"?function(){return!0}:function(Qe){return k(Qe,qe)}},CLASS:function(Ne){var qe=mr[Ne+" "];return qe||(qe=new RegExp("(^|"+R+")"+Ne+"("+R+"|$)"))&&mr(Ne,function(Qe){return qe.test(typeof Qe.className=="string"&&Qe.className||typeof Qe.getAttribute<"u"&&Qe.getAttribute("class")||"")})},ATTR:function(Ne,qe,Qe){return function(it){var lt=en.attr(it,Ne);return lt==null?qe==="!=":qe?(lt+="",qe==="="?lt===Qe:qe==="!="?lt!==Qe:qe==="^="?Qe&&lt.indexOf(Qe)===0:qe==="*="?Qe&&lt.indexOf(Qe)>-1:qe==="$="?Qe&&lt.slice(-Qe.length)===Qe:qe==="~="?(" "+lt.replace(Je," ")+" ").indexOf(Qe)>-1:qe==="|="?lt===Qe||lt.slice(0,Qe.length+1)===Qe+"-":!1):!0}},CHILD:function(Ne,qe,Qe,it,lt){var It=Ne.slice(0,3)!=="nth",Vt=Ne.slice(-4)!=="last",er=qe==="of-type";return it===1&&lt===0?function(Ft){return!!Ft.parentNode}:function(Ft,Tr,dr){var wr,Or,lr,un,Pn,Bn=It!==Vt?"nextSibling":"previousSibling",Ur=Ft.parentNode,Wr=er&&Ft.nodeName.toLowerCase(),En=!dr&&!er,Qr=!1;if(Ur){if(It){for(;Bn;){for(lr=Ft;lr=lr[Bn];)if(er?k(lr,Wr):lr.nodeType===1)return!1;Pn=Bn=Ne==="only"&&!Pn&&"nextSibling"}return!0}if(Pn=[Vt?Ur.firstChild:Ur.lastChild],Vt&&En){for(Or=Ur[ht]||(Ur[ht]={}),wr=Or[Ne]||[],un=wr[0]===rt&&wr[1],Qr=un&&wr[2],lr=un&&Ur.childNodes[un];lr=++un&&lr&&lr[Bn]||(Qr=un=0)||Pn.pop();)if(lr.nodeType===1&&++Qr&&lr===Ft){Or[Ne]=[rt,un,Qr];break}}else if(En&&(Or=Ft[ht]||(Ft[ht]={}),wr=Or[Ne]||[],un=wr[0]===rt&&wr[1],Qr=un),Qr===!1)for(;(lr=++un&&lr&&lr[Bn]||(Qr=un=0)||Pn.pop())&&!((er?k(lr,Wr):lr.nodeType===1)&&++Qr&&(En&&(Or=lr[ht]||(lr[ht]={}),Or[Ne]=[rt,Qr]),lr===Ft)););return Qr-=lt,Qr===it||Qr%it===0&&Qr/it>=0}}},PSEUDO:function(Ne,qe){var Qe,it=j.pseudos[Ne]||j.setFilters[Ne.toLowerCase()]||en.error("unsupported pseudo: "+Ne);return it[ht]?it(qe):it.length>1?(Qe=[Ne,Ne,"",qe],j.setFilters.hasOwnProperty(Ne.toLowerCase())?Di(function(lt,It){for(var Vt,er=it(lt,qe),Ft=er.length;Ft--;)Vt=u.call(lt,er[Ft]),lt[Vt]=!(It[Vt]=er[Ft])}):function(lt){return it(lt,0,Qe)}):it}},pseudos:{not:Di(function(Ne){var qe=[],Qe=[],it=Ji(Ne.replace(x,"$1"));return it[ht]?Di(function(lt,It,Vt,er){for(var Ft,Tr=it(lt,null,er,[]),dr=lt.length;dr--;)(Ft=Tr[dr])&&(lt[dr]=!(It[dr]=Ft))}):function(lt,It,Vt){return qe[0]=lt,it(qe,null,Vt,Qe),qe[0]=null,!Qe.pop()}}),has:Di(function(Ne){return function(qe){return en(Ne,qe).length>0}}),contains:Di(function(Ne){return Ne=Ne.replace(Sn,pi),function(qe){return(qe.textContent||_.text(qe)).indexOf(Ne)>-1}}),lang:Di(function(Ne){return kr.test(Ne||"")||en.error("unsupported lang: "+Ne),Ne=Ne.replace(Sn,pi).toLowerCase(),function(qe){var Qe;do if(Qe=Oe?qe.lang:qe.getAttribute("xml:lang")||qe.getAttribute("lang"))return Qe=Qe.toLowerCase(),Qe===Ne||Qe.indexOf(Ne+"-")===0;while((qe=qe.parentNode)&&qe.nodeType===1);return!1}}),target:function(Ne){var qe=e.location&&e.location.hash;return qe&&qe.slice(1)===Ne.id},root:function(Ne){return Ne===Be},focus:function(Ne){return Ne===Kl()&&xe.hasFocus()&&!!(Ne.type||Ne.href||~Ne.tabIndex)},enabled:Ui(!1),disabled:Ui(!0),checked:function(Ne){return k(Ne,"input")&&!!Ne.checked||k(Ne,"option")&&!!Ne.selected},selected:function(Ne){return Ne.parentNode&&Ne.parentNode.selectedIndex,Ne.selected===!0},empty:function(Ne){for(Ne=Ne.firstChild;Ne;Ne=Ne.nextSibling)if(Ne.nodeType<6)return!1;return!0},parent:function(Ne){return!j.pseudos.empty(Ne)},header:function(Ne){return hn.test(Ne.nodeName)},input:function(Ne){return sn.test(Ne.nodeName)},button:function(Ne){return k(Ne,"input")&&Ne.type==="button"||k(Ne,"button")},text:function(Ne){var qe;return k(Ne,"input")&&Ne.type==="text"&&((qe=Ne.getAttribute("type"))==null||qe.toLowerCase()==="text")},first:Ea(function(){return[0]}),last:Ea(function(Ne,qe){return[qe-1]}),eq:Ea(function(Ne,qe,Qe){return[Qe<0?Qe+qe:Qe]}),even:Ea(function(Ne,qe){for(var Qe=0;Qe<qe;Qe+=2)Ne.push(Qe);return Ne}),odd:Ea(function(Ne,qe){for(var Qe=1;Qe<qe;Qe+=2)Ne.push(Qe);return Ne}),lt:Ea(function(Ne,qe,Qe){var it;for(Qe<0?it=Qe+qe:Qe>qe?it=qe:it=Qe;--it>=0;)Ne.push(it);return Ne}),gt:Ea(function(Ne,qe,Qe){for(var it=Qe<0?Qe+qe:Qe;++it<qe;)Ne.push(it);return Ne})}},j.pseudos.nth=j.pseudos.eq;for(N in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})j.pseudos[N]=Zu(N);for(N in{submit:!0,reset:!0})j.pseudos[N]=Zs(N);function Qs(){}Qs.prototype=j.filters=j.pseudos,j.setFilters=new Qs;function ki(Ne,qe){var Qe,it,lt,It,Vt,er,Ft,Tr=$r[Ne+" "];if(Tr)return qe?0:Tr.slice(0);for(Vt=Ne,er=[],Ft=j.preFilter;Vt;){(!Qe||(it=gt.exec(Vt)))&&(it&&(Vt=Vt.slice(it[0].length)||Vt),er.push(lt=[])),Qe=!1,(it=jt.exec(Vt))&&(Qe=it.shift(),lt.push({value:Qe,type:it[0].replace(x," ")}),Vt=Vt.slice(Qe.length));for(It in j.filter)(it=Mr[It].exec(Vt))&&(!Ft[It]||(it=Ft[It](it)))&&(Qe=it.shift(),lt.push({value:Qe,type:It,matches:it}),Vt=Vt.slice(Qe.length));if(!Qe)break}return qe?Vt.length:Vt?en.error(Ne):$r(Ne,er).slice(0)}function Js(Ne){for(var qe=0,Qe=Ne.length,it="";qe<Qe;qe++)it+=Ne[qe].value;return it}function Go(Ne,qe,Qe){var it=qe.dir,lt=qe.next,It=lt||it,Vt=Qe&&It==="parentNode",er=Ct++;return qe.first?function(Ft,Tr,dr){for(;Ft=Ft[it];)if(Ft.nodeType===1||Vt)return Ne(Ft,Tr,dr);return!1}:function(Ft,Tr,dr){var wr,Or,lr=[rt,er];if(dr){for(;Ft=Ft[it];)if((Ft.nodeType===1||Vt)&&Ne(Ft,Tr,dr))return!0}else for(;Ft=Ft[it];)if(Ft.nodeType===1||Vt)if(Or=Ft[ht]||(Ft[ht]={}),lt&&k(Ft,lt))Ft=Ft[it]||Ft;else{if((wr=Or[It])&&wr[0]===rt&&wr[1]===er)return lr[2]=wr[2];if(Or[It]=lr,lr[2]=Ne(Ft,Tr,dr))return!0}return!1}}function eu(Ne){return Ne.length>1?function(qe,Qe,it){for(var lt=Ne.length;lt--;)if(!Ne[lt](qe,Qe,it))return!1;return!0}:Ne[0]}function Ba(Ne,qe,Qe){for(var it=0,lt=qe.length;it<lt;it++)en(Ne,qe[it],Qe);return Qe}function $o(Ne,qe,Qe,it,lt){for(var It,Vt=[],er=0,Ft=Ne.length,Tr=qe!=null;er<Ft;er++)(It=Ne[er])&&(!Qe||Qe(It,it,lt))&&(Vt.push(It),Tr&&qe.push(er));return Vt}function Qu(Ne,qe,Qe,it,lt,It){return it&&!it[ht]&&(it=Qu(it)),lt&&!lt[ht]&&(lt=Qu(lt,It)),Di(function(Vt,er,Ft,Tr){var dr,wr,Or,lr,un=[],Pn=[],Bn=er.length,Ur=Vt||Ba(qe||"*",Ft.nodeType?[Ft]:Ft,[]),Wr=Ne&&(Vt||!qe)?$o(Ur,un,Ne,Ft,Tr):Ur;if(Qe?(lr=lt||(Vt?Ne:Bn||it)?[]:er,Qe(Wr,lr,Ft,Tr)):lr=Wr,it)for(dr=$o(lr,Pn),it(dr,[],Ft,Tr),wr=dr.length;wr--;)(Or=dr[wr])&&(lr[Pn[wr]]=!(Wr[Pn[wr]]=Or));if(Vt){if(lt||Ne){if(lt){for(dr=[],wr=lr.length;wr--;)(Or=lr[wr])&&dr.push(Wr[wr]=Or);lt(null,lr=[],dr,Tr)}for(wr=lr.length;wr--;)(Or=lr[wr])&&(dr=lt?u.call(Vt,Or):un[wr])>-1&&(Vt[dr]=!(er[dr]=Or))}}else lr=$o(lr===er?lr.splice(Bn,lr.length):lr),lt?lt(null,er,lr,Tr):pe.apply(er,lr)})}function Ju(Ne){for(var qe,Qe,it,lt=Ne.length,It=j.relative[Ne[0].type],Vt=It||j.relative[" "],er=It?1:0,Ft=Go(function(wr){return wr===qe},Vt,!0),Tr=Go(function(wr){return u.call(qe,wr)>-1},Vt,!0),dr=[function(wr,Or,lr){var un=!It&&(lr||Or!=ee)||((qe=Or).nodeType?Ft(wr,Or,lr):Tr(wr,Or,lr));return qe=null,un}];er<lt;er++)if(Qe=j.relative[Ne[er].type])dr=[Go(eu(dr),Qe)];else{if(Qe=j.filter[Ne[er].type].apply(null,Ne[er].matches),Qe[ht]){for(it=++er;it<lt&&!j.relative[Ne[it].type];it++);return Qu(er>1&&eu(dr),er>1&&Js(Ne.slice(0,er-1).concat({value:Ne[er-2].type===" "?"*":""})).replace(x,"$1"),Qe,er<it&&Ju(Ne.slice(er,it)),it<lt&&Ju(Ne=Ne.slice(it)),it<lt&&Js(Ne))}dr.push(Qe)}return eu(dr)}function Uo(Ne,qe){var Qe=qe.length>0,it=Ne.length>0,lt=function(It,Vt,er,Ft,Tr){var dr,wr,Or,lr=0,un="0",Pn=It&&[],Bn=[],Ur=ee,Wr=It||it&&j.find.TAG("*",Tr),En=rt+=Ur==null?1:Math.random()||.1,Qr=Wr.length;for(Tr&&(ee=Vt==xe||Vt||Tr);un!==Qr&&(dr=Wr[un])!=null;un++){if(it&&dr){for(wr=0,!Vt&&dr.ownerDocument!=xe&&(ha(dr),er=!Oe);Or=Ne[wr++];)if(Or(dr,Vt||xe,er)){pe.call(Ft,dr);break}Tr&&(rt=En)}Qe&&((dr=!Or&&dr)&&lr--,It&&Pn.push(dr))}if(lr+=un,Qe&&un!==lr){for(wr=0;Or=qe[wr++];)Or(Pn,Bn,Vt,er);if(It){if(lr>0)for(;un--;)Pn[un]||Bn[un]||(Bn[un]=M.call(Ft));Bn=$o(Bn)}pe.apply(Ft,Bn),Tr&&!It&&Bn.length>0&&lr+qe.length>1&&_.uniqueSort(Ft)}return Tr&&(rt=En,ee=Ur),Pn};return Qe?Di(lt):lt}function Ji(Ne,qe){var Qe,it=[],lt=[],It=Er[Ne+" "];if(!It){for(qe||(qe=ki(Ne)),Qe=qe.length;Qe--;)It=Ju(qe[Qe]),It[ht]?it.push(It):lt.push(It);It=Er(Ne,Uo(lt,it)),It.selector=Ne}return It}function Ca(Ne,qe,Qe,it){var lt,It,Vt,er,Ft,Tr=typeof Ne=="function"&&Ne,dr=!it&&ki(Ne=Tr.selector||Ne);if(Qe=Qe||[],dr.length===1){if(It=dr[0]=dr[0].slice(0),It.length>2&&(Vt=It[0]).type==="ID"&&qe.nodeType===9&&Oe&&j.relative[It[1].type]){if(qe=(j.find.ID(Vt.matches[0].replace(Sn,pi),qe)||[])[0],qe)Tr&&(qe=qe.parentNode);else return Qe;Ne=Ne.slice(It.shift().value.length)}for(lt=Mr.needsContext.test(Ne)?0:It.length;lt--&&(Vt=It[lt],!j.relative[er=Vt.type]);)if((Ft=j.find[er])&&(it=Ft(Vt.matches[0].replace(Sn,pi),wi.test(It[0].type)&&qo(qe.parentNode)||qe))){if(It.splice(lt,1),Ne=it.length&&Js(It),!Ne)return pe.apply(Qe,it),Qe;break}}return(Tr||Ji(Ne,dr))(it,qe,!Oe,Qe,!qe||wi.test(Ne)&&qo(qe.parentNode)||qe),Qe}p.sortStable=ht.split("").sort(Y).join("")===ht,ha(),p.sortDetached=Ka(function(Ne){return Ne.compareDocumentPosition(xe.createElement("fieldset"))&1}),_.find=en,_.expr[":"]=_.expr.pseudos,_.unique=_.uniqueSort,en.compile=Ji,en.select=Ca,en.setDocument=ha,en.escape=_.escapeSelector,en.getText=_.text,en.isXML=_.isXMLDoc,en.selectors=_.expr,en.support=_.support,en.uniqueSort=_.uniqueSort})();var V=function(N,j,ee){for(var ae=[],de=ee!==void 0;(N=N[j])&&N.nodeType!==9;)if(N.nodeType===1){if(de&&_(N).is(ee))break;ae.push(N)}return ae},I=function(N,j){for(var ee=[];N;N=N.nextSibling)N.nodeType===1&&N!==j&&ee.push(N);return ee},z=_.expr.match.needsContext,P=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function q(N,j,ee){return g(j)?_.grep(N,function(ae,de){return!!j.call(ae,de,ae)!==ee}):j.nodeType?_.grep(N,function(ae){return ae===j!==ee}):typeof j!="string"?_.grep(N,function(ae){return u.call(j,ae)>-1!==ee}):_.filter(j,N,ee)}_.filter=function(N,j,ee){var ae=j[0];return ee&&(N=":not("+N+")"),j.length===1&&ae.nodeType===1?_.find.matchesSelector(ae,N)?[ae]:[]:_.find.matches(N,_.grep(j,function(de){return de.nodeType===1}))},_.fn.extend({find:function(N){var j,ee,ae=this.length,de=this;if(typeof N!="string")return this.pushStack(_(N).filter(function(){for(j=0;j<ae;j++)if(_.contains(de[j],this))return!0}));for(ee=this.pushStack([]),j=0;j<ae;j++)_.find(N,de[j],ee);return ae>1?_.uniqueSort(ee):ee},filter:function(N){return this.pushStack(q(this,N||[],!1))},not:function(N){return this.pushStack(q(this,N||[],!0))},is:function(N){return!!q(this,typeof N=="string"&&z.test(N)?_(N):N||[],!1).length}});var F,U=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,W=_.fn.init=function(N,j,ee){var ae,de;if(!N)return this;if(ee=ee||F,typeof N=="string")if(N[0]==="<"&&N[N.length-1]===">"&&N.length>=3?ae=[null,N,null]:ae=U.exec(N),ae&&(ae[1]||!j))if(ae[1]){if(j=j instanceof _?j[0]:j,_.merge(this,_.parseHTML(ae[1],j&&j.nodeType?j.ownerDocument||j:v,!0)),P.test(ae[1])&&_.isPlainObject(j))for(ae in j)g(this[ae])?this[ae](j[ae]):this.attr(ae,j[ae]);return this}else return de=v.getElementById(ae[2]),de&&(this[0]=de,this.length=1),this;else return!j||j.jquery?(j||ee).find(N):this.constructor(j).find(N);else{if(N.nodeType)return this[0]=N,this.length=1,this;if(g(N))return ee.ready!==void 0?ee.ready(N):N(_)}return _.makeArray(N,this)};W.prototype=_.fn,F=_(v);var X=/^(?:parents|prev(?:Until|All))/,te={children:!0,contents:!0,next:!0,prev:!0};_.fn.extend({has:function(N){var j=_(N,this),ee=j.length;return this.filter(function(){for(var ae=0;ae<ee;ae++)if(_.contains(this,j[ae]))return!0})},closest:function(N,j){var ee,ae=0,de=this.length,pe=[],xe=typeof N!="string"&&_(N);if(!z.test(N)){for(;ae<de;ae++)for(ee=this[ae];ee&&ee!==j;ee=ee.parentNode)if(ee.nodeType<11&&(xe?xe.index(ee)>-1:ee.nodeType===1&&_.find.matchesSelector(ee,N))){pe.push(ee);break}}return this.pushStack(pe.length>1?_.uniqueSort(pe):pe)},index:function(N){return N?typeof N=="string"?u.call(_(N),this[0]):u.call(this,N.jquery?N[0]:N):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(N,j){return this.pushStack(_.uniqueSort(_.merge(this.get(),_(N,j))))},addBack:function(N){return this.add(N==null?this.prevObject:this.prevObject.filter(N))}});function ne(N,j){for(;(N=N[j])&&N.nodeType!==1;);return N}_.each({parent:function(N){var j=N.parentNode;return j&&j.nodeType!==11?j:null},parents:function(N){return V(N,"parentNode")},parentsUntil:function(N,j,ee){return V(N,"parentNode",ee)},next:function(N){return ne(N,"nextSibling")},prev:function(N){return ne(N,"previousSibling")},nextAll:function(N){return V(N,"nextSibling")},prevAll:function(N){return V(N,"previousSibling")},nextUntil:function(N,j,ee){return V(N,"nextSibling",ee)},prevUntil:function(N,j,ee){return V(N,"previousSibling",ee)},siblings:function(N){return I((N.parentNode||{}).firstChild,N)},children:function(N){return I(N.firstChild)},contents:function(N){return N.contentDocument!=null&&i(N.contentDocument)?N.contentDocument:(k(N,"template")&&(N=N.content||N),_.merge([],N.childNodes))}},function(N,j){_.fn[N]=function(ee,ae){var de=_.map(this,j,ee);return N.slice(-5)!=="Until"&&(ae=ee),ae&&typeof ae=="string"&&(de=_.filter(ae,de)),this.length>1&&(te[N]||_.uniqueSort(de),X.test(N)&&de.reverse()),this.pushStack(de)}});var he=/[^\x20\t\r\n\f]+/g;function ve(N){var j={};return _.each(N.match(he)||[],function(ee,ae){j[ae]=!0}),j}_.Callbacks=function(N){N=typeof N=="string"?ve(N):_.extend({},N);var j,ee,ae,de,pe=[],xe=[],Be=-1,Oe=function(){for(de=de||N.once,ae=j=!0;xe.length;Be=-1)for(ee=xe.shift();++Be<pe.length;)pe[Be].apply(ee[0],ee[1])===!1&&N.stopOnFalse&&(Be=pe.length,ee=!1);N.memory||(ee=!1),j=!1,de&&(ee?pe=[]:pe="")},He={add:function(){return pe&&(ee&&!j&&(Be=pe.length-1,xe.push(ee)),function ot(ht){_.each(ht,function(rt,Ct){g(Ct)?(!N.unique||!He.has(Ct))&&pe.push(Ct):Ct&&Ct.length&&w(Ct)!=="string"&&ot(Ct)})}(arguments),ee&&!j&&Oe()),this},remove:function(){return _.each(arguments,function(ot,ht){for(var rt;(rt=_.inArray(ht,pe,rt))>-1;)pe.splice(rt,1),rt<=Be&&Be--}),this},has:function(ot){return ot?_.inArray(ot,pe)>-1:pe.length>0},empty:function(){return pe&&(pe=[]),this},disable:function(){return de=xe=[],pe=ee="",this},disabled:function(){return!pe},lock:function(){return de=xe=[],!ee&&!j&&(pe=ee=""),this},locked:function(){return!!de},fireWith:function(ot,ht){return de||(ht=ht||[],ht=[ot,ht.slice?ht.slice():ht],xe.push(ht),j||Oe()),this},fire:function(){return He.fireWith(this,arguments),this},fired:function(){return!!ae}};return He};function Ce(N){return N}function Le(N){throw N}function K(N,j,ee,ae){var de;try{N&&g(de=N.promise)?de.call(N).done(j).fail(ee):N&&g(de=N.then)?de.call(N,j,ee):j.apply(void 0,[N].slice(ae))}catch(pe){ee.apply(void 0,[pe])}}_.extend({Deferred:function(N){var j=[["notify","progress",_.Callbacks("memory"),_.Callbacks("memory"),2],["resolve","done",_.Callbacks("once memory"),_.Callbacks("once memory"),0,"resolved"],["reject","fail",_.Callbacks("once memory"),_.Callbacks("once memory"),1,"rejected"]],ee="pending",ae={state:function(){return ee},always:function(){return de.done(arguments).fail(arguments),this},catch:function(pe){return ae.then(null,pe)},pipe:function(){var pe=arguments;return _.Deferred(function(xe){_.each(j,function(Be,Oe){var He=g(pe[Oe[4]])&&pe[Oe[4]];de[Oe[1]](function(){var ot=He&&He.apply(this,arguments);ot&&g(ot.promise)?ot.promise().progress(xe.notify).done(xe.resolve).fail(xe.reject):xe[Oe[0]+"With"](this,He?[ot]:arguments)})}),pe=null}).promise()},then:function(pe,xe,Be){var Oe=0;function He(ot,ht,rt,Ct){return function(){var mr=this,$r=arguments,Er=function(){var Y,ye;if(!(ot<Oe)){if(Y=rt.apply(mr,$r),Y===ht.promise())throw new TypeError("Thenable self-resolution");ye=Y&&(typeof Y=="object"||typeof Y=="function")&&Y.then,g(ye)?Ct?ye.call(Y,He(Oe,ht,Ce,Ct),He(Oe,ht,Le,Ct)):(Oe++,ye.call(Y,He(Oe,ht,Ce,Ct),He(Oe,ht,Le,Ct),He(Oe,ht,Ce,ht.notifyWith))):(rt!==Ce&&(mr=void 0,$r=[Y]),(Ct||ht.resolveWith)(mr,$r))}},Qn=Ct?Er:function(){try{Er()}catch(Y){_.Deferred.exceptionHook&&_.Deferred.exceptionHook(Y,Qn.error),ot+1>=Oe&&(rt!==Le&&(mr=void 0,$r=[Y]),ht.rejectWith(mr,$r))}};ot?Qn():(_.Deferred.getErrorHook?Qn.error=_.Deferred.getErrorHook():_.Deferred.getStackHook&&(Qn.error=_.Deferred.getStackHook()),e.setTimeout(Qn))}}return _.Deferred(function(ot){j[0][3].add(He(0,ot,g(Be)?Be:Ce,ot.notifyWith)),j[1][3].add(He(0,ot,g(pe)?pe:Ce)),j[2][3].add(He(0,ot,g(xe)?xe:Le))}).promise()},promise:function(pe){return pe!=null?_.extend(pe,ae):ae}},de={};return _.each(j,function(pe,xe){var Be=xe[2],Oe=xe[5];ae[xe[1]]=Be.add,Oe&&Be.add(function(){ee=Oe},j[3-pe][2].disable,j[3-pe][3].disable,j[0][2].lock,j[0][3].lock),Be.add(xe[3].fire),de[xe[0]]=function(){return de[xe[0]+"With"](this===de?void 0:this,arguments),this},de[xe[0]+"With"]=Be.fireWith}),ae.promise(de),N&&N.call(de,de),de},when:function(N){var j=arguments.length,ee=j,ae=Array(ee),de=a.call(arguments),pe=_.Deferred(),xe=function(Be){return function(Oe){ae[Be]=this,de[Be]=arguments.length>1?a.call(arguments):Oe,--j||pe.resolveWith(ae,de)}};if(j<=1&&(K(N,pe.done(xe(ee)).resolve,pe.reject,!j),pe.state()==="pending"||g(de[ee]&&de[ee].then)))return pe.then();for(;ee--;)K(de[ee],xe(ee),pe.reject);return pe.promise()}});var le=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;_.Deferred.exceptionHook=function(N,j){e.console&&e.console.warn&&N&&le.test(N.name)&&e.console.warn("jQuery.Deferred exception: "+N.message,N.stack,j)},_.readyException=function(N){e.setTimeout(function(){throw N})};var Z=_.Deferred();_.fn.ready=function(N){return Z.then(N).catch(function(j){_.readyException(j)}),this},_.extend({isReady:!1,readyWait:1,ready:function(N){(N===!0?--_.readyWait:_.isReady)||(_.isReady=!0,!(N!==!0&&--_.readyWait>0)&&Z.resolveWith(v,[_]))}}),_.ready.then=Z.then;function ie(){v.removeEventListener("DOMContentLoaded",ie),e.removeEventListener("load",ie),_.ready()}v.readyState==="complete"||v.readyState!=="loading"&&!v.documentElement.doScroll?e.setTimeout(_.ready):(v.addEventListener("DOMContentLoaded",ie),e.addEventListener("load",ie));var re=function(N,j,ee,ae,de,pe,xe){var Be=0,Oe=N.length,He=ee==null;if(w(ee)==="object"){de=!0;for(Be in ee)re(N,j,Be,ee[Be],!0,pe,xe)}else if(ae!==void 0&&(de=!0,g(ae)||(xe=!0),He&&(xe?(j.call(N,ae),j=null):(He=j,j=function(ot,ht,rt){return He.call(_(ot),rt)})),j))for(;Be<Oe;Be++)j(N[Be],ee,xe?ae:ae.call(N[Be],Be,j(N[Be],ee)));return de?N:He?j.call(N):Oe?j(N[0],ee):pe},J=/^-ms-/,fe=/-([a-z])/g;function we(N,j){return j.toUpperCase()}function ge(N){return N.replace(J,"ms-").replace(fe,we)}var me=function(N){return N.nodeType===1||N.nodeType===9||!+N.nodeType};function ue(){this.expando=_.expando+ue.uid++}ue.uid=1,ue.prototype={cache:function(N){var j=N[this.expando];return j||(j={},me(N)&&(N.nodeType?N[this.expando]=j:Object.defineProperty(N,this.expando,{value:j,configurable:!0}))),j},set:function(N,j,ee){var ae,de=this.cache(N);if(typeof j=="string")de[ge(j)]=ee;else for(ae in j)de[ge(ae)]=j[ae];return de},get:function(N,j){return j===void 0?this.cache(N):N[this.expando]&&N[this.expando][ge(j)]},access:function(N,j,ee){return j===void 0||j&&typeof j=="string"&&ee===void 0?this.get(N,j):(this.set(N,j,ee),ee!==void 0?ee:j)},remove:function(N,j){var ee,ae=N[this.expando];if(ae!==void 0){if(j!==void 0)for(Array.isArray(j)?j=j.map(ge):(j=ge(j),j=j in ae?[j]:j.match(he)||[]),ee=j.length;ee--;)delete ae[j[ee]];(j===void 0||_.isEmptyObject(ae))&&(N.nodeType?N[this.expando]=void 0:delete N[this.expando])}},hasData:function(N){var j=N[this.expando];return j!==void 0&&!_.isEmptyObject(j)}};var ce=new ue,oe=new ue,Ae=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Te=/[A-Z]/g;function Ge(N){return N==="true"?!0:N==="false"?!1:N==="null"?null:N===+N+""?+N:Ae.test(N)?JSON.parse(N):N}function Fe(N,j,ee){var ae;if(ee===void 0&&N.nodeType===1)if(ae="data-"+j.replace(Te,"-$&").toLowerCase(),ee=N.getAttribute(ae),typeof ee=="string"){try{ee=Ge(ee)}catch{}oe.set(N,j,ee)}else ee=void 0;return ee}_.extend({hasData:function(N){return oe.hasData(N)||ce.hasData(N)},data:function(N,j,ee){return oe.access(N,j,ee)},removeData:function(N,j){oe.remove(N,j)},_data:function(N,j,ee){return ce.access(N,j,ee)},_removeData:function(N,j){ce.remove(N,j)}}),_.fn.extend({data:function(N,j){var ee,ae,de,pe=this[0],xe=pe&&pe.attributes;if(N===void 0){if(this.length&&(de=oe.get(pe),pe.nodeType===1&&!ce.get(pe,"hasDataAttrs"))){for(ee=xe.length;ee--;)xe[ee]&&(ae=xe[ee].name,ae.indexOf("data-")===0&&(ae=ge(ae.slice(5)),Fe(pe,ae,de[ae])));ce.set(pe,"hasDataAttrs",!0)}return de}return typeof N=="object"?this.each(function(){oe.set(this,N)}):re(this,function(Be){var Oe;if(pe&&Be===void 0)return Oe=oe.get(pe,N),Oe!==void 0||(Oe=Fe(pe,N),Oe!==void 0)?Oe:void 0;this.each(function(){oe.set(this,N,Be)})},null,j,arguments.length>1,null,!0)},removeData:function(N){return this.each(function(){oe.remove(this,N)})}}),_.extend({queue:function(N,j,ee){var ae;if(N)return j=(j||"fx")+"queue",ae=ce.get(N,j),ee&&(!ae||Array.isArray(ee)?ae=ce.access(N,j,_.makeArray(ee)):ae.push(ee)),ae||[]},dequeue:function(N,j){j=j||"fx";var ee=_.queue(N,j),ae=ee.length,de=ee.shift(),pe=_._queueHooks(N,j),xe=function(){_.dequeue(N,j)};de==="inprogress"&&(de=ee.shift(),ae--),de&&(j==="fx"&&ee.unshift("inprogress"),delete pe.stop,de.call(N,xe,pe)),!ae&&pe&&pe.empty.fire()},_queueHooks:function(N,j){var ee=j+"queueHooks";return ce.get(N,ee)||ce.access(N,ee,{empty:_.Callbacks("once memory").add(function(){ce.remove(N,[j+"queue",ee])})})}}),_.fn.extend({queue:function(N,j){var ee=2;return typeof N!="string"&&(j=N,N="fx",ee--),arguments.length<ee?_.queue(this[0],N):j===void 0?this:this.each(function(){var ae=_.queue(this,N,j);_._queueHooks(this,N),N==="fx"&&ae[0]!=="inprogress"&&_.dequeue(this,N)})},dequeue:function(N){return this.each(function(){_.dequeue(this,N)})},clearQueue:function(N){return this.queue(N||"fx",[])},promise:function(N,j){var ee,ae=1,de=_.Deferred(),pe=this,xe=this.length,Be=function(){--ae||de.resolveWith(pe,[pe])};for(typeof N!="string"&&(j=N,N=void 0),N=N||"fx";xe--;)ee=ce.get(pe[xe],N+"queueHooks"),ee&&ee.empty&&(ae++,ee.empty.add(Be));return Be(),de.promise(j)}});var Re=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ze=new RegExp("^(?:([+-])=|)("+Re+")([a-z%]*)$","i"),Ie=["Top","Right","Bottom","Left"],Ve=v.documentElement,We=function(N){return _.contains(N.ownerDocument,N)},Ze={composed:!0};Ve.getRootNode&&(We=function(N){return _.contains(N.ownerDocument,N)||N.getRootNode(Ze)===N.ownerDocument});var at=function(N,j){return N=j||N,N.style.display==="none"||N.style.display===""&&We(N)&&_.css(N,"display")==="none"};function ft(N,j,ee,ae){var de,pe,xe=20,Be=ae?function(){return ae.cur()}:function(){return _.css(N,j,"")},Oe=Be(),He=ee&&ee[3]||(_.cssNumber[j]?"":"px"),ot=N.nodeType&&(_.cssNumber[j]||He!=="px"&&+Oe)&&ze.exec(_.css(N,j));if(ot&&ot[3]!==He){for(Oe=Oe/2,He=He||ot[3],ot=+Oe||1;xe--;)_.style(N,j,ot+He),(1-pe)*(1-(pe=Be()/Oe||.5))<=0&&(xe=0),ot=ot/pe;ot=ot*2,_.style(N,j,ot+He),ee=ee||[]}return ee&&(ot=+ot||+Oe||0,de=ee[1]?ot+(ee[1]+1)*ee[2]:+ee[2],ae&&(ae.unit=He,ae.start=ot,ae.end=de)),de}var wt={};function dt(N){var j,ee=N.ownerDocument,ae=N.nodeName,de=wt[ae];return de||(j=ee.body.appendChild(ee.createElement(ae)),de=_.css(j,"display"),j.parentNode.removeChild(j),de==="none"&&(de="block"),wt[ae]=de,de)}function vt(N,j){for(var ee,ae,de=[],pe=0,xe=N.length;pe<xe;pe++)ae=N[pe],ae.style&&(ee=ae.style.display,j?(ee==="none"&&(de[pe]=ce.get(ae,"display")||null,de[pe]||(ae.style.display="")),ae.style.display===""&&at(ae)&&(de[pe]=dt(ae))):ee!=="none"&&(de[pe]="none",ce.set(ae,"display",ee)));for(pe=0;pe<xe;pe++)de[pe]!=null&&(N[pe].style.display=de[pe]);return N}_.fn.extend({show:function(){return vt(this,!0)},hide:function(){return vt(this)},toggle:function(N){return typeof N=="boolean"?N?this.show():this.hide():this.each(function(){at(this)?_(this).show():_(this).hide()})}});var Et=/^(?:checkbox|radio)$/i,Mt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,mt=/^$|^module$|\/(?:java|ecma)script/i;(function(){var N=v.createDocumentFragment(),j=N.appendChild(v.createElement("div")),ee=v.createElement("input");ee.setAttribute("type","radio"),ee.setAttribute("checked","checked"),ee.setAttribute("name","t"),j.appendChild(ee),p.checkClone=j.cloneNode(!0).cloneNode(!0).lastChild.checked,j.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!j.cloneNode(!0).lastChild.defaultValue,j.innerHTML="<option></option>",p.option=!!j.lastChild})();var Dt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Dt.tbody=Dt.tfoot=Dt.colgroup=Dt.caption=Dt.thead,Dt.th=Dt.td,p.option||(Dt.optgroup=Dt.option=[1,"<select multiple='multiple'>","</select>"]);function Lt(N,j){var ee;return typeof N.getElementsByTagName<"u"?ee=N.getElementsByTagName(j||"*"):typeof N.querySelectorAll<"u"?ee=N.querySelectorAll(j||"*"):ee=[],j===void 0||j&&k(N,j)?_.merge([N],ee):ee}function Tt(N,j){for(var ee=0,ae=N.length;ee<ae;ee++)ce.set(N[ee],"globalEval",!j||ce.get(j[ee],"globalEval"))}var nr=/<|&#?\w+;/;function $t(N,j,ee,ae,de){for(var pe,xe,Be,Oe,He,ot,ht=j.createDocumentFragment(),rt=[],Ct=0,mr=N.length;Ct<mr;Ct++)if(pe=N[Ct],pe||pe===0)if(w(pe)==="object")_.merge(rt,pe.nodeType?[pe]:pe);else if(!nr.test(pe))rt.push(j.createTextNode(pe));else{for(xe=xe||ht.appendChild(j.createElement("div")),Be=(Mt.exec(pe)||["",""])[1].toLowerCase(),Oe=Dt[Be]||Dt._default,xe.innerHTML=Oe[1]+_.htmlPrefilter(pe)+Oe[2],ot=Oe[0];ot--;)xe=xe.lastChild;_.merge(rt,xe.childNodes),xe=ht.firstChild,xe.textContent=""}for(ht.textContent="",Ct=0;pe=rt[Ct++];){if(ae&&_.inArray(pe,ae)>-1){de&&de.push(pe);continue}if(He=We(pe),xe=Lt(ht.appendChild(pe),"script"),He&&Tt(xe),ee)for(ot=0;pe=xe[ot++];)mt.test(pe.type||"")&&ee.push(pe)}return ht}var pt=/^([^.]*)(?:\.(.+)|)/;function hr(){return!0}function Rt(){return!1}function Bt(N,j,ee,ae,de,pe){var xe,Be;if(typeof j=="object"){typeof ee!="string"&&(ae=ae||ee,ee=void 0);for(Be in j)Bt(N,Be,ee,ae,j[Be],pe);return N}if(ae==null&&de==null?(de=ee,ae=ee=void 0):de==null&&(typeof ee=="string"?(de=ae,ae=void 0):(de=ae,ae=ee,ee=void 0)),de===!1)de=Rt;else if(!de)return N;return pe===1&&(xe=de,de=function(Oe){return _().off(Oe),xe.apply(this,arguments)},de.guid=xe.guid||(xe.guid=_.guid++)),N.each(function(){_.event.add(this,j,de,ae,ee)})}_.event={global:{},add:function(N,j,ee,ae,de){var pe,xe,Be,Oe,He,ot,ht,rt,Ct,mr,$r,Er=ce.get(N);if(me(N))for(ee.handler&&(pe=ee,ee=pe.handler,de=pe.selector),de&&_.find.matchesSelector(Ve,de),ee.guid||(ee.guid=_.guid++),(Oe=Er.events)||(Oe=Er.events=Object.create(null)),(xe=Er.handle)||(xe=Er.handle=function(Qn){return typeof _<"u"&&_.event.triggered!==Qn.type?_.event.dispatch.apply(N,arguments):void 0}),j=(j||"").match(he)||[""],He=j.length;He--;)Be=pt.exec(j[He])||[],Ct=$r=Be[1],mr=(Be[2]||"").split(".").sort(),Ct&&(ht=_.event.special[Ct]||{},Ct=(de?ht.delegateType:ht.bindType)||Ct,ht=_.event.special[Ct]||{},ot=_.extend({type:Ct,origType:$r,data:ae,handler:ee,guid:ee.guid,selector:de,needsContext:de&&_.expr.match.needsContext.test(de),namespace:mr.join(".")},pe),(rt=Oe[Ct])||(rt=Oe[Ct]=[],rt.delegateCount=0,(!ht.setup||ht.setup.call(N,ae,mr,xe)===!1)&&N.addEventListener&&N.addEventListener(Ct,xe)),ht.add&&(ht.add.call(N,ot),ot.handler.guid||(ot.handler.guid=ee.guid)),de?rt.splice(rt.delegateCount++,0,ot):rt.push(ot),_.event.global[Ct]=!0)},remove:function(N,j,ee,ae,de){var pe,xe,Be,Oe,He,ot,ht,rt,Ct,mr,$r,Er=ce.hasData(N)&&ce.get(N);if(!(!Er||!(Oe=Er.events))){for(j=(j||"").match(he)||[""],He=j.length;He--;){if(Be=pt.exec(j[He])||[],Ct=$r=Be[1],mr=(Be[2]||"").split(".").sort(),!Ct){for(Ct in Oe)_.event.remove(N,Ct+j[He],ee,ae,!0);continue}for(ht=_.event.special[Ct]||{},Ct=(ae?ht.delegateType:ht.bindType)||Ct,rt=Oe[Ct]||[],Be=Be[2]&&new RegExp("(^|\\.)"+mr.join("\\.(?:.*\\.|)")+"(\\.|$)"),xe=pe=rt.length;pe--;)ot=rt[pe],(de||$r===ot.origType)&&(!ee||ee.guid===ot.guid)&&(!Be||Be.test(ot.namespace))&&(!ae||ae===ot.selector||ae==="**"&&ot.selector)&&(rt.splice(pe,1),ot.selector&&rt.delegateCount--,ht.remove&&ht.remove.call(N,ot));xe&&!rt.length&&((!ht.teardown||ht.teardown.call(N,mr,Er.handle)===!1)&&_.removeEvent(N,Ct,Er.handle),delete Oe[Ct])}_.isEmptyObject(Oe)&&ce.remove(N,"handle events")}},dispatch:function(N){var j,ee,ae,de,pe,xe,Be=new Array(arguments.length),Oe=_.event.fix(N),He=(ce.get(this,"events")||Object.create(null))[Oe.type]||[],ot=_.event.special[Oe.type]||{};for(Be[0]=Oe,j=1;j<arguments.length;j++)Be[j]=arguments[j];if(Oe.delegateTarget=this,!(ot.preDispatch&&ot.preDispatch.call(this,Oe)===!1)){for(xe=_.event.handlers.call(this,Oe,He),j=0;(de=xe[j++])&&!Oe.isPropagationStopped();)for(Oe.currentTarget=de.elem,ee=0;(pe=de.handlers[ee++])&&!Oe.isImmediatePropagationStopped();)(!Oe.rnamespace||pe.namespace===!1||Oe.rnamespace.test(pe.namespace))&&(Oe.handleObj=pe,Oe.data=pe.data,ae=((_.event.special[pe.origType]||{}).handle||pe.handler).apply(de.elem,Be),ae!==void 0&&(Oe.result=ae)===!1&&(Oe.preventDefault(),Oe.stopPropagation()));return ot.postDispatch&&ot.postDispatch.call(this,Oe),Oe.result}},handlers:function(N,j){var ee,ae,de,pe,xe,Be=[],Oe=j.delegateCount,He=N.target;if(Oe&&He.nodeType&&!(N.type==="click"&&N.button>=1)){for(;He!==this;He=He.parentNode||this)if(He.nodeType===1&&!(N.type==="click"&&He.disabled===!0)){for(pe=[],xe={},ee=0;ee<Oe;ee++)ae=j[ee],de=ae.selector+" ",xe[de]===void 0&&(xe[de]=ae.needsContext?_(de,this).index(He)>-1:_.find(de,this,null,[He]).length),xe[de]&&pe.push(ae);pe.length&&Be.push({elem:He,handlers:pe})}}return He=this,Oe<j.length&&Be.push({elem:He,handlers:j.slice(Oe)}),Be},addProp:function(N,j){Object.defineProperty(_.Event.prototype,N,{enumerable:!0,configurable:!0,get:g(j)?function(){if(this.originalEvent)return j(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[N]},set:function(ee){Object.defineProperty(this,N,{enumerable:!0,configurable:!0,writable:!0,value:ee})}})},fix:function(N){return N[_.expando]?N:new _.Event(N)},special:{load:{noBubble:!0},click:{setup:function(N){var j=this||N;return Et.test(j.type)&&j.click&&k(j,"input")&&ur(j,"click",!0),!1},trigger:function(N){var j=this||N;return Et.test(j.type)&&j.click&&k(j,"input")&&ur(j,"click"),!0},_default:function(N){var j=N.target;return Et.test(j.type)&&j.click&&k(j,"input")&&ce.get(j,"click")||k(j,"a")}},beforeunload:{postDispatch:function(N){N.result!==void 0&&N.originalEvent&&(N.originalEvent.returnValue=N.result)}}}};function ur(N,j,ee){if(!ee){ce.get(N,j)===void 0&&_.event.add(N,j,hr);return}ce.set(N,j,!1),_.event.add(N,j,{namespace:!1,handler:function(ae){var de,pe=ce.get(this,j);if(ae.isTrigger&1&&this[j]){if(pe)(_.event.special[j]||{}).delegateType&&ae.stopPropagation();else if(pe=a.call(arguments),ce.set(this,j,pe),this[j](),de=ce.get(this,j),ce.set(this,j,!1),pe!==de)return ae.stopImmediatePropagation(),ae.preventDefault(),de}else pe&&(ce.set(this,j,_.event.trigger(pe[0],pe.slice(1),this)),ae.stopPropagation(),ae.isImmediatePropagationStopped=hr)}})}_.removeEvent=function(N,j,ee){N.removeEventListener&&N.removeEventListener(j,ee)},_.Event=function(N,j){if(!(this instanceof _.Event))return new _.Event(N,j);N&&N.type?(this.originalEvent=N,this.type=N.type,this.isDefaultPrevented=N.defaultPrevented||N.defaultPrevented===void 0&&N.returnValue===!1?hr:Rt,this.target=N.target&&N.target.nodeType===3?N.target.parentNode:N.target,this.currentTarget=N.currentTarget,this.relatedTarget=N.relatedTarget):this.type=N,j&&_.extend(this,j),this.timeStamp=N&&N.timeStamp||Date.now(),this[_.expando]=!0},_.Event.prototype={constructor:_.Event,isDefaultPrevented:Rt,isPropagationStopped:Rt,isImmediatePropagationStopped:Rt,isSimulated:!1,preventDefault:function(){var N=this.originalEvent;this.isDefaultPrevented=hr,N&&!this.isSimulated&&N.preventDefault()},stopPropagation:function(){var N=this.originalEvent;this.isPropagationStopped=hr,N&&!this.isSimulated&&N.stopPropagation()},stopImmediatePropagation:function(){var N=this.originalEvent;this.isImmediatePropagationStopped=hr,N&&!this.isSimulated&&N.stopImmediatePropagation(),this.stopPropagation()}},_.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},_.event.addProp),_.each({focus:"focusin",blur:"focusout"},function(N,j){function ee(ae){if(v.documentMode){var de=ce.get(this,"handle"),pe=_.event.fix(ae);pe.type=ae.type==="focusin"?"focus":"blur",pe.isSimulated=!0,de(ae),pe.target===pe.currentTarget&&de(pe)}else _.event.simulate(j,ae.target,_.event.fix(ae))}_.event.special[N]={setup:function(){var ae;if(ur(this,N,!0),v.documentMode)ae=ce.get(this,j),ae||this.addEventListener(j,ee),ce.set(this,j,(ae||0)+1);else return!1},trigger:function(){return ur(this,N),!0},teardown:function(){var ae;if(v.documentMode)ae=ce.get(this,j)-1,ae?ce.set(this,j,ae):(this.removeEventListener(j,ee),ce.remove(this,j));else return!1},_default:function(ae){return ce.get(ae.target,N)},delegateType:j},_.event.special[j]={setup:function(){var ae=this.ownerDocument||this.document||this,de=v.documentMode?this:ae,pe=ce.get(de,j);pe||(v.documentMode?this.addEventListener(j,ee):ae.addEventListener(N,ee,!0)),ce.set(de,j,(pe||0)+1)},teardown:function(){var ae=this.ownerDocument||this.document||this,de=v.documentMode?this:ae,pe=ce.get(de,j)-1;pe?ce.set(de,j,pe):(v.documentMode?this.removeEventListener(j,ee):ae.removeEventListener(N,ee,!0),ce.remove(de,j))}}}),_.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(N,j){_.event.special[N]={delegateType:j,bindType:j,handle:function(ee){var ae,de=this,pe=ee.relatedTarget,xe=ee.handleObj;return(!pe||pe!==de&&!_.contains(de,pe))&&(ee.type=xe.origType,ae=xe.handler.apply(this,arguments),ee.type=j),ae}}}),_.fn.extend({on:function(N,j,ee,ae){return Bt(this,N,j,ee,ae)},one:function(N,j,ee,ae){return Bt(this,N,j,ee,ae,1)},off:function(N,j,ee){var ae,de;if(N&&N.preventDefault&&N.handleObj)return ae=N.handleObj,_(N.delegateTarget).off(ae.namespace?ae.origType+"."+ae.namespace:ae.origType,ae.selector,ae.handler),this;if(typeof N=="object"){for(de in N)this.off(de,j,N[de]);return this}return(j===!1||typeof j=="function")&&(ee=j,j=void 0),ee===!1&&(ee=Rt),this.each(function(){_.event.remove(this,N,ee,j)})}});var nt=/<script|<style|<link/i,Xe=/checked\s*(?:[^=]|=\s*.checked.)/i,ct=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function zt(N,j){return k(N,"table")&&k(j.nodeType!==11?j:j.firstChild,"tr")&&_(N).children("tbody")[0]||N}function rr(N){return N.type=(N.getAttribute("type")!==null)+"/"+N.type,N}function Zt(N){return(N.type||"").slice(0,5)==="true/"?N.type=N.type.slice(5):N.removeAttribute("type"),N}function br(N,j){var ee,ae,de,pe,xe,Be,Oe;if(j.nodeType===1){if(ce.hasData(N)&&(pe=ce.get(N),Oe=pe.events,Oe)){ce.remove(j,"handle events");for(de in Oe)for(ee=0,ae=Oe[de].length;ee<ae;ee++)_.event.add(j,de,Oe[de][ee])}oe.hasData(N)&&(xe=oe.access(N),Be=_.extend({},xe),oe.set(j,Be))}}function Gr(N,j){var ee=j.nodeName.toLowerCase();ee==="input"&&Et.test(N.type)?j.checked=N.checked:(ee==="input"||ee==="textarea")&&(j.defaultValue=N.defaultValue)}function Rr(N,j,ee,ae){j=o(j);var de,pe,xe,Be,Oe,He,ot=0,ht=N.length,rt=ht-1,Ct=j[0],mr=g(Ct);if(mr||ht>1&&typeof Ct=="string"&&!p.checkClone&&Xe.test(Ct))return N.each(function($r){var Er=N.eq($r);mr&&(j[0]=Ct.call(this,$r,Er.html())),Rr(Er,j,ee,ae)});if(ht&&(de=$t(j,N[0].ownerDocument,!1,N,ae),pe=de.firstChild,de.childNodes.length===1&&(de=pe),pe||ae)){for(xe=_.map(Lt(de,"script"),rr),Be=xe.length;ot<ht;ot++)Oe=de,ot!==rt&&(Oe=_.clone(Oe,!0,!0),Be&&_.merge(xe,Lt(Oe,"script"))),ee.call(N[ot],Oe,ot);if(Be)for(He=xe[xe.length-1].ownerDocument,_.map(xe,Zt),ot=0;ot<Be;ot++)Oe=xe[ot],mt.test(Oe.type||"")&&!ce.access(Oe,"globalEval")&&_.contains(He,Oe)&&(Oe.src&&(Oe.type||"").toLowerCase()!=="module"?_._evalUrl&&!Oe.noModule&&_._evalUrl(Oe.src,{nonce:Oe.nonce||Oe.getAttribute("nonce")},He):m(Oe.textContent.replace(ct,""),Oe,He))}return N}function Fr(N,j,ee){for(var ae,de=j?_.filter(j,N):N,pe=0;(ae=de[pe])!=null;pe++)!ee&&ae.nodeType===1&&_.cleanData(Lt(ae)),ae.parentNode&&(ee&&We(ae)&&Tt(Lt(ae,"script")),ae.parentNode.removeChild(ae));return N}_.extend({htmlPrefilter:function(N){return N},clone:function(N,j,ee){var ae,de,pe,xe,Be=N.cloneNode(!0),Oe=We(N);if(!p.noCloneChecked&&(N.nodeType===1||N.nodeType===11)&&!_.isXMLDoc(N))for(xe=Lt(Be),pe=Lt(N),ae=0,de=pe.length;ae<de;ae++)Gr(pe[ae],xe[ae]);if(j)if(ee)for(pe=pe||Lt(N),xe=xe||Lt(Be),ae=0,de=pe.length;ae<de;ae++)br(pe[ae],xe[ae]);else br(N,Be);return xe=Lt(Be,"script"),xe.length>0&&Tt(xe,!Oe&&Lt(N,"script")),Be},cleanData:function(N){for(var j,ee,ae,de=_.event.special,pe=0;(ee=N[pe])!==void 0;pe++)if(me(ee)){if(j=ee[ce.expando]){if(j.events)for(ae in j.events)de[ae]?_.event.remove(ee,ae):_.removeEvent(ee,ae,j.handle);ee[ce.expando]=void 0}ee[oe.expando]&&(ee[oe.expando]=void 0)}}}),_.fn.extend({detach:function(N){return Fr(this,N,!0)},remove:function(N){return Fr(this,N)},text:function(N){return re(this,function(j){return j===void 0?_.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=j)})},null,N,arguments.length)},append:function(){return Rr(this,arguments,function(N){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var j=zt(this,N);j.appendChild(N)}})},prepend:function(){return Rr(this,arguments,function(N){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var j=zt(this,N);j.insertBefore(N,j.firstChild)}})},before:function(){return Rr(this,arguments,function(N){this.parentNode&&this.parentNode.insertBefore(N,this)})},after:function(){return Rr(this,arguments,function(N){this.parentNode&&this.parentNode.insertBefore(N,this.nextSibling)})},empty:function(){for(var N,j=0;(N=this[j])!=null;j++)N.nodeType===1&&(_.cleanData(Lt(N,!1)),N.textContent="");return this},clone:function(N,j){return N=N??!1,j=j??N,this.map(function(){return _.clone(this,N,j)})},html:function(N){return re(this,function(j){var ee=this[0]||{},ae=0,de=this.length;if(j===void 0&&ee.nodeType===1)return ee.innerHTML;if(typeof j=="string"&&!nt.test(j)&&!Dt[(Mt.exec(j)||["",""])[1].toLowerCase()]){j=_.htmlPrefilter(j);try{for(;ae<de;ae++)ee=this[ae]||{},ee.nodeType===1&&(_.cleanData(Lt(ee,!1)),ee.innerHTML=j);ee=0}catch{}}ee&&this.empty().append(j)},null,N,arguments.length)},replaceWith:function(){var N=[];return Rr(this,arguments,function(j){var ee=this.parentNode;_.inArray(this,N)<0&&(_.cleanData(Lt(this)),ee&&ee.replaceChild(j,this))},N)}}),_.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(N,j){_.fn[N]=function(ee){for(var ae,de=[],pe=_(ee),xe=pe.length-1,Be=0;Be<=xe;Be++)ae=Be===xe?this:this.clone(!0),_(pe[Be])[j](ae),s.apply(de,ae.get());return this.pushStack(de)}});var gr=new RegExp("^("+Re+")(?!px)[a-z%]+$","i"),Zr=/^--/,gn=function(N){var j=N.ownerDocument.defaultView;return(!j||!j.opener)&&(j=e),j.getComputedStyle(N)},Hn=function(N,j,ee){var ae,de,pe={};for(de in j)pe[de]=N.style[de],N.style[de]=j[de];ae=ee.call(N);for(de in j)N.style[de]=pe[de];return ae},jn=new RegExp(Ie.join("|"),"i");(function(){function N(){if(He){Oe.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",He.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Ve.appendChild(Oe).appendChild(He);var ot=e.getComputedStyle(He);ee=ot.top!=="1%",Be=j(ot.marginLeft)===12,He.style.right="60%",pe=j(ot.right)===36,ae=j(ot.width)===36,He.style.position="absolute",de=j(He.offsetWidth/3)===12,Ve.removeChild(Oe),He=null}}function j(ot){return Math.round(parseFloat(ot))}var ee,ae,de,pe,xe,Be,Oe=v.createElement("div"),He=v.createElement("div");He.style&&(He.style.backgroundClip="content-box",He.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle=He.style.backgroundClip==="content-box",_.extend(p,{boxSizingReliable:function(){return N(),ae},pixelBoxStyles:function(){return N(),pe},pixelPosition:function(){return N(),ee},reliableMarginLeft:function(){return N(),Be},scrollboxSize:function(){return N(),de},reliableTrDimensions:function(){var ot,ht,rt,Ct;return xe==null&&(ot=v.createElement("table"),ht=v.createElement("tr"),rt=v.createElement("div"),ot.style.cssText="position:absolute;left:-11111px;border-collapse:separate",ht.style.cssText="border:1px solid",ht.style.height="1px",rt.style.height="9px",rt.style.display="block",Ve.appendChild(ot).appendChild(ht).appendChild(rt),Ct=e.getComputedStyle(ht),xe=parseInt(Ct.height,10)+parseInt(Ct.borderTopWidth,10)+parseInt(Ct.borderBottomWidth,10)===ht.offsetHeight,Ve.removeChild(ot)),xe}}))})();function di(N,j,ee){var ae,de,pe,xe,Be=Zr.test(j),Oe=N.style;return ee=ee||gn(N),ee&&(xe=ee.getPropertyValue(j)||ee[j],Be&&xe&&(xe=xe.replace(x,"$1")||void 0),xe===""&&!We(N)&&(xe=_.style(N,j)),!p.pixelBoxStyles()&&gr.test(xe)&&jn.test(j)&&(ae=Oe.width,de=Oe.minWidth,pe=Oe.maxWidth,Oe.minWidth=Oe.maxWidth=Oe.width=xe,xe=ee.width,Oe.width=ae,Oe.minWidth=de,Oe.maxWidth=pe)),xe!==void 0?xe+"":xe}function mn(N,j){return{get:function(){if(N()){delete this.get;return}return(this.get=j).apply(this,arguments)}}}var Gi=["Webkit","Moz","ms"],bi=v.createElement("div").style,Fn={};function yn(N){for(var j=N[0].toUpperCase()+N.slice(1),ee=Gi.length;ee--;)if(N=Gi[ee]+j,N in bi)return N}function xn(N){var j=_.cssProps[N]||Fn[N];return j||(N in bi?N:Fn[N]=yn(N)||N)}var $i=/^(none|table(?!-c[ea]).+)/,cn={position:"absolute",visibility:"hidden",display:"block"},vr={letterSpacing:"0",fontWeight:"400"};function Pr(N,j,ee){var ae=ze.exec(j);return ae?Math.max(0,ae[2]-(ee||0))+(ae[3]||"px"):j}function Nn(N,j,ee,ae,de,pe){var xe=j==="width"?1:0,Be=0,Oe=0,He=0;if(ee===(ae?"border":"content"))return 0;for(;xe<4;xe+=2)ee==="margin"&&(He+=_.css(N,ee+Ie[xe],!0,de)),ae?(ee==="content"&&(Oe-=_.css(N,"padding"+Ie[xe],!0,de)),ee!=="margin"&&(Oe-=_.css(N,"border"+Ie[xe]+"Width",!0,de))):(Oe+=_.css(N,"padding"+Ie[xe],!0,de),ee!=="padding"?Oe+=_.css(N,"border"+Ie[xe]+"Width",!0,de):Be+=_.css(N,"border"+Ie[xe]+"Width",!0,de));return!ae&&pe>=0&&(Oe+=Math.max(0,Math.ceil(N["offset"+j[0].toUpperCase()+j.slice(1)]-pe-Oe-Be-.5))||0),Oe+He}function zr(N,j,ee){var ae=gn(N),de=!p.boxSizingReliable()||ee,pe=de&&_.css(N,"boxSizing",!1,ae)==="border-box",xe=pe,Be=di(N,j,ae),Oe="offset"+j[0].toUpperCase()+j.slice(1);if(gr.test(Be)){if(!ee)return Be;Be="auto"}return(!p.boxSizingReliable()&&pe||!p.reliableTrDimensions()&&k(N,"tr")||Be==="auto"||!parseFloat(Be)&&_.css(N,"display",!1,ae)==="inline")&&N.getClientRects().length&&(pe=_.css(N,"boxSizing",!1,ae)==="border-box",xe=Oe in N,xe&&(Be=N[Oe])),Be=parseFloat(Be)||0,Be+Nn(N,j,ee||(pe?"border":"content"),xe,ae,Be)+"px"}_.extend({cssHooks:{opacity:{get:function(N,j){if(j){var ee=di(N,"opacity");return ee===""?"1":ee}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(N,j,ee,ae){if(!(!N||N.nodeType===3||N.nodeType===8||!N.style)){var de,pe,xe,Be=ge(j),Oe=Zr.test(j),He=N.style;if(Oe||(j=xn(Be)),xe=_.cssHooks[j]||_.cssHooks[Be],ee!==void 0){if(pe=typeof ee,pe==="string"&&(de=ze.exec(ee))&&de[1]&&(ee=ft(N,j,de),pe="number"),ee==null||ee!==ee)return;pe==="number"&&!Oe&&(ee+=de&&de[3]||(_.cssNumber[Be]?"":"px")),!p.clearCloneStyle&&ee===""&&j.indexOf("background")===0&&(He[j]="inherit"),(!xe||!("set"in xe)||(ee=xe.set(N,ee,ae))!==void 0)&&(Oe?He.setProperty(j,ee):He[j]=ee)}else return xe&&"get"in xe&&(de=xe.get(N,!1,ae))!==void 0?de:He[j]}},css:function(N,j,ee,ae){var de,pe,xe,Be=ge(j),Oe=Zr.test(j);return Oe||(j=xn(Be)),xe=_.cssHooks[j]||_.cssHooks[Be],xe&&"get"in xe&&(de=xe.get(N,!0,ee)),de===void 0&&(de=di(N,j,ae)),de==="normal"&&j in vr&&(de=vr[j]),ee===""||ee?(pe=parseFloat(de),ee===!0||isFinite(pe)?pe||0:de):de}}),_.each(["height","width"],function(N,j){_.cssHooks[j]={get:function(ee,ae,de){if(ae)return $i.test(_.css(ee,"display"))&&(!ee.getClientRects().length||!ee.getBoundingClientRect().width)?Hn(ee,cn,function(){return zr(ee,j,de)}):zr(ee,j,de)},set:function(ee,ae,de){var pe,xe=gn(ee),Be=!p.scrollboxSize()&&xe.position==="absolute",Oe=Be||de,He=Oe&&_.css(ee,"boxSizing",!1,xe)==="border-box",ot=de?Nn(ee,j,de,He,xe):0;return He&&Be&&(ot-=Math.ceil(ee["offset"+j[0].toUpperCase()+j.slice(1)]-parseFloat(xe[j])-Nn(ee,j,"border",!1,xe)-.5)),ot&&(pe=ze.exec(ae))&&(pe[3]||"px")!=="px"&&(ee.style[j]=ae,ae=_.css(ee,j)),Pr(ee,ae,ot)}}}),_.cssHooks.marginLeft=mn(p.reliableMarginLeft,function(N,j){if(j)return(parseFloat(di(N,"marginLeft"))||N.getBoundingClientRect().left-Hn(N,{marginLeft:0},function(){return N.getBoundingClientRect().left}))+"px"}),_.each({margin:"",padding:"",border:"Width"},function(N,j){_.cssHooks[N+j]={expand:function(ee){for(var ae=0,de={},pe=typeof ee=="string"?ee.split(" "):[ee];ae<4;ae++)de[N+Ie[ae]+j]=pe[ae]||pe[ae-2]||pe[0];return de}},N!=="margin"&&(_.cssHooks[N+j].set=Pr)}),_.fn.extend({css:function(N,j){return re(this,function(ee,ae,de){var pe,xe,Be={},Oe=0;if(Array.isArray(ae)){for(pe=gn(ee),xe=ae.length;Oe<xe;Oe++)Be[ae[Oe]]=_.css(ee,ae[Oe],!1,pe);return Be}return de!==void 0?_.style(ee,ae,de):_.css(ee,ae)},N,j,arguments.length>1)}});function Zn(N,j,ee,ae,de){return new Zn.prototype.init(N,j,ee,ae,de)}_.Tween=Zn,Zn.prototype={constructor:Zn,init:function(N,j,ee,ae,de,pe){this.elem=N,this.prop=ee,this.easing=de||_.easing._default,this.options=j,this.start=this.now=this.cur(),this.end=ae,this.unit=pe||(_.cssNumber[ee]?"":"px")},cur:function(){var N=Zn.propHooks[this.prop];return N&&N.get?N.get(this):Zn.propHooks._default.get(this)},run:function(N){var j,ee=Zn.propHooks[this.prop];return this.options.duration?this.pos=j=_.easing[this.easing](N,this.options.duration*N,0,1,this.options.duration):this.pos=j=N,this.now=(this.end-this.start)*j+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),ee&&ee.set?ee.set(this):Zn.propHooks._default.set(this),this}},Zn.prototype.init.prototype=Zn.prototype,Zn.propHooks={_default:{get:function(N){var j;return N.elem.nodeType!==1||N.elem[N.prop]!=null&&N.elem.style[N.prop]==null?N.elem[N.prop]:(j=_.css(N.elem,N.prop,""),!j||j==="auto"?0:j)},set:function(N){_.fx.step[N.prop]?_.fx.step[N.prop](N):N.elem.nodeType===1&&(_.cssHooks[N.prop]||N.elem.style[xn(N.prop)]!=null)?_.style(N.elem,N.prop,N.now+N.unit):N.elem[N.prop]=N.now}}},Zn.propHooks.scrollTop=Zn.propHooks.scrollLeft={set:function(N){N.elem.nodeType&&N.elem.parentNode&&(N.elem[N.prop]=N.now)}},_.easing={linear:function(N){return N},swing:function(N){return .5-Math.cos(N*Math.PI)/2},_default:"swing"},_.fx=Zn.prototype.init,_.fx.step={};var la,uo,Oo=/^(?:toggle|show|hide)$/,dc=/queueHooks$/;function fa(){uo&&(v.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(fa):e.setTimeout(fa,_.fx.interval),_.fx.tick())}function ds(){return e.setTimeout(function(){la=void 0}),la=Date.now()}function Ai(N,j){var ee,ae=0,de={height:N};for(j=j?1:0;ae<4;ae+=2-j)ee=Ie[ae],de["margin"+ee]=de["padding"+ee]=N;return j&&(de.opacity=de.width=N),de}function Vs(N,j,ee){for(var ae,de=(Qi.tweeners[j]||[]).concat(Qi.tweeners["*"]),pe=0,xe=de.length;pe<xe;pe++)if(ae=de[pe].call(ee,j,N))return ae}function Gl(N,j,ee){var ae,de,pe,xe,Be,Oe,He,ot,ht="width"in j||"height"in j,rt=this,Ct={},mr=N.style,$r=N.nodeType&&at(N),Er=ce.get(N,"fxshow");ee.queue||(xe=_._queueHooks(N,"fx"),xe.unqueued==null&&(xe.unqueued=0,Be=xe.empty.fire,xe.empty.fire=function(){xe.unqueued||Be()}),xe.unqueued++,rt.always(function(){rt.always(function(){xe.unqueued--,_.queue(N,"fx").length||xe.empty.fire()})}));for(ae in j)if(de=j[ae],Oo.test(de)){if(delete j[ae],pe=pe||de==="toggle",de===($r?"hide":"show"))if(de==="show"&&Er&&Er[ae]!==void 0)$r=!0;else continue;Ct[ae]=Er&&Er[ae]||_.style(N,ae)}if(Oe=!_.isEmptyObject(j),!(!Oe&&_.isEmptyObject(Ct))){ht&&N.nodeType===1&&(ee.overflow=[mr.overflow,mr.overflowX,mr.overflowY],He=Er&&Er.display,He==null&&(He=ce.get(N,"display")),ot=_.css(N,"display"),ot==="none"&&(He?ot=He:(vt([N],!0),He=N.style.display||He,ot=_.css(N,"display"),vt([N]))),(ot==="inline"||ot==="inline-block"&&He!=null)&&_.css(N,"float")==="none"&&(Oe||(rt.done(function(){mr.display=He}),He==null&&(ot=mr.display,He=ot==="none"?"":ot)),mr.display="inline-block")),ee.overflow&&(mr.overflow="hidden",rt.always(function(){mr.overflow=ee.overflow[0],mr.overflowX=ee.overflow[1],mr.overflowY=ee.overflow[2]})),Oe=!1;for(ae in Ct)Oe||(Er?"hidden"in Er&&($r=Er.hidden):Er=ce.access(N,"fxshow",{display:He}),pe&&(Er.hidden=!$r),$r&&vt([N],!0),rt.done(function(){$r||vt([N]),ce.remove(N,"fxshow");for(ae in Ct)_.style(N,ae,Ct[ae])})),Oe=Vs($r?Er[ae]:0,ae,rt),ae in Er||(Er[ae]=Oe.start,$r&&(Oe.end=Oe.start,Oe.start=0))}}function pc(N,j){var ee,ae,de,pe,xe;for(ee in N)if(ae=ge(ee),de=j[ae],pe=N[ee],Array.isArray(pe)&&(de=pe[1],pe=N[ee]=pe[0]),ee!==ae&&(N[ae]=pe,delete N[ee]),xe=_.cssHooks[ae],xe&&"expand"in xe){pe=xe.expand(pe),delete N[ae];for(ee in pe)ee in N||(N[ee]=pe[ee],j[ee]=de)}else j[ae]=de}function Qi(N,j,ee){var ae,de,pe=0,xe=Qi.prefilters.length,Be=_.Deferred().always(function(){delete Oe.elem}),Oe=function(){if(de)return!1;for(var ht=la||ds(),rt=Math.max(0,He.startTime+He.duration-ht),Ct=rt/He.duration||0,mr=1-Ct,$r=0,Er=He.tweens.length;$r<Er;$r++)He.tweens[$r].run(mr);return Be.notifyWith(N,[He,mr,rt]),mr<1&&Er?rt:(Er||Be.notifyWith(N,[He,1,0]),Be.resolveWith(N,[He]),!1)},He=Be.promise({elem:N,props:_.extend({},j),opts:_.extend(!0,{specialEasing:{},easing:_.easing._default},ee),originalProperties:j,originalOptions:ee,startTime:la||ds(),duration:ee.duration,tweens:[],createTween:function(ht,rt){var Ct=_.Tween(N,He.opts,ht,rt,He.opts.specialEasing[ht]||He.opts.easing);return He.tweens.push(Ct),Ct},stop:function(ht){var rt=0,Ct=ht?He.tweens.length:0;if(de)return this;for(de=!0;rt<Ct;rt++)He.tweens[rt].run(1);return ht?(Be.notifyWith(N,[He,1,0]),Be.resolveWith(N,[He,ht])):Be.rejectWith(N,[He,ht]),this}}),ot=He.props;for(pc(ot,He.opts.specialEasing);pe<xe;pe++)if(ae=Qi.prefilters[pe].call(He,N,ot,He.opts),ae)return g(ae.stop)&&(_._queueHooks(He.elem,He.opts.queue).stop=ae.stop.bind(ae)),ae;return _.map(ot,Vs,He),g(He.opts.start)&&He.opts.start.call(N,He),He.progress(He.opts.progress).done(He.opts.done,He.opts.complete).fail(He.opts.fail).always(He.opts.always),_.fx.timer(_.extend(Oe,{elem:N,anim:He,queue:He.opts.queue})),He}_.Animation=_.extend(Qi,{tweeners:{"*":[function(N,j){var ee=this.createTween(N,j);return ft(ee.elem,N,ze.exec(j),ee),ee}]},tweener:function(N,j){g(N)?(j=N,N=["*"]):N=N.match(he);for(var ee,ae=0,de=N.length;ae<de;ae++)ee=N[ae],Qi.tweeners[ee]=Qi.tweeners[ee]||[],Qi.tweeners[ee].unshift(j)},prefilters:[Gl],prefilter:function(N,j){j?Qi.prefilters.unshift(N):Qi.prefilters.push(N)}}),_.speed=function(N,j,ee){var ae=N&&typeof N=="object"?_.extend({},N):{complete:ee||!ee&&j||g(N)&&N,duration:N,easing:ee&&j||j&&!g(j)&&j};return _.fx.off?ae.duration=0:typeof ae.duration!="number"&&(ae.duration in _.fx.speeds?ae.duration=_.fx.speeds[ae.duration]:ae.duration=_.fx.speeds._default),(ae.queue==null||ae.queue===!0)&&(ae.queue="fx"),ae.old=ae.complete,ae.complete=function(){g(ae.old)&&ae.old.call(this),ae.queue&&_.dequeue(this,ae.queue)},ae},_.fn.extend({fadeTo:function(N,j,ee,ae){return this.filter(at).css("opacity",0).show().end().animate({opacity:j},N,ee,ae)},animate:function(N,j,ee,ae){var de=_.isEmptyObject(N),pe=_.speed(j,ee,ae),xe=function(){var Be=Qi(this,_.extend({},N),pe);(de||ce.get(this,"finish"))&&Be.stop(!0)};return xe.finish=xe,de||pe.queue===!1?this.each(xe):this.queue(pe.queue,xe)},stop:function(N,j,ee){var ae=function(de){var pe=de.stop;delete de.stop,pe(ee)};return typeof N!="string"&&(ee=j,j=N,N=void 0),j&&this.queue(N||"fx",[]),this.each(function(){var de=!0,pe=N!=null&&N+"queueHooks",xe=_.timers,Be=ce.get(this);if(pe)Be[pe]&&Be[pe].stop&&ae(Be[pe]);else for(pe in Be)Be[pe]&&Be[pe].stop&&dc.test(pe)&&ae(Be[pe]);for(pe=xe.length;pe--;)xe[pe].elem===this&&(N==null||xe[pe].queue===N)&&(xe[pe].anim.stop(ee),de=!1,xe.splice(pe,1));(de||!ee)&&_.dequeue(this,N)})},finish:function(N){return N!==!1&&(N=N||"fx"),this.each(function(){var j,ee=ce.get(this),ae=ee[N+"queue"],de=ee[N+"queueHooks"],pe=_.timers,xe=ae?ae.length:0;for(ee.finish=!0,_.queue(this,N,[]),de&&de.stop&&de.stop.call(this,!0),j=pe.length;j--;)pe[j].elem===this&&pe[j].queue===N&&(pe[j].anim.stop(!0),pe.splice(j,1));for(j=0;j<xe;j++)ae[j]&&ae[j].finish&&ae[j].finish.call(this);delete ee.finish})}}),_.each(["toggle","show","hide"],function(N,j){var ee=_.fn[j];_.fn[j]=function(ae,de,pe){return ae==null||typeof ae=="boolean"?ee.apply(this,arguments):this.animate(Ai(j,!0),ae,de,pe)}}),_.each({slideDown:Ai("show"),slideUp:Ai("hide"),slideToggle:Ai("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(N,j){_.fn[N]=function(ee,ae,de){return this.animate(j,ee,ae,de)}}),_.timers=[],_.fx.tick=function(){var N,j=0,ee=_.timers;for(la=Date.now();j<ee.length;j++)N=ee[j],!N()&&ee[j]===N&&ee.splice(j--,1);ee.length||_.fx.stop(),la=void 0},_.fx.timer=function(N){_.timers.push(N),_.fx.start()},_.fx.interval=13,_.fx.start=function(){uo||(uo=!0,fa())},_.fx.stop=function(){uo=null},_.fx.speeds={slow:600,fast:200,_default:400},_.fn.delay=function(N,j){return N=_.fx&&_.fx.speeds[N]||N,j=j||"fx",this.queue(j,function(ee,ae){var de=e.setTimeout(ee,N);ae.stop=function(){e.clearTimeout(de)}})},function(){var N=v.createElement("input"),j=v.createElement("select"),ee=j.appendChild(v.createElement("option"));N.type="checkbox",p.checkOn=N.value!=="",p.optSelected=ee.selected,N=v.createElement("input"),N.value="t",N.type="radio",p.radioValue=N.value==="t"}();var $l,Do=_.expr.attrHandle;_.fn.extend({attr:function(N,j){return re(this,_.attr,N,j,arguments.length>1)},removeAttr:function(N){return this.each(function(){_.removeAttr(this,N)})}}),_.extend({attr:function(N,j,ee){var ae,de,pe=N.nodeType;if(!(pe===3||pe===8||pe===2)){if(typeof N.getAttribute>"u")return _.prop(N,j,ee);if((pe!==1||!_.isXMLDoc(N))&&(de=_.attrHooks[j.toLowerCase()]||(_.expr.match.bool.test(j)?$l:void 0)),ee!==void 0){if(ee===null){_.removeAttr(N,j);return}return de&&"set"in de&&(ae=de.set(N,ee,j))!==void 0?ae:(N.setAttribute(j,ee+""),ee)}return de&&"get"in de&&(ae=de.get(N,j))!==null?ae:(ae=_.find.attr(N,j),ae??void 0)}},attrHooks:{type:{set:function(N,j){if(!p.radioValue&&j==="radio"&&k(N,"input")){var ee=N.value;return N.setAttribute("type",j),ee&&(N.value=ee),j}}}},removeAttr:function(N,j){var ee,ae=0,de=j&&j.match(he);if(de&&N.nodeType===1)for(;ee=de[ae++];)N.removeAttribute(ee)}}),$l={set:function(N,j,ee){return j===!1?_.removeAttr(N,ee):N.setAttribute(ee,ee),ee}},_.each(_.expr.match.bool.source.match(/\w+/g),function(N,j){var ee=Do[j]||_.find.attr;Do[j]=function(ae,de,pe){var xe,Be,Oe=de.toLowerCase();return pe||(Be=Do[Oe],Do[Oe]=xe,xe=ee(ae,de,pe)!=null?Oe:null,Do[Oe]=Be),xe}});var vc=/^(?:input|select|textarea|button)$/i,Wu=/^(?:a|area)$/i;_.fn.extend({prop:function(N,j){return re(this,_.prop,N,j,arguments.length>1)},removeProp:function(N){return this.each(function(){delete this[_.propFix[N]||N]})}}),_.extend({prop:function(N,j,ee){var ae,de,pe=N.nodeType;if(!(pe===3||pe===8||pe===2))return(pe!==1||!_.isXMLDoc(N))&&(j=_.propFix[j]||j,de=_.propHooks[j]),ee!==void 0?de&&"set"in de&&(ae=de.set(N,ee,j))!==void 0?ae:N[j]=ee:de&&"get"in de&&(ae=de.get(N,j))!==null?ae:N[j]},propHooks:{tabIndex:{get:function(N){var j=_.find.attr(N,"tabindex");return j?parseInt(j,10):vc.test(N.nodeName)||Wu.test(N.nodeName)&&N.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),p.optSelected||(_.propHooks.selected={get:function(N){var j=N.parentNode;return j&&j.parentNode&&j.parentNode.selectedIndex,null},set:function(N){var j=N.parentNode;j&&(j.selectedIndex,j.parentNode&&j.parentNode.selectedIndex)}}),_.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){_.propFix[this.toLowerCase()]=this});function lo(N){var j=N.match(he)||[];return j.join(" ")}function fo(N){return N.getAttribute&&N.getAttribute("class")||""}function Yu(N){return Array.isArray(N)?N:typeof N=="string"?N.match(he)||[]:[]}_.fn.extend({addClass:function(N){var j,ee,ae,de,pe,xe;return g(N)?this.each(function(Be){_(this).addClass(N.call(this,Be,fo(this)))}):(j=Yu(N),j.length?this.each(function(){if(ae=fo(this),ee=this.nodeType===1&&" "+lo(ae)+" ",ee){for(pe=0;pe<j.length;pe++)de=j[pe],ee.indexOf(" "+de+" ")<0&&(ee+=de+" ");xe=lo(ee),ae!==xe&&this.setAttribute("class",xe)}}):this)},removeClass:function(N){var j,ee,ae,de,pe,xe;return g(N)?this.each(function(Be){_(this).removeClass(N.call(this,Be,fo(this)))}):arguments.length?(j=Yu(N),j.length?this.each(function(){if(ae=fo(this),ee=this.nodeType===1&&" "+lo(ae)+" ",ee){for(pe=0;pe<j.length;pe++)for(de=j[pe];ee.indexOf(" "+de+" ")>-1;)ee=ee.replace(" "+de+" "," ");xe=lo(ee),ae!==xe&&this.setAttribute("class",xe)}}):this):this.attr("class","")},toggleClass:function(N,j){var ee,ae,de,pe,xe=typeof N,Be=xe==="string"||Array.isArray(N);return g(N)?this.each(function(Oe){_(this).toggleClass(N.call(this,Oe,fo(this),j),j)}):typeof j=="boolean"&&Be?j?this.addClass(N):this.removeClass(N):(ee=Yu(N),this.each(function(){if(Be)for(pe=_(this),de=0;de<ee.length;de++)ae=ee[de],pe.hasClass(ae)?pe.removeClass(ae):pe.addClass(ae);else(N===void 0||xe==="boolean")&&(ae=fo(this),ae&&ce.set(this,"__className__",ae),this.setAttribute&&this.setAttribute("class",ae||N===!1?"":ce.get(this,"__className__")||""))}))},hasClass:function(N){var j,ee,ae=0;for(j=" "+N+" ";ee=this[ae++];)if(ee.nodeType===1&&(" "+lo(fo(ee))+" ").indexOf(j)>-1)return!0;return!1}});var co=/\r/g;_.fn.extend({val:function(N){var j,ee,ae,de=this[0];return arguments.length?(ae=g(N),this.each(function(pe){var xe;this.nodeType===1&&(ae?xe=N.call(this,pe,_(this).val()):xe=N,xe==null?xe="":typeof xe=="number"?xe+="":Array.isArray(xe)&&(xe=_.map(xe,function(Be){return Be==null?"":Be+""})),j=_.valHooks[this.type]||_.valHooks[this.nodeName.toLowerCase()],(!j||!("set"in j)||j.set(this,xe,"value")===void 0)&&(this.value=xe))})):de?(j=_.valHooks[de.type]||_.valHooks[de.nodeName.toLowerCase()],j&&"get"in j&&(ee=j.get(de,"value"))!==void 0?ee:(ee=de.value,typeof ee=="string"?ee.replace(co,""):ee??"")):void 0}}),_.extend({valHooks:{option:{get:function(N){var j=_.find.attr(N,"value");return j??lo(_.text(N))}},select:{get:function(N){var j,ee,ae,de=N.options,pe=N.selectedIndex,xe=N.type==="select-one",Be=xe?null:[],Oe=xe?pe+1:de.length;for(pe<0?ae=Oe:ae=xe?pe:0;ae<Oe;ae++)if(ee=de[ae],(ee.selected||ae===pe)&&!ee.disabled&&(!ee.parentNode.disabled||!k(ee.parentNode,"optgroup"))){if(j=_(ee).val(),xe)return j;Be.push(j)}return Be},set:function(N,j){for(var ee,ae,de=N.options,pe=_.makeArray(j),xe=de.length;xe--;)ae=de[xe],(ae.selected=_.inArray(_.valHooks.option.get(ae),pe)>-1)&&(ee=!0);return ee||(N.selectedIndex=-1),pe}}}}),_.each(["radio","checkbox"],function(){_.valHooks[this]={set:function(N,j){if(Array.isArray(j))return N.checked=_.inArray(_(N).val(),j)>-1}},p.checkOn||(_.valHooks[this].get=function(N){return N.getAttribute("value")===null?"on":N.value})});var Wa=e.location,ps={guid:Date.now()},Ws=/\?/;_.parseXML=function(N){var j,ee;if(!N||typeof N!="string")return null;try{j=new e.DOMParser().parseFromString(N,"text/xml")}catch{}return ee=j&&j.getElementsByTagName("parsererror")[0],(!j||ee)&&_.error("Invalid XML: "+(ee?_.map(ee.childNodes,function(ae){return ae.textContent}).join(`
`):N)),j};var Ti=/^(?:focusinfocus|focusoutblur)$/,Ul=function(N){N.stopPropagation()};_.extend(_.event,{trigger:function(N,j,ee,ae){var de,pe,xe,Be,Oe,He,ot,ht,rt=[ee||v],Ct=c.call(N,"type")?N.type:N,mr=c.call(N,"namespace")?N.namespace.split("."):[];if(pe=ht=xe=ee=ee||v,!(ee.nodeType===3||ee.nodeType===8)&&!Ti.test(Ct+_.event.triggered)&&(Ct.indexOf(".")>-1&&(mr=Ct.split("."),Ct=mr.shift(),mr.sort()),Oe=Ct.indexOf(":")<0&&"on"+Ct,N=N[_.expando]?N:new _.Event(Ct,typeof N=="object"&&N),N.isTrigger=ae?2:3,N.namespace=mr.join("."),N.rnamespace=N.namespace?new RegExp("(^|\\.)"+mr.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,N.result=void 0,N.target||(N.target=ee),j=j==null?[N]:_.makeArray(j,[N]),ot=_.event.special[Ct]||{},!(!ae&&ot.trigger&&ot.trigger.apply(ee,j)===!1))){if(!ae&&!ot.noBubble&&!b(ee)){for(Be=ot.delegateType||Ct,Ti.test(Be+Ct)||(pe=pe.parentNode);pe;pe=pe.parentNode)rt.push(pe),xe=pe;xe===(ee.ownerDocument||v)&&rt.push(xe.defaultView||xe.parentWindow||e)}for(de=0;(pe=rt[de++])&&!N.isPropagationStopped();)ht=pe,N.type=de>1?Be:ot.bindType||Ct,He=(ce.get(pe,"events")||Object.create(null))[N.type]&&ce.get(pe,"handle"),He&&He.apply(pe,j),He=Oe&&pe[Oe],He&&He.apply&&me(pe)&&(N.result=He.apply(pe,j),N.result===!1&&N.preventDefault());return N.type=Ct,!ae&&!N.isDefaultPrevented()&&(!ot._default||ot._default.apply(rt.pop(),j)===!1)&&me(ee)&&Oe&&g(ee[Ct])&&!b(ee)&&(xe=ee[Oe],xe&&(ee[Oe]=null),_.event.triggered=Ct,N.isPropagationStopped()&&ht.addEventListener(Ct,Ul),ee[Ct](),N.isPropagationStopped()&&ht.removeEventListener(Ct,Ul),_.event.triggered=void 0,xe&&(ee[Oe]=xe)),N.result}},simulate:function(N,j,ee){var ae=_.extend(new _.Event,ee,{type:N,isSimulated:!0});_.event.trigger(ae,null,j)}}),_.fn.extend({trigger:function(N,j){return this.each(function(){_.event.trigger(N,j,this)})},triggerHandler:function(N,j){var ee=this[0];if(ee)return _.event.trigger(N,j,ee,!0)}});var Hl=/\[\]$/,Ar=/\r?\n/g,gc=/^(?:submit|button|image|reset|file)$/i,mc=/^(?:input|select|textarea|keygen)/i;function Sa(N,j,ee,ae){var de;if(Array.isArray(j))_.each(j,function(pe,xe){ee||Hl.test(N)?ae(N,xe):Sa(N+"["+(typeof xe=="object"&&xe!=null?pe:"")+"]",xe,ee,ae)});else if(!ee&&w(j)==="object")for(de in j)Sa(N+"["+de+"]",j[de],ee,ae);else ae(N,j)}_.param=function(N,j){var ee,ae=[],de=function(pe,xe){var Be=g(xe)?xe():xe;ae[ae.length]=encodeURIComponent(pe)+"="+encodeURIComponent(Be??"")};if(N==null)return"";if(Array.isArray(N)||N.jquery&&!_.isPlainObject(N))_.each(N,function(){de(this.name,this.value)});else for(ee in N)Sa(ee,N[ee],j,de);return ae.join("&")},_.fn.extend({serialize:function(){return _.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var N=_.prop(this,"elements");return N?_.makeArray(N):this}).filter(function(){var N=this.type;return this.name&&!_(this).is(":disabled")&&mc.test(this.nodeName)&&!gc.test(N)&&(this.checked||!Et.test(N))}).map(function(N,j){var ee=_(this).val();return ee==null?null:Array.isArray(ee)?_.map(ee,function(ae){return{name:j.name,value:ae.replace(Ar,`\r
`)}}):{name:j.name,value:ee.replace(Ar,`\r
`)}}).get()}});var jl=/%20/g,Vl=/#.*$/,Ys=/([?&])_=[^&]*/,Xu=/^(.*?):[ \t]*([^\r\n]*)$/mg,yc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,bc=/^(?:GET|HEAD)$/,wc=/^\/\//,Xs={},ho={},po="*/".concat("*"),Ku=v.createElement("a");Ku.href=Wa.href;function Io(N){return function(j,ee){typeof j!="string"&&(ee=j,j="*");var ae,de=0,pe=j.toLowerCase().match(he)||[];if(g(ee))for(;ae=pe[de++];)ae[0]==="+"?(ae=ae.slice(1)||"*",(N[ae]=N[ae]||[]).unshift(ee)):(N[ae]=N[ae]||[]).push(ee)}}function Ks(N,j,ee,ae){var de={},pe=N===ho;function xe(Be){var Oe;return de[Be]=!0,_.each(N[Be]||[],function(He,ot){var ht=ot(j,ee,ae);if(typeof ht=="string"&&!pe&&!de[ht])return j.dataTypes.unshift(ht),xe(ht),!1;if(pe)return!(Oe=ht)}),Oe}return xe(j.dataTypes[0])||!de["*"]&&xe("*")}function Ro(N,j){var ee,ae,de=_.ajaxSettings.flatOptions||{};for(ee in j)j[ee]!==void 0&&((de[ee]?N:ae||(ae={}))[ee]=j[ee]);return ae&&_.extend(!0,N,ae),N}function Wl(N,j,ee){for(var ae,de,pe,xe,Be=N.contents,Oe=N.dataTypes;Oe[0]==="*";)Oe.shift(),ae===void 0&&(ae=N.mimeType||j.getResponseHeader("Content-Type"));if(ae){for(de in Be)if(Be[de]&&Be[de].test(ae)){Oe.unshift(de);break}}if(Oe[0]in ee)pe=Oe[0];else{for(de in ee){if(!Oe[0]||N.converters[de+" "+Oe[0]]){pe=de;break}xe||(xe=de)}pe=pe||xe}if(pe)return pe!==Oe[0]&&Oe.unshift(pe),ee[pe]}function Yl(N,j,ee,ae){var de,pe,xe,Be,Oe,He={},ot=N.dataTypes.slice();if(ot[1])for(xe in N.converters)He[xe.toLowerCase()]=N.converters[xe];for(pe=ot.shift();pe;)if(N.responseFields[pe]&&(ee[N.responseFields[pe]]=j),!Oe&&ae&&N.dataFilter&&(j=N.dataFilter(j,N.dataType)),Oe=pe,pe=ot.shift(),pe){if(pe==="*")pe=Oe;else if(Oe!=="*"&&Oe!==pe){if(xe=He[Oe+" "+pe]||He["* "+pe],!xe){for(de in He)if(Be=de.split(" "),Be[1]===pe&&(xe=He[Oe+" "+Be[0]]||He["* "+Be[0]],xe)){xe===!0?xe=He[de]:He[de]!==!0&&(pe=Be[0],ot.unshift(Be[1]));break}}if(xe!==!0)if(xe&&N.throws)j=xe(j);else try{j=xe(j)}catch(ht){return{state:"parsererror",error:xe?ht:"No conversion from "+Oe+" to "+pe}}}}return{state:"success",data:j}}_.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Wa.href,type:"GET",isLocal:yc.test(Wa.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":po,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":_.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(N,j){return j?Ro(Ro(N,_.ajaxSettings),j):Ro(_.ajaxSettings,N)},ajaxPrefilter:Io(Xs),ajaxTransport:Io(ho),ajax:function(N,j){typeof N=="object"&&(j=N,N=void 0),j=j||{};var ee,ae,de,pe,xe,Be,Oe,He,ot,ht,rt=_.ajaxSetup({},j),Ct=rt.context||rt,mr=rt.context&&(Ct.nodeType||Ct.jquery)?_(Ct):_.event,$r=_.Deferred(),Er=_.Callbacks("once memory"),Qn=rt.statusCode||{},Y={},ye={},Me="canceled",De={readyState:0,getResponseHeader:function(Je){var gt;if(Oe){if(!pe)for(pe={};gt=Xu.exec(de);)pe[gt[1].toLowerCase()+" "]=(pe[gt[1].toLowerCase()+" "]||[]).concat(gt[2]);gt=pe[Je.toLowerCase()+" "]}return gt==null?null:gt.join(", ")},getAllResponseHeaders:function(){return Oe?de:null},setRequestHeader:function(Je,gt){return Oe==null&&(Je=ye[Je.toLowerCase()]=ye[Je.toLowerCase()]||Je,Y[Je]=gt),this},overrideMimeType:function(Je){return Oe==null&&(rt.mimeType=Je),this},statusCode:function(Je){var gt;if(Je)if(Oe)De.always(Je[De.status]);else for(gt in Je)Qn[gt]=[Qn[gt],Je[gt]];return this},abort:function(Je){var gt=Je||Me;return ee&&ee.abort(gt),Ke(0,gt),this}};if($r.promise(De),rt.url=((N||rt.url||Wa.href)+"").replace(wc,Wa.protocol+"//"),rt.type=j.method||j.type||rt.method||rt.type,rt.dataTypes=(rt.dataType||"*").toLowerCase().match(he)||[""],rt.crossDomain==null){Be=v.createElement("a");try{Be.href=rt.url,Be.href=Be.href,rt.crossDomain=Ku.protocol+"//"+Ku.host!=Be.protocol+"//"+Be.host}catch{rt.crossDomain=!0}}if(rt.data&&rt.processData&&typeof rt.data!="string"&&(rt.data=_.param(rt.data,rt.traditional)),Ks(Xs,rt,j,De),Oe)return De;He=_.event&&rt.global,He&&_.active++===0&&_.event.trigger("ajaxStart"),rt.type=rt.type.toUpperCase(),rt.hasContent=!bc.test(rt.type),ae=rt.url.replace(Vl,""),rt.hasContent?rt.data&&rt.processData&&(rt.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(rt.data=rt.data.replace(jl,"+")):(ht=rt.url.slice(ae.length),rt.data&&(rt.processData||typeof rt.data=="string")&&(ae+=(Ws.test(ae)?"&":"?")+rt.data,delete rt.data),rt.cache===!1&&(ae=ae.replace(Ys,"$1"),ht=(Ws.test(ae)?"&":"?")+"_="+ps.guid+++ht),rt.url=ae+ht),rt.ifModified&&(_.lastModified[ae]&&De.setRequestHeader("If-Modified-Since",_.lastModified[ae]),_.etag[ae]&&De.setRequestHeader("If-None-Match",_.etag[ae])),(rt.data&&rt.hasContent&&rt.contentType!==!1||j.contentType)&&De.setRequestHeader("Content-Type",rt.contentType),De.setRequestHeader("Accept",rt.dataTypes[0]&&rt.accepts[rt.dataTypes[0]]?rt.accepts[rt.dataTypes[0]]+(rt.dataTypes[0]!=="*"?", "+po+"; q=0.01":""):rt.accepts["*"]);for(ot in rt.headers)De.setRequestHeader(ot,rt.headers[ot]);if(rt.beforeSend&&(rt.beforeSend.call(Ct,De,rt)===!1||Oe))return De.abort();if(Me="abort",Er.add(rt.complete),De.done(rt.success),De.fail(rt.error),ee=Ks(ho,rt,j,De),!ee)Ke(-1,"No Transport");else{if(De.readyState=1,He&&mr.trigger("ajaxSend",[De,rt]),Oe)return De;rt.async&&rt.timeout>0&&(xe=e.setTimeout(function(){De.abort("timeout")},rt.timeout));try{Oe=!1,ee.send(Y,Ke)}catch(Je){if(Oe)throw Je;Ke(-1,Je)}}function Ke(Je,gt,jt,cr){var yr,kr,Mr,sn,hn,rn=gt;Oe||(Oe=!0,xe&&e.clearTimeout(xe),ee=void 0,de=cr||"",De.readyState=Je>0?4:0,yr=Je>=200&&Je<300||Je===304,jt&&(sn=Wl(rt,De,jt)),!yr&&_.inArray("script",rt.dataTypes)>-1&&_.inArray("json",rt.dataTypes)<0&&(rt.converters["text script"]=function(){}),sn=Yl(rt,sn,De,yr),yr?(rt.ifModified&&(hn=De.getResponseHeader("Last-Modified"),hn&&(_.lastModified[ae]=hn),hn=De.getResponseHeader("etag"),hn&&(_.etag[ae]=hn)),Je===204||rt.type==="HEAD"?rn="nocontent":Je===304?rn="notmodified":(rn=sn.state,kr=sn.data,Mr=sn.error,yr=!Mr)):(Mr=rn,(Je||!rn)&&(rn="error",Je<0&&(Je=0))),De.status=Je,De.statusText=(gt||rn)+"",yr?$r.resolveWith(Ct,[kr,rn,De]):$r.rejectWith(Ct,[De,rn,Mr]),De.statusCode(Qn),Qn=void 0,He&&mr.trigger(yr?"ajaxSuccess":"ajaxError",[De,rt,yr?kr:Mr]),Er.fireWith(Ct,[De,rn]),He&&(mr.trigger("ajaxComplete",[De,rt]),--_.active||_.event.trigger("ajaxStop")))}return De},getJSON:function(N,j,ee){return _.get(N,j,ee,"json")},getScript:function(N,j){return _.get(N,void 0,j,"script")}}),_.each(["get","post"],function(N,j){_[j]=function(ee,ae,de,pe){return g(ae)&&(pe=pe||de,de=ae,ae=void 0),_.ajax(_.extend({url:ee,type:j,dataType:pe,data:ae,success:de},_.isPlainObject(ee)&&ee))}}),_.ajaxPrefilter(function(N){var j;for(j in N.headers)j.toLowerCase()==="content-type"&&(N.contentType=N.headers[j]||"")}),_._evalUrl=function(N,j,ee){return _.ajax({url:N,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(ae){_.globalEval(ae,j,ee)}})},_.fn.extend({wrapAll:function(N){var j;return this[0]&&(g(N)&&(N=N.call(this[0])),j=_(N,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&j.insertBefore(this[0]),j.map(function(){for(var ee=this;ee.firstElementChild;)ee=ee.firstElementChild;return ee}).append(this)),this},wrapInner:function(N){return g(N)?this.each(function(j){_(this).wrapInner(N.call(this,j))}):this.each(function(){var j=_(this),ee=j.contents();ee.length?ee.wrapAll(N):j.append(N)})},wrap:function(N){var j=g(N);return this.each(function(ee){_(this).wrapAll(j?N.call(this,ee):N)})},unwrap:function(N){return this.parent(N).not("body").each(function(){_(this).replaceWith(this.childNodes)}),this}}),_.expr.pseudos.hidden=function(N){return!_.expr.pseudos.visible(N)},_.expr.pseudos.visible=function(N){return!!(N.offsetWidth||N.offsetHeight||N.getClientRects().length)},_.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var Xl={0:200,1223:204},Fo=_.ajaxSettings.xhr();p.cors=!!Fo&&"withCredentials"in Fo,p.ajax=Fo=!!Fo,_.ajaxTransport(function(N){var j,ee;if(p.cors||Fo&&!N.crossDomain)return{send:function(ae,de){var pe,xe=N.xhr();if(xe.open(N.type,N.url,N.async,N.username,N.password),N.xhrFields)for(pe in N.xhrFields)xe[pe]=N.xhrFields[pe];N.mimeType&&xe.overrideMimeType&&xe.overrideMimeType(N.mimeType),!N.crossDomain&&!ae["X-Requested-With"]&&(ae["X-Requested-With"]="XMLHttpRequest");for(pe in ae)xe.setRequestHeader(pe,ae[pe]);j=function(Be){return function(){j&&(j=ee=xe.onload=xe.onerror=xe.onabort=xe.ontimeout=xe.onreadystatechange=null,Be==="abort"?xe.abort():Be==="error"?typeof xe.status!="number"?de(0,"error"):de(xe.status,xe.statusText):de(Xl[xe.status]||xe.status,xe.statusText,(xe.responseType||"text")!=="text"||typeof xe.responseText!="string"?{binary:xe.response}:{text:xe.responseText},xe.getAllResponseHeaders()))}},xe.onload=j(),ee=xe.onerror=xe.ontimeout=j("error"),xe.onabort!==void 0?xe.onabort=ee:xe.onreadystatechange=function(){xe.readyState===4&&e.setTimeout(function(){j&&ee()})},j=j("abort");try{xe.send(N.hasContent&&N.data||null)}catch(Be){if(j)throw Be}},abort:function(){j&&j()}}}),_.ajaxPrefilter(function(N){N.crossDomain&&(N.contents.script=!1)}),_.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(N){return _.globalEval(N),N}}}),_.ajaxPrefilter("script",function(N){N.cache===void 0&&(N.cache=!1),N.crossDomain&&(N.type="GET")}),_.ajaxTransport("script",function(N){if(N.crossDomain||N.scriptAttrs){var j,ee;return{send:function(ae,de){j=_("<script>").attr(N.scriptAttrs||{}).prop({charset:N.scriptCharset,src:N.url}).on("load error",ee=function(pe){j.remove(),ee=null,pe&&de(pe.type==="error"?404:200,pe.type)}),v.head.appendChild(j[0])},abort:function(){ee&&ee()}}}});var Ya=[],Xa=/(=)\?(?=&|$)|\?\?/;_.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var N=Ya.pop()||_.expando+"_"+ps.guid++;return this[N]=!0,N}}),_.ajaxPrefilter("json jsonp",function(N,j,ee){var ae,de,pe,xe=N.jsonp!==!1&&(Xa.test(N.url)?"url":typeof N.data=="string"&&(N.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Xa.test(N.data)&&"data");if(xe||N.dataTypes[0]==="jsonp")return ae=N.jsonpCallback=g(N.jsonpCallback)?N.jsonpCallback():N.jsonpCallback,xe?N[xe]=N[xe].replace(Xa,"$1"+ae):N.jsonp!==!1&&(N.url+=(Ws.test(N.url)?"&":"?")+N.jsonp+"="+ae),N.converters["script json"]=function(){return pe||_.error(ae+" was not called"),pe[0]},N.dataTypes[0]="json",de=e[ae],e[ae]=function(){pe=arguments},ee.always(function(){de===void 0?_(e).removeProp(ae):e[ae]=de,N[ae]&&(N.jsonpCallback=j.jsonpCallback,Ya.push(ae)),pe&&g(de)&&de(pe[0]),pe=de=void 0}),"script"}),p.createHTMLDocument=function(){var N=v.implementation.createHTMLDocument("").body;return N.innerHTML="<form></form><form></form>",N.childNodes.length===2}(),_.parseHTML=function(N,j,ee){if(typeof N!="string")return[];typeof j=="boolean"&&(ee=j,j=!1);var ae,de,pe;return j||(p.createHTMLDocument?(j=v.implementation.createHTMLDocument(""),ae=j.createElement("base"),ae.href=v.location.href,j.head.appendChild(ae)):j=v),de=P.exec(N),pe=!ee&&[],de?[j.createElement(de[1])]:(de=$t([N],j,pe),pe&&pe.length&&_(pe).remove(),_.merge([],de.childNodes))},_.fn.load=function(N,j,ee){var ae,de,pe,xe=this,Be=N.indexOf(" ");return Be>-1&&(ae=lo(N.slice(Be)),N=N.slice(0,Be)),g(j)?(ee=j,j=void 0):j&&typeof j=="object"&&(de="POST"),xe.length>0&&_.ajax({url:N,type:de||"GET",dataType:"html",data:j}).done(function(Oe){pe=arguments,xe.html(ae?_("<div>").append(_.parseHTML(Oe)).find(ae):Oe)}).always(ee&&function(Oe,He){xe.each(function(){ee.apply(this,pe||[Oe.responseText,He,Oe])})}),this},_.expr.pseudos.animated=function(N){return _.grep(_.timers,function(j){return N===j.elem}).length},_.offset={setOffset:function(N,j,ee){var ae,de,pe,xe,Be,Oe,He,ot=_.css(N,"position"),ht=_(N),rt={};ot==="static"&&(N.style.position="relative"),Be=ht.offset(),pe=_.css(N,"top"),Oe=_.css(N,"left"),He=(ot==="absolute"||ot==="fixed")&&(pe+Oe).indexOf("auto")>-1,He?(ae=ht.position(),xe=ae.top,de=ae.left):(xe=parseFloat(pe)||0,de=parseFloat(Oe)||0),g(j)&&(j=j.call(N,ee,_.extend({},Be))),j.top!=null&&(rt.top=j.top-Be.top+xe),j.left!=null&&(rt.left=j.left-Be.left+de),"using"in j?j.using.call(N,rt):ht.css(rt)}},_.fn.extend({offset:function(N){if(arguments.length)return N===void 0?this:this.each(function(de){_.offset.setOffset(this,N,de)});var j,ee,ae=this[0];if(ae)return ae.getClientRects().length?(j=ae.getBoundingClientRect(),ee=ae.ownerDocument.defaultView,{top:j.top+ee.pageYOffset,left:j.left+ee.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var N,j,ee,ae=this[0],de={top:0,left:0};if(_.css(ae,"position")==="fixed")j=ae.getBoundingClientRect();else{for(j=this.offset(),ee=ae.ownerDocument,N=ae.offsetParent||ee.documentElement;N&&(N===ee.body||N===ee.documentElement)&&_.css(N,"position")==="static";)N=N.parentNode;N&&N!==ae&&N.nodeType===1&&(de=_(N).offset(),de.top+=_.css(N,"borderTopWidth",!0),de.left+=_.css(N,"borderLeftWidth",!0))}return{top:j.top-de.top-_.css(ae,"marginTop",!0),left:j.left-de.left-_.css(ae,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var N=this.offsetParent;N&&_.css(N,"position")==="static";)N=N.offsetParent;return N||Ve})}}),_.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(N,j){var ee=j==="pageYOffset";_.fn[N]=function(ae){return re(this,function(de,pe,xe){var Be;if(b(de)?Be=de:de.nodeType===9&&(Be=de.defaultView),xe===void 0)return Be?Be[j]:de[pe];Be?Be.scrollTo(ee?Be.pageXOffset:xe,ee?xe:Be.pageYOffset):de[pe]=xe},N,ae,arguments.length)}}),_.each(["top","left"],function(N,j){_.cssHooks[j]=mn(p.pixelPosition,function(ee,ae){if(ae)return ae=di(ee,j),gr.test(ae)?_(ee).position()[j]+"px":ae})}),_.each({Height:"height",Width:"width"},function(N,j){_.each({padding:"inner"+N,content:j,"":"outer"+N},function(ee,ae){_.fn[ae]=function(de,pe){var xe=arguments.length&&(ee||typeof de!="boolean"),Be=ee||(de===!0||pe===!0?"margin":"border");return re(this,function(Oe,He,ot){var ht;return b(Oe)?ae.indexOf("outer")===0?Oe["inner"+N]:Oe.document.documentElement["client"+N]:Oe.nodeType===9?(ht=Oe.documentElement,Math.max(Oe.body["scroll"+N],ht["scroll"+N],Oe.body["offset"+N],ht["offset"+N],ht["client"+N])):ot===void 0?_.css(Oe,He,Be):_.style(Oe,He,ot,Be)},j,xe?de:void 0,xe)}})}),_.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(N,j){_.fn[j]=function(ee){return this.on(j,ee)}}),_.fn.extend({bind:function(N,j,ee){return this.on(N,null,j,ee)},unbind:function(N,j){return this.off(N,null,j)},delegate:function(N,j,ee,ae){return this.on(j,N,ee,ae)},undelegate:function(N,j,ee){return arguments.length===1?this.off(N,"**"):this.off(j,N||"**",ee)},hover:function(N,j){return this.mouseenter(N).mouseleave(j||N)}}),_.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(N,j){_.fn[j]=function(ee,ae){return arguments.length>0?this.on(j,null,ee,ae):this.trigger(j)}});var _c=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;_.proxy=function(N,j){var ee,ae,de;if(typeof j=="string"&&(ee=N[j],j=N,N=ee),!!g(N))return ae=a.call(arguments,2),de=function(){return N.apply(j||this,ae.concat(a.call(arguments)))},de.guid=N.guid=N.guid||_.guid++,de},_.holdReady=function(N){N?_.readyWait++:_.ready(!0)},_.isArray=Array.isArray,_.parseJSON=JSON.parse,_.nodeName=k,_.isFunction=g,_.isWindow=b,_.camelCase=ge,_.type=w,_.now=Date.now,_.isNumeric=function(N){var j=_.type(N);return(j==="number"||j==="string")&&!isNaN(N-parseFloat(N))},_.trim=function(N){return N==null?"":(N+"").replace(_c,"$1")};var Bo=e.jQuery,Fa=e.$;return _.noConflict=function(N){return e.$===_&&(e.$=Fa),N&&e.jQuery===_&&(e.jQuery=Bo),_},typeof t>"u"&&(e.jQuery=e.$=_),_})}(Vb)),Vb.exports}/*!
Copyright (c) The Cytoscape Consortium

Permission is hereby granted, free of charge, to any person obtaining a copy of
this software and associated documentation files (the “Software”), to deal in
the Software without restriction, including without limitation the rights to
use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies
of the Software, and to permit persons to whom the Software is furnished to do
so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/(function(r){(function(){var e=function(i,a){!i||!a||(a.fn.cyPanzoom=a.fn.cytoscapePanzoom=function(o){return n.apply(this,[o,i,a]),this},i("core","panzoom",function(o){return n.apply(this,[o,i,a]),this}))},t={zoomFactor:.05,zoomDelay:45,minZoom:.1,maxZoom:10,fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,zoomOnly:!1,fitSelector:void 0,animateOnFit:function(){return!1},fitAnimationDuration:1e3,sliderHandleIcon:"fa fa-minus",zoomInIcon:"fa fa-plus",zoomOutIcon:"fa fa-minus",resetIcon:"fa fa-expand"},n=function(i,a,o){var s=this,u=o.extend(!0,{},t,i),l=i,f={destroy:function(){var c=o(s.container()),d=c.find(".cy-panzoom");d.data("winbdgs").forEach(function(h){o(window).unbind(h.evt,h.fn)}),d.data("cybdgs").forEach(function(h){s.off(h.evt,h.fn)}),d.remove()},init:function(){return o(s.container()).each(function(){var c=o(this);c.cytoscape=a;var d=[],h=o(window),p=function(le,Z){d.push({evt:le,fn:Z}),h.bind(le,Z)},g=function(le,Z){for(var ie=0;ie<d.length;ie++){var re=d[ie];if(re.evt===le&&re.fn===Z){d.splice(ie,1);break}}h.unbind(le,Z)},b=[],v=function(le,Z){b.push({evt:le,fn:Z}),s.on(le,Z)},y=o('<div class="cy-panzoom"></div>');c.prepend(y),y.css("position","absolute"),y.data("winbdgs",d),y.data("cybdgs",b),u.zoomOnly&&y.addClass("cy-panzoom-zoom-only");var m=o('<div class="cy-panzoom-zoom-in cy-panzoom-zoom-button"><span class="icon '+u.zoomInIcon+'"></span></div>');y.append(m);var w=o('<div class="cy-panzoom-zoom-out cy-panzoom-zoom-button"><span class="icon '+u.zoomOutIcon+'"></span></div>');y.append(w);var S=o('<div class="cy-panzoom-reset cy-panzoom-zoom-button"><span class="icon '+u.resetIcon+'"></span></div>');y.append(S);var A=o('<div class="cy-panzoom-slider"></div>');y.append(A),A.append('<div class="cy-panzoom-slider-background"></div>');var _=o('<div class="cy-panzoom-slider-handle"><span class="icon '+u.sliderHandleIcon+'"></span></div>');A.append(_);var E=o('<div class="cy-panzoom-no-zoom-tick"></div>');A.append(E);var k=o('<div class="cy-panzoom-panner"></div>');y.append(k);var M=o('<div class="cy-panzoom-panner-handle"></div>');k.append(M);var T=o('<div class="cy-panzoom-pan-up cy-panzoom-pan-button"></div>'),C=o('<div class="cy-panzoom-pan-down cy-panzoom-pan-button"></div>'),R=o('<div class="cy-panzoom-pan-left cy-panzoom-pan-button"></div>'),x=o('<div class="cy-panzoom-pan-right cy-panzoom-pan-button"></div>');k.append(T).append(C).append(R).append(x);var B=o('<div class="cy-panzoom-pan-indicator"></div>');k.append(B);function D(le){var Z={x:le.originalEvent.pageX-k.offset().left-k.width()/2,y:le.originalEvent.pageY-k.offset().top-k.height()/2},ie=u.panDragAreaSize,re=Math.sqrt(Z.x*Z.x+Z.y*Z.y),J=Math.min(re/ie,1);if(re<u.panInactiveArea)return{x:NaN,y:NaN};Z={x:Z.x/re,y:Z.y/re},J=Math.max(u.panMinPercentSpeed,J);var fe={x:-1*Z.x*(J*u.panDistance),y:-1*Z.y*(J*u.panDistance)};return fe}function O(){clearInterval(W),g("mousemove",X),B.hide()}function G(le){var Z=le,ie=Math.sqrt(Z.x*Z.x+Z.y*Z.y),re={x:-1*Z.x/ie,y:-1*Z.y/ie},J=k.width(),fe=k.height(),we=ie/u.panDistance,ge=Math.max(u.panIndicatorMinOpacity,we),me=255-Math.round(ge*255);B.show().css({left:J/2*re.x+J/2,top:fe/2*re.y+fe/2,background:"rgb("+me+", "+me+", "+me+")"})}function V(){s.pan(),s.zoom(),q=c.width()/2,F=c.height()/2}var I=!1;function z(){I=!0,V()}function P(){I=!1}var q,F;function U(le){I||V(),s.zoom({level:le,renderedPosition:{x:q,y:F}})}var W,X=function(le){le.stopPropagation(),le.preventDefault(),clearInterval(W);var Z=D(le);if(isNaN(Z.x)||isNaN(Z.y)){B.hide();return}G(Z),W=setInterval(function(){s.panBy(Z)},u.panSpeed)};M.bind("mousedown",function(le){X(le),p("mousemove",X)}),M.bind("mouseup",function(){O()}),p("mouseup blur",function(){O()}),A.bind("mousedown",function(){return!1});var te=!1,ne=2;function he(le,Z){Z===void 0&&(Z=0);var ie=ne,re=0+ie,J=A.height()-_.height()-2*ie,fe=le.pageY-A.offset().top-Z;fe<re&&(fe=re),fe>J&&(fe=J);var we=1-(fe-re)/(J-re);_.css("top",fe);var ge=u.minZoom,me=u.maxZoom,ue=Math.log(ge)/Math.log(me),ce=(1-ue)*we+ue,oe=Math.pow(me,ce);oe<ge?oe=ge:oe>me&&(oe=me),U(oe)}var ve,Ce;_.bind("mousedown",ve=function(le){var Z=le.target===_[0]?le.offsetY:0;te=!0,z(),_.addClass("active");var ie=0;return p("mousemove",Ce=function(re){var J=+new Date;if(J>ie+10)ie=J;else return!1;return he(re,Z),!1}),p("mouseup",function(){g("mousemove",Ce),te=!1,_.removeClass("active"),P()}),!1}),A.bind("mousedown",function(le){le.target!==_[0]&&(ve(le),he(le))});function Le(){var le=s.zoom(),Z=u.minZoom,ie=u.maxZoom,re=Math.log(Z)/Math.log(ie),J=Math.log(le)/Math.log(ie),fe=1-(J-re)/(1-re),we=ne,ge=A.height()-_.height()-2*ne,me=fe*(ge-we);me<we&&(me=we),me>ge&&(me=ge),_.css("top",me)}Le(),v("zoom",function(){te||Le()}),function(){var le=1,Z=u.minZoom,ie=u.maxZoom,re=Math.log(Z)/Math.log(ie),J=Math.log(le)/Math.log(ie),fe=1-(J-re)/(1-re);if(fe>1||fe<0){E.hide();return}var we=ne,ge=A.height()-_.height()-2*ne,me=fe*(ge-we);me<we&&(me=we),me>ge&&(me=ge),E.css("top",me)}();function K(le,Z){var ie;le.bind("mousedown",function(re){if(re.preventDefault(),re.stopPropagation(),re.button==0){var J=function(){var fe=s.zoom(),we=s.zoom()*Z;we<u.minZoom&&(we=u.minZoom),we>u.maxZoom&&(we=u.maxZoom),!(we==u.maxZoom&&fe==u.maxZoom||we==u.minZoom&&fe==u.minZoom)&&U(we)};return z(),J(),ie=setInterval(J,u.zoomDelay),!1}}),p("mouseup blur",function(){clearInterval(ie),P()})}K(m,1+u.zoomFactor),K(w,1-u.zoomFactor),S.bind("mousedown",function(le){if(le.button==0){var Z=u.fitSelector?s.elements(u.fitSelector):s.elements();if(Z.size()===0)s.reset();else{var ie=typeof u.animateOnFit=="function"?u.animateOnFit.call():u.animateOnFit;ie?s.animate({fit:{eles:Z,padding:u.fitPadding}},{duration:u.fitAnimationDuration}):s.fit(Z,u.fitPadding)}return!1}})})}};return f[l]?f[l].apply(this,Array.prototype.slice.call(arguments,1)):typeof l=="object"||!l?f.init.apply(this,arguments):(o.error("No such function `"+l+"` for jquery.cytoscapePanzoom"),o(this))};r.exports&&(r.exports=function(i,a){e(i,a||dV())}),typeof cytoscape<"u"&&typeof jQuery<"u"&&e(cytoscape,jQuery)})()})(a4);var pV=a4.exports;const vV=qi(pV);function gV(r){vV(ir);let e=Lr(jr);var t={zoomFactor:.05,zoomDelay:45,minZoom:e.minZoom(),maxZoom:e.maxZoom(),fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,zoomOnly:!1,fitSelector:void 0,animateOnFit(){return!1},fitAnimationDuration:1e3};return oo(()=>{e.panzoom(t),e.on("zoom",function(n){var i=e.zoom();i<t.minZoom?e.zoom(t.minZoom):i>t.maxZoom&&e.zoom(t.maxZoom)})}),[]}class mV extends Ir{constructor(e){super(),Dr(this,e,gV,null,Nr,{})}}function yV(r){let e,t;const n=r[1].default,i=Ah(n,r,r[0],null);return{c(){e=Yt("div"),i&&i.c(),st(e,"class","svelte-16igfw6")},m(a,o){Pt(a,e,o),i&&i.m(e,null),t=!0},p(a,[o]){i&&i.p&&(!t||o&1)&&kh(i,n,a,a[0],t?Th(n,a[0],o,null):Lh(a[0]),null)},i(a){t||(xt(i,a),t=!0)},o(a){At(i,a),t=!1},d(a){a&&Nt(e),i&&i.d(a)}}}function bV(r,e,t){let{$$slots:n={},$$scope:i}=e;return r.$$set=a=>{"$$scope"in a&&t(0,i=a.$$scope)},[i,n]}class wV extends Ir{constructor(e){super(),Dr(this,e,bV,yV,Nr,{})}}function _V(r,e,t){let n;Kr(r,sr,a=>t(0,n=a));let i=Lr(jr);return setInterval(()=>{!n.drawing&&i&&(i.autoungrabify(!1),i.nodes().grabify())},1e3),oo(()=>{Shiny.unbindAll(),Shiny.bindAll()}),[]}class xV extends Ir{constructor(e){super(),Dr(this,e,_V,null,Nr,{})}}function y3(r){let e,t,n,i,a,o;return{c(){e=Yt("div"),t=Yt("button"),t.innerHTML='<span class="glyphicon glyphicon-refresh spinning svelte-16d2v0h"></span> Fitting...',n=qt(),i=Yt("button"),i.textContent="Cancel",st(t,"class","btn btn-lg btn-secondary fixed-width disabled-button svelte-16d2v0h"),st(t,"id","fitting-button"),t.disabled=!0,st(i,"class","btn btn-lg btn-default fixed-width svelte-16d2v0h"),st(e,"class","center-screen svelte-16d2v0h")},m(s,u){Pt(s,e,u),Gt(e,t),Gt(e,n),Gt(e,i),a||(o=kn(i,"click",EV),a=!0)},p:Yr,d(s){s&&Nt(e),a=!1,o()}}}function SV(r){let e,t=r[0].fitting&&y3();return{c(){t&&t.c(),e=jf()},m(n,i){t&&t.m(n,i),Pt(n,e,i)},p(n,[i]){n[0].fitting?t?t.p(n,i):(t=y3(),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Yr,o:Yr,d(n){t&&t.d(n),n&&Nt(e)}}}function EV(){Shiny.setInputValue("run-abort",Math.random())}function CV(r,e,t){let n;return Kr(r,sr,i=>t(0,n=i)),[n]}class AV extends Ir{constructor(e){super(),Dr(this,e,CV,SV,Nr,{})}}function b3(r){let e,t,n=r[2][r[0].type].label+"",i,a,o=r[0].message+"",s,u;return{c(){e=Yt("div"),t=Yt("strong"),i=ia(n),a=qt(),s=ia(o),st(e,"class",u=yu(r[2][r[0].type].class+(r[1]?" fadeOut":""))+" svelte-1wv9zbn")},m(l,f){Pt(l,e,f),Gt(e,t),Gt(t,i),Gt(e,a),Gt(e,s)},p(l,f){f&1&&n!==(n=l[2][l[0].type].label+"")&&Au(i,n),f&1&&o!==(o=l[0].message+"")&&Au(s,o),f&3&&u!==(u=yu(l[2][l[0].type].class+(l[1]?" fadeOut":""))+" svelte-1wv9zbn")&&st(e,"class",u)},d(l){l&&Nt(e)}}}function TV(r){let e,t=r[0].message!==""&&b3(r);return{c(){t&&t.c(),e=jf()},m(n,i){t&&t.m(n,i),Pt(n,e,i)},p(n,[i]){n[0].message!==""?t?t.p(n,i):(t=b3(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Yr,o:Yr,d(n){t&&t.d(n),n&&Nt(e)}}}function kV(r,e,t){let n;Kr(r,J3,s=>t(0,n=s));let i={success:{class:"alert-success",label:"Success!"},info:{class:"alert-info",label:"Info!"},warning:{class:"alert-warning",label:"Warning!"},danger:{class:"alert-danger",label:"Danger!"}},a=!1,o;return r.$$.update=()=>{r.$$.dirty&9&&n.message!==""&&(t(1,a=!1),clearTimeout(o),t(3,o=setTimeout(()=>{t(1,a=!0)},1e4)))},[n,a,i,o]}class LV extends Ir{constructor(e){super(),Dr(this,e,kV,TV,Nr,{})}}var o4={exports:{}};(function(r){(function(){var e=function(t){if(!t)return;function n(u,l){u.scratch("_undoRedo")===void 0&&u.scratch("_undoRedo",{});var f=u.scratch("_undoRedo");return l===void 0?f:f[l]}function i(u,l,f){var c=n(u);c[l]=f,u.scratch("_undoRedo",c)}function a(u){var l={};return l.options={isDebug:!1,actions:{},undoableDrag:!0,stackSizeLimit:void 0,beforeUndo:function(){},afterUndo:function(){},beforeRedo:function(){},afterRedo:function(){},ready:function(){}},l.actions={},l.undoStack=[],l.redoStack=[],l.reset=function(f,c){this.undoStack=f||[],this.redoStack=c||[]},l.undo=function(){if(this.isUndoStackEmpty())this.options.isDebug&&console.log("Undoing cannot be done because undo stack is empty!");else{var f=this.undoStack.pop();u.trigger("beforeUndo",[f.name,f.args]);var c=this.actions[f.name]._undo(f.args);return this.redoStack.push({name:f.name,args:c}),u.trigger("afterUndo",[f.name,f.args,c]),c}},l.redo=function(){if(this.isRedoStackEmpty())this.options.isDebug&&console.log("Redoing cannot be done because redo stack is empty!");else{var f=this.redoStack.pop();u.trigger(f.firstTime?"beforeDo":"beforeRedo",[f.name,f.args]),f.args||(f.args={}),f.args.firstTime=!!f.firstTime;var c=this.actions[f.name]._do(f.args);return this.undoStack.push({name:f.name,args:c}),this.options.stackSizeLimit!=null&&this.undoStack.length>this.options.stackSizeLimit&&this.undoStack.shift(),u.trigger(f.firstTime?"afterDo":"afterRedo",[f.name,f.args,c]),c}},l.do=function(f,c){return this.redoStack.length=0,this.redoStack.push({name:f,args:c,firstTime:!0}),this.redo()},l.undoAll=function(){for(;!this.isUndoStackEmpty();)this.undo()},l.redoAll=function(){for(;!this.isRedoStackEmpty();)this.redo()},l.action=function(f,c,d){return this.actions[f]={_do:c,_undo:d},this},l.removeAction=function(f){delete this.actions[f]},l.isUndoStackEmpty=function(){return this.undoStack.length===0},l.isRedoStackEmpty=function(){return this.redoStack.length===0},l.getUndoStack=function(){return this.undoStack},l.getRedoStack=function(){return this.redoStack},l}t("core","undoRedo",function(u,l){var f=this,c=n(f,"instance")||a(f);if(i(f,"instance",c),u){for(var d in u)c.options.hasOwnProperty(d)&&(c.options[d]=u[d]);if(u.actions)for(var d in u.actions)c.actions[d]=u.actions[d]}if(!n(f,"isInitialized")&&!l){var h=s(f);for(var d in h)c.actions[d]=h[d];o(f,c.options.undoableDrag),i(f,"isInitialized",!0)}return c.options.ready(),c});function o(u,l){var f=null;u.on("grab","node",function(){(typeof l=="function"?l.call(this):l)&&(f={},f.lastMouseDownPosition={x:this.position("x"),y:this.position("y")},f.node=this)}),u.on("free","node",function(){var c=n(u,"instance");if(typeof l=="function"?l.call(this):l){if(f==null)return;var d=f.node,h=f.lastMouseDownPosition,p={x:d.position("x"),y:d.position("y")};if(p.x!=h.x||p.y!=h.y){var g={x:p.x-h.x,y:p.y-h.y},b;d.selected()?b=u.nodes(":visible").filter(":selected"):b=u.collection([d]);var v={positionDiff:g,nodes:b,move:!1};c.do("drag",v),f=null}}})}function s(u){function l(y){for(var m={},w=0;w<y.length;w++)m[y[w].id()]=!0;var S=y.filter(function(A,_){typeof A=="number"&&(A=_);for(var E=A.parent()[0];E!=null;){if(m[E.id()])return!1;E=E.parent()[0]}return!0});return S}function f(y,m,w){for(var S=w?m:l(m),A=0;A<S.length;A++){var _=S[A],E=_.position("x"),k=_.position("y");_.isParent()||_.position({x:E+y.x,y:k+y.y});var M=_.children();f(y,M,!0)}}function c(y){return typeof y=="string"?u.$(y):y}function d(y){return c(y).restore()}function h(y){var m={};return u.nodes().not(":parent").positions(function(w,S){typeof w=="number"&&(w=S),m[w.id()]={x:w.position("x"),y:w.position("y")};var A=y[w.id()];return{x:A.x,y:A.y}}),m}function p(){for(var y={},m=u.nodes(),w=0;w<m.length;w++){var S=m[w];y[S.id()]={x:S.position("x"),y:S.position("y")}}return y}function g(y){var m={};if(y.firstTime){var w=y.parentData==null?null:y.parentData,S=y.nodes.union(y.nodes.descendants());m.elesToRestore=S.union(S.connectedEdges()),m.movedEles=y.nodes.move({parent:w});var A={x:y.posDiffX,y:y.posDiffY};f(A,m.movedEles)}else m.elesToRestore=y.movedEles.remove(),m.movedEles=y.elesToRestore.restore();return y.callback&&(m.callback=y.callback,y.callback(m.movedEles)),m}function b(y){var m={};if(y.firstTime){var w=y.parentData==null?null:y.parentData,S=y.nodes.union(y.nodes.descendants()),A={};S.forEach(function(k){k.parent().id()?A[k.id()]=k.parent():A[k.id()]=null});var _={};S.forEach(function(k){_[k.id()]={},_[k.id()].x=k.position("x"),_[k.id()].y=k.position("y")}),m.oldParent=A,m.oldPosition=_,m.newParent=w,m.movedEles=S,y.nodes.move({parent:w}).nodes();var E={x:y.posDiffX,y:y.posDiffY};f(E,m.movedEles)}else m.oldParent={},y.movedEles.forEach(function(k){k.parent().id()?m.oldParent[k.id()]=k.parent():m.oldParent[k.id()]=null}),m.oldPosition={},y.movedEles.forEach(function(k){m.oldPosition[k.id()]={},m.oldPosition[k.id()].x=k.position("x"),m.oldPosition[k.id()].y=k.position("y")}),m.newParent=y.oldParent,m.movedEles=y.movedEles,m.movedEles.forEach(function(k){typeof m.newParent!="object"?k.move({parent:m.newParent}):m.newParent[k.id()]==null?k.move({parent:null}):k.move({parent:m.newParent[k.id()].id()}),k.position(y.oldPosition[k.id()])});return y.callback&&(m.callback=y.callback,y.callback(m.movedEles)),m}function v(y,m){for(var w=[],S=n(u,"instance"),A=S.actions,_=0;_<y.length;_++){var E=y[_];if(!A.hasOwnProperty(E.name))throw"Action "+E.name+" does not exist as an undoable function"}for(var _=0;_<y.length;_++){var E=y[_];E.param.firstTime=y.firstTime;var k;m=="undo"?k=A[E.name]._undo(E.param):k=A[E.name]._do(E.param),w.unshift({name:E.name,param:k})}return w}return{add:{_do:function(y){return y.firstTime?u.add(y):d(y)},_undo:u.remove},remove:{_do:u.remove,_undo:d},restore:{_do:d,_undo:u.remove},select:{_do:function(y){return c(y).select()},_undo:function(y){return c(y).unselect()}},unselect:{_do:function(y){return c(y).unselect()},_undo:function(y){return c(y).select()}},move:{_do:function(y){var m=c(y.eles),w=m.nodes(),S=m.edges(),A=[],_=[],E=[];return w.forEach(function(k){A.push(k.parent().length>1?k.parent().id():null)}),S.forEach(function(k){_.push(k.source().id()),E.push(k.target().id())}),{oldNodesParents:A,newNodes:w.move(y.location),oldEdgesSources:_,oldEdgesTargets:E,newEdges:S.move(y.location)}},_undo:function(y){var m=u.collection(),w={};if(y.newNodes.length>0){w.parent=y.newNodes[0].parent().id();for(var S=0;S<y.newNodes.length;S++){var A=y.newNodes[S].move({parent:y.oldNodesParents[S]});m=m.union(A)}}else{w.source=y.newEdges[0].source().id(),w.target=y.newEdges[0].target().id();for(var S=0;S<y.newEdges.length;S++){var _=y.newEdges[S].move({source:y.oldEdgesSources[S],target:y.oldEdgesTargets[S]});m=m.union(_)}}return{eles:m,location:w}}},drag:{_do:function(y){return y.move&&(f(y.positionDiff,y.nodes),u.elements().unselect()),y},_undo:function(y){var m={x:-1*y.positionDiff.x,y:-1*y.positionDiff.y},w={positionDiff:y.positionDiff,nodes:y.nodes,move:!0};return f(m,y.nodes),u.elements().unselect(),w}},layout:{_do:function(y){if(y.firstTime){var m=p(),w;return y.eles?w=c(y.eles).layout(y.options):w=u.layout(y.options),w&&w.run&&w.run(),m}else return h(y)},_undo:function(y){return h(y)}},changeParent:{_do:function(y){return u.nodes()[0].component?b(y):g(y)},_undo:function(y){return u.nodes()[0].component?b(y):g(y)}},batch:{_do:function(y){return v(y,"do")},_undo:function(y){return v(y,"undo")}}}}};r.exports&&(r.exports=e),typeof cytoscape<"u"&&e(cytoscape)})()})(o4);var NV=o4.exports;const PV=qi(NV);function MV(r,e){const t={};return r.forEach((n,i)=>{t[n]=e[i]}),t}function OV(r,e,t){let n;Kr(r,ml,a=>t(0,n=a));let i=Lr(jr);return oo(()=>{ir.use(PV);const a={isDebug:!0};let o=i.undoRedo(a);ml.set(o),o.action("style",function(s){let u={};const l=Object.keys(s.style);return s.eles.forEach(function(f){let c=[];l.forEach(d=>{c.push(f.data(d)||f.style(d)),f.data(d,s.style[d])}),u[f.id()]=MV(l,c)}),{eles:s.eles,style:u}},function(s){const u=s.eles[0].style();return Object.keys(s.style).forEach(function(l){var f=i.getElementById(l);for(var c in s.style[l])f.data(c,s.style[l][c])}),{eles:s.eles,style:u}}),document.addEventListener("keydown",function(s){(s.ctrlKey||s.metaKey)&&s.target.nodeName==="BODY"&&(s.which===90||s.which===89)&&(s.preventDefault(),s.stopPropagation(),s.which===90?n.undo():s.which===89&&n.redo())}),document.addEventListener("keyup",function(s){s.metaKey&&s.target.nodeName==="BODY"&&(s.which===90||s.which===89)&&(s.preventDefault(),s.stopPropagation())})}),[]}class DV extends Ir{constructor(e){super(),Dr(this,e,OV,null,Nr,{})}}function IV(){return typeof Shiny=="object"&&Shiny!==null}function RV(r,e,t){let n;return Kr(r,sr,i=>t(0,n=i)),IV()?Shiny.addCustomMessageHandler("full",function(i){tr(sr,n.full=i,n),tr(sr,n.ready=!0,n)}):(tr(sr,n.full=!0,n),tr(sr,n.ready=!0,n)),[]}class FV extends Ir{constructor(e){super(),Dr(this,e,RV,null,Nr,{})}}function BV(r,e,t){let n;Kr(r,Jn,a=>t(1,n=a));let i=!1;return oo(()=>{t(0,i=!0)}),r.$$.update=()=>{r.$$.dirty&3&&i&&EG(n.showVar,n.showLav,n.showMean),r.$$.dirty&3&&i&&SG(n.view,n.std,n.number_digits)},[i,n]}class zV extends Ir{constructor(e){super(),Dr(this,e,BV,null,Nr,{})}}function qV(r){let e,t,n,i;const a=r[6].default,o=Ah(a,r,r[5],null);return{c(){e=Yt("section"),o&&o.c(),Oa(e,"left",r[0]+"px"),Oa(e,"top",r[1]+"px"),st(e,"class","draggable svelte-13fkbj1")},m(s,u){Pt(s,e,u),o&&o.m(e,null),t=!0,n||(i=[kn(window,"mouseup",r[4]),kn(window,"mousemove",r[3]),kn(e,"mousedown",r[2])],n=!0)},p(s,[u]){o&&o.p&&(!t||u&32)&&kh(o,a,s,s[5],t?Th(a,s[5],u,null):Lh(s[5]),null),(!t||u&1)&&Oa(e,"left",s[0]+"px"),(!t||u&2)&&Oa(e,"top",s[1]+"px")},i(s){t||(xt(o,s),t=!0)},o(s){At(o,s),t=!1},d(s){s&&Nt(e),o&&o.d(s),n=!1,To(i)}}}function GV(r,e,t){let{$$slots:n={},$$scope:i}=e,{left:a=100}=e,{top:o=100}=e,s=!1;function u(){s=!0}function l(c){s&&(t(0,a+=c.movementX),t(1,o+=c.movementY))}function f(){s=!1}return r.$$set=c=>{"left"in c&&t(0,a=c.left),"top"in c&&t(1,o=c.top),"$$scope"in c&&t(5,i=c.$$scope)},[a,o,u,l,f,i,n]}class $V extends Ir{constructor(e){super(),Dr(this,e,GV,qV,Nr,{left:0,top:1})}}function UV(r){let e,t,n;const i=r[0].default,a=Ah(i,r,r[1],null);return{c(){e=Yt("ul"),t=Yt("div"),a&&a.c(),Oa(t,"display","flex"),Oa(t,"flex-direction","column"),st(e,"class","nav navbar-nav navbar-left"),Oa(e,"border","1px solid black"),Oa(e,"z-index","9999")},m(o,s){Pt(o,e,s),Gt(e,t),a&&a.m(t,null),n=!0},p(o,s){a&&a.p&&(!n||s&2)&&kh(a,i,o,o[1],n?Th(i,o[1],s,null):Lh(o[1]),null)},i(o){n||(xt(a,o),n=!0)},o(o){At(a,o),n=!1},d(o){o&&Nt(e),a&&a.d(o)}}}function HV(r){let e,t;return e=new $V({props:{$$slots:{default:[UV]},$$scope:{ctx:r}}}),{c(){Qt(e.$$.fragment)},m(n,i){Xt(e,n,i),t=!0},p(n,[i]){const a={};i&2&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){t||(xt(e.$$.fragment,n),t=!0)},o(n){At(e.$$.fragment,n),t=!1},d(n){Kt(e,n)}}}function jV(r,e,t){let{$$slots:n={},$$scope:i}=e;return r.$$set=a=>{"$$scope"in a&&t(1,i=a.$$scope)},[n,i]}class VV extends Ir{constructor(e){super(),Dr(this,e,jV,HV,Nr,{})}}function Wb(r,e){return bootbox.alert({title:"<span style='color: red;'>Error</span>",message:`A ${e} error occurred:<br> <span style='color: red;'>${r}</span>.<br><br>Please consider reporting this issue by sending an email to <a href="mailto:j.d.karch@fsw.leidenuniv.nl">j.d.karch@fsw.leidenuniv.nl</a>.`,centerVertical:!0}),!0}function WV(){return typeof Shiny=="object"&&Shiny!==null}function YV(r){return window.onerror=function(e,t,n,i,a){Wb(e,"Javascript")},window.addEventListener("unhandledrejection",function(e){Wb(e.reason,"Javascript")}),WV()&&Shiny.addCustomMessageHandler("serverError",function(e){Lr(sr).showServerErrors&&Wb(e.msg,"Server")}),[]}class XV extends Ir{constructor(e){super(),Dr(this,e,YV,null,Nr,{})}}function KV(r,e,t){let n;return Kr(r,tn,i=>t(0,n=i)),r.$$.update=()=>{r.$$.dirty&1&&Si(n.mode)},[n]}class ZV extends Ir{constructor(e){super(),Dr(this,e,KV,null,Nr,{})}}var s4={exports:{}};(function(r,e){(function(n,i){r.exports=i()})(kt,function(){return function(t){var n={};function i(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=n,i.i=function(a){return a},i.d=function(a,o,s){i.o(a,o)||Object.defineProperty(a,o,{configurable:!1,enumerable:!0,get:s})},i.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(o,"a",o),o},i.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},i.p="",i(i.s=3)}([function(t,n,i){var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},o=i(2),s=a(""),u=a({}),l=a(function(){}),f=function(F){return(typeof F>"u"?"undefined":a(F))===u},c=function(F){return(typeof F>"u"?"undefined":a(F))===s},d=function(F){return(typeof F>"u"?"undefined":a(F))===l},h=function(F){return f(F)&&d(F.collection)},p=i(1),g=function(F){return F!=null&&!F.removed()},b=function(F,U){return F.has!=null?b=function(X,te){return X.has(te)}:b=function(X,te){return X.intersection(te).length>0},b(F,U)},v=function(F){if(c(F))return function(U){return U.is(F)};if(d(F))return F;if(h(F))return function(U){return b(F,U)};throw new Error("Can not create match function for spec",F)},y=function(F,U,W,X){var te={cy:F,events:U,selector:W||"node",fn:X};return F.on(te.events,te.selector,te.fn),te},m=function(F,U,W,X,te){var ne=y(U,W,X,te),he=F.bindings=F.bindings||[];he.push(ne)},w=function(F){var U=function(X){X.cy.off(X.events,X.selector,X.fn)};F.bindings.forEach(U),F.bindings=[]},S=function(F,U){var W=F.reposition;if(W==="mean")return _(v(F.meanIgnores));if(W==="viewport")return R(U);if(W==="drag")return A(F);if(f(W)){if(W.type==null||W.type=="inside")return M(W);if(W.type=="outside")return C(W)}else return W},A=function(F){return function(U){var W=U.position(),X=F.delta;if(F.delta!=null&&!U.same(F.grabbedNode)&&!U.grabbed())return{x:W.x+X.x,y:W.y+X.y}}},_=function(F){return function(U){for(var W=U.neighborhood(),X={x:0,y:0},te=0,ne=0;ne<W.length;ne++){var he=W[ne];if(he.isNode()&&!F(he)){var ve=he.position();X.x+=ve.x,X.y+=ve.y,te++}}if(!(te<2))return X.x/=te,X.y/=te,X}},E=function(F,U,W){return F<U?U:F>W?W:F},k=function(F,U){var W=F.position();return{x:E(W.x,U.x1,U.x2),y:E(W.y,U.y1,U.y2)}},M=function(F){return function(U){return k(U,F)}},T=function(F,U){var W=F.position(),X=W.x,te=W.y,ne=U.x1,he=U.y1,ve=U.x2,Ce=U.y2,Le=ne<=X&&X<=ve,K=he<=te&&te<=Ce,le=Math.abs;if(Le&&K){var Z=le(ne-X),ie=le(ve-X),re=le(he-te),J=le(Ce-te),fe=Math.min(Z,ie,re,J);return fe===Z?{x:ne,y:te}:fe===ie?{x:ve,y:te}:fe===re?{x:X,y:he}:{x:X,y:Ce}}else return{x:X,y:te}},C=function(F){return function(U){return T(U,F)}},R=function(F){return function(U){var W=F.extent(),X=U.outerWidth(),te=U.outerHeight(),ne={x1:W.x1+X/2,x2:W.x2-X/2,y1:W.y1+te/2,y2:W.y2-te/2};return k(U,ne)}},x=function(F){return function(U,W){var X=function(ne){return F.matches(ne)&&ne.neighborhood().length>2&&!ne.grabbed()};m(F,W,"position","node",function(){var te=this;(te.neighborhood().some(X)||F.meanOnSelfPosition(te)&&X(te))&&U(W,[F])}),m(F,W,"add remove","edge",function(){var te=this,ne=W.getElementById(te.data("source")),he=W.getElementById(te.data("target"));[ne,he].some(X)&&U(W,[F])})}},B=function(F){return function(U,W){m(F,W,"grab","node",function(){var X=this;if(F.dragWithMatches(X)){var te=X.position();F.grabbedNode=X,F.p1={x:te.x,y:te.y},F.delta={x:0,y:0}}}),m(F,W,"drag","node",function(){var X=this;if(X.same(F.grabbedNode)){var te=F.delta,ne=F.p1,he=X.position(),ve={x:he.x,y:he.y};te.x=ve.x-ne.x,te.y=ve.y-ne.y,F.p1=ve,U(W,[F])}}),m(F,W,"free","node",function(){F.grabbedNode=null,F.delta=null,F.p1=null})}},D=function(F){return function(U,W){m(F,W,"position","node",function(){var X=this;F.matches(X)&&U(W,[F])})}},O=function(F,U){return U.reposition==="mean"?x(U):U.reposition==="drag"?B(U):f(U.reposition)||U.when==="matching"||U.reposition==="viewport"?D(U):U.when},G=function(F,U,W){var X=p({},o,W);X.getNewPos=S(X,F),X.listener=O(F,X);var te=h(X.nodesMatching);if(te)X.nodes=X.nodesMatching.slice(),X.matches=function(he){return g(he)&&b(X.nodes,he)};else{var ne=v(X.nodesMatching);X.matches=function(he){return g(he)&&ne(he)}}return X.dragWith!=null&&(X.dragWithMatches=v(X.dragWith)),X.listener(function(){z(F,[X])},F),X.enabled=!0,U.rules.push(X),X},V=function(F,U){U.onAddNode=function(W){var X=W.target;U.nodes.merge(X)},U.onRmNode=function(W){var X=W.target;U.nodes.unmerge(X)},F.on("add","node",U.onAddNode),F.on("remove","node",U.onRmNode)},I=function(F,U){F.removeListener("add","node",U.onAddNode),F.removeListener("remove","node",U.onRmNode)},z=function(F,U){var W=F.scratch().automove;U=U??W.rules,F.batch(function(){for(var X=0;X<U.length;X++){var te=U[X];if(te.destroyed||!te.enabled)break;for(var ne=te.nodes||W.nodes,he=ne.length-1;he>=0;he--){var ve=ne[he];if(ve.removed()){ne.unmerge(ve);continue}if(te.matches(ve)){var Ce=ve.position(),Le=te.getNewPos(ve),K=Le!=null&&(Ce.x!==Le.x||Ce.y!==Le.y);K&&(ve.position(Le),ve.trigger("automove",[te]))}}}})},P=function(F){var U=this,W=U.scratch().automove=U.scratch().automove||{rules:[]};if(W.rules.length===0&&(W.nodes=U.nodes().slice(),V(U,W)),F==="destroy"){W.rules.forEach(function(te){w(te),te.destroyed=!0}),W.rules.splice(0,W.rules.length),I(U,W);return}var X=G(U,W,F);return z(U,[X]),{apply:function(){z(U,[X])},disable:function(){this.toggle(!1)},enable:function(){this.toggle(!0)},enabled:function(){return X.enabled},toggle:function(ne){X.enabled=ne!==void 0?ne:!X.enabled,X.enabled&&z(U,[X])},destroy:function(){var ne=W.rules;return w(X),X.destroyed=!0,ne.splice(ne.indexOf(X),1),ne.length===0&&I(U,W),this}}};t.exports=P},function(t,n,i){t.exports=Object.assign!=null?Object.assign.bind(Object):function(a){for(var o=arguments.length,s=Array(o>1?o-1:0),u=1;u<o;u++)s[u-1]=arguments[u];return s.forEach(function(l){Object.keys(l).forEach(function(f){return a[f]=l[f]})}),a}},function(t,n,i){var a={nodesMatching:function(s){return!1},reposition:"mean",when:void 0,meanIgnores:function(s){return!1},meanOnSelfPosition:function(s){return!0},dragWith:function(s){return!1}};t.exports=a},function(t,n,i){var a=i(0),o=function(u){u&&u("core","automove",a)};typeof cytoscape<"u"&&o(cytoscape),t.exports=o}])})})(s4);var QV=s4.exports;const JV=qi(QV);function eW(r){ir.use(JV);let e=Lr(jr);return oo(()=>{e.automove({nodesMatching:".automove-viewport",reposition:"viewport"})}),[]}class tW extends Ir{constructor(e){super(),Dr(this,e,eW,null,Nr,{})}}var z2={exports:{}},Tv={},kv={},Vr={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r._registerNode=r._NODES_REGISTRY=r.Konva=r.glob=r._parseUA=void 0;var e=Math.PI/180;function t(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}var n=function(o){var s=o.indexOf("msie ");if(s>0)return parseInt(o.substring(s+5,o.indexOf(".",s)),10);var u=o.indexOf("trident/");if(u>0){var l=o.indexOf("rv:");return parseInt(o.substring(l+3,o.indexOf(".",l)),10)}var f=o.indexOf("edge/");return f>0?parseInt(o.substring(f+5,o.indexOf(".",f)),10):!1},i=function(o){var s=o.toLowerCase(),u=/(chrome)[ /]([\w.]+)/.exec(s)||/(webkit)[ /]([\w.]+)/.exec(s)||/(opera)(?:.*version|)[ /]([\w.]+)/.exec(s)||/(msie) ([\w.]+)/.exec(s)||s.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(s)||[],l=!!o.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i),f=!!o.match(/IEMobile/i);return{browser:u[1]||"",version:u[2]||"0",isIE:n(s),mobile:l,ieMobile:f}};r._parseUA=i,r.glob=typeof kt<"u"?kt:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},r.Konva={_global:r.glob,version:"7.2.5",isBrowser:t(),isUnminified:/param/.test((function(o){}).toString()),dblClickWindow:400,getAngle:function(o){return r.Konva.angleDeg?o*e:o},enableTrace:!1,_pointerEventsEnabled:!1,hitOnDragEnabled:!1,captureTouchEventsEnabled:!1,listenClickTap:!1,inDblClickWindow:!1,pixelRatio:void 0,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:function(){return r.Konva.DD.isDragging},isDragReady:function(){return!!r.Konva.DD.node},UA:r._parseUA(r.glob.navigator&&r.glob.navigator.userAgent||""),document:r.glob.document,_injectGlobal:function(o){r.glob.Konva=o},_parseUA:r._parseUA},r._NODES_REGISTRY={};var a=function(o){r._NODES_REGISTRY[o.prototype.getClassName()]=o,r.Konva[o.prototype.getClassName()]=o};r._registerNode=a})(Vr);var Jr={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Util=r.Transform=r.Collection=void 0;var e=Vr,t=function(){function m(){}return m.toCollection=function(w){var S=new m,A=w.length,_;for(_=0;_<A;_++)S.push(w[_]);return S},m._mapMethod=function(w){m.prototype[w]=function(){var S=this.length,A,_=[].slice.call(arguments);for(A=0;A<S;A++)this[A][w].apply(this[A],_);return this}},m.mapMethods=function(w){var S=w.prototype;for(var A in S)m._mapMethod(A)},m}();r.Collection=t,t.prototype=[],t.prototype.each=function(m){for(var w=0;w<this.length;w++)m(this[w],w)},t.prototype.toArray=function(){var m=[],w=this.length,S;for(S=0;S<w;S++)m.push(this[S]);return m};var n=function(){function m(w){w===void 0&&(w=[1,0,0,1,0,0]),this.dirty=!1,this.m=w&&w.slice()||[1,0,0,1,0,0]}return m.prototype.reset=function(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0},m.prototype.copy=function(){return new m(this.m)},m.prototype.copyInto=function(w){w.m[0]=this.m[0],w.m[1]=this.m[1],w.m[2]=this.m[2],w.m[3]=this.m[3],w.m[4]=this.m[4],w.m[5]=this.m[5]},m.prototype.point=function(w){var S=this.m;return{x:S[0]*w.x+S[2]*w.y+S[4],y:S[1]*w.x+S[3]*w.y+S[5]}},m.prototype.translate=function(w,S){return this.m[4]+=this.m[0]*w+this.m[2]*S,this.m[5]+=this.m[1]*w+this.m[3]*S,this},m.prototype.scale=function(w,S){return this.m[0]*=w,this.m[1]*=w,this.m[2]*=S,this.m[3]*=S,this},m.prototype.rotate=function(w){var S=Math.cos(w),A=Math.sin(w),_=this.m[0]*S+this.m[2]*A,E=this.m[1]*S+this.m[3]*A,k=this.m[0]*-A+this.m[2]*S,M=this.m[1]*-A+this.m[3]*S;return this.m[0]=_,this.m[1]=E,this.m[2]=k,this.m[3]=M,this},m.prototype.getTranslation=function(){return{x:this.m[4],y:this.m[5]}},m.prototype.skew=function(w,S){var A=this.m[0]+this.m[2]*S,_=this.m[1]+this.m[3]*S,E=this.m[2]+this.m[0]*w,k=this.m[3]+this.m[1]*w;return this.m[0]=A,this.m[1]=_,this.m[2]=E,this.m[3]=k,this},m.prototype.multiply=function(w){var S=this.m[0]*w.m[0]+this.m[2]*w.m[1],A=this.m[1]*w.m[0]+this.m[3]*w.m[1],_=this.m[0]*w.m[2]+this.m[2]*w.m[3],E=this.m[1]*w.m[2]+this.m[3]*w.m[3],k=this.m[0]*w.m[4]+this.m[2]*w.m[5]+this.m[4],M=this.m[1]*w.m[4]+this.m[3]*w.m[5]+this.m[5];return this.m[0]=S,this.m[1]=A,this.m[2]=_,this.m[3]=E,this.m[4]=k,this.m[5]=M,this},m.prototype.invert=function(){var w=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),S=this.m[3]*w,A=-this.m[1]*w,_=-this.m[2]*w,E=this.m[0]*w,k=w*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),M=w*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=S,this.m[1]=A,this.m[2]=_,this.m[3]=E,this.m[4]=k,this.m[5]=M,this},m.prototype.getMatrix=function(){return this.m},m.prototype.setAbsolutePosition=function(w,S){var A=this.m[0],_=this.m[1],E=this.m[2],k=this.m[3],M=this.m[4],T=this.m[5],C=(A*(S-T)-_*(w-M))/(A*k-_*E),R=(w-M-E*C)/A;return this.translate(R,C)},m.prototype.decompose=function(){var w=this.m[0],S=this.m[1],A=this.m[2],_=this.m[3],E=this.m[4],k=this.m[5],M=w*_-S*A,T={x:E,y:k,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(w!=0||S!=0){var C=Math.sqrt(w*w+S*S);T.rotation=S>0?Math.acos(w/C):-Math.acos(w/C),T.scaleX=C,T.scaleY=M/C,T.skewX=(w*A+S*_)/M,T.skewY=0}else if(A!=0||_!=0){var R=Math.sqrt(A*A+_*_);T.rotation=Math.PI/2-(_>0?Math.acos(-A/R):-Math.acos(A/R)),T.scaleX=M/R,T.scaleY=R,T.skewX=0,T.skewY=(w*A+S*_)/M}return T.rotation=r.Util._getRotation(T.rotation),T},m}();r.Transform=n;var i="[object Array]",a="[object Number]",o="[object String]",s="[object Boolean]",u=Math.PI/180,l=180/Math.PI,f="#",c="",d="0",h="Konva warning: ",p="Konva error: ",g="rgb(",b={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},v=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,y=[];r.Util={_isElement:function(m){return!!(m&&m.nodeType==1)},_isFunction:function(m){return!!(m&&m.constructor&&m.call&&m.apply)},_isPlainObject:function(m){return!!m&&m.constructor===Object},_isArray:function(m){return Object.prototype.toString.call(m)===i},_isNumber:function(m){return Object.prototype.toString.call(m)===a&&!isNaN(m)&&isFinite(m)},_isString:function(m){return Object.prototype.toString.call(m)===o},_isBoolean:function(m){return Object.prototype.toString.call(m)===s},isObject:function(m){return m instanceof Object},isValidSelector:function(m){if(typeof m!="string")return!1;var w=m[0];return w==="#"||w==="."||w===w.toUpperCase()},_sign:function(m){return m===0||m>0?1:-1},requestAnimFrame:function(m){y.push(m),y.length===1&&requestAnimationFrame(function(){var w=y;y=[],w.forEach(function(S){S()})})},createCanvasElement:function(){var m=document.createElement("canvas");try{m.style=m.style||{}}catch{}return m},createImageElement:function(){return document.createElement("img")},_isInDocument:function(m){for(;m=m.parentNode;)if(m==document)return!0;return!1},_simplifyArray:function(m){var w=[],S=m.length,A=r.Util,_,E;for(_=0;_<S;_++)E=m[_],A._isNumber(E)?E=Math.round(E*1e3)/1e3:A._isString(E)||(E=E.toString()),w.push(E);return w},_urlToImage:function(m,w){var S=new e.glob.Image;S.onload=function(){w(S)},S.src=m},_rgbToHex:function(m,w,S){return((1<<24)+(m<<16)+(w<<8)+S).toString(16).slice(1)},_hexToRgb:function(m){m=m.replace(f,c);var w=parseInt(m,16);return{r:w>>16&255,g:w>>8&255,b:w&255}},getRandomColor:function(){for(var m=(Math.random()*16777215<<0).toString(16);m.length<6;)m=d+m;return f+m},get:function(m,w){return m===void 0?w:m},getRGB:function(m){var w;return m in b?(w=b[m],{r:w[0],g:w[1],b:w[2]}):m[0]===f?this._hexToRgb(m.substring(1)):m.substr(0,4)===g?(w=v.exec(m.replace(/ /g,"")),{r:parseInt(w[1],10),g:parseInt(w[2],10),b:parseInt(w[3],10)}):{r:0,g:0,b:0}},colorToRGBA:function(m){return m=m||"black",r.Util._namedColorToRBA(m)||r.Util._hex3ColorToRGBA(m)||r.Util._hex6ColorToRGBA(m)||r.Util._rgbColorToRGBA(m)||r.Util._rgbaColorToRGBA(m)||r.Util._hslColorToRGBA(m)},_namedColorToRBA:function(m){var w=b[m.toLowerCase()];return w?{r:w[0],g:w[1],b:w[2],a:1}:null},_rgbColorToRGBA:function(m){if(m.indexOf("rgb(")===0){m=m.match(/rgb\(([^)]+)\)/)[1];var w=m.split(/ *, */).map(Number);return{r:w[0],g:w[1],b:w[2],a:1}}},_rgbaColorToRGBA:function(m){if(m.indexOf("rgba(")===0){m=m.match(/rgba\(([^)]+)\)/)[1];var w=m.split(/ *, */).map(Number);return{r:w[0],g:w[1],b:w[2],a:w[3]}}},_hex6ColorToRGBA:function(m){if(m[0]==="#"&&m.length===7)return{r:parseInt(m.slice(1,3),16),g:parseInt(m.slice(3,5),16),b:parseInt(m.slice(5,7),16),a:1}},_hex3ColorToRGBA:function(m){if(m[0]==="#"&&m.length===4)return{r:parseInt(m[1]+m[1],16),g:parseInt(m[2]+m[2],16),b:parseInt(m[3]+m[3],16),a:1}},_hslColorToRGBA:function(m){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(m)){var w=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(m);w[0];var S=w.slice(1),A=Number(S[0])/360,_=Number(S[1])/100,E=Number(S[2])/100,k=void 0,M=void 0,T=void 0;if(_===0)return T=E*255,{r:Math.round(T),g:Math.round(T),b:Math.round(T),a:1};E<.5?k=E*(1+_):k=E+_-E*_;for(var C=2*E-k,R=[0,0,0],x=0;x<3;x++)M=A+1/3*-(x-1),M<0&&M++,M>1&&M--,6*M<1?T=C+(k-C)*6*M:2*M<1?T=k:3*M<2?T=C+(k-C)*(2/3-M)*6:T=C,R[x]=T*255;return{r:Math.round(R[0]),g:Math.round(R[1]),b:Math.round(R[2]),a:1}}},haveIntersection:function(m,w){return!(w.x>m.x+m.width||w.x+w.width<m.x||w.y>m.y+m.height||w.y+w.height<m.y)},cloneObject:function(m){var w={};for(var S in m)this._isPlainObject(m[S])?w[S]=this.cloneObject(m[S]):this._isArray(m[S])?w[S]=this.cloneArray(m[S]):w[S]=m[S];return w},cloneArray:function(m){return m.slice(0)},_degToRad:function(m){return m*u},_radToDeg:function(m){return m*l},_getRotation:function(m){return e.Konva.angleDeg?r.Util._radToDeg(m):m},_capitalize:function(m){return m.charAt(0).toUpperCase()+m.slice(1)},throw:function(m){throw new Error(p+m)},error:function(m){console.error(p+m)},warn:function(m){e.Konva.showWarnings&&console.warn(h+m)},extend:function(m,w){function S(){this.constructor=m}S.prototype=w.prototype;var A=m.prototype;m.prototype=new S;for(var _ in A)A.hasOwnProperty(_)&&(m.prototype[_]=A[_]);m.__super__=w.prototype,m.super=w},_getControlPoints:function(m,w,S,A,_,E,k){var M=Math.sqrt(Math.pow(S-m,2)+Math.pow(A-w,2)),T=Math.sqrt(Math.pow(_-S,2)+Math.pow(E-A,2)),C=k*M/(M+T),R=k*T/(M+T),x=S-C*(_-m),B=A-C*(E-w),D=S+R*(_-m),O=A+R*(E-w);return[x,B,D,O]},_expandPoints:function(m,w){var S=m.length,A=[],_,E;for(_=2;_<S-2;_+=2)E=r.Util._getControlPoints(m[_-2],m[_-1],m[_],m[_+1],m[_+2],m[_+3],w),!isNaN(E[0])&&(A.push(E[0]),A.push(E[1]),A.push(m[_]),A.push(m[_+1]),A.push(E[2]),A.push(E[3]));return A},each:function(m,w){for(var S in m)w(S,m[S])},_inRange:function(m,w,S){return w<=m&&m<S},_getProjectionToSegment:function(m,w,S,A,_,E){var k,M,T,C=(m-S)*(m-S)+(w-A)*(w-A);if(C==0)k=m,M=w,T=(_-S)*(_-S)+(E-A)*(E-A);else{var R=((_-m)*(S-m)+(E-w)*(A-w))/C;R<0?(k=m,M=w,T=(m-_)*(m-_)+(w-E)*(w-E)):R>1?(k=S,M=A,T=(S-_)*(S-_)+(A-E)*(A-E)):(k=m+R*(S-m),M=w+R*(A-w),T=(k-_)*(k-_)+(M-E)*(M-E))}return[k,M,T]},_getProjectionToLine:function(m,w,S){var A=r.Util.cloneObject(m),_=Number.MAX_VALUE;return w.forEach(function(E,k){if(!(!S&&k===w.length-1)){var M=w[(k+1)%w.length],T=r.Util._getProjectionToSegment(E.x,E.y,M.x,M.y,m.x,m.y),C=T[0],R=T[1],x=T[2];x<_&&(A.x=C,A.y=R,_=x)}}),A},_prepareArrayForTween:function(m,w,S){var A,_=[],E=[];if(m.length>w.length){var k=w;w=m,m=k}for(A=0;A<m.length;A+=2)_.push({x:m[A],y:m[A+1]});for(A=0;A<w.length;A+=2)E.push({x:w[A],y:w[A+1]});var M=[];return E.forEach(function(T){var C=r.Util._getProjectionToLine(T,_,S);M.push(C.x),M.push(C.y)}),M},_prepareToStringify:function(m){var w;m.visitedByCircularReferenceRemoval=!0;for(var S in m)if(m.hasOwnProperty(S)&&m[S]&&typeof m[S]=="object"){if(w=Object.getOwnPropertyDescriptor(m,S),m[S].visitedByCircularReferenceRemoval||r.Util._isElement(m[S]))if(w.configurable)delete m[S];else return null;else if(r.Util._prepareToStringify(m[S])===null)if(w.configurable)delete m[S];else return null}return delete m.visitedByCircularReferenceRemoval,m},_assign:function(m,w){for(var S in w)m[S]=w[S];return m},_getFirstPointerId:function(m){return m.touches?m.changedTouches[0].identifier:999}}})(Jr);var ci={},Hr={},fr={};Object.defineProperty(fr,"__esModule",{value:!0});fr.getComponentValidator=fr.getBooleanValidator=fr.getNumberArrayValidator=fr.getFunctionValidator=fr.getStringOrGradientValidator=fr.getStringValidator=fr.getNumberOrAutoValidator=fr.getNumberOrArrayOfNumbersValidator=fr.getNumberValidator=fr.alphaComponent=fr.RGBComponent=void 0;var Gs=Vr,li=Jr;function $s(r){return li.Util._isString(r)?'"'+r+'"':Object.prototype.toString.call(r)==="[object Number]"||li.Util._isBoolean(r)?r:Object.prototype.toString.call(r)}function rW(r){return r>255?255:r<0?0:Math.round(r)}fr.RGBComponent=rW;function nW(r){return r>1?1:r<1e-4?1e-4:r}fr.alphaComponent=nW;function iW(){if(Gs.Konva.isUnminified)return function(r,e){return li.Util._isNumber(r)||li.Util.warn($s(r)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),r}}fr.getNumberValidator=iW;function aW(r){if(Gs.Konva.isUnminified)return function(e,t){var n=li.Util._isNumber(e),i=li.Util._isArray(e)&&e.length==r;return!n&&!i&&li.Util.warn($s(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or Array<number>('+r+")"),e}}fr.getNumberOrArrayOfNumbersValidator=aW;function oW(){if(Gs.Konva.isUnminified)return function(r,e){var t=li.Util._isNumber(r),n=r==="auto";return t||n||li.Util.warn($s(r)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),r}}fr.getNumberOrAutoValidator=oW;function sW(){if(Gs.Konva.isUnminified)return function(r,e){return li.Util._isString(r)||li.Util.warn($s(r)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),r}}fr.getStringValidator=sW;function uW(){if(Gs.Konva.isUnminified)return function(r,e){var t=li.Util._isString(r),n=Object.prototype.toString.call(r)==="[object CanvasGradient]";return t||n||li.Util.warn($s(r)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),r}}fr.getStringOrGradientValidator=uW;function lW(){if(Gs.Konva.isUnminified)return function(r,e){return li.Util._isFunction(r)||li.Util.warn($s(r)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),r}}fr.getFunctionValidator=lW;function fW(){if(Gs.Konva.isUnminified)return function(r,e){return li.Util._isArray(r)?r.forEach(function(t){li.Util._isNumber(t)||li.Util.warn('"'+e+'" attribute has non numeric element '+t+". Make sure that all elements are numbers.")}):li.Util.warn($s(r)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.'),r}}fr.getNumberArrayValidator=fW;function cW(){if(Gs.Konva.isUnminified)return function(r,e){var t=r===!0||r===!1;return t||li.Util.warn($s(r)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),r}}fr.getBooleanValidator=cW;function hW(r){if(Gs.Konva.isUnminified)return function(e,t){return li.Util.isObject(e)||li.Util.warn($s(e)+' is a not valid value for "'+t+'" attribute. The value should be an object with properties '+r),e}}fr.getComponentValidator=hW;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Factory=void 0;var e=Jr,t=fr,n="get",i="set";r.Factory={addGetterSetter:function(a,o,s,u,l){r.Factory.addGetter(a,o,s),r.Factory.addSetter(a,o,u,l),r.Factory.addOverloadedGetterSetter(a,o)},addGetter:function(a,o,s){var u=n+e.Util._capitalize(o);a.prototype[u]=a.prototype[u]||function(){var l=this.attrs[o];return l===void 0?s:l}},addSetter:function(a,o,s,u){var l=i+e.Util._capitalize(o);a.prototype[l]||r.Factory.overWriteSetter(a,o,s,u)},overWriteSetter:function(a,o,s,u){var l=i+e.Util._capitalize(o);a.prototype[l]=function(f){return s&&f!==void 0&&f!==null&&(f=s.call(this,f,o)),this._setAttr(o,f),u&&u.call(this),this}},addComponentsGetterSetter:function(a,o,s,u,l){var f=s.length,c=e.Util._capitalize,d=n+c(o),h=i+c(o),p,g;a.prototype[d]=function(){var v={};for(p=0;p<f;p++)g=s[p],v[g]=this.getAttr(o+c(g));return v};var b=t.getComponentValidator(s);a.prototype[h]=function(v){var y=this.attrs[o],m;u&&(v=u.call(this,v)),b&&b.call(this,v,o);for(m in v)v.hasOwnProperty(m)&&this._setAttr(o+c(m),v[m]);return this._fireChangeEvent(o,y,v),l&&l.call(this),this},r.Factory.addOverloadedGetterSetter(a,o)},addOverloadedGetterSetter:function(a,o){var s=e.Util._capitalize(o),u=i+s,l=n+s;a.prototype[o]=function(){return arguments.length?(this[u](arguments[0]),this):this[l]()}},addDeprecatedGetterSetter:function(a,o,s,u){e.Util.error("Adding deprecated "+o);var l=n+e.Util._capitalize(o),f=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";a.prototype[l]=function(){e.Util.error(f);var c=this.attrs[o];return c===void 0?s:c},r.Factory.addSetter(a,o,u,function(){e.Util.error(f)}),r.Factory.addOverloadedGetterSetter(a,o)},backCompat:function(a,o){e.Util.each(o,function(s,u){var l=a.prototype[u],f=n+e.Util._capitalize(s),c=i+e.Util._capitalize(s);function d(){l.apply(this,arguments),e.Util.error('"'+s+'" method is deprecated and will be removed soon. Use ""'+u+'" instead.')}a.prototype[s]=d,a.prototype[f]=d,a.prototype[c]=d})},afterSetFilter:function(){this._filterUpToDate=!1}}})(Hr);var Eo={},Ms={},u4=kt&&kt.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ms,"__esModule",{value:!0});Ms.HitContext=Ms.SceneContext=Ms.Context=void 0;var q2=Jr,l4=Vr,w3=",",dW="(",pW=")",vW="([",gW="])",mW=";",yW="()",bW="=",_3=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],wW=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],_W=100,Lv=function(){function r(e){this.canvas=e,this._context=e._canvas.getContext("2d"),l4.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}return r.prototype.fillShape=function(e){e.fillEnabled()&&this._fill(e)},r.prototype._fill=function(e){},r.prototype.strokeShape=function(e){e.hasStroke()&&this._stroke(e)},r.prototype._stroke=function(e){},r.prototype.fillStrokeShape=function(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))},r.prototype.getTrace=function(e){var t=this.traceArr,n=t.length,i="",a,o,s,u;for(a=0;a<n;a++)o=t[a],s=o.method,s?(u=o.args,i+=s,e?i+=yW:q2.Util._isArray(u[0])?i+=vW+u.join(w3)+gW:i+=dW+u.join(w3)+pW):(i+=o.property,e||(i+=bW+o.val)),i+=mW;return i},r.prototype.clearTrace=function(){this.traceArr=[]},r.prototype._trace=function(e){var t=this.traceArr,n;t.push(e),n=t.length,n>=_W&&t.shift()},r.prototype.reset=function(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)},r.prototype.getCanvas=function(){return this.canvas},r.prototype.clear=function(e){var t=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,t.getWidth()/t.pixelRatio,t.getHeight()/t.pixelRatio)},r.prototype._applyLineCap=function(e){var t=e.getLineCap();t&&this.setAttr("lineCap",t)},r.prototype._applyOpacity=function(e){var t=e.getAbsoluteOpacity();t!==1&&this.setAttr("globalAlpha",t)},r.prototype._applyLineJoin=function(e){var t=e.attrs.lineJoin;t&&this.setAttr("lineJoin",t)},r.prototype.setAttr=function(e,t){this._context[e]=t},r.prototype.arc=function(e,t,n,i,a,o){this._context.arc(e,t,n,i,a,o)},r.prototype.arcTo=function(e,t,n,i,a){this._context.arcTo(e,t,n,i,a)},r.prototype.beginPath=function(){this._context.beginPath()},r.prototype.bezierCurveTo=function(e,t,n,i,a,o){this._context.bezierCurveTo(e,t,n,i,a,o)},r.prototype.clearRect=function(e,t,n,i){this._context.clearRect(e,t,n,i)},r.prototype.clip=function(){this._context.clip()},r.prototype.closePath=function(){this._context.closePath()},r.prototype.createImageData=function(e,t){var n=arguments;if(n.length===2)return this._context.createImageData(e,t);if(n.length===1)return this._context.createImageData(e)},r.prototype.createLinearGradient=function(e,t,n,i){return this._context.createLinearGradient(e,t,n,i)},r.prototype.createPattern=function(e,t){return this._context.createPattern(e,t)},r.prototype.createRadialGradient=function(e,t,n,i,a,o){return this._context.createRadialGradient(e,t,n,i,a,o)},r.prototype.drawImage=function(e,t,n,i,a,o,s,u,l){var f=arguments,c=this._context;f.length===3?c.drawImage(e,t,n):f.length===5?c.drawImage(e,t,n,i,a):f.length===9&&c.drawImage(e,t,n,i,a,o,s,u,l)},r.prototype.ellipse=function(e,t,n,i,a,o,s,u){this._context.ellipse(e,t,n,i,a,o,s,u)},r.prototype.isPointInPath=function(e,t){return this._context.isPointInPath(e,t)},r.prototype.fill=function(){this._context.fill()},r.prototype.fillRect=function(e,t,n,i){this._context.fillRect(e,t,n,i)},r.prototype.strokeRect=function(e,t,n,i){this._context.strokeRect(e,t,n,i)},r.prototype.fillText=function(e,t,n){this._context.fillText(e,t,n)},r.prototype.measureText=function(e){return this._context.measureText(e)},r.prototype.getImageData=function(e,t,n,i){return this._context.getImageData(e,t,n,i)},r.prototype.lineTo=function(e,t){this._context.lineTo(e,t)},r.prototype.moveTo=function(e,t){this._context.moveTo(e,t)},r.prototype.rect=function(e,t,n,i){this._context.rect(e,t,n,i)},r.prototype.putImageData=function(e,t,n){this._context.putImageData(e,t,n)},r.prototype.quadraticCurveTo=function(e,t,n,i){this._context.quadraticCurveTo(e,t,n,i)},r.prototype.restore=function(){this._context.restore()},r.prototype.rotate=function(e){this._context.rotate(e)},r.prototype.save=function(){this._context.save()},r.prototype.scale=function(e,t){this._context.scale(e,t)},r.prototype.setLineDash=function(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)},r.prototype.getLineDash=function(){return this._context.getLineDash()},r.prototype.setTransform=function(e,t,n,i,a,o){this._context.setTransform(e,t,n,i,a,o)},r.prototype.stroke=function(){this._context.stroke()},r.prototype.strokeText=function(e,t,n,i){this._context.strokeText(e,t,n,i)},r.prototype.transform=function(e,t,n,i,a,o){this._context.transform(e,t,n,i,a,o)},r.prototype.translate=function(e,t){this._context.translate(e,t)},r.prototype._enableTrace=function(){var e=this,t=_3.length,n=q2.Util._simplifyArray,i=this.setAttr,a,o,s=function(u){var l=e[u],f;e[u]=function(){return o=n(Array.prototype.slice.call(arguments,0)),f=l.apply(e,arguments),e._trace({method:u,args:o}),f}};for(a=0;a<t;a++)s(_3[a]);e.setAttr=function(){i.apply(e,arguments);var u=arguments[0],l=arguments[1];(u==="shadowOffsetX"||u==="shadowOffsetY"||u==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),e._trace({property:u,val:l})}},r.prototype._applyGlobalCompositeOperation=function(e){var t=e.getGlobalCompositeOperation();t!=="source-over"&&this.setAttr("globalCompositeOperation",t)},r}();Ms.Context=Lv;wW.forEach(function(r){Object.defineProperty(Lv.prototype,r,{get:function(){return this._context[r]},set:function(e){this._context[r]=e}})});var xW=function(r){u4(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._fillColor=function(t){var n=t.fill();this.setAttr("fillStyle",n),t._fillFunc(this)},e.prototype._fillPattern=function(t){var n=t.getFillPatternX(),i=t.getFillPatternY(),a=l4.Konva.getAngle(t.getFillPatternRotation()),o=t.getFillPatternOffsetX(),s=t.getFillPatternOffsetY();t.getFillPatternScaleX(),t.getFillPatternScaleY(),(n||i)&&this.translate(n||0,i||0),a&&this.rotate(a),(o||s)&&this.translate(-1*o,-1*s),this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)},e.prototype._fillLinearGradient=function(t){var n=t._getLinearGradient();n&&(this.setAttr("fillStyle",n),t._fillFunc(this))},e.prototype._fillRadialGradient=function(t){var n=t._getRadialGradient();n&&(this.setAttr("fillStyle",n),t._fillFunc(this))},e.prototype._fill=function(t){var n=t.fill(),i=t.getFillPriority();if(n&&i==="color"){this._fillColor(t);return}var a=t.getFillPatternImage();if(a&&i==="pattern"){this._fillPattern(t);return}var o=t.getFillLinearGradientColorStops();if(o&&i==="linear-gradient"){this._fillLinearGradient(t);return}var s=t.getFillRadialGradientColorStops();if(s&&i==="radial-gradient"){this._fillRadialGradient(t);return}n?this._fillColor(t):a?this._fillPattern(t):o?this._fillLinearGradient(t):s&&this._fillRadialGradient(t)},e.prototype._strokeLinearGradient=function(t){var n=t.getStrokeLinearGradientStartPoint(),i=t.getStrokeLinearGradientEndPoint(),a=t.getStrokeLinearGradientColorStops(),o=this.createLinearGradient(n.x,n.y,i.x,i.y);if(a){for(var s=0;s<a.length;s+=2)o.addColorStop(a[s],a[s+1]);this.setAttr("strokeStyle",o)}},e.prototype._stroke=function(t){var n=t.dash(),i=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!i){this.save();var a=this.getCanvas().getPixelRatio();this.setTransform(a,0,0,a,0,0)}this._applyLineCap(t),n&&t.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var o=t.getStrokeLinearGradientColorStops();o?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),i||this.restore()}},e.prototype._applyShadow=function(t){var n=q2.Util,i=n.get(t.getShadowRGBA(),"black"),a=n.get(t.getShadowBlur(),5),o=n.get(t.getShadowOffset(),{x:0,y:0}),s=t.getAbsoluteScale(),u=this.canvas.getPixelRatio(),l=s.x*u,f=s.y*u;this.setAttr("shadowColor",i),this.setAttr("shadowBlur",a*Math.min(Math.abs(l),Math.abs(f))),this.setAttr("shadowOffsetX",o.x*l),this.setAttr("shadowOffsetY",o.y*f)},e}(Lv);Ms.SceneContext=xW;var SW=function(r){u4(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._fill=function(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()},e.prototype.strokeShape=function(t){t.hasHitStroke()&&this._stroke(t)},e.prototype._stroke=function(t){if(t.hasHitStroke()){var n=t.getStrokeScaleEnabled();if(!n){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(t);var a=t.hitStrokeWidth(),o=a==="auto"?t.strokeWidth():a;this.setAttr("lineWidth",o),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),n||this.restore()}},e}(Lv);Ms.HitContext=SW;var f4=kt&&kt.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Eo,"__esModule",{value:!0});Eo.HitCanvas=Eo.SceneCanvas=Eo.Canvas=void 0;var G2=Jr,c4=Ms,h4=Vr,EW=Hr,CW=fr,Vd;function AW(){if(Vd)return Vd;var r=G2.Util.createCanvasElement(),e=r.getContext("2d");return Vd=function(){var t=h4.Konva._global.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/n}(),Vd}var Nv=function(){function r(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var t=e||{},n=t.pixelRatio||h4.Konva.pixelRatio||AW();this.pixelRatio=n,this._canvas=G2.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}return r.prototype.getContext=function(){return this.context},r.prototype.getPixelRatio=function(){return this.pixelRatio},r.prototype.setPixelRatio=function(e){var t=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/t,this.getHeight()/t)},r.prototype.setWidth=function(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var t=this.pixelRatio,n=this.getContext()._context;n.scale(t,t)},r.prototype.setHeight=function(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var t=this.pixelRatio,n=this.getContext()._context;n.scale(t,t)},r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.setSize=function(e,t){this.setWidth(e||0),this.setHeight(t||0)},r.prototype.toDataURL=function(e,t){try{return this._canvas.toDataURL(e,t)}catch{try{return this._canvas.toDataURL()}catch(i){return G2.Util.error("Unable to get data URL. "+i.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}},r}();Eo.Canvas=Nv;EW.Factory.addGetterSetter(Nv,"pixelRatio",void 0,CW.getNumberValidator());var TW=function(r){f4(e,r);function e(t){t===void 0&&(t={width:0,height:0});var n=r.call(this,t)||this;return n.context=new c4.SceneContext(n),n.setSize(t.width,t.height),n}return e}(Nv);Eo.SceneCanvas=TW;var kW=function(r){f4(e,r);function e(t){t===void 0&&(t={width:0,height:0});var n=r.call(this,t)||this;return n.hitCanvas=!0,n.context=new c4.HitContext(n),n.setSize(t.width,t.height),n}return e}(Nv);Eo.HitCanvas=kW;var Pv={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.DD=void 0;var e=Vr,t=Jr;r.DD={get isDragging(){var n=!1;return r.DD._dragElements.forEach(function(i){i.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){var n;return r.DD._dragElements.forEach(function(i){n=i.node}),n},_dragElements:new Map,_drag:function(n){var i=[];r.DD._dragElements.forEach(function(a,o){var s=a.node,u=s.getStage();u.setPointersPositions(n),a.pointerId===void 0&&(a.pointerId=t.Util._getFirstPointerId(n));var l=u._changedPointerPositions.find(function(d){return d.id===a.pointerId});if(l){if(a.dragStatus!=="dragging"){var f=s.dragDistance(),c=Math.max(Math.abs(l.x-a.startPointerPos.x),Math.abs(l.y-a.startPointerPos.y));if(c<f||(s.startDrag({evt:n}),!s.isDragging()))return}s._setDragPosition(n,a),i.push(s)}}),i.forEach(function(a){a.fire("dragmove",{type:"dragmove",target:a,evt:n},!0)})},_endDragBefore:function(n){r.DD._dragElements.forEach(function(i,a){var o=i.node,s=o.getStage();n&&s.setPointersPositions(n);var u=s._changedPointerPositions.find(function(f){return f.id===i.pointerId});if(u){(i.dragStatus==="dragging"||i.dragStatus==="stopped")&&(r.DD.justDragged=!0,e.Konva.listenClickTap=!1,i.dragStatus="stopped");var l=i.node.getLayer()||i.node instanceof e.Konva.Stage&&i.node;l&&l.batchDraw()}})},_endDragAfter:function(n){r.DD._dragElements.forEach(function(i,a){i.dragStatus==="stopped"&&i.node.fire("dragend",{type:"dragend",target:i.node,evt:n},!0),i.dragStatus!=="dragging"&&r.DD._dragElements.delete(a)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",r.DD._endDragBefore,!0),window.addEventListener("touchend",r.DD._endDragBefore,!0),window.addEventListener("mousemove",r.DD._drag),window.addEventListener("touchmove",r.DD._drag),window.addEventListener("mouseup",r.DD._endDragAfter,!1),window.addEventListener("touchend",r.DD._endDragAfter,!1))})(Pv);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Node=r._removeName=r._addName=r._removeId=r.names=r.ids=void 0;var e=Jr,t=Hr,n=Eo,i=Vr,a=Pv,o=fr;r.ids={},r.names={};var s=function(V,I){I&&(r.ids[I]=V)},u=function(V,I){V&&r.ids[V]===I&&delete r.ids[V]};r._removeId=u;var l=function(V,I){I&&(r.names[I]||(r.names[I]=[]),r.names[I].push(V))};r._addName=l;var f=function(V,I){if(V){var z=r.names[V];if(z){for(var P=0;P<z.length;P++){var q=z[P];q._id===I&&z.splice(P,1)}z.length===0&&delete r.names[V]}}};r._removeName=f;var c="absoluteOpacity",d="allEventListeners",h="absoluteTransform",p="absoluteScale",g="canvas",b="Change",v="children",y="konva",m="listening",w="mouseenter",S="mouseleave",A="name",_="set",E="Shape",k=" ",M="stage",T="transform",C="Stage",R="visible",x=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(k),B=new e.Collection,D=1,O=function(){function V(I){this._id=D++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this.children=B,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(I),this._shouldFireChangeEvents=!0}return V.prototype.hasChildren=function(){return!1},V.prototype.getChildren=function(){return B},V.prototype._clearCache=function(I){(I===T||I===h)&&this._cache.get(I)?this._cache.get(I).dirty=!0:I?this._cache.delete(I):this._cache.clear()},V.prototype._getCache=function(I,z){var P=this._cache.get(I),q=I===T||I===h,F=P===void 0||q&&P.dirty===!0;return F&&(P=z.call(this),this._cache.set(I,P)),P},V.prototype._calculate=function(I,z,P){var q=this;if(!this._attachedDepsListeners.get(I)){var F=z.map(function(U){return U+"Change.konva"}).join(k);this.on(F,function(){q._clearCache(I)}),this._attachedDepsListeners.set(I,!0)}return this._getCache(I,P)},V.prototype._getCanvasCache=function(){return this._cache.get(g)},V.prototype._clearSelfAndDescendantCache=function(I,z){this._clearCache(I),z&&I===h&&this.fire("_clearTransformCache"),!this.isCached()&&this.children&&this.children.each(function(P){P._clearSelfAndDescendantCache(I,!0)})},V.prototype.clearCache=function(){return this._cache.delete(g),this._clearSelfAndDescendantCache(),this},V.prototype.cache=function(I){var z=I||{},P={};(z.x===void 0||z.y===void 0||z.width===void 0||z.height===void 0)&&(P=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var q=Math.ceil(z.width||P.width),F=Math.ceil(z.height||P.height),U=z.pixelRatio,W=z.x===void 0?P.x:z.x,X=z.y===void 0?P.y:z.y,te=z.offset||0,ne=z.drawBorder||!1;if(!q||!F){e.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}q+=te*2,F+=te*2,W-=te,X-=te;var he=new n.SceneCanvas({pixelRatio:U,width:q,height:F}),ve=new n.SceneCanvas({pixelRatio:U,width:0,height:0}),Ce=new n.HitCanvas({pixelRatio:1,width:q,height:F}),Le=he.getContext(),K=Ce.getContext();return Ce.isCache=!0,he.isCache=!0,this._cache.delete("canvas"),this._filterUpToDate=!1,z.imageSmoothingEnabled===!1&&(he.getContext()._context.imageSmoothingEnabled=!1,ve.getContext()._context.imageSmoothingEnabled=!1),Le.save(),K.save(),Le.translate(-W,-X),K.translate(-W,-X),this._isUnderCache=!0,this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(p),this.drawScene(he,this),this.drawHit(Ce,this),this._isUnderCache=!1,Le.restore(),K.restore(),ne&&(Le.save(),Le.beginPath(),Le.rect(0,0,q,F),Le.closePath(),Le.setAttr("strokeStyle","red"),Le.setAttr("lineWidth",5),Le.stroke(),Le.restore()),this._cache.set(g,{scene:he,filter:ve,hit:Ce,x:W,y:X}),this},V.prototype.isCached=function(){return this._cache.has("canvas")},V.prototype.getClientRect=function(I){throw new Error('abstract "getClientRect" method call')},V.prototype._transformedRect=function(I,z){var P=[{x:I.x,y:I.y},{x:I.x+I.width,y:I.y},{x:I.x+I.width,y:I.y+I.height},{x:I.x,y:I.y+I.height}],q,F,U,W,X=this.getAbsoluteTransform(z);return P.forEach(function(te){var ne=X.point(te);q===void 0&&(q=U=ne.x,F=W=ne.y),q=Math.min(q,ne.x),F=Math.min(F,ne.y),U=Math.max(U,ne.x),W=Math.max(W,ne.y)}),{x:q,y:F,width:U-q,height:W-F}},V.prototype._drawCachedSceneCanvas=function(I){I.save(),I._applyOpacity(this),I._applyGlobalCompositeOperation(this);var z=this._getCanvasCache();I.translate(z.x,z.y);var P=this._getCachedSceneCanvas(),q=P.pixelRatio;I.drawImage(P._canvas,0,0,P.width/q,P.height/q),I.restore()},V.prototype._drawCachedHitCanvas=function(I){var z=this._getCanvasCache(),P=z.hit;I.save(),I.translate(z.x,z.y),I.drawImage(P._canvas,0,0),I.restore()},V.prototype._getCachedSceneCanvas=function(){var I=this.filters(),z=this._getCanvasCache(),P=z.scene,q=z.filter,F=q.getContext(),U,W,X,te;if(I){if(!this._filterUpToDate){var ne=P.pixelRatio;q.setSize(P.width/P.pixelRatio,P.height/P.pixelRatio);try{for(U=I.length,F.clear(),F.drawImage(P._canvas,0,0,P.getWidth()/ne,P.getHeight()/ne),W=F.getImageData(0,0,q.getWidth(),q.getHeight()),X=0;X<U;X++){if(te=I[X],typeof te!="function"){e.Util.error("Filter should be type of function, but got "+typeof te+" instead. Please check correct filters");continue}te.call(this,W),F.putImageData(W,0,0)}}catch(he){e.Util.error("Unable to apply filter. "+he.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return q}return P},V.prototype.on=function(I,z){if(this._cache&&this._cache.delete(d),arguments.length===3)return this._delegate.apply(this,arguments);var P=I.split(k),q=P.length,F,U,W,X,te;for(F=0;F<q;F++)U=P[F],W=U.split("."),X=W[0],te=W[1]||"",this.eventListeners[X]||(this.eventListeners[X]=[]),this.eventListeners[X].push({name:te,handler:z});return this},V.prototype.off=function(I,z){var P=(I||"").split(k),q=P.length,F,U,W,X,te,ne;if(this._cache&&this._cache.delete(d),!I)for(U in this.eventListeners)this._off(U);for(F=0;F<q;F++)if(W=P[F],X=W.split("."),te=X[0],ne=X[1],te)this.eventListeners[te]&&this._off(te,ne,z);else for(U in this.eventListeners)this._off(U,ne,z);return this},V.prototype.dispatchEvent=function(I){var z={target:this,type:I.type,evt:I};return this.fire(I.type,z),this},V.prototype.addEventListener=function(I,z){return this.on(I,function(P){z.call(this,P.evt)}),this},V.prototype.removeEventListener=function(I){return this.off(I),this},V.prototype._delegate=function(I,z,P){var q=this;this.on(I,function(F){for(var U=F.target.findAncestors(z,!0,q),W=0;W<U.length;W++)F=e.Util.cloneObject(F),F.currentTarget=U[W],P.call(U[W],F)})},V.prototype.remove=function(){return this.isDragging()&&this.stopDrag(),a.DD._dragElements.delete(this._id),this._remove(),this},V.prototype._clearCaches=function(){this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(p),this._clearSelfAndDescendantCache(M),this._clearSelfAndDescendantCache(R),this._clearSelfAndDescendantCache(m)},V.prototype._remove=function(){this._clearCaches();var I=this.getParent();I&&I.children&&(I.children.splice(this.index,1),I._setChildrenIndices(),this.parent=null)},V.prototype.destroy=function(){r._removeId(this.id(),this);for(var I=(this.name()||"").split(/\s/g),z=0;z<I.length;z++){var P=I[z];r._removeName(P,this._id)}return this.remove(),this},V.prototype.getAttr=function(I){var z="get"+e.Util._capitalize(I);return e.Util._isFunction(this[z])?this[z]():this.attrs[I]},V.prototype.getAncestors=function(){for(var I=this.getParent(),z=new e.Collection;I;)z.push(I),I=I.getParent();return z},V.prototype.getAttrs=function(){return this.attrs||{}},V.prototype.setAttrs=function(I){var z=this;return this._batchTransformChanges(function(){var P,q;if(!I)return z;for(P in I)P!==v&&(q=_+e.Util._capitalize(P),e.Util._isFunction(z[q])?z[q](I[P]):z._setAttr(P,I[P]))}),this},V.prototype.isListening=function(){return this._getCache(m,this._isListening)},V.prototype._isListening=function(I){var z=this.listening();if(!z)return!1;var P=this.getParent();return P&&P!==I&&this!==I?P._isListening(I):!0},V.prototype.isVisible=function(){return this._getCache(R,this._isVisible)},V.prototype._isVisible=function(I){var z=this.visible();if(!z)return!1;var P=this.getParent();return P&&P!==I&&this!==I?P._isVisible(I):!0},V.prototype.shouldDrawHit=function(I,z){if(z===void 0&&(z=!1),I)return this._isVisible(I)&&this._isListening(I);var P=this.getLayer(),q=!1;a.DD._dragElements.forEach(function(U){U.dragStatus==="dragging"&&(U.node.nodeType==="Stage"||U.node.getLayer()===P)&&(q=!0)});var F=!z&&!i.Konva.hitOnDragEnabled&&q;return this.isListening()&&this.isVisible()&&!F},V.prototype.show=function(){return this.visible(!0),this},V.prototype.hide=function(){return this.visible(!1),this},V.prototype.getZIndex=function(){return this.index||0},V.prototype.getAbsoluteZIndex=function(){var I=this.getDepth(),z=this,P=0,q,F,U,W;function X(te){for(q=[],F=te.length,U=0;U<F;U++)W=te[U],P++,W.nodeType!==E&&(q=q.concat(W.getChildren().toArray())),W._id===z._id&&(U=F);q.length>0&&q[0].getDepth()<=I&&X(q)}return z.nodeType!==C&&X(z.getStage().getChildren()),P},V.prototype.getDepth=function(){for(var I=0,z=this.parent;z;)I++,z=z.parent;return I},V.prototype._batchTransformChanges=function(I){this._batchingTransformChange=!0,I(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(T),this._clearSelfAndDescendantCache(h,!0)),this._needClearTransformCache=!1},V.prototype.setPosition=function(I){var z=this;return this._batchTransformChanges(function(){z.x(I.x),z.y(I.y)}),this},V.prototype.getPosition=function(){return{x:this.x(),y:this.y()}},V.prototype.getAbsolutePosition=function(I){for(var z=!1,P=this.parent;P;){if(P.isCached()){z=!0;break}P=P.parent}z&&!I&&(I=!0);var q=this.getAbsoluteTransform(I).getMatrix(),F=new e.Transform,U=this.offset();return F.m=q.slice(),F.translate(U.x,U.y),F.getTranslation()},V.prototype.setAbsolutePosition=function(I){var z=this._clearTransform();this.attrs.x=z.x,this.attrs.y=z.y,delete z.x,delete z.y,this._clearCache(T);var P=this._getAbsoluteTransform().copy();return P.invert(),P.translate(I.x,I.y),I={x:this.attrs.x+P.getTranslation().x,y:this.attrs.y+P.getTranslation().y},this._setTransform(z),this.setPosition({x:I.x,y:I.y}),this._clearCache(T),this._clearSelfAndDescendantCache(h),this},V.prototype._setTransform=function(I){var z;for(z in I)this.attrs[z]=I[z]},V.prototype._clearTransform=function(){var I={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,I},V.prototype.move=function(I){var z=I.x,P=I.y,q=this.x(),F=this.y();return z!==void 0&&(q+=z),P!==void 0&&(F+=P),this.setPosition({x:q,y:F}),this},V.prototype._eachAncestorReverse=function(I,z){var P=[],q=this.getParent(),F,U;if(!(z&&z._id===this._id)){for(P.unshift(this);q&&(!z||q._id!==z._id);)P.unshift(q),q=q.parent;for(F=P.length,U=0;U<F;U++)I(P[U])}},V.prototype.rotate=function(I){return this.rotation(this.rotation()+I),this},V.prototype.moveToTop=function(){if(!this.parent)return e.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var I=this.index;return this.parent.children.splice(I,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},V.prototype.moveUp=function(){if(!this.parent)return e.Util.warn("Node has no parent. moveUp function is ignored."),!1;var I=this.index,z=this.parent.getChildren().length;return I<z-1?(this.parent.children.splice(I,1),this.parent.children.splice(I+1,0,this),this.parent._setChildrenIndices(),!0):!1},V.prototype.moveDown=function(){if(!this.parent)return e.Util.warn("Node has no parent. moveDown function is ignored."),!1;var I=this.index;return I>0?(this.parent.children.splice(I,1),this.parent.children.splice(I-1,0,this),this.parent._setChildrenIndices(),!0):!1},V.prototype.moveToBottom=function(){if(!this.parent)return e.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var I=this.index;return I>0?(this.parent.children.splice(I,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1},V.prototype.setZIndex=function(I){if(!this.parent)return e.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(I<0||I>=this.parent.children.length)&&e.Util.warn("Unexpected value "+I+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var z=this.index;return this.parent.children.splice(z,1),this.parent.children.splice(I,0,this),this.parent._setChildrenIndices(),this},V.prototype.getAbsoluteOpacity=function(){return this._getCache(c,this._getAbsoluteOpacity)},V.prototype._getAbsoluteOpacity=function(){var I=this.opacity(),z=this.getParent();return z&&!z._isUnderCache&&(I*=z.getAbsoluteOpacity()),I},V.prototype.moveTo=function(I){return this.getParent()!==I&&(this._remove(),I.add(this)),this},V.prototype.toObject=function(){var I={},z=this.getAttrs(),P,q,F,U,W;I.attrs={};for(P in z)q=z[P],W=e.Util.isObject(q)&&!e.Util._isPlainObject(q)&&!e.Util._isArray(q),!W&&(F=typeof this[P]=="function"&&this[P],delete z[P],U=F?F.call(this):null,z[P]=q,U!==q&&(I.attrs[P]=q));return I.className=this.getClassName(),e.Util._prepareToStringify(I)},V.prototype.toJSON=function(){return JSON.stringify(this.toObject())},V.prototype.getParent=function(){return this.parent},V.prototype.findAncestors=function(I,z,P){var q=[];z&&this._isMatch(I)&&q.push(this);for(var F=this.parent;F;){if(F===P)return q;F._isMatch(I)&&q.push(F),F=F.parent}return q},V.prototype.isAncestorOf=function(I){return!1},V.prototype.findAncestor=function(I,z,P){return this.findAncestors(I,z,P)[0]},V.prototype._isMatch=function(I){if(!I)return!1;if(typeof I=="function")return I(this);var z=I.replace(/ /g,"").split(","),P=z.length,q,F;for(q=0;q<P;q++)if(F=z[q],e.Util.isValidSelector(F)||(e.Util.warn('Selector "'+F+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),e.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),e.Util.warn("Konva is awesome, right?")),F.charAt(0)==="#"){if(this.id()===F.slice(1))return!0}else if(F.charAt(0)==="."){if(this.hasName(F.slice(1)))return!0}else if(this.className===F||this.nodeType===F)return!0;return!1},V.prototype.getLayer=function(){var I=this.getParent();return I?I.getLayer():null},V.prototype.getStage=function(){return this._getCache(M,this._getStage)},V.prototype._getStage=function(){var I=this.getParent();if(I)return I.getStage()},V.prototype.fire=function(I,z,P){return z===void 0&&(z={}),z.target=z.target||this,P?this._fireAndBubble(I,z):this._fire(I,z),this},V.prototype.getAbsoluteTransform=function(I){return I?this._getAbsoluteTransform(I):this._getCache(h,this._getAbsoluteTransform)},V.prototype._getAbsoluteTransform=function(I){var z;if(I)return z=new e.Transform,this._eachAncestorReverse(function(X){var te=X.transformsEnabled();te==="all"?z.multiply(X.getTransform()):te==="position"&&z.translate(X.x()-X.offsetX(),X.y()-X.offsetY())},I),z;z=this._cache.get(h)||new e.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(z):z.reset();var P=this.transformsEnabled();if(P==="all")z.multiply(this.getTransform());else if(P==="position"){var q=this.attrs.x||0,F=this.attrs.y||0,U=this.attrs.offsetX||0,W=this.attrs.offsetY||0;z.translate(q-U,F-W)}return z.dirty=!1,z},V.prototype.getAbsoluteScale=function(I){for(var z=this;z;)z._isUnderCache&&(I=z),z=z.getParent();var P=this.getAbsoluteTransform(I),q=P.decompose();return{x:q.scaleX,y:q.scaleY}},V.prototype.getAbsoluteRotation=function(){return this.getAbsoluteTransform().decompose().rotation},V.prototype.getTransform=function(){return this._getCache(T,this._getTransform)},V.prototype._getTransform=function(){var I,z,P=this._cache.get(T)||new e.Transform;P.reset();var q=this.x(),F=this.y(),U=i.Konva.getAngle(this.rotation()),W=(I=this.attrs.scaleX)!==null&&I!==void 0?I:1,X=(z=this.attrs.scaleY)!==null&&z!==void 0?z:1,te=this.attrs.skewX||0,ne=this.attrs.skewY||0,he=this.attrs.offsetX||0,ve=this.attrs.offsetY||0;return(q!==0||F!==0)&&P.translate(q,F),U!==0&&P.rotate(U),(te!==0||ne!==0)&&P.skew(te,ne),(W!==1||X!==1)&&P.scale(W,X),(he!==0||ve!==0)&&P.translate(-1*he,-1*ve),P.dirty=!1,P},V.prototype.clone=function(I){var z=e.Util.cloneObject(this.attrs),P,q,F,U,W;for(P in I)z[P]=I[P];var X=new this.constructor(z);for(P in this.eventListeners)for(q=this.eventListeners[P],F=q.length,U=0;U<F;U++)W=q[U],W.name.indexOf(y)<0&&(X.eventListeners[P]||(X.eventListeners[P]=[]),X.eventListeners[P].push(W));return X},V.prototype._toKonvaCanvas=function(I){I=I||{};var z=this.getClientRect(),P=this.getStage(),q=I.x!==void 0?I.x:z.x,F=I.y!==void 0?I.y:z.y,U=I.pixelRatio||1,W=new n.SceneCanvas({width:I.width||z.width||(P?P.width():0),height:I.height||z.height||(P?P.height():0),pixelRatio:U}),X=W.getContext();return X.save(),(q||F)&&X.translate(-1*q,-1*F),this.drawScene(W),X.restore(),W},V.prototype.toCanvas=function(I){return this._toKonvaCanvas(I)._canvas},V.prototype.toDataURL=function(I){I=I||{};var z=I.mimeType||null,P=I.quality||null,q=this._toKonvaCanvas(I).toDataURL(z,P);return I.callback&&I.callback(q),q},V.prototype.toImage=function(I){if(!I||!I.callback)throw"callback required for toImage method config argument";var z=I.callback;delete I.callback,e.Util._urlToImage(this.toDataURL(I),function(P){z(P)})},V.prototype.setSize=function(I){return this.width(I.width),this.height(I.height),this},V.prototype.getSize=function(){return{width:this.width(),height:this.height()}},V.prototype.getClassName=function(){return this.className||this.nodeType},V.prototype.getType=function(){return this.nodeType},V.prototype.getDragDistance=function(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():i.Konva.dragDistance},V.prototype._off=function(I,z,P){var q=this.eventListeners[I],F,U,W;for(F=0;F<q.length;F++)if(U=q[F].name,W=q[F].handler,(U!=="konva"||z==="konva")&&(!z||U===z)&&(!P||P===W)){if(q.splice(F,1),q.length===0){delete this.eventListeners[I];break}F--}},V.prototype._fireChangeEvent=function(I,z,P){this._fire(I+b,{oldVal:z,newVal:P})},V.prototype.setId=function(I){var z=this.id();return r._removeId(z,this),s(this,I),this._setAttr("id",I),this},V.prototype.setName=function(I){var z=(this.name()||"").split(/\s/g),P=(I||"").split(/\s/g),q,F;for(F=0;F<z.length;F++)q=z[F],P.indexOf(q)===-1&&q&&r._removeName(q,this._id);for(F=0;F<P.length;F++)q=P[F],z.indexOf(q)===-1&&q&&r._addName(this,q);return this._setAttr(A,I),this},V.prototype.addName=function(I){if(!this.hasName(I)){var z=this.name(),P=z?z+" "+I:I;this.setName(P)}return this},V.prototype.hasName=function(I){if(!I)return!1;var z=this.name();if(!z)return!1;var P=(z||"").split(/\s/g);return P.indexOf(I)!==-1},V.prototype.removeName=function(I){var z=(this.name()||"").split(/\s/g),P=z.indexOf(I);return P!==-1&&(z.splice(P,1),this.setName(z.join(" "))),this},V.prototype.setAttr=function(I,z){var P=this[_+e.Util._capitalize(I)];return e.Util._isFunction(P)?P.call(this,z):this._setAttr(I,z),this},V.prototype._setAttr=function(I,z,P){var q=this.attrs[I];q===z&&!e.Util.isObject(z)||(z==null?delete this.attrs[I]:this.attrs[I]=z,this._shouldFireChangeEvents&&this._fireChangeEvent(I,q,z))},V.prototype._setComponentAttr=function(I,z,P){var q;P!==void 0&&(q=this.attrs[I],q||(this.attrs[I]=this.getAttr(I)),this.attrs[I][z]=P,this._fireChangeEvent(I,q,P))},V.prototype._fireAndBubble=function(I,z,P){z&&this.nodeType===E&&(z.target=this);var q=(I===w||I===S)&&(P&&(this===P||this.isAncestorOf&&this.isAncestorOf(P))||this.nodeType==="Stage"&&!P);if(!q){this._fire(I,z);var F=(I===w||I===S)&&P&&P.isAncestorOf&&P.isAncestorOf(this)&&!P.isAncestorOf(this.parent);(z&&!z.cancelBubble||!z)&&this.parent&&this.parent.isListening()&&!F&&(P&&P.parent?this._fireAndBubble.call(this.parent,I,z,P):this._fireAndBubble.call(this.parent,I,z))}},V.prototype._getProtoListeners=function(I){var z=this._cache.get(d);if(!z){z={};for(var P=Object.getPrototypeOf(this);P;){if(!P.eventListeners){P=Object.getPrototypeOf(P);continue}for(var q in P.eventListeners){var F=P.eventListeners[q],U=z[q]||[];z[q]=F.concat(U)}P=Object.getPrototypeOf(P)}this._cache.set(d,z)}return z[I]},V.prototype._fire=function(I,z){z=z||{},z.currentTarget=this,z.type=I;var P=this._getProtoListeners(I);if(P)for(var q=0;q<P.length;q++)P[q].handler.call(this,z);var F=this.eventListeners[I];if(F)for(var q=0;q<F.length;q++)F[q].handler.call(this,z)},V.prototype.draw=function(){return this.drawScene(),this.drawHit(),this},V.prototype._createDragElement=function(I){var z=I?I.pointerId:void 0,P=this.getStage(),q=this.getAbsolutePosition(),F=P._getPointerById(z)||P._changedPointerPositions[0]||q;a.DD._dragElements.set(this._id,{node:this,startPointerPos:F,offset:{x:F.x-q.x,y:F.y-q.y},dragStatus:"ready",pointerId:z})},V.prototype.startDrag=function(I,z){z===void 0&&(z=!0),a.DD._dragElements.has(this._id)||this._createDragElement(I);var P=a.DD._dragElements.get(this._id);P.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:I&&I.evt},z)},V.prototype._setDragPosition=function(I,z){var P=this.getStage()._getPointerById(z.pointerId);if(P){var q={x:P.x-z.offset.x,y:P.y-z.offset.y},F=this.dragBoundFunc();if(F!==void 0){var U=F.call(this,q,I);U?q=U:e.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==q.x||this._lastPos.y!==q.y)&&(this.setAbsolutePosition(q),this.getLayer()?this.getLayer().batchDraw():this.getStage()&&this.getStage().batchDraw()),this._lastPos=q}},V.prototype.stopDrag=function(I){var z=a.DD._dragElements.get(this._id);z&&(z.dragStatus="stopped"),a.DD._endDragBefore(I),a.DD._endDragAfter(I)},V.prototype.setDraggable=function(I){this._setAttr("draggable",I),this._dragChange()},V.prototype.isDragging=function(){var I=a.DD._dragElements.get(this._id);return I?I.dragStatus==="dragging":!1},V.prototype._listenDrag=function(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(I){var z=this,P=I.evt.button!==void 0,q=!P||i.Konva.dragButtons.indexOf(I.evt.button)>=0;if(q&&!this.isDragging()){var F=!1;a.DD._dragElements.forEach(function(U){z.isAncestorOf(U.node)&&(F=!0)}),F||this._createDragElement(I)}})},V.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var I=this.getStage();if(!I)return;var z=a.DD._dragElements.get(this._id),P=z&&z.dragStatus==="dragging",q=z&&z.dragStatus==="ready";P?this.stopDrag():q&&a.DD._dragElements.delete(this._id)}},V.prototype._dragCleanup=function(){this.off("mousedown.konva"),this.off("touchstart.konva")},V.create=function(I,z){return e.Util._isString(I)&&(I=JSON.parse(I)),this._createNode(I,z)},V._createNode=function(I,z){var P=V.prototype.getClassName.call(I),q=I.children,F,U,W;z&&(I.attrs.container=z),i._NODES_REGISTRY[P]||(e.Util.warn('Can not find a node with class name "'+P+'". Fallback to "Shape".'),P="Shape");var X=i._NODES_REGISTRY[P];if(F=new X(I.attrs),q)for(U=q.length,W=0;W<U;W++)F.add(V._createNode(q[W]));return F},V}();r.Node=O,O.prototype.nodeType="Node",O.prototype._attrsAffectingSize=[],O.prototype.eventListeners={},O.prototype.on.call(O.prototype,x,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(T),this._clearSelfAndDescendantCache(h)}),O.prototype.on.call(O.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(R)}),O.prototype.on.call(O.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(m)}),O.prototype.on.call(O.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(c)});var G=t.Factory.addGetterSetter;G(O,"zIndex"),G(O,"absolutePosition"),G(O,"position"),G(O,"x",0,o.getNumberValidator()),G(O,"y",0,o.getNumberValidator()),G(O,"globalCompositeOperation","source-over",o.getStringValidator()),G(O,"opacity",1,o.getNumberValidator()),G(O,"name","",o.getStringValidator()),G(O,"id","",o.getStringValidator()),G(O,"rotation",0,o.getNumberValidator()),t.Factory.addComponentsGetterSetter(O,"scale",["x","y"]),G(O,"scaleX",1,o.getNumberValidator()),G(O,"scaleY",1,o.getNumberValidator()),t.Factory.addComponentsGetterSetter(O,"skew",["x","y"]),G(O,"skewX",0,o.getNumberValidator()),G(O,"skewY",0,o.getNumberValidator()),t.Factory.addComponentsGetterSetter(O,"offset",["x","y"]),G(O,"offsetX",0,o.getNumberValidator()),G(O,"offsetY",0,o.getNumberValidator()),G(O,"dragDistance",null,o.getNumberValidator()),G(O,"width",0,o.getNumberValidator()),G(O,"height",0,o.getNumberValidator()),G(O,"listening",!0,o.getBooleanValidator()),G(O,"preventDefault",!0,o.getBooleanValidator()),G(O,"filters",null,function(V){return this._filterUpToDate=!1,V}),G(O,"visible",!0,o.getBooleanValidator()),G(O,"transformsEnabled","all",o.getStringValidator()),G(O,"size"),G(O,"dragBoundFunc"),G(O,"draggable",!1,o.getBooleanValidator()),t.Factory.backCompat(O,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),e.Collection.mapMethods(O)})(ci);var Il={},LW=kt&&kt.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Il,"__esModule",{value:!0});Il.Container=void 0;var sl=Jr,uc=Hr,Yb=ci,Mv=fr,$u=function(r){LW(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.children=new sl.Collection,t}return e.prototype.getChildren=function(t){if(!t)return this.children;var n=new sl.Collection;return this.children.each(function(i){t(i)&&n.push(i)}),n},e.prototype.hasChildren=function(){return this.getChildren().length>0},e.prototype.removeChildren=function(){for(var t,n=0;n<this.children.length;n++)t=this.children[n],t.parent=null,t.index=0,t.remove();return this.children=new sl.Collection,this},e.prototype.destroyChildren=function(){for(var t,n=0;n<this.children.length;n++)t=this.children[n],t.parent=null,t.index=0,t.destroy();return this.children=new sl.Collection,this},e.prototype.add=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(arguments.length>1){for(var i=0;i<arguments.length;i++)this.add(arguments[i]);return this}var a=t[0];if(a.getParent())return a.moveTo(this),this;var o=this.children;return this._validateAdd(a),a._clearCaches(),a.index=o.length,a.parent=this,o.push(a),this._fire("add",{child:a}),this},e.prototype.destroy=function(){return this.hasChildren()&&this.destroyChildren(),r.prototype.destroy.call(this),this},e.prototype.find=function(t){return this._generalFind(t,!1)},e.prototype.get=function(t){return sl.Util.warn("collection.get() method is deprecated. Please use collection.find() instead."),this.find(t)},e.prototype.findOne=function(t){var n=this._generalFind(t,!0);return n.length>0?n[0]:void 0},e.prototype._generalFind=function(t,n){var i=[];return this._descendants(function(a){var o=a._isMatch(t);return o&&i.push(a),!!(o&&n)}),sl.Collection.toCollection(i)},e.prototype._descendants=function(t){for(var n=!1,i=0;i<this.children.length;i++){var a=this.children[i];if(n=t(a),n)return!0;if(a.hasChildren()&&(n=a._descendants(t),n))return!0}return!1},e.prototype.toObject=function(){var t=Yb.Node.prototype.toObject.call(this);t.children=[];for(var n=this.getChildren(),i=n.length,a=0;a<i;a++){var o=n[a];t.children.push(o.toObject())}return t},e.prototype.isAncestorOf=function(t){for(var n=t.getParent();n;){if(n._id===this._id)return!0;n=n.getParent()}return!1},e.prototype.clone=function(t){var n=Yb.Node.prototype.clone.call(this,t);return this.getChildren().each(function(i){n.add(i.clone())}),n},e.prototype.getAllIntersections=function(t){var n=[];return this.find("Shape").each(function(i){i.isVisible()&&i.intersects(t)&&n.push(i)}),n},e.prototype._setChildrenIndices=function(){this.children.each(function(t,n){t.index=n})},e.prototype.drawScene=function(t,n){var i=this.getLayer(),a=t||i&&i.getCanvas(),o=a&&a.getContext(),s=this._getCanvasCache(),u=s&&s.scene,l=a&&a.isCache;if(!this.isVisible()&&!l)return this;if(u){o.save();var f=this.getAbsoluteTransform(n).getMatrix();o.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this._drawCachedSceneCanvas(o),o.restore()}else this._drawChildren("drawScene",a,n);return this},e.prototype.drawHit=function(t,n){if(!this.shouldDrawHit(n))return this;var i=this.getLayer(),a=t||i&&i.hitCanvas,o=a&&a.getContext(),s=this._getCanvasCache(),u=s&&s.hit;if(u){o.save();var l=this.getAbsoluteTransform(n).getMatrix();o.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(o),o.restore()}else this._drawChildren("drawHit",a,n);return this},e.prototype._drawChildren=function(t,n,i){var a=n&&n.getContext(),o=this.clipWidth(),s=this.clipHeight(),u=this.clipFunc(),l=o&&s||u,f=i===this;if(l){a.save();var c=this.getAbsoluteTransform(i),d=c.getMatrix();if(a.transform(d[0],d[1],d[2],d[3],d[4],d[5]),a.beginPath(),u)u.call(this,a,this);else{var h=this.clipX(),p=this.clipY();a.rect(h,p,o,s)}a.clip(),d=c.copy().invert().getMatrix(),a.transform(d[0],d[1],d[2],d[3],d[4],d[5])}var g=!f&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";g&&(a.save(),a._applyGlobalCompositeOperation(this)),this.children.each(function(b){b[t](n,i)}),g&&a.restore(),l&&a.restore()},e.prototype.getClientRect=function(t){t=t||{};var n=t.skipTransform,i=t.relativeTo,a,o,s,u,l={x:1/0,y:1/0,width:0,height:0},f=this;this.children.each(function(g){if(g.visible()){var b=g.getClientRect({relativeTo:f,skipShadow:t.skipShadow,skipStroke:t.skipStroke});b.width===0&&b.height===0||(a===void 0?(a=b.x,o=b.y,s=b.x+b.width,u=b.y+b.height):(a=Math.min(a,b.x),o=Math.min(o,b.y),s=Math.max(s,b.x+b.width),u=Math.max(u,b.y+b.height)))}});for(var c=this.find("Shape"),d=!1,h=0;h<c.length;h++){var p=c[h];if(p._isVisible(this)){d=!0;break}}return d&&a!==void 0?l={x:a,y:o,width:s-a,height:u-o}:l={x:0,y:0,width:0,height:0},n?l:this._transformedRect(l,i)},e}(Yb.Node);Il.Container=$u;uc.Factory.addComponentsGetterSetter($u,"clip",["x","y","width","height"]);uc.Factory.addGetterSetter($u,"clipX",void 0,Mv.getNumberValidator());uc.Factory.addGetterSetter($u,"clipY",void 0,Mv.getNumberValidator());uc.Factory.addGetterSetter($u,"clipWidth",void 0,Mv.getNumberValidator());uc.Factory.addGetterSetter($u,"clipHeight",void 0,Mv.getNumberValidator());uc.Factory.addGetterSetter($u,"clipFunc");sl.Collection.mapMethods($u);var d4={},Ua={};Object.defineProperty(Ua,"__esModule",{value:!0});Ua.releaseCapture=Ua.setPointerCapture=Ua.hasPointerCapture=Ua.createEvent=Ua.getCapturedShape=void 0;var NW=Vr,Eh=new Map,p4=NW.Konva._global.PointerEvent!==void 0;function PW(r){return Eh.get(r)}Ua.getCapturedShape=PW;function Jw(r){return{evt:r,pointerId:r.pointerId}}Ua.createEvent=Jw;function MW(r,e){return Eh.get(r)===e}Ua.hasPointerCapture=MW;function OW(r,e){v4(r);var t=e.getStage();t&&(Eh.set(r,e),p4&&e._fire("gotpointercapture",Jw(new PointerEvent("gotpointercapture"))))}Ua.setPointerCapture=OW;function v4(r,e){var t=Eh.get(r);if(t){var n=t.getStage();n&&n.content,Eh.delete(r),p4&&t._fire("lostpointercapture",Jw(new PointerEvent("lostpointercapture")))}}Ua.releaseCapture=v4;(function(r){var e=kt&&kt.__extends||function(){var ue=function(ce,oe){return ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ae,Te){Ae.__proto__=Te}||function(Ae,Te){for(var Ge in Te)Object.prototype.hasOwnProperty.call(Te,Ge)&&(Ae[Ge]=Te[Ge])},ue(ce,oe)};return function(ce,oe){ue(ce,oe);function Ae(){this.constructor=ce}ce.prototype=oe===null?Object.create(oe):(Ae.prototype=oe.prototype,new Ae)}}();Object.defineProperty(r,"__esModule",{value:!0}),r.Stage=r.stages=void 0;var t=Jr,n=Hr,i=Il,a=Vr,o=Eo,s=Pv,u=Vr,l=Ua,f="Stage",c="string",d="px",h="mouseout",p="mouseleave",g="mouseover",b="mouseenter",v="mousemove",y="mousedown",m="mouseup",w="pointermove",S="pointerdown",A="pointerup",_="pointercancel",E="lostpointercapture",k="contextmenu",M="click",T="dblclick",C="touchstart",R="touchend",x="tap",B="dbltap",D="touchmove",O="wheel",G="contentMouseout",V="contentMouseover",I="contentMousemove",z="contentMousedown",P="contentMouseup",q="contentContextmenu",F="contentClick",U="contentDblclick",W="contentTouchstart",X="contentTouchend",te="contentDbltap",ne="contentTap",he="contentTouchmove",ve="contentWheel",Ce="relative",Le="konvajs-content",K="_",le="container",Z=5,ie="",re=[b,y,v,m,p,C,D,R,g,O,k,S,w,A,_,E],J=re.length;function fe(ue,ce){ue.content.addEventListener(ce,function(oe){ue[K+ce](oe)},!1)}var we="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";r.stages=[];function ge(ue){return ue===void 0&&(ue={}),(ue.clipFunc||ue.clipWidth||ue.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),ue}var me=function(ue){e(ce,ue);function ce(oe){var Ae=ue.call(this,ge(oe))||this;return Ae._pointerPositions=[],Ae._changedPointerPositions=[],Ae._buildDOM(),Ae._bindContentEvents(),r.stages.push(Ae),Ae.on("widthChange.konva heightChange.konva",Ae._resizeDOM),Ae.on("visibleChange.konva",Ae._checkVisibility),Ae.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",function(){ge(Ae.attrs)}),Ae._checkVisibility(),Ae}return ce.prototype._validateAdd=function(oe){var Ae=oe.getType()==="Layer",Te=oe.getType()==="FastLayer",Ge=Ae||Te;Ge||t.Util.throw("You may only add layers to the stage.")},ce.prototype._checkVisibility=function(){if(this.content){var oe=this.visible()?"":"none";this.content.style.display=oe}},ce.prototype.setContainer=function(oe){if(typeof oe===c){if(oe.charAt(0)==="."){var Ae=oe.slice(1);oe=document.getElementsByClassName(Ae)[0]}else{var Te;oe.charAt(0)!=="#"?Te=oe:Te=oe.slice(1),oe=document.getElementById(Te)}if(!oe)throw"Can not find container in document with id "+Te}return this._setAttr(le,oe),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),oe.appendChild(this.content)),this},ce.prototype.shouldDrawHit=function(){return!0},ce.prototype.clear=function(){var oe=this.children,Ae=oe.length,Te;for(Te=0;Te<Ae;Te++)oe[Te].clear();return this},ce.prototype.clone=function(oe){return oe||(oe={}),oe.container=document.createElement("div"),i.Container.prototype.clone.call(this,oe)},ce.prototype.destroy=function(){ue.prototype.destroy.call(this);var oe=this.content;oe&&t.Util._isInDocument(oe)&&this.container().removeChild(oe);var Ae=r.stages.indexOf(this);return Ae>-1&&r.stages.splice(Ae,1),this},ce.prototype.getPointerPosition=function(){var oe=this._pointerPositions[0]||this._changedPointerPositions[0];return oe?{x:oe.x,y:oe.y}:(t.Util.warn(we),null)},ce.prototype._getPointerById=function(oe){return this._pointerPositions.find(function(Ae){return Ae.id===oe})},ce.prototype.getPointersPositions=function(){return this._pointerPositions},ce.prototype.getStage=function(){return this},ce.prototype.getContent=function(){return this.content},ce.prototype._toKonvaCanvas=function(oe){oe=oe||{},oe.x=oe.x||0,oe.y=oe.y||0,oe.width=oe.width||this.width(),oe.height=oe.height||this.height();var Ae=new o.SceneCanvas({width:oe.width,height:oe.height,pixelRatio:oe.pixelRatio||1}),Te=Ae.getContext()._context,Ge=this.children;return(oe.x||oe.y)&&Te.translate(-1*oe.x,-1*oe.y),Ge.each(function(Fe){if(Fe.isVisible()){var Re=Fe._toKonvaCanvas(oe);Te.drawImage(Re._canvas,oe.x,oe.y,Re.getWidth()/Re.getPixelRatio(),Re.getHeight()/Re.getPixelRatio())}}),Ae},ce.prototype.getIntersection=function(oe,Ae){if(!oe)return null;var Te=this.children,Ge=Te.length,Fe=Ge-1,Re,ze;for(Re=Fe;Re>=0;Re--)if(ze=Te[Re].getIntersection(oe,Ae),ze)return ze;return null},ce.prototype._resizeDOM=function(){var oe=this.width(),Ae=this.height();this.content&&(this.content.style.width=oe+d,this.content.style.height=Ae+d),this.bufferCanvas.setSize(oe,Ae),this.bufferHitCanvas.setSize(oe,Ae),this.children.each(function(Te){Te.setSize({width:oe,height:Ae}),Te.draw()})},ce.prototype.add=function(oe){if(arguments.length>1){for(var Ae=0;Ae<arguments.length;Ae++)this.add(arguments[Ae]);return this}ue.prototype.add.call(this,oe);var Te=this.children.length;return Te>Z&&t.Util.warn("The stage has "+Te+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),oe.setSize({width:this.width(),height:this.height()}),oe.draw(),a.Konva.isBrowser&&this.content.appendChild(oe.canvas._canvas),this},ce.prototype.getParent=function(){return null},ce.prototype.getLayer=function(){return null},ce.prototype.hasPointerCapture=function(oe){return l.hasPointerCapture(oe,this)},ce.prototype.setPointerCapture=function(oe){l.setPointerCapture(oe,this)},ce.prototype.releaseCapture=function(oe){l.releaseCapture(oe,this)},ce.prototype.getLayers=function(){return this.getChildren()},ce.prototype._bindContentEvents=function(){if(a.Konva.isBrowser)for(var oe=0;oe<J;oe++)fe(this,re[oe])},ce.prototype._mouseenter=function(oe){this.setPointersPositions(oe),this._fire(b,{evt:oe,target:this,currentTarget:this})},ce.prototype._mouseover=function(oe){this.setPointersPositions(oe),this._fire(V,{evt:oe}),this._fire(g,{evt:oe,target:this,currentTarget:this})},ce.prototype._mouseleave=function(oe){var Ae;this.setPointersPositions(oe);var Te=!((Ae=this.targetShape)===null||Ae===void 0)&&Ae.getStage()?this.targetShape:null,Ge=!s.DD.isDragging||a.Konva.hitOnDragEnabled;Te&&Ge?(Te._fireAndBubble(h,{evt:oe}),Te._fireAndBubble(p,{evt:oe}),this._fire(p,{evt:oe,target:this,currentTarget:this}),this.targetShape=null):Ge&&(this._fire(p,{evt:oe,target:this,currentTarget:this}),this._fire(h,{evt:oe,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[],this._fire(G,{evt:oe})},ce.prototype._mousemove=function(oe){var Ae;if(a.Konva.UA.ieMobile)return this._touchmove(oe);this.setPointersPositions(oe);var Te=t.Util._getFirstPointerId(oe),Ge,Fe=!((Ae=this.targetShape)===null||Ae===void 0)&&Ae.getStage()?this.targetShape:null,Re=!s.DD.isDragging||a.Konva.hitOnDragEnabled;if(Re){if(Ge=this.getIntersection(this.getPointerPosition()),Ge&&Ge.isListening()){var ze=Fe!==Ge;Re&&ze?(Fe&&(Fe._fireAndBubble(h,{evt:oe,pointerId:Te},Ge),Fe._fireAndBubble(p,{evt:oe,pointerId:Te},Ge)),Ge._fireAndBubble(g,{evt:oe,pointerId:Te},Fe),Ge._fireAndBubble(b,{evt:oe,pointerId:Te},Fe),Ge._fireAndBubble(v,{evt:oe,pointerId:Te}),this.targetShape=Ge):Ge._fireAndBubble(v,{evt:oe,pointerId:Te})}else Fe&&Re&&(Fe._fireAndBubble(h,{evt:oe,pointerId:Te}),Fe._fireAndBubble(p,{evt:oe,pointerId:Te}),this._fire(g,{evt:oe,target:this,currentTarget:this,pointerId:Te}),this.targetShape=null),this._fire(v,{evt:oe,target:this,currentTarget:this,pointerId:Te});this._fire(I,{evt:oe})}oe.cancelable&&oe.preventDefault()},ce.prototype._mousedown=function(oe){if(a.Konva.UA.ieMobile)return this._touchstart(oe);this.setPointersPositions(oe);var Ae=t.Util._getFirstPointerId(oe),Te=this.getIntersection(this.getPointerPosition());s.DD.justDragged=!1,a.Konva.listenClickTap=!0,Te&&Te.isListening()?(this.clickStartShape=Te,Te._fireAndBubble(y,{evt:oe,pointerId:Ae})):this._fire(y,{evt:oe,target:this,currentTarget:this,pointerId:Ae}),this._fire(z,{evt:oe})},ce.prototype._mouseup=function(oe){if(a.Konva.UA.ieMobile)return this._touchend(oe);this.setPointersPositions(oe);var Ae=t.Util._getFirstPointerId(oe),Te=this.getIntersection(this.getPointerPosition()),Ge=this.clickStartShape,Fe=this.clickEndShape,Re=!1;a.Konva.inDblClickWindow?(Re=!0,clearTimeout(this.dblTimeout)):s.DD.justDragged||(a.Konva.inDblClickWindow=!0,clearTimeout(this.dblTimeout)),this.dblTimeout=setTimeout(function(){a.Konva.inDblClickWindow=!1},a.Konva.dblClickWindow),Te&&Te.isListening()?(this.clickEndShape=Te,Te._fireAndBubble(m,{evt:oe,pointerId:Ae}),a.Konva.listenClickTap&&Ge&&Ge._id===Te._id&&(Te._fireAndBubble(M,{evt:oe,pointerId:Ae}),Re&&Fe&&Fe===Te&&Te._fireAndBubble(T,{evt:oe,pointerId:Ae}))):(this.clickEndShape=null,this._fire(m,{evt:oe,target:this,currentTarget:this,pointerId:Ae}),a.Konva.listenClickTap&&this._fire(M,{evt:oe,target:this,currentTarget:this,pointerId:Ae}),Re&&this._fire(T,{evt:oe,target:this,currentTarget:this,pointerId:Ae})),this._fire(P,{evt:oe}),a.Konva.listenClickTap&&(this._fire(F,{evt:oe}),Re&&this._fire(U,{evt:oe})),a.Konva.listenClickTap=!1,oe.cancelable&&oe.preventDefault()},ce.prototype._contextmenu=function(oe){this.setPointersPositions(oe);var Ae=this.getIntersection(this.getPointerPosition());Ae&&Ae.isListening()?Ae._fireAndBubble(k,{evt:oe}):this._fire(k,{evt:oe,target:this,currentTarget:this}),this._fire(q,{evt:oe})},ce.prototype._touchstart=function(oe){var Ae=this;this.setPointersPositions(oe);var Te=!1;this._changedPointerPositions.forEach(function(Ge){var Fe=Ae.getIntersection(Ge);a.Konva.listenClickTap=!0,s.DD.justDragged=!1;var Re=Fe&&Fe.isListening();Re&&(a.Konva.captureTouchEventsEnabled&&Fe.setPointerCapture(Ge.id),Ae.tapStartShape=Fe,Fe._fireAndBubble(C,{evt:oe,pointerId:Ge.id},Ae),Te=!0,Fe.isListening()&&Fe.preventDefault()&&oe.cancelable&&oe.preventDefault())}),Te||this._fire(C,{evt:oe,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire(W,{evt:oe})},ce.prototype._touchmove=function(oe){var Ae=this;this.setPointersPositions(oe);var Te=!s.DD.isDragging||a.Konva.hitOnDragEnabled;if(Te){var Ge=!1,Fe={};this._changedPointerPositions.forEach(function(Re){var ze=l.getCapturedShape(Re.id)||Ae.getIntersection(Re),Ie=ze&&ze.isListening();Ie&&(Fe[ze._id]||(Fe[ze._id]=!0,ze._fireAndBubble(D,{evt:oe,pointerId:Re.id}),Ge=!0,ze.isListening()&&ze.preventDefault()&&oe.cancelable&&oe.preventDefault()))}),Ge||this._fire(D,{evt:oe,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire(he,{evt:oe})}s.DD.isDragging&&s.DD.node.preventDefault()&&oe.cancelable&&oe.preventDefault()},ce.prototype._touchend=function(oe){var Ae=this;this.setPointersPositions(oe);var Te=this.tapEndShape,Ge=!1;a.Konva.inDblClickWindow?(Ge=!0,clearTimeout(this.dblTimeout)):s.DD.justDragged||(a.Konva.inDblClickWindow=!0,clearTimeout(this.dblTimeout)),this.dblTimeout=setTimeout(function(){a.Konva.inDblClickWindow=!1},a.Konva.dblClickWindow);var Fe=!1,Re={},ze=!1,Ie=!1;this._changedPointerPositions.forEach(function(Ve){var We=l.getCapturedShape(Ve.id)||Ae.getIntersection(Ve);We&&We.releaseCapture(Ve.id);var Ze=We&&We.isListening();Ze&&(Re[We._id]||(Re[We._id]=!0,Ae.tapEndShape=We,We._fireAndBubble(R,{evt:oe,pointerId:Ve.id}),Fe=!0,a.Konva.listenClickTap&&We===Ae.tapStartShape&&(ze=!0,We._fireAndBubble(x,{evt:oe,pointerId:Ve.id}),Ge&&Te&&Te===We&&(Ie=!0,We._fireAndBubble(B,{evt:oe,pointerId:Ve.id}))),We.isListening()&&We.preventDefault()&&oe.cancelable&&oe.preventDefault()))}),Fe||this._fire(R,{evt:oe,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),a.Konva.listenClickTap&&!ze&&(this.tapEndShape=null,this._fire(x,{evt:oe,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})),Ge&&!Ie&&this._fire(B,{evt:oe,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire(X,{evt:oe}),a.Konva.listenClickTap&&(this._fire(ne,{evt:oe}),Ge&&this._fire(te,{evt:oe})),this.preventDefault()&&oe.cancelable&&oe.preventDefault(),a.Konva.listenClickTap=!1},ce.prototype._wheel=function(oe){this.setPointersPositions(oe);var Ae=this.getIntersection(this.getPointerPosition());Ae&&Ae.isListening()?Ae._fireAndBubble(O,{evt:oe}):this._fire(O,{evt:oe,target:this,currentTarget:this}),this._fire(ve,{evt:oe})},ce.prototype._pointerdown=function(oe){if(a.Konva._pointerEventsEnabled){this.setPointersPositions(oe);var Ae=l.getCapturedShape(oe.pointerId)||this.getIntersection(this.getPointerPosition());Ae&&Ae._fireAndBubble(S,l.createEvent(oe))}},ce.prototype._pointermove=function(oe){if(a.Konva._pointerEventsEnabled){this.setPointersPositions(oe);var Ae=l.getCapturedShape(oe.pointerId)||this.getIntersection(this.getPointerPosition());Ae&&Ae._fireAndBubble(w,l.createEvent(oe))}},ce.prototype._pointerup=function(oe){if(a.Konva._pointerEventsEnabled){this.setPointersPositions(oe);var Ae=l.getCapturedShape(oe.pointerId)||this.getIntersection(this.getPointerPosition());Ae&&Ae._fireAndBubble(A,l.createEvent(oe)),l.releaseCapture(oe.pointerId)}},ce.prototype._pointercancel=function(oe){if(a.Konva._pointerEventsEnabled){this.setPointersPositions(oe);var Ae=l.getCapturedShape(oe.pointerId)||this.getIntersection(this.getPointerPosition());Ae&&Ae._fireAndBubble(A,l.createEvent(oe)),l.releaseCapture(oe.pointerId)}},ce.prototype._lostpointercapture=function(oe){l.releaseCapture(oe.pointerId)},ce.prototype.setPointersPositions=function(oe){var Ae=this,Te=this._getContentPosition(),Ge=null,Fe=null;oe=oe||window.event,oe.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],t.Collection.prototype.each.call(oe.touches,function(Re){Ae._pointerPositions.push({id:Re.identifier,x:(Re.clientX-Te.left)/Te.scaleX,y:(Re.clientY-Te.top)/Te.scaleY})}),t.Collection.prototype.each.call(oe.changedTouches||oe.touches,function(Re){Ae._changedPointerPositions.push({id:Re.identifier,x:(Re.clientX-Te.left)/Te.scaleX,y:(Re.clientY-Te.top)/Te.scaleY})})):(Ge=(oe.clientX-Te.left)/Te.scaleX,Fe=(oe.clientY-Te.top)/Te.scaleY,this.pointerPos={x:Ge,y:Fe},this._pointerPositions=[{x:Ge,y:Fe,id:t.Util._getFirstPointerId(oe)}],this._changedPointerPositions=[{x:Ge,y:Fe,id:t.Util._getFirstPointerId(oe)}])},ce.prototype._setPointerPosition=function(oe){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(oe)},ce.prototype._getContentPosition=function(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var oe=this.content.getBoundingClientRect();return{top:oe.top,left:oe.left,scaleX:oe.width/this.content.clientWidth||1,scaleY:oe.height/this.content.clientHeight||1}},ce.prototype._buildDOM=function(){if(this.bufferCanvas=new o.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new o.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!!a.Konva.isBrowser){var oe=this.container();if(!oe)throw"Stage has no container. A container is required.";oe.innerHTML=ie,this.content=document.createElement("div"),this.content.style.position=Ce,this.content.style.userSelect="none",this.content.className=Le,this.content.setAttribute("role","presentation"),oe.appendChild(this.content),this._resizeDOM()}},ce.prototype.cache=function(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this},ce.prototype.clearCache=function(){return this},ce.prototype.batchDraw=function(){return this.children.each(function(oe){oe.batchDraw()}),this},ce}(i.Container);r.Stage=me,me.prototype.nodeType=f,u._registerNode(me),n.Factory.addGetterSetter(me,"container")})(d4);var Zh={},Oi={};(function(r){var e=kt&&kt.__extends||function(){var k=function(M,T){return k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,R){C.__proto__=R}||function(C,R){for(var x in R)Object.prototype.hasOwnProperty.call(R,x)&&(C[x]=R[x])},k(M,T)};return function(M,T){k(M,T);function C(){this.constructor=M}M.prototype=T===null?Object.create(T):(C.prototype=T.prototype,new C)}}();Object.defineProperty(r,"__esModule",{value:!0}),r.Shape=r.shapes=void 0;var t=Jr,n=Hr,i=ci,a=fr,o=Vr,s=Ua,u="hasShadow",l="shadowRGBA",f="patternImage",c="linearGradient",d="radialGradient",h;function p(){return h||(h=t.Util.createCanvasElement().getContext("2d"),h)}r.shapes={};function g(k){k.fill()}function b(k){k.stroke()}function v(k){k.fill()}function y(k){k.stroke()}function m(){this._clearCache(u)}function w(){this._clearCache(l)}function S(){this._clearCache(f)}function A(){this._clearCache(c)}function _(){this._clearCache(d)}var E=function(k){e(M,k);function M(T){for(var C=k.call(this,T)||this,R;R=t.Util.getRandomColor(),!(R&&!(R in r.shapes)););return C.colorKey=R,r.shapes[R]=C,C}return M.prototype.getContext=function(){return this.getLayer().getContext()},M.prototype.getCanvas=function(){return this.getLayer().getCanvas()},M.prototype.getSceneFunc=function(){return this.attrs.sceneFunc||this._sceneFunc},M.prototype.getHitFunc=function(){return this.attrs.hitFunc||this._hitFunc},M.prototype.hasShadow=function(){return this._getCache(u,this._hasShadow)},M.prototype._hasShadow=function(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())},M.prototype._getFillPattern=function(){return this._getCache(f,this.__getFillPattern)},M.prototype.__getFillPattern=function(){if(this.fillPatternImage()){var T=p(),C=T.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");return C&&C.setTransform&&C.setTransform({a:this.fillPatternScaleX(),b:0,c:0,d:this.fillPatternScaleY(),e:0,f:0}),C}},M.prototype._getLinearGradient=function(){return this._getCache(c,this.__getLinearGradient)},M.prototype.__getLinearGradient=function(){var T=this.fillLinearGradientColorStops();if(T){for(var C=p(),R=this.fillLinearGradientStartPoint(),x=this.fillLinearGradientEndPoint(),B=C.createLinearGradient(R.x,R.y,x.x,x.y),D=0;D<T.length;D+=2)B.addColorStop(T[D],T[D+1]);return B}},M.prototype._getRadialGradient=function(){return this._getCache(d,this.__getRadialGradient)},M.prototype.__getRadialGradient=function(){var T=this.fillRadialGradientColorStops();if(T){for(var C=p(),R=this.fillRadialGradientStartPoint(),x=this.fillRadialGradientEndPoint(),B=C.createRadialGradient(R.x,R.y,this.fillRadialGradientStartRadius(),x.x,x.y,this.fillRadialGradientEndRadius()),D=0;D<T.length;D+=2)B.addColorStop(T[D],T[D+1]);return B}},M.prototype.getShadowRGBA=function(){return this._getCache(l,this._getShadowRGBA)},M.prototype._getShadowRGBA=function(){if(this.hasShadow()){var T=t.Util.colorToRGBA(this.shadowColor());return"rgba("+T.r+","+T.g+","+T.b+","+T.a*(this.shadowOpacity()||1)+")"}},M.prototype.hasFill=function(){var T=this;return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],function(){return T.fillEnabled()&&!!(T.fill()||T.fillPatternImage()||T.fillLinearGradientColorStops()||T.fillRadialGradientColorStops())})},M.prototype.hasStroke=function(){var T=this;return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],function(){return T.strokeEnabled()&&T.strokeWidth()&&!!(T.stroke()||T.strokeLinearGradientColorStops())})},M.prototype.hasHitStroke=function(){var T=this.hitStrokeWidth();return T==="auto"?this.hasStroke():this.strokeEnabled()&&!!T},M.prototype.intersects=function(T){var C=this.getStage(),R=C.bufferHitCanvas,x;return R.getContext().clear(),this.drawHit(R,null,!0),x=R.context.getImageData(Math.round(T.x),Math.round(T.y),1,1).data,x[3]>0},M.prototype.destroy=function(){return i.Node.prototype.destroy.call(this),delete r.shapes[this.colorKey],delete this.colorKey,this},M.prototype._useBufferCanvas=function(T){var C;if(!this.getStage())return!1;var R=(C=this.attrs.perfectDrawEnabled)!==null&&C!==void 0?C:!0;if(!R)return!1;var x=T||this.hasFill(),B=this.hasStroke(),D=this.getAbsoluteOpacity()!==1;if(x&&B&&D)return!0;var O=this.hasShadow(),G=this.shadowForStrokeEnabled();return!!(x&&B&&O&&G)},M.prototype.setStrokeHitEnabled=function(T){t.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),T?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)},M.prototype.getStrokeHitEnabled=function(){return this.hitStrokeWidth()!==0},M.prototype.getSelfRect=function(){var T=this.size();return{x:this._centroid?-T.width/2:0,y:this._centroid?-T.height/2:0,width:T.width,height:T.height}},M.prototype.getClientRect=function(T){T===void 0&&(T={});var C=T.skipTransform,R=T.relativeTo,x=this.getSelfRect(),B=!T.skipStroke&&this.hasStroke(),D=B&&this.strokeWidth()||0,O=x.width+D,G=x.height+D,V=!T.skipShadow&&this.hasShadow(),I=V?this.shadowOffsetX():0,z=V?this.shadowOffsetY():0,P=O+Math.abs(I),q=G+Math.abs(z),F=V&&this.shadowBlur()||0,U=P+F*2,W=q+F*2,X=0;Math.round(D/2)!==D/2&&(X=1);var te={width:U+X,height:W+X,x:-Math.round(D/2+F)+Math.min(I,0)+x.x,y:-Math.round(D/2+F)+Math.min(z,0)+x.y};return C?te:this._transformedRect(te,R)},M.prototype.drawScene=function(T,C){var R=this.getLayer(),x=T||R.getCanvas(),B=x.getContext(),D=this._getCanvasCache(),O=this.getSceneFunc(),G=this.hasShadow(),V,I,z,P=x.isCache,q=x.isCache,F=C===this;if(!this.isVisible()&&!P)return this;if(D){B.save();var U=this.getAbsoluteTransform(C).getMatrix();return B.transform(U[0],U[1],U[2],U[3],U[4],U[5]),this._drawCachedSceneCanvas(B),B.restore(),this}if(!O)return this;if(B.save(),this._useBufferCanvas()&&!q){V=this.getStage(),I=V.bufferCanvas,z=I.getContext(),z.clear(),z.save(),z._applyLineJoin(this);var W=this.getAbsoluteTransform(C).getMatrix();z.transform(W[0],W[1],W[2],W[3],W[4],W[5]),O.call(this,z,this),z.restore();var X=I.pixelRatio;G&&B._applyShadow(this),B._applyOpacity(this),B._applyGlobalCompositeOperation(this),B.drawImage(I._canvas,0,0,I.width/X,I.height/X)}else{if(B._applyLineJoin(this),!F){var W=this.getAbsoluteTransform(C).getMatrix();B.transform(W[0],W[1],W[2],W[3],W[4],W[5]),B._applyOpacity(this),B._applyGlobalCompositeOperation(this)}G&&B._applyShadow(this),O.call(this,B,this)}return B.restore(),this},M.prototype.drawHit=function(T,C,R){if(R===void 0&&(R=!1),!this.shouldDrawHit(C,R))return this;var x=this.getLayer(),B=T||x.hitCanvas,D=B&&B.getContext(),O=this.hitFunc()||this.sceneFunc(),G=this._getCanvasCache(),V=G&&G.hit;if(this.colorKey||(console.log(this),t.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. See the shape in logs above. If you want to reuse shape you should call remove() instead of destroy()")),V){D.save();var I=this.getAbsoluteTransform(C).getMatrix();return D.transform(I[0],I[1],I[2],I[3],I[4],I[5]),this._drawCachedHitCanvas(D),D.restore(),this}if(!O)return this;D.save(),D._applyLineJoin(this);var z=this===C;if(!z){var P=this.getAbsoluteTransform(C).getMatrix();D.transform(P[0],P[1],P[2],P[3],P[4],P[5])}return O.call(this,D,this),D.restore(),this},M.prototype.drawHitFromCache=function(T){T===void 0&&(T=0);var C=this._getCanvasCache(),R=this._getCachedSceneCanvas(),x=C.hit,B=x.getContext(),D=x.getWidth(),O=x.getHeight(),G,V,I,z,P,q;B.clear(),B.drawImage(R._canvas,0,0,D,O);try{for(G=B.getImageData(0,0,D,O),V=G.data,I=V.length,z=t.Util._hexToRgb(this.colorKey),P=0;P<I;P+=4)q=V[P+3],q>T?(V[P]=z.r,V[P+1]=z.g,V[P+2]=z.b,V[P+3]=255):V[P+3]=0;B.putImageData(G,0,0)}catch(F){t.Util.error("Unable to draw hit graph from cached scene canvas. "+F.message)}return this},M.prototype.hasPointerCapture=function(T){return s.hasPointerCapture(T,this)},M.prototype.setPointerCapture=function(T){s.setPointerCapture(T,this)},M.prototype.releaseCapture=function(T){s.releaseCapture(T,this)},M}(i.Node);r.Shape=E,E.prototype._fillFunc=g,E.prototype._strokeFunc=b,E.prototype._fillFuncHit=v,E.prototype._strokeFuncHit=y,E.prototype._centroid=!1,E.prototype.nodeType="Shape",o._registerNode(E),E.prototype.eventListeners={},E.prototype.on.call(E.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",m),E.prototype.on.call(E.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",w),E.prototype.on.call(E.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva",S),E.prototype.on.call(E.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",A),E.prototype.on.call(E.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",_),n.Factory.addGetterSetter(E,"stroke",void 0,a.getStringOrGradientValidator()),n.Factory.addGetterSetter(E,"strokeWidth",2,a.getNumberValidator()),n.Factory.addGetterSetter(E,"fillAfterStrokeEnabled",!1),n.Factory.addGetterSetter(E,"hitStrokeWidth","auto",a.getNumberOrAutoValidator()),n.Factory.addGetterSetter(E,"strokeHitEnabled",!0,a.getBooleanValidator()),n.Factory.addGetterSetter(E,"perfectDrawEnabled",!0,a.getBooleanValidator()),n.Factory.addGetterSetter(E,"shadowForStrokeEnabled",!0,a.getBooleanValidator()),n.Factory.addGetterSetter(E,"lineJoin"),n.Factory.addGetterSetter(E,"lineCap"),n.Factory.addGetterSetter(E,"sceneFunc"),n.Factory.addGetterSetter(E,"hitFunc"),n.Factory.addGetterSetter(E,"dash"),n.Factory.addGetterSetter(E,"dashOffset",0,a.getNumberValidator()),n.Factory.addGetterSetter(E,"shadowColor",void 0,a.getStringValidator()),n.Factory.addGetterSetter(E,"shadowBlur",0,a.getNumberValidator()),n.Factory.addGetterSetter(E,"shadowOpacity",1,a.getNumberValidator()),n.Factory.addComponentsGetterSetter(E,"shadowOffset",["x","y"]),n.Factory.addGetterSetter(E,"shadowOffsetX",0,a.getNumberValidator()),n.Factory.addGetterSetter(E,"shadowOffsetY",0,a.getNumberValidator()),n.Factory.addGetterSetter(E,"fillPatternImage"),n.Factory.addGetterSetter(E,"fill",void 0,a.getStringOrGradientValidator()),n.Factory.addGetterSetter(E,"fillPatternX",0,a.getNumberValidator()),n.Factory.addGetterSetter(E,"fillPatternY",0,a.getNumberValidator()),n.Factory.addGetterSetter(E,"fillLinearGradientColorStops"),n.Factory.addGetterSetter(E,"strokeLinearGradientColorStops"),n.Factory.addGetterSetter(E,"fillRadialGradientStartRadius",0),n.Factory.addGetterSetter(E,"fillRadialGradientEndRadius",0),n.Factory.addGetterSetter(E,"fillRadialGradientColorStops"),n.Factory.addGetterSetter(E,"fillPatternRepeat","repeat"),n.Factory.addGetterSetter(E,"fillEnabled",!0),n.Factory.addGetterSetter(E,"strokeEnabled",!0),n.Factory.addGetterSetter(E,"shadowEnabled",!0),n.Factory.addGetterSetter(E,"dashEnabled",!0),n.Factory.addGetterSetter(E,"strokeScaleEnabled",!0),n.Factory.addGetterSetter(E,"fillPriority","color"),n.Factory.addComponentsGetterSetter(E,"fillPatternOffset",["x","y"]),n.Factory.addGetterSetter(E,"fillPatternOffsetX",0,a.getNumberValidator()),n.Factory.addGetterSetter(E,"fillPatternOffsetY",0,a.getNumberValidator()),n.Factory.addComponentsGetterSetter(E,"fillPatternScale",["x","y"]),n.Factory.addGetterSetter(E,"fillPatternScaleX",1,a.getNumberValidator()),n.Factory.addGetterSetter(E,"fillPatternScaleY",1,a.getNumberValidator()),n.Factory.addComponentsGetterSetter(E,"fillLinearGradientStartPoint",["x","y"]),n.Factory.addComponentsGetterSetter(E,"strokeLinearGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(E,"fillLinearGradientStartPointX",0),n.Factory.addGetterSetter(E,"strokeLinearGradientStartPointX",0),n.Factory.addGetterSetter(E,"fillLinearGradientStartPointY",0),n.Factory.addGetterSetter(E,"strokeLinearGradientStartPointY",0),n.Factory.addComponentsGetterSetter(E,"fillLinearGradientEndPoint",["x","y"]),n.Factory.addComponentsGetterSetter(E,"strokeLinearGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(E,"fillLinearGradientEndPointX",0),n.Factory.addGetterSetter(E,"strokeLinearGradientEndPointX",0),n.Factory.addGetterSetter(E,"fillLinearGradientEndPointY",0),n.Factory.addGetterSetter(E,"strokeLinearGradientEndPointY",0),n.Factory.addComponentsGetterSetter(E,"fillRadialGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(E,"fillRadialGradientStartPointX",0),n.Factory.addGetterSetter(E,"fillRadialGradientStartPointY",0),n.Factory.addComponentsGetterSetter(E,"fillRadialGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(E,"fillRadialGradientEndPointX",0),n.Factory.addGetterSetter(E,"fillRadialGradientEndPointY",0),n.Factory.addGetterSetter(E,"fillPatternRotation",0),n.Factory.backCompat(E,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),t.Collection.mapMethods(E)})(Oi);var DW=kt&&kt.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Zh,"__esModule",{value:!0});Zh.Layer=void 0;var Ss=Jr,Xb=Il,yf=ci,e5=Hr,x3=Eo,IW=fr,RW=Oi,FW=Vr,BW="#",zW="beforeDraw",qW="draw",g4=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],GW=g4.length,Rl=function(r){DW(e,r);function e(t){var n=r.call(this,t)||this;return n.canvas=new x3.SceneCanvas,n.hitCanvas=new x3.HitCanvas({pixelRatio:1}),n._waitingForDraw=!1,n.on("visibleChange.konva",n._checkVisibility),n._checkVisibility(),n.on("imageSmoothingEnabledChange.konva",n._setSmoothEnabled),n._setSmoothEnabled(),n}return e.prototype.createPNGStream=function(){var t=this.canvas._canvas;return t.createPNGStream()},e.prototype.getCanvas=function(){return this.canvas},e.prototype.getHitCanvas=function(){return this.hitCanvas},e.prototype.getContext=function(){return this.getCanvas().getContext()},e.prototype.clear=function(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this},e.prototype.setZIndex=function(t){r.prototype.setZIndex.call(this,t);var n=this.getStage();return n&&(n.content.removeChild(this.getCanvas()._canvas),t<n.children.length-1?n.content.insertBefore(this.getCanvas()._canvas,n.children[t+1].getCanvas()._canvas):n.content.appendChild(this.getCanvas()._canvas)),this},e.prototype.moveToTop=function(){yf.Node.prototype.moveToTop.call(this);var t=this.getStage();return t&&(t.content.removeChild(this.getCanvas()._canvas),t.content.appendChild(this.getCanvas()._canvas)),!0},e.prototype.moveUp=function(){var t=yf.Node.prototype.moveUp.call(this);if(!t)return!1;var n=this.getStage();return n?(n.content.removeChild(this.getCanvas()._canvas),this.index<n.children.length-1?n.content.insertBefore(this.getCanvas()._canvas,n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getCanvas()._canvas),!0):!1},e.prototype.moveDown=function(){if(yf.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var n=t.children;t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,n[this.index+1].getCanvas()._canvas)}return!0}return!1},e.prototype.moveToBottom=function(){if(yf.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var n=t.children;t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,n[1].getCanvas()._canvas)}return!0}return!1},e.prototype.getLayer=function(){return this},e.prototype.remove=function(){var t=this.getCanvas()._canvas;return yf.Node.prototype.remove.call(this),t&&t.parentNode&&Ss.Util._isInDocument(t)&&t.parentNode.removeChild(t),this},e.prototype.getStage=function(){return this.parent},e.prototype.setSize=function(t){var n=t.width,i=t.height;return this.canvas.setSize(n,i),this.hitCanvas.setSize(n,i),this._setSmoothEnabled(),this},e.prototype._validateAdd=function(t){var n=t.getType();n!=="Group"&&n!=="Shape"&&Ss.Util.throw("You may only add groups and shapes to a layer.")},e.prototype._toKonvaCanvas=function(t){return t=t||{},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),yf.Node.prototype._toKonvaCanvas.call(this,t)},e.prototype._checkVisibility=function(){var t=this.visible();t?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"},e.prototype._setSmoothEnabled=function(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()},e.prototype.getWidth=function(){if(this.parent)return this.parent.width()},e.prototype.setWidth=function(){Ss.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')},e.prototype.getHeight=function(){if(this.parent)return this.parent.height()},e.prototype.setHeight=function(){Ss.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')},e.prototype.batchDraw=function(){var t=this;return this._waitingForDraw||(this._waitingForDraw=!0,Ss.Util.requestAnimFrame(function(){t.draw(),t._waitingForDraw=!1})),this},e.prototype.getIntersection=function(t,n){if(!this.isListening()||!this.isVisible())return null;for(var i=1,a=!1;;){for(var o=0;o<GW;o++){var s=g4[o],u=this._getIntersection({x:t.x+s.x*i,y:t.y+s.y*i}),l=u.shape;if(l&&n)return l.findAncestor(n,!0);if(l)return l;if(a=!!u.antialiased,!u.antialiased)break}if(a)i+=1;else return null}},e.prototype._getIntersection=function(t){var n=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(t.x*n),Math.round(t.y*n),1,1).data,a=i[3];if(a===255){var o=Ss.Util._rgbToHex(i[0],i[1],i[2]),s=RW.shapes[BW+o];return s?{shape:s}:{antialiased:!0}}else if(a>0)return{antialiased:!0};return{}},e.prototype.drawScene=function(t,n){var i=this.getLayer(),a=t||i&&i.getCanvas();return this._fire(zW,{node:this}),this.clearBeforeDraw()&&a.getContext().clear(),Xb.Container.prototype.drawScene.call(this,a,n),this._fire(qW,{node:this}),this},e.prototype.drawHit=function(t,n){var i=this.getLayer(),a=t||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),Xb.Container.prototype.drawHit.call(this,a,n),this},e.prototype.enableHitGraph=function(){return this.hitGraphEnabled(!0),this},e.prototype.disableHitGraph=function(){return this.hitGraphEnabled(!1),this},e.prototype.setHitGraphEnabled=function(t){Ss.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)},e.prototype.getHitGraphEnabled=function(t){return Ss.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()},e.prototype.toggleHitCanvas=function(){if(this.parent){var t=this.parent,n=!!this.hitCanvas._canvas.parentNode;n?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}},e}(Xb.Container);Zh.Layer=Rl;Rl.prototype.nodeType="Layer";FW._registerNode(Rl);e5.Factory.addGetterSetter(Rl,"imageSmoothingEnabled",!0);e5.Factory.addGetterSetter(Rl,"clearBeforeDraw",!0);e5.Factory.addGetterSetter(Rl,"hitGraphEnabled",!0,IW.getBooleanValidator());Ss.Collection.mapMethods(Rl);var Ov={},$W=kt&&kt.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ov,"__esModule",{value:!0});Ov.FastLayer=void 0;var m4=Jr,UW=Zh,HW=Vr,Dv=function(r){$W(e,r);function e(t){var n=r.call(this,t)||this;return n.listening(!1),m4.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.'),n}return e}(UW.Layer);Ov.FastLayer=Dv;Dv.prototype.nodeType="FastLayer";HW._registerNode(Dv);m4.Collection.mapMethods(Dv);var lc={},jW=kt&&kt.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(lc,"__esModule",{value:!0});lc.Group=void 0;var y4=Jr,VW=Il,WW=Vr,Iv=function(r){jW(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._validateAdd=function(t){var n=t.getType();n!=="Group"&&n!=="Shape"&&y4.Util.throw("You may only add groups and shapes to groups.")},e}(VW.Container);lc.Group=Iv;Iv.prototype.nodeType="Group";WW._registerNode(Iv);y4.Collection.mapMethods(Iv);var fc={};Object.defineProperty(fc,"__esModule",{value:!0});fc.Animation=void 0;var Kb=Vr,Zb=function(){return Kb.glob.performance&&Kb.glob.performance.now?function(){return Kb.glob.performance.now()}:function(){return new Date().getTime()}}(),YW=function(){function r(e,t){this.id=r.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:Zb(),frameRate:0},this.func=e,this.setLayers(t)}return r.prototype.setLayers=function(e){var t=[];return e?e.length>0?t=e:t=[e]:t=[],this.layers=t,this},r.prototype.getLayers=function(){return this.layers},r.prototype.addLayer=function(e){var t=this.layers,n=t.length,i;for(i=0;i<n;i++)if(t[i]._id===e._id)return!1;return this.layers.push(e),!0},r.prototype.isRunning=function(){var e=r,t=e.animations,n=t.length,i;for(i=0;i<n;i++)if(t[i].id===this.id)return!0;return!1},r.prototype.start=function(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=Zb(),r._addAnimation(this),this},r.prototype.stop=function(){return r._removeAnimation(this),this},r.prototype._updateFrameObject=function(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff},r._addAnimation=function(e){this.animations.push(e),this._handleAnimation()},r._removeAnimation=function(e){var t=e.id,n=this.animations,i=n.length,a;for(a=0;a<i;a++)if(n[a].id===t){this.animations.splice(a,1);break}},r._runFrames=function(){var e={},t=this.animations,n,i,a,o,s,u,l,f,c;for(o=0;o<t.length;o++)if(n=t[o],i=n.layers,a=n.func,n._updateFrameObject(Zb()),u=i.length,a?c=a.call(n,n.frame)!==!1:c=!0,!!c)for(s=0;s<u;s++)l=i[s],l._id!==void 0&&(e[l._id]=l);for(f in e)e.hasOwnProperty(f)&&e[f].draw()},r._animationLoop=function(){var e=r;e.animations.length?(e._runFrames(),requestAnimationFrame(e._animationLoop)):e.animRunning=!1},r._handleAnimation=function(){this.animRunning||(this.animRunning=!0,requestAnimationFrame(this._animationLoop))},r.animations=[],r.animIdCounter=0,r.animRunning=!1,r}();fc.Animation=YW;var b4={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Easings=r.Tween=void 0;var e=Jr,t=fc,n=ci,i=Vr,a={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,s=2,u=3,l=0,f=["fill","stroke","shadowColor"],c=function(){function h(p,g,b,v,y,m,w){this.prop=p,this.propFunc=g,this.begin=v,this._pos=v,this.duration=m,this._change=0,this.prevPos=0,this.yoyo=w,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=b,this._change=y-this.begin,this.pause()}return h.prototype.fire=function(p){var g=this[p];g&&g()},h.prototype.setTime=function(p){p>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():p<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=p,this.update())},h.prototype.getTime=function(){return this._time},h.prototype.setPosition=function(p){this.prevPos=this._pos,this.propFunc(p),this._pos=p},h.prototype.getPosition=function(p){return p===void 0&&(p=this._time),this.func(p,this.begin,this._change,this.duration)},h.prototype.play=function(){this.state=s,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},h.prototype.reverse=function(){this.state=u,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},h.prototype.seek=function(p){this.pause(),this._time=p,this.update(),this.fire("onSeek")},h.prototype.reset=function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},h.prototype.finish=function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},h.prototype.update=function(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")},h.prototype.onEnterFrame=function(){var p=this.getTimer()-this._startTime;this.state===s?this.setTime(p):this.state===u&&this.setTime(this.duration-p)},h.prototype.pause=function(){this.state=o,this.fire("onPause")},h.prototype.getTimer=function(){return new Date().getTime()},h}(),d=function(){function h(p){var g=this,b=p.node,v=b._id,y,m=p.easing||r.Easings.Linear,w=!!p.yoyo,S;typeof p.duration>"u"?y=.3:p.duration===0?y=.001:y=p.duration,this.node=b,this._id=l++;var A=b.getLayer()||(b instanceof i.Konva.Stage?b.getLayers():null);A||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new t.Animation(function(){g.tween.onEnterFrame()},A),this.tween=new c(S,function(_){g._tweenFunc(_)},m,0,1,y*1e3,w),this._addListeners(),h.attrs[v]||(h.attrs[v]={}),h.attrs[v][this._id]||(h.attrs[v][this._id]={}),h.tweens[v]||(h.tweens[v]={});for(S in p)a[S]===void 0&&this._addAttr(S,p[S]);this.reset(),this.onFinish=p.onFinish,this.onReset=p.onReset,this.onUpdate=p.onUpdate}return h.prototype._addAttr=function(p,g){var b=this.node,v=b._id,y,m,w,S,A,_,E,k;if(w=h.tweens[v][p],w&&delete h.attrs[v][w][p],y=b.getAttr(p),e.Util._isArray(g))if(m=[],A=Math.max(g.length,y.length),p==="points"&&g.length!==y.length&&(g.length>y.length?(E=y,y=e.Util._prepareArrayForTween(y,g,b.closed())):(_=g,g=e.Util._prepareArrayForTween(g,y,b.closed()))),p.indexOf("fill")===0)for(S=0;S<A;S++)if(S%2===0)m.push(g[S]-y[S]);else{var M=e.Util.colorToRGBA(y[S]);k=e.Util.colorToRGBA(g[S]),y[S]=M,m.push({r:k.r-M.r,g:k.g-M.g,b:k.b-M.b,a:k.a-M.a})}else for(S=0;S<A;S++)m.push(g[S]-y[S]);else f.indexOf(p)!==-1?(y=e.Util.colorToRGBA(y),k=e.Util.colorToRGBA(g),m={r:k.r-y.r,g:k.g-y.g,b:k.b-y.b,a:k.a-y.a}):m=g-y;h.attrs[v][this._id][p]={start:y,diff:m,end:g,trueEnd:_,trueStart:E},h.tweens[v][p]=this._id},h.prototype._tweenFunc=function(p){var g=this.node,b=h.attrs[g._id][this._id],v,y,m,w,S,A,_,E;for(v in b){if(y=b[v],m=y.start,w=y.diff,E=y.end,e.Util._isArray(m))if(S=[],_=Math.max(m.length,E.length),v.indexOf("fill")===0)for(A=0;A<_;A++)A%2===0?S.push((m[A]||0)+w[A]*p):S.push("rgba("+Math.round(m[A].r+w[A].r*p)+","+Math.round(m[A].g+w[A].g*p)+","+Math.round(m[A].b+w[A].b*p)+","+(m[A].a+w[A].a*p)+")");else for(A=0;A<_;A++)S.push((m[A]||0)+w[A]*p);else f.indexOf(v)!==-1?S="rgba("+Math.round(m.r+w.r*p)+","+Math.round(m.g+w.g*p)+","+Math.round(m.b+w.b*p)+","+(m.a+w.a*p)+")":S=m+w*p;g.setAttr(v,S)}},h.prototype._addListeners=function(){var p=this;this.tween.onPlay=function(){p.anim.start()},this.tween.onReverse=function(){p.anim.start()},this.tween.onPause=function(){p.anim.stop()},this.tween.onFinish=function(){var g=p.node,b=h.attrs[g._id][p._id];b.points&&b.points.trueEnd&&g.setAttr("points",b.points.trueEnd),p.onFinish&&p.onFinish.call(p)},this.tween.onReset=function(){var g=p.node,b=h.attrs[g._id][p._id];b.points&&b.points.trueStart&&g.points(b.points.trueStart),p.onReset&&p.onReset()},this.tween.onUpdate=function(){p.onUpdate&&p.onUpdate.call(p)}},h.prototype.play=function(){return this.tween.play(),this},h.prototype.reverse=function(){return this.tween.reverse(),this},h.prototype.reset=function(){return this.tween.reset(),this},h.prototype.seek=function(p){return this.tween.seek(p*1e3),this},h.prototype.pause=function(){return this.tween.pause(),this},h.prototype.finish=function(){return this.tween.finish(),this},h.prototype.destroy=function(){var p=this.node._id,g=this._id,b=h.tweens[p],v;this.pause();for(v in b)delete h.tweens[p][v];delete h.attrs[p][g]},h.attrs={},h.tweens={},h}();r.Tween=d,n.Node.prototype.to=function(h){var p=h.onFinish;h.node=this,h.onFinish=function(){this.destroy(),p&&p()};var g=new d(h);g.play()},r.Easings={BackEaseIn:function(h,p,g,b){var v=1.70158;return g*(h/=b)*h*((v+1)*h-v)+p},BackEaseOut:function(h,p,g,b){var v=1.70158;return g*((h=h/b-1)*h*((v+1)*h+v)+1)+p},BackEaseInOut:function(h,p,g,b){var v=1.70158;return(h/=b/2)<1?g/2*(h*h*(((v*=1.525)+1)*h-v))+p:g/2*((h-=2)*h*(((v*=1.525)+1)*h+v)+2)+p},ElasticEaseIn:function(h,p,g,b,v,y){var m=0;return h===0?p:(h/=b)===1?p+g:(y||(y=b*.3),!v||v<Math.abs(g)?(v=g,m=y/4):m=y/(2*Math.PI)*Math.asin(g/v),-(v*Math.pow(2,10*(h-=1))*Math.sin((h*b-m)*(2*Math.PI)/y))+p)},ElasticEaseOut:function(h,p,g,b,v,y){var m=0;return h===0?p:(h/=b)===1?p+g:(y||(y=b*.3),!v||v<Math.abs(g)?(v=g,m=y/4):m=y/(2*Math.PI)*Math.asin(g/v),v*Math.pow(2,-10*h)*Math.sin((h*b-m)*(2*Math.PI)/y)+g+p)},ElasticEaseInOut:function(h,p,g,b,v,y){var m=0;return h===0?p:(h/=b/2)===2?p+g:(y||(y=b*(.3*1.5)),!v||v<Math.abs(g)?(v=g,m=y/4):m=y/(2*Math.PI)*Math.asin(g/v),h<1?-.5*(v*Math.pow(2,10*(h-=1))*Math.sin((h*b-m)*(2*Math.PI)/y))+p:v*Math.pow(2,-10*(h-=1))*Math.sin((h*b-m)*(2*Math.PI)/y)*.5+g+p)},BounceEaseOut:function(h,p,g,b){return(h/=b)<1/2.75?g*(7.5625*h*h)+p:h<2/2.75?g*(7.5625*(h-=1.5/2.75)*h+.75)+p:h<2.5/2.75?g*(7.5625*(h-=2.25/2.75)*h+.9375)+p:g*(7.5625*(h-=2.625/2.75)*h+.984375)+p},BounceEaseIn:function(h,p,g,b){return g-r.Easings.BounceEaseOut(b-h,0,g,b)+p},BounceEaseInOut:function(h,p,g,b){return h<b/2?r.Easings.BounceEaseIn(h*2,0,g,b)*.5+p:r.Easings.BounceEaseOut(h*2-b,0,g,b)*.5+g*.5+p},EaseIn:function(h,p,g,b){return g*(h/=b)*h+p},EaseOut:function(h,p,g,b){return-g*(h/=b)*(h-2)+p},EaseInOut:function(h,p,g,b){return(h/=b/2)<1?g/2*h*h+p:-g/2*(--h*(h-2)-1)+p},StrongEaseIn:function(h,p,g,b){return g*(h/=b)*h*h*h*h+p},StrongEaseOut:function(h,p,g,b){return g*((h=h/b-1)*h*h*h*h+1)+p},StrongEaseInOut:function(h,p,g,b){return(h/=b/2)<1?g/2*h*h*h*h*h+p:g/2*((h-=2)*h*h*h*h+2)+p},Linear:function(h,p,g,b){return g*h/b+p}}})(b4);Object.defineProperty(kv,"__esModule",{value:!0});kv.Konva=void 0;var XW=Vr,Wd=Jr,Qb=ci,KW=Il,S3=d4,ZW=Zh,QW=Ov,JW=lc,eY=Pv,E3=Oi,tY=fc,C3=b4,rY=Ms,nY=Eo;kv.Konva=Wd.Util._assign(XW.Konva,{Collection:Wd.Collection,Util:Wd.Util,Transform:Wd.Transform,Node:Qb.Node,ids:Qb.ids,names:Qb.names,Container:KW.Container,Stage:S3.Stage,stages:S3.stages,Layer:ZW.Layer,FastLayer:QW.FastLayer,Group:JW.Group,DD:eY.DD,Shape:E3.Shape,shapes:E3.shapes,Animation:tY.Animation,Tween:C3.Tween,Easings:C3.Easings,Context:rY.Context,Canvas:nY.Canvas});var Rv={},iY=kt&&kt.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Rv,"__esModule",{value:!0});Rv.Arc=void 0;var aY=Jr,Fv=Hr,oY=Oi,sY=Vr,Bv=fr,uY=Vr,fs=function(r){iY(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){var n=sY.Konva.getAngle(this.angle()),i=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,n,i),t.arc(0,0,this.innerRadius(),n,0,!i),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return this.outerRadius()*2},e.prototype.getHeight=function(){return this.outerRadius()*2},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(oY.Shape);Rv.Arc=fs;fs.prototype._centroid=!0;fs.prototype.className="Arc";fs.prototype._attrsAffectingSize=["innerRadius","outerRadius"];uY._registerNode(fs);Fv.Factory.addGetterSetter(fs,"innerRadius",0,Bv.getNumberValidator());Fv.Factory.addGetterSetter(fs,"outerRadius",0,Bv.getNumberValidator());Fv.Factory.addGetterSetter(fs,"angle",0,Bv.getNumberValidator());Fv.Factory.addGetterSetter(fs,"clockwise",!1,Bv.getBooleanValidator());aY.Collection.mapMethods(fs);var zv={},Qh={},lY=kt&&kt.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),fY=kt&&kt.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n};Object.defineProperty(Qh,"__esModule",{value:!0});Qh.Line=void 0;var rh=Jr,qv=Hr,cY=Oi,w4=fr,hY=Vr,Us=function(r){lY(e,r);function e(t){var n=r.call(this,t)||this;return n.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")}),n}return e.prototype._sceneFunc=function(t){var n=this.points(),i=n.length,a=this.tension(),o=this.closed(),s=this.bezier(),u,l,f;if(i){if(t.beginPath(),t.moveTo(n[0],n[1]),a!==0&&i>4){for(u=this.getTensionPoints(),l=u.length,f=o?0:4,o||t.quadraticCurveTo(u[0],u[1],u[2],u[3]);f<l-2;)t.bezierCurveTo(u[f++],u[f++],u[f++],u[f++],u[f++],u[f++]);o||t.quadraticCurveTo(u[l-2],u[l-1],n[i-2],n[i-1])}else if(s)for(f=2;f<i;)t.bezierCurveTo(n[f++],n[f++],n[f++],n[f++],n[f++],n[f++]);else for(f=2;f<i;f+=2)t.lineTo(n[f],n[f+1]);o?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}},e.prototype.getTensionPoints=function(){return this._getCache("tensionPoints",this._getTensionPoints)},e.prototype._getTensionPoints=function(){return this.closed()?this._getTensionPointsClosed():rh.Util._expandPoints(this.points(),this.tension())},e.prototype._getTensionPointsClosed=function(){var t=this.points(),n=t.length,i=this.tension(),a=rh.Util._getControlPoints(t[n-2],t[n-1],t[0],t[1],t[2],t[3],i),o=rh.Util._getControlPoints(t[n-4],t[n-3],t[n-2],t[n-1],t[0],t[1],i),s=rh.Util._expandPoints(t,i),u=[a[2],a[3]].concat(s).concat([o[0],o[1],t[n-2],t[n-1],o[2],o[3],a[0],a[1],t[0],t[1]]);return u},e.prototype.getWidth=function(){return this.getSelfRect().width},e.prototype.getHeight=function(){return this.getSelfRect().height},e.prototype.getSelfRect=function(){var t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=fY([t[0],t[1]],this._getTensionPoints(),[t[t.length-2],t[t.length-1]]):t=this.points();for(var n=t[0],i=t[0],a=t[1],o=t[1],s,u,l=0;l<t.length/2;l++)s=t[l*2],u=t[l*2+1],n=Math.min(n,s),i=Math.max(i,s),a=Math.min(a,u),o=Math.max(o,u);return{x:n,y:a,width:i-n,height:o-a}},e}(cY.Shape);Qh.Line=Us;Us.prototype.className="Line";Us.prototype._attrsAffectingSize=["points","bezier","tension"];hY._registerNode(Us);qv.Factory.addGetterSetter(Us,"closed",!1);qv.Factory.addGetterSetter(Us,"bezier",!1);qv.Factory.addGetterSetter(Us,"tension",0,w4.getNumberValidator());qv.Factory.addGetterSetter(Us,"points",[],w4.getNumberArrayValidator());rh.Collection.mapMethods(Us);var dY=kt&&kt.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(zv,"__esModule",{value:!0});zv.Arrow=void 0;var pY=Jr,t5=Hr,vY=Qh,_4=fr,gY=Vr,Fl=function(r){dY(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){r.prototype._sceneFunc.call(this,t);var n=Math.PI*2,i=this.points(),a=i,o=this.tension()!==0&&i.length>4;o&&(a=this.getTensionPoints());var s=i.length,u,l;o?(u=i[s-2]-(a[a.length-2]+a[a.length-4])/2,l=i[s-1]-(a[a.length-1]+a[a.length-3])/2):(u=i[s-2]-i[s-4],l=i[s-1]-i[s-3]);var f=(Math.atan2(l,u)+n)%n,c=this.pointerLength(),d=this.pointerWidth();t.save(),t.beginPath(),t.translate(i[s-2],i[s-1]),t.rotate(f),t.moveTo(0,0),t.lineTo(-c,d/2),t.lineTo(-c,-d/2),t.closePath(),t.restore(),this.pointerAtBeginning()&&(t.save(),t.translate(i[0],i[1]),o?(u=(a[0]+a[2])/2-i[0],l=(a[1]+a[3])/2-i[1]):(u=i[2]-i[0],l=i[3]-i[1]),t.rotate((Math.atan2(-l,-u)+n)%n),t.moveTo(0,0),t.lineTo(-c,d/2),t.lineTo(-c,-d/2),t.closePath(),t.restore());var h=this.dashEnabled();h&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),h&&(this.attrs.dashEnabled=!0)},e.prototype.getSelfRect=function(){var t=r.prototype.getSelfRect.call(this),n=this.pointerWidth()/2;return{x:t.x-n,y:t.y-n,width:t.width+n*2,height:t.height+n*2}},e}(vY.Line);zv.Arrow=Fl;Fl.prototype.className="Arrow";gY._registerNode(Fl);t5.Factory.addGetterSetter(Fl,"pointerLength",10,_4.getNumberValidator());t5.Factory.addGetterSetter(Fl,"pointerWidth",10,_4.getNumberValidator());t5.Factory.addGetterSetter(Fl,"pointerAtBeginning",!1);pY.Collection.mapMethods(Fl);var Gv={},mY=kt&&kt.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Gv,"__esModule",{value:!0});Gv.Circle=void 0;var yY=Jr,bY=Hr,wY=Oi,_Y=fr,xY=Vr,Bl=function(r){mY(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return this.radius()*2},e.prototype.getHeight=function(){return this.radius()*2},e.prototype.setWidth=function(t){this.radius()!==t/2&&this.radius(t/2)},e.prototype.setHeight=function(t){this.radius()!==t/2&&this.radius(t/2)},e}(wY.Shape);Gv.Circle=Bl;Bl.prototype._centroid=!0;Bl.prototype.className="Circle";Bl.prototype._attrsAffectingSize=["radius"];xY._registerNode(Bl);bY.Factory.addGetterSetter(Bl,"radius",0,_Y.getNumberValidator());yY.Collection.mapMethods(Bl);var $v={},SY=kt&&kt.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty($v,"__esModule",{value:!0});$v.Ellipse=void 0;var EY=Jr,r5=Hr,CY=Oi,x4=fr,AY=Vr,Hs=function(r){SY(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){var n=this.radiusX(),i=this.radiusY();t.beginPath(),t.save(),n!==i&&t.scale(1,i/n),t.arc(0,0,n,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return this.radiusX()*2},e.prototype.getHeight=function(){return this.radiusY()*2},e.prototype.setWidth=function(t){this.radiusX(t/2)},e.prototype.setHeight=function(t){this.radiusY(t/2)},e}(CY.Shape);$v.Ellipse=Hs;Hs.prototype.className="Ellipse";Hs.prototype._centroid=!0;Hs.prototype._attrsAffectingSize=["radiusX","radiusY"];AY._registerNode(Hs);r5.Factory.addComponentsGetterSetter(Hs,"radius",["x","y"]);r5.Factory.addGetterSetter(Hs,"radiusX",0,x4.getNumberValidator());r5.Factory.addGetterSetter(Hs,"radiusY",0,x4.getNumberValidator());EY.Collection.mapMethods(Hs);var Uv={},TY=kt&&kt.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Uv,"__esModule",{value:!0});Uv.Image=void 0;var S4=Jr,cc=Hr,kY=Oi,Hv=fr,LY=Vr,cs=function(r){TY(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._useBufferCanvas=function(){return r.prototype._useBufferCanvas.call(this,!0)},e.prototype._sceneFunc=function(t){var n=this.getWidth(),i=this.getHeight(),a=this.attrs.image,o;if(a){var s=this.attrs.cropWidth,u=this.attrs.cropHeight;s&&u?o=[a,this.cropX(),this.cropY(),s,u,0,0,n,i]:o=[a,0,0,n,i]}(this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,n,i),t.closePath(),t.fillStrokeShape(this)),a&&t.drawImage.apply(t,o)},e.prototype._hitFunc=function(t){var n=this.width(),i=this.height();t.beginPath(),t.rect(0,0,n,i),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){var t,n;return(t=this.attrs.width)!==null&&t!==void 0?t:((n=this.image())===null||n===void 0?void 0:n.width)||0},e.prototype.getHeight=function(){var t,n;return(t=this.attrs.height)!==null&&t!==void 0?t:((n=this.image())===null||n===void 0?void 0:n.height)||0},e.fromURL=function(t,n){var i=S4.Util.createImageElement();i.onload=function(){var a=new e({image:i});n(a)},i.crossOrigin="Anonymous",i.src=t},e}(kY.Shape);Uv.Image=cs;cs.prototype.className="Image";LY._registerNode(cs);cc.Factory.addGetterSetter(cs,"image");cc.Factory.addComponentsGetterSetter(cs,"crop",["x","y","width","height"]);cc.Factory.addGetterSetter(cs,"cropX",0,Hv.getNumberValidator());cc.Factory.addGetterSetter(cs,"cropY",0,Hv.getNumberValidator());cc.Factory.addGetterSetter(cs,"cropWidth",0,Hv.getNumberValidator());cc.Factory.addGetterSetter(cs,"cropHeight",0,Hv.getNumberValidator());S4.Collection.mapMethods(cs);var $f={},E4=kt&&kt.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty($f,"__esModule",{value:!0});$f.Tag=$f.Label=void 0;var C4=Jr,jv=Hr,NY=Oi,PY=lc,n5=fr,A4=Vr,T4=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height"],MY="Change.konva",OY="none",$2="up",U2="right",H2="down",j2="left",DY=T4.length,Vv=function(r){E4(e,r);function e(t){var n=r.call(this,t)||this;return n.on("add.konva",function(i){this._addListeners(i.child),this._sync()}),n}return e.prototype.getText=function(){return this.find("Text")[0]},e.prototype.getTag=function(){return this.find("Tag")[0]},e.prototype._addListeners=function(t){var n=this,i,a=function(){n._sync()};for(i=0;i<DY;i++)t.on(T4[i]+MY,a)},e.prototype.getWidth=function(){return this.getText().width()},e.prototype.getHeight=function(){return this.getText().height()},e.prototype._sync=function(){var t=this.getText(),n=this.getTag(),i,a,o,s,u,l,f;if(t&&n){switch(i=t.width(),a=t.height(),o=n.pointerDirection(),s=n.pointerWidth(),f=n.pointerHeight(),u=0,l=0,o){case $2:u=i/2,l=-1*f;break;case U2:u=i+s,l=a/2;break;case H2:u=i/2,l=a+f;break;case j2:u=-1*s,l=a/2;break}n.setAttrs({x:-1*u,y:-1*l,width:i,height:a}),t.setAttrs({x:-1*u,y:-1*l})}},e}(PY.Group);$f.Label=Vv;Vv.prototype.className="Label";A4._registerNode(Vv);C4.Collection.mapMethods(Vv);var Uu=function(r){E4(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){var n=this.width(),i=this.height(),a=this.pointerDirection(),o=this.pointerWidth(),s=this.pointerHeight(),u=this.cornerRadius(),l=0,f=0,c=0,d=0;typeof u=="number"?l=f=c=d=Math.min(u,n/2,i/2):(l=Math.min(u[0]||0,n/2,i/2),f=Math.min(u[1]||0,n/2,i/2),d=Math.min(u[2]||0,n/2,i/2),c=Math.min(u[3]||0,n/2,i/2)),t.beginPath(),t.moveTo(l,0),a===$2&&(t.lineTo((n-o)/2,0),t.lineTo(n/2,-1*s),t.lineTo((n+o)/2,0)),t.lineTo(n-f,0),t.arc(n-f,f,f,Math.PI*3/2,0,!1),a===U2&&(t.lineTo(n,(i-s)/2),t.lineTo(n+o,i/2),t.lineTo(n,(i+s)/2)),t.lineTo(n,i-d),t.arc(n-d,i-d,d,0,Math.PI/2,!1),a===H2&&(t.lineTo((n+o)/2,i),t.lineTo(n/2,i+s),t.lineTo((n-o)/2,i)),t.lineTo(c,i),t.arc(c,i-c,c,Math.PI/2,Math.PI,!1),a===j2&&(t.lineTo(0,(i+s)/2),t.lineTo(-1*o,i/2),t.lineTo(0,(i-s)/2)),t.lineTo(0,l),t.arc(l,l,l,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)},e.prototype.getSelfRect=function(){var t=0,n=0,i=this.pointerWidth(),a=this.pointerHeight(),o=this.pointerDirection(),s=this.width(),u=this.height();return o===$2?(n-=a,u+=a):o===H2?u+=a:o===j2?(t-=i*1.5,s+=i):o===U2&&(s+=i*1.5),{x:t,y:n,width:s,height:u}},e}(NY.Shape);$f.Tag=Uu;Uu.prototype.className="Tag";A4._registerNode(Uu);jv.Factory.addGetterSetter(Uu,"pointerDirection",OY);jv.Factory.addGetterSetter(Uu,"pointerWidth",0,n5.getNumberValidator());jv.Factory.addGetterSetter(Uu,"pointerHeight",0,n5.getNumberValidator());jv.Factory.addGetterSetter(Uu,"cornerRadius",0,n5.getNumberOrArrayOfNumbersValidator(4));C4.Collection.mapMethods(Uu);var Jh={},IY=kt&&kt.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Jh,"__esModule",{value:!0});Jh.Path=void 0;var RY=Jr,FY=Hr,BY=Oi,zY=Vr,hc=function(r){IY(e,r);function e(t){var n=r.call(this,t)||this;n.dataArray=[],n.pathLength=0,n.dataArray=e.parsePathData(n.data()),n.pathLength=0;for(var i=0;i<n.dataArray.length;++i)n.pathLength+=n.dataArray[i].pathLength;return n.on("dataChange.konva",function(){this.dataArray=e.parsePathData(this.data()),this.pathLength=0;for(var a=0;a<this.dataArray.length;++a)this.pathLength+=this.dataArray[a].pathLength}),n}return e.prototype._sceneFunc=function(t){var n=this.dataArray;t.beginPath();for(var i=!1,a=0;a<n.length;a++){var o=n[a].command,s=n[a].points;switch(o){case"L":t.lineTo(s[0],s[1]);break;case"M":t.moveTo(s[0],s[1]);break;case"C":t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case"Q":t.quadraticCurveTo(s[0],s[1],s[2],s[3]);break;case"A":var u=s[0],l=s[1],f=s[2],c=s[3],d=s[4],h=s[5],p=s[6],g=s[7],b=f>c?f:c,v=f>c?1:f/c,y=f>c?c/f:1;t.translate(u,l),t.rotate(p),t.scale(v,y),t.arc(0,0,b,d,d+h,1-g),t.scale(1/v,1/y),t.rotate(-p),t.translate(-u,-l);break;case"z":i=!0,t.closePath();break}}!i&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)},e.prototype.getSelfRect=function(){var t=[];this.dataArray.forEach(function(f){if(f.command==="A"){var c=f.points[4],d=f.points[5],h=f.points[4]+d,p=Math.PI/180;if(Math.abs(c-h)<p&&(p=Math.abs(c-h)),d<0)for(var g=c-p;g>h;g-=p){var b=e.getPointOnEllipticalArc(f.points[0],f.points[1],f.points[2],f.points[3],g,0);t.push(b.x,b.y)}else for(var g=c+p;g<h;g+=p){var b=e.getPointOnEllipticalArc(f.points[0],f.points[1],f.points[2],f.points[3],g,0);t.push(b.x,b.y)}}else if(f.command==="C")for(var g=0;g<=1;g+=.01){var b=e.getPointOnCubicBezier(g,f.start.x,f.start.y,f.points[0],f.points[1],f.points[2],f.points[3],f.points[4],f.points[5]);t.push(b.x,b.y)}else t=t.concat(f.points)});for(var n=t[0],i=t[0],a=t[1],o=t[1],s,u,l=0;l<t.length/2;l++)s=t[l*2],u=t[l*2+1],isNaN(s)||(n=Math.min(n,s),i=Math.max(i,s)),isNaN(u)||(a=Math.min(a,u),o=Math.max(o,u));return{x:Math.round(n),y:Math.round(a),width:Math.round(i-n),height:Math.round(o-a)}},e.prototype.getLength=function(){return this.pathLength},e.prototype.getPointAtLength=function(t){var n,i=0,a=this.dataArray.length;if(!a)return null;for(;i<a&&t>this.dataArray[i].pathLength;)t-=this.dataArray[i].pathLength,++i;if(i===a)return n=this.dataArray[i-1].points.slice(-2),{x:n[0],y:n[1]};if(t<.01)return n=this.dataArray[i].points.slice(0,2),{x:n[0],y:n[1]};var o=this.dataArray[i],s=o.points;switch(o.command){case"L":return e.getPointOnLine(t,o.start.x,o.start.y,s[0],s[1]);case"C":return e.getPointOnCubicBezier(t/o.pathLength,o.start.x,o.start.y,s[0],s[1],s[2],s[3],s[4],s[5]);case"Q":return e.getPointOnQuadraticBezier(t/o.pathLength,o.start.x,o.start.y,s[0],s[1],s[2],s[3]);case"A":var u=s[0],l=s[1],f=s[2],c=s[3],d=s[4],h=s[5],p=s[6];return d+=h*t/o.pathLength,e.getPointOnEllipticalArc(u,l,f,c,d,p)}return null},e.getLineLength=function(t,n,i,a){return Math.sqrt((i-t)*(i-t)+(a-n)*(a-n))},e.getPointOnLine=function(t,n,i,a,o,s,u){s===void 0&&(s=n),u===void 0&&(u=i);var l=(o-i)/(a-n+1e-8),f=Math.sqrt(t*t/(1+l*l));a<n&&(f*=-1);var c=l*f,d;if(a===n)d={x:s,y:u+c};else if((u-i)/(s-n+1e-8)===l)d={x:s+f,y:u+c};else{var h,p,g=this.getLineLength(n,i,a,o),b=(s-n)*(a-n)+(u-i)*(o-i);b=b/(g*g),h=n+b*(a-n),p=i+b*(o-i);var v=this.getLineLength(s,u,h,p),y=Math.sqrt(t*t-v*v);f=Math.sqrt(y*y/(1+l*l)),a<n&&(f*=-1),c=l*f,d={x:h+f,y:p+c}}return d},e.getPointOnCubicBezier=function(t,n,i,a,o,s,u,l,f){function c(v){return v*v*v}function d(v){return 3*v*v*(1-v)}function h(v){return 3*v*(1-v)*(1-v)}function p(v){return(1-v)*(1-v)*(1-v)}var g=l*c(t)+s*d(t)+a*h(t)+n*p(t),b=f*c(t)+u*d(t)+o*h(t)+i*p(t);return{x:g,y:b}},e.getPointOnQuadraticBezier=function(t,n,i,a,o,s,u){function l(p){return p*p}function f(p){return 2*p*(1-p)}function c(p){return(1-p)*(1-p)}var d=s*l(t)+a*f(t)+n*c(t),h=u*l(t)+o*f(t)+i*c(t);return{x:d,y:h}},e.getPointOnEllipticalArc=function(t,n,i,a,o,s){var u=Math.cos(s),l=Math.sin(s),f={x:i*Math.cos(o),y:a*Math.sin(o)};return{x:t+(f.x*u-f.y*l),y:n+(f.x*l+f.y*u)}},e.parsePathData=function(t){if(!t)return[];var n=t,i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var a=0;a<i.length;a++)n=n.replace(new RegExp(i[a],"g"),"|"+i[a]);var o=n.split("|"),s=[],u=[],l=0,f=0,c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,d;for(a=1;a<o.length;a++){var h=o[a],p=h.charAt(0);for(h=h.slice(1),u.length=0;d=c.exec(h);)u.push(d[0]);for(var g=[],b=0,v=u.length;b<v;b++){var y=parseFloat(u[b]);isNaN(y)?g.push(0):g.push(y)}for(;g.length>0&&!isNaN(g[0]);){var m=null,w=[],S=l,A=f,_,E,k,M,T,C,R,x,B,D;switch(p){case"l":l+=g.shift(),f+=g.shift(),m="L",w.push(l,f);break;case"L":l=g.shift(),f=g.shift(),w.push(l,f);break;case"m":var O=g.shift(),G=g.shift();if(l+=O,f+=G,m="M",s.length>2&&s[s.length-1].command==="z"){for(var V=s.length-2;V>=0;V--)if(s[V].command==="M"){l=s[V].points[0]+O,f=s[V].points[1]+G;break}}w.push(l,f),p="l";break;case"M":l=g.shift(),f=g.shift(),m="M",w.push(l,f),p="L";break;case"h":l+=g.shift(),m="L",w.push(l,f);break;case"H":l=g.shift(),m="L",w.push(l,f);break;case"v":f+=g.shift(),m="L",w.push(l,f);break;case"V":f=g.shift(),m="L",w.push(l,f);break;case"C":w.push(g.shift(),g.shift(),g.shift(),g.shift()),l=g.shift(),f=g.shift(),w.push(l,f);break;case"c":w.push(l+g.shift(),f+g.shift(),l+g.shift(),f+g.shift()),l+=g.shift(),f+=g.shift(),m="C",w.push(l,f);break;case"S":E=l,k=f,_=s[s.length-1],_.command==="C"&&(E=l+(l-_.points[2]),k=f+(f-_.points[3])),w.push(E,k,g.shift(),g.shift()),l=g.shift(),f=g.shift(),m="C",w.push(l,f);break;case"s":E=l,k=f,_=s[s.length-1],_.command==="C"&&(E=l+(l-_.points[2]),k=f+(f-_.points[3])),w.push(E,k,l+g.shift(),f+g.shift()),l+=g.shift(),f+=g.shift(),m="C",w.push(l,f);break;case"Q":w.push(g.shift(),g.shift()),l=g.shift(),f=g.shift(),w.push(l,f);break;case"q":w.push(l+g.shift(),f+g.shift()),l+=g.shift(),f+=g.shift(),m="Q",w.push(l,f);break;case"T":E=l,k=f,_=s[s.length-1],_.command==="Q"&&(E=l+(l-_.points[0]),k=f+(f-_.points[1])),l=g.shift(),f=g.shift(),m="Q",w.push(E,k,l,f);break;case"t":E=l,k=f,_=s[s.length-1],_.command==="Q"&&(E=l+(l-_.points[0]),k=f+(f-_.points[1])),l+=g.shift(),f+=g.shift(),m="Q",w.push(E,k,l,f);break;case"A":M=g.shift(),T=g.shift(),C=g.shift(),R=g.shift(),x=g.shift(),B=l,D=f,l=g.shift(),f=g.shift(),m="A",w=this.convertEndpointToCenterParameterization(B,D,l,f,R,x,M,T,C);break;case"a":M=g.shift(),T=g.shift(),C=g.shift(),R=g.shift(),x=g.shift(),B=l,D=f,l+=g.shift(),f+=g.shift(),m="A",w=this.convertEndpointToCenterParameterization(B,D,l,f,R,x,M,T,C);break}s.push({command:m||p,points:w,start:{x:S,y:A},pathLength:this.calcLength(S,A,m||p,w)})}(p==="z"||p==="Z")&&s.push({command:"z",points:[],start:void 0,pathLength:0})}return s},e.calcLength=function(t,n,i,a){var o,s,u,l,f=e;switch(i){case"L":return f.getLineLength(t,n,a[0],a[1]);case"C":for(o=0,s=f.getPointOnCubicBezier(0,t,n,a[0],a[1],a[2],a[3],a[4],a[5]),l=.01;l<=1;l+=.01)u=f.getPointOnCubicBezier(l,t,n,a[0],a[1],a[2],a[3],a[4],a[5]),o+=f.getLineLength(s.x,s.y,u.x,u.y),s=u;return o;case"Q":for(o=0,s=f.getPointOnQuadraticBezier(0,t,n,a[0],a[1],a[2],a[3]),l=.01;l<=1;l+=.01)u=f.getPointOnQuadraticBezier(l,t,n,a[0],a[1],a[2],a[3]),o+=f.getLineLength(s.x,s.y,u.x,u.y),s=u;return o;case"A":o=0;var c=a[4],d=a[5],h=a[4]+d,p=Math.PI/180;if(Math.abs(c-h)<p&&(p=Math.abs(c-h)),s=f.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],c,0),d<0)for(l=c-p;l>h;l-=p)u=f.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],l,0),o+=f.getLineLength(s.x,s.y,u.x,u.y),s=u;else for(l=c+p;l<h;l+=p)u=f.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],l,0),o+=f.getLineLength(s.x,s.y,u.x,u.y),s=u;return u=f.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],h,0),o+=f.getLineLength(s.x,s.y,u.x,u.y),o}return 0},e.convertEndpointToCenterParameterization=function(t,n,i,a,o,s,u,l,f){var c=f*(Math.PI/180),d=Math.cos(c)*(t-i)/2+Math.sin(c)*(n-a)/2,h=-1*Math.sin(c)*(t-i)/2+Math.cos(c)*(n-a)/2,p=d*d/(u*u)+h*h/(l*l);p>1&&(u*=Math.sqrt(p),l*=Math.sqrt(p));var g=Math.sqrt((u*u*(l*l)-u*u*(h*h)-l*l*(d*d))/(u*u*(h*h)+l*l*(d*d)));o===s&&(g*=-1),isNaN(g)&&(g=0);var b=g*u*h/l,v=g*-l*d/u,y=(t+i)/2+Math.cos(c)*b-Math.sin(c)*v,m=(n+a)/2+Math.sin(c)*b+Math.cos(c)*v,w=function(T){return Math.sqrt(T[0]*T[0]+T[1]*T[1])},S=function(T,C){return(T[0]*C[0]+T[1]*C[1])/(w(T)*w(C))},A=function(T,C){return(T[0]*C[1]<T[1]*C[0]?-1:1)*Math.acos(S(T,C))},_=A([1,0],[(d-b)/u,(h-v)/l]),E=[(d-b)/u,(h-v)/l],k=[(-1*d-b)/u,(-1*h-v)/l],M=A(E,k);return S(E,k)<=-1&&(M=Math.PI),S(E,k)>=1&&(M=0),s===0&&M>0&&(M=M-2*Math.PI),s===1&&M<0&&(M=M+2*Math.PI),[y,m,u,l,_,M,c,s]},e}(BY.Shape);Jh.Path=hc;hc.prototype.className="Path";hc.prototype._attrsAffectingSize=["data"];zY._registerNode(hc);FY.Factory.addGetterSetter(hc,"data");RY.Collection.mapMethods(hc);var ed={},qY=kt&&kt.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ed,"__esModule",{value:!0});ed.Rect=void 0;var GY=Jr,$Y=Hr,UY=Oi,HY=Vr,jY=fr,td=function(r){qY(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){var n=this.cornerRadius(),i=this.width(),a=this.height();if(t.beginPath(),!n)t.rect(0,0,i,a);else{var o=0,s=0,u=0,l=0;typeof n=="number"?o=s=u=l=Math.min(n,i/2,a/2):(o=Math.min(n[0]||0,i/2,a/2),s=Math.min(n[1]||0,i/2,a/2),l=Math.min(n[2]||0,i/2,a/2),u=Math.min(n[3]||0,i/2,a/2)),t.moveTo(o,0),t.lineTo(i-s,0),t.arc(i-s,s,s,Math.PI*3/2,0,!1),t.lineTo(i,a-l),t.arc(i-l,a-l,l,0,Math.PI/2,!1),t.lineTo(u,a),t.arc(u,a-u,u,Math.PI/2,Math.PI,!1),t.lineTo(0,o),t.arc(o,o,o,Math.PI,Math.PI*3/2,!1)}t.closePath(),t.fillStrokeShape(this)},e}(UY.Shape);ed.Rect=td;td.prototype.className="Rect";HY._registerNode(td);$Y.Factory.addGetterSetter(td,"cornerRadius",0,jY.getNumberOrArrayOfNumbersValidator(4));GY.Collection.mapMethods(td);var Wv={},VY=kt&&kt.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Wv,"__esModule",{value:!0});Wv.RegularPolygon=void 0;var WY=Jr,k4=Hr,YY=Oi,L4=fr,XY=Vr,Hu=function(r){VY(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){var n=this._getPoints();t.beginPath(),t.moveTo(n[0].x,n[0].y);for(var i=1;i<n.length;i++)t.lineTo(n[i].x,n[i].y);t.closePath(),t.fillStrokeShape(this)},e.prototype._getPoints=function(){for(var t=this.attrs.sides,n=this.attrs.radius||0,i=[],a=0;a<t;a++)i.push({x:n*Math.sin(a*2*Math.PI/t),y:-1*n*Math.cos(a*2*Math.PI/t)});return i},e.prototype.getSelfRect=function(){var t=this._getPoints(),n=t[0].x,i=t[0].y,a=t[0].x,o=t[0].y;return t.forEach(function(s){n=Math.min(n,s.x),i=Math.max(i,s.x),a=Math.min(a,s.y),o=Math.max(o,s.y)}),{x:n,y:a,width:i-n,height:o-a}},e.prototype.getWidth=function(){return this.radius()*2},e.prototype.getHeight=function(){return this.radius()*2},e.prototype.setWidth=function(t){this.radius(t/2)},e.prototype.setHeight=function(t){this.radius(t/2)},e}(YY.Shape);Wv.RegularPolygon=Hu;Hu.prototype.className="RegularPolygon";Hu.prototype._centroid=!0;Hu.prototype._attrsAffectingSize=["radius"];XY._registerNode(Hu);k4.Factory.addGetterSetter(Hu,"radius",0,L4.getNumberValidator());k4.Factory.addGetterSetter(Hu,"sides",0,L4.getNumberValidator());WY.Collection.mapMethods(Hu);var Yv={},KY=kt&&kt.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Yv,"__esModule",{value:!0});Yv.Ring=void 0;var ZY=Jr,N4=Hr,QY=Oi,P4=fr,JY=Vr,A3=Math.PI*2,ju=function(r){KY(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,A3,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),A3,0,!0),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return this.outerRadius()*2},e.prototype.getHeight=function(){return this.outerRadius()*2},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(QY.Shape);Yv.Ring=ju;ju.prototype.className="Ring";ju.prototype._centroid=!0;ju.prototype._attrsAffectingSize=["innerRadius","outerRadius"];JY._registerNode(ju);N4.Factory.addGetterSetter(ju,"innerRadius",0,P4.getNumberValidator());N4.Factory.addGetterSetter(ju,"outerRadius",0,P4.getNumberValidator());ZY.Collection.mapMethods(ju);var Xv={},eX=kt&&kt.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Xv,"__esModule",{value:!0});Xv.Sprite=void 0;var tX=Jr,zl=Hr,rX=Oi,nX=fc,M4=fr,iX=Vr,Po=function(r){eX(e,r);function e(t){var n=r.call(this,t)||this;return n._updated=!0,n.anim=new nX.Animation(function(){var i=n._updated;return n._updated=!1,i}),n.on("animationChange.konva",function(){this.frameIndex(0)}),n.on("frameIndexChange.konva",function(){this._updated=!0}),n.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())}),n}return e.prototype._sceneFunc=function(t){var n=this.animation(),i=this.frameIndex(),a=i*4,o=this.animations()[n],s=this.frameOffsets(),u=o[a+0],l=o[a+1],f=o[a+2],c=o[a+3],d=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,f,c),t.closePath(),t.fillStrokeShape(this)),d)if(s){var h=s[n],p=i*2;t.drawImage(d,u,l,f,c,h[p+0],h[p+1],f,c)}else t.drawImage(d,u,l,f,c,0,0,f,c)},e.prototype._hitFunc=function(t){var n=this.animation(),i=this.frameIndex(),a=i*4,o=this.animations()[n],s=this.frameOffsets(),u=o[a+2],l=o[a+3];if(t.beginPath(),s){var f=s[n],c=i*2;t.rect(f[c+0],f[c+1],u,l)}else t.rect(0,0,u,l);t.closePath(),t.fillShape(this)},e.prototype._useBufferCanvas=function(){return r.prototype._useBufferCanvas.call(this,!0)},e.prototype._setInterval=function(){var t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())},e.prototype.start=function(){if(!this.isRunning()){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}},e.prototype.stop=function(){this.anim.stop(),clearInterval(this.interval)},e.prototype.isRunning=function(){return this.anim.isRunning()},e.prototype._updateIndex=function(){var t=this.frameIndex(),n=this.animation(),i=this.animations(),a=i[n],o=a.length/4;t<o-1?this.frameIndex(t+1):this.frameIndex(0)},e}(rX.Shape);Xv.Sprite=Po;Po.prototype.className="Sprite";iX._registerNode(Po);zl.Factory.addGetterSetter(Po,"animation");zl.Factory.addGetterSetter(Po,"animations");zl.Factory.addGetterSetter(Po,"frameOffsets");zl.Factory.addGetterSetter(Po,"image");zl.Factory.addGetterSetter(Po,"frameIndex",0,M4.getNumberValidator());zl.Factory.addGetterSetter(Po,"frameRate",17,M4.getNumberValidator());zl.Factory.backCompat(Po,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});tX.Collection.mapMethods(Po);var Kv={},aX=kt&&kt.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Kv,"__esModule",{value:!0});Kv.Star=void 0;var oX=Jr,i5=Hr,sX=Oi,a5=fr,uX=Vr,js=function(r){aX(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){var n=this.innerRadius(),i=this.outerRadius(),a=this.numPoints();t.beginPath(),t.moveTo(0,0-i);for(var o=1;o<a*2;o++){var s=o%2===0?i:n,u=s*Math.sin(o*Math.PI/a),l=-1*s*Math.cos(o*Math.PI/a);t.lineTo(u,l)}t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return this.outerRadius()*2},e.prototype.getHeight=function(){return this.outerRadius()*2},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(sX.Shape);Kv.Star=js;js.prototype.className="Star";js.prototype._centroid=!0;js.prototype._attrsAffectingSize=["innerRadius","outerRadius"];uX._registerNode(js);i5.Factory.addGetterSetter(js,"numPoints",5,a5.getNumberValidator());i5.Factory.addGetterSetter(js,"innerRadius",0,a5.getNumberValidator());i5.Factory.addGetterSetter(js,"outerRadius",0,a5.getNumberValidator());oX.Collection.mapMethods(js);var Al={},lX=kt&&kt.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Al,"__esModule",{value:!0});Al.Text=Al.stringToArray=void 0;var Op=Jr,xa=Hr,fX=Oi,cX=Vr,Vu=fr,hX=Vr;function O4(r){return Array.from(r)}Al.stringToArray=O4;var Yd="auto",dX="center",Uc="justify",pX="Change.konva",vX="2d",T3="-",D4="left",gX="text",mX="Text",yX="top",bX="bottom",k3="middle",I4="normal",L3="px ",Hc=" ",wX="right",_X="word",xX="char",SX="none",Jb="…",R4=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],EX=R4.length;function CX(r){return r.split(",").map(function(e){e=e.trim();var t=e.indexOf(" ")>=0,n=e.indexOf('"')>=0||e.indexOf("'")>=0;return t&&!n&&(e='"'+e+'"'),e}).join(", ")}var Xd;function e2(){return Xd||(Xd=Op.Util.createCanvasElement().getContext(vX),Xd)}function AX(r){r.fillText(this._partialText,this._partialTextX,this._partialTextY)}function TX(r){r.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function kX(r){return r=r||{},!r.fillLinearGradientColorStops&&!r.fillRadialGradientColorStops&&!r.fillPatternImage&&(r.fill=r.fill||"black"),r}var hi=function(r){lX(e,r);function e(t){var n=r.call(this,kX(t))||this;n._partialTextX=0,n._partialTextY=0;for(var i=0;i<EX;i++)n.on(R4[i]+pX,n._setTextData);return n._setTextData(),n}return e.prototype._sceneFunc=function(t){var n=this.textArr,i=n.length;if(this.text()){var a=this.padding(),o=this.fontSize(),s=this.lineHeight()*o,u=this.verticalAlign(),l=0,f=this.align(),c=this.getWidth(),d=this.letterSpacing(),h=this.fill(),p=this.textDecoration(),g=p.indexOf("underline")!==-1,b=p.indexOf("line-through")!==-1,v,y=0,y=s/2,m=0,w=0;for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",k3),t.setAttr("textAlign",D4),u===k3?l=(this.getHeight()-i*s-a*2)/2:u===bX&&(l=this.getHeight()-i*s-a*2),t.translate(a,l+a),v=0;v<i;v++){var m=0,w=0,S=n[v],A=S.text,_=S.width,E=v!==i-1,k,M,T;if(t.save(),f===wX?m+=c-_-a*2:f===dX&&(m+=(c-_-a*2)/2),g&&(t.save(),t.beginPath(),t.moveTo(m,y+w+Math.round(o/2)),k=A.split(" ").length-1,M=k===0,T=f===Uc&&E&&!M?c-a*2:_,t.lineTo(m+Math.round(T),y+w+Math.round(o/2)),t.lineWidth=o/15,t.strokeStyle=h,t.stroke(),t.restore()),b&&(t.save(),t.beginPath(),t.moveTo(m,y+w),k=A.split(" ").length-1,M=k===0,T=f===Uc&&E&&!M?c-a*2:_,t.lineTo(m+Math.round(T),y+w),t.lineWidth=o/15,t.strokeStyle=h,t.stroke(),t.restore()),d!==0||f===Uc){k=A.split(" ").length-1;for(var C=O4(A),R=0;R<C.length;R++){var x=C[R];x===" "&&v!==i-1&&f===Uc&&(m+=(c-a*2-_)/k),this._partialTextX=m,this._partialTextY=y+w,this._partialText=x,t.fillStrokeShape(this),m+=this.measureSize(x).width+d}}else this._partialTextX=m,this._partialTextY=y+w,this._partialText=A,t.fillStrokeShape(this);t.restore(),i>1&&(y+=s)}}},e.prototype._hitFunc=function(t){var n=this.getWidth(),i=this.getHeight();t.beginPath(),t.rect(0,0,n,i),t.closePath(),t.fillStrokeShape(this)},e.prototype.setText=function(t){var n=Op.Util._isString(t)?t:t==null?"":t+"";return this._setAttr(gX,n),this},e.prototype.getWidth=function(){var t=this.attrs.width===Yd||this.attrs.width===void 0;return t?this.getTextWidth()+this.padding()*2:this.attrs.width},e.prototype.getHeight=function(){var t=this.attrs.height===Yd||this.attrs.height===void 0;return t?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height},e.prototype.getTextWidth=function(){return this.textWidth},e.prototype.getTextHeight=function(){return Op.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight},e.prototype.measureSize=function(t){var n=e2(),i=this.fontSize(),a;return n.save(),n.font=this._getContextFont(),a=n.measureText(t),n.restore(),{width:a.width,height:i}},e.prototype._getContextFont=function(){return cX.Konva.UA.isIE?this.fontStyle()+Hc+this.fontSize()+L3+this.fontFamily():this.fontStyle()+Hc+this.fontVariant()+Hc+(this.fontSize()+L3)+CX(this.fontFamily())},e.prototype._addTextLine=function(t){this.align()===Uc&&(t=t.trim());var n=this._getTextWidth(t);return this.textArr.push({text:t,width:n})},e.prototype._getTextWidth=function(t){var n=this.letterSpacing(),i=t.length;return e2().measureText(t).width+(i?n*(i-1):0)},e.prototype._setTextData=function(){var t=this.text().split(`
`),n=+this.fontSize(),i=0,a=this.lineHeight()*n,o=this.attrs.width,s=this.attrs.height,u=o!==Yd&&o!==void 0,l=s!==Yd&&s!==void 0,f=this.padding(),c=o-f*2,d=s-f*2,h=0,p=this.wrap(),g=p!==SX,b=p!==xX&&g,v=this.ellipsis();this.textArr=[],e2().font=this._getContextFont();for(var y=v?this._getTextWidth(Jb):0,m=0,w=t.length;m<w;++m){var S=t[m],A=this._getTextWidth(S);if(u&&A>c)for(;S.length>0;){for(var _=0,E=S.length,k="",M=0;_<E;){var T=_+E>>>1,C=S.slice(0,T+1),R=this._getTextWidth(C)+y;R<=c?(_=T+1,k=C,M=R):E=T}if(k){if(b){var x,B=S[k.length],D=B===Hc||B===T3;D&&M<=c?x=k.length:x=Math.max(k.lastIndexOf(Hc),k.lastIndexOf(T3))+1,x>0&&(_=x,k=k.slice(0,_),M=this._getTextWidth(k))}if(k=k.trimRight(),this._addTextLine(k),i=Math.max(i,M),h+=a,!g||l&&h+a>d){var O=this.textArr[this.textArr.length-1];if(O&&v){var G=this._getTextWidth(O.text+Jb)<c;G||(O.text=O.text.slice(0,O.text.length-3)),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(O.text+Jb)}break}if(S=S.slice(_),S=S.trimLeft(),S.length>0&&(A=this._getTextWidth(S),A<=c)){this._addTextLine(S),h+=a,i=Math.max(i,A);break}}else break}else this._addTextLine(S),h+=a,i=Math.max(i,A);if(l&&h+a>d)break}this.textHeight=n,this.textWidth=i},e.prototype.getStrokeScaleEnabled=function(){return!0},e}(fX.Shape);Al.Text=hi;hi.prototype._fillFunc=AX;hi.prototype._strokeFunc=TX;hi.prototype.className=mX;hi.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];hX._registerNode(hi);xa.Factory.overWriteSetter(hi,"width",Vu.getNumberOrAutoValidator());xa.Factory.overWriteSetter(hi,"height",Vu.getNumberOrAutoValidator());xa.Factory.addGetterSetter(hi,"fontFamily","Arial");xa.Factory.addGetterSetter(hi,"fontSize",12,Vu.getNumberValidator());xa.Factory.addGetterSetter(hi,"fontStyle",I4);xa.Factory.addGetterSetter(hi,"fontVariant",I4);xa.Factory.addGetterSetter(hi,"padding",0,Vu.getNumberValidator());xa.Factory.addGetterSetter(hi,"align",D4);xa.Factory.addGetterSetter(hi,"verticalAlign",yX);xa.Factory.addGetterSetter(hi,"lineHeight",1,Vu.getNumberValidator());xa.Factory.addGetterSetter(hi,"wrap",_X);xa.Factory.addGetterSetter(hi,"ellipsis",!1,Vu.getBooleanValidator());xa.Factory.addGetterSetter(hi,"letterSpacing",0,Vu.getNumberValidator());xa.Factory.addGetterSetter(hi,"text","",Vu.getStringValidator());xa.Factory.addGetterSetter(hi,"textDecoration","");Op.Collection.mapMethods(hi);var Zv={},LX=kt&&kt.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Zv,"__esModule",{value:!0});Zv.TextPath=void 0;var dp=Jr,Mo=Hr,NX=Oi,Vo=Jh,t2=Al,F4=fr,PX=Vr,MX="",B4="normal";function z4(r){r.fillText(this.partialText,0,0)}function q4(r){r.strokeText(this.partialText,0,0)}var Ci=function(r){LX(e,r);function e(t){var n=r.call(this,t)||this;return n.dummyCanvas=dp.Util.createCanvasElement(),n.dataArray=[],n.dataArray=Vo.Path.parsePathData(n.attrs.data),n.on("dataChange.konva",function(){this.dataArray=Vo.Path.parsePathData(this.attrs.data),this._setTextData()}),n.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva",n._setTextData),t&&t.getKerning&&(dp.Util.warn('getKerning TextPath API is deprecated. Please use "kerningFunc" instead.'),n.kerningFunc(t.getKerning)),n._setTextData(),n}return e.prototype._sceneFunc=function(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var n=this.textDecoration(),i=this.fill(),a=this.fontSize(),o=this.glyphInfo;n==="underline"&&t.beginPath();for(var s=0;s<o.length;s++){t.save();var u=o[s].p0;t.translate(u.x,u.y),t.rotate(o[s].rotation),this.partialText=o[s].text,t.fillStrokeShape(this),n==="underline"&&(s===0&&t.moveTo(0,a/2+1),t.lineTo(a,a/2+1)),t.restore()}n==="underline"&&(t.strokeStyle=i,t.lineWidth=a/20,t.stroke()),t.restore()},e.prototype._hitFunc=function(t){t.beginPath();var n=this.glyphInfo;if(n.length>=1){var i=n[0].p0;t.moveTo(i.x,i.y)}for(var a=0;a<n.length;a++){var o=n[a].p1;t.lineTo(o.x,o.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()},e.prototype.getTextWidth=function(){return this.textWidth},e.prototype.getTextHeight=function(){return dp.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight},e.prototype.setText=function(t){return t2.Text.prototype.setText.call(this,t)},e.prototype._getContextFont=function(){return t2.Text.prototype._getContextFont.call(this)},e.prototype._getTextSize=function(t){var n=this.dummyCanvas,i=n.getContext("2d");i.save(),i.font=this._getContextFont();var a=i.measureText(t);return i.restore(),{width:a.width,height:parseInt(this.attrs.fontSize,10)}},e.prototype._setTextData=function(){var t=this,n=this._getTextSize(this.attrs.text),i=this.letterSpacing(),a=this.align(),o=this.kerningFunc();this.textWidth=n.width,this.textHeight=n.height;var s=Math.max(this.textWidth+((this.attrs.text||"").length-1)*i,0);this.glyphInfo=[];for(var u=0,l=0;l<t.dataArray.length;l++)t.dataArray[l].pathLength>0&&(u+=t.dataArray[l].pathLength);var f=0;a==="center"&&(f=Math.max(0,u/2-s/2)),a==="right"&&(f=Math.max(0,u-s));for(var c=t2.stringToArray(this.text()),d=this.text().split(" ").length-1,h,p,g,b=-1,v=0,y=function(){v=0;for(var R=t.dataArray,x=b+1;x<R.length;x++){if(R[x].pathLength>0)return b=x,R[x];R[x].command==="M"&&(h={x:R[x].points[0],y:R[x].points[1]})}return{}},m=function(R){var x=t._getTextSize(R).width+i;R===" "&&a==="justify"&&(x+=(u-s)/d);var B=0,D=0;for(p=void 0;Math.abs(x-B)/x>.01&&D<20;){D++;for(var O=B;g===void 0;)g=y(),g&&O+g.pathLength<x&&(O+=g.pathLength,g=void 0);if(g==={}||h===void 0)return;var G=!1;switch(g.command){case"L":Vo.Path.getLineLength(h.x,h.y,g.points[0],g.points[1])>x?p=Vo.Path.getPointOnLine(x,h.x,h.y,g.points[0],g.points[1],h.x,h.y):g=void 0;break;case"A":var V=g.points[4],I=g.points[5],z=g.points[4]+I;v===0?v=V+1e-8:x>B?v+=Math.PI/180*I/Math.abs(I):v-=Math.PI/360*I/Math.abs(I),(I<0&&v<z||I>=0&&v>z)&&(v=z,G=!0),p=Vo.Path.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],v,g.points[6]);break;case"C":v===0?x>g.pathLength?v=1e-8:v=x/g.pathLength:x>B?v+=(x-B)/g.pathLength/2:v=Math.max(v-(B-x)/g.pathLength/2,0),v>1&&(v=1,G=!0),p=Vo.Path.getPointOnCubicBezier(v,g.start.x,g.start.y,g.points[0],g.points[1],g.points[2],g.points[3],g.points[4],g.points[5]);break;case"Q":v===0?v=x/g.pathLength:x>B?v+=(x-B)/g.pathLength:v-=(B-x)/g.pathLength,v>1&&(v=1,G=!0),p=Vo.Path.getPointOnQuadraticBezier(v,g.start.x,g.start.y,g.points[0],g.points[1],g.points[2],g.points[3]);break}p!==void 0&&(B=Vo.Path.getLineLength(h.x,h.y,p.x,p.y)),G&&(G=!1,g=void 0)}},w="C",S=t._getTextSize(w).width+i,A=f/S-1,_=0;_<A&&(m(w),!(h===void 0||p===void 0));_++)h=p;for(var E=0;E<c.length&&(m(c[E]),!(h===void 0||p===void 0));E++){var k=Vo.Path.getLineLength(h.x,h.y,p.x,p.y),M=0;if(o)try{M=o(c[E-1],c[E])*this.fontSize()}catch{M=0}h.x+=M,p.x+=M,this.textWidth+=M;var T=Vo.Path.getPointOnLine(M+k/2,h.x,h.y,p.x,p.y),C=Math.atan2(p.y-h.y,p.x-h.x);this.glyphInfo.push({transposeX:T.x,transposeY:T.y,text:c[E],rotation:C,p0:h,p1:p}),h=p}},e.prototype.getSelfRect=function(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var t=[];this.glyphInfo.forEach(function(c){t.push(c.p0.x),t.push(c.p0.y),t.push(c.p1.x),t.push(c.p1.y)});for(var n=t[0]||0,i=t[0]||0,a=t[1]||0,o=t[1]||0,s,u,l=0;l<t.length/2;l++)s=t[l*2],u=t[l*2+1],n=Math.min(n,s),i=Math.max(i,s),a=Math.min(a,u),o=Math.max(o,u);var f=this.fontSize();return{x:n-f/2,y:a-f/2,width:i-n+f,height:o-a+f}},e}(NX.Shape);Zv.TextPath=Ci;Ci.prototype._fillFunc=z4;Ci.prototype._strokeFunc=q4;Ci.prototype._fillFuncHit=z4;Ci.prototype._strokeFuncHit=q4;Ci.prototype.className="TextPath";Ci.prototype._attrsAffectingSize=["text","fontSize","data"];PX._registerNode(Ci);Mo.Factory.addGetterSetter(Ci,"data");Mo.Factory.addGetterSetter(Ci,"fontFamily","Arial");Mo.Factory.addGetterSetter(Ci,"fontSize",12,F4.getNumberValidator());Mo.Factory.addGetterSetter(Ci,"fontStyle",B4);Mo.Factory.addGetterSetter(Ci,"align","left");Mo.Factory.addGetterSetter(Ci,"letterSpacing",0,F4.getNumberValidator());Mo.Factory.addGetterSetter(Ci,"textBaseline","middle");Mo.Factory.addGetterSetter(Ci,"fontVariant",B4);Mo.Factory.addGetterSetter(Ci,"text",MX);Mo.Factory.addGetterSetter(Ci,"textDecoration",null);Mo.Factory.addGetterSetter(Ci,"kerningFunc",null);dp.Collection.mapMethods(Ci);var Qv={},OX=kt&&kt.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Dp=kt&&kt.__assign||function(){return Dp=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Dp.apply(this,arguments)};Object.defineProperty(Qv,"__esModule",{value:!0});Qv.Transformer=void 0;var Tn=Jr,Kn=Hr,DX=ci,IX=Oi,RX=ed,N3=lc,wo=Vr,ql=fr,FX=Vr,Es="tr-konva",BX=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map(function(r){return r+("."+Es)}).join(" "),P3="nodesRect",zX=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"].map(function(r){return r+("."+Es)}).join(" "),qX={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},GX="ontouchstart"in wo.Konva._global;function $X(r,e){if(r==="rotater")return"crosshair";e+=Tn.Util._degToRad(qX[r]||0);var t=(Tn.Util._radToDeg(e)%360+360)%360;return Tn.Util._inRange(t,315+22.5,360)||Tn.Util._inRange(t,0,22.5)?"ns-resize":Tn.Util._inRange(t,45-22.5,45+22.5)?"nesw-resize":Tn.Util._inRange(t,90-22.5,90+22.5)?"ew-resize":Tn.Util._inRange(t,135-22.5,135+22.5)?"nwse-resize":Tn.Util._inRange(t,180-22.5,180+22.5)?"ns-resize":Tn.Util._inRange(t,225-22.5,225+22.5)?"nesw-resize":Tn.Util._inRange(t,270-22.5,270+22.5)?"ew-resize":Tn.Util._inRange(t,315-22.5,315+22.5)?"nwse-resize":(Tn.Util.error("Transformer has unknown angle for cursor detection: "+t),"pointer")}var Ip=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],M3=1e8;function UX(r){return{x:r.x+r.width/2*Math.cos(r.rotation)+r.height/2*Math.sin(-r.rotation),y:r.y+r.height/2*Math.cos(r.rotation)+r.width/2*Math.sin(r.rotation)}}function G4(r,e,t){var n=t.x+(r.x-t.x)*Math.cos(e)-(r.y-t.y)*Math.sin(e),i=t.y+(r.x-t.x)*Math.sin(e)+(r.y-t.y)*Math.cos(e);return Dp(Dp({},r),{rotation:r.rotation+e,x:n,y:i})}function HX(r,e){var t=UX(r);return G4(r,e,t)}function jX(r,e,t){for(var n=e,i=0;i<r.length;i++){var a=wo.Konva.getAngle(r[i]),o=Math.abs(a-e)%(Math.PI*2),s=Math.min(o,Math.PI*2-o);s<t&&(n=a)}return n}var Ln=function(r){OX(e,r);function e(t){var n=r.call(this,t)||this;return n._transforming=!1,n._createElements(),n._handleMouseMove=n._handleMouseMove.bind(n),n._handleMouseUp=n._handleMouseUp.bind(n),n.update=n.update.bind(n),n.on(BX,n.update),n.getNode()&&n.update(),n}return e.prototype.attachTo=function(t){return this.setNode(t),this},e.prototype.setNode=function(t){return Tn.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])},e.prototype.getNode=function(){return this._nodes&&this._nodes[0]},e.prototype.setNodes=function(t){var n=this;t===void 0&&(t=[]),this._nodes&&this._nodes.length&&this.detach(),this._nodes=t,t.length===1?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(function(a){var o=a._attrsAffectingSize.map(function(u){return u+"Change."+Es}).join(" "),s=function(){n.nodes().length===1&&n.rotation(n.nodes()[0].getAbsoluteRotation()),n._resetTransformCache(),!n._transforming&&!n.isDragging()&&n.update()};a.on(o,s),a.on(zX,s),a.on("_clearTransformCache."+Es,s),a.on("xChange."+Es+" yChange."+Es,s),n._proxyDrag(a)}),this._resetTransformCache();var i=!!this.findOne(".top-left");return i&&this.update(),this},e.prototype._proxyDrag=function(t){var n=this,i;t.on("dragstart."+Es,function(a){i=t.getAbsolutePosition(),!n.isDragging()&&t!==n.findOne(".back")&&n.startDrag(a,!1)}),t.on("dragmove."+Es,function(a){if(i){var o=t.getAbsolutePosition(),s=o.x-i.x,u=o.y-i.y;n.nodes().forEach(function(l){if(l!==t&&!l.isDragging()){var f=l.getAbsolutePosition();l.setAbsolutePosition({x:f.x+s,y:f.y+u}),l.startDrag(a)}}),i=null}})},e.prototype.getNodes=function(){return this._nodes||[]},e.prototype.getActiveAnchor=function(){return this._movingAnchorName},e.prototype.detach=function(){this._nodes&&this._nodes.forEach(function(t){t.off("."+Es)}),this._nodes=[],this._resetTransformCache()},e.prototype._resetTransformCache=function(){this._clearCache(P3),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")},e.prototype._getNodeRect=function(){return this._getCache(P3,this.__getNodeRect)},e.prototype.__getNodeShape=function(t,n,i){n===void 0&&(n=this.rotation());var a=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),o=t.getAbsoluteScale(i),s=t.getAbsolutePosition(i),u=a.x*o.x-t.offsetX()*o.x,l=a.y*o.y-t.offsetY()*o.y,f=(wo.Konva.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),c={x:s.x+u*Math.cos(f)+l*Math.sin(-f),y:s.y+l*Math.cos(f)+u*Math.sin(f),width:a.width*o.x,height:a.height*o.y,rotation:f};return G4(c,-wo.Konva.getAngle(n),{x:0,y:0})},e.prototype.__getNodeRect=function(){var t=this,n=this.getNode();if(!n)return{x:-M3,y:-M3,width:0,height:0,rotation:0};var i=[];this.nodes().map(function(c){var d=c.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:t.ignoreStroke()}),h=[{x:d.x,y:d.y},{x:d.x+d.width,y:d.y},{x:d.x+d.width,y:d.y+d.height},{x:d.x,y:d.y+d.height}],p=c.getAbsoluteTransform();h.forEach(function(g){var b=p.point(g);i.push(b)})});var a=new Tn.Transform;a.rotate(-wo.Konva.getAngle(this.rotation()));var o,s,u,l;i.forEach(function(c){var d=a.point(c);o===void 0&&(o=u=d.x,s=l=d.y),o=Math.min(o,d.x),s=Math.min(s,d.y),u=Math.max(u,d.x),l=Math.max(l,d.y)}),a.invert();var f=a.point({x:o,y:s});return{x:f.x,y:f.y,width:u-o,height:l-s,rotation:wo.Konva.getAngle(this.rotation())}},e.prototype.getX=function(){return this._getNodeRect().x},e.prototype.getY=function(){return this._getNodeRect().y},e.prototype.getWidth=function(){return this._getNodeRect().width},e.prototype.getHeight=function(){return this._getNodeRect().height},e.prototype._createElements=function(){this._createBack(),Ip.forEach((function(t){this._createAnchor(t)}).bind(this)),this._createAnchor("rotater")},e.prototype._createAnchor=function(t){var n=this,i=new RX.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:GX?10:"auto"}),a=this;i.on("mousedown touchstart",function(o){a._handleMouseDown(o)}),i.on("dragstart",function(o){i.stopDrag(),o.cancelBubble=!0}),i.on("dragend",function(o){o.cancelBubble=!0}),i.on("mouseenter",function(){var o=wo.Konva.getAngle(n.rotation()),s=$X(t,o);i.getStage().content.style.cursor=s,n._cursorChange=!0}),i.on("mouseout",function(){i.getStage().content.style.cursor="",n._cursorChange=!1}),this.add(i)},e.prototype._createBack=function(){var t=this,n=new IX.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc:function(i){var a=this.getParent(),o=a.padding();i.beginPath(),i.rect(-o,-o,this.width()+o*2,this.height()+o*2),i.moveTo(this.width()/2,-o),a.rotateEnabled()&&i.lineTo(this.width()/2,-a.rotateAnchorOffset()*Tn.Util._sign(this.height())-o),i.fillStrokeShape(this)},hitFunc:function(i,a){if(t.shouldOverdrawWholeArea()){var o=t.padding();i.beginPath(),i.rect(-o,-o,a.width()+o*2,a.height()+o*2),i.fillStrokeShape(a)}}});this.add(n),this._proxyDrag(n),n.on("dragstart",function(i){i.cancelBubble=!0}),n.on("dragmove",function(i){i.cancelBubble=!0}),n.on("dragend",function(i){i.cancelBubble=!0})},e.prototype._handleMouseDown=function(t){this._movingAnchorName=t.target.name().split(" ")[0];var n=this._getNodeRect(),i=n.width,a=n.height,o=Math.sqrt(Math.pow(i,2)+Math.pow(a,2));this.sin=Math.abs(a/o),this.cos=Math.abs(i/o),window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0),this._transforming=!0;var s=t.target.getAbsolutePosition(),u=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:u.x-s.x,y:u.y-s.y},this._fire("transformstart",{evt:t,target:this.getNode()}),this._nodes.forEach(function(l){l._fire("transformstart",{evt:t,target:l})})},e.prototype._handleMouseMove=function(t){var n,i,a,o=this.findOne("."+this._movingAnchorName),s=o.getStage();s.setPointersPositions(t);var u=s.getPointerPosition(),l={x:u.x-this._anchorDragOffset.x,y:u.y-this._anchorDragOffset.y},f=o.getAbsolutePosition();o.setAbsolutePosition(l);var c=o.getAbsolutePosition();if(!(f.x===c.x&&f.y===c.y)){if(this._movingAnchorName==="rotater"){var d=this._getNodeRect();n=o.x()-d.width/2,i=-o.y()+d.height/2;var h=Math.atan2(-i,n)+Math.PI/2;d.height<0&&(h-=Math.PI);var p=wo.Konva.getAngle(this.rotation()),g=p+h,b=wo.Konva.getAngle(this.rotationSnapTolerance()),v=jX(this.rotationSnaps(),g,b),y=v-d.rotation,m=HX(d,y);this._fitNodesInto(m,t);return}var w=this.keepRatio()||t.shiftKey,k=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(w){var S=k?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};a=Math.sqrt(Math.pow(S.x-o.x(),2)+Math.pow(S.y-o.y(),2));var A=this.findOne(".top-left").x()>S.x?-1:1,_=this.findOne(".top-left").y()>S.y?-1:1;n=a*this.cos*A,i=a*this.sin*_,this.findOne(".top-left").x(S.x-n),this.findOne(".top-left").y(S.y-i)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(o.y());else if(this._movingAnchorName==="top-right"){if(w){var S=k?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};a=Math.sqrt(Math.pow(o.x()-S.x,2)+Math.pow(S.y-o.y(),2));var A=this.findOne(".top-right").x()<S.x?-1:1,_=this.findOne(".top-right").y()>S.y?-1:1;n=a*this.cos*A,i=a*this.sin*_,this.findOne(".top-right").x(S.x+n),this.findOne(".top-right").y(S.y-i)}var E=o.position();this.findOne(".top-left").y(E.y),this.findOne(".bottom-right").x(E.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(o.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(o.x());else if(this._movingAnchorName==="bottom-left"){if(w){var S=k?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};a=Math.sqrt(Math.pow(S.x-o.x(),2)+Math.pow(o.y()-S.y,2));var A=S.x<o.x()?-1:1,_=o.y()<S.y?-1:1;n=a*this.cos*A,i=a*this.sin*_,o.x(S.x-n),o.y(S.y+i)}E=o.position(),this.findOne(".top-left").x(E.x),this.findOne(".bottom-right").y(E.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(o.y());else if(this._movingAnchorName==="bottom-right"){if(w){var S=k?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};a=Math.sqrt(Math.pow(o.x()-S.x,2)+Math.pow(o.y()-S.y,2));var A=this.findOne(".bottom-right").x()<S.x?-1:1,_=this.findOne(".bottom-right").y()<S.y?-1:1;n=a*this.cos*A,i=a*this.sin*_,this.findOne(".bottom-right").x(S.x+n),this.findOne(".bottom-right").y(S.y+i)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var k=this.centeredScaling()||t.altKey;if(k){var M=this.findOne(".top-left"),T=this.findOne(".bottom-right"),C=M.x(),R=M.y(),x=this.getWidth()-T.x(),B=this.getHeight()-T.y();T.move({x:-C,y:-R}),M.move({x,y:B})}var D=this.findOne(".top-left").getAbsolutePosition();n=D.x,i=D.y;var O=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),G=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:i,width:O,height:G,rotation:wo.Konva.getAngle(this.rotation())},t)}},e.prototype._handleMouseUp=function(t){this._removeEvents(t)},e.prototype.getAbsoluteTransform=function(){return this.getTransform()},e.prototype._removeEvents=function(t){if(this._transforming){this._transforming=!1,window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0);var n=this.getNode();this._fire("transformend",{evt:t,target:n}),n&&this._nodes.forEach(function(i){i._fire("transformend",{evt:t,target:i})}),this._movingAnchorName=null}},e.prototype._fitNodesInto=function(t,n){var i=this,a=this._getNodeRect(),o=1;if(Tn.Util._inRange(t.width,-this.padding()*2-o,o)){this.update();return}if(Tn.Util._inRange(t.height,-this.padding()*2-o,o)){this.update();return}var s=new Tn.Transform;if(s.rotate(wo.Konva.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){var u=s.point({x:-this.padding()*2,y:0});t.x+=u.x,t.y+=u.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=u.x,this._anchorDragOffset.y-=u.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){var u=s.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=u.x,this._anchorDragOffset.y-=u.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){var u=s.point({x:0,y:-this.padding()*2});t.x+=u.x,t.y+=u.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=u.x,this._anchorDragOffset.y-=u.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){var u=s.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=u.x,this._anchorDragOffset.y-=u.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){var l=this.boundBoxFunc()(a,t);l?t=l:Tn.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}var f=1e7,c=new Tn.Transform;c.translate(a.x,a.y),c.rotate(a.rotation),c.scale(a.width/f,a.height/f);var d=new Tn.Transform;d.translate(t.x,t.y),d.rotate(t.rotation),d.scale(t.width/f,t.height/f);var h=d.multiply(c.invert());this._nodes.forEach(function(p){var g,b=p.getParent().getAbsoluteTransform(),v=p.getTransform().copy();v.translate(p.offsetX(),p.offsetY());var y=new Tn.Transform;y.multiply(b.copy().invert()).multiply(h).multiply(b).multiply(v);var m=y.decompose();p.setAttrs(m),i._fire("transform",{evt:n,target:p}),p._fire("transform",{evt:n,target:p}),(g=p.getLayer())===null||g===void 0||g.batchDraw()}),this.rotation(Tn.Util._getRotation(t.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()},e.prototype.forceUpdate=function(){this._resetTransformCache(),this.update()},e.prototype._batchChangeChild=function(t,n){var i=this.findOne(t);i.setAttrs(n)},e.prototype.update=function(){var t=this,n,i=this._getNodeRect();this.rotation(Tn.Util._getRotation(i.rotation));var a=i.width,o=i.height,s=this.enabledAnchors(),u=this.resizeEnabled(),l=this.padding(),f=this.anchorSize();this.find("._anchor").each(function(c){c.setAttrs({width:f,height:f,offsetX:f/2,offsetY:f/2,stroke:t.anchorStroke(),strokeWidth:t.anchorStrokeWidth(),fill:t.anchorFill(),cornerRadius:t.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:f/2+l,offsetY:f/2+l,visible:u&&s.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:a/2,y:0,offsetY:f/2+l,visible:u&&s.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:a,y:0,offsetX:f/2-l,offsetY:f/2+l,visible:u&&s.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:o/2,offsetX:f/2+l,visible:u&&s.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:a,y:o/2,offsetX:f/2-l,visible:u&&s.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:o,offsetX:f/2+l,offsetY:f/2-l,visible:u&&s.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:a/2,y:o,offsetY:f/2-l,visible:u&&s.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:a,y:o,offsetX:f/2-l,offsetY:f/2-l,visible:u&&s.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:a/2,y:-this.rotateAnchorOffset()*Tn.Util._sign(o)-l,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:a,height:o,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),(n=this.getLayer())===null||n===void 0||n.batchDraw()},e.prototype.isTransforming=function(){return this._transforming},e.prototype.stopTransform=function(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}},e.prototype.destroy=function(){return this.getStage()&&this._cursorChange&&(this.getStage().content.style.cursor=""),N3.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this},e.prototype.toObject=function(){return DX.Node.prototype.toObject.call(this)},e}(N3.Group);Qv.Transformer=Ln;function VX(r){return r instanceof Array||Tn.Util.warn("enabledAnchors value should be an array"),r instanceof Array&&r.forEach(function(e){Ip.indexOf(e)===-1&&Tn.Util.warn("Unknown anchor name: "+e+". Available names are: "+Ip.join(", "))}),r||[]}Ln.prototype.className="Transformer";FX._registerNode(Ln);Kn.Factory.addGetterSetter(Ln,"enabledAnchors",Ip,VX);Kn.Factory.addGetterSetter(Ln,"resizeEnabled",!0);Kn.Factory.addGetterSetter(Ln,"anchorSize",10,ql.getNumberValidator());Kn.Factory.addGetterSetter(Ln,"rotateEnabled",!0);Kn.Factory.addGetterSetter(Ln,"rotationSnaps",[]);Kn.Factory.addGetterSetter(Ln,"rotateAnchorOffset",50,ql.getNumberValidator());Kn.Factory.addGetterSetter(Ln,"rotationSnapTolerance",5,ql.getNumberValidator());Kn.Factory.addGetterSetter(Ln,"borderEnabled",!0);Kn.Factory.addGetterSetter(Ln,"anchorStroke","rgb(0, 161, 255)");Kn.Factory.addGetterSetter(Ln,"anchorStrokeWidth",1,ql.getNumberValidator());Kn.Factory.addGetterSetter(Ln,"anchorFill","white");Kn.Factory.addGetterSetter(Ln,"anchorCornerRadius",0,ql.getNumberValidator());Kn.Factory.addGetterSetter(Ln,"borderStroke","rgb(0, 161, 255)");Kn.Factory.addGetterSetter(Ln,"borderStrokeWidth",1,ql.getNumberValidator());Kn.Factory.addGetterSetter(Ln,"borderDash");Kn.Factory.addGetterSetter(Ln,"keepRatio",!0);Kn.Factory.addGetterSetter(Ln,"centeredScaling",!1);Kn.Factory.addGetterSetter(Ln,"ignoreStroke",!1);Kn.Factory.addGetterSetter(Ln,"padding",0,ql.getNumberValidator());Kn.Factory.addGetterSetter(Ln,"node");Kn.Factory.addGetterSetter(Ln,"nodes");Kn.Factory.addGetterSetter(Ln,"boundBoxFunc");Kn.Factory.addGetterSetter(Ln,"shouldOverdrawWholeArea",!1);Kn.Factory.backCompat(Ln,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});Tn.Collection.mapMethods(Ln);var Jv={},WX=kt&&kt.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Jv,"__esModule",{value:!0});Jv.Wedge=void 0;var YX=Jr,eg=Hr,XX=Oi,KX=Vr,$4=fr,ZX=Vr,hs=function(r){WX(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.radius(),0,KX.Konva.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return this.radius()*2},e.prototype.getHeight=function(){return this.radius()*2},e.prototype.setWidth=function(t){this.radius(t/2)},e.prototype.setHeight=function(t){this.radius(t/2)},e}(XX.Shape);Jv.Wedge=hs;hs.prototype.className="Wedge";hs.prototype._centroid=!0;hs.prototype._attrsAffectingSize=["radius"];ZX._registerNode(hs);eg.Factory.addGetterSetter(hs,"radius",0,$4.getNumberValidator());eg.Factory.addGetterSetter(hs,"angle",0,$4.getNumberValidator());eg.Factory.addGetterSetter(hs,"clockwise",!1);eg.Factory.backCompat(hs,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});YX.Collection.mapMethods(hs);var tg={};Object.defineProperty(tg,"__esModule",{value:!0});tg.Blur=void 0;var O3=Hr,QX=ci,JX=fr;function D3(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var eK=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],tK=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function rK(r,e){var t=r.data,n=r.width,i=r.height,a,o,s,u,l,f,c,d,h,p,g,b,v,y,m,w,S,A,_,E,k,M,T,C,R=e+e+1,x=n-1,B=i-1,D=e+1,O=D*(D+1)/2,G=new D3,V=null,I=G,z=null,P=null,q=eK[e],F=tK[e];for(s=1;s<R;s++)I=I.next=new D3,s===D&&(V=I);for(I.next=G,c=f=0,o=0;o<i;o++){for(w=S=A=_=d=h=p=g=0,b=D*(E=t[f]),v=D*(k=t[f+1]),y=D*(M=t[f+2]),m=D*(T=t[f+3]),d+=O*E,h+=O*k,p+=O*M,g+=O*T,I=G,s=0;s<D;s++)I.r=E,I.g=k,I.b=M,I.a=T,I=I.next;for(s=1;s<D;s++)u=f+((x<s?x:s)<<2),d+=(I.r=E=t[u])*(C=D-s),h+=(I.g=k=t[u+1])*C,p+=(I.b=M=t[u+2])*C,g+=(I.a=T=t[u+3])*C,w+=E,S+=k,A+=M,_+=T,I=I.next;for(z=G,P=V,a=0;a<n;a++)t[f+3]=T=g*q>>F,T!==0?(T=255/T,t[f]=(d*q>>F)*T,t[f+1]=(h*q>>F)*T,t[f+2]=(p*q>>F)*T):t[f]=t[f+1]=t[f+2]=0,d-=b,h-=v,p-=y,g-=m,b-=z.r,v-=z.g,y-=z.b,m-=z.a,u=c+((u=a+e+1)<x?u:x)<<2,w+=z.r=t[u],S+=z.g=t[u+1],A+=z.b=t[u+2],_+=z.a=t[u+3],d+=w,h+=S,p+=A,g+=_,z=z.next,b+=E=P.r,v+=k=P.g,y+=M=P.b,m+=T=P.a,w-=E,S-=k,A-=M,_-=T,P=P.next,f+=4;c+=n}for(a=0;a<n;a++){for(S=A=_=w=h=p=g=d=0,f=a<<2,b=D*(E=t[f]),v=D*(k=t[f+1]),y=D*(M=t[f+2]),m=D*(T=t[f+3]),d+=O*E,h+=O*k,p+=O*M,g+=O*T,I=G,s=0;s<D;s++)I.r=E,I.g=k,I.b=M,I.a=T,I=I.next;for(l=n,s=1;s<=e;s++)f=l+a<<2,d+=(I.r=E=t[f])*(C=D-s),h+=(I.g=k=t[f+1])*C,p+=(I.b=M=t[f+2])*C,g+=(I.a=T=t[f+3])*C,w+=E,S+=k,A+=M,_+=T,I=I.next,s<B&&(l+=n);for(f=a,z=G,P=V,o=0;o<i;o++)u=f<<2,t[u+3]=T=g*q>>F,T>0?(T=255/T,t[u]=(d*q>>F)*T,t[u+1]=(h*q>>F)*T,t[u+2]=(p*q>>F)*T):t[u]=t[u+1]=t[u+2]=0,d-=b,h-=v,p-=y,g-=m,b-=z.r,v-=z.g,y-=z.b,m-=z.a,u=a+((u=o+D)<B?u:B)*n<<2,d+=w+=z.r=t[u],h+=S+=z.g=t[u+1],p+=A+=z.b=t[u+2],g+=_+=z.a=t[u+3],z=z.next,b+=E=P.r,v+=k=P.g,y+=M=P.b,m+=T=P.a,w-=E,S-=k,A-=M,_-=T,P=P.next,f+=n}}var nK=function(e){var t=Math.round(this.blurRadius());t>0&&rK(e,t)};tg.Blur=nK;O3.Factory.addGetterSetter(QX.Node,"blurRadius",0,JX.getNumberValidator(),O3.Factory.afterSetFilter);var rg={};Object.defineProperty(rg,"__esModule",{value:!0});rg.Brighten=void 0;var I3=Hr,iK=ci,aK=fr,oK=function(r){var e=this.brightness()*255,t=r.data,n=t.length,i;for(i=0;i<n;i+=4)t[i]+=e,t[i+1]+=e,t[i+2]+=e};rg.Brighten=oK;I3.Factory.addGetterSetter(iK.Node,"brightness",0,aK.getNumberValidator(),I3.Factory.afterSetFilter);var ng={};Object.defineProperty(ng,"__esModule",{value:!0});ng.Contrast=void 0;var R3=Hr,sK=ci,uK=fr,lK=function(r){var e=Math.pow((this.contrast()+100)/100,2),t=r.data,n=t.length,i=150,a=150,o=150,s;for(s=0;s<n;s+=4)i=t[s],a=t[s+1],o=t[s+2],i/=255,i-=.5,i*=e,i+=.5,i*=255,a/=255,a-=.5,a*=e,a+=.5,a*=255,o/=255,o-=.5,o*=e,o+=.5,o*=255,i=i<0?0:i>255?255:i,a=a<0?0:a>255?255:a,o=o<0?0:o>255?255:o,t[s]=i,t[s+1]=a,t[s+2]=o};ng.Contrast=lK;R3.Factory.addGetterSetter(sK.Node,"contrast",0,uK.getNumberValidator(),R3.Factory.afterSetFilter);var ig={};Object.defineProperty(ig,"__esModule",{value:!0});ig.Emboss=void 0;var Iu=Hr,ag=ci,fK=Jr,U4=fr,cK=function(r){var e=this.embossStrength()*10,t=this.embossWhiteLevel()*255,n=this.embossDirection(),i=this.embossBlend(),a=0,o=0,s=r.data,u=r.width,l=r.height,f=u*4,c=l;switch(n){case"top-left":a=-1,o=-1;break;case"top":a=-1,o=0;break;case"top-right":a=-1,o=1;break;case"right":a=0,o=1;break;case"bottom-right":a=1,o=1;break;case"bottom":a=1,o=0;break;case"bottom-left":a=1,o=-1;break;case"left":a=0,o=-1;break;default:fK.Util.error("Unknown emboss direction: "+n)}do{var d=(c-1)*f,h=a;c+h<1&&(h=0),c+h>l&&(h=0);var p=(c-1+h)*u*4,g=u;do{var b=d+(g-1)*4,v=o;g+v<1&&(v=0),g+v>u&&(v=0);var y=p+(g-1+v)*4,m=s[b]-s[y],w=s[b+1]-s[y+1],S=s[b+2]-s[y+2],A=m,_=A>0?A:-A,E=w>0?w:-w,k=S>0?S:-S;if(E>_&&(A=w),k>_&&(A=S),A*=e,i){var M=s[b]+A,T=s[b+1]+A,C=s[b+2]+A;s[b]=M>255?255:M<0?0:M,s[b+1]=T>255?255:T<0?0:T,s[b+2]=C>255?255:C<0?0:C}else{var R=t-A;R<0?R=0:R>255&&(R=255),s[b]=s[b+1]=s[b+2]=R}}while(--g)}while(--c)};ig.Emboss=cK;Iu.Factory.addGetterSetter(ag.Node,"embossStrength",.5,U4.getNumberValidator(),Iu.Factory.afterSetFilter);Iu.Factory.addGetterSetter(ag.Node,"embossWhiteLevel",.5,U4.getNumberValidator(),Iu.Factory.afterSetFilter);Iu.Factory.addGetterSetter(ag.Node,"embossDirection","top-left",null,Iu.Factory.afterSetFilter);Iu.Factory.addGetterSetter(ag.Node,"embossBlend",!1,null,Iu.Factory.afterSetFilter);var og={};Object.defineProperty(og,"__esModule",{value:!0});og.Enhance=void 0;var F3=Hr,hK=ci,dK=fr;function r2(r,e,t,n,i){var a=t-e,o=i-n,s;return a===0?n+o/2:o===0?n:(s=(r-e)/a,s=o*s+n,s)}var pK=function(r){var e=r.data,t=e.length,n=e[0],i=n,a,o=e[1],s=o,u,l=e[2],f=l,c,d,h=this.enhance();if(h!==0){for(d=0;d<t;d+=4)a=e[d+0],a<n?n=a:a>i&&(i=a),u=e[d+1],u<o?o=u:u>s&&(s=u),c=e[d+2],c<l?l=c:c>f&&(f=c);i===n&&(i=255,n=0),s===o&&(s=255,o=0),f===l&&(f=255,l=0);var p,g,b,v,y,m,w,S,A;for(h>0?(g=i+h*(255-i),b=n-h*(n-0),y=s+h*(255-s),m=o-h*(o-0),S=f+h*(255-f),A=l-h*(l-0)):(p=(i+n)*.5,g=i+h*(i-p),b=n+h*(n-p),v=(s+o)*.5,y=s+h*(s-v),m=o+h*(o-v),w=(f+l)*.5,S=f+h*(f-w),A=l+h*(l-w)),d=0;d<t;d+=4)e[d+0]=r2(e[d+0],n,i,b,g),e[d+1]=r2(e[d+1],o,s,m,y),e[d+2]=r2(e[d+2],l,f,A,S)}};og.Enhance=pK;F3.Factory.addGetterSetter(hK.Node,"enhance",0,dK.getNumberValidator(),F3.Factory.afterSetFilter);var sg={};Object.defineProperty(sg,"__esModule",{value:!0});sg.Grayscale=void 0;var vK=function(r){var e=r.data,t=e.length,n,i;for(n=0;n<t;n+=4)i=.34*e[n]+.5*e[n+1]+.16*e[n+2],e[n]=i,e[n+1]=i,e[n+2]=i};sg.Grayscale=vK;var ug={};Object.defineProperty(ug,"__esModule",{value:!0});ug.HSL=void 0;var Uf=Hr,o5=ci,s5=fr;Uf.Factory.addGetterSetter(o5.Node,"hue",0,s5.getNumberValidator(),Uf.Factory.afterSetFilter);Uf.Factory.addGetterSetter(o5.Node,"saturation",0,s5.getNumberValidator(),Uf.Factory.afterSetFilter);Uf.Factory.addGetterSetter(o5.Node,"luminance",0,s5.getNumberValidator(),Uf.Factory.afterSetFilter);var gK=function(r){var e=r.data,t=e.length,n=1,i=Math.pow(2,this.saturation()),a=Math.abs(this.hue()+360)%360,o=this.luminance()*127,s,u=n*i*Math.cos(a*Math.PI/180),l=n*i*Math.sin(a*Math.PI/180),f=.299*n+.701*u+.167*l,c=.587*n-.587*u+.33*l,d=.114*n-.114*u-.497*l,h=.299*n-.299*u-.328*l,p=.587*n+.413*u+.035*l,g=.114*n-.114*u+.293*l,b=.299*n-.3*u+1.25*l,v=.587*n-.586*u-1.05*l,y=.114*n+.886*u-.2*l,m,w,S,A;for(s=0;s<t;s+=4)m=e[s+0],w=e[s+1],S=e[s+2],A=e[s+3],e[s+0]=f*m+c*w+d*S+o,e[s+1]=h*m+p*w+g*S+o,e[s+2]=b*m+v*w+y*S+o,e[s+3]=A};ug.HSL=gK;var lg={};Object.defineProperty(lg,"__esModule",{value:!0});lg.HSV=void 0;var Hf=Hr,u5=ci,l5=fr,mK=function(r){var e=r.data,t=e.length,n=Math.pow(2,this.value()),i=Math.pow(2,this.saturation()),a=Math.abs(this.hue()+360)%360,o,s=n*i*Math.cos(a*Math.PI/180),u=n*i*Math.sin(a*Math.PI/180),l=.299*n+.701*s+.167*u,f=.587*n-.587*s+.33*u,c=.114*n-.114*s-.497*u,d=.299*n-.299*s-.328*u,h=.587*n+.413*s+.035*u,p=.114*n-.114*s+.293*u,g=.299*n-.3*s+1.25*u,b=.587*n-.586*s-1.05*u,v=.114*n+.886*s-.2*u,y,m,w,S;for(o=0;o<t;o+=4)y=e[o+0],m=e[o+1],w=e[o+2],S=e[o+3],e[o+0]=l*y+f*m+c*w,e[o+1]=d*y+h*m+p*w,e[o+2]=g*y+b*m+v*w,e[o+3]=S};lg.HSV=mK;Hf.Factory.addGetterSetter(u5.Node,"hue",0,l5.getNumberValidator(),Hf.Factory.afterSetFilter);Hf.Factory.addGetterSetter(u5.Node,"saturation",0,l5.getNumberValidator(),Hf.Factory.afterSetFilter);Hf.Factory.addGetterSetter(u5.Node,"value",0,l5.getNumberValidator(),Hf.Factory.afterSetFilter);var fg={};Object.defineProperty(fg,"__esModule",{value:!0});fg.Invert=void 0;var yK=function(r){var e=r.data,t=e.length,n;for(n=0;n<t;n+=4)e[n]=255-e[n],e[n+1]=255-e[n+1],e[n+2]=255-e[n+2]};fg.Invert=yK;var cg={};Object.defineProperty(cg,"__esModule",{value:!0});cg.Kaleidoscope=void 0;var Rp=Hr,H4=ci,bK=Jr,j4=fr,wK=function(r,e,t){var n=r.data,i=e.data,a=r.width,o=r.height,s=t.polarCenterX||a/2,u=t.polarCenterY||o/2,l,f,c,d=0,h=0,p=0,g=0,b,v=Math.sqrt(s*s+u*u);f=a-s,c=o-u,b=Math.sqrt(f*f+c*c),v=b>v?b:v;var y=o,m=a,w,S,A=360/m*Math.PI/180,_,E;for(S=0;S<m;S+=1)for(_=Math.sin(S*A),E=Math.cos(S*A),w=0;w<y;w+=1)f=Math.floor(s+v*w/y*E),c=Math.floor(u+v*w/y*_),l=(c*a+f)*4,d=n[l+0],h=n[l+1],p=n[l+2],g=n[l+3],l=(S+w*a)*4,i[l+0]=d,i[l+1]=h,i[l+2]=p,i[l+3]=g},_K=function(r,e,t){var n=r.data,i=e.data,a=r.width,o=r.height,s=t.polarCenterX||a/2,u=t.polarCenterY||o/2,l,f,c,d,h,p=0,g=0,b=0,v=0,y,m=Math.sqrt(s*s+u*u);f=a-s,c=o-u,y=Math.sqrt(f*f+c*c),m=y>m?y:m;var w=o,S=a,A,_,E=t.polarRotation||0,k,M;for(f=0;f<a;f+=1)for(c=0;c<o;c+=1)d=f-s,h=c-u,A=Math.sqrt(d*d+h*h)*w/m,_=(Math.atan2(h,d)*180/Math.PI+360+E)%360,_=_*S/360,k=Math.floor(_),M=Math.floor(A),l=(M*a+k)*4,p=n[l+0],g=n[l+1],b=n[l+2],v=n[l+3],l=(c*a+f)*4,i[l+0]=p,i[l+1]=g,i[l+2]=b,i[l+3]=v},xK=function(r){var e=r.width,t=r.height,n,i,a,o,s,u,l,f,c,d,h=Math.round(this.kaleidoscopePower()),p=Math.round(this.kaleidoscopeAngle()),g=Math.floor(e*(p%360)/360);if(!(h<1)){var b=bK.Util.createCanvasElement();b.width=e,b.height=t;var v=b.getContext("2d").getImageData(0,0,e,t);wK(r,v,{polarCenterX:e/2,polarCenterY:t/2});for(var y=e/Math.pow(2,h);y<=8;)y=y*2,h-=1;y=Math.ceil(y);var m=y,w=0,S=m,A=1;for(g+y>e&&(w=m,S=0,A=-1),i=0;i<t;i+=1)for(n=w;n!==S;n+=A)a=Math.round(n+g)%e,c=(e*i+a)*4,s=v.data[c+0],u=v.data[c+1],l=v.data[c+2],f=v.data[c+3],d=(e*i+n)*4,v.data[d+0]=s,v.data[d+1]=u,v.data[d+2]=l,v.data[d+3]=f;for(i=0;i<t;i+=1)for(m=Math.floor(y),o=0;o<h;o+=1){for(n=0;n<m+1;n+=1)c=(e*i+n)*4,s=v.data[c+0],u=v.data[c+1],l=v.data[c+2],f=v.data[c+3],d=(e*i+m*2-n-1)*4,v.data[d+0]=s,v.data[d+1]=u,v.data[d+2]=l,v.data[d+3]=f;m*=2}_K(v,r,{polarRotation:0})}};cg.Kaleidoscope=xK;Rp.Factory.addGetterSetter(H4.Node,"kaleidoscopePower",2,j4.getNumberValidator(),Rp.Factory.afterSetFilter);Rp.Factory.addGetterSetter(H4.Node,"kaleidoscopeAngle",0,j4.getNumberValidator(),Rp.Factory.afterSetFilter);var hg={};Object.defineProperty(hg,"__esModule",{value:!0});hg.Mask=void 0;var B3=Hr,SK=ci,EK=fr;function Kd(r,e,t){var n=(t*r.width+e)*4,i=[];return i.push(r.data[n++],r.data[n++],r.data[n++],r.data[n++]),i}function jc(r,e){return Math.sqrt(Math.pow(r[0]-e[0],2)+Math.pow(r[1]-e[1],2)+Math.pow(r[2]-e[2],2))}function CK(r){for(var e=[0,0,0],t=0;t<r.length;t++)e[0]+=r[t][0],e[1]+=r[t][1],e[2]+=r[t][2];return e[0]/=r.length,e[1]/=r.length,e[2]/=r.length,e}function AK(r,e){var t=Kd(r,0,0),n=Kd(r,r.width-1,0),i=Kd(r,0,r.height-1),a=Kd(r,r.width-1,r.height-1),o=e||10;if(jc(t,n)<o&&jc(n,a)<o&&jc(a,i)<o&&jc(i,t)<o){for(var s=CK([n,t,a,i]),u=[],l=0;l<r.width*r.height;l++){var f=jc(s,[r.data[l*4],r.data[l*4+1],r.data[l*4+2]]);u[l]=f<o?0:255}return u}}function TK(r,e){for(var t=0;t<r.width*r.height;t++)r.data[4*t+3]=e[t]}function kK(r,e,t){for(var n=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(n.length)),a=Math.floor(i/2),o=[],s=0;s<t;s++)for(var u=0;u<e;u++){for(var l=s*e+u,f=0,c=0;c<i;c++)for(var d=0;d<i;d++){var h=s+c-a,p=u+d-a;if(h>=0&&h<t&&p>=0&&p<e){var g=h*e+p,b=n[c*i+d];f+=r[g]*b}}o[l]=f===255*8?255:0}return o}function LK(r,e,t){for(var n=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(n.length)),a=Math.floor(i/2),o=[],s=0;s<t;s++)for(var u=0;u<e;u++){for(var l=s*e+u,f=0,c=0;c<i;c++)for(var d=0;d<i;d++){var h=s+c-a,p=u+d-a;if(h>=0&&h<t&&p>=0&&p<e){var g=h*e+p,b=n[c*i+d];f+=r[g]*b}}o[l]=f>=255*4?255:0}return o}function NK(r,e,t){for(var n=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],i=Math.round(Math.sqrt(n.length)),a=Math.floor(i/2),o=[],s=0;s<t;s++)for(var u=0;u<e;u++){for(var l=s*e+u,f=0,c=0;c<i;c++)for(var d=0;d<i;d++){var h=s+c-a,p=u+d-a;if(h>=0&&h<t&&p>=0&&p<e){var g=h*e+p,b=n[c*i+d];f+=r[g]*b}}o[l]=f}return o}var PK=function(r){var e=this.threshold(),t=AK(r,e);return t&&(t=kK(t,r.width,r.height),t=LK(t,r.width,r.height),t=NK(t,r.width,r.height),TK(r,t)),r};hg.Mask=PK;B3.Factory.addGetterSetter(SK.Node,"threshold",0,EK.getNumberValidator(),B3.Factory.afterSetFilter);var dg={};Object.defineProperty(dg,"__esModule",{value:!0});dg.Noise=void 0;var z3=Hr,MK=ci,OK=fr,DK=function(r){var e=this.noise()*255,t=r.data,n=t.length,i=e/2,a;for(a=0;a<n;a+=4)t[a+0]+=i-2*i*Math.random(),t[a+1]+=i-2*i*Math.random(),t[a+2]+=i-2*i*Math.random()};dg.Noise=DK;z3.Factory.addGetterSetter(MK.Node,"noise",.2,OK.getNumberValidator(),z3.Factory.afterSetFilter);var pg={};Object.defineProperty(pg,"__esModule",{value:!0});pg.Pixelate=void 0;var q3=Hr,IK=Jr,RK=ci,FK=fr,BK=function(r){var e=Math.ceil(this.pixelSize()),t=r.width,n=r.height,i,a,o,s,u,l,f,c=Math.ceil(t/e),d=Math.ceil(n/e),h,p,g,b,v,y,m,w=r.data;if(e<=0){IK.Util.error("pixelSize value can not be <= 0");return}for(v=0;v<c;v+=1)for(y=0;y<d;y+=1){for(s=0,u=0,l=0,f=0,h=v*e,p=h+e,g=y*e,b=g+e,m=0,i=h;i<p;i+=1)if(!(i>=t))for(a=g;a<b;a+=1)a>=n||(o=(t*a+i)*4,s+=w[o+0],u+=w[o+1],l+=w[o+2],f+=w[o+3],m+=1);for(s=s/m,u=u/m,l=l/m,f=f/m,i=h;i<p;i+=1)if(!(i>=t))for(a=g;a<b;a+=1)a>=n||(o=(t*a+i)*4,w[o+0]=s,w[o+1]=u,w[o+2]=l,w[o+3]=f)}};pg.Pixelate=BK;q3.Factory.addGetterSetter(RK.Node,"pixelSize",8,FK.getNumberValidator(),q3.Factory.afterSetFilter);var vg={};Object.defineProperty(vg,"__esModule",{value:!0});vg.Posterize=void 0;var G3=Hr,zK=ci,qK=fr,GK=function(r){var e=Math.round(this.levels()*254)+1,t=r.data,n=t.length,i=255/e,a;for(a=0;a<n;a+=1)t[a]=Math.floor(t[a]/i)*i};vg.Posterize=GK;G3.Factory.addGetterSetter(zK.Node,"levels",.5,qK.getNumberValidator(),G3.Factory.afterSetFilter);var gg={};Object.defineProperty(gg,"__esModule",{value:!0});gg.RGB=void 0;var Fp=Hr,f5=ci,$K=fr,UK=function(r){var e=r.data,t=e.length,n=this.red(),i=this.green(),a=this.blue(),o,s;for(o=0;o<t;o+=4)s=(.34*e[o]+.5*e[o+1]+.16*e[o+2])/255,e[o]=s*n,e[o+1]=s*i,e[o+2]=s*a,e[o+3]=e[o+3]};gg.RGB=UK;Fp.Factory.addGetterSetter(f5.Node,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)});Fp.Factory.addGetterSetter(f5.Node,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)});Fp.Factory.addGetterSetter(f5.Node,"blue",0,$K.RGBComponent,Fp.Factory.afterSetFilter);var mg={};Object.defineProperty(mg,"__esModule",{value:!0});mg.RGBA=void 0;var Ch=Hr,yg=ci,HK=fr,jK=function(r){var e=r.data,t=e.length,n=this.red(),i=this.green(),a=this.blue(),o=this.alpha(),s,u;for(s=0;s<t;s+=4)u=1-o,e[s]=n*o+e[s]*u,e[s+1]=i*o+e[s+1]*u,e[s+2]=a*o+e[s+2]*u};mg.RGBA=jK;Ch.Factory.addGetterSetter(yg.Node,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)});Ch.Factory.addGetterSetter(yg.Node,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)});Ch.Factory.addGetterSetter(yg.Node,"blue",0,HK.RGBComponent,Ch.Factory.afterSetFilter);Ch.Factory.addGetterSetter(yg.Node,"alpha",1,function(r){return this._filterUpToDate=!1,r>1?1:r<0?0:r});var bg={};Object.defineProperty(bg,"__esModule",{value:!0});bg.Sepia=void 0;var VK=function(r){var e=r.data,t=e.length,n,i,a,o;for(n=0;n<t;n+=4)i=e[n+0],a=e[n+1],o=e[n+2],e[n+0]=Math.min(255,i*.393+a*.769+o*.189),e[n+1]=Math.min(255,i*.349+a*.686+o*.168),e[n+2]=Math.min(255,i*.272+a*.534+o*.131)};bg.Sepia=VK;var wg={};Object.defineProperty(wg,"__esModule",{value:!0});wg.Solarize=void 0;var WK=function(r){var e=r.data,t=r.width,n=r.height,i=t*4,a=n;do{var o=(a-1)*i,s=t;do{var u=o+(s-1)*4,l=e[u],f=e[u+1],c=e[u+2];l>127&&(l=255-l),f>127&&(f=255-f),c>127&&(c=255-c),e[u]=l,e[u+1]=f,e[u+2]=c}while(--s)}while(--a)};wg.Solarize=WK;var _g={};Object.defineProperty(_g,"__esModule",{value:!0});_g.Threshold=void 0;var $3=Hr,YK=ci,XK=fr,KK=function(r){var e=this.threshold()*255,t=r.data,n=t.length,i;for(i=0;i<n;i+=1)t[i]=t[i]<e?0:255};_g.Threshold=KK;$3.Factory.addGetterSetter(YK.Node,"threshold",.5,XK.getNumberValidator(),$3.Factory.afterSetFilter);Object.defineProperty(Tv,"__esModule",{value:!0});Tv.Konva=void 0;var U3=kv,ZK=Rv,QK=zv,JK=Gv,eZ=$v,tZ=Uv,H3=$f,rZ=Qh,nZ=Jh,iZ=ed,aZ=Wv,oZ=Yv,sZ=Xv,uZ=Kv,lZ=Al,fZ=Zv,cZ=Qv,hZ=Jv,dZ=tg,pZ=rg,vZ=ng,gZ=ig,mZ=og,yZ=sg,bZ=ug,wZ=lg,_Z=fg,xZ=cg,SZ=hg,EZ=dg,CZ=pg,AZ=vg,TZ=gg,kZ=mg,LZ=bg,NZ=wg,PZ=_g;Tv.Konva=U3.Konva.Util._assign(U3.Konva,{Arc:ZK.Arc,Arrow:QK.Arrow,Circle:JK.Circle,Ellipse:eZ.Ellipse,Image:tZ.Image,Label:H3.Label,Tag:H3.Tag,Line:rZ.Line,Path:nZ.Path,Rect:iZ.Rect,RegularPolygon:aZ.RegularPolygon,Ring:oZ.Ring,Sprite:sZ.Sprite,Star:uZ.Star,Text:lZ.Text,TextPath:fZ.TextPath,Transformer:cZ.Transformer,Wedge:hZ.Wedge,Filters:{Blur:dZ.Blur,Brighten:pZ.Brighten,Contrast:vZ.Contrast,Emboss:gZ.Emboss,Enhance:mZ.Enhance,Grayscale:yZ.Grayscale,HSL:bZ.HSL,HSV:wZ.HSV,Invert:_Z.Invert,Kaleidoscope:xZ.Kaleidoscope,Mask:SZ.Mask,Noise:EZ.Noise,Pixelate:CZ.Pixelate,Posterize:AZ.Posterize,RGB:TZ.RGB,RGBA:kZ.RGBA,Sepia:LZ.Sepia,Solarize:NZ.Solarize,Threshold:PZ.Threshold}});(function(r,e){var t=Tv.Konva;t._injectGlobal(t),e.default=t,r.exports=e.default})(z2,z2.exports);var MZ=z2.exports;const V4=qi(MZ);var W4={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(self,function(){return(()=>{var t={265:(i,a,o)=>{var s,u,l,f,c,d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h};u=Math.max,l=Date.now||function(){return new Date().getTime()},f=function(h,p,g){var b,v,y,m,w,S,A,_,E,k=0,M=!1,T=!0;if(typeof h!="function")throw new TypeError("Expected a function");if(p=p<0?0:+p||0,g===!0){var C=!0;T=!1}else E=(_=g)===void 0?"undefined":d(_),!_||E!="object"&&E!="function"||(C=!!g.leading,M="maxWait"in g&&u(+g.maxWait||0,p),T="trailing"in g?!!g.trailing:T);function R(O,G){G&&clearTimeout(G),v=S=A=void 0,O&&(k=l(),y=h.apply(w,b),S||v||(b=w=void 0))}function x(){var O=p-(l()-m);O<=0||O>p?R(A,v):S=setTimeout(x,O)}function B(){R(T,S)}function D(){if(b=arguments,m=l(),w=this,A=T&&(S||!C),M===!1)var O=C&&!S;else{v||C||(k=m);var G=M-(m-k),V=G<=0||G>M;V?(v&&(v=clearTimeout(v)),k=m,y=h.apply(w,b)):v||(v=setTimeout(B,G))}return V&&S?S=clearTimeout(S):S||p===M||(S=setTimeout(x,p)),O&&(V=!0,y=h.apply(w,b)),!V||S||v||(b=w=void 0),y}return D.cancel=function(){S&&clearTimeout(S),v&&clearTimeout(v),k=0,v=S=A=void 0},D},c=function(h,p,g){if(h&&p&&g){var b=0;h("core","nodeEditing",function(y){var m,w=this;if(y==="get")return v(w,"api");var S,A,_=1.1,E=p.extend(!0,{padding:5,undoable:!0,grappleSize:8,grappleColor:"green",inactiveGrappleStroke:"inside 1px blue",boundingRectangleLineDash:[4,8],boundingRectangleLineColor:"red",boundingRectangleLineWidth:1.5,zIndex:999,moveSelectedNodesOnKeyEvents:function(){return!0},minWidth:function(J){return J.data("resizeMinWidth")||15},minHeight:function(J){return J.data("resizeMinHeight")||15},getCompoundMinWidth:function(J){return J.css("min-width")},getCompoundMinHeight:function(J){return J.css("min-height")},getCompoundMinWidthBiasRight:function(J){return J.css("min-width-bias-right")},getCompoundMinWidthBiasLeft:function(J){return J.css("min-width-bias-left")},getCompoundMinHeightBiasTop:function(J){return J.css("min-height-bias-top")},getCompoundMinHeightBiasBottom:function(J){return J.css("min-height-bias-bottom")},setWidth:function(J,fe){J.css("width",fe)},setHeight:function(J,fe){J.css("height",fe)},setCompoundMinWidth:function(J,fe){J.css("min-width",fe)},setCompoundMinHeight:function(J,fe){J.css("min-height",fe)},setCompoundMinWidthBiasLeft:function(J,fe){J.css("min-width-bias-left",fe)},setCompoundMinWidthBiasRight:function(J,fe){J.css("min-width-bias-right",fe)},setCompoundMinHeightBiasTop:function(J,fe){J.css("min-height-bias-top",fe)},setCompoundMinHeightBiasBottom:function(J,fe){J.css("min-height-bias-bottom",fe)},isFixedAspectRatioResizeMode:function(J){return J.is(".fixedAspectRatioResizeMode")},isNoResizeMode:function(J){return J.is(".noResizeMode, :parent")},isNoControlsMode:function(J){return J.is(".noControlsMode")},cursors:{default:"default",inactive:"not-allowed",nw:"nw-resize",n:"n-resize",ne:"ne-resize",e:"e-resize",se:"se-resize",s:"s-resize",sw:"sw-resize",w:"w-resize"},resizeToContentCueEnabled:function(J){return!0},resizeToContentFunction:void 0,resizeToContentCuePosition:"bottom-right",resizeToContentCueImage:"/node_modules/cytoscape-node-editing/resizeCue.svg",enableMovementWithArrowKeys:!0,autoRemoveResizeToContentCue:!1},y),k=p(w.container()),M="cy-node-edge-editing-stage"+b;b++;var T,C,R=p('<div id="'+M+'"></div>');k.find("#"+M).length<1&&k.append(R),(T=g.stages.length<b?new g.Stage({id:"node-edge-editing-stage",container:M,width:k.width(),height:k.height()}):g.stages[b-1]).getChildren().length<1?(C=new g.Layer,T.add(C)):C=T.getChildren()[0];var x=f(function(){R.attr("height",k.height()).attr("width",k.width()).css({position:"absolute",top:0,left:0,"z-index":E.zIndex}),setTimeout(function(){var J=R.offset(),fe=k.offset();R.css({top:-(J.top-fe.top),left:-(J.left-fe.left)}),C.getStage().setWidth(k.width()),C.getStage().setHeight(k.height())},0)},250);x(),p(window).on("resize",x);var B=function(J){this.parent=J,this.boundingRectangle=new D(J);var fe=["topleft","topcenter","topright","centerright","bottomright","bottomcenter","bottomleft","centerleft"];this.grapples=[];for(var we=0;we<fe.length;we++){var ge=fe[we],me=!0;(E.isNoResizeMode(J)||E.isFixedAspectRatioResizeMode(J)&&ge.indexOf("center")>=0)&&(me=!1),this.grapples.push(new O(J,this,ge,me))}!E.resizeToContentCueEnabled(J)||E.isNoResizeMode(J)||E.autoRemoveResizeToContentCue&&(!E.autoRemoveResizeToContentCue||P(J))||(this.resizeCue=new G(J,this)),C.draw()};B.prototype.update=function(){this.boundingRectangle.update();for(var J=0;J<this.grapples.length;J++)this.grapples[J].update();var fe=this.boundingRectangle.parent,we=E.resizeToContentCueEnabled(fe)&&!E.isNoResizeMode(fe)&&(!E.autoRemoveResizeToContentCue||E.autoRemoveResizeToContentCue&&!P(fe));this.resizeCue&&we?this.resizeCue.update():this.resizeCue&&!we?(this.resizeCue.unbindEvents(),this.resizeCue.shape.destroy(),delete this.resizeCue):!this.resizeCue&&we&&(this.resizeCue=new G(fe,this)),C.draw()},B.prototype.remove=function(){this.boundingRectangle.shape.destroy(),delete this.boundingRectangle;for(var J=0;J<this.grapples.length;J++)this.grapples[J].unbindAllEvents(),this.grapples[J].shape.destroy();delete this.grapples,this.resizeCue&&(this.resizeCue.unbindEvents(),this.resizeCue.shape.destroy(),delete this.resizeCue),C.draw()};var D=function(J){this.parent=J,this.shape=null;var fe=J.renderedPosition(),we=J.renderedOuterWidth()+W(),ge=J.renderedOuterHeight()+W(),me={x:fe.x-we/2,y:fe.y-ge/2},ue=new g.Rect({x:me.x,y:me.y,width:we,height:ge,stroke:E.boundingRectangleLineColor,strokeWidth:E.boundingRectangleLineWidth,dash:E.boundingRectangleLineDash});C.add(ue),this.shape=ue};D.prototype.update=function(){var J=this.parent.renderedPosition(),fe=this.parent.renderedOuterWidth()+W(),we=this.parent.renderedOuterHeight()+W(),ge={x:J.x-fe/2,y:J.y-we/2};this.shape.x(ge.x),this.shape.y(ge.y),this.shape.width(fe),this.shape.height(we)};var O=function(J,fe,we,ge){this.parent=J,this.location=we,this.isActive=ge,this.resizeControls=fe;var me=J.renderedPosition(),ue=J.renderedOuterWidth()+W(),ce=J.renderedOuterHeight()+W(),oe={x:me.x-ue/2,y:me.y-ce/2},Ae=q(J);if(this.shape=new g.Rect({width:Ae,height:Ae}),this.isActive)this.shape.fill(E.grappleColor);else{var Te=E.inactiveGrappleStroke.split(" "),Ge=Te[2],Fe=parseInt(Te[1].replace(/px/,""));this.shape.stroke(Ge),this.shape.strokeWidth(Fe)}this.updateShapePosition(oe,ue,ce,Ae),C.add(this.shape),this.isActive?this.bindActiveEvents():this.bindInactiveEvents()};O.prototype.bindInactiveEvents=function(){var J=function fe(we){w.boxSelectionEnabled(!0),w.panningEnabled(!0),w.autounselectify(!1),w.autoungrabify(!1),C.getStage().off("contentTouchend contentMouseup",fe)};this.shape.on("mouseenter",function(fe){fe.target.getStage().container().style.cursor=E.cursors.inactive}),this.shape.on("mouseleave",function(fe){fe.target.getStage()!=null&&(fe.target.getStage().container().style.cursor=E.cursors.default)}),this.shape.on("touchstart mousedown",function(fe){w.boxSelectionEnabled(!1),w.panningEnabled(!1),w.autounselectify(!0),w.autoungrabify(!0),C.getStage().on("contentTouchend contentMouseup",J)})},O.prototype.bindActiveEvents=function(){var J,fe,we,ge,me,ue,ce=this,oe=ce.parent,Ae={},Te={topleft:"nw",topcenter:"n",topright:"ne",centerright:"e",bottomright:"se",bottomcenter:"s",bottomleft:"sw",centerleft:"w"},Ge=function Ie(Ve){w.style().selector("core").style("active-bg-opacity",me).update(),ce.shape.getStage().container().style.cursor=E.cursors.default,w.boxSelectionEnabled(!0),w.panningEnabled(!0),setTimeout(function(){w.autounselectify(!1),w.autoungrabify(!1)},0),w.trigger("nodeediting.resizeend",[ce.location,ce.parent]),C.getStage().off("contentTouchend contentMouseup",Ie),C.getStage().off("contentTouchmove contentMousemove",Fe),ce.shape.on("mouseenter",Re),ce.shape.on("mouseleave",ze)},Fe=function(Ie){var Ve=ce.shape.getStage().getPointerPosition(),We=Ve.x,Ze=Ve.y,at=(Ze-Ae.y)/w.zoom(),ft=(We-Ae.x)/w.zoom(),wt=ce.location;w.batch(function(){var dt=E.isFixedAspectRatioResizeMode(oe);if(!(dt&&wt.indexOf("center")>=0||E.isNoResizeMode(oe))){if(dt){var vt=ge(oe)/we(oe),Et=wt=="topright"||wt=="bottomleft";ft>at?at=ft*vt*(Et?-1:1):ft=at/vt*(Et?-1:1)}var Mt=oe.position(),mt=Mt.x,Dt=Mt.y,Lt=!1,Tt=!1,nr=0,$t=0,pt=0,hr=0;if(oe.isParent()){var Rt=we(oe)-ue.w,Bt=ge(oe)-ue.h;Rt>0&&($t=Rt-(nr=Rt*parseFloat(E.getCompoundMinWidthBiasLeft(oe))/(parseFloat(E.getCompoundMinWidthBiasLeft(oe))+parseFloat(E.getCompoundMinWidthBiasRight(oe))))),Bt>0&&(hr=Bt-(pt=Bt*parseFloat(E.getCompoundMinHeightBiasTop(oe))/(parseFloat(E.getCompoundMinHeightBiasTop(oe))+parseFloat(E.getCompoundMinHeightBiasBottom(oe)))))}if(wt.startsWith("top")){if(ge(oe)-at>E.minHeight(oe)&&(!oe.isParent()||pt-at>=0))Dt=Mt.y+at/2,Tt=!0,fe(oe,ge(oe)-at);else if(dt)return}else if(wt.startsWith("bottom")){if(ge(oe)+at>E.minHeight(oe)&&(!oe.isParent()||hr+at>=0))Dt=Mt.y+at/2,Tt=!0,fe(oe,ge(oe)+at);else if(dt)return}if(wt.endsWith("left")&&we(oe)-ft>E.minWidth(oe)&&(!oe.isParent()||nr-ft>=0)?(mt=Mt.x+ft/2,Lt=!0,J(oe,we(oe)-ft)):wt.endsWith("right")&&we(oe)+ft>E.minWidth(oe)&&(!oe.isParent()||$t+ft>=0)&&(mt=Mt.x+ft/2,Lt=!0,J(oe,we(oe)+ft)),oe.isParent()||!Lt&&!Tt||oe.position({x:mt,y:Dt}),oe.isParent()){if(Rt=we(oe)-ue.w,Bt=ge(oe)-ue.h,Lt&&Rt>0){wt.endsWith("right")?$t=Rt-nr:wt.endsWith("left")&&(nr=Rt-$t);var ur=nr/(nr+$t)*100,nt=100-ur;if(ur<0||nt<0)return;E.setCompoundMinWidthBiasLeft(oe,ur+"%"),E.setCompoundMinWidthBiasRight(oe,nt+"%")}if(Tt&&Bt>0){wt.startsWith("top")?pt=Bt-hr:wt.startsWith("bottom")&&(hr=Bt-pt);var Xe=pt/(pt+hr)*100,ct=100-Xe;if(Xe<0||ct<0)return;E.setCompoundMinHeightBiasTop(oe,Xe+"%"),E.setCompoundMinHeightBiasBottom(oe,ct+"%")}}}}),Ae.x=We,Ae.y=Ze,ce.resizeControls.update(),w.trigger("nodeediting.resizedrag",[wt,oe])},Re=function(Ie){Ie.target.getStage().container().style.cursor=E.cursors[Te[ce.location]]},ze=function(Ie){Ie.target.getStage()!=null&&(Ie.target.getStage().container().style.cursor=E.cursors.default)};this.shape.on("mouseenter",Re),this.shape.on("mouseleave",ze),this.shape.on("touchstart mousedown",function(Ie){ue=oe.children().boundingBox(),J=oe.isParent()?E.setCompoundMinWidth:E.setWidth,fe=oe.isParent()?E.setCompoundMinHeight:E.setHeight,we=function(We){return We.isParent()?Math.max(parseFloat(E.getCompoundMinWidth(We)),ue.w):We.width()},ge=function(We){return We.isParent()?Math.max(parseFloat(E.getCompoundMinHeight(We)),ue.h):We.height()},w.trigger("nodeediting.resizestart",[ce.location,ce.parent]),w.style()._private.coreStyle["active-bg-opacity"]&&(me=w.style()._private.coreStyle["active-bg-opacity"].value),w.style().selector("core").style("active-bg-opacity",0).update(),Ie.target.getStage().container().style.cursor=E.cursors[Te[ce.location]];var Ve=Ie.target.getStage().getPointerPosition();Ae.x=Ve.x,Ae.y=Ve.y,w.boxSelectionEnabled(!1),w.panningEnabled(!1),w.autounselectify(!0),w.autoungrabify(!0),ce.shape.off("mouseenter",Re),ce.shape.off("mouseleave",ze),C.getStage().on("contentTouchend contentMouseup",Ge),C.getStage().on("contentTouchmove contentMousemove",Fe)})},O.prototype.update=function(){var J=this.parent.renderedPosition(),fe=this.parent.renderedOuterWidth()+W(),we=this.parent.renderedOuterHeight()+W(),ge={x:J.x-fe/2,y:J.y-we/2},me=q(this.parent);this.shape.width(me),this.shape.height(me),this.updateShapePosition(ge,fe,we,me)},O.prototype.unbindAllEvents=function(){this.shape.off("mouseenter"),this.shape.off("mouseleave"),this.shape.off("touchstart mousedown")},O.prototype.updateShapePosition=function(J,fe,we,ge){switch(this.location){case"topleft":this.shape.x(J.x-ge/2),this.shape.y(J.y-ge/2);break;case"topcenter":this.shape.x(J.x+fe/2-ge/2),this.shape.y(J.y-ge/2);break;case"topright":this.shape.x(J.x+fe-ge/2),this.shape.y(J.y-ge/2);break;case"centerright":this.shape.x(J.x+fe-ge/2),this.shape.y(J.y+we/2-ge/2);break;case"bottomright":this.shape.x(J.x+fe-ge/2),this.shape.y(J.y+we-ge/2);break;case"bottomcenter":this.shape.x(J.x+fe/2-ge/2),this.shape.y(J.y+we-ge/2);break;case"bottomleft":this.shape.x(J.x-ge/2),this.shape.y(J.y+we-ge/2);break;case"centerleft":this.shape.x(J.x-ge/2),this.shape.y(J.y+we/2-ge/2)}};var G=function(J,fe){this.parent=J,this.resizeControls=fe;var we=J.renderedPosition(),ge=J.renderedOuterWidth()+W(),me=J.renderedOuterHeight()+W(),ue={x:we.x-ge/2,y:we.y-me/2},ce=F(J),oe=U(J),Ae=new Image;Ae.src=E.resizeToContentCueImage,this.shape=new g.Image({width:oe,height:ce,image:Ae}),Ae.onload=function(){C.draw()},this.updateShapePosition(ue,ge,me,oe,ce),this.bindEvents(),C.add(this.shape)};G.prototype.update=function(){var J=this.parent.renderedPosition(),fe=this.parent.renderedOuterWidth()+W(),we=this.parent.renderedOuterHeight()+W(),ge={x:J.x-fe/2,y:J.y-we/2},me=F(this.parent),ue=U(this.parent);this.shape.width(ue),this.shape.height(me),this.updateShapePosition(ge,fe,we,ue,me)},G.prototype.updateShapePosition=function(J,fe,we,ge,me){switch(E.resizeToContentCuePosition){case"top-left":this.shape.x(J.x+.4*ge),this.shape.y(J.y+.4*me);break;case"top-right":this.shape.x(J.x+fe-1.4*ge),this.shape.y(J.y+.4*me);break;case"bottom-left":this.shape.x(J.x+.4*ge),this.shape.y(J.y+we-1.4*me);break;default:this.shape.x(J.x+fe-1.4*ge),this.shape.y(J.y+we-1.4*me)}},G.prototype.bindEvents=function(){var J=this.parent,fe=this;this.shape.on("mousedown",function(we){we.evt.preventDefault(),we.evt.stopPropagation()}),this.shape.on("click",function(we){we.evt.preventDefault(),typeof E.resizeToContentFunction=="function"?E.resizeToContentFunction([J]):w.undoRedo&&E.undoable?w.trigger("nodeediting.resizetocontent",[fe]):X({self:fe,firstTime:!0})})},G.prototype.unbindEvents=function(){this.shape.off("mousedown"),this.shape.off("click")};var V,I=function(J){if(J.isParent())return J.children().boundingBox().h;var fe=document.createElement("canvas").getContext("2d"),we=J.style();return fe.font=we["font-size"]+" "+we["font-family"],Math.max(1.1*fe.measureText("M").width,30)},z=function(J){if(J.isParent())return J.children().boundingBox().w;var fe=document.createElement("canvas").getContext("2d"),we=J.style();fe.font=we["font-size"]+" "+we["font-family"];var ge=we.label.split(`
`),me=0;return ge.forEach(function(ue){var ce=fe.measureText(ue).width;me<ce&&(me=ce)}),me},P=function(J){var fe=J.width(),we=J.height(),ge=I(J),me=z(J);if(me!==0&&typeof E.isFixedAspectRatioResizeMode=="function"&&E.isFixedAspectRatioResizeMode(J)){var ue=J.width()/J.height(),ce=me<ge?me:ge*ue,oe=me<ge?me/ue:ge;ce>=me&&oe>=ge?(me=ce,ge=oe):ge=(me=me<ge?ge*ue:me)<ge?ge:me/ue}return fe===me*_&&we===ge*_},q=function(J){return Math.max(1,w.zoom())*E.grappleSize*Math.min(J.width()/25,J.height()/25,1)},F=function(J){return Math.max(1,w.zoom())*E.grappleSize*1.25*Math.min(J.width()/25,J.height()/25,1)},U=function(J){return Math.max(1,w.zoom())*E.grappleSize*1.25*Math.min(J.width()/25,J.height()/25,1)},W=function(){return E.padding*Math.max(1,w.zoom())},X=function(J){var fe=J.self.parent,we=fe.isParent()?E.setCompoundMinWidth:E.setWidth,ge=fe.isParent()?E.setCompoundMinHeight:E.setHeight;if(J.firstTime){J.firstTime=null,J.oldWidth=fe.isParent()?E.getCompoundMinWidth(fe):fe.width(),J.oldHeight=fe.isParent()?E.getCompoundMinHeight(fe):fe.height(),fe.isParent()&&(J.oldBiasLeft=E.getCompoundMinWidthBiasLeft(fe)||"50%",J.oldBiasRight=E.getCompoundMinWidthBiasRight(fe)||"50%",J.oldBiasTop=E.getCompoundMinHeightBiasTop(fe)||"50%",J.oldBiasBottom=E.getCompoundMinHeightBiasBottom(fe)||"50%");var me=z(fe),ue=I(fe);if(me!==0){if(typeof E.isFixedAspectRatioResizeMode=="function"&&E.isFixedAspectRatioResizeMode(fe)){var ce=fe.width()/fe.height(),oe=me<ue?me:ue*ce,Ae=me<ue?me/ce:ue;oe>=me&&Ae>=ue?(me=oe,ue=Ae):ue=(me=me<ue?ue*ce:me)<ue?ue:me/ce}we(fe,me*_),ge(fe,ue*_),fe.isParent()&&(E.setCompoundMinWidthBiasLeft(fe,"50%"),E.setCompoundMinWidthBiasRight(fe,"50%"),E.setCompoundMinHeightBiasTop(fe,"50%"),E.setCompoundMinHeightBiasBottom(fe,"50%"))}return m&&m.update(),J}var Te=J.oldWidth,Ge=J.oldHeight;if(J.oldWidth=fe.isParent()?E.getCompoundMinWidth(fe):fe.width(),J.oldHeight=fe.isParent()?E.getCompoundMinHeight(fe):fe.height(),we(fe,Te),ge(fe,Ge),fe.isParent()){var Fe=J.oldBiasLeft||"50%",Re=J.oldBiasRight||"50%",ze=J.oldBiasTop||"50%",Ie=J.oldBiasBottom||"50%";J.oldBiasLeft=E.getCompoundMinWidthBiasLeft(fe)||"50%",J.oldBiasRight=E.getCompoundMinWidthBiasRight(fe)||"50%",J.oldBiasTop=E.getCompoundMinHeightBiasTop(fe)||"50%",J.oldBiasBottom=E.getCompoundMinHeightBiasBottom(fe)||"50%",E.setCompoundMinWidthBiasLeft(fe,Fe),E.setCompoundMinWidthBiasRight(fe,Re),E.setCompoundMinHeightBiasTop(fe,ze),E.setCompoundMinHeightBiasBottom(fe,Ie)}return m&&m.update(),J};function te(J,fe){var we=function(ge){for(var me={},ue=0;ue<ge.length;ue++)me[ge[ue].id()]=!0;return ge.filter(function(ce,oe){typeof ce=="number"&&(ce=oe);for(var Ae=ce.parent()[0];Ae!=null;){if(me[Ae.id()])return!1;Ae=Ae.parent()[0]}return!0})}(fe);we.union(we.descendants()).positions(function(ge,me){typeof ge=="number"&&(ge=me);var ue=ge.position("x"),ce=ge.position("y");return ge.isParent()?{x:ue,y:ce}:{x:ue+J.x,y:ce+J.y}})}var ne,he,ve=!1,Ce={37:!1,38:!1,39:!1,40:!1};if(ne={x:void 0,y:void 0},he={x:0,y:0},w.on("unselect","node",S=function(J){ne={x:void 0,y:void 0},he={x:0,y:0},m&&(m.remove(),m=null);var fe=w.nodes(":selected");fe.size()==1&&(m=new B(fe))}),w.on("select","node",A=function(J){var fe=J.target;m&&(m.remove(),m=null);var we=w.nodes(":selected");we.size()!=1||E.isNoControlsMode(fe)||(m=new B(we))}),w.on("remove","node",function(J){J.target.selected()&&S()}),w.on("add","node",function(J){J.target.selected()&&A(J)}),w.on("position","node",function(J){m&&(m.parent.position(),J.target.id()==m.parent.id()?m.update():he.x==ne.x&&he.y==ne.y||(he=m.parent.position(),m.update(),ne={x:he.x,y:he.y}))}),w.on("zoom",function(){m&&m.update()}),w.on("pan",function(){m&&m.update()}),w.on("afterUndo afterRedo",function(){m&&(m.update(),ne={x:void 0,y:void 0})}),E.enableMovementWithArrowKeys&&(document.addEventListener("keydown",function(J){if(typeof E.moveSelectedNodesOnKeyEvents=="function"?E.moveSelectedNodesOnKeyEvents():E.moveSelectedNodesOnKeyEvents){var fe=document.activeElement.tagName;if(fe!="TEXTAREA"&&fe!="INPUT"){switch(J.keyCode){case 37:case 39:case 38:case 40:case 32:J.preventDefault()}if(J.keyCode<37||J.keyCode>40)return;Ce[J.keyCode]=!0,J.preventDefault(),ve||(V=w.nodes(":selected"),w.trigger("nodeediting.movestart",[V]),ve=!0);var we=3;if(J.altKey&&J.shiftKey)return;J.altKey?we=1:J.shiftKey&&(we=10);var ge=0,me=0;ge+=Ce[39]?we:0,ge-=Ce[37]?we:0,me+=Ce[40]?we:0,te({x:ge,y:me-=Ce[38]?we:0},V)}}},!0),document.addEventListener("keyup",function(J){J.keyCode<"37"||J.keyCode>"40"||(J.preventDefault(),Ce[J.keyCode]=!1,(typeof E.moveSelectedNodesOnKeyEvents=="function"?E.moveSelectedNodesOnKeyEvents():E.moveSelectedNodesOnKeyEvents)&&(w.trigger("nodeediting.moveend",[V]),V=void 0,ve=!1))},!0)),w.undoRedo&&E.undoable){var Le,K;w.on("nodeediting.resizestart",function(J,fe,we){Le={node:we,css:{}},we.isParent()?(Le.css.minWidth=parseFloat(E.getCompoundMinWidth(we)),Le.css.minHeight=parseFloat(E.getCompoundMinHeight(we)),Le.css.biasLeft=E.getCompoundMinWidthBiasLeft(we),Le.css.biasRight=E.getCompoundMinWidthBiasRight(we),Le.css.biasTop=E.getCompoundMinHeightBiasTop(we),Le.css.biasBottom=E.getCompoundMinHeightBiasBottom(we)):(Le.css.width=we.width(),Le.css.height=we.height(),Le.position=p.extend({},we.position()))}),w.on("nodeediting.resizeend",function(J,fe,we){Le.firstTime=!0,w.undoRedo().do("resize",Le),Le=void 0}),w.on("nodeediting.movestart",function(J,fe){fe[0]!=null&&(K={firstTime:!0,firstNodePosition:{x:fe[0].position("x"),y:fe[0].position("y")},nodes:fe})}),w.on("nodeediting.moveend",function(J,fe){if(K!=null){var we=K.firstNodePosition;K.positionDiff={x:-fe[0].position("x")+we.x,y:-fe[0].position("y")+we.y},delete K.firstNodePosition,w.undoRedo().do("nodeediting.move",K),K=void 0}}),w.on("nodeediting.resizetocontent",function(J,fe){var we={self:fe,firstTime:!0};w.undoRedo().do("resizeToContent",we)});var le=function(J){if(J.firstTime)return m&&m.update(),delete J.firstTime,J;var fe=J.node,we={node:fe,css:{}};return fe.isParent()?(we.css.minWidth=parseFloat(E.getCompoundMinWidth(fe)),we.css.minHeight=parseFloat(E.getCompoundMinHeight(fe)),we.css.biasLeft=E.getCompoundMinWidthBiasLeft(fe),we.css.biasRight=E.getCompoundMinWidthBiasRight(fe),we.css.biasTop=E.getCompoundMinHeightBiasTop(fe),we.css.biasBottom=E.getCompoundMinHeightBiasBottom(fe)):(we.css.width=fe.width(),we.css.height=fe.height(),we.position=p.extend({},fe.position())),w.startBatch(),fe.isParent()?(E.setCompoundMinWidth(fe,J.css.minWidth),E.setCompoundMinHeight(fe,J.css.minHeight),E.setCompoundMinWidthBiasLeft(fe,J.css.biasLeft),E.setCompoundMinWidthBiasRight(fe,J.css.biasRight),E.setCompoundMinHeightBiasTop(fe,J.css.biasTop),E.setCompoundMinHeightBiasBottom(fe,J.css.biasBottom)):(fe.position(J.position),E.setWidth(fe,J.css.width),E.setHeight(fe,J.css.height)),w.endBatch(),m&&m.update(),we},Z=function(J){if(J.firstTime)return delete J.firstTime,J;var fe=J.nodes,we=J.positionDiff,ge={nodes:fe,positionDiff:{x:-we.x,y:-we.y}};return te(we,fe),ge};w.undoRedo().action("resize",le,le),w.undoRedo().action("nodeediting.move",Z,Z),w.undoRedo().action("resizeToContent",X,X)}var ie,re={refreshGrapples:function(){if(m){var J=m.parent;m.remove(),m=new B(J)}},removeGrapples:function(){m&&(m.remove(),m=null)}};return ie=re,v(w).api=ie,re})}function v(y,m){y.scratch("_cyNodeEditing")===void 0&&y.scratch("_cyNodeEditing",{});var w=y.scratch("_cyNodeEditing");return m===void 0?w:w[m]}},i.exports&&(i.exports=c),(s=(function(){return c}).call(a,o,a,i))===void 0||(i.exports=s),typeof cytoscape<"u"&&typeof jQuery<"u"&&typeof Konva<"u"&&c(cytoscape,jQuery,Konva)}},n={};return function i(a){var o=n[a];if(o!==void 0)return o.exports;var s=n[a]={exports:{}};return t[a](s,s.exports,i),s.exports}(265)})()})})(W4);var OZ=W4.exports;const DZ=qi(OZ);function IZ(r){DZ(ir,window.$,V4);let e=Lr(jr);return oo(()=>{e.nodeEditing({resizeToContentCueImage:"",undoable:!0})}),[]}class RZ extends Ir{constructor(e){super(),Dr(this,e,IZ,null,Nr,{})}}function FZ(r){return ir("collection","init",function(){return this.addClass(Yo).addClass(oh).addClass(Wi),this}),ir("collection","free",function(){return this.hasClass(Yo)}),ir("collection","addLabel",function(e){return this.addLabelImport(e).removeClass(pu),this}),ir("collection","addLabelImport",function(e){return this.data("label",e).addClass(vl).removeClass(oh),this}),ir("collection","removeLabel",function(){return this.removeClass(vl).addClass(oh).data("label",void 0),this}),ir("collection","setLabel",function(e){return this.data("label",e),this}),ir("collection","getLabel",function(){return this.data("label")}),ir("collection","fixPara",function(e){return this.data("value",e).removeClass(Yo).removeClass(Cs).removeClass(wx).addClass(Ko),this}),ir("collection","freePara",function(){return this.removeClass(Ko).removeClass(Cs).removeClass(pu).addClass(Yo),this}),ir("collection","setFree",function(){return this.removeClass(Ko).removeClass(Cs).addClass(Yo),this}),ir("collection","forceFreePara",function(){return this.removeClass(Yo).removeClass(Ko).removeClass(pu).addClass(Cs),this}),ir("collection","revert",function(){const e=this.source().id(),t=this.target().id();return this.move({source:t,target:e}),this}),ir("collection","setUndirected",function(){return this.removeClass(Ns).addClass(Ps),this}),ir("collection","setDirected",function(){return this.removeClass(Ps).addClass(Ns),this}),ir("collection","isUndirected",function(){return this.hasClass(Ps)}),ir("collection","isDirected",function(){return this.hasClass(Ns)}),ir("collection","makeLoop",function(){return this.addClass(Cp),this}),ir("collection","myIsLoop",function(){return this.hasClass(Cp)}),ir("collection","makeMeanEdge",function(){return this.data("isMean","1"),this}),ir("collection","isMean",function(){return this.data("isMean")==="1"||this.isConstant()}),ir("collection","makeOtherEdge",function(){return this.data("isMean","0"),this}),ir("collection","isFixed",function(){return this.hasClass(Ko)}),ir("collection","isFree",function(){return this.hasClass(Yo)||this.hasClass(Cs)}),ir("collection","isForceFree",function(){return this.hasClass(Cs)}),ir("collection","hasLabel",function(){return this.hasClass(vl)}),ir("collection","isModifiedLavaan",function(){return this.hasClass(pu)}),ir("collection","markModifiedLavaan",function(){return this.addClass(pu),this}),ir("collection","markAddedLavaan",function(){return this.addClass(wu).removeClass(Wi),this}),ir("collection","markAddedUser",function(){return this.removeClass(wu).addClass(Wi),this}),ir("collection","isUserAdded",function(){return this.hasClass(Wi)}),ir("collection","isLavaanAdded",function(){return this.hasClass(wu)}),ir("collection","getValue",function(){return this.data("value")}),ir("collection","invalidate",function(){return this.removeClass(lm),this}),ir("collection","validate",function(){return this.addClass(lm),this}),ir("collection","isValid",function(){return this.hasClass(lm)}),ir("collection","revertLavaanFix",function(){this.freePara().removeClass(pu)}),ir("collection","removeEstimates",function(){return this.removeData("est").removeClass(wx),this}),ir("collection","link",function(){return this.addClass(Cf),this}),ir("collection","unlink",function(){return this.removeClass(Cf),this}),ir("collection","isLinked",function(){return this.hasClass(Cf)}),ir("collection","isLatent",function(){return this.hasClass(Li)}),ir("collection","makeLatent",function(){return this.removeClass(Ei).addClass(Li).removeClass(Cf),this}),ir("collection","makeObserved",function(){return this.addClass(Ei).removeClass(Li),this}),ir("collection","makeOrdered",function(){return this.removeClass(Ap).addClass(ap),this}),ir("collection","isOrdered",function(){return this.hasClass(ap)}),ir("collection","makeContinous",function(){return this.addClass(Ap).removeClass(ap),this}),ir("collection","isConstant",function(){return this.hasClass(es)}),ir("collection","isObserved",function(){return this.hasClass(Ei)}),ir("core","getLavaanNodes",function(){return this.nodes(`.${wu}`)}),ir("core","getUserEdges",function(){return this.edges(`.${Wi}`)}),ir("core","getLavaanModifiedEdges",function(){return this.edges(`.${pu}`)}),ir("core","getLatentNodes",function(){return this.nodes(function(e){return e.hasClass(Li)})}),[]}class BZ extends Ir{constructor(e){super(),Dr(this,e,FZ,null,Nr,{})}}var Y4={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(self,function(){return(()=>{var t={347:(i,a,o)=>{var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},u=o(218),l=o(259),f=o(171),c=o(961),d=0;i.exports=function(h,p){var g=h;l.options=h;var b,v,y,m,w,S,A,_,E,k,M,T,C,R,x,B,D,O,G,V="cy-edge-bend-editing-cxt-add-bend-point"+d,I="cy-edge-bend-editing-cxt-remove-bend-point"+d,z="cy-edge-bend-editing-cxt-remove-multiple-bend-point"+d,P="cy-edge-control-editing-cxt-add-control-point"+d,q="cy-edge-control-editing-cxt-remove-control-point"+d,F="cy-edge-bend-editing-cxt-remove-multiple-control-point"+d,U=null,W=null,X=!1,te={init:function(){c(p,l,h);var ne=h,he=$(this),ve="cy-node-edge-editing-stage"+d;d++;var Ce,Le,K=$('<div id="'+ve+'"></div>');he.find("#"+ve).length<1&&he.append(K),(Ce=Konva.stages.length<d?new Konva.Stage({id:"node-edge-editing-stage",container:ve,width:he.width(),height:he.height()}):Konva.stages[d-1]).getChildren().length<1?(Le=new Konva.Layer,Ce.add(Le)):Le=Ce.getChildren()[0];var le={edge:void 0,edgeType:"none",anchors:[],touchedAnchor:void 0,touchedAnchorIndex:void 0,bindListeners:function(nt){nt.on("mousedown touchstart",this.eMouseDown)},unbindListeners:function(nt){nt.off("mousedown touchstart",this.eMouseDown)},eMouseDown:function(nt){p.autounselectify(!1),X=!0,le.touchedAnchor=nt.target,G=!1,le.edge.unselect();var Xe=l.syntax[le.edgeType].weight,ct=l.syntax[le.edgeType].distance,zt=le.edge;dt={edge:zt,type:le.edgeType,weights:zt.data(Xe)?[].concat(zt.data(Xe)):[],distances:zt.data(ct)?[].concat(zt.data(ct)):[]},D=p.style()._private.coreStyle["active-bg-opacity"]?p.style()._private.coreStyle["active-bg-opacity"].value:.15,p.style().selector("core").style("active-bg-opacity",0).update(),Ve(),p.autoungrabify(!0),Le.getStage().on("contentTouchend contentMouseup",le.eMouseUp),Le.getStage().on("contentMouseout",le.eMouseOut)},eMouseUp:function(nt){X=!1,le.touchedAnchor=void 0,G=!1,le.edge.select(),p.style().selector("core").style("active-bg-opacity",D).update(),We(),p.autounselectify(!0),p.autoungrabify(!1),Le.getStage().off("contentTouchend contentMouseup",le.eMouseUp),Le.getStage().off("contentMouseout",le.eMouseOut)},eMouseOut:function(nt){G=!0},clearAnchorsExcept:function(){var nt=this,Xe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,ct=!1;this.anchors.forEach(function(zt,rr){Xe&&zt===Xe?ct=!0:(nt.unbindListeners(zt),zt.destroy())}),ct?this.anchors=[Xe]:(this.anchors=[],this.edge=void 0,this.edgeType="none")},renderAnchorShapes:function(nt){if(this.edge=nt,this.edgeType=l.getEdgeType(nt),nt.hasClass("edgebendediting-hasbendpoints")||nt.hasClass("edgecontrolediting-hascontrolpoints")){for(var Xe=l.getAnchorsAsArray(nt),ct=.65*Re(nt),zt=(nt.source().position(),nt.target().position(),0);Xe&&zt<Xe.length;zt+=2){var rr=Xe[zt],Zt=Xe[zt+1];this.renderAnchorShape(rr,Zt,ct)}Le.draw()}},renderAnchorShape:function(nt,Xe,ct){var zt=Ge({x:nt-ct/2,y:Xe-ct/2});ct*=p.zoom();var rr=new Konva.Rect({x:zt.x,y:zt.y,width:ct,height:ct,fill:"black",strokeWidth:0,draggable:!0});this.anchors.push(rr),this.bindListeners(rr),Le.add(rr)}},Z=function(nt,Xe){var ct=nt.target||nt.cyTarget;if(!l.isIgnoredEdge(ct)){var zt,rr,Zt,br,Gr=l.getEdgeType(ct);Gr==="none"?(zt=[],rr=[]):(Zt=l.syntax[Gr].weight,br=l.syntax[Gr].distance,zt=ct.data(Zt)?[].concat(ct.data(Zt)):ct.data(Zt),rr=ct.data(br)?[].concat(ct.data(br)):ct.data(br));var Rr={edge:ct,type:Gr,weights:zt,distances:rr};l.addAnchorPoint(void 0,void 0,Xe),Te().undoable&&p.undoRedo().do("changeAnchorPoints",Rr)}Fe(),ct.select()},ie=function(nt){var Xe=le.edge,ct=l.getEdgeType(Xe);if(!l.edgeTypeNoneShouldntHappen(ct,"UiUtilities.js, cxtRemoveAnchorFcn")){var zt={edge:Xe,type:ct,weights:[].concat(Xe.data(l.syntax[ct].weight)),distances:[].concat(Xe.data(l.syntax[ct].distance))};l.removeAnchor(),Te().undoable&&p.undoRedo().do("changeAnchorPoints",zt),setTimeout(function(){Fe(),Xe.select()},50)}},re=function(nt){var Xe=le.edge,ct=l.getEdgeType(Xe),zt={edge:Xe,type:ct,weights:[].concat(Xe.data(l.syntax[ct].weight)),distances:[].concat(Xe.data(l.syntax[ct].distance))};l.removeAllAnchors(),Te().undoable&&p.undoRedo().do("changeAnchorPoints",zt),setTimeout(function(){Fe(),Xe.select()},50)},J=ne.handleReconnectEdge,fe=ne.validateEdge,we=ne.actOnUnsuccessfulReconnection,ge=[{id:V,content:ne.addBendMenuItemTitle,selector:"edge",onClickFunction:function(nt){Z(nt,"bend")},hasTrailingDivider:ne.useTrailingDividersAfterContextMenuOptions},{id:I,content:ne.removeBendMenuItemTitle,selector:"edge",onClickFunction:ie,hasTrailingDivider:ne.useTrailingDividersAfterContextMenuOptions},{id:z,content:ne.removeAllBendMenuItemTitle,selector:ne.enableMultipleAnchorRemovalOption&&":selected.edgebendediting-hasmultiplebendpoints",onClickFunction:re,hasTrailingDivider:ne.useTrailingDividersAfterContextMenuOptions},{id:P,content:ne.addControlMenuItemTitle,selector:"edge",coreAsWell:!0,onClickFunction:function(nt){Z(nt,"control")},hasTrailingDivider:ne.useTrailingDividersAfterContextMenuOptions},{id:q,content:ne.removeControlMenuItemTitle,selector:"edge",coreAsWell:!0,onClickFunction:ie,hasTrailingDivider:ne.useTrailingDividersAfterContextMenuOptions},{id:F,content:ne.removeAllControlMenuItemTitle,selector:ne.enableMultipleAnchorRemovalOption&&":selected.edgecontrolediting-hasmultiplecontrolpoints",onClickFunction:re,hasTrailingDivider:ne.useTrailingDividersAfterContextMenuOptions}];if(p.contextMenus){var me=p.contextMenus("get");me.isActive()?me.appendMenuItems(ge):p.contextMenus({menuItems:ge})}var ue=u(function(){K.attr("height",he.height()).attr("width",he.width()).css({position:"absolute",top:0,left:0,"z-index":Te().zIndex}),setTimeout(function(){var nt=K.offset(),Xe=he.offset();K.css({top:-(nt.top-Xe.top),left:-(nt.left-Xe.left)}),Le.getStage().setWidth(he.width()),Le.getStage().setHeight(he.height()),p&&Fe()},0)},250);function ce(){ue()}ce(),$(window).bind("resize",function(){ce()});var oe,Ae=he.data("cyedgeediting");function Te(){return oe||(oe=he.data("cyedgeediting").options)}function Ge(nt){var Xe=p.pan(),ct=p.zoom();return{x:nt.x*ct+Xe.x,y:nt.y*ct+Xe.y}}function Fe(){le.clearAnchorsExcept(le.touchedAnchor),U!==null&&(U.destroy(),U=null),W!==null&&(W.destroy(),W=null),Le.draw(),O&&(le.renderAnchorShapes(O),function(nt){if(nt){var Xe=l.getAnchorsAsArray(nt);Xe===void 0&&(Xe=[]);var ct=nt.sourceEndpoint(),zt=nt.targetEndpoint();if(ct.x&&zt.x&&(Xe.unshift(ct.y),Xe.unshift(ct.x),Xe.push(zt.x),Xe.push(zt.y),Xe)){var rr={x:Xe[0],y:Xe[1]},Zt={x:Xe[Xe.length-2],y:Xe[Xe.length-1]},br={x:Xe[2],y:Xe[3]},Gr={x:Xe[Xe.length-4],y:Xe[Xe.length-3]};(function(Rr,Fr,gr,Zr,gn){var Hn=Fr.x-gr/2,jn=Fr.y-gr/2,di=Zr.x-gr/2,mn=Zr.y-gr/2,Gi=gn.x-gr/2,bi=gn.y-gr/2,Fn=Ge({x:Rr.x-gr/2,y:Rr.y-gr/2}),yn=Ge({x:Hn,y:jn});gr=gr*p.zoom()/2;var xn=Ge({x:di,y:mn}),$i=Ge({x:Gi,y:bi}),cn=gr,vr=Math.sqrt(Math.pow(xn.x-Fn.x,2)+Math.pow(xn.y-Fn.y,2)),Pr=Fn.x+cn/vr*(xn.x-Fn.x),Nn=Fn.y+cn/vr*(xn.y-Fn.y),zr=Math.sqrt(Math.pow($i.x-yn.x,2)+Math.pow($i.y-yn.y,2)),Zn=yn.x+cn/zr*($i.x-yn.x),la=yn.y+cn/zr*($i.y-yn.y);U===null&&(U=new Konva.Circle({x:Pr+gr,y:Nn+gr,radius:gr,fill:"black"})),W===null&&(W=new Konva.Circle({x:Zn+gr,y:la+gr,radius:gr,fill:"black"})),Le.add(U),Le.add(W),Le.draw()})(rr,Zt,.65*Re(nt),br,Gr)}}}(O))}function Re(nt){var Xe=Te().anchorShapeSizeFactor;return parseFloat(nt.css("width"))<=2.5?2.5*Xe:parseFloat(nt.css("width"))*Xe}function ze(nt,Xe,ct,zt,rr){return nt>=zt-ct/2&&nt<=zt+ct/2&&Xe>=rr-ct/2&&Xe<=rr+ct/2}function Ie(nt,Xe,ct){var zt=l.getEdgeType(ct);if(zt==="none"||ct.data(l.syntax[zt].weight)==null||ct.data(l.syntax[zt].weight).length==0)return-1;for(var rr=l.getAnchorsAsArray(ct),Zt=Re(ct),br=0;rr&&br<rr.length;br+=2)if(ze(nt,Xe,Zt,rr[br],rr[br+1]))return br/2;return-1}function Ve(){R=p.panningEnabled(),x=p.zoomingEnabled(),B=p.boxSelectionEnabled(),p.zoomingEnabled(!1).panningEnabled(!1).boxSelectionEnabled(!1)}function We(){p.zoomingEnabled(x).panningEnabled(R).boxSelectionEnabled(B)}Ae==null&&(Ae={}),Ae.options=ne;var Ze=u(function(nt,Xe,ct,zt){var rr=nt.data(l.syntax[Xe].weight),Zt=nt.data(l.syntax[Xe].distance),br=l.convertToRelativePosition(nt,zt);rr[ct]=br.weight,Zt[ct]=br.distance,nt.data(l.syntax[Xe].weight,rr),nt.data(l.syntax[Xe].distance,Zt)},5);R=p.panningEnabled(),x=p.zoomingEnabled(),B=p.boxSelectionEnabled();var at,ft,wt,dt,vt,Et,Mt,mt,Dt,Lt=(hr=p.edges(":selected")).length;Lt===1&&(O=hr[0]),p.bind("zoom pan",m=function(){O&&Fe()}),p.on("data","edge",C=function(){O&&Fe()}),p.on("style","edge.edgebendediting-hasbendpoints:selected, edge.edgecontrolediting-hascontrolpoints:selected",b=function(){setTimeout(function(){Fe()},50)}),p.on("remove","edge",v=function(){if(this.selected()){if(Lt-=1,p.startBatch(),O&&O.removeClass("cy-edge-editing-highlight"),Lt===1){var nt=p.edges(":selected");nt.length===1?(O=nt[0]).addClass("cy-edge-editing-highlight"):O=void 0}else O=void 0;p.endBatch()}Fe()}),p.on("add","edge",y=function(){this.selected()&&(Lt+=1,p.startBatch(),O&&O.removeClass("cy-edge-editing-highlight"),Lt===1?(O=this).addClass("cy-edge-editing-highlight"):O=void 0,p.endBatch()),Fe()}),p.on("select","edge",w=function(){var nt=this;nt.target().connectedEdges().length!=0&&nt.source().connectedEdges().length!=0&&(Lt+=1,p.startBatch(),O&&O.removeClass("cy-edge-editing-highlight"),Lt===1?(O=nt).addClass("cy-edge-editing-highlight"):O=void 0,p.endBatch(),Fe())}),p.on("unselect","edge",S=function(){if(Lt-=1,p.startBatch(),O&&O.removeClass("cy-edge-editing-highlight"),Lt===1){var nt=p.edges(":selected");nt.length===1?(O=nt[0]).addClass("cy-edge-editing-highlight"):O=void 0}else O=void 0;p.endBatch(),Fe()});var Tt,nr,$t,pt,hr,Rt=!1;p.on("tapstart",A=function(nt){ft=nt.position||nt.cyPosition}),p.on("tapstart","edge",_=function(nt){var Xe=this;if(O&&O.id()===Xe.id()){wt=Xe,l.getEdgeType(Xe);var ct=function(Zt,br,Gr){var Rr=Re(Gr),Fr=Gr._private.rscratch.allpts,gr={x:Fr[0],y:Fr[1]},Zr={x:Fr[Fr.length-2],y:Fr[Fr.length-1]};return Ge(gr),Ge(Zr),ze(Zt,br,Rr,gr.x,gr.y)?0:ze(Zt,br,Rr,Zr.x,Zr.y)?1:-1}(ft.x,ft.y,Xe);if(ct==0||ct==1){Xe.unselect(),Et=ct,mt=ct==0?wt.source():wt.target();var zt=ct==0?"source":"target",rr=f.disconnectEdge(wt,p,nt.renderedPosition,zt);Mt=rr.dummyNode,wt=rr.edge,Ve()}else at=void 0,vt=!0}else vt=!1}),p.on("drag","node",T=function(){O&&Fe()}),p.on("tapdrag",E=function(nt){p.edges(":selected").length>0&&p.autounselectify(!1);var Xe=wt;if(wt===void 0||!l.isIgnoredEdge(Xe)){var ct=l.getEdgeType(Xe);if(vt&&ne.enableCreateAnchorOnDrag&&!X&&ct!=="none"){var zt=l.syntax[ct].weight,rr=l.syntax[ct].distance;dt={edge:Xe,type:ct,weights:Xe.data(zt)?[].concat(Xe.data(zt)):[],distances:Xe.data(rr)?[].concat(Xe.data(rr)):[]},Xe.unselect(),at=l.addAnchorPoint(Xe,ft),wt=Xe,vt=void 0,Rt=!0,Ve()}if(X||wt!==void 0&&(at!==void 0||Et!==void 0)){var Zt=nt.position||nt.cyPosition;Et!=-1&&Mt?Mt.position(Zt):at!=null?Ze(Xe,ct,at,Zt):X&&(le.touchedAnchorIndex===void 0&&ft&&(le.touchedAnchorIndex=Ie(ft.x,ft.y,le.edge)),le.touchedAnchorIndex!==void 0&&Ze(le.edge,le.edgeType,le.touchedAnchorIndex,Zt)),nt.target&&nt.target[0]&&nt.target.isNode()&&(Dt=nt.target)}}}),p.on("tapend",k=function(nt){G&&Le.getStage().fire("contentMouseup");var Xe=wt||le.edge;if(Xe!==void 0){var ct=le.touchedAnchorIndex;if(ct!=null){var zt,rr=Xe.source().position("x"),Zt=Xe.source().position("y"),br=Xe.target().position("x"),Gr=Xe.target().position("y"),Rr=l.getAnchorsAsArray(Xe),Fr=[rr,Zt].concat(Rr).concat([br,Gr]),gr=ct+1,Zr=gr-1,gn=gr+1,Hn={x:Fr[2*gr],y:Fr[2*gr+1]},jn={x:Fr[2*Zr],y:Fr[2*Zr+1]},di={x:Fr[2*gn],y:Fr[2*gn+1]};if(Hn.x===jn.x&&Hn.y===jn.y||Hn.x===jn.x&&Hn.y===jn.y)zt=!0;else{var mn,Gi=(jn.y-di.y)/(jn.x-di.x),bi={srcPoint:jn,tgtPoint:di,m1:Gi,m2:-1/Gi},Fn=l.getIntersection(Xe,Hn,bi),yn=Math.sqrt(Math.pow(Hn.x-Fn.x,2)+Math.pow(Hn.y-Fn.y,2));(mn=l.getEdgeType(Xe))==="bend"&&yn<Te().bendRemovalSensitivity&&(zt=!0)}zt&&l.removeAnchor(Xe,ct)}else if(Mt!=null&&(Et==0||Et==1)){var xn=mt,$i="valid",cn=Et==0?"source":"target";if(Dt){var vr=Et==0?Dt:Xe.source(),Pr=Et==1?Dt:Xe.target();typeof fe=="function"&&($i=fe(Xe,vr,Pr)),xn=$i==="valid"?Dt:mt}if(vr=Et==0?xn:Xe.source(),Pr=Et==1?xn:Xe.target(),Xe=f.connectEdge(Xe,mt,cn),mt.id()!==xn.id())if(typeof J=="function"){var Nn=J(vr.id(),Pr.id(),Xe.data());if(Nn&&(f.copyEdge(Xe,Nn),l.initAnchorPoints(Te().bendPositionsFunction,Te().controlPositionsFunction,[Nn])),Nn&&Te().undoable){var zr={newEdge:Nn,oldEdge:Xe};p.undoRedo().do("removeReconnectedEdge",zr),Xe=Nn}else Nn&&(p.remove(Xe),Xe=Nn)}else{var Zn=Et==0?{source:xn.id()}:{target:xn.id()},la=Et==0?{source:mt.id()}:{target:mt.id()};if(Te().undoable&&xn.id()!==mt.id()){var uo={edge:Xe,location:Zn,oldLoc:la};Xe=p.undoRedo().do("reconnectEdge",uo).edge}}$i!=="valid"&&typeof we=="function"&&we(),Xe.select(),p.remove(Mt)}}(mn=l.getEdgeType(Xe))==="none"&&(mn="bend"),le.touchedAnchorIndex!==void 0||Rt||(dt=void 0);var Oo=l.syntax[mn].weight;Xe!==void 0&&dt!==void 0&&(Xe.data(Oo)?Xe.data(Oo).toString():null)!=dt.weights.toString()&&(Rt&&(Xe.select(),p.autounselectify(!0)),Te().undoable&&p.undoRedo().do("changeAnchorPoints",dt)),at=void 0,wt=void 0,dt=void 0,vt=void 0,Et=void 0,Mt=void 0,mt=void 0,Dt=void 0,ft=void 0,Rt=!1,le.touchedAnchorIndex=void 0,We(),setTimeout(function(){Fe()},50)}),p.on("edgeediting.movestart",function(nt,Xe){pt=!1,Xe[0]!=null&&Xe.forEach(function(ct){l.getAnchorsAsArray(ct)==null||pt||(nr={x:l.getAnchorsAsArray(ct)[0],y:l.getAnchorsAsArray(ct)[1]},Tt={firstTime:!0,firstAnchorPosition:{x:nr.x,y:nr.y},edges:Xe},$t=ct,pt=!0)})}),p.on("edgeediting.moveend",function(nt,Xe){if(Tt!=null){var ct=Tt.firstAnchorPosition,zt={x:l.getAnchorsAsArray($t)[0],y:l.getAnchorsAsArray($t)[1]};Tt.positionDiff={x:-zt.x+ct.x,y:-zt.y+ct.y},delete Tt.firstAnchorPosition,Te().undoable&&p.undoRedo().do("moveAnchorPoints",Tt),Tt=void 0}}),p.on("cxttap",M=function(nt){var Xe,ct,zt=nt.target||nt.cyTarget,rr=!1;try{rr=zt.isEdge()}catch{}rr?(Xe=zt,ct=l.getEdgeType(Xe)):(Xe=le.edge,ct=le.edgeType);var Zt=p.contextMenus("get");if(!O||O.id()!=Xe.id()||l.isIgnoredEdge(Xe)||O!==Xe)return Zt.hideMenuItem(I),Zt.hideMenuItem(V),Zt.hideMenuItem(q),void Zt.hideMenuItem(P);var br=nt.position||nt.cyPosition,Gr=Ie(br.x,br.y,Xe);Gr==-1?(Zt.hideMenuItem(I),Zt.hideMenuItem(q),ct==="control"&&rr?(Zt.showMenuItem(P),Zt.hideMenuItem(V)):ct==="bend"&&rr?(Zt.showMenuItem(V),Zt.hideMenuItem(P)):rr?(Zt.showMenuItem(V),Zt.showMenuItem(P)):(Zt.hideMenuItem(V),Zt.hideMenuItem(P)),l.currentCtxPos=br):(Zt.hideMenuItem(V),Zt.hideMenuItem(P),ct==="control"?(Zt.showMenuItem(q),Zt.hideMenuItem(I),ne.enableMultipleAnchorRemovalOption&&Xe.hasClass("edgecontrolediting-hasmultiplecontrolpoints")&&Zt.showMenuItem(F)):ct==="bend"?(Zt.showMenuItem(I),Zt.hideMenuItem(q)):(Zt.hideMenuItem(I),Zt.hideMenuItem(q),Zt.hideMenuItem(F)),l.currentAnchorIndex=Gr),l.currentCtxEdge=Xe}),p.on("cyedgeediting.changeAnchorPoints","edge",function(){p.startBatch(),p.edges().unselect(),p.trigger("bendPointMovement"),p.endBatch(),Fe()});var Bt=!1,ur={37:!1,38:!1,39:!1,40:!1};document.addEventListener("keydown",function(nt){if(typeof Te().moveSelectedAnchorsOnKeyEvents=="function"?Te().moveSelectedAnchorsOnKeyEvents():Te().moveSelectedAnchorsOnKeyEvents){var Xe,ct,zt=document.activeElement.tagName;if(zt!="TEXTAREA"&&zt!="INPUT"){switch(nt.keyCode){case 37:case 39:case 38:case 40:case 32:nt.preventDefault()}if(nt.keyCode<"37"||nt.keyCode>"40"||(ur[nt.keyCode]=!0,p.edges(":selected").length!=p.elements(":selected").length||p.edges(":selected").length!=1))return;Bt||(hr=p.edges(":selected"),p.trigger("edgeediting.movestart",[hr]),Bt=!0);var rr=3;if(nt.altKey&&nt.shiftKey)return;nt.altKey?rr=1:nt.shiftKey&&(rr=10);var Zt=0,br=0;Zt+=ur[39]?rr:0,Zt-=ur[37]?rr:0,br+=ur[40]?rr:0,br-=ur[38]?rr:0,Xe={x:Zt,y:br},(ct=hr).forEach(function(Gr){var Rr=l.getAnchorsAsArray(Gr),Fr=[];if(Rr!=null){for(var gr=0;gr<Rr.length;gr+=2)Fr.push({x:Rr[gr]+Xe.x,y:Rr[gr+1]+Xe.y});var Zr=l.getEdgeType(Gr);if(l.edgeTypeNoneShouldntHappen(Zr,"UiUtilities.js, moveAnchorPoints"))return;Zr==="bend"?h.bendPointPositionsSetterFunction(Gr,Fr):Zr==="control"&&h.controlPointPositionsSetterFunction(Gr,Fr)}}),l.initAnchorPoints(Te().bendPositionsFunction,Te().controlPositionsFunction,ct),p.trigger("bendPointMovement")}}},!0),document.addEventListener("keyup",function(nt){nt.keyCode<"37"||nt.keyCode>"40"||(nt.preventDefault(),ur[nt.keyCode]=!1,(typeof Te().moveSelectedAnchorsOnKeyEvents=="function"?Te().moveSelectedAnchorsOnKeyEvents():Te().moveSelectedAnchorsOnKeyEvents)&&(p.trigger("edgeediting.moveend",[hr]),hr=void 0,Bt=!1))},!0),he.data("cyedgeediting",Ae)},unbind:function(){p.off("remove","node",v).off("add","node",y).off("style","edge.edgebendediting-hasbendpoints:selected, edge.edgecontrolediting-hascontrolpoints:selected",b).off("select","edge",w).off("unselect","edge",S).off("tapstart",A).off("tapstart","edge",_).off("tapdrag",E).off("tapend",k).off("cxttap",M).off("drag","node",T).off("data","edge",C),p.unbind("zoom pan",m)}};return te[g]?te[g].apply($(p.container()),Array.prototype.slice.call(arguments,1)):(g===void 0?"undefined":s(g))!="object"&&g?($.error("No such function `"+g+"` for cytoscape.js-edge-editing"),$(this)):te.init.apply($(p.container()),arguments)}},259:i=>{var a={options:void 0,currentCtxEdge:void 0,currentCtxPos:void 0,currentAnchorIndex:void 0,ignoredClasses:void 0,setIgnoredClasses:function(o){this.ignoredClasses=o},syntax:{bend:{edge:"segments",class:"edgebendediting-hasbendpoints",multiClass:"edgebendediting-hasmultiplebendpoints",weight:"cyedgebendeditingWeights",distance:"cyedgebendeditingDistances",weightCss:"segment-weights",distanceCss:"segment-distances"},control:{edge:"unbundled-bezier",class:"edgecontrolediting-hascontrolpoints",multiClass:"edgecontrolediting-hasmultiplecontrolpoints",weight:"cyedgecontroleditingWeights",distance:"cyedgecontroleditingDistances",weightCss:"control-point-weights",distanceCss:"control-point-distances"}},getEdgeType:function(o){return o?o.hasClass(this.syntax.bend.class)?"bend":o.hasClass(this.syntax.control.class)?"control":o.css("curve-style")===this.syntax.bend.edge?"bend":o.css("curve-style")===this.syntax.control.edge?"control":this.options.bendPositionsFunction(o)&&this.options.bendPositionsFunction(o).length>0?"bend":this.options.controlPositionsFunction(o)&&this.options.controlPositionsFunction(o).length>0?"control":"none":"none"},initAnchorPoints:function(o,s,u){for(var l=0;l<u.length;l++){var f=u[l],c=this.getEdgeType(f);if(c!=="none"&&!this.isIgnoredEdge(f)){var d;c==="bend"?d=o.apply(this,f):c==="control"&&(d=s.apply(this,f));var h={weights:[],distances:[]};if(d)h=this.convertToRelativePositions(f,d);else{var p=f.data(this.syntax[c].weight),g=f.data(this.syntax[c].distance);p&&g&&(h={weights:p,distances:g})}h.distances.length>0?(f.data(this.syntax[c].weight,h.weights),f.data(this.syntax[c].distance,h.distances),f.addClass(this.syntax[c].class),h.distances.length>1&&f.addClass(this.syntax[c].multiClass)):(f.data(this.syntax[c].weight,[]),f.data(this.syntax[c].distance,[]),f.hasClass(this.syntax[c].class)&&f.removeClass(this.syntax[c].class),f.hasClass(this.syntax[c].multiClass)&&f.removeClass(this.syntax[c].multiClass))}}},isIgnoredEdge:function(o){var s=o.source().position("x"),u=o.source().position("y"),l=o.target().position("x"),f=o.target().position("y");if(s==l&&u==f||o.source().id()==o.target().id())return!0;for(var c=0;this.ignoredClasses&&c<this.ignoredClasses.length;c++)if(o.hasClass(this.ignoredClasses[c]))return!0;return!1},getLineDirection:function(o,s){return o.y==s.y&&o.x<s.x?1:o.y<s.y&&o.x<s.x?2:o.y<s.y&&o.x==s.x?3:o.y<s.y&&o.x>s.x?4:o.y==s.y&&o.x>s.x?5:o.y>s.y&&o.x>s.x?6:o.y>s.y&&o.x==s.x?7:8},getSrcTgtPointsAndTangents:function(o){var s=o.source(),u=o.target(),l=(u.position(),s.position(),s.position()),f=u.position(),c=(f.y-l.y)/(f.x-l.x);return{m1:c,m2:-1/c,srcPoint:l,tgtPoint:f}},getIntersection:function(o,s,u){u===void 0&&(u=this.getSrcTgtPointsAndTangents(o));var l,f,c=u.srcPoint,d=(u.tgtPoint,u.m1),h=u.m2;if(d==1/0||d==-1/0)l=c.x,f=s.y;else if(d==0)l=s.x,f=c.y;else{var p=c.y-d*c.x;f=d*(l=(s.y-h*s.x-p)/(d-h))+p}return{x:l,y:f}},getAnchorsAsArray:function(o){var s=this.getEdgeType(o);if(s!=="none"&&o.css("curve-style")===this.syntax[s].edge){for(var u=[],l=o.pstyle(this.syntax[s].weightCss)?o.pstyle(this.syntax[s].weightCss).pfValue:[],f=o.pstyle(this.syntax[s].distanceCss)?o.pstyle(this.syntax[s].distanceCss).pfValue:[],c=Math.min(l.length,f.length),d=o.source().position(),h=o.target().position(),p=h.y-d.y,g=h.x-d.x,b=Math.sqrt(g*g+p*p),v={x:g/b,y:p/b},y=-v.y,m=v.x,w=0;w<c;w++){var S=l[w],A=f[w],_=1-S,E=S,k={x1:d.x,x2:h.x,y1:d.y,y2:h.y},M={x:k.x1*_+k.x2*E,y:k.y1*_+k.y2*E};u.push(M.x+y*A,M.y+m*A)}return u}},convertToRelativePosition:function(o,s,u){u===void 0&&(u=this.getSrcTgtPointsAndTangents(o));var l,f=this.getIntersection(o,s,u),c=f.x,d=f.y,h=u.srcPoint,p=u.tgtPoint;l=c!=h.x?(c-h.x)/(p.x-h.x):d!=h.y?(d-h.y)/(p.y-h.y):0;var g=Math.sqrt(Math.pow(d-s.y,2)+Math.pow(c-s.x,2)),b=this.getLineDirection(h,p),v=this.getLineDirection(f,s);return b-v!=-2&&b-v!=6&&g!=0&&(g*=-1),{weight:l,distance:g}},convertToRelativePositions:function(o,s){for(var u=this.getSrcTgtPointsAndTangents(o),l=[],f=[],c=0;s&&c<s.length;c++){var d=s[c],h=this.convertToRelativePosition(o,d,u);l.push(h.weight),f.push(h.distance)}return{weights:l,distances:f}},getDistancesString:function(o,s){for(var u="",l=o.data(this.syntax[s].distance),f=0;l&&f<l.length;f++)u=u+" "+l[f];return u},getWeightsString:function(o,s){for(var u="",l=o.data(this.syntax[s].weight),f=0;l&&f<l.length;f++)u=u+" "+l[f];return u},addAnchorPoint:function(o,s){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;o!==void 0&&s!==void 0||(o=this.currentCtxEdge,s=this.currentCtxPos),u===void 0&&(u=this.getEdgeType(o));for(var l,f=this.syntax[u].weight,c=this.syntax[u].distance,d=this.convertToRelativePosition(o,s),h=d.weight,p=o.source().position("x"),g=o.source().position("y"),b=o.target().position("x"),v=o.target().position("y"),y=this.convertToRelativePosition(o,{x:p,y:g}).weight,m=this.convertToRelativePosition(o,{x:b,y:v}).weight,w=[y].concat(o.data(f)?o.data(f):[]).concat([m]),S=this.getAnchorsAsArray(o),A=1/0,_=[p,g].concat(S||[]).concat([b,v]),E=-1,k=0;k<w.length-1;k++){var M=w[k],T=w[k+1],C=this.compareWithPrecision(h,M,!0),R=this.compareWithPrecision(h,T),x=this.compareWithPrecision(h,T,!0),B=this.compareWithPrecision(h,M);if(C&&R||x&&B){var D={x:p=_[2*k],y:g=_[2*k+1]},O={x:b=_[2*k+2],y:v=_[2*k+3]},G=(g-v)/(p-b),V=-1/G,I={srcPoint:D,tgtPoint:O,m1:G,m2:V},z=this.getIntersection(o,s,I),P=Math.sqrt(Math.pow(s.x-z.x,2)+Math.pow(s.y-z.y,2));P<A&&(A=P,l=z,E=k)}}l!==void 0&&(s=l),d=this.convertToRelativePosition(o,s),l===void 0&&(d.distance=0);var q=o.data(f),F=o.data(c);return F=F||[],(q=q||[]).length===0&&(E=0),E!=-1&&(q.splice(E,0,d.weight),F.splice(E,0,d.distance)),o.data(f,q),o.data(c,F),o.addClass(this.syntax[u].class),(q.length>1||F.length>1)&&o.addClass(this.syntax[u].multiClass),E},removeAnchor:function(o,s){o!==void 0&&s!==void 0||(o=this.currentCtxEdge,s=this.currentAnchorIndex);var u=this.getEdgeType(o);if(!this.edgeTypeNoneShouldntHappen(u,"anchorPointUtilities.js, removeAnchor")){var l,f=this.syntax[u].weight,c=this.syntax[u].distance,d=o.data(f),h=o.data(c);u==="bend"?l=this.options.bendPositionsFunction(o):u==="control"&&(l=this.options.controlPositionsFunction(o)),d.splice(s,1),h.splice(s,1),l&&l.splice(s,1),d.length==1||h.length==1?o.removeClass(this.syntax[u].multiClass):d.length==0||h.length==0?(o.removeClass(this.syntax[u].class),o.data(f,[]),o.data(c,[])):(o.data(f,d),o.data(c,h))}},removeAllAnchors:function(o){o===void 0&&(o=this.currentCtxEdge);var s=this.getEdgeType(o);if(!this.edgeTypeNoneShouldntHappen(s,"anchorPointUtilities.js, removeAllAnchors")){o.removeClass(this.syntax[s].class),o.removeClass(this.syntax[s].multiClass);var u=this.syntax[s].weight,l=this.syntax[s].distance;o.data(u,[]),o.data(l,[]),s==="bend"&&this.options.bendPositionsFunction(o)?this.options.bendPointPositionsSetterFunction(o,[]):s==="control"&&this.options.controlPositionsFunction(o)&&this.options.controlPointPositionsSetterFunction(o,[])}},calculateDistance:function(o,s){var u=o.x-s.x,l=o.y-s.y;return Math.sqrt(Math.pow(u,2)+Math.pow(l,2))},compareWithPrecision:function(o,s){var u=arguments.length>2&&arguments[2]!==void 0&&arguments[2],l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.01,f=o-s;return Math.abs(f)<=l||(u?o<s:o>s)},edgeTypeNoneShouldntHappen:function(o,s){return o==="none"&&(console.log("In "+s+": edge type none should never happen here!!"),!0)}};i.exports=a},218:i=>{var a,o,s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},u=(a=Math.max,o=Date.now||function(){return new Date().getTime()},function(l,f,c){var d,h,p,g,b,v,y,m,w,S=0,A=!1,_=!0;if(typeof l!="function")throw new TypeError("Expected a function");if(f=f<0?0:+f||0,c===!0){var E=!0;_=!1}else w=(m=c)===void 0?"undefined":s(m),!m||w!="object"&&w!="function"||(E=!!c.leading,A="maxWait"in c&&a(+c.maxWait||0,f),_="trailing"in c?!!c.trailing:_);function k(R,x){x&&clearTimeout(x),h=v=y=void 0,R&&(S=o(),p=l.apply(b,d),v||h||(d=b=void 0))}function M(){var R=f-(o()-g);R<=0||R>f?k(y,h):v=setTimeout(M,R)}function T(){k(_,v)}function C(){if(d=arguments,g=o(),b=this,y=_&&(v||!E),A===!1)var R=E&&!v;else{h||E||(S=g);var x=A-(g-S),B=x<=0||x>A;B?(h&&(h=clearTimeout(h)),S=g,p=l.apply(b,d)):h||(h=setTimeout(T,x))}return B&&v?v=clearTimeout(v):v||f===A||(v=setTimeout(M,f)),R&&(B=!0,p=l.apply(b,d)),!B||v||h||(d=b=void 0),p}return C.cancel=function(){v&&clearTimeout(v),h&&clearTimeout(h),S=0,h=v=y=void 0},C});i.exports=u},579:(i,a,o)=>{var s,u,l;u=o(259),o(218),l=function(f,c,d){var h=o(347);if(f&&c&&d){var p,g={bendPositionsFunction:function(v){return v.data("bendPointPositions")},controlPositionsFunction:function(v){return v.data("controlPointPositions")},bendPointPositionsSetterFunction:function(v,y){v.data("bendPointPositions",y)},controlPointPositionsSetterFunction:function(v,y){v.data("controlPointPositions",y)},initAnchorsAutomatically:!0,ignoredClasses:[],undoable:!1,anchorShapeSizeFactor:3,zIndex:999,bendRemovalSensitivity:8,addBendMenuItemTitle:"Add Bend Point",removeBendMenuItemTitle:"Remove Bend Point",removeAllBendMenuItemTitle:"Remove All Bend Points",addControlMenuItemTitle:"Add Control Point",removeControlMenuItemTitle:"Remove Control Point",removeAllControlMenuItemTitle:"Remove All Control Points",moveSelectedAnchorsOnKeyEvents:function(){return!0},enableMultipleAnchorRemovalOption:!1,useTrailingDividersAfterContextMenuOptions:!1,enableCreateAnchorOnDrag:!0},b=!1;f("core","edgeEditing",function(v){var y=this;return v==="initialized"?b:(v!=="get"&&(p=function(m,w){var S={};for(var A in m)S[A]=m[A];for(var A in w)if(A=="bendRemovalSensitivity"){var _=w[A];isNaN(_)||(S[A]=_>=0&&_<=20?w[A]:_<0?0:20)}else S[A]=w[A];return S}(g,v),b=!0,y.style().selector(".edgebendediting-hasbendpoints").css({"curve-style":"segments","segment-distances":function(m){return u.getDistancesString(m,"bend")},"segment-weights":function(m){return u.getWeightsString(m,"bend")},"edge-distances":"node-position"}),y.style().selector(".edgecontrolediting-hascontrolpoints").css({"curve-style":"unbundled-bezier","control-point-distances":function(m){return u.getDistancesString(m,"control")},"control-point-weights":function(m){return u.getWeightsString(m,"control")},"edge-distances":"node-position"}),y.style().selector("#nwt_reconnectEdge_dummy").css({width:"1",height:"1",visibility:"hidden"}),u.setIgnoredClasses(p.ignoredClasses),p.initAnchorsAutomatically&&u.initAnchorPoints(p.bendPositionsFunction,p.controlPositionsFunction,y.edges(),p.ignoredClasses),h(p,y)),b?{getAnchorsAsArray:function(m){return u.getAnchorsAsArray(m)},initAnchorPoints:function(m){u.initAnchorPoints(p.bendPositionsFunction,p.controlPositionsFunction,m)},deleteSelectedAnchor:function(m,w){u.removeAnchor(m,w)},getEdgeType:function(m){return u.getEdgeType(m)}}:void 0)})}},i.exports&&(i.exports=l),(s=(function(){return l}).call(a,o,a,i))===void 0||(i.exports=s),typeof cytoscape<"u"&&$&&Konva&&l(cytoscape,$,Konva)},171:i=>{i.exports={disconnectEdge:function(a,o,s,u){var l={data:{id:"nwt_reconnectEdge_dummy",ports:[]},renderedPosition:s};o.add(l);var f=u==="source"?{source:l.data.id}:{target:l.data.id};return a=a.move(f)[0],{dummyNode:o.nodes("#"+l.data.id)[0],edge:a}},connectEdge:function(a,o,s){if(a.isEdge()&&o.isNode()){var u={};if(s==="source")u.source=o.id();else{if(s!=="target")return;u.target=o.id()}return a.move(u)[0]}},copyEdge:function(a,o){this.copyAnchors(a,o),this.copyStyle(a,o)},copyStyle:function(a,o){a&&o&&(o.data("line-color",a.data("line-color")),o.data("width",a.data("width")),o.data("cardinality",a.data("cardinality")))},copyAnchors:function(a,o){if(a.hasClass("edgebendediting-hasbendpoints")){var s=a.data("cyedgebendeditingDistances"),u=a.data("cyedgebendeditingWeights");o.data("cyedgebendeditingDistances",s),o.data("cyedgebendeditingWeights",u),o.addClass("edgebendediting-hasbendpoints")}else a.hasClass("edgecontrolediting-hascontrolpoints")&&(s=a.data("cyedgecontroleditingDistances"),u=a.data("cyedgecontroleditingWeights"),o.data("cyedgecontroleditingDistances",s),o.data("cyedgecontroleditingWeights",u),o.addClass("edgecontrolediting-hascontrolpoints"));a.hasClass("edgebendediting-hasmultiplebendpoints")?o.addClass("edgebendediting-hasmultiplebendpoints"):a.hasClass("edgecontrolediting-hasmultiplecontrolpoints")&&o.addClass("edgecontrolediting-hasmultiplecontrolpoints")}}},961:i=>{i.exports=function(a,o,s){if(a.undoRedo!=null){var u=a.undoRedo({defaultActions:!1,isDebug:!0});u.action("changeAnchorPoints",l,l),u.action("moveAnchorPoints",f,f),u.action("reconnectEdge",c,c),u.action("removeReconnectedEdge",d,d)}function l(h){var p,g,b,v,y=a.getElementById(h.edge.id()),m=h.type!=="none"?h.type:o.getEdgeType(y);h.type!=="none"||h.set?(b=o.syntax[m].weight,v=o.syntax[m].distance,p=h.set?y.data(b):h.weights,g=h.set?y.data(v):h.distances):(p=[],g=[]);var w={edge:y,type:m,weights:p,distances:g,set:!0};if(h.set){var S=h.weights&&h.weights.length>0,A=S&&h.weights.length>1;S&&(y.data(b,h.weights),y.data(v,h.distances));var _=o.syntax[m].class,E=o.syntax[m].multiClass;S||A?S&&!A?(y.addClass(_),y.removeClass(E)):y.addClass(_+" "+E):y.removeClass(_+" "+E),S||(y.data(b,[]),y.data(v,[])),y.selected()&&y.unselect(),y.select()}return y.trigger("cyedgeediting.changeAnchorPoints"),w}function f(h){if(h.firstTime)return delete h.firstTime,h;var p=h.edges,g=h.positionDiff,b={edges:p,positionDiff:{x:-g.x,y:-g.y}};return function(v,y){y.forEach(function(m){var w=o.getEdgeType(m),S=o.getAnchorsAsArray(m),A=[];if(S!=null){for(var _=0;_<S.length;_+=2)A.push({x:S[_]+v.x,y:S[_+1]+v.y});w==="bend"?s.bendPointPositionsSetterFunction(m,A):w==="control"&&s.controlPointPositionsSetterFunction(m,A)}}),o.initAnchorPoints(s.bendPositionsFunction,s.controlPositionsFunction,y)}(g,p),b}function c(h){var p=h.edge,g=h.location,b=h.oldLoc,v={edge:p=p.move(g)[0],location:b,oldLoc:g};return p.unselect(),v}function d(h){var p=h.oldEdge;(g=a.getElementById(p.data("id")))&&g.length>0&&(p=g);var g,b=h.newEdge;return(g=a.getElementById(b.data("id")))&&g.length>0&&(b=g),p.inside()&&(p=p.remove()[0]),b.removed()&&(b=b.restore()).unselect(),{oldEdge:b,newEdge:p}}}}},n={};return function i(a){var o=n[a];if(o!==void 0)return o.exports;var s=n[a]={exports:{}};return t[a](s,s.exports,i),s.exports}(579)})()})})(Y4);var zZ=Y4.exports;const qZ=qi(zZ);function GZ(r){qZ(ir,window.$,V4);let e=Lr(jr);return oo(()=>{e.edgeEditing({undoable:!0,bendRemovalSensitivity:16,enableMultipleAnchorRemovalOption:!0,initAnchorsAutomatically:!1,useTrailingDividersAfterContextMenuOptions:!1,enableCreateAnchorOnDrag:!0,anchorShapeSizeFactor:4}),e.style().update()}),[]}class $Z extends Ir{constructor(e){super(),Dr(this,e,GZ,null,Nr,{})}}function j3(r){let e,t,n,i,a,o,s,u,l,f,c,d,h,p,g,b,v=r[0].full&&V3();t=new yz({});const y=[HZ,UZ],m=[];function w(A,_){return A[0].full?0:1}a=w(r),o=m[a]=y[a](r),u=new wV({props:{$$slots:{default:[VZ]},$$scope:{ctx:r}}});let S=r[0].full&&Y3();return c=new lj({}),h=new fV({}),g=new xV({}),{c(){v&&v.c(),e=qt(),Qt(t.$$.fragment),n=qt(),i=Yt("div"),o.c(),s=qt(),Qt(u.$$.fragment),l=qt(),S&&S.c(),f=qt(),Qt(c.$$.fragment),d=qt(),Qt(h.$$.fragment),p=qt(),Qt(g.$$.fragment),st(i,"class","svelte-15ghafl")},m(A,_){v&&v.m(A,_),Pt(A,e,_),Xt(t,A,_),Pt(A,n,_),Pt(A,i,_),m[a].m(i,null),Gt(i,s),Xt(u,i,null),Gt(i,l),S&&S.m(i,null),Pt(A,f,_),Xt(c,A,_),Pt(A,d,_),Xt(h,A,_),Pt(A,p,_),Xt(g,A,_),b=!0},p(A,_){A[0].full?v?_&1&&xt(v,1):(v=V3(),v.c(),xt(v,1),v.m(e.parentNode,e)):v&&(io(),At(v,1,1,()=>{v=null}),ao());let E=a;a=w(A),a!==E&&(io(),At(m[E],1,1,()=>{m[E]=null}),ao(),o=m[a],o||(o=m[a]=y[a](A),o.c()),xt(o,1),o.m(i,s));const k={};_&3&&(k.$$scope={dirty:_,ctx:A}),u.$set(k),A[0].full?S?_&1&&xt(S,1):(S=Y3(),S.c(),xt(S,1),S.m(i,null)):S&&(io(),At(S,1,1,()=>{S=null}),ao())},i(A){b||(xt(v),xt(t.$$.fragment,A),xt(o),xt(u.$$.fragment,A),xt(S),xt(c.$$.fragment,A),xt(h.$$.fragment,A),xt(g.$$.fragment,A),b=!0)},o(A){At(v),At(t.$$.fragment,A),At(o),At(u.$$.fragment,A),At(S),At(c.$$.fragment,A),At(h.$$.fragment,A),At(g.$$.fragment,A),b=!1},d(A){v&&v.d(A),A&&Nt(e),Kt(t,A),A&&Nt(n),A&&Nt(i),m[a].d(),Kt(u),S&&S.d(),A&&Nt(f),Kt(c,A),A&&Nt(d),Kt(h,A),A&&Nt(p),Kt(g,A)}}}function V3(r){let e,t;return e=new AV({}),{c(){Qt(e.$$.fragment)},m(n,i){Xt(e,n,i),t=!0},i(n){t||(xt(e.$$.fragment,n),t=!0)},o(n){At(e.$$.fragment,n),t=!1},d(n){Kt(e,n)}}}function UZ(r){let e,t;return e=new VV({props:{$$slots:{default:[jZ]},$$scope:{ctx:r}}}),{c(){Qt(e.$$.fragment)},m(n,i){Xt(e,n,i),t=!0},i(n){t||(xt(e.$$.fragment,n),t=!0)},o(n){At(e.$$.fragment,n),t=!1},d(n){Kt(e,n)}}}function HZ(r){let e,t;return e=new aj({}),{c(){Qt(e.$$.fragment)},m(n,i){Xt(e,n,i),t=!0},i(n){t||(xt(e.$$.fragment,n),t=!0)},o(n){At(e.$$.fragment,n),t=!1},d(n){Kt(e,n)}}}function jZ(r){let e,t,n,i,a,o,s,u;return e=new PN({props:{full:!1}}),n=new ON({props:{minimal:!0}}),a=new zP({props:{minimal:!0}}),s=new qP({props:{minimal:!0}}),{c(){Qt(e.$$.fragment),t=qt(),Qt(n.$$.fragment),i=qt(),Qt(a.$$.fragment),o=qt(),Qt(s.$$.fragment)},m(l,f){Xt(e,l,f),Pt(l,t,f),Xt(n,l,f),Pt(l,i,f),Xt(a,l,f),Pt(l,o,f),Xt(s,l,f),u=!0},p:Yr,i(l){u||(xt(e.$$.fragment,l),xt(n.$$.fragment,l),xt(a.$$.fragment,l),xt(s.$$.fragment,l),u=!0)},o(l){At(e.$$.fragment,l),At(n.$$.fragment,l),At(a.$$.fragment,l),At(s.$$.fragment,l),u=!1},d(l){Kt(e,l),l&&Nt(t),Kt(n,l),l&&Nt(i),Kt(a,l),l&&Nt(o),Kt(s,l)}}}function W3(r){let e,t;return e=new sj({}),{c(){Qt(e.$$.fragment)},m(n,i){Xt(e,n,i),t=!0},i(n){t||(xt(e.$$.fragment,n),t=!0)},o(n){At(e.$$.fragment,n),t=!1},d(n){Kt(e,n)}}}function VZ(r){let e,t,n,i,a,o,s,u,l,f,c,d,h,p,g,b,v,y,m,w,S,A,_,E;e=new Rz({}),n=new DV({}),a=new BZ({}),s=new lz({}),l=new tW({}),c=new RZ({}),h=new mV({}),g=new Jj({}),v=new Bz({}),m=new zV({}),S=new $Z({});let k=r[0].full&&W3();return{c(){Qt(e.$$.fragment),t=qt(),Qt(n.$$.fragment),i=qt(),Qt(a.$$.fragment),o=qt(),Qt(s.$$.fragment),u=qt(),Qt(l.$$.fragment),f=qt(),Qt(c.$$.fragment),d=qt(),Qt(h.$$.fragment),p=qt(),Qt(g.$$.fragment),b=qt(),Qt(v.$$.fragment),y=qt(),Qt(m.$$.fragment),w=qt(),Qt(S.$$.fragment),A=qt(),k&&k.c(),_=jf()},m(M,T){Xt(e,M,T),Pt(M,t,T),Xt(n,M,T),Pt(M,i,T),Xt(a,M,T),Pt(M,o,T),Xt(s,M,T),Pt(M,u,T),Xt(l,M,T),Pt(M,f,T),Xt(c,M,T),Pt(M,d,T),Xt(h,M,T),Pt(M,p,T),Xt(g,M,T),Pt(M,b,T),Xt(v,M,T),Pt(M,y,T),Xt(m,M,T),Pt(M,w,T),Xt(S,M,T),Pt(M,A,T),k&&k.m(M,T),Pt(M,_,T),E=!0},p(M,T){M[0].full?k?T&1&&xt(k,1):(k=W3(),k.c(),xt(k,1),k.m(_.parentNode,_)):k&&(io(),At(k,1,1,()=>{k=null}),ao())},i(M){E||(xt(e.$$.fragment,M),xt(n.$$.fragment,M),xt(a.$$.fragment,M),xt(s.$$.fragment,M),xt(l.$$.fragment,M),xt(c.$$.fragment,M),xt(h.$$.fragment,M),xt(g.$$.fragment,M),xt(v.$$.fragment,M),xt(m.$$.fragment,M),xt(S.$$.fragment,M),xt(k),E=!0)},o(M){At(e.$$.fragment,M),At(n.$$.fragment,M),At(a.$$.fragment,M),At(s.$$.fragment,M),At(l.$$.fragment,M),At(c.$$.fragment,M),At(h.$$.fragment,M),At(g.$$.fragment,M),At(v.$$.fragment,M),At(m.$$.fragment,M),At(S.$$.fragment,M),At(k),E=!1},d(M){Kt(e,M),M&&Nt(t),Kt(n,M),M&&Nt(i),Kt(a,M),M&&Nt(o),Kt(s,M),M&&Nt(u),Kt(l,M),M&&Nt(f),Kt(c,M),M&&Nt(d),Kt(h,M),M&&Nt(p),Kt(g,M),M&&Nt(b),Kt(v,M),M&&Nt(y),Kt(m,M),M&&Nt(w),Kt(S,M),M&&Nt(A),k&&k.d(M),M&&Nt(_)}}}function Y3(r){let e,t,n,i,a,o;return e=new LV({}),n=new aV({}),a=new ZV({}),{c(){Qt(e.$$.fragment),t=qt(),Qt(n.$$.fragment),i=qt(),Qt(a.$$.fragment)},m(s,u){Xt(e,s,u),Pt(s,t,u),Xt(n,s,u),Pt(s,i,u),Xt(a,s,u),o=!0},i(s){o||(xt(e.$$.fragment,s),xt(n.$$.fragment,s),xt(a.$$.fragment,s),o=!0)},o(s){At(e.$$.fragment,s),At(n.$$.fragment,s),At(a.$$.fragment,s),o=!1},d(s){Kt(e,s),s&&Nt(t),Kt(n,s),s&&Nt(i),Kt(a,s)}}}function WZ(r){let e,t,n,i,a,o,s,u,l;e=new FV({});let f=r[0].ready&&j3(r);return i=new tV({}),o=new hV({}),u=new XV({}),{c(){Qt(e.$$.fragment),t=qt(),f&&f.c(),n=qt(),Qt(i.$$.fragment),a=qt(),Qt(o.$$.fragment),s=qt(),Qt(u.$$.fragment)},m(c,d){Xt(e,c,d),Pt(c,t,d),f&&f.m(c,d),Pt(c,n,d),Xt(i,c,d),Pt(c,a,d),Xt(o,c,d),Pt(c,s,d),Xt(u,c,d),l=!0},p(c,[d]){c[0].ready?f?(f.p(c,d),d&1&&xt(f,1)):(f=j3(c),f.c(),xt(f,1),f.m(n.parentNode,n)):f&&(io(),At(f,1,1,()=>{f=null}),ao())},i(c){l||(xt(e.$$.fragment,c),xt(f),xt(i.$$.fragment,c),xt(o.$$.fragment,c),xt(u.$$.fragment,c),l=!0)},o(c){At(e.$$.fragment,c),At(f),At(i.$$.fragment,c),At(o.$$.fragment,c),At(u.$$.fragment,c),l=!1},d(c){Kt(e,c),c&&Nt(t),f&&f.d(c),c&&Nt(n),Kt(i,c),c&&Nt(a),Kt(o,c),c&&Nt(s),Kt(u,c)}}}function YZ(r,e,t){let n;return Kr(r,sr,i=>t(0,n=i)),[n]}class XZ extends Ir{constructor(e){super(),Dr(this,e,YZ,WZ,Nr,{})}}new XZ({target:document.getElementById("app")});export{_n as _,kt as c,qi as g};
