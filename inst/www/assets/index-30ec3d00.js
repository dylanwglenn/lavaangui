import{d as Cn,w as Ne,S as K,i as X,s as Z,c as te,g as Y,o as we,e as U,a as E,b as ve,f as O,l as oe,n as ce,h as N,r as Je,j as W,k as se,m as V,t as xe,p as R,q as Oe,u as _e,v as Re,x as Ke,y as G,z as q,A as Xe,B as Ze,C as Qe,D as M,E as F,F as j,G as Be,H as Ve,I as Sn,J as it,K as lt,L as ae,M as $e,N as ye,O as de}from"./svelte-fdfc2579.js";import{c as H}from"./cytoscape-716fe419.js";import{g as Ln}from"./cytoscape-grid-guide-e8f04797.js";import{e as Mn}from"./cytoscape-edgehandles-98723a1d.js";import{v as un}from"./uuid-4a60fe23.js";import{J as Ct}from"./jszip-84e7feea.js";import{s as Dn}from"./cytoscape-svg-f6b36117.js";import{F as dt}from"./file-saver-daf94496.js";import{E as An}from"./jspdf-f4d4ca1d.js";import{U as In}from"./svg2pdf.js-0c98a8e5.js";import{d as Fn}from"./cytoscape-dagre-22838d04.js";import{f as On}from"./cytoscape-fcose-1883323b.js";import{c as Nn}from"./cytoscape-cola-0e9b31a3.js";import{c as Tn}from"./cytoscape-context-menus-864590d1.js";import{i as Pn}from"./@jaames-324f80d4.js";import{p as xn}from"./cytoscape-panzoom-50d4e635.js";import{u as Vn}from"./cytoscape-undo-redo-8b156ffa.js";import{a as Rn}from"./cytoscape-automove-b06479d5.js";import{K as cn}from"./konva-9c11d4c7.js";import{n as zn}from"./cytoscape-node-editing-50bf11b2.js";import{e as Bn}from"./cytoscape-edge-editing-11f5d8e5.js";import{D as St}from"./dexie-5509e3b5.js";import"./core-js-93797867.js";import"./functional-red-black-tree-9a31655a.js";import"./lodash.memoize-aae0dfad.js";import"./lodash.throttle-085a2e14.js";import"./dagre-e7a63eac.js";import"./graphlib-04d9d874.js";import"./lodash-399c0d8f.js";import"./@babel-f352b073.js";import"./fflate-7e11f8f1.js";import"./cssesc-ae0dab9a.js";import"./font-family-papandreou-e99f1152.js";import"./svgpath-0da963bf.js";import"./specificity-c7128631.js";import"./cose-base-abb6f3d0.js";import"./layout-base-8b616591.js";import"./webcola-fa77233e.js";import"./jquery-fb849a2e.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function i(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(o){if(o.ep)return;o.ep=!0;const r=i(o);fetch(o.href,r)}})();const Q=Ne(null),_t=Ne(null),De=Ne(null);let ne=Ne({meanStruc:"default",intOvFree:!0,intLvFree:!1,estimator:"default",se:"default",missing:"listwise",n_boot:1e3,fix_first:!0,fix_single:!0,auto_var:!0,auto_cov_lv_x:!0,auto_cov_y:!0,fixed_x:!0,mode:"user model","auto.th":!0,"auto.delta":!0}),ue=Ne({gridShow:!1,gridSpace:26,gridColor:"#dedede",gridWidth:1,gridMovePan:!1,gridSnap:!1,gridAlign:!0,gridResize:!1,showLav:!0,showVar:!0,showMean:!0,std:!1,view:"est",ci:.95,number_digits:2}),Ie=Ne({lastFitModel:null,lastFitLavFit:null,lastFitData:null}),B=Ne({fitting:!1,loadingMode:!1,runCounter:0,modelEmpty:!0,dataAvail:!1,columnNames:null,loadedFileName:null,ids:null,dragged:null,draggedName:null,full:!0,ready:!1,parsedModel:!1,meansModelled:null,buttonDown:!1,showServerErrors:!0,everEdge:!1,drawing:"none",undoEmpty:!0,redoEmpty:!0,server:!1,shinyapps:!1}),mt=Ne(0);Cn(B,n=>n.columnNames);const fn=Ne({type:"info",message:"",key:0});function ge(n,e){fn.update(i=>({type:n,message:e,key:i.key+1}))}ge("info","Greetings. lavaangui is BETA software. Please report any bugs at https://github.com/karchjd/lavaangui/issues.");function Un(n,e,i){let t;te(n,ue,l=>i(1,t=l));let o=!1;Ln(H);let r=Y(Q);var s={snapToGridOnRelease:!1,drawGrid:!1,snapToAlignmentLocationDuringDrag:!1,distributionGuidelines:!0,geometricGuideline:!0,initPosAlignment:!1,centerToEdgeAlignment:!1,resize:!1,parentPadding:!1,guidelinesStackOrder:4,guidelinesTolerance:2,guidelinesStyle:{strokeStyle:"#8b7d6b",geometricGuidelineRange:2e3,range:100,minDistRange:10,distGuidelineOffset:10,horizontalDistColor:"#ff0000",verticalDistColor:"#00ff00",initPosAlignmentColor:"#0000ff",lineDash:[0,0],horizontalDistLine:[0,0],verticalDistLine:[0,0],initPosAlignmentLine:[0,0]},parentSpacing:-1};return we(()=>{r.gridGuide(s),i(0,o=!0)}),n.$$.update=()=>{n.$$.dirty&3&&o&&t.gridShow!==void 0&&Y(Q).gridGuide({drawGrid:t.gridShow}),n.$$.dirty&3&&o&&t.gridSpace!==void 0&&Y(Q).gridGuide({gridSpacing:t.gridSpace}),n.$$.dirty&3&&o&&t.gridWidth!==void 0&&Y(Q).gridGuide({lineWidth:t.gridWidth}),n.$$.dirty&3&&o&&t.gridMovePan!==void 0&&Y(Q).gridGuide({panGrid:t.gridMovePan}),n.$$.dirty&3&&o&&t.gridSnap!==void 0&&Y(Q).gridGuide({snapToGridDuringDrag:t.gridSnap}),n.$$.dirty&3&&o&&t.gridAlign!==void 0&&Y(Q).gridGuide({snapToAlignmentLocationOnRelease:t.gridAlign}),n.$$.dirty&3&&o&&t.gridResize!==void 0&&Y(Q).gridGuide({resize:t.gridResize})},[o,t]}class Gn extends K{constructor(e){super(),X(this,e,Un,null,Z,{})}}const le="observed-variable",me="latent-variable",Le="constant",Ee="free",He="nolabel",he="fromUser",ze="label",Te="byLav",Ce="fixed",Ae="forcefree",Me="directed",Fe="undirected",st="loop",Ue="linked",Pe="fromLav",Lt="hasEst",ut="validated",Ye="continous",We="ordered",qn="hasEstFixed",je=80,jn=80,Hn=[{selector:"element",style:{"font-size":function(n){return n.data("font-size")||14}}},{selector:"node",style:{width:je.toString(),height:"80","background-color":function(n){return n.data("background-color")||"white"},"border-color":function(n){return n.data("border-color")||"grey"},"border-width":function(n){return n.data("border-width")||"2px"},label:"data(label)","text-valign":"center","text-halign":"center","text-wrap":"ellipsis","text-max-width":function(n){return n.width()}}},{selector:`node.${le}`,style:{shape:"rectangle"}},{selector:`node.${le}.${We}`,style:{"border-style":"double","border-width":5}},{selector:`node.${me}`,style:{shape:"ellipse","border-color":"black"}},{selector:`node.${Le}`,style:{shape:"triangle",label:"1","text-valign":"center","text-margin-y":"10px","border-color":"black"}},{selector:`node.${Ue}`,style:{"border-color":"black"}},{selector:"edge",style:{width:function(n){return n.data("width")||3},"line-color":function(n){return n.data("line-color")||"#000"},"target-arrow-color":function(n){return n.data("target-arrow-color")||"#000"},"source-arrow-color":function(n){return n.data("source-arrow-color")||"#000"},"target-arrow-shape":"triangle","curve-style":"bezier","text-valign":"center","text-halign":"center","text-wrap":"wrap","text-max-width":jn,"z-index":10,color:"#000","text-outline-color":"#fff","text-outline-width":"2px","text-background-color":"#fff","text-background-opacity":1,"text-background-padding":"4px"}},{selector:"edge.loop",style:{"curve-style":"bezier","source-arrow-shape":"triangle","loop-direction":function(n){return n.data("loop-direction")||0},"loop-sweep":.8,"control-point-step-size":n=>{const e=n.source(),i=parseInt(e.style("height")),t=parseInt(e.style("width"));let o;return n.style("loop-direction")=="0deg"||n.style("loop-direction")=="180deg"?o=i:n.style("loop-direction")=="90deg"||n.style("loop-direction")=="270deg"?o=t:o=Math.max(t,i),o/80*60}}},{selector:`edge.${Fe}`,style:{"curve-style":"unbundled-bezier","control-point-distances":[-100],"control-point-weights":[.5],"source-arrow-shape":"triangle"}},{selector:`edge.${ze}, edge.${ze}`,style:{label:function(n){return n.data("label")}}},{selector:`edge.${Ce}.${ze}`,style:{label:function(n){return n.data("label")+"@"+n.data("value")}}},{selector:`edge.${Ce}.${He}`,style:{label:function(n){return"@"+n.data("value")}}},{selector:`edge.${Ae}`,style:{"line-color":"blue"}},{selector:`edge.${Pe}, edge.${Te}`,style:{"line-style":"dashed"}},{selector:"edge.hidden, node.hidden",style:{display:"none"}},{selector:"edge:selected",style:{"underlay-opacity":.5,"underlay-color":"#928ff8"}},{selector:"node:selected",style:{"underlay-color":"#928ff8","underlay-opacity":.5}}],Wn={autoungrabify:!1,autolock:!1,style:Hn,minZoom:.02,maxZoom:5},Yn={preview:!1,hoverDelay:150,handleNodes:"node",snap:!0,handleColor:"#ff0000",handleSize:10,canConnect:function(n,e){return!cy.edges(function(t){if(!t.isUserAdded())return!1;const o=t.source().id()==n.id()&&t.target().id()==e.id(),r=t.source().id()==e.id()&&t.target().id()==n.id();return o||r}).length}};function Jn(n){H.use(Mn);var e=H(Wn);return e.boxSelectionEnabled(!0),Q.set(e),_t.set(e.edgehandles(Yn)),[]}class Kn extends K{constructor(e){super(),X(this,e,Jn,null,Z,{})}}function ie(n){var e=Y(B);if(!e.full)return;let i=Y(Q);const t=i.edges();for(var o=0;o<t.length;o++)t[o].removeEstimates();if(i.getUserEdges().length==0){i.getLavaanNodes().remove(),i.getLavaanEdges().remove(),Shiny.setInputValue("show_help",Math.random());return}if(!e.dataAvail&&n=="estimate"){ge("danger","Model not send to lavaan because no data available");return}let r=mn(n);Shiny.setInputValue("run-fromJavascript",JSON.stringify(r)),Shiny.setInputValue("runCounter",Math.random()),n==="user model"&&i.getLavaanModifiedEdges().forEach(s=>{s.freePara()})}function Xn(n,e){for(let i=0;i<n.length;i++)if(n[i]===e)return!0;return!1}function nt(n,e){let i;n==null?i="1":i=n.getLabel();let t=!1,o;if(e.isFixed()&&!e.isModifiedLavaan()?(o=e.getValue()+"*"+i,t=!0):e.isForceFree()&&(o="NA*"+i,t=!0),e.hasLabel()){const r=e.getLabel();t?o+=" + "+r+"*"+i:(t=!0,o=r+"*"+i)}else t||(o=i);return o}class Zn{constructor(e,i,t=null,o=null,r=null,s=null){this.mode=e,Object.assign(this,{model:{options:t,syntax:o,R_script:i,ordered_labels:s},forceUpdate:Math.random(),cache:r})}}function Mt(n,e="target"){let i="";const t=Math.max(...n.map(l=>l[e]().position().x))-Math.min(...n.map(l=>l[e]().position().x)),o=Math.max(...n.map(l=>l[e]().position().y))-Math.min(...n.map(l=>l[e]().position().y)),r=t>=o?"x":"y",s=n.map((l,d)=>({index:d,value:l.target().position()[r]})).sort((l,d)=>l.value-d.value).map(l=>l.index);for(let l=0;l<n.length;l++){const d=n[s[l]][e]();l>0&&(i+=" + "),i+=nt(d,n[s[l]])}return i}function mn(n){let e=Y(Q),i=Y(B),t="",o="";o+=`library(lavaan)
`,i.dataAvail?o+=`data <- read.csv("${i.loadedFileName}")
`:o+=`#make sure your data is loaded into the 'data' variable
`;let r=e.getLatentNodes();r=r.nodes(function($){const y=$.connectedEdges(function(w){return w.isDirected()&&w.source().id()==$.id()});return y.length>0&&y.every(w=>w.target().isLatent())});let s=e.getLatentNodes();s=s.nodes(function($){const y=$.connectedEdges(function(T){return T.isDirected()&&T.target().id()==$.id()}),w=$.connectedEdges(function(T){return T.isDirected()});return w.length>0&&y.length==w.length});let l=e.getLatentNodes(),d=!1;for(let $=0;$<l.length;$++){const y=l[$],w=y.connectedEdges(function(T){return T.isDirected()&&T.source().id()==y.id()&&(T.target().isObserved()||r.some(C=>C.id()===y.id()))});w.length>0&&(d||(t+=`# measurement model
`,d=!0),t+=" "+y.getLabel()+" =~ "+Mt(w,"target")+`
`)}function u($){return $.isDirected()&&!$.source().isConstant()&&!($.source().isLatent()&&$.target().isObserved())&&!($.source().isLatent()&&r.some(w=>w.id()===$.source().id())&&$.target().isLatent())&&($.isUserAdded()||$.isModifiedLavaan())&&!s.some(w=>w.id()===$.target().id())}let a=e.edges(u),m=[];for(let $=0;$<a.length;$++)Xn(m,a[$].target())||m.push(a[$].target());if(m.length>0){t+=`
# regressions`;for(let $=0;$<m.length;$++){const y=m[$],w=y.connectedEdges(T=>u(T)&&T.target().same(y));if(w.length>0){let T="";for(var g=0;g<w.length;g++){var c=w[g].source();g>0&&(T+=" + "),T+=nt(c,w[g])}t+=`
 `+y.getLabel()+" ~ "+T}}}let f=e.edges(function($){return($.isUndirected()||$.myIsLoop())&&($.isUserAdded()||$.isModifiedLavaan())});if(f.length>0){t+=`

# (residual) (co)variances`;for(let $=0;$<f.length;$++){let y=f[$].source().data("label");t+=`
 `+y+" ~~ "+nt(f[$].target(),f[$])}}const v=e.nodes(function($){return $.isConstant()});for(let $=0;$<v.length;$++){const w=v[$].connectedEdges(function(T){return T.isUserAdded()});if(w.length>0){t+=`
# intercepts
`;for(var g=0;g<w.length;g++){var c=w[g].target();t+=c.getLabel()+" ~ "+nt(void 0,w[g])+`
`}}}d=!1;for(let $=0;$<s.length;$++){const y=s[$],w=y.connectedEdges(function(T){return T.isDirected()&&T.target().id()==y.id()});w.length>0&&(d||(t+=`

 #  formative factors
`,d=!0),t+=" "+y.getLabel()+" <~ "+Mt(w,"source")+`
`)}t=`'
`+t+`'

`;function h($,y=60){return $.split(`
`).map(w=>{if(w.includes("+")&&w.length>y){const T=w.split(" + ");let C=[],p=T[0];const P=w.match(/^\s*/)[0],A=p.indexOf("~")+1;for(let J=1;J<T.length;J++)p.length+T[J].length+3>y?(C.push(p+" + "),p=P+" ".repeat(A)+T[J]):p+=" + "+T[J];return C.push(p),C.join(`
`)}return w}).join(`
`)}t=h(t);const L=e.nodes(function($){return $.isOrdered()}).map($=>$.getLabel()),_=Qn(L);return o+="model <-"+t,o+="result <- lavaan(model, data, "+_,new Zn(n,o,_,t=t,Y(Ie),L)}function Qn(n){const e=Y(ne),i=ke(e.meanStruc),t=ke(e.intOvFree),o=ke(e.intLvFree);let r=`meanstructure = ${i},
		 int.ov.free = ${t}, int.lv.free = ${o},
		 estimator = ${ct(e.estimator)}, se = ${ct(e.se)},
		 missing = ${ct(e.missing)}, auto.fix.first = ${ke(e.fix_first)},
		 auto.fix.single = ${ke(e.fix_single)}, auto.var = ${ke(e.auto_var)},
		 auto.cov.lv.x = ${ke(e.auto_cov_lv_x)}, auto.cov.y = ${ke(e.auto_cov_y)},
  		 fixed.x = ${ke(e.fixed_x)}, auto.th = ${ke(e["auto.th"])}, 
  		 auto.delta = ${ke(e["auto.delta"])}`;if(e.se=="boot"){const s=`, bootstrap = ${e.n_boot})`;r=r+s}else r=r+")";return n.length>0&&(r=`ordered = ${'c("'+n.join('", "')+'")'}, 
    		 ${r}`),r}function ct(n){return'"'+n+'"'}function ke(n){if(n==!0||n=="true")return"TRUE";if(n==!1||n=="false")return"FALSE";if(n=="default")return'"default"';throw new Error("Should not happen")}let gn,pn;function hn(){gn=1,pn=1}hn();function be(n,e,i=!0,t=null){let o=Y(Q),r=un(),s;if(t!==null){if(o.nodes().find(d=>d.data().label===t)){ge("danger","Node with the same label already exists.");return}s=t}else n==le?s="x"+gn++:n==me?s="f"+pn++:s=void 0,o.nodes().find(d=>d.data().label===s)&&(s=s+".1");let l=Y(De);return e?l.do("add",{group:"nodes",data:{id:r,label:s},classes:[n,Ye],renderedPosition:e}):(e={x:Math.random()*400+50,y:Math.random()*400+50},o.add({group:"nodes",data:{id:r,label:s},classes:[n,Ye],renderedPosition:e})),i&&ie(Y(ne).mode),r}function qe(n,e,i=!0,t=!1,o=null,r=!0){let s=Y(Q),l=un();return s.add({group:"edges",data:{id:l,source:n,target:e,value:t?o:void 0},classes:`${i?Me:Fe} ${r?he:Pe} ${t?Ce:Ee} ${He}`})}function pe(n,e=!1){const i=so(n);if(!i&&!e)return null;const t=to(n),o=no(t),r=eo(io(o),o);return i&&i.data("loop-direction",`${r}deg`),r}function eo(n,e){const i=[0,180,90,270],t=35,o=i.sort((l,d)=>{const u=Math.min(Math.abs(l-n),360-Math.abs(l-n)),a=Math.min(Math.abs(d-n),360-Math.abs(d-n));return u-a}),s=[[0,180],[90,270]].flatMap(l=>o.filter(d=>l.includes(d)));for(const l of s)if(!e.some(u=>{const a=Math.abs(l-u);return Math.min(a,360-a)<=t}))return l;return n}function to(n){const e=cy.getElementById(n);if(e.length===0){console.error(`Node with ID ${n} does not exist.`);return}let i=[];return e.connectedEdges(t=>t.style("display")!=="none").forEach(t=>{const o=t.source(),r=t.target();let s;(o.id()!==e.id()||r.id()!==e.id())&&(o.id()===e.id()?s=Dt(t.sourceEndpoint(),e.position()):s=Dt(t.targetEndpoint(),e.position()),i.push(s))}),i}function Dt(n,e){return Object.keys(n).reduce((i,t)=>{if(e.hasOwnProperty(t))i[t]=n[t]-e[t];else throw new Error(`Key ${t} not found in second object`);return i},{})}function no(n){let e=[];return n.forEach(i=>{e.push(oo(i))}),e}function oo(n){let e=Math.atan2(n.y,n.x)*180/Math.PI;return e=(e+90)%360,e}function io(n){let e=-1,i=null;for(let t=0;t<=360;t++){let o=1/0;for(let r=0;r<n.length;r++){let s=Math.abs(n[r]-t);s=Math.min(s,360-s),o=Math.min(o,s)}o>e&&(e=o,i=t)}return i}function so(n,e){var i=cy.getElementById(n),t=null;return i.connectedEdges().forEach(function(o){var r=o.source(),s=o.target();if(r.id()===n&&s.id()===n){t=o;return}}),t!==null&&i.connectedEdges().length>1&&!t.hasClass("fixDeg")?t:null}function ro(n){let e,i,t;return{c(){e=U("div"),E(e,"id","cy"),E(e,"class","graph svelte-11pj9ut"),ve(e,"flex-basis",n[1].full?"70%":"100%")},m(o,r){O(o,e,r),n[6](e),i||(t=[oe(e,"mouseover",n[2]),oe(e,"mouseout",n[3]),oe(e,"mousemove",n[4]),oe(e,"drop",n[5]),oe(e,"dragover",lo)],i=!0)},p(o,[r]){r&2&&ve(e,"flex-basis",o[1].full?"70%":"100%")},i:ce,o:ce,d(o){o&&N(e),n[6](null),i=!1,Je(t)}}}function lo(n){n.preventDefault()}function ao(n,e){let i=Math.atan2(n,-e)*(180/Math.PI);return i<0&&(i+=360),i}function uo(n,e,i){let t,o,r;te(n,De,y=>i(12,t=y)),te(n,B,y=>i(1,o=y)),te(n,ne,y=>i(13,r=y));let s=Y(Q),l=Y(_t),d,u={x:0,y:0};we(()=>{s.mount(d)});function a(y){if(W(B,o.buttonDown=!0,o),(y.key==="Alt"||y.key===" "||y.key.toLowerCase()==="x")&&(l.enableDrawMode(),y.key==="Alt"?W(B,o.drawing="undirected",o):W(B,o.drawing="directed",o)),y.key==="Backspace"){let w=s.$(":selected");w.length>0&&(t.do("remove",w),ie(r.mode)),W(B,o.buttonDown=!1,o)}if(["l","o","c"].includes(y.key.toLowerCase())){let w;switch(y.key.toLowerCase()){case"l":w=me;break;case"o":w=le;break;case"c":w=Le;break}be(w,{...u}),W(B,o.buttonDown=!1,o)}W(B,o.buttonDown=!1,o)}function m(){s.autoungrabify(!1),s.nodes().grabify()}function g(y){(y.key==="Alt"||y.key===" "||y.key.toLowerCase()==="x")&&(l.disableDrawMode(),W(B,o.drawing="none",o),m())}function c(){document.addEventListener("keydown",a),document.addEventListener("keyup",g)}function f(){document.removeEventListener("keydown",a,!1),document.removeEventListener("keyup",g,!1)}function v(y){u.x=y.offsetX,u.y=y.offsetY}s.on("ehcomplete",(y,w,T,C)=>{const p=C,P=w.id(),A=T.id();if(p.remove(),p.init(),P!==A?(o.drawing==="undirected"?p.setUndirected():p.setDirected(),pe(P),pe(A)):(p.makeLoop(),pe(A)),!((p.isUndirected()||p.myIsLoop())&&(w.isConstant()||T.isConstant()))&&!(p.isDirected()&&T.isConstant())&&!(p.isDirected()&&w.isConstant()&&T.connectedEdges(I=>I.isUserAdded()&&I.source().isConstant()).length>1)){if(p.myIsLoop()&&w.isOrdered()){ge("error","User-defined variance arrow is not allowed for ordered variables.");return}p.isDirected()&&w.isConstant()?p.makeMeanEdge():p.makeOtherEdge(),t.do("add",p),ie(r.mode)}});function h(y){let w=0;const T=100,C=T*2;y.preventDefault();let p={x:y.offsetX,y:y.offsetY};function P(I,k){let D;if(o.dataAvail){const fe=s.getObservedNodes().map(x=>x.data().label);D=o.columnNames.filter(x=>!fe.includes(x)).map(x=>({text:x,value:x}))}else D=Array.from({length:100},(fe,ee)=>`var${ee+1}`);const z={title:I,inputType:"select",multiple:!0,value:"",inputOptions:D,callback:k};bootbox.prompt(z)}function A(){ge("danger","Either no variable selected or at least one selected variable already is in the model.")}function J(I){return I&&!s.nodes().some(k=>k.data().label===I)}if(o.dragged=="observed-with-name")be(le,p,!0,o.draggedName);else if(o.dragged=="multiple")P("Select Variables",function(I){if(J(I)){const k=s.zoom();I.forEach(D=>{be(le,{x:p.x+w*k,y:p.y},!0,D),w+=T})}else A()});else if(o.dragged=="factor")P("Select Variables",function(I){if(J(I)){const k=s.zoom(),D=be(me,{x:p.x+T*k*I.length/2-je/2*k,y:p.y});I.forEach(z=>{const fe=be(le,{x:p.x+w*k,y:p.y+k*C},!0,z);w+=T,qe(D,fe)}),W(ne,r.fix_first=!0,r),W(ne,r.fix_single=!0,r),W(ne,r.auto_var=!0,r),W(ne,r.intOvFree=!0,r),W(ne,r.intLvFree=!1,r)}else A()});else if(o.dragged=="growth"){let I=0;P("Select Time Points",function(k){if(J(k)){const D=s.zoom(),z=be(Le,{x:p.x+T*D*k.length/2-je/2*D,y:p.y},!0),fe=be(me,{x:p.x+je/2*D,y:p.y+1*C*D},!0,"Intercept"),ee=be(me,{x:p.x+T*D*(k.length-1)-je/2*D,y:p.y+1*C*D},!0,"Slope");qe(z,fe,!0,!1),qe(z,ee,!0,!1);let x=1;k.forEach(re=>{const Ge=be(le,{x:p.x+I*D,y:p.y+2*C*D},!0,re);I+=T,qe(fe,Ge,!0,!0,1),x!=1&&qe(ee,Ge,!0,!0,x-1),x+=1}),W(ne,r.auto_var=!0,r),W(ne,r.intOvFree=!1,r),W(ne,r.intLvFree=!0,r)}})}else be(o.dragged,p);(o.dragged=="multiple"||o.dragged=="factor"||o.dragged=="growth")&&ie(r.mode),W(B,o.dragged=null,o)}let b=!1,L=null,_;s.on("mousedown","edge.loop",function(y){b=!0,L=y.target,L.unpanify(),_=L.style("loop-direction")});let S;s.on("mousemove",function(y){if(!b||!L)return;let T=L.source().renderedPosition();S=ao(u.x-T.x,u.y-T.y);const C=5,p=[0,90,180,270];for(let P=0;P<p.length;P++)if(Math.abs(S-p[P])<=C){S=p[P];break}L.data("loop-direction",`${S}deg`)}),window.addEventListener("mouseup",function(){if(b){if(b=!1,S===void 0||_===`${S}deg`)return;L.data("loop-direction",_),L.addClass("fixDeg"),t.do("style",{eles:L,style:{"loop-direction":`${S}deg`}}),L=null,S=void 0}});function $(y){se[y?"unshift":"push"](()=>{d=y,i(0,d)})}return[d,o,c,f,v,h,$]}class co extends K{constructor(e){super(),X(this,e,uo,ro,Z,{})}}function fo(n,e,i){let t,o;te(n,B,d=>i(2,t=d)),te(n,ne,d=>i(3,o=d));let r=Y(Q);r.on("add","node",function(d){const u=d.target;if(u.isObserved()){let a=t.columnNames;a&&a.includes(u.getLabel())&&(u.link(),ge("success",`Variable ${u.getLabel()} linked to data`))}t.modelEmpty&&r.edges().length>0&&W(B,t.modelEmpty=!1,t)}),r.on("remove","node",function(d){r.getUserEdges().length==0&&(W(B,t.modelEmpty=!0,t),Shiny.setInputValue("show_help",Math.random())),t.loadingMode||ie(o.mode)}),r.on("remove","edge",function(d){pe(d.target.source().id()),pe(d.target.target().id())}),r.on("add","edge",function(d){W(B,t.everEdge=!0,t),t.modelEmpty&&r.edges().length>0&&W(B,t.modelEmpty=!1,t),pe(d.target.source().id()),pe(d.target.target().id())}),r.on("position","node",function(d){d.target.neighborhood().nodes().forEach(m=>{const g=m.id();pe(g)})});let s=null,l=!1;return r.on("mousedown",function(d){const u=f=>parseFloat(f.replace("px","")),a=d.position;let m=null,g=1/0;const c=30;r.edges().forEach(function(f){if(f.isDirected()){const v=u(f.style("text-margin-x")),h=u(f.style("text-margin-y")),b=f.midpoint(),L={x:b.x+v,y:b.y+h},_=Math.abs(a.x-L.x),S=a.y-L.y,$=Math.sqrt(_*_+S*S);$<g&&$<c&&(m=f,g=$)}}),m!==null&&(s=m,l=!0,d.preventDefault(),m.unpanify())}),r.on("mousemove",function(d){if(l&&s){const u=d.position,a=s.midpoint(),m=s.source().position(),g=s.target().position(),c={x:g.x-m.x,y:g.y-m.y},f=Math.sqrt(c.x**2+c.y**2),v={x:c.x/f,y:c.y/f},h={x:u.x-a.x,y:u.y-a.y};let b=h.x*v.x+h.y*v.y;const L=(g.y-a.y)/v.y-70,_=(m.y-a.y)/v.y+70;let S=Math.min(L,b);S=Math.max(_,S);const $=S*v.x,y=S*v.y;s.style({"text-margin-x":$,"text-margin-y":y})}}),r.on("mouseup",function(d){l=!1,s=null}),[]}class mo extends K{constructor(e){super(),X(this,e,fo,null,Z,{})}}function At(n,e,i){const t=n.slice();return t[21]=e[i],t}function It(n){let e,i,t,o,r,s,l,d,u,a,m,g,c,f,v=n[1],h=[];for(let b=0;b<v.length;b+=1)h[b]=Ft(At(n,v,b));return{c(){e=U("div"),i=V(),t=U("div"),o=U("button"),o.textContent="Multiple Variables",r=V(),s=U("button"),s.textContent="Factor",l=V(),d=U("button"),d.textContent="Growth",u=V(),a=U("div"),m=V(),g=U("ul");for(let b=0;b<h.length;b+=1)h[b].c();E(e,"class","vertical-bar svelte-r00s5r"),E(o,"class","draggable-item svelte-r00s5r"),E(o,"draggable","true"),E(s,"class","draggable-item svelte-r00s5r"),E(s,"draggable","true"),E(d,"class","draggable-item svelte-r00s5r"),E(d,"draggable","true"),E(t,"id","model-buttons"),E(t,"class","svelte-r00s5r"),E(a,"class","vertical-bar svelte-r00s5r"),E(g,"class","draggable-list svelte-r00s5r")},m(b,L){O(b,e,L),O(b,i,L),O(b,t,L),R(t,o),R(t,r),R(t,s),R(t,l),R(t,d),O(b,u,L),O(b,a,L),O(b,m,L),O(b,g,L);for(let _=0;_<h.length;_+=1)h[_]&&h[_].m(g,null);c||(f=[oe(o,"dragstart",n[14]),oe(s,"dragstart",n[15]),oe(d,"dragstart",n[16])],c=!0)},p(b,L){if(L&10){v=b[1];let _;for(_=0;_<v.length;_+=1){const S=At(b,v,_);h[_]?h[_].p(S,L):(h[_]=Ft(S),h[_].c(),h[_].m(g,null))}for(;_<h.length;_+=1)h[_].d(1);h.length=v.length}},d(b){b&&N(e),b&&N(i),b&&N(t),b&&N(u),b&&N(a),b&&N(m),b&&N(g),Oe(h,b),c=!1,Je(f)}}}function Ft(n){let e,i=n[21]+"",t,o,r,s;function l(...d){return n[17](n[21],...d)}return{c(){e=U("li"),t=_e(i),o=V(),E(e,"draggable","true"),E(e,"class","draggable-item svelte-r00s5r")},m(d,u){O(d,e,u),R(e,t),R(e,o),r||(s=oe(e,"dragstart",l),r=!0)},p(d,u){n=d,u&2&&i!==(i=n[21]+"")&&Re(t,i)},d(d){d&&N(e),r=!1,s()}}}function go(n){let e,i,t,o,r,s,l,d,u,a,m,g,c,f,v,h=n[0].dataAvail&&It(n);return{c(){e=U("div"),i=U("div"),t=U("div"),o=U("button"),r=V(),s=U("button"),l=V(),d=U("div"),u=V(),a=U("div"),m=V(),g=U("div"),c=V(),h&&h.c(),E(o,"class","arrow-btn direct-arrow svelte-r00s5r"),E(o,"title","Draw Directed Arrows"),xe(o,"active",n[0].drawing==="directed"),E(s,"class","arrow-btn undirected-arrow svelte-r00s5r"),E(s,"title","Draw Undirected Arrows"),xe(s,"active",n[0].drawing==="undirected"),E(d,"role","button"),E(d,"id","add-manifest-variable"),E(d,"title","Create Observed Variable"),E(d,"draggable","true"),E(d,"class","variable-button svelte-r00s5r"),E(d,"data-button-type",le),E(d,"tabindex","0"),E(a,"role","button"),E(a,"tabindex","0"),E(a,"id","add-latent-variable"),E(a,"title","Create Latent Variable"),E(a,"draggable","true"),E(a,"class","variable-button svelte-r00s5r"),E(a,"data-button-type",me),E(g,"role","button"),E(g,"tabindex","0"),E(g,"id","add-constant-variable"),E(g,"class","variable-button svelte-r00s5r"),E(g,"title","Create Constant Variable"),E(g,"data-button-type","const"),E(g,"draggable","true"),E(t,"id","buttons"),E(t,"class","svelte-r00s5r"),E(i,"id","buttonCont"),E(i,"class","svelte-r00s5r"),E(e,"class","toolbox svelte-r00s5r")},m(b,L){O(b,e,L),R(e,i),R(i,t),R(t,o),R(t,r),R(t,s),R(t,l),R(t,d),R(t,u),R(t,a),R(t,m),R(t,g),R(e,c),h&&h.m(e,null),f||(v=[oe(o,"click",n[9]),oe(s,"click",n[10]),oe(d,"dragstart",n[11]),oe(a,"dragstart",n[12]),oe(g,"dragstart",n[13])],f=!0)},p(b,[L]){L&1&&xe(o,"active",b[0].drawing==="directed"),L&1&&xe(s,"active",b[0].drawing==="undirected"),b[0].dataAvail?h?h.p(b,L):(h=It(b),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},i:ce,o:ce,d(b){b&&N(e),h&&h.d(),f=!1,Je(v)}}}function po(n,e,i){let t,o;te(n,B,y=>i(0,t=y)),te(n,Q,y=>i(8,o=y)),B.subscribe(y=>{});function r(y){W(B,t.dragged=y,t)}function s(y,w){W(B,t.dragged="observed-with-name",t),W(B,t.draggedName=w,t)}function l(y){W(B,t.dragged="multiple",t)}function d(y){W(B,t.dragged="factor",t)}function u(y){W(B,t.dragged="growth",t)}let a,m=Y(_t);function g(y){t.drawing===y?(m.disableDrawMode(),W(B,t.drawing="none",t)):(m.enableDrawMode(),W(B,t.drawing=y,t))}const c=()=>{g("directed")},f=()=>{g("undirected")},v=()=>{event.dataTransfer.setData("text/plain","node"),r(le)},h=()=>{r(me)},b=()=>{r(Le)},L=y=>l(),_=y=>d(),S=y=>u(),$=(y,w)=>s(w,y);return n.$$.update=()=>{if(n.$$.dirty&257&&typeof o.getObservedNodes=="function"&&t.columnNames!==null){const y=o.getObservedNodes().map(w=>w.data("label"));i(1,a=t.columnNames.filter(w=>!y.includes(w)))}},[t,a,r,s,l,d,u,g,o,c,f,v,h,b,L,_,S,$]}class ho extends K{constructor(e){super(),X(this,e,po,go,Z,{})}}function bo(n){let e,i,t,o,r;const s=n[1].default,l=Ke(s,n,n[0],null);return o=new ho({}),{c(){e=U("nav"),i=U("ul"),l&&l.c(),t=V(),G(o.$$.fragment),E(i,"class","nav navbar-nav navbar-left"),E(e,"class","navbar navbar-default navbar-static-top navbar-left svelte-12n5yi9")},m(d,u){O(d,e,u),R(e,i),l&&l.m(i,null),R(e,t),q(o,e,null),r=!0},p(d,[u]){l&&l.p&&(!r||u&1)&&Xe(l,s,d,d[0],r?Qe(s,d[0],u,null):Ze(d[0]),null)},i(d){r||(M(l,d),M(o.$$.fragment,d),r=!0)},o(d){F(l,d),F(o.$$.fragment,d),r=!1},d(d){d&&N(e),l&&l.d(d),j(o)}}}function _o(n,e,i){let{$$slots:t={},$$scope:o}=e;return n.$$set=r=>{"$$scope"in r&&i(0,o=r.$$scope)},[o,t]}class vo extends K{constructor(e){super(),X(this,e,_o,bo,Z,{})}}function $o(n){let e,i,t,o,r,s,l;const d=n[3].default,u=Ke(d,n,n[2],null);return{c(){e=U("li"),i=U("a"),t=_e(n[0]),o=U("span"),r=V(),s=U("ul"),u&&u.c(),E(o,"class","caret"),E(i,"href","#"),E(i,"class","dropdown-toggle svelte-1oq006n"),E(i,"data-toggle","dropdown"),E(i,"role","button"),E(i,"aria-haspopup","true"),E(i,"aria-expanded","false"),E(i,"draggable","false"),xe(i,"minimal",n[1]),E(s,"class","dropdown-menu"),E(e,"class","dropdown")},m(a,m){O(a,e,m),R(e,i),R(i,t),R(i,o),R(e,r),R(e,s),u&&u.m(s,null),l=!0},p(a,[m]){(!l||m&1)&&Re(t,a[0]),(!l||m&2)&&xe(i,"minimal",a[1]),u&&u.p&&(!l||m&4)&&Xe(u,d,a,a[2],l?Qe(d,a[2],m,null):Ze(a[2]),null)},i(a){l||(M(u,a),l=!0)},o(a){F(u,a),l=!1},d(a){a&&N(e),u&&u.d(a)}}}function yo(n,e,i){let{$$slots:t={},$$scope:o}=e,{name:r}=e,{minimal:s=!1}=e;return n.$$set=l=>{"name"in l&&i(0,r=l.name),"minimal"in l&&i(1,s=l.minimal),"$$scope"in l&&i(2,o=l.$$scope)},[r,s,o,t]}class et extends K{constructor(e){super(),X(this,e,yo,$o,Z,{name:0,minimal:1})}}function Ot(n,e,i){const t=n.slice();return t[4]=e[i],t}function Nt(n){let e;return{c(){e=U("li"),E(e,"class","divider")},m(i,t){O(i,e,t)},d(i){i&&N(e)}}}function Tt(n){let e,i,t=n[4].name+"",o,r,s,l,d;function u(...m){return n[3](n[4],...m)}let a=n[4].divider&&Nt();return{c(){e=U("li"),i=U("a"),o=_e(t),r=V(),a&&a.c(),s=Be(),E(i,"href","#"),xe(e,"disabled",n[4].disable)},m(m,g){O(m,e,g),R(e,i),R(i,o),O(m,r,g),a&&a.m(m,g),O(m,s,g),l||(d=oe(i,"click",u),l=!0)},p(m,g){n=m,g&1&&t!==(t=n[4].name+"")&&Re(o,t),g&1&&xe(e,"disabled",n[4].disable),n[4].divider?a||(a=Nt(),a.c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null)},d(m){m&&N(e),m&&N(r),a&&a.d(m),m&&N(s),l=!1,d()}}}function wo(n){let e,i=n[0],t=[];for(let o=0;o<i.length;o+=1)t[o]=Tt(Ot(n,i,o));return{c(){for(let o=0;o<t.length;o+=1)t[o].c();e=Be()},m(o,r){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(o,r);O(o,e,r)},p(o,r){if(r&1){i=o[0];let s;for(s=0;s<i.length;s+=1){const l=Ot(o,i,s);t[s]?t[s].p(l,r):(t[s]=Tt(l),t[s].c(),t[s].m(e.parentNode,e))}for(;s<t.length;s+=1)t[s].d(1);t.length=i.length}},d(o){Oe(t,o),o&&N(e)}}}function ko(n){let e,i;return e=new et({props:{minimal:n[2],name:n[1],$$slots:{default:[wo]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},p(t,[o]){const r={};o&4&&(r.minimal=t[2]),o&2&&(r.name=t[1]),o&129&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}function Eo(n,e){e.disable||e.action(n)}function Co(n,e,i){let{menuItems:t}=e,{name:o}=e,{minimal:r=!1}=e;const s=(l,d)=>Eo(d,l);return n.$$set=l=>{"menuItems"in l&&i(0,t=l.menuItems),"name"in l&&i(1,o=l.name),"minimal"in l&&i(2,r=l.minimal)},[t,o,r,s]}class at extends K{constructor(e){super(),X(this,e,Co,ko,Z,{menuItems:0,name:1,minimal:2})}}function gt(n,e){if(n==null)throw new Error("Columnnames may not be null.");const t=Y(Q).nodes(function(r){return r.isObserved()});if(t.length>0)for(var o=0;o<t.length;o++){const r=t[o],s=r.getLabel();n.includes(s)&&!r.isLinked()?r.link():!n.includes(s)&&r.isLinked()&&r.unlink()}}async function bn(n){Shiny.setInputValue("down-requestData",{goal:n,random:Math.random()})}function pt(){Y(Q).elements().remove(),hn(),B.update(e=>(e.parsedModel=!1,e)),ne.update(e=>(e.fix_first=!0,e.mode="user model",e)),Shiny.setInputValue("show_help",Math.random()),Ie.update(e=>{for(let i in e)e[i]=null;return e})}function ht(n){pt();let e=JSON.parse(n),i=Y(Q),t;t=JSON.parse(e.model);const o=JSON.parse(e.modelOpt),r=JSON.parse(e.gridViewOpt);if(Pt(ne,o),Pt(ne,r),e.fitCache!==void 0){const s=JSON.parse(e.fitCache);Ie.set(s)}B.update(s=>(s.loadingMode=!0,s)),i.json({elements:t}),i.nodes().forEach(s=>{s.style({width:s.data("width")}),s.style({height:s.data("height")})}),Y(B).dataAvail&&gt(Y(B).columnNames),Y(ne).mode!=="user model"?ue.update(s=>(s.showLav=!0,s)):ue.update(s=>(s.showLav=!1,s)),i.nodes().forEach(s=>{pe(s.id())}),B.update(s=>(s.loadingMode=!1,s))}function bt(){const n=Y(Q);n.nodes().forEach(l=>{l.data("width",l.width()),l.data("height",l.height())});let e=n.json().elements;e.nodes.forEach(l=>{l.classes=l.classes.split(" ").filter(d=>d!==Ue).join(" ")});const i=JSON.stringify(e),t=JSON.stringify(Y(ne)),o=JSON.stringify(Y(ne)),r=JSON.stringify(Y(Ie));return JSON.stringify({model:i,modelOpt:t,gridViewOpt:o,fitCache:r})}function Pt(n,e){n.update(i=>{for(let t in e)e.hasOwnProperty(t)&&e[t]!==void 0&&(i[t]=e[t]);return i})}function So(n){let e,i;return e=new at({props:{name:"File",menuItems:n[1],minimal:!n[0]}}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},p(t,[o]){const r={};o&2&&(r.menuItems=t[1]),o&1&&(r.minimal=!t[0]),e.$set(r)},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}function Lo(){document.getElementById("dataUpload-fileInput").click()}function xt(){const n=new Date;return`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}_${String(n.getHours()).padStart(2,"0")}-${String(n.getMinutes()).padStart(2,"0")}-${String(n.getSeconds()).padStart(2,"0")}`}function Mo(n,e,i){let t,o;te(n,B,$=>i(2,t=$)),te(n,mt,$=>i(3,o=$));let{full:r=!0}=e;H.use(Dn);function s(){t.modelEmpty?pt():bootbox.confirm("Are you sure you want to create a new model? This will delete the current model.",function($){$&&pt()})}function l($,y){dt.saveAs($,"model."+y)}async function d(){const $=document.createElement("input");$.setAttribute("type","file"),$.setAttribute("accept",".lvm");const y=await new Promise(T=>{$.addEventListener("change",C=>T(C.target.files[0])),$.click()}),w=await new Promise(T=>{const C=new FileReader;C.readAsText(y,"UTF-8"),C.onload=()=>T(C.result)});ht(w)}function u(){t.modelEmpty?d():bootbox.confirm("Are you sure you want to load a model? This will delete the current model.",function($){$&&d()})}document.getElementById("dataUpload-fileInput").addEventListener("change",function(){this.files&&this.files.length>0&&window.$("#upload-modal").modal()});function a(){t.modelEmpty?m():bootbox.confirm("Are you sure you want to load model and data? This will delete the current model and data.",function($){$&&m()})}function m(){const $=document.createElement("input");$.setAttribute("type","file"),$.setAttribute("accept",".lvd"),$.addEventListener("change",function(y){const w=y.target.files[0],T=new FileReader;T.readAsArrayBuffer(w),T.onload=function(){const C=T.result;Ct.loadAsync(C).then(function(p){p.file("data.csv").async("base64").then(function(P){Shiny.setInputValue("dataUpload-fileInput",{content:P});const A=setInterval(()=>{t.dataAvail&&(clearInterval(A),p.file("model.lvm").async("text").then(function(J){ht(J)}))},100)})})}}),$.click()}function g(){const $=bt();let y=new Blob([$],{type:"application/json;charset=utf-8"});dt.saveAs(y,"model_"+xt()+".lvm")}Shiny.addCustomMessageHandler("dataForDownload",function($){(async()=>{const y=bt(),w=new Ct;w.file("model.lvm",y),w.file("data.csv",$);const T=await w.generateAsync({type:"blob"}),C=new File([T],"model_"+xt()+".lvd",{type:"application/zip"});dt.saveAs(C)})()});function c(){const $=Y(Q);W(B,t.dataAvail=!1,t),W(B,t.columnNames=null,t),W(B,t.loadedFileName=null,t),W(B,t.ids=null,t),W(mt,o=null,o),$.nodes().unlink(),Shiny.setInputValue("dataUpload-deleteData",Math.random())}function f(){const $=Y(Q);l($.png({bg:"white"}),"png")}function v(){const $=Y(Q);l($.jpg(),"jpg")}function h(){return Y(Q).svg({scale:1,full:!0})}function b(){const $=h(),y=new Blob([$],{type:"image/svg+xml;charset=utf-8"});l(y,"svg")}function L(){bn("download")}async function _(){const $=h(),w=new DOMParser().parseFromString($,"image/svg+xml").documentElement;w.style.position="absolute",w.style.left="-9999px",document.body.appendChild(w);const T=w.getBoundingClientRect();document.body.removeChild(w);const C=T.width,p=T.height,P=new An({orientation:C>p?"landscape":"portrait",unit:"pt",format:[C,p]});await In(w,P,{width:C,height:p}),P.save("model.pdf")}let S;return n.$$set=$=>{"full"in $&&i(0,r=$.full)},n.$$.update=()=>{if(n.$$.dirty&5){let $=[{name:"New Model",action:s,divider:!0},{name:"Load Model",action:u},{name:"Load Data",action:Lo},{name:"Load Model and Data",action:a,divider:!0},{name:"Save Model",action:g,disable:t.modelEmpty},{name:"Save Model and Data",disable:t.modelEmpty||!t.dataAvail,action:L,divider:!0},{name:"Remove Data",action:c,disable:!t.dataAvail,divider:!0},{name:"Export Diagram to PNG",disable:t.modelEmpty,action:f},{name:"Export Diagram to JPG",disable:t.modelEmpty,action:v},{name:"Export Diagram to SVG",disable:t.modelEmpty,action:b},{name:"Export Diagram to PDF",disable:t.modelEmpty,action:_}];r?i(1,S=$):i(1,S=$.filter(y=>["Download Model","Load Model"].includes(y.name)||$.indexOf(y)>=$.length-4))}},[r,S,t]}class _n extends K{constructor(e){super(),X(this,e,Mo,So,Z,{full:0})}}function Do(n){let e;return{c(){e=U("span"),E(e,"class","glyphicon glyphicon-ok check-mark invisible"),E(e,"aria-hidden","true")},m(i,t){O(i,e,t)},d(i){i&&N(e)}}}function Ao(n){let e;return{c(){e=U("span"),E(e,"class","glyphicon glyphicon-ok check-mark"),E(e,"aria-hidden","true")},m(i,t){O(i,e,t)},d(i){i&&N(e)}}}function Io(n){let e,i,t,o,r,s,l,d,u;function a(c,f){return c[0]?Ao:Do}let m=a(n),g=m(n);return{c(){e=U("li"),i=U("label"),t=U("input"),o=V(),g.c(),r=V(),s=_e(n[1]),E(t,"type","checkbox"),E(t,"class","check-box svelte-17cge7g"),t.disabled=n[2],E(i,"class",l=Ve(n[2]?"disabled-label":"")+" svelte-17cge7g"),E(e,"class","svelte-17cge7g")},m(c,f){O(c,e,f),R(e,i),R(i,t),t.checked=n[0],R(i,o),g.m(i,null),R(i,r),R(i,s),d||(u=oe(t,"change",n[3]),d=!0)},p(c,[f]){f&4&&(t.disabled=c[2]),f&1&&(t.checked=c[0]),m!==(m=a(c))&&(g.d(1),g=m(c),g&&(g.c(),g.m(i,r))),f&2&&Re(s,c[1]),f&4&&l!==(l=Ve(c[2]?"disabled-label":"")+" svelte-17cge7g")&&E(i,"class",l)},i:ce,o:ce,d(c){c&&N(e),g.d(),d=!1,u()}}}function Fo(n,e,i){let{name:t}=e,{checked:o}=e,{disable:r=!1}=e;function s(){o=this.checked,i(0,o)}return n.$$set=l=>{"name"in l&&i(1,t=l.name),"checked"in l&&i(0,o=l.checked),"disable"in l&&i(2,r=l.disable)},[o,t,r,s]}class Se extends K{constructor(e){super(),X(this,e,Fo,Io,Z,{name:1,checked:0,disable:2})}}function Oo(n){let e;return{c(){e=U("span"),E(e,"class","glyphicon glyphicon-ok check-mark invisible"),E(e,"aria-hidden","true")},m(i,t){O(i,e,t)},d(i){i&&N(e)}}}function No(n){let e;return{c(){e=U("span"),E(e,"class","glyphicon glyphicon-ok check-mark"),E(e,"aria-hidden","true")},m(i,t){O(i,e,t)},d(i){i&&N(e)}}}function To(n){let e,i,t,o=!1,r,s,l,d,u,a,m,g;function c(h,b){return h[0]===h[2]?No:Oo}let f=c(n),v=f(n);return a=Sn(n[5][0]),{c(){e=U("div"),i=U("label"),t=U("input"),r=V(),v.c(),s=V(),l=_e(n[1]),E(t,"type","radio"),E(t,"name","meanStruc"),t.__value=n[2],t.value=t.__value,t.disabled=n[3],E(t,"class","svelte-lbhkwe"),E(i,"class",d=Ve(n[3]?"text-muted":"")+" svelte-lbhkwe"),E(e,"class",u=Ve(n[3]?"radio disabled":"radio")+" svelte-lbhkwe"),a.p(t)},m(h,b){O(h,e,b),R(e,i),R(i,t),t.checked=t.__value===n[0],R(i,r),v.m(i,null),R(i,s),R(i,l),m||(g=oe(t,"change",n[4]),m=!0)},p(h,[b]){b&4&&(t.__value=h[2],t.value=t.__value,o=!0),b&8&&(t.disabled=h[3]),(o||b&1)&&(t.checked=t.__value===h[0]),f!==(f=c(h))&&(v.d(1),v=f(h),v&&(v.c(),v.m(i,s))),b&2&&Re(l,h[1]),b&8&&d!==(d=Ve(h[3]?"text-muted":"")+" svelte-lbhkwe")&&E(i,"class",d),b&8&&u!==(u=Ve(h[3]?"radio disabled":"radio")+" svelte-lbhkwe")&&E(e,"class",u)},i:ce,o:ce,d(h){h&&N(e),v.d(),a.r(),m=!1,g()}}}function Po(n,e,i){let{name:t}=e,{value:o}=e,{group:r}=e,{isDisabled:s=!1}=e;const l=[[]];function d(){r=this.__value,i(0,r)}return n.$$set=u=>{"name"in u&&i(1,t=u.name),"value"in u&&i(2,o=u.value),"group"in u&&i(0,r=u.group),"isDisabled"in u&&i(3,s=u.isDisabled)},[r,t,o,s,d,l]}class tt extends K{constructor(e){super(),X(this,e,Po,To,Z,{name:1,value:2,group:0,isDisabled:3})}}const Vt=[{name:"Arrows Created by Lavaan",modelSlot:"showLav"},{name:"Variance Arrows",modelSlot:"showVar"},{name:"Mean Arrows",modelSlot:"showMean"}];let Rt=[{name:"Estimate",value:"est"},{name:"Confidence Interval",value:"ci"},{name:"Estimate + p-value (stars)",value:"estPVal"},{name:"Estimate + Standard Error",value:"estSE"}];function xo(n,e,i){const t=Y(Q),o=e?"_std":"",r=vn(n,o,i);t.style().selector("edge.hasEst").style({label:r}).update();const s=zo(n,o,i);t.style().selector("edge.hasEst.label").style({label:s}).update();const l=Bo(n,o,i);t.style().selector("edge.hasEstFixed").style({label:l}).update()}function Vo(n,e,i){function t(a){return a.reduce((m,g,c)=>(g&&m.push(c),m),[])}const o=Y(Q),r=[e,n,i],s=t(r),l=t(r.map(a=>!a)),d=s.concat(l);function u(a,m){return[c=>c.isLavaanAdded(),c=>c.isLoop(),c=>c.isMean()][a](m)}for(let a of d){const m=o.elements(function(g){return u(a,g)});if(r[a]?m.removeClass("hidden"):m.addClass("hidden"),a==2){const g=m.connectedEdges().connectedNodes(),c=m.connectedEdges();r[a]?c.forEach(f=>{f.removeClass("hidden")}):c.forEach(f=>{f.addClass("hidden")}),g.forEach(f=>{pe(f.id())})}else m.forEach(g=>{pe(g.source().id()),pe(g.target().id())})}}function Ro(n){return n===null?"NA":n<.001?"***":n<.01?"**":n<.05?"*":""}function vn(n,e,i){const t=o=>o===null?"NA":o.toFixed(i);switch(n){case"est":return o=>t(o.data("estimates")["est"+e]);case"ci":return o=>`[${t(o.data("estimates")["ciLow"+e])}, ${t(o.data("estimates")["ciHigh"+e])}]`;case"estPVal":return o=>`${t(o.data("estimates")["est"+e])}${Ro(o.data("estimates").p_value)}`;case"estSE":return o=>`${t(o.data("estimates")["est"+e])} (${t(o.data("estimates")["se"+e])})`;default:return()=>"NA"}}function zo(n,e,i){const t=vn(n,e,i);return o=>`${o.data("label")} = ${t(o)}`}function Bo(n,e,i){const t=o=>o===null?"NA":o.toFixed(i);return o=>"@"+t(o.data("estimates")["estFixed"+e])}function Uo(n){let e,i,t,o,r,s;return{c(){e=U("li"),i=_e(n[1]),t=V(),o=U("input"),ve(o,"width","4em"),E(o,"type","number"),E(o,"min",n[2]),ve(e,"padding-left","28px")},m(l,d){O(l,e,d),R(e,i),R(e,t),R(e,o),it(o,n[0]),r||(s=oe(o,"input",n[3]),r=!0)},p(l,[d]){d&2&&Re(i,l[1]),d&4&&E(o,"min",l[2]),d&1&&lt(o.value)!==l[0]&&it(o,l[0])},i:ce,o:ce,d(l){l&&N(e),r=!1,s()}}}function Go(n,e,i){let{name:t}=e,{value:o}=e,{min:r}=e;function s(){o=lt(this.value),i(0,o)}return n.$$set=l=>{"name"in l&&i(1,t=l.name),"value"in l&&i(0,o=l.value),"min"in l&&i(2,r=l.min)},[o,t,r,s]}class rt extends K{constructor(e){super(),X(this,e,Go,Uo,Z,{name:1,value:0,min:2})}}function zt(n,e,i){const t=n.slice();return t[9]=e[i],t}function Bt(n,e,i){const t=n.slice();return t[9]=e[i],t[12]=e,t[13]=i,t}function Ut(n){let e,i,t,o;function r(d){n[3](d,n[9])}function s(d){n[4](d,n[9])}let l={disable:!1};return n[9].name!==void 0&&(l.name=n[9].name),n[1][n[9].modelSlot]!==void 0&&(l.checked=n[1][n[9].modelSlot]),e=new Se({props:l}),se.push(()=>ae(e,"name",r)),se.push(()=>ae(e,"checked",s)),{c(){G(e.$$.fragment)},m(d,u){q(e,d,u),o=!0},p(d,u){n=d;const a={};!i&&u&4&&(i=!0,a.name=n[9].name,de(()=>i=!1)),!t&&u&6&&(t=!0,a.checked=n[1][n[9].modelSlot],de(()=>t=!1)),e.$set(a)},i(d){o||(M(e.$$.fragment,d),o=!0)},o(d){F(e.$$.fragment,d),o=!1},d(d){j(e,d)}}}function Gt(n){let e,i,t;function o(s){n[6](s)}let r={name:n[9].name,value:n[9].value};return n[1].view!==void 0&&(r.group=n[1].view),e=new tt({props:r}),se.push(()=>ae(e,"group",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),t=!0},p(s,l){const d={};!i&&l&2&&(i=!0,d.group=s[1].view,de(()=>i=!1)),e.$set(d)},i(s){t||(M(e.$$.fragment,s),t=!0)},o(s){F(e.$$.fragment,s),t=!1},d(s){j(e,s)}}}function qo(n){let e,i,t,o,r,s,l,d,u,a,m,g,c,f,v,h,b,L,_,S,$=n[2],y=[];for(let k=0;k<$.length;k+=1)y[k]=Ut(Bt(n,$,k));const w=k=>F(y[k],1,1,()=>{y[k]=null});function T(k){n[5](k)}let C={name:"Standardized Estimates",disable:!1};n[1].std!==void 0&&(C.checked=n[1].std),o=new Se({props:C}),se.push(()=>ae(o,"checked",T));let p=Rt,P=[];for(let k=0;k<p.length;k+=1)P[k]=Gt(zt(n,p,k));const A=k=>F(P[k],1,1,()=>{P[k]=null});function J(k){n[8](k)}let I={name:"Number Digits",min:0};return n[1].number_digits!==void 0&&(I.value=n[1].number_digits),h=new rt({props:I}),se.push(()=>ae(h,"value",J)),{c(){for(let k=0;k<y.length;k+=1)y[k].c();e=V(),i=U("li"),t=V(),G(o.$$.fragment),s=V(),l=U("li"),d=V();for(let k=0;k<P.length;k+=1)P[k].c();u=V(),a=U("li"),m=V(),g=U("li"),c=_e(`Confidence Level
    `),f=U("input"),v=V(),G(h.$$.fragment),E(i,"class","divider"),E(l,"class","divider"),E(a,"class","divider"),E(f,"type","number"),E(f,"min","0"),E(f,"max","0.999999"),E(f,"step","0.01"),ve(f,"width","4em"),ve(g,"padding-left","28px")},m(k,D){for(let z=0;z<y.length;z+=1)y[z]&&y[z].m(k,D);O(k,e,D),O(k,i,D),O(k,t,D),q(o,k,D),O(k,s,D),O(k,l,D),O(k,d,D);for(let z=0;z<P.length;z+=1)P[z]&&P[z].m(k,D);O(k,u,D),O(k,a,D),O(k,m,D),O(k,g,D),R(g,c),R(g,f),it(f,n[1].ci),O(k,v,D),q(h,k,D),L=!0,_||(S=oe(f,"input",n[7]),_=!0)},p(k,D){if(D&6){$=k[2];let ee;for(ee=0;ee<$.length;ee+=1){const x=Bt(k,$,ee);y[ee]?(y[ee].p(x,D),M(y[ee],1)):(y[ee]=Ut(x),y[ee].c(),M(y[ee],1),y[ee].m(e.parentNode,e))}for($e(),ee=$.length;ee<y.length;ee+=1)w(ee);ye()}const z={};if(!r&&D&2&&(r=!0,z.checked=k[1].std,de(()=>r=!1)),o.$set(z),D&2){p=Rt;let ee;for(ee=0;ee<p.length;ee+=1){const x=zt(k,p,ee);P[ee]?(P[ee].p(x,D),M(P[ee],1)):(P[ee]=Gt(x),P[ee].c(),M(P[ee],1),P[ee].m(u.parentNode,u))}for($e(),ee=p.length;ee<P.length;ee+=1)A(ee);ye()}D&2&&lt(f.value)!==k[1].ci&&it(f,k[1].ci);const fe={};!b&&D&2&&(b=!0,fe.value=k[1].number_digits,de(()=>b=!1)),h.$set(fe)},i(k){if(!L){for(let D=0;D<$.length;D+=1)M(y[D]);M(o.$$.fragment,k);for(let D=0;D<p.length;D+=1)M(P[D]);M(h.$$.fragment,k),L=!0}},o(k){y=y.filter(Boolean);for(let D=0;D<y.length;D+=1)F(y[D]);F(o.$$.fragment,k),P=P.filter(Boolean);for(let D=0;D<P.length;D+=1)F(P[D]);F(h.$$.fragment,k),L=!1},d(k){Oe(y,k),k&&N(e),k&&N(i),k&&N(t),j(o,k),k&&N(s),k&&N(l),k&&N(d),Oe(P,k),k&&N(u),k&&N(a),k&&N(m),k&&N(g),k&&N(v),j(h,k),_=!1,S()}}}function jo(n){let e,i;return e=new et({props:{name:"View",minimal:n[0],$$slots:{default:[qo]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},p(t,[o]){const r={};o&1&&(r.minimal=t[0]),o&16390&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}function Ho(n,e,i){let t;te(n,ue,m=>i(1,t=m));let{minimal:o=!1}=e;function r(m,g){n.$$.not_equal(g.name,m)&&(g.name=m,i(2,Vt))}function s(m,g){n.$$.not_equal(t[g.modelSlot],m)&&(t[g.modelSlot]=m,ue.set(t))}function l(m){n.$$.not_equal(t.std,m)&&(t.std=m,ue.set(t))}function d(m){n.$$.not_equal(t.view,m)&&(t.view=m,ue.set(t))}function u(){t.ci=lt(this.value),ue.set(t)}function a(m){n.$$.not_equal(t.number_digits,m)&&(t.number_digits=m,ue.set(t))}return n.$$set=m=>{"minimal"in m&&i(0,o=m.minimal)},n.$$.update=()=>{n.$$.dirty&2&&Shiny.setInputValue("ests-confindence_level",t.ci)},[o,t,Vt,r,s,l,d,u,a]}class $n extends K{constructor(e){super(),X(this,e,Ho,jo,Z,{minimal:0})}}function qt(n,e,i){const t=n.slice();return t[9]=e[i],t}function jt(n,e,i){const t=n.slice();return t[9]=e[i],t}function Ht(n,e,i){const t=n.slice();return t[9]=e[i],t}function Wt(n){let e,i,t;function o(s){n[4](s)}let r={name:n[9].name,value:n[9].value};return n[0].estimator!==void 0&&(r.group=n[0].estimator),e=new tt({props:r}),se.push(()=>ae(e,"group",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),t=!0},p(s,l){const d={};!i&&l&1&&(i=!0,d.group=s[0].estimator,de(()=>i=!1)),e.$set(d)},i(s){t||(M(e.$$.fragment,s),t=!0)},o(s){F(e.$$.fragment,s),t=!1},d(s){j(e,s)}}}function Yt(n){let e,i,t;function o(s){n[5](s)}let r={name:n[9].name,value:n[9].value};return n[0].se!==void 0&&(r.group=n[0].se),e=new tt({props:r}),se.push(()=>ae(e,"group",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),t=!0},p(s,l){const d={};!i&&l&1&&(i=!0,d.group=s[0].se,de(()=>i=!1)),e.$set(d)},i(s){t||(M(e.$$.fragment,s),t=!0)},o(s){F(e.$$.fragment,s),t=!1},d(s){j(e,s)}}}function Jt(n){let e,i,t;function o(s){n[7](s)}let r={name:n[9].name,value:n[9].value};return n[0].missing!==void 0&&(r.group=n[0].missing),e=new tt({props:r}),se.push(()=>ae(e,"group",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),t=!0},p(s,l){const d={};!i&&l&1&&(i=!0,d.group=s[0].missing,de(()=>i=!1)),e.$set(d)},i(s){t||(M(e.$$.fragment,s),t=!0)},o(s){F(e.$$.fragment,s),t=!1},d(s){j(e,s)}}}function Wo(n){let e,i,t,o,r,s,l,d,u,a,m,g,c,f,v,h,b,L,_=n[1],S=[];for(let I=0;I<_.length;I+=1)S[I]=Wt(Ht(n,_,I));const $=I=>F(S[I],1,1,()=>{S[I]=null});let y=n[2],w=[];for(let I=0;I<y.length;I+=1)w[I]=Yt(jt(n,y,I));const T=I=>F(w[I],1,1,()=>{w[I]=null});function C(I){n[6](I)}let p={name:"Number of Bootstrap Samples:",min:5};n[0].n_boot!==void 0&&(p.value=n[0].n_boot),m=new rt({props:p}),se.push(()=>ae(m,"value",C));let P=n[3],A=[];for(let I=0;I<P.length;I+=1)A[I]=Jt(qt(n,P,I));const J=I=>F(A[I],1,1,()=>{A[I]=null});return{c(){e=U("li"),i=U("a"),i.textContent="Estimator",t=V(),o=U("ul");for(let I=0;I<S.length;I+=1)S[I].c();r=V(),s=U("li"),l=U("a"),l.textContent="Standard Error",d=V(),u=U("ul");for(let I=0;I<w.length;I+=1)w[I].c();a=V(),G(m.$$.fragment),c=V(),f=U("li"),v=U("a"),v.textContent="Missing Values",h=V(),b=U("ul");for(let I=0;I<A.length;I+=1)A[I].c();E(i,"tabindex","-1"),E(i,"href","#"),E(i,"class","svelte-143y7r6"),E(o,"class","dropdown-menu svelte-143y7r6"),E(e,"class","dropdown-submenu svelte-143y7r6"),E(l,"tabindex","-1"),E(l,"href","#"),E(l,"class","svelte-143y7r6"),E(u,"class","dropdown-menu svelte-143y7r6"),E(s,"class","dropdown-submenu svelte-143y7r6"),E(v,"tabindex","-1"),E(v,"href","#"),E(v,"class","svelte-143y7r6"),E(b,"class","dropdown-menu svelte-143y7r6"),E(f,"class","dropdown-submenu svelte-143y7r6")},m(I,k){O(I,e,k),R(e,i),R(e,t),R(e,o);for(let D=0;D<S.length;D+=1)S[D]&&S[D].m(o,null);O(I,r,k),O(I,s,k),R(s,l),R(s,d),R(s,u);for(let D=0;D<w.length;D+=1)w[D]&&w[D].m(u,null);R(u,a),q(m,u,null),O(I,c,k),O(I,f,k),R(f,v),R(f,h),R(f,b);for(let D=0;D<A.length;D+=1)A[D]&&A[D].m(b,null);L=!0},p(I,k){if(k&3){_=I[1];let z;for(z=0;z<_.length;z+=1){const fe=Ht(I,_,z);S[z]?(S[z].p(fe,k),M(S[z],1)):(S[z]=Wt(fe),S[z].c(),M(S[z],1),S[z].m(o,null))}for($e(),z=_.length;z<S.length;z+=1)$(z);ye()}if(k&5){y=I[2];let z;for(z=0;z<y.length;z+=1){const fe=jt(I,y,z);w[z]?(w[z].p(fe,k),M(w[z],1)):(w[z]=Yt(fe),w[z].c(),M(w[z],1),w[z].m(u,a))}for($e(),z=y.length;z<w.length;z+=1)T(z);ye()}const D={};if(!g&&k&1&&(g=!0,D.value=I[0].n_boot,de(()=>g=!1)),m.$set(D),k&9){P=I[3];let z;for(z=0;z<P.length;z+=1){const fe=qt(I,P,z);A[z]?(A[z].p(fe,k),M(A[z],1)):(A[z]=Jt(fe),A[z].c(),M(A[z],1),A[z].m(b,null))}for($e(),z=P.length;z<A.length;z+=1)J(z);ye()}},i(I){if(!L){for(let k=0;k<_.length;k+=1)M(S[k]);for(let k=0;k<y.length;k+=1)M(w[k]);M(m.$$.fragment,I);for(let k=0;k<P.length;k+=1)M(A[k]);L=!0}},o(I){S=S.filter(Boolean);for(let k=0;k<S.length;k+=1)F(S[k]);w=w.filter(Boolean);for(let k=0;k<w.length;k+=1)F(w[k]);F(m.$$.fragment,I),A=A.filter(Boolean);for(let k=0;k<A.length;k+=1)F(A[k]);L=!1},d(I){I&&N(e),Oe(S,I),I&&N(r),I&&N(s),Oe(w,I),j(m),I&&N(c),I&&N(f),Oe(A,I)}}}function Yo(n){let e,i;return e=new et({props:{name:Jo,$$slots:{default:[Wo]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},p(t,[o]){const r={};o&65537&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}const Jo="Estimation";function Ko(n,e,i){let t;te(n,ne,m=>i(0,t=m));const o=[{value:"default",name:"Default"},{value:"ML",name:"Maximum Likelihood (ML)"},{value:"GLS",name:"Generalized Least Squares (GLS)"},{value:"WLS",name:"Weighted Least Squares (WLS)"},{value:"ULS",name:"Unweighted Least Squares (ULS)"},{value:"DWLS",name:"Diagonally Weighted Least Squares (DWLS)"},{value:"DLS",name:"Distributionally-weighted Least Squares (DLW)"}],r=[{value:"default",name:"Default"},{value:"robust",name:"Robust"},{value:"boot",name:"Bootstrap"}],s=[{value:"listwise",name:"Listwise Deletion"},{value:"ml",name:"Full Information Maximum Likelihood (FIML)"}];function l(m){n.$$.not_equal(t.estimator,m)&&(t.estimator=m,ne.set(t))}function d(m){n.$$.not_equal(t.se,m)&&(t.se=m,ne.set(t))}function u(m){n.$$.not_equal(t.n_boot,m)&&(t.n_boot=m,ne.set(t))}function a(m){n.$$.not_equal(t.missing,m)&&(t.missing=m,ne.set(t))}return[t,o,r,s,l,d,u,a]}class Xo extends K{constructor(e){super(),X(this,e,Ko,Yo,Z,{})}}let ft=0,yn=!1;function wn(){return typeof Shiny=="object"&&Shiny!==null}function Zo(n){const e=Object.keys(n),i=n[e[0]].length,t=[];for(let o=0;o<i;o++){const r={};for(const s of e)r[s]=n[s][o];t.push(r)}return t}function ot(n,e=!0){yn=e,ft=ft+1;let i=mn(!0);i.name=n,i.counter=ft,wn()&&Shiny.setInputValue("layout-layout",JSON.stringify(i))}wn()&&Shiny.addCustomMessageHandler("semPlotLayout",function(n){n=Zo(n);const e=125,i=200;let t=1/0,o=1/0;for(let u=0;u<n.length;u++)for(let a=u+1;a<n.length;a++){const m=Math.abs(n[u].x-n[a].x),g=Math.abs(n[u].y-n[a].y);m<t&&n[u].y===n[a].y&&(t=m),g<o&&g!==0&&(o=g)}const r=e/t,s=i/o;let l={};n.forEach(u=>{const a=u.x*r+400,m=u.y*-1*s+400;l[u.name]={x:a,y:m}});let d={name:"preset",positions:function(u){const a=u.data("label");return l[a]},fit:!0,padding:60,animate:!0};yn?Y(De).do("layout",{options:d}):Y(Q).layout(d).run()});function Qo(n){let e,i;return e=new at({props:{name:"Apply Layout",menuItems:n[1],minimal:n[0]}}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},p(t,[o]){const r={};o&2&&(r.menuItems=t[1]),o&1&&(r.minimal=t[0]),e.$set(r)},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}function ei(n,e,i){let t,o,r;te(n,B,g=>i(2,o=g)),te(n,De,g=>i(3,r=g));let{minimal:s=!1}=e;Y(Q),we(()=>{H.use(Fn),H.use(On),H.use(Nn)});function l(){const g={name:"dagre",rankSep:150,animate:!0};r.do("layout",{options:g})}function d(){const g={name:"breadthfirst",animate:!0,spacingFactor:1};r.do("layout",{options:g})}function u(){const g={name:"circle",animate:!0};r.do("layout",{options:g})}function a(){const g={name:"fcose",animate:!0,idealEdgeLength:c=>150,quality:"proof",randomize:!1,nodeSeparation:200};r.do("layout",{options:g})}function m(){const g={name:"cola",animate:!0,nodeSpacing(c){return 50}};r.do("layout",{options:g})}return n.$$set=g=>{"minimal"in g&&i(0,s=g.minimal)},n.$$.update=()=>{n.$$.dirty&4&&i(1,t=[{name:"Recommended: Tree",action:()=>ot("tree"),disable:o.modelEmpty},{name:"Recommended: Tree2",action:()=>ot("tree2"),disable:o.modelEmpty},{name:"Recommended: Tree3",action:()=>ot("tree3"),disable:o.modelEmpty,divider:!0},{name:"Experimental: Tree",action:l,disable:o.modelEmpty},{name:"Experimental: Tree2",action:d,disable:o.modelEmpty},{name:"Experimental: Circle",action:u,disable:o.modelEmpty},{name:"Experimental: Force-directed",action:a,disable:o.modelEmpty},{name:"Experimental: Cola",action:m,disable:o.modelEmpty}])},[s,t,o]}class kn extends K{constructor(e){super(),X(this,e,ei,Qo,Z,{minimal:0})}}function Kt(n,e,i){const t=n.slice();return t[11]=e[i],t[12]=e,t[13]=i,t}function Xt(n,e,i){const t=n.slice();return t[11]=e[i],t}function Zt(n){let e,i,t;function o(s){n[4](s)}let r={name:n[11].name,value:n[11].value};return n[0].meanStruc!==void 0&&(r.group=n[0].meanStruc),e=new tt({props:r}),se.push(()=>ae(e,"group",o)),{c(){G(e.$$.fragment)},m(s,l){q(e,s,l),t=!0},p(s,l){const d={};!i&&l&1&&(i=!0,d.group=s[0].meanStruc,de(()=>i=!1)),e.$set(d)},i(s){t||(M(e.$$.fragment,s),t=!0)},o(s){F(e.$$.fragment,s),t=!1},d(s){j(e,s)}}}function Qt(n){let e,i,t,o;function r(d){n[9](d,n[11])}function s(d){n[10](d,n[11])}let l={};return n[11].name!==void 0&&(l.name=n[11].name),n[0][n[11].modelProperty]!==void 0&&(l.checked=n[0][n[11].modelProperty]),e=new Se({props:l}),se.push(()=>ae(e,"name",r)),se.push(()=>ae(e,"checked",s)),{c(){G(e.$$.fragment)},m(d,u){q(e,d,u),o=!0},p(d,u){n=d;const a={};!i&&u&2&&(i=!0,a.name=n[11].name,de(()=>i=!1)),!t&&u&3&&(t=!0,a.checked=n[0][n[11].modelProperty],de(()=>t=!1)),e.$set(a)},i(d){o||(M(e.$$.fragment,d),o=!0)},o(d){F(e.$$.fragment,d),o=!1},d(d){j(e,d)}}}function ti(n){let e,i,t,o,r,s,l,d,u,a,m,g,c,f,v,h=n[3],b=[];for(let A=0;A<h.length;A+=1)b[A]=Zt(Xt(n,h,A));const L=A=>F(b[A],1,1,()=>{b[A]=null});function _(A){n[5](A)}function S(A){n[6](A)}let $={name:"Add Intercepts for all Observed Variables"};n[0].intOvFree!==void 0&&($.checked=n[0].intOvFree),n[2]!==void 0&&($.disable=n[2]),s=new Se({props:$}),se.push(()=>ae(s,"checked",_)),se.push(()=>ae(s,"disable",S));function y(A){n[7](A)}function w(A){n[8](A)}let T={name:"Add Intercepts for all Latent Variables"};n[0].intLvFree!==void 0&&(T.checked=n[0].intLvFree),n[2]!==void 0&&(T.disable=n[2]),a=new Se({props:T}),se.push(()=>ae(a,"checked",y)),se.push(()=>ae(a,"disable",w));let C=n[1],p=[];for(let A=0;A<C.length;A+=1)p[A]=Qt(Kt(n,C,A));const P=A=>F(p[A],1,1,()=>{p[A]=null});return{c(){e=U("li"),i=U("a"),i.textContent="Add Means?",t=V(),o=U("ul");for(let A=0;A<b.length;A+=1)b[A].c();r=V(),G(s.$$.fragment),u=V(),G(a.$$.fragment),c=V();for(let A=0;A<p.length;A+=1)p[A].c();f=Be(),E(i,"tabindex","-1"),E(i,"href","#"),E(i,"class","svelte-143y7r6"),E(o,"class","dropdown-menu svelte-143y7r6"),E(e,"class","dropdown-submenu svelte-143y7r6")},m(A,J){O(A,e,J),R(e,i),R(e,t),R(e,o);for(let I=0;I<b.length;I+=1)b[I]&&b[I].m(o,null);O(A,r,J),q(s,A,J),O(A,u,J),q(a,A,J),O(A,c,J);for(let I=0;I<p.length;I+=1)p[I]&&p[I].m(A,J);O(A,f,J),v=!0},p(A,J){if(J&9){h=A[3];let D;for(D=0;D<h.length;D+=1){const z=Xt(A,h,D);b[D]?(b[D].p(z,J),M(b[D],1)):(b[D]=Zt(z),b[D].c(),M(b[D],1),b[D].m(o,null))}for($e(),D=h.length;D<b.length;D+=1)L(D);ye()}const I={};!l&&J&1&&(l=!0,I.checked=A[0].intOvFree,de(()=>l=!1)),!d&&J&4&&(d=!0,I.disable=A[2],de(()=>d=!1)),s.$set(I);const k={};if(!m&&J&1&&(m=!0,k.checked=A[0].intLvFree,de(()=>m=!1)),!g&&J&4&&(g=!0,k.disable=A[2],de(()=>g=!1)),a.$set(k),J&3){C=A[1];let D;for(D=0;D<C.length;D+=1){const z=Kt(A,C,D);p[D]?(p[D].p(z,J),M(p[D],1)):(p[D]=Qt(z),p[D].c(),M(p[D],1),p[D].m(f.parentNode,f))}for($e(),D=C.length;D<p.length;D+=1)P(D);ye()}},i(A){if(!v){for(let J=0;J<h.length;J+=1)M(b[J]);M(s.$$.fragment,A),M(a.$$.fragment,A);for(let J=0;J<C.length;J+=1)M(p[J]);v=!0}},o(A){b=b.filter(Boolean);for(let J=0;J<b.length;J+=1)F(b[J]);F(s.$$.fragment,A),F(a.$$.fragment,A),p=p.filter(Boolean);for(let J=0;J<p.length;J+=1)F(p[J]);v=!1},d(A){A&&N(e),Oe(b,A),A&&N(r),j(s,A),A&&N(u),j(a,A),A&&N(c),Oe(p,A),A&&N(f)}}}function ni(n){let e,i;return e=new et({props:{name:oi,$$slots:{default:[ti]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},p(t,[o]){const r={};o&65543&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}const oi="Automatically...";function ii(n,e,i){let t,o;te(n,ne,f=>i(0,o=f));const r=[{name:"Fix Factor Loading of First Indicator at 1",modelProperty:"fix_first"},{name:"Include Variances",modelProperty:"auto_var"},{name:"Include Covariances of Exogenous Latent Variables",modelProperty:"auto_cov_lv_x"},{name:"Include Covariances of Dependent Variables",modelProperty:"auto_cov_y"},{name:"Fix Variance of Only Indicator to 0",modelProperty:"fix_single"},{name:"Treat Exogenous Observed Variables as Fixed Variables",modelProperty:"fixed_x"},{name:"Include Freely Estimated Thresholds for Ordered Variables",modelProperty:"auto.th"},{name:"Include Freely Estimated Response Scaling Parameters for Ordered Variables",modelProperty:"auto.delta"}];let s=[{name:"Default",value:"default"},{name:"Yes",value:"true"},{name:"No",value:"false"}];function l(f){n.$$.not_equal(o.meanStruc,f)&&(o.meanStruc=f,ne.set(o))}function d(f){n.$$.not_equal(o.intOvFree,f)&&(o.intOvFree=f,ne.set(o))}function u(f){t=f,i(2,t),i(0,o)}function a(f){n.$$.not_equal(o.intLvFree,f)&&(o.intLvFree=f,ne.set(o))}function m(f){t=f,i(2,t),i(0,o)}function g(f,v){n.$$.not_equal(v.name,f)&&(v.name=f,i(1,r))}function c(f,v){n.$$.not_equal(o[v.modelProperty],f)&&(o[v.modelProperty]=f,ne.set(o))}return n.$$.update=()=>{n.$$.dirty&1&&i(2,t=o.meanStruc==="false")},[o,r,t,s,l,d,u,a,m,g,c]}class si extends K{constructor(e){super(),X(this,e,ii,ni,Z,{})}}function ri(n){let e,i;return e=new at({props:{name:"Help",menuItems:n[0]}}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},p:ce,i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}function li(){Shiny.setInputValue("show_help",Math.random())}function ai(){window.open("https://doi.org/10.1080/10705511.2024.2420678","_blank")}function di(){bootbox.alert({title:"How to Cite",message:'If you use lavaangui, please consider citing the following paper:<br> Karch, J. D. (2025). lavaangui: A Web-Based Graphical Interface for Specifying Lavaan Models by Drawing Path Diagrams. <i>Structural Equation Modeling: A Multidisciplinary Journal.</i> <a href="https://doi.org/10.1080/10705511.2024.2420678" target="_blank">https://doi.org/10.1080/10705511.2024.2420678</a>'})}function ui(n){let e;const i=[{name:"Show Commands",action:li},{name:"Open Tutorial",action:ai},{name:"About",action:t},{name:"Cite",action:di}];function t(){bootbox.alert({title:"About Lavaangui",message:`Version: ${e}<br> Author: Julian D. Karch<br> Email: j.d.karch@fsw.leidenuniv.nl <br> lavaangui is BETA software. Please report any bugs at https://github.com/karchjd/lavaangui/issues.`})}return Shiny.addCustomMessageHandler("version",function(o){e=o[0].join(".")}),[i]}class ci extends K{constructor(e){super(),X(this,e,ui,ri,Z,{})}}function fi(n){let e,i,t,o,r,s,l,d,u,a,m,g,c,f,v,h,b,L,_,S,$;function y(x){n[2](x)}let w={name:"Show Grid"};n[1].gridShow!==void 0&&(w.checked=n[1].gridShow),e=new Se({props:w}),se.push(()=>ae(e,"checked",y));function T(x){n[3](x)}let C={name:"Snap to Grid"};n[1].gridSnap!==void 0&&(C.checked=n[1].gridSnap),o=new Se({props:C}),se.push(()=>ae(o,"checked",T));function p(x){n[4](x)}let P={name:"Resize to Grid"};n[1].gridResize!==void 0&&(P.checked=n[1].gridResize),l=new Se({props:P}),se.push(()=>ae(l,"checked",p));function A(x){n[5](x)}let J={name:"Snap to Alignment on Release"};n[1].gridAlign!==void 0&&(J.checked=n[1].gridAlign),a=new Se({props:J}),se.push(()=>ae(a,"checked",A));function I(x){n[6](x)}let k={name:"Move Grid on Pan"};n[1].gridMovePan!==void 0&&(k.checked=n[1].gridMovePan),c=new Se({props:k}),se.push(()=>ae(c,"checked",I));function D(x){n[7](x)}let z={name:"Grid Spacing:",min:5};n[1].gridSpace!==void 0&&(z.value=n[1].gridSpace),h=new rt({props:z}),se.push(()=>ae(h,"value",D));function fe(x){n[8](x)}let ee={name:"Line Width:",min:0};return n[1].gridWidth!==void 0&&(ee.value=n[1].gridWidth),_=new rt({props:ee}),se.push(()=>ae(_,"value",fe)),{c(){G(e.$$.fragment),t=V(),G(o.$$.fragment),s=V(),G(l.$$.fragment),u=V(),G(a.$$.fragment),g=V(),G(c.$$.fragment),v=V(),G(h.$$.fragment),L=V(),G(_.$$.fragment)},m(x,re){q(e,x,re),O(x,t,re),q(o,x,re),O(x,s,re),q(l,x,re),O(x,u,re),q(a,x,re),O(x,g,re),q(c,x,re),O(x,v,re),q(h,x,re),O(x,L,re),q(_,x,re),$=!0},p(x,re){const Ge={};!i&&re&2&&(i=!0,Ge.checked=x[1].gridShow,de(()=>i=!1)),e.$set(Ge);const vt={};!r&&re&2&&(r=!0,vt.checked=x[1].gridSnap,de(()=>r=!1)),o.$set(vt);const $t={};!d&&re&2&&(d=!0,$t.checked=x[1].gridResize,de(()=>d=!1)),l.$set($t);const yt={};!m&&re&2&&(m=!0,yt.checked=x[1].gridAlign,de(()=>m=!1)),a.$set(yt);const wt={};!f&&re&2&&(f=!0,wt.checked=x[1].gridMovePan,de(()=>f=!1)),c.$set(wt);const kt={};!b&&re&2&&(b=!0,kt.value=x[1].gridSpace,de(()=>b=!1)),h.$set(kt);const Et={};!S&&re&2&&(S=!0,Et.value=x[1].gridWidth,de(()=>S=!1)),_.$set(Et)},i(x){$||(M(e.$$.fragment,x),M(o.$$.fragment,x),M(l.$$.fragment,x),M(a.$$.fragment,x),M(c.$$.fragment,x),M(h.$$.fragment,x),M(_.$$.fragment,x),$=!0)},o(x){F(e.$$.fragment,x),F(o.$$.fragment,x),F(l.$$.fragment,x),F(a.$$.fragment,x),F(c.$$.fragment,x),F(h.$$.fragment,x),F(_.$$.fragment,x),$=!1},d(x){j(e,x),x&&N(t),j(o,x),x&&N(s),j(l,x),x&&N(u),j(a,x),x&&N(g),j(c,x),x&&N(v),j(h,x),x&&N(L),j(_,x)}}}function mi(n){let e,i;return e=new et({props:{minimal:n[0],name:"Grid Options",$$slots:{default:[fi]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},p(t,[o]){const r={};o&1&&(r.minimal=t[0]),o&514&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}function gi(n,e,i){let t;te(n,ue,g=>i(1,t=g));let{minimal:o=!1}=e;function r(g){n.$$.not_equal(t.gridShow,g)&&(t.gridShow=g,ue.set(t))}function s(g){n.$$.not_equal(t.gridSnap,g)&&(t.gridSnap=g,ue.set(t))}function l(g){n.$$.not_equal(t.gridResize,g)&&(t.gridResize=g,ue.set(t))}function d(g){n.$$.not_equal(t.gridAlign,g)&&(t.gridAlign=g,ue.set(t))}function u(g){n.$$.not_equal(t.gridMovePan,g)&&(t.gridMovePan=g,ue.set(t))}function a(g){n.$$.not_equal(t.gridSpace,g)&&(t.gridSpace=g,ue.set(t))}function m(g){n.$$.not_equal(t.gridWidth,g)&&(t.gridWidth=g,ue.set(t))}return n.$$set=g=>{"minimal"in g&&i(0,o=g.minimal)},[o,t,r,s,l,d,u,a,m]}class En extends K{constructor(e){super(),X(this,e,gi,mi,Z,{minimal:0})}}function pi(n){return window.$(document).ready(function(){var e=!1;window.$(".navbar .dropdown").hover(function(){e&&(window.$(".navbar .dropdown").removeClass("open"),window.$(this).addClass("open"))},function(){}),window.$(".navbar .dropdown").on("show.bs.dropdown",function(){e=!0}),window.$(".navbar .dropdown").on("hide.bs.dropdown",function(){window.$(".navbar .dropdown.open").length<=1&&(e=!1)})}),[]}class hi extends K{constructor(e){super(),X(this,e,pi,null,Z,{})}}function bi(n){let e,i;return e=new at({props:{name:"Edit",menuItems:n[0]}}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},p(t,[o]){const r={};o&1&&(r.menuItems=t[0]),e.$set(r)},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}function _i(n,e,i){let t,o;te(n,B,d=>i(1,t=d)),te(n,De,d=>i(2,o=d));function r(){o.undo()}function s(){o.redo()}let l=[];return n.$$.update=()=>{n.$$.dirty&2&&i(0,l=[{name:"Undo",action:r,disable:t.undoEmpty},{name:"Redo",action:s,disable:t.redoEmpty}])},[l,t]}class vi extends K{constructor(e){super(),X(this,e,_i,bi,Z,{})}}function $i(n){let e,i,t,o,r,s,l,d,u,a,m,g,c,f,v,h,b,L;return e=new _n({}),t=new vi({}),r=new $n({}),l=new si({}),u=new Xo({}),m=new kn({}),c=new En({}),v=new ci({}),b=new hi({}),{c(){G(e.$$.fragment),i=V(),G(t.$$.fragment),o=V(),G(r.$$.fragment),s=V(),G(l.$$.fragment),d=V(),G(u.$$.fragment),a=V(),G(m.$$.fragment),g=V(),G(c.$$.fragment),f=V(),G(v.$$.fragment),h=V(),G(b.$$.fragment)},m(_,S){q(e,_,S),O(_,i,S),q(t,_,S),O(_,o,S),q(r,_,S),O(_,s,S),q(l,_,S),O(_,d,S),q(u,_,S),O(_,a,S),q(m,_,S),O(_,g,S),q(c,_,S),O(_,f,S),q(v,_,S),O(_,h,S),q(b,_,S),L=!0},i(_){L||(M(e.$$.fragment,_),M(t.$$.fragment,_),M(r.$$.fragment,_),M(l.$$.fragment,_),M(u.$$.fragment,_),M(m.$$.fragment,_),M(c.$$.fragment,_),M(v.$$.fragment,_),M(b.$$.fragment,_),L=!0)},o(_){F(e.$$.fragment,_),F(t.$$.fragment,_),F(r.$$.fragment,_),F(l.$$.fragment,_),F(u.$$.fragment,_),F(m.$$.fragment,_),F(c.$$.fragment,_),F(v.$$.fragment,_),F(b.$$.fragment,_),L=!1},d(_){j(e,_),_&&N(i),j(t,_),_&&N(o),j(r,_),_&&N(s),j(l,_),_&&N(d),j(u,_),_&&N(a),j(m,_),_&&N(g),j(c,_),_&&N(f),j(v,_),_&&N(h),j(b,_)}}}function yi(n){let e,i;return e=new vo({props:{$$slots:{default:[$i]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},p(t,[o]){const r={};o&1&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}class wi extends K{constructor(e){super(),X(this,e,null,yi,Z,{})}}function ki(n){let e;return{c(){e=U("pre"),E(e,"id","res-results"),E(e,"class","shiny-html-output well svelte-74yvxb"),E(e,"data-testid","result-text")},m(i,t){O(i,e,t)},p:ce,i:ce,o:ce,d(i){i&&N(e)}}}class Ei extends K{constructor(e){super(),X(this,e,null,ki,Z,{})}}function Ci(n){return window.cy=Y(Q),B.subscribe(e=>{window.appState=e}),ne.subscribe(e=>{window.modelOptions=e}),mt.subscribe(e=>{window.dataInfo=e}),Ie.subscribe(e=>{window.fitCache=e}),ue.subscribe(e=>{window.gridViewOptions=e}),De.subscribe(e=>{window.ur=e}),[]}class Si extends K{constructor(e){super(),X(this,e,Ci,null,Z,{})}}function Li(n){return new RegExp("^[a-zA-Z\\._][a-zA-Z0-9\\._]*(?<!\\.)$").test(n)}function en(n){return n==""?(bootbox.alert("Provide a label"),!1):Li(n)?!0:(bootbox.alert("Provide a valid label"),!1)}function Mi(n,e){const i=e?"full":"minimal";return n.filter(t=>t.show===i||t.show==="both")}function Di(n,e,i){let t,o,r;te(n,B,c=>i(1,t=c)),te(n,De,c=>i(2,o=c)),te(n,ne,c=>i(3,r=c));let s=Y(Q);H.use(Tn);var l=new Pn.ColorPicker("#picker",{width:200,color:"rgb(255, 0, 0)",borderWidth:1,borderColor:"#fff"});function d(c,f){var v;const h=s.$(":selected");if(h.length>1){if(f==="nodes"&&!h.every(b=>b.isNode()))return bootbox.alert("Not all selected elements are nodes. Aborting"),null;if(f==="edges"&&!h.every(b=>b.isEdge()))return bootbox.alert("Not all selected elements are edges. Aborting"),null;if(f==="nodes.edges"&&!h.every(b=>b.isEdge()||b.isNode()))return bootbox.alert("Not all selected elements are nodes or edges. Aborting"),null;v=h}else v=c;return v}const u=[{id:"add-observed",content:"Add Observed Variable",coreAsWell:!0,onClickFunction(c){const f=c.renderedPosition;be(le,f)},show:"full"},{id:"add-latent",content:"Add Latent Variable",coreAsWell:!0,onClickFunction(c){const f=c.renderedPosition;be(me,f)},show:"full"},{id:"add-constant",content:"Add Constant Variable",coreAsWell:!0,onClickFunction(c){const f=c.renderedPosition;be(Le,f)},show:"full"},{id:"label-para",content:"Add/Change Label",selector:`edge.${he}`,onClickFunction(c){const f=c.target||c.cyTarget;bootbox.prompt({title:"Enter a Label",value:f.getLabel(),callback(v){if(!en(v))return!1;v!==f.getLabel()&&v!==null&&(f.addLabel(v),ie(r.mode))}})},show:"full",hasTrailingDivider:!1},{id:"label-remove",content:"Remove Label",selector:`edge.${ze}`,onClickFunction(c){(c.target||c.cyTarget).removeLabel(),ie(r.mode)},show:"both",hasTrailingDivider:!1},{id:"remove-edge",content:"Delete Edge",selector:`edge.${he}`,onClickFunction(c){(c.target||c.cyTarget).remove(),ie(r.mode)},show:"full",hasTrailingDivider:!0},{id:"fix-para",content:"Fix Parameter",selector:`edge.${Ee}.${he}, edge.${Ae}.${he}`,onClickFunction(c){const f=c.target||c.cyTarget;bootbox.prompt({title:"Enter a Value",inputType:"number",step:"any",callback(v){if(v=="")return bootbox.alert("Provide a value"),!1;v!==null&&(f.fixPara(v),ie(r.mode))}})},show:"full",hasTrailingDivider:!1},{id:"free-para",content:"Free Parameter",selector:`edge.${Ce}.${he}, edge.${Ae}.${he}`,onClickFunction(c){var f=c.target||c.cyTarget;f.freePara(),ie(r.mode)},show:"full",hasTrailingDivider:!1},{id:"free-force-para",content:"Force Parameter Free",selector:`edge.${Ee}.${he}, edge.${Ce}.${he}`,onClickFunction(c){(c.target||c.cyTarget).forceFreePara(),ie(r.mode)},show:"full",hasTrailingDivider:!0},{id:"revert-arrow",content:"Revert Direction",selector:`edge[isMean="0"].${Me}.${he}`,onClickFunction(c){(c.target||c.cyTarget).revert(),ie(r.mode)},show:"full",hasTrailingDivider:!1},{id:"set-undirected",content:"Set Undirected",selector:`edge[isMean="0"].${Me}.${he}`,onClickFunction(c){(c.target||c.cyTarget).setUndirected(),ie(r.mode)},show:"full",hasTrailingDivider:!0},{id:"set-arrow",content:"Set Directed",selector:`edge.${Fe}.${he}`,onClickFunction(c){(c.target||c.cyTarget).setDirected(),ie(r.mode)},show:"full",hasTrailingDivider:!0},{id:"free-orientation",content:"Free Loop Orientation",selector:`edge.${st}.fixDeg`,onClickFunction(c){const f=c.target||c.cyTarget;f.removeClass("fixDeg"),pe(f.source().id())},show:"both",hasTrailingDivider:!0},{id:"change-fromUser",content:"Include in User Model",selector:`edge.${Pe}`,onClickFunction(c){const f=c.target||c.cyTarget;if(f.myIsLoop()&&f.source().isOrdered()){ge("danger","User-defined variance arrow is not allowed for ordered variables.");return}f.markAddedUser(),ie(r.mode)},show:"full",hasTrailingDivider:!0},{id:"color-edge",content:"Change Edge Color",selector:"edge",show:"both",onClickFunction(c){var f=c.target||c.cyTarget;const v=d(f,"edges");if(v===null)return null;m(f,v,"edge")}},{id:"change-line-width",content:"Change Line Width",show:"both",selector:"edge",onClickFunction(c){var f=c.target||c.cyTarget;const v=d(f,"edges");if(v===null)return null;bootbox.prompt({title:"Enter New Line Width:",value:f.style("width"),callback(h){h!==null&&o.do("style",{eles:v,style:{width:h}})}})}},{id:"rename-node",show:"full",content:"Rename Variable",selector:`node.${me}, node.${le}`,onClickFunction(c){const f=c.target||c.cyTarget,v=t.columnNames;let h;t.dataAvail&&(h=v.map(L=>`<option value="${L}">${L}</option>`).join(""));const b=t.dataAvail&&f.isObserved()?`
      <label>Or Select From Variables in Your Data:</label>
      <select class="form-control" id="label-dropdown">
        <option value="">--Select--</option>
        ${h}
      </select>
    `:"";bootbox.dialog({title:"Rename Variable",message:`
      <div>
        <label>Enter a label:</label>
        <input type="text" class="form-control" id="new-label" value=${f.getLabel()}>
        ${b}
      </div>
    `,buttons:{cancel:{label:"Cancel",className:"btn-default"},confirm:{label:"Rename",className:"btn-primary",callback(){let L=document.getElementById("new-label").value;const _=t.dataAvail&&f.isObserved()?document.getElementById("label-dropdown").value:"";let S;if(L==f.getLabel()&&_!=""?S=_:S=L,!en(S))return!1;S&&(f.setLabel(S),v&&v.includes(f.getLabel())?(f.link(),ge("success",`Variable ${f.data("label")} linked to data`)):f.isLinked()&&(f.unlink(),ge("info",`Variable ${f.getLabel()} unlinked`)),ie(r.mode))}}},onShown(L){document.getElementById("new-label").addEventListener("keypress",function(_){_.key==="Enter"&&(_.preventDefault(),L.target.querySelector(".btn-primary").click())})}})}},{id:"remove-node",content:"Delete Variable",selector:`node.${me}, node.${le}, node.${Le}`,onClickFunction(c){(c.target||c.cyTarget).remove(),ie(r.mode)},show:"full",hasTrailingDivider:!0},{id:"change-latent",content:"Change to Latent",selector:`node.${le}`,onClickFunction(c){(c.target||c.cyTarget).makeLatent(),ie(r.mode)},show:"full",hasTrailingDivider:!1},{id:"change-ordered",content:"Change to Ordered",selector:`node.${le}.${Ye}`,onClickFunction(c){const f=c.target||c.cyTarget;f.makeOrdered(),f.connectedEdges().forEach(v=>{v.myIsLoop()&&v.isUserAdded()&&(v.remove(),ge("warning","Removed variance user-defined arrow as it is not allowed for ordered variables."))}),ie(r.mode)},show:"full",hasTrailingDivider:!0},{id:"change-continous",content:"Change to Continous",selector:`node.${le}.${We}`,onClickFunction(c){(c.target||c.cyTarget).makeContinous(),ie(r.mode)},show:"full",hasTrailingDivider:!0},{id:"change-observed",show:"full",content:"Change to Observed",selector:`node.${me}`,hasTrailingDivider:!0,onClickFunction(c){const f=c.target||c.cyTarget;f.makeObserved();let v=t.columnNames;v&&v.includes(f.getLabel())&&(f.link(),bootbox.alert("Variable linked with data set")),ie(r.mode)}},{id:"color-node",content:"Change Background Color",selector:"node",show:"both",onClickFunction(c){var f=c.target||c.cyTarget;const v=d(f,"nodes");if(v===null)return null;m(f,v,"nodes")}},{id:"change-border-width",content:"Change Border Width",show:"both",selector:`node.${me}, node.${le}, node.${Le}`,onClickFunction(c){var f=c.target||c.cyTarget;const v=d(f,"nodes");if(v===null)return null;bootbox.prompt({title:"Enter New Border Width:",value:f.style("border-width"),callback(h){h!==null&&o.do("style",{eles:v,style:{"border-width":h}})}})}},{id:"change-font-size",content:"Change Font Size",show:"both",hasTrailingDivider:!0,selector:`node.${me}, node.${le}, node.${Le}, edge`,onClickFunction(c){var f=c.target||c.cyTarget;const v=d(f,"nodes.edges");if(v===null)return null;bootbox.prompt({title:"Enter New Font Size:",value:f.style("font-size"),callback(h){h!==null&&o.do("style",{eles:v,style:{"font-size":h}})}})}}];let a;function m(c,f,v){var h=document.getElementById("picker");h.style.display="block",h.style.left=event.pageX+"px",h.style.top=event.pageY+"px";let b;a=f;const L=function($){b=$.hexString};l.on("color:change",L);const _=function($){h.contains($.target)||(v=="edge"?o.do("style",{eles:a,style:{"line-color":b,"target-arrow-color":b,"source-arrow-color":b}}):o.do("style",{eles:a,style:{"background-color":b}}),h.style.display="none",l.off("color:change",L),document.removeEventListener("click",_),document.removeEventListener("keydown",S))};setTimeout(()=>document.addEventListener("click",_),0);const S=function($){$.key==="Enter"&&_($)};document.addEventListener("keydown",S)}const g=Mi(u,t.full);return we(()=>{s.contextMenus({menuItems:g})}),[]}class Ai extends K{constructor(e){super(),X(this,e,Di,null,Z,{})}}function Ii(n){let e,i,t,o,r,s,l,d,u,a,m,g,c,f,v,h,b,L,_,S,$,y,w,T;return{c(){e=U("div"),i=U("button"),t=_e("Show Data"),r=V(),s=U("div"),l=U("button"),d=_e("User Model"),a=V(),m=U("button"),g=_e("Autocompleted Model"),f=V(),v=U("button"),h=_e("Estimates"),_=V(),S=U("button"),$=_e("More Results"),E(i,"class","btn btn-lg btn-default"),i.disabled=o=!n[2].dataAvail,E(l,"class",u="btn btn-lg "+(n[1]==="user model"?"btn-primary active":"btn-default")),E(m,"class",c="btn btn-lg "+(n[1]==="full model"?"btn-primary active":"btn-default")),E(v,"class",b="btn btn-lg "+(n[1]==="estimate"?"btn-primary active":"btn-default")),v.disabled=L=!n[2].dataAvail||n[2].modelEmpty,E(s,"class","btn-group btn-toggle svelte-xny576"),E(S,"class","btn btn-lg btn-default"),S.disabled=y=n[0].mode!="estimate",E(e,"class","toolbox navbar-static-bottom svelte-xny576")},m(C,p){O(C,e,p),R(e,i),R(i,t),R(e,r),R(e,s),R(s,l),R(l,d),R(s,a),R(s,m),R(m,g),R(s,f),R(s,v),R(v,h),R(e,_),R(e,S),R(S,$),w||(T=[oe(i,"click",n[6]),oe(l,"click",n[7]),oe(m,"click",n[8]),oe(v,"click",n[9]),oe(S,"click",n[10])],w=!0)},p(C,[p]){p&4&&o!==(o=!C[2].dataAvail)&&(i.disabled=o),p&2&&u!==(u="btn btn-lg "+(C[1]==="user model"?"btn-primary active":"btn-default"))&&E(l,"class",u),p&2&&c!==(c="btn btn-lg "+(C[1]==="full model"?"btn-primary active":"btn-default"))&&E(m,"class",c),p&2&&b!==(b="btn btn-lg "+(C[1]==="estimate"?"btn-primary active":"btn-default"))&&E(v,"class",b),p&4&&L!==(L=!C[2].dataAvail||C[2].modelEmpty)&&(v.disabled=L),p&1&&y!==(y=C[0].mode!="estimate")&&(S.disabled=y)},i:ce,o:ce,d(C){C&&N(e),w=!1,Je(T)}}}function Fi(){window.$("#data-modal-2").modal()}function Oi(n,e,i){let t,o,r;te(n,ne,v=>i(0,t=v)),te(n,B,v=>i(2,o=v)),te(n,ue,v=>i(11,r=v));let s;function l(v){i(1,s=v),v!=="user model"?W(ue,r.showLav=!0,r):W(ue,r.showLav=!1,r),W(ne,t.mode=v,t)}window.$("#data-modal-extend-results").on("hidden.bs.modal",function(){W(B,o.showServerErrors=!0,o)});function d(){window.$("#data-modal-extend-results").modal(),W(B,o.showServerErrors=!1,o)}let u=!1;we(()=>{i(5,u=!0)});const a=()=>Fi(),m=()=>l("user model"),g=()=>l("full model"),c=()=>l("estimate"),f=()=>d();return n.$$.update=()=>{n.$$.dirty&33&&u&&i(1,s=t.mode)},[t,s,o,l,d,u,a,m,g,c,f]}class Ni extends K{constructor(e){super(),X(this,e,Oi,Ii,Z,{})}}function Ti(){return typeof Shiny=="object"&&Shiny!==null}function Pi(n){let e=0,i=Number.NEGATIVE_INFINITY,t=Number.NEGATIVE_INFINITY,o=n.nodes().length;n.nodes().forEach(l=>{let d=l.position();e+=d.x,d.x>i&&(i=d.x),d.y>t&&(t=d.y)});let r=e/o,s=t+100;return{x:r,y:s}}function xi(n,e){if(!n)throw new Error(e||"Assertion failed")}function Vi(n,e,i){let t,o,r;te(n,ne,a=>i(0,t=a)),te(n,B,a=>i(1,o=a)),te(n,Ie,a=>i(2,r=a));function s(a,m,g){let c,f,v;return m==="=~"?(c=Me,f=a,v=g):m=="~1"?(f=1,v=a,c=Me):m==="~~"?(v=g,f=a,a===g?c=st:c=Fe):(v=a,f=g,c=Me),{directed:c,source:f,target:v}}function l(a,m,g,c){let f=s(a,m,g);f.user=c;const h=Y(Q).edges(function(b){let L;if(f.source!=1?(L=b.source().getLabel()==f.source&&b.target().getLabel()==f.target,f.directed==Fe&&(L=L||b.source().getLabel()==f.target&&b.target().getLabel()==f.source)):L=b.source().isConstant()&&b.target().getLabel()==f.target,f.user!=null)if(f.user==1)L=L&&b.isUserAdded();else if(f.user==0)L=L&&b.isLavaanAdded();else throw new Error("User was neither 0 nor 1");return L});if(h.length>1)throw new Error("Multiple edges found");return h}function d(a,m){W(B,o.meansModelled=!1,o),W(B,o.loadingMode=!0,o);let g=Y(Q);if(!m)g.edges().invalidate();else{let b=function(S,$,y){be(S,y,!1,$)};const h=Array.isArray(a.obs)?a.obs:[a.obs];let L={x:200,y:200};for(let S=0;S<h.length;S++)L.x=L.x+50,b(le,h[S],L);const _=Array.isArray(a.latent)?a.latent:[a.latent];L={x:200,y:100};for(let S=0;S<_.length;S++)L.x=L.x+50,b(me,_[S]);a=a.parTable}const c=new Set;for(let h=0;h<a.lhs.length;h++)a.op[h]==="|"&&c.add(a.lhs[h]);let f=!1,v;for(let h=0;h<a.lhs.length;h++){if(a.op[h]=="~*~"||a.op[h]=="|"||a.op[h]=="==")continue;let b=l(a.lhs[h],a.op[h],a.rhs[h],a.user[h]);if(!m&&a.user[h]==1)xi(b.length==1),b.validate(),b.isModifiedLavaan()&&b.isFixed()&&b.revertLavaanFix(),a.free[h]==0&&!b.isFixed()&&b.fixPara(a.ustart[h]).markModifiedLavaan();else{let L;if(m||b.length==0){const _=s(a.lhs[h],a.op[h],a.rhs[h]);if(m&&o.full&&a.user[h]==0)continue;let S;if(_.source!==1)S=g.nodes(function(y){return y.getLabel()==_.source})[0].id();else{if(W(B,o.meansModelled=!0,o),a.free[h]==0&&a.ustart[h]==0)continue;f||(v=be(Le,Pi(g),!1),f=!0,g.nodes(function(w){return w.id()==v})[0].markAddedLavaan()),S=v}const $=g.nodes(function(y){return y.getLabel()==_.target})[0].id();L=g.add({groups:"edges",data:{source:S,target:$},classes:_.directed+" nolabel"}),a.label[h]!=""&&L.addLabelImport(a.label[h]),a.user[h]==1?L.markAddedUser():L.markAddedLavaan(),!m&&_.directed==Me&&(pe(S),pe($))}else!m&&b.length==1&&(L=b);a.free[h]==0?a.ustart[h]!==0&&a.exo[h]!==1?c.has(L.target().getLabel())&&a.op[h]=="~~"?L.fixPara("Total Variance 1"):L.fixPara(a.ustart[h]):L.remove():L.setFree(),m||L.validate()}}if(!m)g.edges().forEach(h=>{h.isValid()||h.remove()}),g.getLavaanNodes().forEach(h=>{h.connectedEdges().length==0&&(h.remove(),g.nodes().forEach(b=>{pe(b.id())}))});else{ot("tree",!1);const h=new Map;g.getUndirectedEdges().forEach(_=>{const S=pe(_.source().id(),!0),$=pe(_.target().id(),!0),y=w=>{h.set(w,(h.get(w)||0)+1)};y(S),y($)});let b=null,L=0;h.forEach((_,S)=>{_>L&&(L=_,b=S)}),b===180&&g.edges().forEach(_=>{_.isUserAdded()&&_.style("control-point-distances",[100])}),g.fit()}o.parsedModel||W(B,o.parsedModel=!0,o),g.getUserEdges().length>0&&W(B,o.modelEmpty=!1,o),W(B,o.loadingMode=!1,o)}function u(a,m){Y(Q);const g=a.op.some(c=>c.includes("~~"));for(let c=0;c<a.lhs.length;c++){if(a.op[c]=="~*~"||a.op[c]=="|")continue;let f=l(a.lhs[c],a.op[c],a.rhs[c]);if(f.length>0){let v={};f.isFree()?(v.est=a.est[c],v.p_value=a.pvalue[c],v.se=a.se[c],v.ciLow=a["ci.lower"][c],v.ciHigh=a["ci.upper"][c],v.est_std=m["est.std"][c],v.se_std=m.se[c],v.ciLow_std=m["ci.lower"][c],v.ciHigh_std=m["ci.upper"][c],f.addClass("hasEst")):g&&a.op[c]=="~~"&&(v.estFixed=a.est[c],v.estFixed_std=m["est.std"][c],f.addClass("hasEstFixed")),f.data("estimates",v)}}}return Ti()&&(Shiny.addCustomMessageHandler("dataInfo",function(a){gt(a.columns),W(B,o.columnNames=[...a.columns],o),W(B,o.ids=[...a.columns],o),W(B,o.loadedFileName=a.name,o),W(B,o.dataAvail=!0,o),ie(t.mode),window.$("#upload-modal").modal("hide"),a.showData&&window.$("#data-modal-2").modal()}),Shiny.addCustomMessageHandler("lav_failed",function(a){W(B,o.fitting=!1,o),a=="stopped"?ge("danger","Fitting stopped by user"):ge("danger","Fitting failed")}),Shiny.addCustomMessageHandler("fitting",function(a){W(B,o.fitting=!0,o)}),Shiny.addCustomMessageHandler("lav_warning_error",function(a){const m=a.type=="warning"?"warning":"error";a.origin=="loading data"&&window.$("#upload-modal").modal("hide"),ge(a.type,`During ${a.origin} the following ${m} occurred: ${a.message}`)}),Shiny.addCustomMessageHandler("lav_error_fitting",function(a){W(B,o.fitting=!1,o),ge(a.type,"During "+a.origin+" the following error occurred: "+a.message)}),Shiny.addCustomMessageHandler("usecache",function(a){ge("info","Reusing cached results because model and data did not change since last fit")}),Shiny.addCustomMessageHandler("data_missing",function(a){ge("danger","Could not fit model because no data is available")}),Shiny.addCustomMessageHandler("columnames",function(a){const m=Y(Q),g=o.columnNames[a.index];W(B,o.columnNames[a.index]=a.newcolname,o),m.getObservedNodes().forEach(c=>{c.getLabel()==g&&(c.setLabel(a.newcolname),ie(t.mode))}),gt(o.columnNames)}),Shiny.addCustomMessageHandler("missing_vars",function(a){var m=[].concat(a).join(", ");ge("danger","Could not fit model because "+m+" are observed variables in the model but not present in the data.")}),Shiny.addCustomMessageHandler("lav_model",function(a){d(a,!1)}),Shiny.addCustomMessageHandler("imported_model",function(a){d(a,!0);let m=Y(Q);Array.isArray(a.ordered)||(a.ordered=[a.ordered]),a.ordered.forEach(g=>{m.nodes(function(c){return c.getLabel()==g})[0].makeOrdered()}),W(ne,t.fix_first=!1,t),ge("warning","lavaangui only imports user edges. Your full model is very likely different than what you fitted in lavaan because of different options used. To display the model, as you fitted it in lavaan, use plot_lavaan")}),Shiny.addCustomMessageHandler("lav_results",function(a){W(B,o.loadingMode=!0,o),W(Ie,r.lastFitLavFit=a.fitted_model,r),W(Ie,r.lastFitModel=a.model,r),W(Ie,r.lastFitData=a.data,r),W(B,o.fitting=!1,o),W(B,o.loadingMode=!1,o)}),Shiny.addCustomMessageHandler("lav_estimates",function(a){const m=a.normal,g=a.std;u(m,g)}),Shiny.addCustomMessageHandler("setToEstimate",function(a){W(ne,t.mode="estimate",t)})),[]}class Ri extends K{constructor(e){super(),X(this,e,Vi,null,Z,{})}}function zi(n){xn(H);let e=Y(Q);var i={zoomFactor:.05,zoomDelay:45,minZoom:e.minZoom(),maxZoom:e.maxZoom(),fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,zoomOnly:!1,fitSelector:void 0,animateOnFit(){return!1},fitAnimationDuration:1e3};return we(()=>{e.panzoom(i),e.on("zoom",function(t){var o=e.zoom();o<i.minZoom?e.zoom(i.minZoom):o>i.maxZoom&&e.zoom(i.maxZoom)})}),[]}class Bi extends K{constructor(e){super(),X(this,e,zi,null,Z,{})}}function Ui(n){let e,i;const t=n[1].default,o=Ke(t,n,n[0],null);return{c(){e=U("div"),o&&o.c(),E(e,"class","svelte-16igfw6")},m(r,s){O(r,e,s),o&&o.m(e,null),i=!0},p(r,[s]){o&&o.p&&(!i||s&1)&&Xe(o,t,r,r[0],i?Qe(t,r[0],s,null):Ze(r[0]),null)},i(r){i||(M(o,r),i=!0)},o(r){F(o,r),i=!1},d(r){r&&N(e),o&&o.d(r)}}}function Gi(n,e,i){let{$$slots:t={},$$scope:o}=e;return n.$$set=r=>{"$$scope"in r&&i(0,o=r.$$scope)},[o,t]}class qi extends K{constructor(e){super(),X(this,e,Gi,Ui,Z,{})}}function ji(n,e,i){let t,o;te(n,De,s=>i(0,t=s)),te(n,B,s=>i(1,o=s));let r=Y(Q);return setInterval(()=>{o.drawing=="none"&&r&&(r.autoungrabify(!1),r.nodes().grabify(),W(B,o.undoEmpty=t.isUndoStackEmpty(),o),W(B,o.redoEmpty=t.isRedoStackEmpty(),o))},1e3),window.addEventListener("beforeunload",s=>{s.preventDefault(),s.returnValue=""}),we(()=>{Shiny.unbindAll(),Shiny.bindAll()}),[]}class Hi extends K{constructor(e){super(),X(this,e,ji,null,Z,{})}}function tn(n){let e,i,t,o,r,s;return{c(){e=U("div"),i=U("button"),i.innerHTML='<span class="glyphicon glyphicon-refresh spinning svelte-16d2v0h"></span> Fitting...',t=V(),o=U("button"),o.textContent="Cancel",E(i,"class","btn btn-lg btn-secondary fixed-width disabled-button svelte-16d2v0h"),E(i,"id","fitting-button"),i.disabled=!0,E(o,"class","btn btn-lg btn-default fixed-width svelte-16d2v0h"),E(e,"class","center-screen svelte-16d2v0h")},m(l,d){O(l,e,d),R(e,i),R(e,t),R(e,o),r||(s=oe(o,"click",Yi),r=!0)},p:ce,d(l){l&&N(e),r=!1,s()}}}function Wi(n){let e,i=n[0].fitting&&tn();return{c(){i&&i.c(),e=Be()},m(t,o){i&&i.m(t,o),O(t,e,o)},p(t,[o]){t[0].fitting?i?i.p(t,o):(i=tn(),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:ce,o:ce,d(t){i&&i.d(t),t&&N(e)}}}function Yi(){Shiny.setInputValue("run-abort",Math.random())}function Ji(n,e,i){let t;return te(n,B,o=>i(0,t=o)),[t]}class Ki extends K{constructor(e){super(),X(this,e,Ji,Wi,Z,{})}}function nn(n){let e,i,t=n[2][n[0].type].label+"",o,r,s=n[0].message+"",l,d;return{c(){e=U("div"),i=U("strong"),o=_e(t),r=V(),l=_e(s),E(e,"class",d=Ve(n[2][n[0].type].class+(n[1]?" fadeOut":""))+" svelte-1wv9zbn")},m(u,a){O(u,e,a),R(e,i),R(i,o),R(e,r),R(e,l)},p(u,a){a&1&&t!==(t=u[2][u[0].type].label+"")&&Re(o,t),a&1&&s!==(s=u[0].message+"")&&Re(l,s),a&3&&d!==(d=Ve(u[2][u[0].type].class+(u[1]?" fadeOut":""))+" svelte-1wv9zbn")&&E(e,"class",d)},d(u){u&&N(e)}}}function Xi(n){let e,i=n[0].message!==""&&nn(n);return{c(){i&&i.c(),e=Be()},m(t,o){i&&i.m(t,o),O(t,e,o)},p(t,[o]){t[0].message!==""?i?i.p(t,o):(i=nn(t),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:ce,o:ce,d(t){i&&i.d(t),t&&N(e)}}}function Zi(n,e,i){let t;te(n,fn,l=>i(0,t=l));let o={success:{class:"alert-success",label:"Success!"},info:{class:"alert-info",label:"Info!"},warning:{class:"alert-warning",label:"Warning!"},danger:{class:"alert-danger",label:"Danger!"}},r=!1,s;return n.$$.update=()=>{n.$$.dirty&9&&t.message!==""&&(i(1,r=!1),clearTimeout(s),i(3,s=setTimeout(()=>{i(1,r=!0)},1e4)))},[t,r,o,s]}class Qi extends K{constructor(e){super(),X(this,e,Zi,Xi,Z,{})}}function es(n,e){const i={};return n.forEach((t,o)=>{i[t]=e[o]}),i}function ts(n,e){const i=Object.keys(e);let t={};return i.forEach(o=>{n.hasOwnProperty(o)&&(t[o]=n[o])}),t}function ns(n,e,i){let t,o,r;te(n,De,l=>i(0,t=l)),te(n,B,l=>i(1,o=l)),te(n,ne,l=>i(2,r=l));let s=Y(Q);return we(()=>{H.use(Vn);const l={isDebug:!0};let d=s.undoRedo(l);De.set(d),d.action("style",function(u){let a={};const m=Object.keys(u.style);return u.eles.forEach(function(g){let c=[];m.forEach(f=>{c.push(g.data(f)||g.style(f)),g.data(f,u.style[f])}),a[g.id()]=es(m,c)}),{eles:u.eles,style:a}},function(u){const a=ts(u.eles[0].style(),u.style[Object.keys(u.style)[0]]);return Object.keys(u.style).forEach(function(m){var g=s.getElementById(m);for(var c in u.style[m])g.data(c,u.style[m][c])}),{eles:u.eles,style:a}}),s.on("afterUndo",function(u,a){a!=="style"&&a!=="move"&&ie(r.mode)}),s.on("afterRedo",function(u,a){a!=="style"&&a!=="move"&&ie(r.mode)}),document.addEventListener("keydown",function(u){(u.ctrlKey||u.metaKey)&&u.target.nodeName==="BODY"&&u.which===90&&!o.fitting&&(u.preventDefault(),u.stopPropagation(),u.shiftKey?t.redo():t.undo())}),document.addEventListener("keyup",function(u){u.metaKey&&u.target.nodeName==="BODY"&&u.which===90&&(u.preventDefault(),u.stopPropagation())})}),[]}class os extends K{constructor(e){super(),X(this,e,ns,null,Z,{})}}function is(n,e,i){let t;return te(n,B,o=>i(0,t=o)),Shiny.addCustomMessageHandler("fullServer",function(o){W(B,t.full=o.full,t),W(B,t.ready=!0,t),W(B,t.shinyapps=o.shinyapps,t)}),[]}class ss extends K{constructor(e){super(),X(this,e,is,null,Z,{})}}function rs(n,e,i){let t;te(n,ue,r=>i(1,t=r));let o=!1;return we(()=>{i(0,o=!0)}),n.$$.update=()=>{n.$$.dirty&3&&o&&Vo(t.showVar,t.showLav,t.showMean),n.$$.dirty&3&&o&&xo(t.view,t.std,t.number_digits)},[o,t]}class ls extends K{constructor(e){super(),X(this,e,rs,null,Z,{})}}function as(n){let e,i,t,o;const r=n[6].default,s=Ke(r,n,n[5],null);return{c(){e=U("section"),s&&s.c(),ve(e,"left",n[0]+"px"),ve(e,"top",n[1]+"px"),E(e,"class","draggable svelte-13fkbj1")},m(l,d){O(l,e,d),s&&s.m(e,null),i=!0,t||(o=[oe(window,"mouseup",n[4]),oe(window,"mousemove",n[3]),oe(e,"mousedown",n[2])],t=!0)},p(l,[d]){s&&s.p&&(!i||d&32)&&Xe(s,r,l,l[5],i?Qe(r,l[5],d,null):Ze(l[5]),null),(!i||d&1)&&ve(e,"left",l[0]+"px"),(!i||d&2)&&ve(e,"top",l[1]+"px")},i(l){i||(M(s,l),i=!0)},o(l){F(s,l),i=!1},d(l){l&&N(e),s&&s.d(l),t=!1,Je(o)}}}function ds(n,e,i){let{$$slots:t={},$$scope:o}=e,{left:r=100}=e,{top:s=100}=e,l=!1,d=0,u=0;function a(c){l=!0,d=c.clientX-r,u=c.clientY-s}function m(c){l&&(i(0,r=c.clientX-d),i(1,s=c.clientY-u))}function g(){l=!1}return n.$$set=c=>{"left"in c&&i(0,r=c.left),"top"in c&&i(1,s=c.top),"$$scope"in c&&i(5,o=c.$$scope)},[r,s,a,m,g,o,t]}class us extends K{constructor(e){super(),X(this,e,ds,as,Z,{left:0,top:1})}}function cs(n){let e,i,t;const o=n[0].default,r=Ke(o,n,n[1],null);return{c(){e=U("ul"),i=U("div"),r&&r.c(),ve(i,"display","flex"),ve(i,"flex-direction","column"),E(e,"class","nav navbar-nav navbar-left"),ve(e,"border","1px solid black"),ve(e,"z-index","9999")},m(s,l){O(s,e,l),R(e,i),r&&r.m(i,null),t=!0},p(s,l){r&&r.p&&(!t||l&2)&&Xe(r,o,s,s[1],t?Qe(o,s[1],l,null):Ze(s[1]),null)},i(s){t||(M(r,s),t=!0)},o(s){F(r,s),t=!1},d(s){s&&N(e),r&&r.d(s)}}}function fs(n){let e,i;return e=new us({props:{$$slots:{default:[cs]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},p(t,[o]){const r={};o&2&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}function ms(n,e,i){let{$$slots:t={},$$scope:o}=e;return n.$$set=r=>{"$$scope"in r&&i(1,o=r.$$scope)},[t,o]}class gs extends K{constructor(e){super(),X(this,e,ms,fs,Z,{})}}function ps(n,e){return bootbox.alert({title:"<span style='color: red;'>Error</span>",message:`A ${e} error occurred:<br> <span style='color: red;'>${n}</span>.<br><br>Please consider reporting this issue by sending an email to <a href="mailto:j.d.karch@fsw.leidenuniv.nl">j.d.karch@fsw.leidenuniv.nl</a>.`,centerVertical:!0}),!0}function hs(){return typeof Shiny=="object"&&Shiny!==null}function bs(n){return hs()&&Shiny.addCustomMessageHandler("serverError",function(e){Y(B).showServerErrors&&ps(e.msg,"Server")}),[]}class _s extends K{constructor(e){super(),X(this,e,bs,null,Z,{})}}function vs(n,e,i){let t;return te(n,ne,o=>i(0,t=o)),n.$$.update=()=>{n.$$.dirty&1&&ie(t.mode)},[t]}class $s extends K{constructor(e){super(),X(this,e,vs,null,Z,{})}}function ys(n){H.use(Rn);let e=Y(Q);return we(()=>{e.automove({nodesMatching:".automove-viewport",reposition:"viewport"})}),[]}class ws extends K{constructor(e){super(),X(this,e,ys,null,Z,{})}}function ks(n){zn(H,window.$,cn);let e=Y(Q);return we(()=>{e.nodeEditing({resizeToContentCueImage:"",undoable:!0})}),[]}class Es extends K{constructor(e){super(),X(this,e,ks,null,Z,{})}}function Cs(n){return H("collection","init",function(){return this.addClass(Ee).addClass(He).addClass(he),this}),H("collection","free",function(){return this.hasClass(Ee)}),H("collection","addLabel",function(e){return this.addLabelImport(e).removeClass(Te),this}),H("collection","addLabelImport",function(e){return this.data("label",e).addClass(ze).removeClass(He),this}),H("collection","removeLabel",function(){return this.removeClass(ze).addClass(He).data("label",null),this}),H("collection","setLabel",function(e){return this.data("label",e),this}),H("collection","getLabel",function(){return this.data("label")}),H("collection","fixPara",function(e){return this.data("value",e).removeClass(Ee).removeClass(Ae).removeClass(Lt).addClass(Ce),this}),H("collection","freePara",function(){return this.removeClass(Ce).removeClass(Ae).removeClass(Te).addClass(Ee),this}),H("collection","setFree",function(){return this.removeClass(Ce).removeClass(Ae).addClass(Ee),this}),H("collection","forceFreePara",function(){return this.removeClass(Ee).removeClass(Ce).removeClass(Te).addClass(Ae),this}),H("collection","revert",function(){const e=this.source().id(),i=this.target().id();return this.move({source:i,target:e}),this}),H("collection","setUndirected",function(){return this.removeClass(Me).addClass(Fe),this}),H("collection","setDirected",function(){return this.removeClass(Fe).addClass(Me),this}),H("collection","isUndirected",function(){return this.hasClass(Fe)}),H("collection","isDirected",function(){return this.hasClass(Me)}),H("collection","makeLoop",function(){return this.addClass(st),this}),H("collection","myIsLoop",function(){return this.hasClass(st)}),H("collection","makeMeanEdge",function(){return this.data("isMean","1"),this}),H("collection","isMean",function(){return this.data("isMean")==="1"||this.isConstant()}),H("collection","makeOtherEdge",function(){return this.data("isMean","0"),this}),H("collection","isFixed",function(){return this.hasClass(Ce)}),H("collection","isFree",function(){return this.hasClass(Ee)||this.hasClass(Ae)}),H("collection","isForceFree",function(){return this.hasClass(Ae)}),H("collection","hasLabel",function(){return this.hasClass(ze)}),H("collection","isModifiedLavaan",function(){return this.hasClass(Te)}),H("collection","markModifiedLavaan",function(){return this.addClass(Te),this}),H("collection","markAddedLavaan",function(){return this.addClass(Pe).removeClass(he),this}),H("collection","markAddedUser",function(){return this.removeClass(Pe).addClass(he),this}),H("collection","isUserAdded",function(){return this.hasClass(he)}),H("collection","isLavaanAdded",function(){return this.hasClass(Pe)}),H("collection","getValue",function(){return this.data("value")}),H("collection","setValue",function(e){this.data("value",e)}),H("collection","invalidate",function(){return this.removeClass(ut),this}),H("collection","validate",function(){return this.addClass(ut),this}),H("collection","isValid",function(){return this.hasClass(ut)}),H("collection","revertLavaanFix",function(){this.freePara().removeClass(Te)}),H("collection","removeEstimates",function(){return this.removeClass(Lt).removeClass(qn),this.removeData("estimates"),this}),H("collection","link",function(){return this.addClass(Ue),this}),H("collection","unlink",function(){return this.removeClass(Ue),this}),H("collection","isLinked",function(){return this.hasClass(Ue)}),H("collection","isLatent",function(){return this.hasClass(me)}),H("collection","makeLatent",function(){return this.removeClass(le).addClass(me).removeClass(Ue),this}),H("collection","makeObserved",function(){return this.addClass(le).removeClass(me),this}),H("collection","makeOrdered",function(){return this.removeClass(Ye).addClass(We),this}),H("collection","isOrdered",function(){return this.hasClass(We)}),H("collection","makeContinous",function(){return this.addClass(Ye).removeClass(We),this}),H("collection","isConstant",function(){return this.hasClass(Le)}),H("collection","isObserved",function(){return this.hasClass(le)}),H("core","getLavaanNodes",function(){return this.nodes(`.${Pe}`)}),H("core","getLavaanEdges",function(){return this.edges(`.${Pe}`)}),H("core","getObservedNodes",function(){return this.nodes(`.${le}`)}),H("core","getUserEdges",function(){return this.edges(`.${he}`)}),H("core","getUndirectedEdges",function(){return this.edges(`.${Fe}`)}),H("core","getLavaanModifiedEdges",function(){return this.edges(`.${Te}`)}),H("core","getLatentNodes",function(){return this.nodes(function(e){return e.hasClass(me)})}),[]}class Ss extends K{constructor(e){super(),X(this,e,Cs,null,Z,{})}}function Ls(n){Bn(H,window.$,cn);let e=Y(Q);return we(()=>{const i="Bend",t="Kink";e.edgeEditing({undoable:!0,bendRemovalSensitivity:16,enableMultipleAnchorRemovalOption:!0,initAnchorsAutomatically:!1,useTrailingDividersAfterContextMenuOptions:!1,enableCreateAnchorOnDrag:!0,anchorShapeSizeFactor:4,addBendMenuItemTitle:`Add ${t} Point`,removeBendMenuItemTitle:`Remove ${t} Point`,removeAllBendMenuItemTitle:`Remove All${t} Points`,addControlMenuItemTitle:`Add ${i} Point`,removeControlMenuItemTitle:`Remove ${i} Point`,removeAllControlMenuItemTitle:`Remove All ${i} Points`,handleReconnectEdge:!1}),e.style().update()}),[]}class Ms extends K{constructor(e){super(),X(this,e,Ls,null,Z,{})}}const on=840;function Ds(n,e,i){let t;te(n,B,s=>i(0,t=s));function o(){var s=setTimeout(r,on*1e3);window.onmousemove=l,window.onmousedown=l,window.onclick=l,window.onscroll=l,window.onkeypress=l;function l(){clearTimeout(s),s=setTimeout(r,on*1e3)}}async function r(){console.log("Timeout");let s=null,l=null;if(t.dataAvail&&(bn("saveData"),l=await new Promise(u=>{Shiny.addCustomMessageHandler("dataForSave",function(a){u(a)})})),t.modelEmpty||(s=bt()),s!=null||l!=null){bootbox.alert("Due to inactivity, you will be disconnected from the server shortly. Your work was saved for you. In case you have already been disconnected now, you can continue where you left off by refreshing the page.");let u=sessionStorage.getItem("sessionId");u||(u=Date.now().toString(),sessionStorage.setItem("sessionId",u),console.log("Session ID save: ",u));var d=new St("ModelDatabase");d.version(1).stores({cache:"sessionId, model, data"}),await d.cache.clear(),await d.cache.put({sessionId:u,model:s,data:l})}}return we(async()=>{let s=sessionStorage.getItem("sessionId");if(console.log("Session ID load: ",s),s){var l=new St("ModelDatabase");l.version(1).stores({cache:"sessionId, model, data"});const d=await l.cache.get(s);d.model&&(console.log("Model loaded from cache"),ht(d.model)),d.data&&(console.log("Data loaded from cache"),Shiny.setInputValue("dataUpload-fileInput",{content:btoa(d.data)}))}}),o(),[]}class As extends K{constructor(e){super(),X(this,e,Ds,null,Z,{})}}function sn(n){let e,i,t,o,r,s,l,d,u,a,m,g,c,f,v,h,b,L,_=n[0].full&&rn();i=new Kn({});const S=[Fs,Is],$=[];function y(C,p){return C[0].full?0:1}r=y(n),s=$[r]=S[r](n),d=new qi({props:{$$slots:{default:[Ns]},$$scope:{ctx:n}}});let w=n[0].full&&an();m=new Si({}),c=new Ri({}),v=new Hi({});let T=n[0].shinyapps&&dn();return{c(){_&&_.c(),e=V(),G(i.$$.fragment),t=V(),o=U("div"),s.c(),l=V(),G(d.$$.fragment),u=V(),w&&w.c(),a=V(),G(m.$$.fragment),g=V(),G(c.$$.fragment),f=V(),G(v.$$.fragment),h=V(),T&&T.c(),b=Be(),E(o,"class","svelte-15ghafl")},m(C,p){_&&_.m(C,p),O(C,e,p),q(i,C,p),O(C,t,p),O(C,o,p),$[r].m(o,null),R(o,l),q(d,o,null),R(o,u),w&&w.m(o,null),O(C,a,p),q(m,C,p),O(C,g,p),q(c,C,p),O(C,f,p),q(v,C,p),O(C,h,p),T&&T.m(C,p),O(C,b,p),L=!0},p(C,p){C[0].full?_?p&1&&M(_,1):(_=rn(),_.c(),M(_,1),_.m(e.parentNode,e)):_&&($e(),F(_,1,1,()=>{_=null}),ye());let P=r;r=y(C),r!==P&&($e(),F($[P],1,1,()=>{$[P]=null}),ye(),s=$[r],s||(s=$[r]=S[r](C),s.c()),M(s,1),s.m(o,l));const A={};p&3&&(A.$$scope={dirty:p,ctx:C}),d.$set(A),C[0].full?w?p&1&&M(w,1):(w=an(),w.c(),M(w,1),w.m(o,null)):w&&($e(),F(w,1,1,()=>{w=null}),ye()),C[0].shinyapps?T?p&1&&M(T,1):(T=dn(),T.c(),M(T,1),T.m(b.parentNode,b)):T&&($e(),F(T,1,1,()=>{T=null}),ye())},i(C){L||(M(_),M(i.$$.fragment,C),M(s),M(d.$$.fragment,C),M(w),M(m.$$.fragment,C),M(c.$$.fragment,C),M(v.$$.fragment,C),M(T),L=!0)},o(C){F(_),F(i.$$.fragment,C),F(s),F(d.$$.fragment,C),F(w),F(m.$$.fragment,C),F(c.$$.fragment,C),F(v.$$.fragment,C),F(T),L=!1},d(C){_&&_.d(C),C&&N(e),j(i,C),C&&N(t),C&&N(o),$[r].d(),j(d),w&&w.d(),C&&N(a),j(m,C),C&&N(g),j(c,C),C&&N(f),j(v,C),C&&N(h),T&&T.d(C),C&&N(b)}}}function rn(n){let e,i;return e=new Ki({}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}function Is(n){let e,i;return e=new gs({props:{$$slots:{default:[Os]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}function Fs(n){let e,i;return e=new wi({}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}function Os(n){let e,i,t,o,r,s,l,d;return e=new _n({props:{full:!1}}),t=new $n({props:{minimal:!0}}),r=new kn({props:{minimal:!0}}),l=new En({props:{minimal:!0}}),{c(){G(e.$$.fragment),i=V(),G(t.$$.fragment),o=V(),G(r.$$.fragment),s=V(),G(l.$$.fragment)},m(u,a){q(e,u,a),O(u,i,a),q(t,u,a),O(u,o,a),q(r,u,a),O(u,s,a),q(l,u,a),d=!0},p:ce,i(u){d||(M(e.$$.fragment,u),M(t.$$.fragment,u),M(r.$$.fragment,u),M(l.$$.fragment,u),d=!0)},o(u){F(e.$$.fragment,u),F(t.$$.fragment,u),F(r.$$.fragment,u),F(l.$$.fragment,u),d=!1},d(u){j(e,u),u&&N(i),j(t,u),u&&N(o),j(r,u),u&&N(s),j(l,u)}}}function ln(n){let e,i;return e=new Ei({}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}function Ns(n){let e,i,t,o,r,s,l,d,u,a,m,g,c,f,v,h,b,L,_,S,$,y,w,T;e=new co({}),t=new os({}),r=new Ss({}),l=new Gn({}),u=new ws({}),m=new Es({}),c=new Bi({}),v=new Ai({}),b=new mo({}),_=new ls({}),$=new Ms({});let C=n[0].full&&ln();return{c(){G(e.$$.fragment),i=V(),G(t.$$.fragment),o=V(),G(r.$$.fragment),s=V(),G(l.$$.fragment),d=V(),G(u.$$.fragment),a=V(),G(m.$$.fragment),g=V(),G(c.$$.fragment),f=V(),G(v.$$.fragment),h=V(),G(b.$$.fragment),L=V(),G(_.$$.fragment),S=V(),G($.$$.fragment),y=V(),C&&C.c(),w=Be()},m(p,P){q(e,p,P),O(p,i,P),q(t,p,P),O(p,o,P),q(r,p,P),O(p,s,P),q(l,p,P),O(p,d,P),q(u,p,P),O(p,a,P),q(m,p,P),O(p,g,P),q(c,p,P),O(p,f,P),q(v,p,P),O(p,h,P),q(b,p,P),O(p,L,P),q(_,p,P),O(p,S,P),q($,p,P),O(p,y,P),C&&C.m(p,P),O(p,w,P),T=!0},p(p,P){p[0].full?C?P&1&&M(C,1):(C=ln(),C.c(),M(C,1),C.m(w.parentNode,w)):C&&($e(),F(C,1,1,()=>{C=null}),ye())},i(p){T||(M(e.$$.fragment,p),M(t.$$.fragment,p),M(r.$$.fragment,p),M(l.$$.fragment,p),M(u.$$.fragment,p),M(m.$$.fragment,p),M(c.$$.fragment,p),M(v.$$.fragment,p),M(b.$$.fragment,p),M(_.$$.fragment,p),M($.$$.fragment,p),M(C),T=!0)},o(p){F(e.$$.fragment,p),F(t.$$.fragment,p),F(r.$$.fragment,p),F(l.$$.fragment,p),F(u.$$.fragment,p),F(m.$$.fragment,p),F(c.$$.fragment,p),F(v.$$.fragment,p),F(b.$$.fragment,p),F(_.$$.fragment,p),F($.$$.fragment,p),F(C),T=!1},d(p){j(e,p),p&&N(i),j(t,p),p&&N(o),j(r,p),p&&N(s),j(l,p),p&&N(d),j(u,p),p&&N(a),j(m,p),p&&N(g),j(c,p),p&&N(f),j(v,p),p&&N(h),j(b,p),p&&N(L),j(_,p),p&&N(S),j($,p),p&&N(y),C&&C.d(p),p&&N(w)}}}function an(n){let e,i,t,o,r,s;return e=new Qi({}),t=new Ni({}),r=new $s({}),{c(){G(e.$$.fragment),i=V(),G(t.$$.fragment),o=V(),G(r.$$.fragment)},m(l,d){q(e,l,d),O(l,i,d),q(t,l,d),O(l,o,d),q(r,l,d),s=!0},i(l){s||(M(e.$$.fragment,l),M(t.$$.fragment,l),M(r.$$.fragment,l),s=!0)},o(l){F(e.$$.fragment,l),F(t.$$.fragment,l),F(r.$$.fragment,l),s=!1},d(l){j(e,l),l&&N(i),j(t,l),l&&N(o),j(r,l)}}}function dn(n){let e,i;return e=new As({}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}function Ts(n){let e,i,t,o,r;e=new ss({});let s=n[0].ready&&sn(n);return o=new _s({}),{c(){G(e.$$.fragment),i=V(),s&&s.c(),t=V(),G(o.$$.fragment)},m(l,d){q(e,l,d),O(l,i,d),s&&s.m(l,d),O(l,t,d),q(o,l,d),r=!0},p(l,[d]){l[0].ready?s?(s.p(l,d),d&1&&M(s,1)):(s=sn(l),s.c(),M(s,1),s.m(t.parentNode,t)):s&&($e(),F(s,1,1,()=>{s=null}),ye())},i(l){r||(M(e.$$.fragment,l),M(s),M(o.$$.fragment,l),r=!0)},o(l){F(e.$$.fragment,l),F(s),F(o.$$.fragment,l),r=!1},d(l){j(e,l),l&&N(i),s&&s.d(l),l&&N(t),j(o,l)}}}function Ps(n,e,i){let t;return te(n,B,o=>i(0,t=o)),[t]}class xs extends K{constructor(e){super(),X(this,e,Ps,Ts,Z,{})}}new xs({target:document.getElementById("app")});
