import{d as $n,w as Ie,S as Z,i as J,s as X,c as ee,g as Y,o as we,e as V,a as C,b as _e,f as A,l as ie,n as se,h as O,r as Xe,j as z,k as re,m as T,t as Te,p as x,q as Oe,u as be,v as Ve,x as Ke,y as B,z as G,A as Qe,B as et,C as tt,D as L,E as D,F as U,G as Ge,H as Pe,I as vn,J as ot,K as rt,L as ce,M as ve,N as ye,O as fe}from"./svelte-fdfc2579.js";import{c as q}from"./cytoscape-86e840ae.js";import{g as yn}from"./cytoscape-grid-guide-eb2f2e88.js";import{e as wn}from"./cytoscape-edgehandles-455db19b.js";import{v as on}from"./uuid-a960c1f4.js";import{J as kt}from"./jszip-133f2485.js";import{s as kn}from"./cytoscape-svg-5a8e6db6.js";import{F as at}from"./file-saver-05fab67f.js";import{E as Cn}from"./jspdf-a7c15206.js";import{U as En}from"./svg2pdf.js-d0866cf6.js";import{d as Sn}from"./cytoscape-dagre-a4f19369.js";import{f as Ln}from"./cytoscape-fcose-2999cda1.js";import{c as Mn}from"./cytoscape-cola-af60e250.js";import{c as Dn}from"./cytoscape-context-menus-cfc05c35.js";import{i as An}from"./@jaames-324f80d4.js";import{p as On}from"./cytoscape-panzoom-81d89c13.js";import{u as Fn}from"./cytoscape-undo-redo-eac3a982.js";import{a as Nn}from"./cytoscape-automove-085c6bfa.js";import{K as sn}from"./konva-bc9c0e16.js";import{n as In}from"./cytoscape-node-editing-170df28d.js";import{e as xn}from"./cytoscape-edge-editing-b8b574b0.js";import"./core-js-bbf708ea.js";import"./lodash-6eb5ace2.js";import"./heap-8ffeb77a.js";import"./functional-red-black-tree-9a31655a.js";import"./lodash.memoize-ae7939c9.js";import"./lodash.throttle-e32db46a.js";import"./dagre-9b2543cb.js";import"./graphlib-a6487d85.js";import"./@babel-75df473a.js";import"./fflate-8981c52c.js";import"./cssesc-5de85916.js";import"./font-family-papandreou-066b018a.js";import"./svgpath-76644159.js";import"./specificity-c7128631.js";import"./cose-base-3e61f9ec.js";import"./layout-base-45dab9bc.js";import"./webcola-fe958753.js";import"./jquery-793df3aa.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function o(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(i){if(i.ep)return;i.ep=!0;const s=o(i);fetch(i.href,s)}})();const K=Ie(null),pt=Ie(null),Re=Ie(null);let te=Ie({meanStruc:"default",intOvFree:!0,intLvFree:!1,estimator:"default",se:"default",missing:"listwise",n_boot:1e3,fix_first:!0,fix_single:!0,auto_var:!0,auto_cov_lv_x:!0,auto_cov_y:!0,fixed_x:!0,mode:"user model"}),ue=Ie({gridShow:!1,gridSpace:26,gridColor:"#dedede",gridWidth:1,gridMovePan:!1,gridSnap:!1,gridAlign:!0,gridResize:!1,showLav:!0,showVar:!0,showMean:!0,std:!1,view:"est",ci:.95,number_digits:2}),Ae=Ie({lastFitModel:null,lastFitLavFit:null,lastFitData:null}),j=Ie({fitting:!1,loadingMode:!1,runCounter:0,modelEmpty:!0,dataAvail:!1,columnNames:null,loadedFileName:null,ids:null,dragged:null,draggedName:null,full:!0,ready:!1,parsedModel:!1,meansModelled:null,buttonDown:!1,showServerErrors:!0,everEdge:!1,drawing:"none"}),ft=Ie(0);$n(j,n=>n.columnNames);const ln=Ie({type:"info",message:"",key:0});function he(n,e){ln.update(o=>({type:n,message:e,key:o.key+1}))}he("info","Greetings");function Tn(n,e,o){let t;ee(n,ue,r=>o(1,t=r));let i=!1;yn(q);let s=Y(K);var l={snapToGridOnRelease:!1,drawGrid:!1,snapToAlignmentLocationDuringDrag:!1,distributionGuidelines:!0,geometricGuideline:!0,initPosAlignment:!1,centerToEdgeAlignment:!1,resize:!1,parentPadding:!1,guidelinesStackOrder:4,guidelinesTolerance:2,guidelinesStyle:{strokeStyle:"#8b7d6b",geometricGuidelineRange:2e3,range:100,minDistRange:10,distGuidelineOffset:10,horizontalDistColor:"#ff0000",verticalDistColor:"#00ff00",initPosAlignmentColor:"#0000ff",lineDash:[0,0],horizontalDistLine:[0,0],verticalDistLine:[0,0],initPosAlignmentLine:[0,0]},parentSpacing:-1};return we(()=>{s.gridGuide(l),o(0,i=!0)}),n.$$.update=()=>{n.$$.dirty&3&&i&&t.gridShow!==void 0&&Y(K).gridGuide({drawGrid:t.gridShow}),n.$$.dirty&3&&i&&t.gridSpace!==void 0&&Y(K).gridGuide({gridSpacing:t.gridSpace}),n.$$.dirty&3&&i&&t.gridWidth!==void 0&&Y(K).gridGuide({lineWidth:t.gridWidth}),n.$$.dirty&3&&i&&t.gridMovePan!==void 0&&Y(K).gridGuide({panGrid:t.gridMovePan}),n.$$.dirty&3&&i&&t.gridSnap!==void 0&&Y(K).gridGuide({snapToGridDuringDrag:t.gridSnap}),n.$$.dirty&3&&i&&t.gridAlign!==void 0&&Y(K).gridGuide({snapToAlignmentLocationOnRelease:t.gridAlign}),n.$$.dirty&3&&i&&t.gridResize!==void 0&&Y(K).gridGuide({resize:t.gridResize})},[i,t]}class Pn extends Z{constructor(e){super(),J(this,e,Tn,null,X,{})}}const de="observed-variable",me="latent-variable",Se="constant",ke="free",Ye="nolabel",ge="fromUser",ze="label",xe="byLav",Ce="fixed",Me="forcefree",Fe="directed",Ne="undirected",st="loop",Be="linked",De="fromLav",Ct="hasEst",ut="validated",Je="continous",Ze="ordered",Vn="hasEstFixed",He=80,zn=80,rn=[{selector:"element",style:{"font-size":function(n){return n.data("font-size")||14}}},{selector:"node",style:{width:He.toString(),height:"80","background-color":function(n){return n.data("background-color")||"white"},"border-color":function(n){return n.data("border-color")||"grey"},"border-width":function(n){return n.data("border-width")||"2px"},label:"data(label)","text-valign":"center","text-halign":"center"}},{selector:`node.${de}`,style:{shape:"rectangle"}},{selector:`node.${de}.${Ze}`,style:{"border-style":"double","border-width":5}},{selector:`node.${me}`,style:{shape:"ellipse","border-color":"black"}},{selector:`node.${Se}`,style:{shape:"triangle",label:"1","text-valign":"center","text-margin-y":"10px","border-color":"black"}},{selector:`node.${Be}`,style:{"border-color":"black"}},{selector:"edge",style:{width:function(n){return n.data("width")||3},"line-color":function(n){return n.data("line-color")||"#000"},"target-arrow-color":function(n){return n.data("target-arrow-color")||"#000"},"source-arrow-color":function(n){return n.data("source-arrow-color")||"#000"},"target-arrow-shape":"triangle","curve-style":"bezier","text-valign":"center","text-halign":"center","text-wrap":"wrap","text-max-width":zn,"z-index":10,color:"#000","text-outline-color":"#fff","text-outline-width":"2px","text-background-color":"#fff","text-background-opacity":1,"text-background-padding":"4px"}},{selector:"edge.loop",style:{"curve-style":"bezier","source-arrow-shape":"triangle","loop-direction":function(n){return n.data("loop-direction")||0},"loop-sweep":.8,"control-point-step-size":n=>{const e=n.source(),o=parseInt(e.style("height")),t=parseInt(e.style("width"));let i;return n.style("loop-direction")=="0deg"||n.style("loop-direction")=="180deg"?i=o:n.style("loop-direction")=="90deg"||n.style("loop-direction")=="270deg"?i=t:i=Math.max(t,o),i/80*60}}},{selector:`edge.${Ne}`,style:{"curve-style":"unbundled-bezier","control-point-distances":[-100],"control-point-weights":[.5],"source-arrow-shape":"triangle"}},{selector:`edge.${Ne}.${De}`,style:{"control-point-distances":[100]}},{selector:`edge.${ze}, edge.${ze}`,style:{label:function(n){return n.data("label")}}},{selector:`edge.${Ce}.${ze}`,style:{label:function(n){return n.data("label")+"@"+n.data("value")}}},{selector:`edge.${Ce}.${Ye}`,style:{label:function(n){return"@"+n.data("value")}}},{selector:`edge.${Me}`,style:{"line-color":"blue"}},{selector:`edge.${De}, edge.${xe}`,style:{"line-style":"dashed"}},{selector:"edge:selected",style:{"underlay-opacity":.5,"underlay-color":"#928ff8"}},{selector:"node:selected",style:{"underlay-color":"#928ff8","underlay-opacity":.5}}],We={autoungrabify:!1,autolock:!1,style:rn,minZoom:.2,maxZoom:5},Rn={preview:!1,hoverDelay:150,handleNodes:"node",snap:!0,handleColor:"#ff0000",handleSize:10,canConnect:function(n,e){return!cy.edges(function(t){if(!t.isUserAdded())return!1;const i=t.source().id()==n.id()&&t.target().id()==e.id(),s=t.source().id()==e.id()&&t.target().id()==n.id();return i||s}).length}},Bn={undoable:!0,bendRemovalSensitivity:16,enableMultipleAnchorRemovalOption:!0,initAnchorsAutomatically:!1,useTrailingDividersAfterContextMenuOptions:!1,enableCreateAnchorOnDrag:!0,anchorShapeSizeFactor:4};function Gn(n){q.use(wn);var e=q(We);return e.boxSelectionEnabled(!0),K.set(e),pt.set(e.edgehandles(Rn)),[]}class Un extends Z{constructor(e){super(),J(this,e,Gn,null,X,{})}}function le(n){var e=Y(j);if(!e.full)return;let o=Y(K);const t=o.edges();for(var i=0;i<t.length;i++)t[i].removeEstimates();if(o.getUserEdges().length==0){o.getLavaanNodes().remove(),o.getLavaanEdges().remove();return}if(!e.dataAvail&&n=="estimate"){he("danger","Model not send to lavaan because no data available");return}let s=an(n);Shiny.setInputValue("run-fromJavascript",JSON.stringify(s)),Shiny.setInputValue("runCounter",Math.random()),n==="user model"&&o.getLavaanModifiedEdges().forEach(l=>{l.freePara()})}function qn(n,e){for(let o=0;o<n.length;o++)if(n[o]===e)return!0;return!1}function it(n,e){let o;n==null?o="1":o=n.getLabel();let t=!1,i;if(e.isFixed()&&!e.isModifiedLavaan()?(i=e.getValue()+"*"+o,t=!0):e.isForceFree()&&(i="NA*"+o,t=!0),e.hasLabel()){const s=e.getLabel();t?i+=" + "+s+"*"+o:(t=!0,i=s+"*"+o)}else t||(i=o);return i}class jn{constructor(e,o,t=null,i=null,s=null,l=null){this.mode=e,Object.assign(this,{model:{options:t,syntax:i,R_script:o,ordered_labels:l},forceUpdate:Math.random(),cache:s})}}function an(n){let e=Y(K),o=Y(j),t="",i="";i+=`library(lavaan)
`,o.dataAvail?i+=`data <- read.csv("${o.loadedFileName}")
`:i+=`#make sure your data is loaded into the 'data' variable
`;const s=e.getLatentNodes();let l=!1;for(let p=0;p<s.length;p++){const E=s[p];let N="";const h=E.connectedEdges(function(y){return y.isDirected()&&y.source().id()==E.id()&&y.target().isObserved()});if(h.length>0){l||(t+=`# measurement model
`,l=!0);const y=Math.max(...h.map(w=>w.target().position().x))-Math.min(...h.map(w=>w.target().position().x)),W=Math.max(...h.map(w=>w.target().position().y))-Math.min(...h.map(w=>w.target().position().y)),H=y>=W?"x":"y",m=h.map((w,R)=>({index:R,value:w.target().position()[H]})).sort((w,R)=>w.value-R.value).map(w=>w.index);for(let w=0;w<h.length;w++){const R=h[m[w]].target();w>0&&(N+=" + "),N+=it(R,h[m[w]])}t+=" "+E.getLabel()+" =~ "+N+`
`}else E.connectedEdges(function(y){return y.isUserAdded()}).length>0&&(l||(t+=`# measurement model
`,l=!0),t+=" "+E.getLabel()+` =~ 0
`)}function r(p){return p.isDirected()&&!p.source().isConstant()&&!(p.source().isLatent()&&p.target().isObserved())&&(p.isUserAdded()||p.isModifiedLavaan())}let u=e.edges(r),d=[];for(let p=0;p<u.length;p++)qn(d,u[p].target())||d.push(u[p].target());if(d.length>0){t+=`
# regressions`;for(let p=0;p<d.length;p++){const E=d[p],N=E.connectedEdges(h=>r(h)&&h.target().same(E));if(N.length>0){let h="";for(var a=0;a<N.length;a++){var f=N[a].source();a>0&&(h+=" + "),h+=it(f,N[a])}t+=`
 `+E.getLabel()+" ~ "+h}}}let g=e.edges(function(p){return(p.isUndirected()||p.myIsLoop())&&(p.isUserAdded()||p.isModifiedLavaan())});if(g.length>0){t+=`

# residual (co)variances`;for(let p=0;p<g.length;p++){let E=g[p].source().data("label");t+=`
 `+E+" ~~ "+it(g[p].target(),g[p])}}const c=e.nodes(function(p){return p.isConstant()});for(let p=0;p<c.length;p++){const N=c[p].connectedEdges(function(h){return h.isUserAdded()});if(N.length>0){t+=`
# intercepts
`;for(var a=0;a<N.length;a++){var f=N[a].target();t+=f.getLabel()+" ~ "+it(void 0,N[a])+`
`}}}t=`'
`+t+`'

`;function b(p,E=60){return p.split(`
`).map(N=>{if(N.includes("+")&&N.length>E){const h=N.split(" + ");let y=[],W=h[0];const H=N.match(/^\s*/)[0],m=W.indexOf("~")+1;for(let w=1;w<h.length;w++)W.length+h[w].length+3>E?(y.push(W+" + "),W=H+" ".repeat(m)+h[w]):W+=" + "+h[w];return y.push(W),y.join(`
`)}return N}).join(`
`)}t=b(t);const $=e.nodes(function(p){return p.isOrdered()}).map(p=>p.getLabel()),v=Hn($);return i+="model <-"+t,i+="result <- lavaan(model, data, "+v,new jn(n,i,v,t=t,Y(Ae),$)}function Hn(n){const e=Y(te),o=Le(e.meanStruc),t=Le(e.intOvFree),i=Le(e.intLvFree);let s=`meanstructure = ${o},
		 int.ov.free = ${t}, int.lv.free = ${i},
		 estimator = ${dt(e.estimator)}, se = ${dt(e.se)},
		 missing = ${dt(e.missing)}, auto.fix.first = ${Le(e.fix_first)},
		 auto.fix.single = ${Le(e.fix_single)}, auto.var = ${Le(e.auto_var)},
		 auto.cov.lv.x = ${Le(e.auto_cov_lv_x)}, auto.cov.y = ${Le(e.auto_cov_y)},
  		 fixed.x = ${Le(e.fixed_x)}`;if(e.se=="boot"){const l=`, bootstrap = ${e.n_boot})`;s=s+l}else s=s+")";return n.length>0&&(s=`ordered = ${'c("'+n.join('", "')+'")'}, ${s}`),s}function dt(n){return'"'+n+'"'}function Le(n){if(n==!0||n=="true")return"TRUE";if(n==!1||n=="false")return"FALSE";if(n=="default")return'"default"';throw new Error("Should not happen")}let un,dn;function cn(){un=1,dn=1}cn();function pe(n,e,o=!0,t=null){let i=Y(K),s=on(),l;if(t!==null){if(i.nodes().find(u=>u.data().label===t)){he("danger","Node with the same label already exists.");return}l=t}else n==de?l="x"+un++:n==me?l="f"+dn++:l=void 0,i.nodes().find(u=>u.data().label===l)&&(l=l+".1");let r=Y(Re);return e?r.do("add",{group:"nodes",data:{id:s,label:l},classes:[n,Je],renderedPosition:e}):(e={x:Math.random()*400+50,y:Math.random()*400+50},i.add({group:"nodes",data:{id:s,label:l},classes:[n,Je],renderedPosition:e})),o&&le(Y(te).mode),s}function je(n,e,o=!0,t=!1,i=null,s=!0){let l=Y(K),r=on();return l.add({group:"edges",data:{id:r,source:n,target:e,value:t?i:void 0},classes:`${o?Fe:Ne} ${s?ge:De} ${t?Ce:ke} ${Ye}`})}function $e(n){const e=Kn(n);if(e!=null){const o=Yn(n),t=Zn(o);let i=Xn(t);i=Wn(i,t),e.data("loop-direction",`${i}deg`)}}function Wn(n,e){const o=[0,180,90,270],t=35,i=o.sort((r,u)=>{const d=Math.min(Math.abs(r-n),360-Math.abs(r-n)),a=Math.min(Math.abs(u-n),360-Math.abs(u-n));return d-a}),l=[[0,180],[90,270]].flatMap(r=>i.filter(u=>r.includes(u)));for(const r of l)if(!e.some(d=>{const a=Math.abs(r-d);return Math.min(a,360-a)<=t}))return r;return n}function Yn(n){const e=cy.getElementById(n);if(e.length===0){console.error(`Node with ID ${n} does not exist.`);return}let o=[];return e.connectedEdges().forEach(t=>{const i=t.source(),s=t.target();let l;(i.id()!==e.id()||s.id()!==e.id())&&(i.id()===e.id()?l=Et(t.sourceEndpoint(),e.position()):l=Et(t.targetEndpoint(),e.position()),o.push(l))}),o}function Et(n,e){return Object.keys(n).reduce((o,t)=>{if(e.hasOwnProperty(t))o[t]=n[t]-e[t];else throw new Error(`Key ${t} not found in second object`);return o},{})}function Zn(n){let e=[];return n.forEach(o=>{e.push(Jn(o))}),e}function Jn(n){let e=Math.atan2(n.y,n.x)*180/Math.PI;return e=(e+90)%360,e}function Xn(n){let e=-1,o=null;for(let t=0;t<=360;t++){let i=1/0;for(let s=0;s<n.length;s++){let l=Math.abs(n[s]-t);l=Math.min(l,360-l),i=Math.min(i,l)}i>e&&(e=i,o=t)}return o}function Kn(n,e){var o=cy.getElementById(n),t=null;return o.connectedEdges().forEach(function(i){var s=i.source(),l=i.target();if(s.id()===n&&l.id()===n){t=i;return}}),t!==null&&o.connectedEdges().length>1&&!t.hasClass("fixDeg")?t:null}function Qn(n){let e,o,t;return{c(){e=V("div"),C(e,"id","cy"),C(e,"class","graph svelte-11pj9ut"),_e(e,"flex-basis",n[1].full?"70%":"100%")},m(i,s){A(i,e,s),n[6](e),o||(t=[ie(e,"mouseover",n[2]),ie(e,"mouseout",n[3]),ie(e,"mousemove",n[4]),ie(e,"drop",n[5]),ie(e,"dragover",ei)],o=!0)},p(i,[s]){s&2&&_e(e,"flex-basis",i[1].full?"70%":"100%")},i:se,o:se,d(i){i&&O(e),n[6](null),o=!1,Xe(t)}}}function ei(n){n.preventDefault()}function ti(n,e){let o=Math.atan2(n,-e)*(180/Math.PI);return o<0&&(o+=360),o}function ni(n,e,o){let t,i,s;ee(n,Re,h=>o(12,t=h)),ee(n,j,h=>o(1,i=h)),ee(n,te,h=>o(13,s=h));let l=Y(K),r=Y(pt),u,d={x:0,y:0};we(()=>{l.mount(u)});function a(h){if(z(j,i.buttonDown=!0,i),(h.key==="Alt"||h.key===" "||h.key.toLowerCase()==="x")&&(r.enableDrawMode(),h.key==="Alt"?z(j,i.drawing="undirected",i):z(j,i.drawing="directed",i)),h.key==="Backspace"){let y=l.$(":selected");y.length>0&&(t.do("remove",y),le(s.mode)),z(j,i.buttonDown=!1,i)}if(["l","o","c"].includes(h.key.toLowerCase())){let y;switch(h.key.toLowerCase()){case"l":y=me;break;case"o":y=de;break;case"c":y=Se;break}pe(y,{...d}),z(j,i.buttonDown=!1,i)}z(j,i.buttonDown=!1,i)}function f(){l.autoungrabify(!1),l.nodes().grabify()}function g(h){(h.key==="Alt"||h.key===" "||h.key.toLowerCase()==="x")&&(r.disableDrawMode(),z(j,i.drawing="none",i),f())}function c(){document.addEventListener("keydown",a),document.addEventListener("keyup",g)}function b(){document.removeEventListener("keydown",a,!1),document.removeEventListener("keyup",g,!1)}function _(h){d.x=h.offsetX,d.y=h.offsetY}l.on("ehcomplete",(h,y,W,H)=>{const m=H,w=y.id(),R=W.id();m.remove(),m.init(),w!==R?(i.drawing==="undirected"?m.setUndirected():m.setDirected(),$e(w),$e(R)):(m.makeLoop(),$e(R)),!((m.isUndirected()||m.myIsLoop())&&(y.isConstant()||W.isConstant()))&&(m.isDirected()&&W.isConstant()||m.isDirected()&&y.isConstant()&&W.connectedEdges(M=>M.isUserAdded()&&M.source().isConstant()).length>1||(m.isDirected()&&y.isConstant()?m.makeMeanEdge():m.makeOtherEdge(),t.do("add",m),le(s.mode)))});function $(h){let y=0;const W=100,H=W*2;h.preventDefault();let m={x:h.offsetX,y:h.offsetY};function w(M,k){let F;if(i.dataAvail){const oe=l.getObservedNodes().map(I=>I.data().label);F=i.columnNames.filter(I=>!oe.includes(I)).map(I=>({text:I,value:I}))}else F=Array.from({length:100},(oe,Q)=>`var${Q+1}`);const P={title:M,inputType:"select",multiple:!0,value:"",inputOptions:F,callback:k};bootbox.prompt(P)}function R(){he("danger","Either no variable selected or at least one selected variable already is in the model.")}function ne(M){return M&&!l.nodes().some(k=>k.data().label===M)}if(i.dragged=="observed-with-name")pe(de,m,!0,i.draggedName);else if(i.dragged=="multiple")w("Select Variables",function(M){if(ne(M)){const k=l.zoom();M.forEach(F=>{pe(de,{x:m.x+y*k,y:m.y},!0,F),y+=W})}else R()});else if(i.dragged=="factor")w("Select Variables",function(M){if(ne(M)){const k=l.zoom(),F=pe(me,{x:m.x+W*k*M.length/2-He/2*k,y:m.y});M.forEach(P=>{const oe=pe(de,{x:m.x+y*k,y:m.y+k*H},!0,P);y+=W,je(F,oe)}),z(te,s.fix_first=!0,s),z(te,s.fix_single=!0,s),z(te,s.auto_var=!0,s),z(te,s.intOvFree=!0,s),z(te,s.intLvFree=!1,s)}else R()});else if(i.dragged=="growth"){let M=0;w("Select Time Points",function(k){if(ne(k)){const F=l.zoom(),P=pe(Se,{x:m.x+W*F*k.length/2-He/2*F,y:m.y},!0),oe=pe(me,{x:m.x+He/2*F,y:m.y+1*H*F},!0,"Intercept"),Q=pe(me,{x:m.x+W*F*(k.length-1)-He/2*F,y:m.y+1*H*F},!0,"Slope");je(P,oe,!0,!1),je(P,Q,!0,!1);let I=1;k.forEach(ae=>{const qe=pe(de,{x:m.x+M*F,y:m.y+2*H*F},!0,ae);M+=W,je(oe,qe,!0,!0,1),I!=1&&je(Q,qe,!0,!0,I-1),I+=1}),z(te,s.auto_var=!0,s),z(te,s.intOvFree=!1,s),z(te,s.intLvFree=!0,s)}})}else pe(i.dragged,m);(i.dragged=="multiple"||i.dragged=="factor"||i.dragged=="growth")&&le(s.mode),z(j,i.dragged=null,i)}let v=!1,S=null,p;l.on("mousedown","edge.loop",function(h){v=!0,S=h.target,S.unpanify(),p=S.style("loop-direction")});let E;l.on("mousemove",function(h){if(!v||!S)return;let W=S.source().renderedPosition();E=ti(d.x-W.x,d.y-W.y);const H=5,m=[0,90,180,270];for(let w=0;w<m.length;w++)if(Math.abs(E-m[w])<=H){E=m[w];break}S.data("loop-direction",`${E}deg`)}),window.addEventListener("mouseup",function(){if(v){if(v=!1,E===void 0||p===`${E}deg`)return;S.data("loop-direction",p),S.addClass("fixDeg"),t.do("style",{eles:S,style:{"loop-direction":`${E}deg`}}),S=null}});function N(h){re[h?"unshift":"push"](()=>{u=h,o(0,u)})}return[u,i,c,b,_,$,N]}class ii extends Z{constructor(e){super(),J(this,e,ni,Qn,X,{})}}function oi(n,e,o){let t,i;ee(n,j,u=>o(2,t=u)),ee(n,te,u=>o(3,i=u));let s=Y(K);s.on("add","node",function(u){const d=u.target;if(d.isObserved()){let a=t.columnNames;a&&a.includes(d.getLabel())&&(d.link(),he("success",`Variable ${d.getLabel()} linked to data`))}t.modelEmpty&&s.edges().length>0&&z(j,t.modelEmpty=!1,t)}),s.on("remove","node",function(u){s.getUserEdges().length==0&&(z(j,t.modelEmpty=!0,t),Shiny.setInputValue("show_help",Math.random())),t.loadingMode||le(i.mode)}),s.on("remove","edge",function(u){$e(u.target.source().id()),$e(u.target.target().id())}),s.on("add","edge",function(u){z(j,t.everEdge=!0,t),t.modelEmpty&&s.edges().length>0&&z(j,t.modelEmpty=!1,t),$e(u.target.source().id()),$e(u.target.target().id())}),s.on("position","node",function(u){u.target.neighborhood().nodes().forEach(f=>{const g=f.id();$e(g)})});let l=null,r=!1;return s.on("mousedown",function(u){const d=b=>parseFloat(b.replace("px","")),a=u.position;let f=null,g=1/0;const c=30;s.edges().forEach(function(b){if(b.isDirected()){const _=d(b.style("text-margin-x")),$=d(b.style("text-margin-y")),v=b.midpoint(),S={x:v.x+_,y:v.y+$},p=Math.abs(a.x-S.x),E=a.y-S.y,N=Math.sqrt(p*p+E*E);N<g&&N<c&&(f=b,g=N)}}),f!==null&&(l=f,r=!0,u.preventDefault(),f.unpanify())}),s.on("mousemove",function(u){if(r&&l){const d=u.position,a=l.midpoint(),f=l.source().position(),g=l.target().position(),c={x:g.x-f.x,y:g.y-f.y},b=Math.sqrt(c.x**2+c.y**2),_={x:c.x/b,y:c.y/b},$={x:d.x-a.x,y:d.y-a.y};let v=$.x*_.x+$.y*_.y;const S=(g.y-a.y)/_.y-70,p=(f.y-a.y)/_.y+70;let E=Math.min(S,v);E=Math.max(p,E);const N=E*_.x,h=E*_.y;l.style({"text-margin-x":N,"text-margin-y":h})}}),s.on("mouseup",function(u){r=!1,l=null}),[]}class si extends Z{constructor(e){super(),J(this,e,oi,null,X,{})}}function St(n,e,o){const t=n.slice();return t[21]=e[o],t}function Lt(n){let e,o,t,i,s,l,r,u,d,a,f,g,c,b,_=n[1],$=[];for(let v=0;v<_.length;v+=1)$[v]=Mt(St(n,_,v));return{c(){e=V("div"),o=T(),t=V("div"),i=V("button"),i.textContent="Multiple Variables",s=T(),l=V("button"),l.textContent="Factor",r=T(),u=V("button"),u.textContent="Growth",d=T(),a=V("div"),f=T(),g=V("ul");for(let v=0;v<$.length;v+=1)$[v].c();C(e,"class","vertical-bar svelte-cmzyih"),C(i,"class","draggable-item svelte-cmzyih"),C(i,"draggable","true"),C(l,"class","draggable-item svelte-cmzyih"),C(l,"draggable","true"),C(u,"class","draggable-item svelte-cmzyih"),C(u,"draggable","true"),C(t,"id","model-buttons"),C(t,"class","svelte-cmzyih"),C(a,"class","vertical-bar svelte-cmzyih"),C(g,"class","draggable-list svelte-cmzyih")},m(v,S){A(v,e,S),A(v,o,S),A(v,t,S),x(t,i),x(t,s),x(t,l),x(t,r),x(t,u),A(v,d,S),A(v,a,S),A(v,f,S),A(v,g,S);for(let p=0;p<$.length;p+=1)$[p]&&$[p].m(g,null);c||(b=[ie(i,"dragstart",n[14]),ie(l,"dragstart",n[15]),ie(u,"dragstart",n[16])],c=!0)},p(v,S){if(S&10){_=v[1];let p;for(p=0;p<_.length;p+=1){const E=St(v,_,p);$[p]?$[p].p(E,S):($[p]=Mt(E),$[p].c(),$[p].m(g,null))}for(;p<$.length;p+=1)$[p].d(1);$.length=_.length}},d(v){v&&O(e),v&&O(o),v&&O(t),v&&O(d),v&&O(a),v&&O(f),v&&O(g),Oe($,v),c=!1,Xe(b)}}}function Mt(n){let e,o=n[21]+"",t,i,s,l;function r(...u){return n[17](n[21],...u)}return{c(){e=V("li"),t=be(o),i=T(),C(e,"draggable","true"),C(e,"class","draggable-item svelte-cmzyih")},m(u,d){A(u,e,d),x(e,t),x(e,i),s||(l=ie(e,"dragstart",r),s=!0)},p(u,d){n=u,d&2&&o!==(o=n[21]+"")&&Ve(t,o)},d(u){u&&O(e),s=!1,l()}}}function li(n){let e,o,t,i,s,l,r,u,d,a,f,g,c,b,_,$=n[0].dataAvail&&Lt(n);return{c(){e=V("div"),o=V("div"),t=V("div"),i=V("button"),i.textContent="➔",s=T(),l=V("button"),l.textContent="↔",r=T(),u=V("div"),d=T(),a=V("div"),f=T(),g=V("div"),c=T(),$&&$.c(),C(i,"id","directed-arrow"),C(i,"class","arrow-btn svelte-cmzyih"),C(i,"title","Draw Directed Arrows"),Te(i,"active",n[0].drawing==="directed"),C(l,"id","undirected-arrow"),C(l,"class","arrow-btn svelte-cmzyih"),C(l,"title","Draw Undirected Arrows"),Te(l,"active",n[0].drawing==="undirected"),C(u,"role","button"),C(u,"id","add-manifest-variable"),C(u,"title","Create Observed Variable"),C(u,"draggable","true"),C(u,"class","variable-button svelte-cmzyih"),C(u,"data-button-type",de),C(u,"tabindex","0"),C(a,"role","button"),C(a,"tabindex","0"),C(a,"id","add-latent-variable"),C(a,"title","Create Latent Variable"),C(a,"draggable","true"),C(a,"class","variable-button svelte-cmzyih"),C(a,"data-button-type",me),C(g,"role","button"),C(g,"tabindex","0"),C(g,"id","add-constant-variable"),C(g,"class","variable-button svelte-cmzyih"),C(g,"title","Create Constant Variable"),C(g,"data-button-type","const"),C(g,"draggable","true"),C(t,"id","buttons"),C(t,"class","svelte-cmzyih"),C(o,"id","buttonCont"),C(o,"class","svelte-cmzyih"),C(e,"class","toolbox svelte-cmzyih")},m(v,S){A(v,e,S),x(e,o),x(o,t),x(t,i),x(t,s),x(t,l),x(t,r),x(t,u),x(t,d),x(t,a),x(t,f),x(t,g),x(e,c),$&&$.m(e,null),b||(_=[ie(i,"click",n[9]),ie(l,"click",n[10]),ie(u,"dragstart",n[11]),ie(a,"dragstart",n[12]),ie(g,"dragstart",n[13])],b=!0)},p(v,[S]){S&1&&Te(i,"active",v[0].drawing==="directed"),S&1&&Te(l,"active",v[0].drawing==="undirected"),v[0].dataAvail?$?$.p(v,S):($=Lt(v),$.c(),$.m(e,null)):$&&($.d(1),$=null)},i:se,o:se,d(v){v&&O(e),$&&$.d(),b=!1,Xe(_)}}}function ri(n,e,o){let t,i;ee(n,j,h=>o(0,t=h)),ee(n,K,h=>o(8,i=h)),j.subscribe(h=>{});function s(h){z(j,t.dragged=h,t)}function l(h,y){z(j,t.dragged="observed-with-name",t),z(j,t.draggedName=y,t)}function r(h){z(j,t.dragged="multiple",t)}function u(h){z(j,t.dragged="factor",t)}function d(h){z(j,t.dragged="growth",t)}let a,f=Y(pt);function g(h){t.drawing===h?(f.disableDrawMode(),z(j,t.drawing="none",t)):(f.enableDrawMode(),z(j,t.drawing=h,t))}const c=()=>{g("directed")},b=()=>{g("undirected")},_=()=>{event.dataTransfer.setData("text/plain","node"),s(de)},$=()=>{s(me)},v=()=>{s(Se)},S=h=>r(),p=h=>u(),E=h=>d(),N=(h,y)=>l(y,h);return n.$$.update=()=>{if(n.$$.dirty&257&&typeof i.getObservedNodes=="function"&&t.columnNames!==null){const h=i.getObservedNodes().map(y=>y.data("label"));o(1,a=t.columnNames.filter(y=>!h.includes(y)))}},[t,a,s,l,r,u,d,g,i,c,b,_,$,v,S,p,E,N]}class ai extends Z{constructor(e){super(),J(this,e,ri,li,X,{})}}function ui(n){let e,o,t,i,s;const l=n[1].default,r=Ke(l,n,n[0],null);return i=new ai({}),{c(){e=V("nav"),o=V("ul"),r&&r.c(),t=T(),B(i.$$.fragment),C(o,"class","nav navbar-nav navbar-left"),C(e,"class","navbar navbar-default navbar-static-top navbar-left svelte-12n5yi9")},m(u,d){A(u,e,d),x(e,o),r&&r.m(o,null),x(e,t),G(i,e,null),s=!0},p(u,[d]){r&&r.p&&(!s||d&1)&&Qe(r,l,u,u[0],s?tt(l,u[0],d,null):et(u[0]),null)},i(u){s||(L(r,u),L(i.$$.fragment,u),s=!0)},o(u){D(r,u),D(i.$$.fragment,u),s=!1},d(u){u&&O(e),r&&r.d(u),U(i)}}}function di(n,e,o){let{$$slots:t={},$$scope:i}=e;return n.$$set=s=>{"$$scope"in s&&o(0,i=s.$$scope)},[i,t]}class ci extends Z{constructor(e){super(),J(this,e,di,ui,X,{})}}function mt(n,e){if(n==null)throw new Error("Columnnames may not be null.");const t=Y(K).nodes(function(s){return s.isObserved()});if(t.length>0)for(var i=0;i<t.length;i++){const s=t[i],l=s.getLabel();n.includes(l)&&!s.isLinked()?s.link():!n.includes(l)&&s.isLinked()&&s.unlink()}}function fi(n){let e,o,t,i,s,l,r;const u=n[3].default,d=Ke(u,n,n[2],null);return{c(){e=V("li"),o=V("a"),t=be(n[0]),i=V("span"),s=T(),l=V("ul"),d&&d.c(),C(i,"class","caret"),C(o,"href","#"),C(o,"class","dropdown-toggle svelte-1oq006n"),C(o,"data-toggle","dropdown"),C(o,"role","button"),C(o,"aria-haspopup","true"),C(o,"aria-expanded","false"),C(o,"draggable","false"),Te(o,"minimal",n[1]),C(l,"class","dropdown-menu"),C(e,"class","dropdown")},m(a,f){A(a,e,f),x(e,o),x(o,t),x(o,i),x(e,s),x(e,l),d&&d.m(l,null),r=!0},p(a,[f]){(!r||f&1)&&Ve(t,a[0]),(!r||f&2)&&Te(o,"minimal",a[1]),d&&d.p&&(!r||f&4)&&Qe(d,u,a,a[2],r?tt(u,a[2],f,null):et(a[2]),null)},i(a){r||(L(d,a),r=!0)},o(a){D(d,a),r=!1},d(a){a&&O(e),d&&d.d(a)}}}function mi(n,e,o){let{$$slots:t={},$$scope:i}=e,{name:s}=e,{minimal:l=!1}=e;return n.$$set=r=>{"name"in r&&o(0,s=r.name),"minimal"in r&&o(1,l=r.minimal),"$$scope"in r&&o(2,i=r.$$scope)},[s,l,i,t]}class Ue extends Z{constructor(e){super(),J(this,e,mi,fi,X,{name:0,minimal:1})}}function Dt(n,e,o){const t=n.slice();return t[4]=e[o],t}function At(n){let e;return{c(){e=V("li"),C(e,"class","divider")},m(o,t){A(o,e,t)},d(o){o&&O(e)}}}function Ot(n){let e,o,t=n[4].name+"",i,s,l,r,u;function d(...f){return n[3](n[4],...f)}let a=n[4].divider&&At();return{c(){e=V("li"),o=V("a"),i=be(t),s=T(),a&&a.c(),l=Ge(),C(o,"href","#"),Te(e,"disabled",n[4].disable)},m(f,g){A(f,e,g),x(e,o),x(o,i),A(f,s,g),a&&a.m(f,g),A(f,l,g),r||(u=ie(o,"click",d),r=!0)},p(f,g){n=f,g&1&&t!==(t=n[4].name+"")&&Ve(i,t),g&1&&Te(e,"disabled",n[4].disable),n[4].divider?a||(a=At(),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null)},d(f){f&&O(e),f&&O(s),a&&a.d(f),f&&O(l),r=!1,u()}}}function gi(n){let e,o=n[0],t=[];for(let i=0;i<o.length;i+=1)t[i]=Ot(Dt(n,o,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=Ge()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);A(i,e,s)},p(i,s){if(s&1){o=i[0];let l;for(l=0;l<o.length;l+=1){const r=Dt(i,o,l);t[l]?t[l].p(r,s):(t[l]=Ot(r),t[l].c(),t[l].m(e.parentNode,e))}for(;l<t.length;l+=1)t[l].d(1);t.length=o.length}},d(i){Oe(t,i),i&&O(e)}}}function pi(n){let e,o;return e=new Ue({props:{minimal:n[2],name:n[1],$$slots:{default:[gi]},$$scope:{ctx:n}}}),{c(){B(e.$$.fragment)},m(t,i){G(e,t,i),o=!0},p(t,[i]){const s={};i&4&&(s.minimal=t[2]),i&2&&(s.name=t[1]),i&129&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(L(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){U(e,t)}}}function hi(n,e){e.disable||e.action(n)}function bi(n,e,o){let{menuItems:t}=e,{name:i}=e,{minimal:s=!1}=e;const l=(r,u)=>hi(u,r);return n.$$set=r=>{"menuItems"in r&&o(0,t=r.menuItems),"name"in r&&o(1,i=r.name),"minimal"in r&&o(2,s=r.minimal)},[t,i,s,l]}class ht extends Z{constructor(e){super(),J(this,e,bi,pi,X,{menuItems:0,name:1,minimal:2})}}function _i(n){let e,o;return e=new ht({props:{name:"File",menuItems:n[1],minimal:!n[0]}}),{c(){B(e.$$.fragment)},m(t,i){G(e,t,i),o=!0},p(t,[i]){const s={};i&2&&(s.menuItems=t[1]),i&1&&(s.minimal=!t[0]),e.$set(s)},i(t){o||(L(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){U(e,t)}}}function Ft(n,e){for(let o in e)e.hasOwnProperty(o)&&e[o]!==void 0&&(n[o]=e[o])}function $i(){document.getElementById("dataUpload-fileInput").click()}function Nt(){const n=new Date;return`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}_${String(n.getHours()).padStart(2,"0")}-${String(n.getMinutes()).padStart(2,"0")}-${String(n.getSeconds()).padStart(2,"0")}`}async function vi(){Shiny.setInputValue("down-requestData",Math.random())}function yi(n,e,o){let t,i,s,l,r;ee(n,j,m=>o(2,t=m)),ee(n,ft,m=>o(3,i=m)),ee(n,Ae,m=>o(4,s=m)),ee(n,te,m=>o(5,l=m)),ee(n,ue,m=>o(6,r=m));let{full:u=!0}=e;q.use(kn);function d(){t.modelEmpty?a():bootbox.confirm("Are you sure you want to create a new model? This will delete the current model.",function(m){m&&a()})}function a(){Y(K).elements().remove(),cn(),z(j,t.parsedModel=!1,t),z(te,l.fix_first=!0,l),z(te,l.mode="user model",l),Shiny.setInputValue("show_help",Math.random());for(let w in s)z(Ae,s[w]=null,s)}function f(m,w){at.saveAs(m,"model."+w)}function g(m){a();let w=JSON.parse(m),R=Y(K),ne;ne=JSON.parse(w.model);const M=JSON.parse(w.modelOpt),k=JSON.parse(w.gridViewOpt);if(Ft(l,M),Ft(r,k),w.fitCache!=null){const F=JSON.parse(w.fitCache);z(Ae,s=F,s)}z(j,t.loadingMode=!0,t),R.json({elements:ne}),R.style(rn),R.edgeEditing(Bn),R.style().update(),R.minZoom(We.minZoom),R.maxZoom(We.maxZoom),R.autolock(We.autolock),R.autoungrabify(We.autoungrabify),R.nodeEditing({resizeToContentCueImage:"",undoable:!0}),R.nodes().forEach(F=>{console.log(F.data("width")),F.style({width:F.data("width")}),F.style({height:F.data("height")})}),t.dataAvail&&mt(t.columnNames),l.mode!=="user model"?z(ue,r.showLav=!0,r):z(ue,r.showLav=!1,r),R.nodes().forEach(F=>{$e(F.id())}),z(j,t.loadingMode=!1,t)}async function c(){const m=document.createElement("input");m.setAttribute("type","file"),m.setAttribute("accept",".lvm");const w=await new Promise(ne=>{m.addEventListener("change",M=>ne(M.target.files[0])),m.click()}),R=await new Promise(ne=>{const M=new FileReader;M.readAsText(w,"UTF-8"),M.onload=()=>ne(M.result)});g(R)}function b(){t.modelEmpty?c():bootbox.confirm("Are you sure you want to load a model? This will delete the current model.",function(m){m&&c()})}function _(){t.modelEmpty?$():bootbox.confirm("Are you sure you want to load a model? This will delete the current model.",function(m){m&&$()})}function $(){const m=document.createElement("input");m.setAttribute("type","file"),m.setAttribute("accept",".lvd"),m.addEventListener("change",function(w){const R=w.target.files[0],ne=new FileReader;ne.readAsArrayBuffer(R),ne.onload=function(){const M=ne.result;kt.loadAsync(M).then(function(k){k.file("data.csv").async("base64").then(function(F){Shiny.setInputValue("dataUpload-fileInput",{content:F});const P=setInterval(()=>{t.dataAvail&&(clearInterval(P),k.file("model.lvm").async("text").then(function(oe){g(oe)}))},100)})})}}),m.click()}function v(){const m=Y(K);q(),m.nodes().forEach(P=>{P.data("width",P.width()),P.data("height",P.height())});let w=m.json().elements;w.nodes.forEach(P=>{P.classes=P.classes.split(" ").filter(oe=>oe!==Be).join(" ")});const R=JSON.stringify(w),ne=JSON.stringify(l),M=JSON.stringify(l),k=JSON.stringify(s);return JSON.stringify({model:R,modelOpt:ne,gridViewOpt:M,fitCache:k})}function S(){const m=v();let w=new Blob([m],{type:"application/json;charset=utf-8"});at.saveAs(w,"model_"+Nt()+".lvm")}Shiny.addCustomMessageHandler("dataForDownload",function(m){(async()=>{const w=v(),R=new kt;R.file("model.lvm",w),R.file("data.csv",m);const ne=await R.generateAsync({type:"blob"}),M=new File([ne],"model_"+Nt()+".lvd",{type:"application/zip"});at.saveAs(M)})()});function p(){const m=Y(K);z(j,t.dataAvail=!1,t),z(j,t.columnNames=null,t),z(j,t.loadedFileName=null,t),z(j,t.ids=null,t),z(ft,i=null,i),m.nodes().unlink(),Shiny.setInputValue("dataUpload-deleteData",Math.random())}function E(){const m=Y(K);f(m.png({bg:"white"}),"png")}function N(){const m=Y(K);f(m.jpg(),"jpg")}function h(){return Y(K).svg({scale:1,full:!0})}function y(){const m=h(),w=new Blob([m],{type:"image/svg+xml;charset=utf-8"});f(w,"svg")}async function W(){const m=h(),R=new DOMParser().parseFromString(m,"image/svg+xml").documentElement;R.style.position="absolute",R.style.left="-9999px",document.body.appendChild(R);const ne=R.getBoundingClientRect();document.body.removeChild(R);const M=ne.width,k=ne.height,F=new Cn({orientation:M>k?"landscape":"portrait",unit:"pt",format:[M,k]});await En(R,F,{width:M,height:k}),F.save("model.pdf")}let H;return n.$$set=m=>{"full"in m&&o(0,u=m.full)},n.$$.update=()=>{if(n.$$.dirty&5){let m=[{name:"New Model",action:d},{name:"Load Model",action:b},{name:"Load Data",action:$i},{name:"Load Model and Data",action:_},{name:"Download Model",action:S,disable:t.modelEmpty},{name:"Remove Data",action:p,disable:!t.dataAvail},{name:"Download Model and Data",disable:t.modelEmpty||!t.dataAvail,action:vi,divider:!0},{name:"Export Diagram to PNG",disable:t.modelEmpty,action:E},{name:"Export Diagram to JPG",disable:t.modelEmpty,action:N},{name:"Export Diagram to SVG",disable:t.modelEmpty,action:y},{name:"Export Diagram to PDF",disable:t.modelEmpty,action:W}];u?o(1,H=m):o(1,H=m.filter(w=>["Download Model","Load Model"].includes(w.name)||m.indexOf(w)>=m.length-4))}},[u,H,t]}class fn extends Z{constructor(e){super(),J(this,e,yi,_i,X,{full:0})}}function wi(n){let e;return{c(){e=V("span"),C(e,"class","glyphicon glyphicon-ok check-mark invisible"),C(e,"aria-hidden","true")},m(o,t){A(o,e,t)},d(o){o&&O(e)}}}function ki(n){let e;return{c(){e=V("span"),C(e,"class","glyphicon glyphicon-ok check-mark"),C(e,"aria-hidden","true")},m(o,t){A(o,e,t)},d(o){o&&O(e)}}}function Ci(n){let e,o,t,i,s,l,r,u,d;function a(c,b){return c[0]?ki:wi}let f=a(n),g=f(n);return{c(){e=V("li"),o=V("label"),t=V("input"),i=T(),g.c(),s=T(),l=be(n[1]),C(t,"type","checkbox"),C(t,"class","check-box svelte-17cge7g"),t.disabled=n[2],C(o,"class",r=Pe(n[2]?"disabled-label":"")+" svelte-17cge7g"),C(e,"class","svelte-17cge7g")},m(c,b){A(c,e,b),x(e,o),x(o,t),t.checked=n[0],x(o,i),g.m(o,null),x(o,s),x(o,l),u||(d=ie(t,"change",n[3]),u=!0)},p(c,[b]){b&4&&(t.disabled=c[2]),b&1&&(t.checked=c[0]),f!==(f=a(c))&&(g.d(1),g=f(c),g&&(g.c(),g.m(o,s))),b&2&&Ve(l,c[1]),b&4&&r!==(r=Pe(c[2]?"disabled-label":"")+" svelte-17cge7g")&&C(o,"class",r)},i:se,o:se,d(c){c&&O(e),g.d(),u=!1,d()}}}function Ei(n,e,o){let{name:t}=e,{checked:i}=e,{disable:s=!1}=e;function l(){i=this.checked,o(0,i)}return n.$$set=r=>{"name"in r&&o(1,t=r.name),"checked"in r&&o(0,i=r.checked),"disable"in r&&o(2,s=r.disable)},[i,t,s,l]}class Ee extends Z{constructor(e){super(),J(this,e,Ei,Ci,X,{name:1,checked:0,disable:2})}}function Si(n){let e;return{c(){e=V("span"),C(e,"class","glyphicon glyphicon-ok check-mark invisible"),C(e,"aria-hidden","true")},m(o,t){A(o,e,t)},d(o){o&&O(e)}}}function Li(n){let e;return{c(){e=V("span"),C(e,"class","glyphicon glyphicon-ok check-mark"),C(e,"aria-hidden","true")},m(o,t){A(o,e,t)},d(o){o&&O(e)}}}function Mi(n){let e,o,t,i=!1,s,l,r,u,d,a,f,g;function c($,v){return $[0]===$[2]?Li:Si}let b=c(n),_=b(n);return a=vn(n[5][0]),{c(){e=V("div"),o=V("label"),t=V("input"),s=T(),_.c(),l=T(),r=be(n[1]),C(t,"type","radio"),C(t,"name","meanStruc"),t.__value=n[2],t.value=t.__value,t.disabled=n[3],C(t,"class","svelte-lbhkwe"),C(o,"class",u=Pe(n[3]?"text-muted":"")+" svelte-lbhkwe"),C(e,"class",d=Pe(n[3]?"radio disabled":"radio")+" svelte-lbhkwe"),a.p(t)},m($,v){A($,e,v),x(e,o),x(o,t),t.checked=t.__value===n[0],x(o,s),_.m(o,null),x(o,l),x(o,r),f||(g=ie(t,"change",n[4]),f=!0)},p($,[v]){v&4&&(t.__value=$[2],t.value=t.__value,i=!0),v&8&&(t.disabled=$[3]),(i||v&1)&&(t.checked=t.__value===$[0]),b!==(b=c($))&&(_.d(1),_=b($),_&&(_.c(),_.m(o,l))),v&2&&Ve(r,$[1]),v&8&&u!==(u=Pe($[3]?"text-muted":"")+" svelte-lbhkwe")&&C(o,"class",u),v&8&&d!==(d=Pe($[3]?"radio disabled":"radio")+" svelte-lbhkwe")&&C(e,"class",d)},i:se,o:se,d($){$&&O(e),_.d(),a.r(),f=!1,g()}}}function Di(n,e,o){let{name:t}=e,{value:i}=e,{group:s}=e,{isDisabled:l=!1}=e;const r=[[]];function u(){s=this.__value,o(0,s)}return n.$$set=d=>{"name"in d&&o(1,t=d.name),"value"in d&&o(2,i=d.value),"group"in d&&o(0,s=d.group),"isDisabled"in d&&o(3,l=d.isDisabled)},[s,t,i,l,u,r]}class nt extends Z{constructor(e){super(),J(this,e,Di,Mi,X,{name:1,value:2,group:0,isDisabled:3})}}const It=[{name:"Arrows Created by Lavaan",modelSlot:"showLav"},{name:"Variance Arrows",modelSlot:"showVar"},{name:"Mean Arrows",modelSlot:"showMean"}];let xt=[{name:"Estimate",value:"est"},{name:"Confidence Interval",value:"ci"},{name:"Estimate + p-value (stars)",value:"estPVal"},{name:"Estimate + Standard Error",value:"estSE"}];function Ai(n,e,o){const t=Y(K),i=e?"_std":"",s=mn(n,i,o);t.style().selector("edge.hasEst").style({label:s}).update();const l=Ni(n,i,o);t.style().selector("edge.hasEst.label").style({label:l}).update();const r=Ii(n,i,o);t.style().selector("edge.hasEstFixed").style({label:r}).update()}function Oi(n,e,o,t){function i(a){return a.reduce((f,g,c)=>(g&&f.push(c),f),[])}const s=Y(K),l=[e,n,o],r=i(l),u=i(l.map(a=>!a));function d(a,f){return[c=>c.isLavaanAdded(),c=>c.isLoop(),c=>c.isMean()][a](f)}for(let a of r)s.elements(function(f){return d(a,f)}).show();for(let a of u)s.elements(function(f){return d(a,f)}).hide()}function Fi(n){return n===null?"NA":n<.001?"***":n<.01?"**":n<.05?"*":""}function mn(n,e,o){const t=i=>i===null?"NA":i.toFixed(o);switch(n){case"est":return i=>t(i.data("estimates")["est"+e]);case"ci":return i=>`[${t(i.data("estimates")["ciLow"+e])}, ${t(i.data("estimates")["ciHigh"+e])}]`;case"estPVal":return i=>`${t(i.data("estimates")["est"+e])}${Fi(i.data("estimates").p_value)}`;case"estSE":return i=>`${t(i.data("estimates")["est"+e])} (${t(i.data("estimates")["se"+e])})`;default:return()=>"NA"}}function Ni(n,e,o){const t=mn(n,e,o);return i=>`${i.data("label")} = ${t(i)}`}function Ii(n,e,o){const t=i=>i===null?"NA":i.toFixed(o);return i=>"@"+t(i.data("estimates")["estFixed"+e])}function xi(n){let e,o,t,i,s,l;return{c(){e=V("li"),o=be(n[1]),t=T(),i=V("input"),_e(i,"width","4em"),C(i,"type","number"),C(i,"min",n[2]),_e(e,"padding-left","28px")},m(r,u){A(r,e,u),x(e,o),x(e,t),x(e,i),ot(i,n[0]),s||(l=ie(i,"input",n[3]),s=!0)},p(r,[u]){u&2&&Ve(o,r[1]),u&4&&C(i,"min",r[2]),u&1&&rt(i.value)!==r[0]&&ot(i,r[0])},i:se,o:se,d(r){r&&O(e),s=!1,l()}}}function Ti(n,e,o){let{name:t}=e,{value:i}=e,{min:s}=e;function l(){i=rt(this.value),o(0,i)}return n.$$set=r=>{"name"in r&&o(1,t=r.name),"value"in r&&o(0,i=r.value),"min"in r&&o(2,s=r.min)},[i,t,s,l]}class lt extends Z{constructor(e){super(),J(this,e,Ti,xi,X,{name:1,value:0,min:2})}}function Tt(n,e,o){const t=n.slice();return t[9]=e[o],t}function Pt(n,e,o){const t=n.slice();return t[9]=e[o],t[12]=e,t[13]=o,t}function Vt(n){let e,o,t,i;function s(u){n[3](u,n[9])}function l(u){n[4](u,n[9])}let r={disable:!1};return n[9].name!==void 0&&(r.name=n[9].name),n[1][n[9].modelSlot]!==void 0&&(r.checked=n[1][n[9].modelSlot]),e=new Ee({props:r}),re.push(()=>ce(e,"name",s)),re.push(()=>ce(e,"checked",l)),{c(){B(e.$$.fragment)},m(u,d){G(e,u,d),i=!0},p(u,d){n=u;const a={};!o&&d&4&&(o=!0,a.name=n[9].name,fe(()=>o=!1)),!t&&d&6&&(t=!0,a.checked=n[1][n[9].modelSlot],fe(()=>t=!1)),e.$set(a)},i(u){i||(L(e.$$.fragment,u),i=!0)},o(u){D(e.$$.fragment,u),i=!1},d(u){U(e,u)}}}function zt(n){let e,o,t;function i(l){n[6](l)}let s={name:n[9].name,value:n[9].value};return n[1].view!==void 0&&(s.group=n[1].view),e=new nt({props:s}),re.push(()=>ce(e,"group",i)),{c(){B(e.$$.fragment)},m(l,r){G(e,l,r),t=!0},p(l,r){const u={};!o&&r&2&&(o=!0,u.group=l[1].view,fe(()=>o=!1)),e.$set(u)},i(l){t||(L(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){U(e,l)}}}function Pi(n){let e,o,t,i,s,l,r,u,d,a,f,g,c,b,_,$,v,S,p,E,N=n[2],h=[];for(let k=0;k<N.length;k+=1)h[k]=Vt(Pt(n,N,k));const y=k=>D(h[k],1,1,()=>{h[k]=null});function W(k){n[5](k)}let H={name:"Standardized Estimates",disable:!1};n[1].std!==void 0&&(H.checked=n[1].std),i=new Ee({props:H}),re.push(()=>ce(i,"checked",W));let m=xt,w=[];for(let k=0;k<m.length;k+=1)w[k]=zt(Tt(n,m,k));const R=k=>D(w[k],1,1,()=>{w[k]=null});function ne(k){n[8](k)}let M={name:"Number Digits",min:0};return n[1].number_digits!==void 0&&(M.value=n[1].number_digits),$=new lt({props:M}),re.push(()=>ce($,"value",ne)),{c(){for(let k=0;k<h.length;k+=1)h[k].c();e=T(),o=V("li"),t=T(),B(i.$$.fragment),l=T(),r=V("li"),u=T();for(let k=0;k<w.length;k+=1)w[k].c();d=T(),a=V("li"),f=T(),g=V("li"),c=be(`Confidence Level
    `),b=V("input"),_=T(),B($.$$.fragment),C(o,"class","divider"),C(r,"class","divider"),C(a,"class","divider"),C(b,"type","number"),C(b,"min","0"),C(b,"max","0.999999"),C(b,"step","0.01"),_e(b,"width","4em"),_e(g,"padding-left","28px")},m(k,F){for(let P=0;P<h.length;P+=1)h[P]&&h[P].m(k,F);A(k,e,F),A(k,o,F),A(k,t,F),G(i,k,F),A(k,l,F),A(k,r,F),A(k,u,F);for(let P=0;P<w.length;P+=1)w[P]&&w[P].m(k,F);A(k,d,F),A(k,a,F),A(k,f,F),A(k,g,F),x(g,c),x(g,b),ot(b,n[1].ci),A(k,_,F),G($,k,F),S=!0,p||(E=ie(b,"input",n[7]),p=!0)},p(k,F){if(F&6){N=k[2];let Q;for(Q=0;Q<N.length;Q+=1){const I=Pt(k,N,Q);h[Q]?(h[Q].p(I,F),L(h[Q],1)):(h[Q]=Vt(I),h[Q].c(),L(h[Q],1),h[Q].m(e.parentNode,e))}for(ve(),Q=N.length;Q<h.length;Q+=1)y(Q);ye()}const P={};if(!s&&F&2&&(s=!0,P.checked=k[1].std,fe(()=>s=!1)),i.$set(P),F&2){m=xt;let Q;for(Q=0;Q<m.length;Q+=1){const I=Tt(k,m,Q);w[Q]?(w[Q].p(I,F),L(w[Q],1)):(w[Q]=zt(I),w[Q].c(),L(w[Q],1),w[Q].m(d.parentNode,d))}for(ve(),Q=m.length;Q<w.length;Q+=1)R(Q);ye()}F&2&&rt(b.value)!==k[1].ci&&ot(b,k[1].ci);const oe={};!v&&F&2&&(v=!0,oe.value=k[1].number_digits,fe(()=>v=!1)),$.$set(oe)},i(k){if(!S){for(let F=0;F<N.length;F+=1)L(h[F]);L(i.$$.fragment,k);for(let F=0;F<m.length;F+=1)L(w[F]);L($.$$.fragment,k),S=!0}},o(k){h=h.filter(Boolean);for(let F=0;F<h.length;F+=1)D(h[F]);D(i.$$.fragment,k),w=w.filter(Boolean);for(let F=0;F<w.length;F+=1)D(w[F]);D($.$$.fragment,k),S=!1},d(k){Oe(h,k),k&&O(e),k&&O(o),k&&O(t),U(i,k),k&&O(l),k&&O(r),k&&O(u),Oe(w,k),k&&O(d),k&&O(a),k&&O(f),k&&O(g),k&&O(_),U($,k),p=!1,E()}}}function Vi(n){let e,o;return e=new Ue({props:{name:"View",minimal:n[0],$$slots:{default:[Pi]},$$scope:{ctx:n}}}),{c(){B(e.$$.fragment)},m(t,i){G(e,t,i),o=!0},p(t,[i]){const s={};i&1&&(s.minimal=t[0]),i&16390&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(L(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){U(e,t)}}}function zi(n,e,o){let t;ee(n,ue,f=>o(1,t=f));let{minimal:i=!1}=e;function s(f,g){n.$$.not_equal(g.name,f)&&(g.name=f,o(2,It))}function l(f,g){n.$$.not_equal(t[g.modelSlot],f)&&(t[g.modelSlot]=f,ue.set(t))}function r(f){n.$$.not_equal(t.std,f)&&(t.std=f,ue.set(t))}function u(f){n.$$.not_equal(t.view,f)&&(t.view=f,ue.set(t))}function d(){t.ci=rt(this.value),ue.set(t)}function a(f){n.$$.not_equal(t.number_digits,f)&&(t.number_digits=f,ue.set(t))}return n.$$set=f=>{"minimal"in f&&o(0,i=f.minimal)},n.$$.update=()=>{n.$$.dirty&2&&Shiny.setInputValue("ests-confindence_level",t.ci)},[i,t,It,s,l,r,u,d,a]}class gn extends Z{constructor(e){super(),J(this,e,zi,Vi,X,{minimal:0})}}function Rt(n,e,o){const t=n.slice();return t[8]=e[o],t}function Bt(n){let e,o,t;function i(l){n[3](l)}let s={name:n[8].name,value:n[8].value};return n[0].meanStruc!==void 0&&(s.group=n[0].meanStruc),e=new nt({props:s}),re.push(()=>ce(e,"group",i)),{c(){B(e.$$.fragment)},m(l,r){G(e,l,r),t=!0},p(l,r){const u={};!o&&r&1&&(o=!0,u.group=l[0].meanStruc,fe(()=>o=!1)),e.$set(u)},i(l){t||(L(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){U(e,l)}}}function Ri(n){let e,o,t,i,s,l,r,u,d,a,f,g,c,b=n[2],_=[];for(let y=0;y<b.length;y+=1)_[y]=Bt(Rt(n,b,y));const $=y=>D(_[y],1,1,()=>{_[y]=null});function v(y){n[4](y)}function S(y){n[5](y)}let p={name:"Add Intercepts for all Observed Variables"};n[0].intOvFree!==void 0&&(p.checked=n[0].intOvFree),n[1]!==void 0&&(p.disable=n[1]),l=new Ee({props:p}),re.push(()=>ce(l,"checked",v)),re.push(()=>ce(l,"disable",S));function E(y){n[6](y)}function N(y){n[7](y)}let h={name:"Add Intercepts for all Latent Variables"};return n[0].intLvFree!==void 0&&(h.checked=n[0].intLvFree),n[1]!==void 0&&(h.disable=n[1]),a=new Ee({props:h}),re.push(()=>ce(a,"checked",E)),re.push(()=>ce(a,"disable",N)),{c(){e=V("li"),o=V("a"),o.textContent="Model Means?",t=T(),i=V("ul");for(let y=0;y<_.length;y+=1)_[y].c();s=T(),B(l.$$.fragment),d=T(),B(a.$$.fragment),C(o,"tabindex","-1"),C(o,"href","#"),C(o,"class","svelte-143y7r6"),C(i,"class","dropdown-menu svelte-143y7r6"),C(e,"class","dropdown-submenu svelte-143y7r6")},m(y,W){A(y,e,W),x(e,o),x(e,t),x(e,i);for(let H=0;H<_.length;H+=1)_[H]&&_[H].m(i,null);A(y,s,W),G(l,y,W),A(y,d,W),G(a,y,W),c=!0},p(y,W){if(W&5){b=y[2];let w;for(w=0;w<b.length;w+=1){const R=Rt(y,b,w);_[w]?(_[w].p(R,W),L(_[w],1)):(_[w]=Bt(R),_[w].c(),L(_[w],1),_[w].m(i,null))}for(ve(),w=b.length;w<_.length;w+=1)$(w);ye()}const H={};!r&&W&1&&(r=!0,H.checked=y[0].intOvFree,fe(()=>r=!1)),!u&&W&2&&(u=!0,H.disable=y[1],fe(()=>u=!1)),l.$set(H);const m={};!f&&W&1&&(f=!0,m.checked=y[0].intLvFree,fe(()=>f=!1)),!g&&W&2&&(g=!0,m.disable=y[1],fe(()=>g=!1)),a.$set(m)},i(y){if(!c){for(let W=0;W<b.length;W+=1)L(_[W]);L(l.$$.fragment,y),L(a.$$.fragment,y),c=!0}},o(y){_=_.filter(Boolean);for(let W=0;W<_.length;W+=1)D(_[W]);D(l.$$.fragment,y),D(a.$$.fragment,y),c=!1},d(y){y&&O(e),Oe(_,y),y&&O(s),U(l,y),y&&O(d),U(a,y)}}}function Bi(n){let e,o;return e=new Ue({props:{name:Gi,$$slots:{default:[Ri]},$$scope:{ctx:n}}}),{c(){B(e.$$.fragment)},m(t,i){G(e,t,i),o=!0},p(t,[i]){const s={};i&2051&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(L(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){U(e,t)}}}let Gi="Mean Options";function Ui(n,e,o){let t,i;ee(n,te,f=>o(0,i=f));let s=[{name:"Automatic",value:"default"},{name:"Yes",value:"true"},{name:"No",value:"false"}];function l(f){n.$$.not_equal(i.meanStruc,f)&&(i.meanStruc=f,te.set(i))}function r(f){n.$$.not_equal(i.intOvFree,f)&&(i.intOvFree=f,te.set(i))}function u(f){t=f,o(1,t),o(0,i)}function d(f){n.$$.not_equal(i.intLvFree,f)&&(i.intLvFree=f,te.set(i))}function a(f){t=f,o(1,t),o(0,i)}return n.$$.update=()=>{n.$$.dirty&1&&o(1,t=i.meanStruc==="false")},[i,t,s,l,r,u,d,a]}class qi extends Z{constructor(e){super(),J(this,e,Ui,Bi,X,{})}}function Gt(n,e,o){const t=n.slice();return t[9]=e[o],t}function Ut(n,e,o){const t=n.slice();return t[9]=e[o],t}function qt(n,e,o){const t=n.slice();return t[9]=e[o],t}function jt(n){let e,o,t;function i(l){n[4](l)}let s={name:n[9].name,value:n[9].value};return n[0].estimator!==void 0&&(s.group=n[0].estimator),e=new nt({props:s}),re.push(()=>ce(e,"group",i)),{c(){B(e.$$.fragment)},m(l,r){G(e,l,r),t=!0},p(l,r){const u={};!o&&r&1&&(o=!0,u.group=l[0].estimator,fe(()=>o=!1)),e.$set(u)},i(l){t||(L(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){U(e,l)}}}function Ht(n){let e,o,t;function i(l){n[5](l)}let s={name:n[9].name,value:n[9].value};return n[0].se!==void 0&&(s.group=n[0].se),e=new nt({props:s}),re.push(()=>ce(e,"group",i)),{c(){B(e.$$.fragment)},m(l,r){G(e,l,r),t=!0},p(l,r){const u={};!o&&r&1&&(o=!0,u.group=l[0].se,fe(()=>o=!1)),e.$set(u)},i(l){t||(L(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){U(e,l)}}}function Wt(n){let e,o,t;function i(l){n[7](l)}let s={name:n[9].name,value:n[9].value};return n[0].missing!==void 0&&(s.group=n[0].missing),e=new nt({props:s}),re.push(()=>ce(e,"group",i)),{c(){B(e.$$.fragment)},m(l,r){G(e,l,r),t=!0},p(l,r){const u={};!o&&r&1&&(o=!0,u.group=l[0].missing,fe(()=>o=!1)),e.$set(u)},i(l){t||(L(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){U(e,l)}}}function ji(n){let e,o,t,i,s,l,r,u,d,a,f,g,c,b,_,$,v,S,p=n[1],E=[];for(let M=0;M<p.length;M+=1)E[M]=jt(qt(n,p,M));const N=M=>D(E[M],1,1,()=>{E[M]=null});let h=n[2],y=[];for(let M=0;M<h.length;M+=1)y[M]=Ht(Ut(n,h,M));const W=M=>D(y[M],1,1,()=>{y[M]=null});function H(M){n[6](M)}let m={name:"Number of Bootstrap Samples:",min:5};n[0].n_boot!==void 0&&(m.value=n[0].n_boot),f=new lt({props:m}),re.push(()=>ce(f,"value",H));let w=n[3],R=[];for(let M=0;M<w.length;M+=1)R[M]=Wt(Gt(n,w,M));const ne=M=>D(R[M],1,1,()=>{R[M]=null});return{c(){e=V("li"),o=V("a"),o.textContent="Estimator",t=T(),i=V("ul");for(let M=0;M<E.length;M+=1)E[M].c();s=T(),l=V("li"),r=V("a"),r.textContent="Standard Error",u=T(),d=V("ul");for(let M=0;M<y.length;M+=1)y[M].c();a=T(),B(f.$$.fragment),c=T(),b=V("li"),_=V("a"),_.textContent="Missing Values",$=T(),v=V("ul");for(let M=0;M<R.length;M+=1)R[M].c();C(o,"tabindex","-1"),C(o,"href","#"),C(o,"class","svelte-143y7r6"),C(i,"class","dropdown-menu svelte-143y7r6"),C(e,"class","dropdown-submenu svelte-143y7r6"),C(r,"tabindex","-1"),C(r,"href","#"),C(r,"class","svelte-143y7r6"),C(d,"class","dropdown-menu svelte-143y7r6"),C(l,"class","dropdown-submenu svelte-143y7r6"),C(_,"tabindex","-1"),C(_,"href","#"),C(_,"class","svelte-143y7r6"),C(v,"class","dropdown-menu svelte-143y7r6"),C(b,"class","dropdown-submenu svelte-143y7r6")},m(M,k){A(M,e,k),x(e,o),x(e,t),x(e,i);for(let F=0;F<E.length;F+=1)E[F]&&E[F].m(i,null);A(M,s,k),A(M,l,k),x(l,r),x(l,u),x(l,d);for(let F=0;F<y.length;F+=1)y[F]&&y[F].m(d,null);x(d,a),G(f,d,null),A(M,c,k),A(M,b,k),x(b,_),x(b,$),x(b,v);for(let F=0;F<R.length;F+=1)R[F]&&R[F].m(v,null);S=!0},p(M,k){if(k&3){p=M[1];let P;for(P=0;P<p.length;P+=1){const oe=qt(M,p,P);E[P]?(E[P].p(oe,k),L(E[P],1)):(E[P]=jt(oe),E[P].c(),L(E[P],1),E[P].m(i,null))}for(ve(),P=p.length;P<E.length;P+=1)N(P);ye()}if(k&5){h=M[2];let P;for(P=0;P<h.length;P+=1){const oe=Ut(M,h,P);y[P]?(y[P].p(oe,k),L(y[P],1)):(y[P]=Ht(oe),y[P].c(),L(y[P],1),y[P].m(d,a))}for(ve(),P=h.length;P<y.length;P+=1)W(P);ye()}const F={};if(!g&&k&1&&(g=!0,F.value=M[0].n_boot,fe(()=>g=!1)),f.$set(F),k&9){w=M[3];let P;for(P=0;P<w.length;P+=1){const oe=Gt(M,w,P);R[P]?(R[P].p(oe,k),L(R[P],1)):(R[P]=Wt(oe),R[P].c(),L(R[P],1),R[P].m(v,null))}for(ve(),P=w.length;P<R.length;P+=1)ne(P);ye()}},i(M){if(!S){for(let k=0;k<p.length;k+=1)L(E[k]);for(let k=0;k<h.length;k+=1)L(y[k]);L(f.$$.fragment,M);for(let k=0;k<w.length;k+=1)L(R[k]);S=!0}},o(M){E=E.filter(Boolean);for(let k=0;k<E.length;k+=1)D(E[k]);y=y.filter(Boolean);for(let k=0;k<y.length;k+=1)D(y[k]);D(f.$$.fragment,M),R=R.filter(Boolean);for(let k=0;k<R.length;k+=1)D(R[k]);S=!1},d(M){M&&O(e),Oe(E,M),M&&O(s),M&&O(l),Oe(y,M),U(f),M&&O(c),M&&O(b),Oe(R,M)}}}function Hi(n){let e,o;return e=new Ue({props:{name:Wi,$$slots:{default:[ji]},$$scope:{ctx:n}}}),{c(){B(e.$$.fragment)},m(t,i){G(e,t,i),o=!0},p(t,[i]){const s={};i&65537&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(L(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){U(e,t)}}}const Wi="Estimation";function Yi(n,e,o){let t;ee(n,te,f=>o(0,t=f));const i=[{value:"default",name:"Default"},{value:"ML",name:"Maximum Likelihood (ML)"},{value:"GLS",name:"Generalized Least Squares (GLS)"},{value:"WLS",name:"Weighted Least Squares (WLS)"},{value:"ULS",name:"Unweighted Least Squares (ULS)"},{value:"DLS",name:"Distributionally-weighted Least Squares (DLW)"}],s=[{value:"default",name:"Default"},{value:"robust",name:"Robust"},{value:"boot",name:"Bootstrap"}],l=[{value:"listwise",name:"Listwise"},{value:"ml",name:"Full Information Maximum Likelihood (FIML)"}];function r(f){n.$$.not_equal(t.estimator,f)&&(t.estimator=f,te.set(t))}function u(f){n.$$.not_equal(t.se,f)&&(t.se=f,te.set(t))}function d(f){n.$$.not_equal(t.n_boot,f)&&(t.n_boot=f,te.set(t))}function a(f){n.$$.not_equal(t.missing,f)&&(t.missing=f,te.set(t))}return[t,i,s,l,r,u,d,a]}class Zi extends Z{constructor(e){super(),J(this,e,Yi,Hi,X,{})}}let ct=0,pn=!1;function hn(){return typeof Shiny=="object"&&Shiny!==null}function Ji(n){const e=Object.keys(n),o=n[e[0]].length,t=[];for(let i=0;i<o;i++){const s={};for(const l of e)s[l]=n[l][i];t.push(s)}return t}function gt(n,e=!0){pn=e,ct=ct+1;let o=an(!0);o.name=n,o.counter=ct,hn()&&Shiny.setInputValue("layout-layout",JSON.stringify(o))}hn()&&Shiny.addCustomMessageHandler("semPlotLayout",function(n){n=Ji(n);const e=125,o=200;let t=1/0,i=1/0;for(let d=0;d<n.length;d++)for(let a=d+1;a<n.length;a++){const f=Math.abs(n[d].x-n[a].x),g=Math.abs(n[d].y-n[a].y);f<t&&n[d].y===n[a].y&&(t=f),g<i&&g!==0&&(i=g)}const s=e/t,l=o/i;let r={};n.forEach(d=>{const a=d.x*s+400,f=d.y*-1*l+400;r[d.name]={x:a,y:f}});let u={name:"preset",positions:function(d){const a=d.data("label");return r[a]},fit:!0,padding:60,animate:!0};pn?Y(Re).do("layout",{options:u}):Y(K).layout(u).run()});function Xi(n){let e,o;return e=new ht({props:{name:"Apply Layout",menuItems:n[1],minimal:n[0]}}),{c(){B(e.$$.fragment)},m(t,i){G(e,t,i),o=!0},p(t,[i]){const s={};i&2&&(s.menuItems=t[1]),i&1&&(s.minimal=t[0]),e.$set(s)},i(t){o||(L(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){U(e,t)}}}function Ki(n,e,o){let t,i,s;ee(n,j,g=>o(2,i=g)),ee(n,Re,g=>o(3,s=g));let{minimal:l=!1}=e;Y(K),we(()=>{q.use(Sn),q.use(Ln),q.use(Mn)});function r(){const g={name:"dagre",rankSep:150,animate:!0};s.do("layout",{options:g})}function u(){const g={name:"breadthfirst",animate:!0,spacingFactor:1};s.do("layout",{options:g})}function d(){const g={name:"circle",animate:!0};s.do("layout",{options:g})}function a(){const g={name:"fcose",animate:!0,idealEdgeLength:c=>150,quality:"proof",randomize:!1,nodeSeparation:200};s.do("layout",{options:g})}function f(){const g={name:"cola",animate:!0,nodeSpacing(c){return 50}};s.do("layout",{options:g})}return n.$$set=g=>{"minimal"in g&&o(0,l=g.minimal)},n.$$.update=()=>{n.$$.dirty&4&&o(1,t=[{name:"Recommended: Tree",action:()=>gt("tree"),disable:i.modelEmpty},{name:"Recommended: Tree2",action:()=>gt("tree2"),disable:i.modelEmpty},{name:"Experimental: Tree",action:r,disable:i.modelEmpty},{name:"Experimental: Tree2",action:u,disable:i.modelEmpty},{name:"Experimental: Circle",action:d,disable:i.modelEmpty},{name:"Experimental: Force-directed",action:a,disable:i.modelEmpty},{name:"Experimental: Cola",action:f,disable:i.modelEmpty}])},[l,t,i]}class bn extends Z{constructor(e){super(),J(this,e,Ki,Xi,X,{minimal:0})}}function Yt(n,e,o){const t=n.slice();return t[4]=e[o],t[5]=e,t[6]=o,t}function Zt(n){let e,o,t,i;function s(u){n[2](u,n[4])}function l(u){n[3](u,n[4])}let r={};return n[4].name!==void 0&&(r.name=n[4].name),n[1][n[4].modelProperty]!==void 0&&(r.checked=n[1][n[4].modelProperty]),e=new Ee({props:r}),re.push(()=>ce(e,"name",s)),re.push(()=>ce(e,"checked",l)),{c(){B(e.$$.fragment)},m(u,d){G(e,u,d),i=!0},p(u,d){n=u;const a={};!o&&d&1&&(o=!0,a.name=n[4].name,fe(()=>o=!1)),!t&&d&3&&(t=!0,a.checked=n[1][n[4].modelProperty],fe(()=>t=!1)),e.$set(a)},i(u){i||(L(e.$$.fragment,u),i=!0)},o(u){D(e.$$.fragment,u),i=!1},d(u){U(e,u)}}}function Qi(n){let e,o,t=n[0],i=[];for(let l=0;l<t.length;l+=1)i[l]=Zt(Yt(n,t,l));const s=l=>D(i[l],1,1,()=>{i[l]=null});return{c(){for(let l=0;l<i.length;l+=1)i[l].c();e=Ge()},m(l,r){for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(l,r);A(l,e,r),o=!0},p(l,r){if(r&3){t=l[0];let u;for(u=0;u<t.length;u+=1){const d=Yt(l,t,u);i[u]?(i[u].p(d,r),L(i[u],1)):(i[u]=Zt(d),i[u].c(),L(i[u],1),i[u].m(e.parentNode,e))}for(ve(),u=t.length;u<i.length;u+=1)s(u);ye()}},i(l){if(!o){for(let r=0;r<t.length;r+=1)L(i[r]);o=!0}},o(l){i=i.filter(Boolean);for(let r=0;r<i.length;r+=1)D(i[r]);o=!1},d(l){Oe(i,l),l&&O(e)}}}function eo(n){let e,o;return e=new Ue({props:{name:to,$$slots:{default:[Qi]},$$scope:{ctx:n}}}),{c(){B(e.$$.fragment)},m(t,i){G(e,t,i),o=!0},p(t,[i]){const s={};i&131&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(L(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){U(e,t)}}}const to="Automatically..";function no(n,e,o){let t;ee(n,te,r=>o(1,t=r));const i=[{name:"Fix Factor Loading of First Indicator at 1",modelProperty:"fix_first"},{name:"Include Variances",modelProperty:"auto_var"},{name:"Include Covariances of Exogenous Latent Variables",modelProperty:"auto_cov_lv_x"},{name:"Include Covariances of Dependent Variables",modelProperty:"auto_cov_y"},{name:"Fix Variance of Only Indicator to 0",modelProperty:"fix_single"},{name:"Treat Exogenous Observed Variables as Fixed Variables",modelProperty:"fixed_x"}];function s(r,u){n.$$.not_equal(u.name,r)&&(u.name=r,o(0,i))}function l(r,u){n.$$.not_equal(t[u.modelProperty],r)&&(t[u.modelProperty]=r,te.set(t))}return[i,t,s,l]}class io extends Z{constructor(e){super(),J(this,e,no,eo,X,{})}}function oo(n){let e,o;return e=new ht({props:{name:"Help",menuItems:n[0]}}),{c(){B(e.$$.fragment)},m(t,i){G(e,t,i),o=!0},p:se,i(t){o||(L(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){U(e,t)}}}function so(){Shiny.setInputValue("show_help",Math.random())}function lo(){window.open("https://karchjd.github.io/docs.lavaangui/","_blank")}function ro(n){let e;const o=[{name:"Show Commands",action:so},{name:"Open Manual",action:lo},{name:"About",action:t}];function t(){bootbox.alert({title:"About Lavaangui",message:`Version: ${e}<br> Autor: Julian D. Karch<br> Email: j.d.karch@fsw.leidenuniv.nl`})}return Shiny.addCustomMessageHandler("version",function(i){e=i[0].join(".")}),[o]}class ao extends Z{constructor(e){super(),J(this,e,ro,oo,X,{})}}function uo(n){let e,o,t,i,s,l,r,u,d,a,f,g,c,b,_,$,v,S,p,E,N;function h(I){n[2](I)}let y={name:"Show Grid"};n[1].gridShow!==void 0&&(y.checked=n[1].gridShow),e=new Ee({props:y}),re.push(()=>ce(e,"checked",h));function W(I){n[3](I)}let H={name:"Snap to Grid"};n[1].gridSnap!==void 0&&(H.checked=n[1].gridSnap),i=new Ee({props:H}),re.push(()=>ce(i,"checked",W));function m(I){n[4](I)}let w={name:"Resize to Grid"};n[1].gridResize!==void 0&&(w.checked=n[1].gridResize),r=new Ee({props:w}),re.push(()=>ce(r,"checked",m));function R(I){n[5](I)}let ne={name:"Snap to Alignment on Release"};n[1].gridAlign!==void 0&&(ne.checked=n[1].gridAlign),a=new Ee({props:ne}),re.push(()=>ce(a,"checked",R));function M(I){n[6](I)}let k={name:"Move Grid on Pan"};n[1].gridMovePan!==void 0&&(k.checked=n[1].gridMovePan),c=new Ee({props:k}),re.push(()=>ce(c,"checked",M));function F(I){n[7](I)}let P={name:"Grid Spacing:",min:5};n[1].gridSpace!==void 0&&(P.value=n[1].gridSpace),$=new lt({props:P}),re.push(()=>ce($,"value",F));function oe(I){n[8](I)}let Q={name:"Line Width:",min:0};return n[1].gridWidth!==void 0&&(Q.value=n[1].gridWidth),p=new lt({props:Q}),re.push(()=>ce(p,"value",oe)),{c(){B(e.$$.fragment),t=T(),B(i.$$.fragment),l=T(),B(r.$$.fragment),d=T(),B(a.$$.fragment),g=T(),B(c.$$.fragment),_=T(),B($.$$.fragment),S=T(),B(p.$$.fragment)},m(I,ae){G(e,I,ae),A(I,t,ae),G(i,I,ae),A(I,l,ae),G(r,I,ae),A(I,d,ae),G(a,I,ae),A(I,g,ae),G(c,I,ae),A(I,_,ae),G($,I,ae),A(I,S,ae),G(p,I,ae),N=!0},p(I,ae){const qe={};!o&&ae&2&&(o=!0,qe.checked=I[1].gridShow,fe(()=>o=!1)),e.$set(qe);const bt={};!s&&ae&2&&(s=!0,bt.checked=I[1].gridSnap,fe(()=>s=!1)),i.$set(bt);const _t={};!u&&ae&2&&(u=!0,_t.checked=I[1].gridResize,fe(()=>u=!1)),r.$set(_t);const $t={};!f&&ae&2&&(f=!0,$t.checked=I[1].gridAlign,fe(()=>f=!1)),a.$set($t);const vt={};!b&&ae&2&&(b=!0,vt.checked=I[1].gridMovePan,fe(()=>b=!1)),c.$set(vt);const yt={};!v&&ae&2&&(v=!0,yt.value=I[1].gridSpace,fe(()=>v=!1)),$.$set(yt);const wt={};!E&&ae&2&&(E=!0,wt.value=I[1].gridWidth,fe(()=>E=!1)),p.$set(wt)},i(I){N||(L(e.$$.fragment,I),L(i.$$.fragment,I),L(r.$$.fragment,I),L(a.$$.fragment,I),L(c.$$.fragment,I),L($.$$.fragment,I),L(p.$$.fragment,I),N=!0)},o(I){D(e.$$.fragment,I),D(i.$$.fragment,I),D(r.$$.fragment,I),D(a.$$.fragment,I),D(c.$$.fragment,I),D($.$$.fragment,I),D(p.$$.fragment,I),N=!1},d(I){U(e,I),I&&O(t),U(i,I),I&&O(l),U(r,I),I&&O(d),U(a,I),I&&O(g),U(c,I),I&&O(_),U($,I),I&&O(S),U(p,I)}}}function co(n){let e,o;return e=new Ue({props:{minimal:n[0],name:"Grid Options",$$slots:{default:[uo]},$$scope:{ctx:n}}}),{c(){B(e.$$.fragment)},m(t,i){G(e,t,i),o=!0},p(t,[i]){const s={};i&1&&(s.minimal=t[0]),i&514&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(L(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){U(e,t)}}}function fo(n,e,o){let t;ee(n,ue,g=>o(1,t=g));let{minimal:i=!1}=e;function s(g){n.$$.not_equal(t.gridShow,g)&&(t.gridShow=g,ue.set(t))}function l(g){n.$$.not_equal(t.gridSnap,g)&&(t.gridSnap=g,ue.set(t))}function r(g){n.$$.not_equal(t.gridResize,g)&&(t.gridResize=g,ue.set(t))}function u(g){n.$$.not_equal(t.gridAlign,g)&&(t.gridAlign=g,ue.set(t))}function d(g){n.$$.not_equal(t.gridMovePan,g)&&(t.gridMovePan=g,ue.set(t))}function a(g){n.$$.not_equal(t.gridSpace,g)&&(t.gridSpace=g,ue.set(t))}function f(g){n.$$.not_equal(t.gridWidth,g)&&(t.gridWidth=g,ue.set(t))}return n.$$set=g=>{"minimal"in g&&o(0,i=g.minimal)},[i,t,s,l,r,u,d,a,f]}class _n extends Z{constructor(e){super(),J(this,e,fo,co,X,{minimal:0})}}function mo(n){return window.$(document).ready(function(){var e=!1;window.$(".navbar .dropdown").hover(function(){e&&(window.$(".navbar .dropdown").removeClass("open"),window.$(this).addClass("open"))},function(){}),window.$(".navbar .dropdown").on("show.bs.dropdown",function(){e=!0}),window.$(".navbar .dropdown").on("hide.bs.dropdown",function(){window.$(".navbar .dropdown.open").length<=1&&(e=!1)})}),[]}class go extends Z{constructor(e){super(),J(this,e,mo,null,X,{})}}function po(n){let e,o,t,i,s,l,r,u,d,a,f,g,c,b,_,$,v,S;return e=new fn({}),t=new gn({}),s=new qi({}),r=new io({}),d=new Zi({}),f=new bn({}),c=new _n({}),_=new ao({}),v=new go({}),{c(){B(e.$$.fragment),o=T(),B(t.$$.fragment),i=T(),B(s.$$.fragment),l=T(),B(r.$$.fragment),u=T(),B(d.$$.fragment),a=T(),B(f.$$.fragment),g=T(),B(c.$$.fragment),b=T(),B(_.$$.fragment),$=T(),B(v.$$.fragment)},m(p,E){G(e,p,E),A(p,o,E),G(t,p,E),A(p,i,E),G(s,p,E),A(p,l,E),G(r,p,E),A(p,u,E),G(d,p,E),A(p,a,E),G(f,p,E),A(p,g,E),G(c,p,E),A(p,b,E),G(_,p,E),A(p,$,E),G(v,p,E),S=!0},i(p){S||(L(e.$$.fragment,p),L(t.$$.fragment,p),L(s.$$.fragment,p),L(r.$$.fragment,p),L(d.$$.fragment,p),L(f.$$.fragment,p),L(c.$$.fragment,p),L(_.$$.fragment,p),L(v.$$.fragment,p),S=!0)},o(p){D(e.$$.fragment,p),D(t.$$.fragment,p),D(s.$$.fragment,p),D(r.$$.fragment,p),D(d.$$.fragment,p),D(f.$$.fragment,p),D(c.$$.fragment,p),D(_.$$.fragment,p),D(v.$$.fragment,p),S=!1},d(p){U(e,p),p&&O(o),U(t,p),p&&O(i),U(s,p),p&&O(l),U(r,p),p&&O(u),U(d,p),p&&O(a),U(f,p),p&&O(g),U(c,p),p&&O(b),U(_,p),p&&O($),U(v,p)}}}function ho(n){let e,o;return e=new ci({props:{$$slots:{default:[po]},$$scope:{ctx:n}}}),{c(){B(e.$$.fragment)},m(t,i){G(e,t,i),o=!0},p(t,[i]){const s={};i&1&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(L(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){U(e,t)}}}class bo extends Z{constructor(e){super(),J(this,e,null,ho,X,{})}}function _o(n){let e;return{c(){e=V("pre"),C(e,"id","res-results"),C(e,"class","shiny-html-output well svelte-74yvxb"),C(e,"data-testid","result-text")},m(o,t){A(o,e,t)},p:se,i:se,o:se,d(o){o&&O(e)}}}class $o extends Z{constructor(e){super(),J(this,e,null,_o,X,{})}}function vo(n){return window.cy=Y(K),j.subscribe(e=>{window.appState=e}),te.subscribe(e=>{window.modelOptions=e}),ft.subscribe(e=>{window.dataInfo=e}),Ae.subscribe(e=>{window.fitCache=e}),ue.subscribe(e=>{window.gridViewOptions=e}),[]}class yo extends Z{constructor(e){super(),J(this,e,vo,null,X,{})}}function wo(n){return new RegExp("^[a-zA-Z\\._][a-zA-Z0-9\\._]*(?<!\\.)$").test(n)}function Jt(n){return n==""?(bootbox.alert("Provide a label"),!1):wo(n)?!0:(bootbox.alert("Provide a valid label"),!1)}function ko(n,e){const o=e?"full":"minimal";return n.filter(t=>t.show===o||t.show==="both")}function Co(n,e,o){let t,i,s;ee(n,j,c=>o(1,t=c)),ee(n,Re,c=>o(2,i=c)),ee(n,te,c=>o(3,s=c));let l=Y(K);q.use(Dn);var r=new An.ColorPicker("#picker",{width:200,color:"rgb(255, 0, 0)",borderWidth:1,borderColor:"#fff"});function u(c,b){var _;const $=l.$(":selected");if($.length>1){if(b==="nodes"&&!$.every(v=>v.isNode()))return bootbox.alert("Not all selected elements are nodes. Aborting"),null;if(b==="edges"&&!$.every(v=>v.isEdge()))return bootbox.alert("Not all selected elements are edges. Aborting"),null;if(b==="nodes.edges"&&!$.every(v=>v.isEdge()||v.isNode()))return bootbox.alert("Not all selected elements are nodes or edges. Aborting"),null;_=$}else _=c;return _}const d=[{id:"add-observed",content:"Add Observed Variable",coreAsWell:!0,onClickFunction(c){const b=c.renderedPosition;pe(de,b)},show:"full"},{id:"add-latent",content:"Add Latent Variable",coreAsWell:!0,onClickFunction(c){const b=c.renderedPosition;pe(me,b)},show:"full"},{id:"add-constant",content:"Add Constant Variable",coreAsWell:!0,onClickFunction(c){const b=c.renderedPosition;pe(Se,b)},show:"full"},{id:"label-para",content:"Add/Change Label",selector:`edge.${ge}`,onClickFunction(c){const b=c.target||c.cyTarget;bootbox.prompt({title:"Enter a Label",value:b.getLabel(),callback(_){if(!Jt(_))return!1;_!==b.getLabel()&&_!==null&&(b.addLabel(_),le(s.mode))}})},show:"full",hasTrailingDivider:!1},{id:"label-remove",content:"Remove Label",selector:`edge.${ze}`,onClickFunction(c){(c.target||c.cyTarget).removeLabel(),le(s.mode)},show:"both",hasTrailingDivider:!1},{id:"remove-edge",content:"Delete Edge",selector:`edge.${ge}`,onClickFunction(c){(c.target||c.cyTarget).remove(),le(s.mode)},show:"full",hasTrailingDivider:!0},{id:"fix-para",content:"Fix Parameter",selector:`edge.${ke}.${ge}, edge.${Me}.${ge}`,onClickFunction(c){const b=c.target||c.cyTarget;bootbox.prompt({title:"Enter a Value",inputType:"number",callback(_){if(_=="")return bootbox.alert("Provide a value"),!1;_!==null&&(b.fixPara(_),le(s.mode))}})},show:"full",hasTrailingDivider:!1},{id:"free-para",content:"Free Parameter",selector:`edge.${Ce}.${ge}, edge.${Me}.${ge}`,onClickFunction(c){var b=c.target||c.cyTarget;b.freePara(),le(s.mode)},show:"full",hasTrailingDivider:!1},{id:"free-force-para",content:"Force Parameter Free",selector:`edge.${ke}.${ge}, edge.${Ce}.${ge}`,onClickFunction(c){(c.target||c.cyTarget).forceFreePara(),le(s.mode)},show:"full",hasTrailingDivider:!0},{id:"revert-arrow",content:"Revert Direction",selector:`edge[isMean="0"].${Fe}.${ge}`,onClickFunction(c){(c.target||c.cyTarget).revert(),le(s.mode)},show:"full",hasTrailingDivider:!1},{id:"set-undirected",content:"Set Undirected",selector:`edge[isMean="0"].${Fe}.${ge}`,onClickFunction(c){(c.target||c.cyTarget).setUndirected(),le(s.mode)},show:"full",hasTrailingDivider:!0},{id:"set-arrow",content:"Set Directed",selector:`edge.${Ne}.${ge}`,onClickFunction(c){(c.target||c.cyTarget).setDirected(),le(s.mode)},show:"full",hasTrailingDivider:!0},{id:"free-orientation",content:"Free Loop Orientation",selector:`edge.${st}.fixDeg`,onClickFunction(c){const b=c.target||c.cyTarget;b.removeClass("fixDeg"),$e(b.source().id())},show:"both",hasTrailingDivider:!0},{id:"change-fromUser",content:"Explicitly Include in Model",selector:`edge.${De}`,onClickFunction(c){(c.target||c.cyTarget).markAddedUser(),le(s.mode)},show:"full",hasTrailingDivider:!0},{id:"color-edge",content:"Change Edge Color",selector:"edge",show:"both",onClickFunction(c){var b=c.target||c.cyTarget;const _=u(b,"edges");if(_===null)return null;f(b,_,"edge")}},{id:"change-line-width",content:"Change Line Width",show:"both",selector:"edge",onClickFunction(c){var b=c.target||c.cyTarget;const _=u(b,"edges");if(_===null)return null;bootbox.prompt({title:"Enter New Line Width:",value:b.style("width"),callback($){$!==null&&i.do("style",{eles:_,style:{width:$}})}})}},{id:"rename-node",show:"full",content:"Rename Variable",selector:`node.${me}, node.${de}`,onClickFunction(c){const b=c.target||c.cyTarget,_=t.columnNames;let $;t.dataAvail&&($=_.map(S=>`<option value="${S}">${S}</option>`).join(""));const v=t.dataAvail&&b.isObserved()?`
      <label>Or Select From Variables in Your Data:</label>
      <select class="form-control" id="label-dropdown">
        <option value="">--Select--</option>
        ${$}
      </select>
    `:"";bootbox.dialog({title:"Rename Variable",message:`
      <div>
        <label>Enter a label:</label>
        <input type="text" class="form-control" id="new-label" value=${b.getLabel()}>
        ${v}
      </div>
    `,buttons:{cancel:{label:"Cancel",className:"btn-default"},confirm:{label:"Rename",className:"btn-primary",callback(){let S=document.getElementById("new-label").value;const p=t.dataAvail&&b.isObserved()?document.getElementById("label-dropdown").value:"";let E;if(S==b.getLabel()?E=p:E=S,!Jt(E))return!1;E&&(b.setLabel(E),_&&_.includes(b.getLabel())?(b.link(),he("success",`Variable ${b.data("label")} linked to data`)):b.isLinked()&&(b.unlink(),he("info",`Variable ${b.getLabel()} unlinked`)),le(s.mode))}}},onShown(S){document.getElementById("new-label").addEventListener("keypress",function(p){p.key==="Enter"&&(p.preventDefault(),S.target.querySelector(".btn-primary").click())})}})}},{id:"remove-node",content:"Delete Variable",selector:`node.${me}, node.${de}, node.${Se}`,onClickFunction(c){(c.target||c.cyTarget).remove(),le(s.mode)},show:"full",hasTrailingDivider:!0},{id:"change-latent",content:"Change to Latent",selector:`node.${de}`,onClickFunction(c){(c.target||c.cyTarget).makeLatent(),le(s.mode)},show:"full",hasTrailingDivider:!1},{id:"change-ordered",content:"Change to Ordered",selector:`node.${de}.${Je}`,onClickFunction(c){(c.target||c.cyTarget).makeOrdered(),le(s.mode)},show:"full",hasTrailingDivider:!0},{id:"change-continous",content:"Change to Continous",selector:`node.${de}.${Ze}`,onClickFunction(c){(c.target||c.cyTarget).makeContinous(),le(s.mode)},show:"full",hasTrailingDivider:!0},{id:"change-observed",show:"full",content:"Change to Observed",selector:`node.${me}`,hasTrailingDivider:!0,onClickFunction(c){const b=c.target||c.cyTarget;b.makeObserved();let _=t.columnNames;_&&_.includes(b.getLabel())&&(b.link(),bootbox.alert("Variable linked with data set")),le(s.mode)}},{id:"color-node",content:"Change Background Color",selector:"node",show:"both",onClickFunction(c){var b=c.target||c.cyTarget;const _=u(b,"nodes");if(_===null)return null;f(b,_,"nodes")}},{id:"change-border-width",content:"Change Border Width",show:"both",selector:`node.${me}, node.${de}, node.${Se}`,onClickFunction(c){var b=c.target||c.cyTarget;const _=u(b,"nodes");if(_===null)return null;bootbox.prompt({title:"Enter New Border Width:",value:b.style("border-width"),callback($){$!==null&&i.do("style",{eles:_,style:{"border-width":$}})}})}},{id:"change-font-size",content:"Change Font Size",show:"both",hasTrailingDivider:!0,selector:`node.${me}, node.${de}, node.${Se}, edge`,onClickFunction(c){var b=c.target||c.cyTarget;const _=u(b,"nodes.edges");if(_===null)return null;bootbox.prompt({title:"Enter New Font Size:",value:b.style("font-size"),callback($){$!==null&&i.do("style",{eles:_,style:{"font-size":$}})}})}}];let a;function f(c,b,_){var $=document.getElementById("picker");$.style.display="block",$.style.left=event.pageX+"px",$.style.top=event.pageY+"px";let v;a=b;const S=function(N){v=N.hexString};r.on("color:change",S);const p=function(N){$.contains(N.target)||(_=="edge"?i.do("style",{eles:a,style:{"line-color":v,"target-arrow-color":v,"source-arrow-color":v}}):i.do("style",{eles:a,style:{"background-color":v}}),$.style.display="none",r.off("color:change",S),document.removeEventListener("click",p),document.removeEventListener("keydown",E))};setTimeout(()=>document.addEventListener("click",p),0);const E=function(N){N.key==="Enter"&&p(N)};document.addEventListener("keydown",E)}const g=ko(d,t.full);return we(()=>{l.contextMenus({menuItems:g})}),[]}class Eo extends Z{constructor(e){super(),J(this,e,Co,null,X,{})}}function So(n){let e;return{c(){e=V("div"),e.innerHTML=`<label class="control-label shiny-label-null" for="fileInput" id="fileInput-label"></label> 
  <div class="input-group svelte-1qxcvef"><label class="input-group-btn input-group-prepend"><span class="btn btn-default btn-file">Browse...
        <input id="dataUpload-fileInput" name="fileInput" type="file" style="position: absolute !important; top: -99999px !important; left: -99999px !important;" accept=".csv,.sav, .xlsx, .rds"/></span></label> 
    <input type="text" class="form-control" placeholder="No file selected" readonly="readonly"/></div> 
  <div id="fileInput_progress" class="progress active shiny-file-input-progress svelte-1qxcvef"><div class="progress-bar svelte-1qxcvef"></div></div>`,C(e,"class","form-group shiny-input-container svelte-1qxcvef")},m(o,t){A(o,e,t)},p:se,i:se,o:se,d(o){o&&O(e)}}}class Lo extends Z{constructor(e){super(),J(this,e,null,So,X,{})}}function Mo(n){let e,o,t,i,s,l,r,u,d,a,f,g,c,b,_,$,v,S,p,E,N,h,y,W;return{c(){e=V("div"),o=V("button"),t=be("Show Data"),s=T(),l=V("div"),r=V("button"),u=be("User Model"),a=T(),f=V("button"),g=be("Lavaan Model"),b=T(),_=V("button"),$=be("Estimates"),p=T(),E=V("button"),N=be("More Results"),C(o,"class","btn btn-lg btn-default"),o.disabled=i=!n[2].dataAvail,C(r,"class",d="btn btn-lg "+(n[1]==="user model"?"btn-primary active":"btn-default")),C(f,"class",c="btn btn-lg "+(n[1]==="full model"?"btn-primary active":"btn-default")),C(_,"class",v="btn btn-lg "+(n[1]==="estimate"?"btn-primary active":"btn-default")),_.disabled=S=!n[2].dataAvail||n[2].modelEmpty,C(l,"class","btn-group btn-toggle svelte-xny576"),C(E,"class","btn btn-lg btn-default"),E.disabled=h=n[0].mode!="estimate",C(e,"class","toolbox navbar-static-bottom svelte-xny576")},m(H,m){A(H,e,m),x(e,o),x(o,t),x(e,s),x(e,l),x(l,r),x(r,u),x(l,a),x(l,f),x(f,g),x(l,b),x(l,_),x(_,$),x(e,p),x(e,E),x(E,N),y||(W=[ie(o,"click",n[6]),ie(r,"click",n[7]),ie(f,"click",n[8]),ie(_,"click",n[9]),ie(E,"click",n[10])],y=!0)},p(H,[m]){m&4&&i!==(i=!H[2].dataAvail)&&(o.disabled=i),m&2&&d!==(d="btn btn-lg "+(H[1]==="user model"?"btn-primary active":"btn-default"))&&C(r,"class",d),m&2&&c!==(c="btn btn-lg "+(H[1]==="full model"?"btn-primary active":"btn-default"))&&C(f,"class",c),m&2&&v!==(v="btn btn-lg "+(H[1]==="estimate"?"btn-primary active":"btn-default"))&&C(_,"class",v),m&4&&S!==(S=!H[2].dataAvail||H[2].modelEmpty)&&(_.disabled=S),m&1&&h!==(h=H[0].mode!="estimate")&&(E.disabled=h)},i:se,o:se,d(H){H&&O(e),y=!1,Xe(W)}}}function Do(){window.$("#data-modal-2").modal()}function Ao(n,e,o){let t,i,s;ee(n,te,_=>o(0,t=_)),ee(n,j,_=>o(2,i=_)),ee(n,ue,_=>o(11,s=_));let l;function r(_){o(1,l=_),_!=="user model"?z(ue,s.showLav=!0,s):z(ue,s.showLav=!1,s),z(te,t.mode=_,t)}window.$("#data-modal-extend-results").on("hidden.bs.modal",function(){z(j,i.showServerErrors=!0,i)});function u(){window.$("#data-modal-extend-results").modal(),z(j,i.showServerErrors=!1,i)}let d=!1;we(()=>{o(5,d=!0)});const a=()=>Do(),f=()=>r("user model"),g=()=>r("full model"),c=()=>r("estimate"),b=()=>u();return n.$$.update=()=>{n.$$.dirty&33&&d&&o(1,l=t.mode)},[t,l,i,r,u,d,a,f,g,c,b]}class Oo extends Z{constructor(e){super(),J(this,e,Ao,Mo,X,{})}}function Fo(){return typeof Shiny=="object"&&Shiny!==null}function No(n){let e=0,o=Number.NEGATIVE_INFINITY,t=Number.NEGATIVE_INFINITY,i=n.nodes().length;n.nodes().forEach(r=>{let u=r.position();e+=u.x,u.x>o&&(o=u.x),u.y>t&&(t=u.y)});let s=e/i,l=t+100;return{x:s,y:l}}function Io(n,e){if(!n)throw new Error(e||"Assertion failed")}function xo(n,e,o){let t,i,s;ee(n,te,a=>o(0,t=a)),ee(n,j,a=>o(1,i=a)),ee(n,Ae,a=>o(2,s=a));function l(a,f,g){let c,b,_;return f==="=~"?(c=Fe,b=a,_=g):f=="~1"?(b=1,_=a,c=Fe):(_=a,b=g,f==="~~"?a===g?c=st:c=Ne:c=Fe),{directed:c,source:b,target:_}}function r(a,f,g,c){let b=l(a,f,g);b.user=c;const $=Y(K).edges(function(v){let S;if(b.source!=1?(S=v.source().getLabel()==b.source&&v.target().getLabel()==b.target,b.directed==Ne&&(S=S||v.source().getLabel()==b.target&&v.target().getLabel()==b.source)):S=v.source().isConstant()&&v.target().getLabel()==b.target,b.user!=null)if(b.user==1)S=S&&v.isUserAdded();else if(b.user==0)S=S&&v.isLavaanAdded();else throw new Error("User was neither 0 nor 1");return S});if($.length>1)throw new Error("Multiple edges found");return $}function u(a,f){z(j,i.meansModelled=!1,i),z(j,i.loadingMode=!0,i);let g=Y(K);if(!f)g.edges().invalidate();else{let v=function(E,N,h){pe(E,h,!1,N)};const $=Array.isArray(a.obs)?a.obs:[a.obs];let S={x:200,y:200};for(let E=0;E<$.length;E++)S.x=S.x+50,v(de,$[E],S);const p=Array.isArray(a.latent)?a.latent:[a.latent];S={x:200,y:100};for(let E=0;E<p.length;E++)S.x=S.x+50,v(me,p[E]);a=a.parTable}const c=new Set;for(let $=0;$<a.lhs.length;$++)a.op[$]==="|"&&c.add(a.lhs[$]);let b=!1,_;for(let $=0;$<a.lhs.length;$++){if(a.op[$]=="~*~"||a.op[$]=="|")continue;let v=r(a.lhs[$],a.op[$],a.rhs[$],a.user[$]);if(!f&&a.user[$]==1)Io(v.length==1),v.validate(),v.isModifiedLavaan()&&v.isFixed()&&v.revertLavaanFix(),a.free[$]==0&&!v.isFixed()&&v.fixPara(a.ustart[$]).markModifiedLavaan();else{let S;if(f||v.length==0){const p=l(a.lhs[$],a.op[$],a.rhs[$]);if(f&&i.full&&a.user[$]==0)continue;let E;if(p.source!==1)E=g.nodes(function(h){return h.getLabel()==p.source})[0].id();else{if(z(j,i.meansModelled=!0,i),a.free[$]==0&&a.ustart[$]==0)continue;b||(_=pe(Se,No(g),!1),b=!0,g.nodes(function(y){return y.id()==_})[0].markAddedLavaan()),E=_}const N=g.nodes(function(h){return h.getLabel()==p.target})[0].id();S=g.add({groups:"edges",data:{source:E,target:N},classes:p.directed+" nolabel"}),a.label[$]!=""&&S.addLabelImport(a.label[$]),a.user[$]==1?S.markAddedUser():S.markAddedLavaan(),$e(E),$e(N)}else!f&&v.length==1&&(S=v);a.free[$]==0?a.ustart[$]!==0&&a.exo[$]!==1?c.has(S.target().getLabel())&&a.op[$]=="~~"?S.fixPara("Total Variance 1"):S.fixPara(a.ustart[$]):S.remove():S.setFree(),f||S.validate()}}f?(gt("tree",!1),g.fit()):(g.edges().forEach($=>{$.isValid()||$.remove()}),g.getLavaanNodes().forEach($=>{$.connectedEdges().length==0&&($.remove(),g.nodes().forEach(v=>{$e(v.id())}))})),i.parsedModel||z(j,i.parsedModel=!0,i),g.getUserEdges().length>0&&z(j,i.modelEmpty=!1,i),z(j,i.loadingMode=!1,i)}function d(a,f){Y(K);const g=a.op.some(c=>c.includes("~~"));for(let c=0;c<a.lhs.length;c++){if(a.op[c]=="~*~"||a.op[c]=="|")continue;let b=r(a.lhs[c],a.op[c],a.rhs[c]);if(b.length>0){let _={};b.isFree()?(_.est=a.est[c],_.p_value=a.pvalue[c],_.se=a.se[c],_.ciLow=a["ci.lower"][c],_.ciHigh=a["ci.upper"][c],_.est_std=f["est.std"][c],_.se_std=f.se[c],_.ciLow_std=f["ci.lower"][c],_.ciHigh_std=f["ci.upper"][c],b.addClass("hasEst")):g&&a.op[c]=="~~"&&(_.estFixed=a.est[c],_.estFixed_std=f["est.std"][c],b.addClass("hasEstFixed")),b.data("estimates",_)}}}return Fo()&&(Shiny.addCustomMessageHandler("dataInfo",function(a){mt(a.columns),z(j,i.columnNames=[...a.columns],i),z(j,i.ids=[...a.columns],i),z(j,i.loadedFileName=a.name,i),z(j,i.dataAvail=!0,i),le(t.mode),a.showData&&window.$("#data-modal-2").modal()}),Shiny.addCustomMessageHandler("lav_failed",function(a){z(j,i.fitting=!1,i),a=="stopped"?he("danger","Fitting stopped by user"):he("danger","Fitting failed")}),Shiny.addCustomMessageHandler("fitting",function(a){z(j,i.fitting=!0,i)}),Shiny.addCustomMessageHandler("lav_warning_error",function(a){const f=a.type=="warning"?"warning":"error";he(a.type,`During ${a.origin} the following ${f} occurred: ${a.message}`)}),Shiny.addCustomMessageHandler("lav_error_fitting",function(a){z(j,i.fitting=!1,i),he(a.type,"During "+a.origin+" the following error occurred: "+a.message)}),Shiny.addCustomMessageHandler("usecache",function(a){he("info","Reusing cached results because model and data did not change since last fit")}),Shiny.addCustomMessageHandler("data_missing",function(a){he("danger","Could not fit model because no data is available")}),Shiny.addCustomMessageHandler("columnames",function(a){const f=Y(K),g=i.columnNames[a.index];z(j,i.columnNames[a.index]=a.newcolname,i),f.getObservedNodes().forEach(c=>{c.getLabel()==g&&(c.setLabel(a.newcolname),le(t.mode))}),mt(i.columnNames)}),Shiny.addCustomMessageHandler("missing_vars",function(a){var f=[].concat(a).join(", ");he("danger","Could not fit model because "+f+" are observed variables in the model but not present in the data.")}),Shiny.addCustomMessageHandler("lav_model",function(a){u(a,!1)}),Shiny.addCustomMessageHandler("imported_model",function(a){u(a,!0);let f=Y(K);Array.isArray(a.ordered)||(a.ordered=[a.ordered]),a.ordered.forEach(g=>{f.nodes(function(c){return c.getLabel()==g})[0].makeOrdered()}),z(te,t.fix_first=!1,t),he("warning","start_gui only imports user edges. Your full model is very likely different than what you fitted in lavaan because of different options used. To display the model, as you fitted it in lavaan, use plot_interactive")}),Shiny.addCustomMessageHandler("lav_results",function(a){z(j,i.loadingMode=!0,i),z(Ae,s.lastFitLavFit=a.fitted_model,s),z(Ae,s.lastFitModel=a.model,s),z(Ae,s.lastFitData=a.data,s),z(j,i.fitting=!1,i),z(j,i.loadingMode=!1,i)}),Shiny.addCustomMessageHandler("lav_estimates",function(a){const f=a.normal,g=a.std;d(f,g)}),Shiny.addCustomMessageHandler("setToEstimate",function(a){z(te,t.mode="estimate",t)})),[]}class To extends Z{constructor(e){super(),J(this,e,xo,null,X,{})}}function Po(n){On(q);let e=Y(K);var o={zoomFactor:.05,zoomDelay:45,minZoom:e.minZoom(),maxZoom:e.maxZoom(),fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,zoomOnly:!1,fitSelector:void 0,animateOnFit(){return!1},fitAnimationDuration:1e3};return we(()=>{e.panzoom(o),e.on("zoom",function(t){var i=e.zoom();i<o.minZoom?e.zoom(o.minZoom):i>o.maxZoom&&e.zoom(o.maxZoom)})}),[]}class Vo extends Z{constructor(e){super(),J(this,e,Po,null,X,{})}}function zo(n){let e,o;const t=n[1].default,i=Ke(t,n,n[0],null);return{c(){e=V("div"),i&&i.c(),C(e,"class","svelte-16igfw6")},m(s,l){A(s,e,l),i&&i.m(e,null),o=!0},p(s,[l]){i&&i.p&&(!o||l&1)&&Qe(i,t,s,s[0],o?tt(t,s[0],l,null):et(s[0]),null)},i(s){o||(L(i,s),o=!0)},o(s){D(i,s),o=!1},d(s){s&&O(e),i&&i.d(s)}}}function Ro(n,e,o){let{$$slots:t={},$$scope:i}=e;return n.$$set=s=>{"$$scope"in s&&o(0,i=s.$$scope)},[i,t]}class Bo extends Z{constructor(e){super(),J(this,e,Ro,zo,X,{})}}function Go(n,e,o){let t;ee(n,j,s=>o(0,t=s));let i=Y(K);return setInterval(()=>{t.drawing=="none"&&i&&(i.autoungrabify(!1),i.nodes().grabify())},1e3),window.addEventListener("beforeunload",s=>{s.preventDefault(),s.returnValue=""}),we(()=>{Shiny.unbindAll(),Shiny.bindAll()}),[]}class Uo extends Z{constructor(e){super(),J(this,e,Go,null,X,{})}}function Xt(n){let e,o,t,i,s,l;return{c(){e=V("div"),o=V("button"),o.innerHTML='<span class="glyphicon glyphicon-refresh spinning svelte-16d2v0h"></span> Fitting...',t=T(),i=V("button"),i.textContent="Cancel",C(o,"class","btn btn-lg btn-secondary fixed-width disabled-button svelte-16d2v0h"),C(o,"id","fitting-button"),o.disabled=!0,C(i,"class","btn btn-lg btn-default fixed-width svelte-16d2v0h"),C(e,"class","center-screen svelte-16d2v0h")},m(r,u){A(r,e,u),x(e,o),x(e,t),x(e,i),s||(l=ie(i,"click",jo),s=!0)},p:se,d(r){r&&O(e),s=!1,l()}}}function qo(n){let e,o=n[0].fitting&&Xt();return{c(){o&&o.c(),e=Ge()},m(t,i){o&&o.m(t,i),A(t,e,i)},p(t,[i]){t[0].fitting?o?o.p(t,i):(o=Xt(),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null)},i:se,o:se,d(t){o&&o.d(t),t&&O(e)}}}function jo(){Shiny.setInputValue("run-abort",Math.random())}function Ho(n,e,o){let t;return ee(n,j,i=>o(0,t=i)),[t]}class Wo extends Z{constructor(e){super(),J(this,e,Ho,qo,X,{})}}function Kt(n){let e,o,t=n[2][n[0].type].label+"",i,s,l=n[0].message+"",r,u;return{c(){e=V("div"),o=V("strong"),i=be(t),s=T(),r=be(l),C(e,"class",u=Pe(n[2][n[0].type].class+(n[1]?" fadeOut":""))+" svelte-1wv9zbn")},m(d,a){A(d,e,a),x(e,o),x(o,i),x(e,s),x(e,r)},p(d,a){a&1&&t!==(t=d[2][d[0].type].label+"")&&Ve(i,t),a&1&&l!==(l=d[0].message+"")&&Ve(r,l),a&3&&u!==(u=Pe(d[2][d[0].type].class+(d[1]?" fadeOut":""))+" svelte-1wv9zbn")&&C(e,"class",u)},d(d){d&&O(e)}}}function Yo(n){let e,o=n[0].message!==""&&Kt(n);return{c(){o&&o.c(),e=Ge()},m(t,i){o&&o.m(t,i),A(t,e,i)},p(t,[i]){t[0].message!==""?o?o.p(t,i):(o=Kt(t),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null)},i:se,o:se,d(t){o&&o.d(t),t&&O(e)}}}function Zo(n,e,o){let t;ee(n,ln,r=>o(0,t=r));let i={success:{class:"alert-success",label:"Success!"},info:{class:"alert-info",label:"Info!"},warning:{class:"alert-warning",label:"Warning!"},danger:{class:"alert-danger",label:"Danger!"}},s=!1,l;return n.$$.update=()=>{n.$$.dirty&9&&t.message!==""&&(o(1,s=!1),clearTimeout(l),o(3,l=setTimeout(()=>{o(1,s=!0)},1e4)))},[t,s,i,l]}class Jo extends Z{constructor(e){super(),J(this,e,Zo,Yo,X,{})}}function Xo(n,e){const o={};return n.forEach((t,i)=>{o[t]=e[i]}),o}function Ko(n,e,o){let t;ee(n,Re,s=>o(0,t=s));let i=Y(K);return we(()=>{q.use(Fn);const s={isDebug:!0};let l=i.undoRedo(s);Re.set(l),l.action("style",function(r){let u={};const d=Object.keys(r.style);return r.eles.forEach(function(a){let f=[];d.forEach(g=>{f.push(a.data(g)||a.style(g)),a.data(g,r.style[g])}),u[a.id()]=Xo(d,f)}),{eles:r.eles,style:u}},function(r){const u=r.eles[0].style();return Object.keys(r.style).forEach(function(d){var a=i.getElementById(d);for(var f in r.style[d])a.data(f,r.style[d][f])}),{eles:r.eles,style:u}}),document.addEventListener("keydown",function(r){(r.ctrlKey||r.metaKey)&&r.target.nodeName==="BODY"&&(r.which===90||r.which===89)&&(r.preventDefault(),r.stopPropagation(),r.which===90?t.undo():r.which===89&&t.redo())}),document.addEventListener("keyup",function(r){r.metaKey&&r.target.nodeName==="BODY"&&(r.which===90||r.which===89)&&(r.preventDefault(),r.stopPropagation())})}),[]}class Qo extends Z{constructor(e){super(),J(this,e,Ko,null,X,{})}}function es(){return typeof Shiny=="object"&&Shiny!==null}function ts(n,e,o){let t;return ee(n,j,i=>o(0,t=i)),es()?Shiny.addCustomMessageHandler("full",function(i){z(j,t.full=i,t),z(j,t.ready=!0,t)}):(z(j,t.full=!0,t),z(j,t.ready=!0,t)),[]}class ns extends Z{constructor(e){super(),J(this,e,ts,null,X,{})}}function is(n,e,o){let t;ee(n,ue,s=>o(1,t=s));let i=!1;return we(()=>{o(0,i=!0)}),n.$$.update=()=>{n.$$.dirty&3&&i&&Oi(t.showVar,t.showLav,t.showMean),n.$$.dirty&3&&i&&Ai(t.view,t.std,t.number_digits)},[i,t]}class os extends Z{constructor(e){super(),J(this,e,is,null,X,{})}}function ss(n){let e,o,t,i;const s=n[6].default,l=Ke(s,n,n[5],null);return{c(){e=V("section"),l&&l.c(),_e(e,"left",n[0]+"px"),_e(e,"top",n[1]+"px"),C(e,"class","draggable svelte-13fkbj1")},m(r,u){A(r,e,u),l&&l.m(e,null),o=!0,t||(i=[ie(window,"mouseup",n[4]),ie(window,"mousemove",n[3]),ie(e,"mousedown",n[2])],t=!0)},p(r,[u]){l&&l.p&&(!o||u&32)&&Qe(l,s,r,r[5],o?tt(s,r[5],u,null):et(r[5]),null),(!o||u&1)&&_e(e,"left",r[0]+"px"),(!o||u&2)&&_e(e,"top",r[1]+"px")},i(r){o||(L(l,r),o=!0)},o(r){D(l,r),o=!1},d(r){r&&O(e),l&&l.d(r),t=!1,Xe(i)}}}function ls(n,e,o){let{$$slots:t={},$$scope:i}=e,{left:s=100}=e,{top:l=100}=e,r=!1,u=0,d=0;function a(c){r=!0,u=c.clientX-s,d=c.clientY-l}function f(c){r&&(o(0,s=c.clientX-u),o(1,l=c.clientY-d))}function g(){r=!1}return n.$$set=c=>{"left"in c&&o(0,s=c.left),"top"in c&&o(1,l=c.top),"$$scope"in c&&o(5,i=c.$$scope)},[s,l,a,f,g,i,t]}class rs extends Z{constructor(e){super(),J(this,e,ls,ss,X,{left:0,top:1})}}function as(n){let e,o,t;const i=n[0].default,s=Ke(i,n,n[1],null);return{c(){e=V("ul"),o=V("div"),s&&s.c(),_e(o,"display","flex"),_e(o,"flex-direction","column"),C(e,"class","nav navbar-nav navbar-left"),_e(e,"border","1px solid black"),_e(e,"z-index","9999")},m(l,r){A(l,e,r),x(e,o),s&&s.m(o,null),t=!0},p(l,r){s&&s.p&&(!t||r&2)&&Qe(s,i,l,l[1],t?tt(i,l[1],r,null):et(l[1]),null)},i(l){t||(L(s,l),t=!0)},o(l){D(s,l),t=!1},d(l){l&&O(e),s&&s.d(l)}}}function us(n){let e,o;return e=new rs({props:{$$slots:{default:[as]},$$scope:{ctx:n}}}),{c(){B(e.$$.fragment)},m(t,i){G(e,t,i),o=!0},p(t,[i]){const s={};i&2&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(L(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){U(e,t)}}}function ds(n,e,o){let{$$slots:t={},$$scope:i}=e;return n.$$set=s=>{"$$scope"in s&&o(1,i=s.$$scope)},[t,i]}class cs extends Z{constructor(e){super(),J(this,e,ds,us,X,{})}}function fs(n,e){return bootbox.alert({title:"<span style='color: red;'>Error</span>",message:`A ${e} error occurred:<br> <span style='color: red;'>${n}</span>.<br><br>Please consider reporting this issue by sending an email to <a href="mailto:j.d.karch@fsw.leidenuniv.nl">j.d.karch@fsw.leidenuniv.nl</a>.`,centerVertical:!0}),!0}function ms(){return typeof Shiny=="object"&&Shiny!==null}function gs(n){return ms()&&Shiny.addCustomMessageHandler("serverError",function(e){Y(j).showServerErrors&&fs(e.msg,"Server")}),[]}class ps extends Z{constructor(e){super(),J(this,e,gs,null,X,{})}}function hs(n,e,o){let t;return ee(n,te,i=>o(0,t=i)),n.$$.update=()=>{n.$$.dirty&1&&le(t.mode)},[t]}class bs extends Z{constructor(e){super(),J(this,e,hs,null,X,{})}}function _s(n){q.use(Nn);let e=Y(K);return we(()=>{e.automove({nodesMatching:".automove-viewport",reposition:"viewport"})}),[]}class $s extends Z{constructor(e){super(),J(this,e,_s,null,X,{})}}function vs(n){In(q,window.$,sn);let e=Y(K);return we(()=>{e.nodeEditing({resizeToContentCueImage:"",undoable:!0})}),[]}class ys extends Z{constructor(e){super(),J(this,e,vs,null,X,{})}}function ws(n){return q("collection","init",function(){return this.addClass(ke).addClass(Ye).addClass(ge),this}),q("collection","free",function(){return this.hasClass(ke)}),q("collection","addLabel",function(e){return this.addLabelImport(e).removeClass(xe),this}),q("collection","addLabelImport",function(e){return this.data("label",e).addClass(ze).removeClass(Ye),this}),q("collection","removeLabel",function(){return this.removeClass(ze).addClass(Ye).data("label",null),this}),q("collection","setLabel",function(e){return this.data("label",e),this}),q("collection","getLabel",function(){return this.data("label")}),q("collection","fixPara",function(e){return this.data("value",e).removeClass(ke).removeClass(Me).removeClass(Ct).addClass(Ce),this}),q("collection","freePara",function(){return this.removeClass(Ce).removeClass(Me).removeClass(xe).addClass(ke),this}),q("collection","setFree",function(){return this.removeClass(Ce).removeClass(Me).addClass(ke),this}),q("collection","forceFreePara",function(){return this.removeClass(ke).removeClass(Ce).removeClass(xe).addClass(Me),this}),q("collection","revert",function(){const e=this.source().id(),o=this.target().id();return this.move({source:o,target:e}),this}),q("collection","setUndirected",function(){return this.removeClass(Fe).addClass(Ne),this}),q("collection","setDirected",function(){return this.removeClass(Ne).addClass(Fe),this}),q("collection","isUndirected",function(){return this.hasClass(Ne)}),q("collection","isDirected",function(){return this.hasClass(Fe)}),q("collection","makeLoop",function(){return this.addClass(st),this}),q("collection","myIsLoop",function(){return this.hasClass(st)}),q("collection","makeMeanEdge",function(){return this.data("isMean","1"),this}),q("collection","isMean",function(){return this.data("isMean")==="1"||this.isConstant()}),q("collection","makeOtherEdge",function(){return this.data("isMean","0"),this}),q("collection","isFixed",function(){return this.hasClass(Ce)}),q("collection","isFree",function(){return this.hasClass(ke)||this.hasClass(Me)}),q("collection","isForceFree",function(){return this.hasClass(Me)}),q("collection","hasLabel",function(){return this.hasClass(ze)}),q("collection","isModifiedLavaan",function(){return this.hasClass(xe)}),q("collection","markModifiedLavaan",function(){return this.addClass(xe),this}),q("collection","markAddedLavaan",function(){return this.addClass(De).removeClass(ge),this}),q("collection","markAddedUser",function(){return this.removeClass(De).addClass(ge),this}),q("collection","isUserAdded",function(){return this.hasClass(ge)}),q("collection","isLavaanAdded",function(){return this.hasClass(De)}),q("collection","getValue",function(){return this.data("value")}),q("collection","setValue",function(e){this.data("value",e)}),q("collection","invalidate",function(){return this.removeClass(ut),this}),q("collection","validate",function(){return this.addClass(ut),this}),q("collection","isValid",function(){return this.hasClass(ut)}),q("collection","revertLavaanFix",function(){this.freePara().removeClass(xe)}),q("collection","removeEstimates",function(){return this.removeClass(Ct).removeClass(Vn),this.removeData("estimates"),this}),q("collection","link",function(){return this.addClass(Be),this}),q("collection","unlink",function(){return this.removeClass(Be),this}),q("collection","isLinked",function(){return this.hasClass(Be)}),q("collection","isLatent",function(){return this.hasClass(me)}),q("collection","makeLatent",function(){return this.removeClass(de).addClass(me).removeClass(Be),this}),q("collection","makeObserved",function(){return this.addClass(de).removeClass(me),this}),q("collection","makeOrdered",function(){return this.removeClass(Je).addClass(Ze),this}),q("collection","isOrdered",function(){return this.hasClass(Ze)}),q("collection","makeContinous",function(){return this.addClass(Je).removeClass(Ze),this}),q("collection","isConstant",function(){return this.hasClass(Se)}),q("collection","isObserved",function(){return this.hasClass(de)}),q("core","getLavaanNodes",function(){return this.nodes(`.${De}`)}),q("core","getLavaanEdges",function(){return this.edges(`.${De}`)}),q("core","getObservedNodes",function(){return this.nodes(`.${de}`)}),q("core","getUserEdges",function(){return this.edges(`.${ge}`)}),q("core","getLavaanModifiedEdges",function(){return this.edges(`.${xe}`)}),q("core","getLatentNodes",function(){return this.nodes(function(e){return e.hasClass(me)})}),[]}class ks extends Z{constructor(e){super(),J(this,e,ws,null,X,{})}}function Cs(n){xn(q,window.$,sn);let e=Y(K);return we(()=>{e.edgeEditing({undoable:!0,bendRemovalSensitivity:16,enableMultipleAnchorRemovalOption:!0,initAnchorsAutomatically:!1,useTrailingDividersAfterContextMenuOptions:!1,enableCreateAnchorOnDrag:!0,anchorShapeSizeFactor:4}),e.style().update()}),[]}class Es extends Z{constructor(e){super(),J(this,e,Cs,null,X,{})}}function Qt(n){let e,o,t,i,s,l,r,u,d,a,f,g,c,b,_,$,v=n[0].full&&en();o=new Un({});const S=[Ls,Ss],p=[];function E(h,y){return h[0].full?0:1}s=E(n),l=p[s]=S[s](n),u=new Bo({props:{$$slots:{default:[Ds]},$$scope:{ctx:n}}});let N=n[0].full&&nn();return f=new yo({}),c=new To({}),_=new Uo({}),{c(){v&&v.c(),e=T(),B(o.$$.fragment),t=T(),i=V("div"),l.c(),r=T(),B(u.$$.fragment),d=T(),N&&N.c(),a=T(),B(f.$$.fragment),g=T(),B(c.$$.fragment),b=T(),B(_.$$.fragment),C(i,"class","svelte-15ghafl")},m(h,y){v&&v.m(h,y),A(h,e,y),G(o,h,y),A(h,t,y),A(h,i,y),p[s].m(i,null),x(i,r),G(u,i,null),x(i,d),N&&N.m(i,null),A(h,a,y),G(f,h,y),A(h,g,y),G(c,h,y),A(h,b,y),G(_,h,y),$=!0},p(h,y){h[0].full?v?y&1&&L(v,1):(v=en(),v.c(),L(v,1),v.m(e.parentNode,e)):v&&(ve(),D(v,1,1,()=>{v=null}),ye());let W=s;s=E(h),s!==W&&(ve(),D(p[W],1,1,()=>{p[W]=null}),ye(),l=p[s],l||(l=p[s]=S[s](h),l.c()),L(l,1),l.m(i,r));const H={};y&3&&(H.$$scope={dirty:y,ctx:h}),u.$set(H),h[0].full?N?y&1&&L(N,1):(N=nn(),N.c(),L(N,1),N.m(i,null)):N&&(ve(),D(N,1,1,()=>{N=null}),ye())},i(h){$||(L(v),L(o.$$.fragment,h),L(l),L(u.$$.fragment,h),L(N),L(f.$$.fragment,h),L(c.$$.fragment,h),L(_.$$.fragment,h),$=!0)},o(h){D(v),D(o.$$.fragment,h),D(l),D(u.$$.fragment,h),D(N),D(f.$$.fragment,h),D(c.$$.fragment,h),D(_.$$.fragment,h),$=!1},d(h){v&&v.d(h),h&&O(e),U(o,h),h&&O(t),h&&O(i),p[s].d(),U(u),N&&N.d(),h&&O(a),U(f,h),h&&O(g),U(c,h),h&&O(b),U(_,h)}}}function en(n){let e,o;return e=new Wo({}),{c(){B(e.$$.fragment)},m(t,i){G(e,t,i),o=!0},i(t){o||(L(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){U(e,t)}}}function Ss(n){let e,o;return e=new cs({props:{$$slots:{default:[Ms]},$$scope:{ctx:n}}}),{c(){B(e.$$.fragment)},m(t,i){G(e,t,i),o=!0},i(t){o||(L(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){U(e,t)}}}function Ls(n){let e,o;return e=new bo({}),{c(){B(e.$$.fragment)},m(t,i){G(e,t,i),o=!0},i(t){o||(L(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){U(e,t)}}}function Ms(n){let e,o,t,i,s,l,r,u;return e=new fn({props:{full:!1}}),t=new gn({props:{minimal:!0}}),s=new bn({props:{minimal:!0}}),r=new _n({props:{minimal:!0}}),{c(){B(e.$$.fragment),o=T(),B(t.$$.fragment),i=T(),B(s.$$.fragment),l=T(),B(r.$$.fragment)},m(d,a){G(e,d,a),A(d,o,a),G(t,d,a),A(d,i,a),G(s,d,a),A(d,l,a),G(r,d,a),u=!0},p:se,i(d){u||(L(e.$$.fragment,d),L(t.$$.fragment,d),L(s.$$.fragment,d),L(r.$$.fragment,d),u=!0)},o(d){D(e.$$.fragment,d),D(t.$$.fragment,d),D(s.$$.fragment,d),D(r.$$.fragment,d),u=!1},d(d){U(e,d),d&&O(o),U(t,d),d&&O(i),U(s,d),d&&O(l),U(r,d)}}}function tn(n){let e,o;return e=new $o({}),{c(){B(e.$$.fragment)},m(t,i){G(e,t,i),o=!0},i(t){o||(L(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){U(e,t)}}}function Ds(n){let e,o,t,i,s,l,r,u,d,a,f,g,c,b,_,$,v,S,p,E,N,h,y,W;e=new ii({}),t=new Qo({}),s=new ks({}),r=new Pn({}),d=new $s({}),f=new ys({}),c=new Vo({}),_=new Eo({}),v=new si({}),p=new os({}),N=new Es({});let H=n[0].full&&tn();return{c(){B(e.$$.fragment),o=T(),B(t.$$.fragment),i=T(),B(s.$$.fragment),l=T(),B(r.$$.fragment),u=T(),B(d.$$.fragment),a=T(),B(f.$$.fragment),g=T(),B(c.$$.fragment),b=T(),B(_.$$.fragment),$=T(),B(v.$$.fragment),S=T(),B(p.$$.fragment),E=T(),B(N.$$.fragment),h=T(),H&&H.c(),y=Ge()},m(m,w){G(e,m,w),A(m,o,w),G(t,m,w),A(m,i,w),G(s,m,w),A(m,l,w),G(r,m,w),A(m,u,w),G(d,m,w),A(m,a,w),G(f,m,w),A(m,g,w),G(c,m,w),A(m,b,w),G(_,m,w),A(m,$,w),G(v,m,w),A(m,S,w),G(p,m,w),A(m,E,w),G(N,m,w),A(m,h,w),H&&H.m(m,w),A(m,y,w),W=!0},p(m,w){m[0].full?H?w&1&&L(H,1):(H=tn(),H.c(),L(H,1),H.m(y.parentNode,y)):H&&(ve(),D(H,1,1,()=>{H=null}),ye())},i(m){W||(L(e.$$.fragment,m),L(t.$$.fragment,m),L(s.$$.fragment,m),L(r.$$.fragment,m),L(d.$$.fragment,m),L(f.$$.fragment,m),L(c.$$.fragment,m),L(_.$$.fragment,m),L(v.$$.fragment,m),L(p.$$.fragment,m),L(N.$$.fragment,m),L(H),W=!0)},o(m){D(e.$$.fragment,m),D(t.$$.fragment,m),D(s.$$.fragment,m),D(r.$$.fragment,m),D(d.$$.fragment,m),D(f.$$.fragment,m),D(c.$$.fragment,m),D(_.$$.fragment,m),D(v.$$.fragment,m),D(p.$$.fragment,m),D(N.$$.fragment,m),D(H),W=!1},d(m){U(e,m),m&&O(o),U(t,m),m&&O(i),U(s,m),m&&O(l),U(r,m),m&&O(u),U(d,m),m&&O(a),U(f,m),m&&O(g),U(c,m),m&&O(b),U(_,m),m&&O($),U(v,m),m&&O(S),U(p,m),m&&O(E),U(N,m),m&&O(h),H&&H.d(m),m&&O(y)}}}function nn(n){let e,o,t,i,s,l;return e=new Jo({}),t=new Oo({}),s=new bs({}),{c(){B(e.$$.fragment),o=T(),B(t.$$.fragment),i=T(),B(s.$$.fragment)},m(r,u){G(e,r,u),A(r,o,u),G(t,r,u),A(r,i,u),G(s,r,u),l=!0},i(r){l||(L(e.$$.fragment,r),L(t.$$.fragment,r),L(s.$$.fragment,r),l=!0)},o(r){D(e.$$.fragment,r),D(t.$$.fragment,r),D(s.$$.fragment,r),l=!1},d(r){U(e,r),r&&O(o),U(t,r),r&&O(i),U(s,r)}}}function As(n){let e,o,t,i,s,l,r;e=new ns({});let u=n[0].ready&&Qt(n);return i=new Lo({}),l=new ps({}),{c(){B(e.$$.fragment),o=T(),u&&u.c(),t=T(),B(i.$$.fragment),s=T(),B(l.$$.fragment)},m(d,a){G(e,d,a),A(d,o,a),u&&u.m(d,a),A(d,t,a),G(i,d,a),A(d,s,a),G(l,d,a),r=!0},p(d,[a]){d[0].ready?u?(u.p(d,a),a&1&&L(u,1)):(u=Qt(d),u.c(),L(u,1),u.m(t.parentNode,t)):u&&(ve(),D(u,1,1,()=>{u=null}),ye())},i(d){r||(L(e.$$.fragment,d),L(u),L(i.$$.fragment,d),L(l.$$.fragment,d),r=!0)},o(d){D(e.$$.fragment,d),D(u),D(i.$$.fragment,d),D(l.$$.fragment,d),r=!1},d(d){U(e,d),d&&O(o),u&&u.d(d),d&&O(t),U(i,d),d&&O(s),U(l,d)}}}function Os(n,e,o){let t;return ee(n,j,i=>o(0,t=i)),[t]}class Fs extends Z{constructor(e){super(),J(this,e,Os,As,X,{})}}new Fs({target:document.getElementById("app")});
