import{d as Ln,w as Ne,S as X,i as Z,s as K,c as te,g as Y,o as we,e as U,a as E,b as ve,f as O,l as oe,n as ce,h as N,r as Je,j as W,k as se,m as V,t as Pe,p as R,q as Oe,u as _e,v as Re,x as Xe,y as G,z as q,A as Ze,B as Ke,C as Qe,D as M,E as F,F as j,G as Be,H as Ve,I as Mn,J as it,K as lt,L as ae,M as $e,N as ye,O as de}from"./svelte-fdfc2579.js";import{c as H}from"./cytoscape-716fe419.js";import{g as Dn}from"./cytoscape-grid-guide-e8f04797.js";import{e as An}from"./cytoscape-edgehandles-98723a1d.js";import{v as cn}from"./uuid-4a60fe23.js";import{J as St}from"./jszip-84e7feea.js";import{s as In}from"./cytoscape-svg-f6b36117.js";import{F as dt}from"./file-saver-daf94496.js";import{E as Fn}from"./jspdf-f4d4ca1d.js";import{U as On}from"./svg2pdf.js-0c98a8e5.js";import{d as Nn}from"./cytoscape-dagre-22838d04.js";import{f as Tn}from"./cytoscape-fcose-1883323b.js";import{c as xn}from"./cytoscape-cola-0e9b31a3.js";import{c as Pn}from"./cytoscape-context-menus-864590d1.js";import{i as Vn}from"./@jaames-324f80d4.js";import{p as Rn}from"./cytoscape-panzoom-50d4e635.js";import{u as zn}from"./cytoscape-undo-redo-8b156ffa.js";import{a as Bn}from"./cytoscape-automove-b06479d5.js";import{K as fn}from"./konva-9c11d4c7.js";import{n as Un}from"./cytoscape-node-editing-50bf11b2.js";import{e as Gn}from"./cytoscape-edge-editing-11f5d8e5.js";import{D as Ct}from"./dexie-5509e3b5.js";import"./core-js-93797867.js";import"./functional-red-black-tree-9a31655a.js";import"./lodash.memoize-aae0dfad.js";import"./lodash.throttle-085a2e14.js";import"./dagre-e7a63eac.js";import"./graphlib-04d9d874.js";import"./lodash-399c0d8f.js";import"./@babel-f352b073.js";import"./fflate-7e11f8f1.js";import"./cssesc-ae0dab9a.js";import"./font-family-papandreou-e99f1152.js";import"./svgpath-0da963bf.js";import"./specificity-c7128631.js";import"./cose-base-abb6f3d0.js";import"./layout-base-8b616591.js";import"./webcola-fa77233e.js";import"./jquery-fb849a2e.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function i(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(o){if(o.ep)return;o.ep=!0;const s=i(o);fetch(o.href,s)}})();const Q=Ne(null),_t=Ne(null),De=Ne(null);let ne=Ne({meanStruc:"default",intOvFree:!0,intLvFree:!1,estimator:"default",se:"default",missing:"listwise",n_boot:1e3,fix_first:!0,fix_single:!0,auto_var:!0,auto_cov_lv_x:!0,auto_cov_y:!0,fixed_x:!0,mode:"user model","auto.th":!0,"auto.delta":!0}),ue=Ne({gridShow:!1,gridSpace:26,gridColor:"#dedede",gridWidth:1,gridMovePan:!1,gridSnap:!1,gridAlign:!0,gridResize:!1,showLav:!0,showVar:!0,showMean:!0,std:!1,view:"est",ci:.95,number_digits:2}),Ie=Ne({lastFitModel:null,lastFitLavFit:null,lastFitData:null}),B=Ne({fitting:!1,loadingMode:!1,runCounter:0,modelEmpty:!0,dataAvail:!1,columnNames:null,loadedFileName:null,ids:null,dragged:null,draggedName:null,full:!0,ready:!1,parsedModel:!1,meansModelled:null,buttonDown:!1,showServerErrors:!0,everEdge:!1,drawing:"none",undoEmpty:!0,redoEmpty:!0,server:!1,shinyapps:!1}),mt=Ne(0);Ln(B,n=>n.columnNames);const mn=Ne({type:"info",message:"",key:0});function ge(n,e){mn.update(i=>({type:n,message:e,key:i.key+1}))}ge("info","Greetings. lavaangui is BETA software. Please report any bugs at https://github.com/karchjd/lavaangui/issues.");function qn(n,e,i){let t;te(n,ue,l=>i(1,t=l));let o=!1;Dn(H);let s=Y(Q);var r={snapToGridOnRelease:!1,drawGrid:!1,snapToAlignmentLocationDuringDrag:!1,distributionGuidelines:!0,geometricGuideline:!0,initPosAlignment:!1,centerToEdgeAlignment:!1,resize:!1,parentPadding:!1,guidelinesStackOrder:4,guidelinesTolerance:2,guidelinesStyle:{strokeStyle:"#8b7d6b",geometricGuidelineRange:2e3,range:100,minDistRange:10,distGuidelineOffset:10,horizontalDistColor:"#ff0000",verticalDistColor:"#00ff00",initPosAlignmentColor:"#0000ff",lineDash:[0,0],horizontalDistLine:[0,0],verticalDistLine:[0,0],initPosAlignmentLine:[0,0]},parentSpacing:-1};return we(()=>{s.gridGuide(r),i(0,o=!0)}),n.$$.update=()=>{n.$$.dirty&3&&o&&t.gridShow!==void 0&&Y(Q).gridGuide({drawGrid:t.gridShow}),n.$$.dirty&3&&o&&t.gridSpace!==void 0&&Y(Q).gridGuide({gridSpacing:t.gridSpace}),n.$$.dirty&3&&o&&t.gridWidth!==void 0&&Y(Q).gridGuide({lineWidth:t.gridWidth}),n.$$.dirty&3&&o&&t.gridMovePan!==void 0&&Y(Q).gridGuide({panGrid:t.gridMovePan}),n.$$.dirty&3&&o&&t.gridSnap!==void 0&&Y(Q).gridGuide({snapToGridDuringDrag:t.gridSnap}),n.$$.dirty&3&&o&&t.gridAlign!==void 0&&Y(Q).gridGuide({snapToAlignmentLocationOnRelease:t.gridAlign}),n.$$.dirty&3&&o&&t.gridResize!==void 0&&Y(Q).gridGuide({resize:t.gridResize})},[o,t]}class jn extends X{constructor(e){super(),Z(this,e,qn,null,K,{})}}const le="observed-variable",me="latent-variable",Le="constant",Ee="free",He="nolabel",he="fromUser",ze="label",Te="byLav",Se="fixed",Ae="forcefree",Me="directed",Fe="undirected",st="loop",Ue="linked",xe="fromLav",Lt="hasEst",ut="validated",Ye="continous",We="ordered",Hn="hasEstFixed",je=80,Wn=80,Yn=[{selector:"element",style:{"font-size":function(n){return n.data("font-size")||14}}},{selector:"node",style:{width:je.toString(),height:"80","background-color":function(n){return n.data("background-color")||"white"},"border-color":function(n){return n.data("border-color")||"grey"},"border-width":function(n){return n.data("border-width")||"2px"},label:"data(label)","text-valign":"center","text-halign":"center","text-wrap":"ellipsis","text-max-width":function(n){return n.width()}}},{selector:`node.${le}`,style:{shape:"rectangle"}},{selector:`node.${le}.${We}`,style:{"border-style":"double","border-width":5}},{selector:`node.${me}`,style:{shape:"ellipse","border-color":"black"}},{selector:`node.${Le}`,style:{shape:"triangle",label:"1","text-valign":"center","text-margin-y":"10px","border-color":"black"}},{selector:`node.${Ue}`,style:{"border-color":"black"}},{selector:"edge",style:{width:function(n){return n.data("width")||3},"line-color":function(n){return n.data("line-color")||"#000"},"target-arrow-color":function(n){return n.data("target-arrow-color")||"#000"},"source-arrow-color":function(n){return n.data("source-arrow-color")||"#000"},"target-arrow-shape":"triangle","curve-style":"bezier","text-valign":"center","text-halign":"center","text-wrap":"wrap","text-max-width":Wn,"z-index":10,color:"#000","text-outline-color":"#fff","text-outline-width":"2px","text-background-color":"#fff","text-background-opacity":1,"text-background-padding":"4px"}},{selector:"edge.loop",style:{"curve-style":"bezier","source-arrow-shape":"triangle","loop-direction":function(n){return n.data("loop-direction")||0},"loop-sweep":.8,"control-point-step-size":n=>{const e=n.source(),i=parseInt(e.style("height")),t=parseInt(e.style("width"));let o;return n.style("loop-direction")=="0deg"||n.style("loop-direction")=="180deg"?o=i:n.style("loop-direction")=="90deg"||n.style("loop-direction")=="270deg"?o=t:o=Math.max(t,i),o/80*60}}},{selector:`edge.${Fe}`,style:{"curve-style":"unbundled-bezier","control-point-distances":function(n){return n.data("control-point-distances")||[-100]},"control-point-weights":[.5],"source-arrow-shape":"triangle"}},{selector:`edge.${ze}, edge.${ze}`,style:{label:function(n){return n.data("label")}}},{selector:`edge.${Se}.${ze}`,style:{label:function(n){return n.data("label")+"@"+n.data("value")}}},{selector:`edge.${Se}.${He}`,style:{label:function(n){return"@"+n.data("value")}}},{selector:`edge.${Ae}`,style:{"line-color":"blue"}},{selector:`edge.${xe}, edge.${Te}`,style:{"line-style":"dashed"}},{selector:"edge.hidden, node.hidden",style:{display:"none"}},{selector:"edge:selected",style:{"underlay-opacity":.5,"underlay-color":"#928ff8"}},{selector:"node:selected",style:{"underlay-color":"#928ff8","underlay-opacity":.5}}],Jn={autoungrabify:!1,autolock:!1,style:Yn,minZoom:.02,maxZoom:5},Xn={preview:!1,hoverDelay:150,handleNodes:"node",snap:!0,handleColor:"#ff0000",handleSize:10,canConnect:function(n,e){return!cy.edges(function(t){if(!t.isUserAdded())return!1;const o=t.source().id()==n.id()&&t.target().id()==e.id(),s=t.source().id()==e.id()&&t.target().id()==n.id();return o||s}).length}};function Zn(n){H.use(An);var e=H(Jn);return e.boxSelectionEnabled(!0),Q.set(e),_t.set(e.edgehandles(Xn)),[]}class Kn extends X{constructor(e){super(),Z(this,e,Zn,null,K,{})}}function ie(n){var e=Y(B);if(!e.full)return;let i=Y(Q);const t=i.edges();for(var o=0;o<t.length;o++)t[o].removeEstimates();if(i.getUserEdges().length==0){i.getLavaanNodes().remove(),i.getLavaanEdges().remove(),Shiny.setInputValue("show_help",Math.random());return}if(!e.dataAvail&&n=="estimate"){ge("danger","Model not send to lavaan because no data available");return}let s=gn(n);Shiny.setInputValue("run-fromJavascript",JSON.stringify(s)),Shiny.setInputValue("runCounter",Math.random()),n==="user model"&&i.getLavaanModifiedEdges().forEach(r=>{r.freePara()})}function Qn(n,e){for(let i=0;i<n.length;i++)if(n[i]===e)return!0;return!1}function nt(n,e){let i;n==null?i="1":i=n.getLabel();let t=!1,o;if(e.isFixed()&&!e.isModifiedLavaan()?(o=e.getValue()+"*"+i,t=!0):e.isForceFree()&&(o="NA*"+i,t=!0),e.hasLabel()){const s=e.getLabel();t?o+=" + "+s+"*"+i:(t=!0,o=s+"*"+i)}else t||(o=i);return o}class eo{constructor(e,i,t=null,o=null,s=null,r=null){this.mode=e,Object.assign(this,{model:{options:t,syntax:o,R_script:i,ordered_labels:r},forceUpdate:Math.random(),cache:s})}}function Mt(n,e="target"){let i="";const t=Math.max(...n.map(l=>l[e]().position().x))-Math.min(...n.map(l=>l[e]().position().x)),o=Math.max(...n.map(l=>l[e]().position().y))-Math.min(...n.map(l=>l[e]().position().y)),s=t>=o?"x":"y",r=n.map((l,d)=>({index:d,value:l.target().position()[s]})).sort((l,d)=>l.value-d.value).map(l=>l.index);for(let l=0;l<n.length;l++){const d=n[r[l]][e]();l>0&&(i+=" + "),i+=nt(d,n[r[l]])}return i}function gn(n){let e=Y(Q),i=Y(B),t="",o="";o+=`library(lavaan)
`,i.dataAvail?o+=`data <- read.csv("${i.loadedFileName}")
`:o+=`#make sure your data is loaded into the 'data' variable
`;let s=e.getLatentNodes();s=s.nodes(function(v){const y=v.connectedEdges(function(w){return w.isDirected()&&w.source().id()==v.id()});return y.length>0&&y.every(w=>w.target().isLatent())});let r=e.getLatentNodes();r=r.nodes(function(v){const y=v.connectedEdges(function(T){return T.isDirected()&&T.target().id()==v.id()}),w=v.connectedEdges(function(T){return T.isDirected()});return w.length>0&&y.length==w.length});let l=e.getLatentNodes(),d=!1;for(let v=0;v<l.length;v++){const y=l[v],w=y.connectedEdges(function(T){return T.isDirected()&&T.source().id()==y.id()&&(T.target().isObserved()||s.some(S=>S.id()===y.id()))});w.length>0&&(d||(t+=`# measurement model
`,d=!0),t+=" "+y.getLabel()+" =~ "+Mt(w,"target")+`
`)}function u(v){return v.isDirected()&&!v.source().isConstant()&&!(v.source().isLatent()&&v.target().isObserved())&&!(v.source().isLatent()&&s.some(w=>w.id()===v.source().id())&&v.target().isLatent())&&(v.isUserAdded()||v.isModifiedLavaan())&&!r.some(w=>w.id()===v.target().id())}let a=e.edges(u),m=[];for(let v=0;v<a.length;v++)Qn(m,a[v].target())||m.push(a[v].target());if(m.length>0){t+=`
# regressions`;for(let v=0;v<m.length;v++){const y=m[v],w=y.connectedEdges(T=>u(T)&&T.target().same(y));if(w.length>0){let T="";for(var g=0;g<w.length;g++){var c=w[g].source();g>0&&(T+=" + "),T+=nt(c,w[g])}t+=`
 `+y.getLabel()+" ~ "+T}}}let f=e.edges(function(v){return(v.isUndirected()||v.myIsLoop())&&(v.isUserAdded()||v.isModifiedLavaan())});if(f.length>0){t+=`

# (residual) (co)variances`;for(let v=0;v<f.length;v++){let y=f[v].source().data("label");t+=`
 `+y+" ~~ "+nt(f[v].target(),f[v])}}const $=e.nodes(function(v){return v.isConstant()});for(let v=0;v<$.length;v++){const w=$[v].connectedEdges(function(T){return T.isUserAdded()});if(w.length>0){t+=`
# intercepts
`;for(var g=0;g<w.length;g++){var c=w[g].target();t+=c.getLabel()+" ~ "+nt(void 0,w[g])+`
`}}}d=!1;for(let v=0;v<r.length;v++){const y=r[v],w=y.connectedEdges(function(T){return T.isDirected()&&T.target().id()==y.id()});w.length>0&&(d||(t+=`

 #  formative factors
`,d=!0),t+=" "+y.getLabel()+" <~ "+Mt(w,"source")+`
`)}t=`'
`+t+`'

`;function h(v,y=60){return v.split(`
`).map(w=>{if(w.includes("+")&&w.length>y){const T=w.split(" + ");let S=[],p=T[0];const x=w.match(/^\s*/)[0],A=p.indexOf("~")+1;for(let J=1;J<T.length;J++)p.length+T[J].length+3>y?(S.push(p+" + "),p=x+" ".repeat(A)+T[J]):p+=" + "+T[J];return S.push(p),S.join(`
`)}return w}).join(`
`)}t=h(t);const C=e.nodes(function(v){return v.isOrdered()}).map(v=>v.getLabel()),_=to(C);return o+="model <-"+t,o+="result <- lavaan(model, data, "+_,new eo(n,o,_,t=t,Y(Ie),C)}function to(n){const e=Y(ne),i=ke(e.meanStruc),t=ke(e.intOvFree),o=ke(e.intLvFree);let s=`meanstructure = ${i},
		 int.ov.free = ${t}, int.lv.free = ${o},
		 estimator = ${ct(e.estimator)}, se = ${ct(e.se)},
		 missing = ${ct(e.missing)}, auto.fix.first = ${ke(e.fix_first)},
		 auto.fix.single = ${ke(e.fix_single)}, auto.var = ${ke(e.auto_var)},
		 auto.cov.lv.x = ${ke(e.auto_cov_lv_x)}, auto.cov.y = ${ke(e.auto_cov_y)},
  		 fixed.x = ${ke(e.fixed_x)}, auto.th = ${ke(e["auto.th"])}, 
  		 auto.delta = ${ke(e["auto.delta"])}`;if(e.se=="boot"){const r=`, bootstrap = ${e.n_boot})`;s=s+r}else s=s+")";return n.length>0&&(s=`ordered = ${'c("'+n.join('", "')+'")'}, 
    		 ${s}`),s}function ct(n){return'"'+n+'"'}function ke(n){if(n==!0||n=="true")return"TRUE";if(n==!1||n=="false")return"FALSE";if(n=="default")return'"default"';throw new Error("Should not happen")}let pn,hn;function bn(){pn=1,hn=1}bn();function no(n){return new RegExp("^[a-zA-Z\\._][a-zA-Z0-9\\._]*(?<!\\.)$").test(n)}function oo(n){return no(n)?!0:(bootbox.alert(`The variable <b>${n}</b> was not added to the model because <b>${n}</b> is not a valid lavaan variable name. Please use only letters, numbers, underscores, and dots. The name must start with a letter or underscore and cannot end with a dot. You can use the <b>Show Data</b> menu to rename <b>${n}</b>.`),!1)}function be(n,e,i=!0,t=null,o=!1){let s=Y(Q),r=cn(),l;if(t!==null){if(!oo(t))return;if(s.nodes().find(u=>u.data().label===t)){ge("danger","Node with the same label already exists.");return}l=t}else n==le?l="x"+pn++:n==me?l="f"+hn++:l=void 0,s.nodes().find(u=>u.data().label===l)&&(l=l+".1");let d=Y(De);return e?d.do("add",{group:"nodes",data:{id:r,label:l},classes:[n,Ye],renderedPosition:e}):(e={x:Math.random()*400+50,y:Math.random()*400+50},s.add({group:"nodes",data:{id:r,label:l},classes:[n,Ye],renderedPosition:e})),i&&ie(Y(ne).mode),r}function qe(n,e,i=!0,t=!1,o=null,s=!0){let r=Y(Q),l=cn();return r.add({group:"edges",data:{id:l,source:n,target:e,value:t?o:void 0},classes:`${i?Me:Fe} ${s?he:xe} ${t?Se:Ee} ${He}`})}function pe(n,e=!1){const i=uo(n);if(!i&&!e)return null;const t=so(n),o=ro(t),s=io(ao(o),o);return i&&i.data("loop-direction",`${s}deg`),s}function io(n,e){const i=[0,180,90,270],t=35,o=i.sort((l,d)=>{const u=Math.min(Math.abs(l-n),360-Math.abs(l-n)),a=Math.min(Math.abs(d-n),360-Math.abs(d-n));return u-a}),r=[[0,180],[90,270]].flatMap(l=>o.filter(d=>l.includes(d)));for(const l of r)if(!e.some(u=>{const a=Math.abs(l-u);return Math.min(a,360-a)<=t}))return l;return n}function so(n){const e=cy.getElementById(n);if(e.length===0){console.error(`Node with ID ${n} does not exist.`);return}let i=[];return e.connectedEdges(t=>t.style("display")!=="none").forEach(t=>{const o=t.source(),s=t.target();let r;(o.id()!==e.id()||s.id()!==e.id())&&(o.id()===e.id()?r=Dt(t.sourceEndpoint(),e.position()):r=Dt(t.targetEndpoint(),e.position()),i.push(r))}),i}function Dt(n,e){return Object.keys(n).reduce((i,t)=>{if(e.hasOwnProperty(t))i[t]=n[t]-e[t];else throw new Error(`Key ${t} not found in second object`);return i},{})}function ro(n){let e=[];return n.forEach(i=>{e.push(lo(i))}),e}function lo(n){let e=Math.atan2(n.y,n.x)*180/Math.PI;return e=(e+90)%360,e}function ao(n){let e=-1,i=null;for(let t=0;t<=360;t++){let o=1/0;for(let s=0;s<n.length;s++){let r=Math.abs(n[s]-t);r=Math.min(r,360-r),o=Math.min(o,r)}o>e&&(e=o,i=t)}return i}function uo(n,e){var i=cy.getElementById(n),t=null;return i.connectedEdges().forEach(function(o){var s=o.source(),r=o.target();if(s.id()===n&&r.id()===n){t=o;return}}),t!==null&&i.connectedEdges().length>1&&!t.hasClass("fixDeg")?t:null}function co(n){let e,i,t;return{c(){e=U("div"),E(e,"id","cy"),E(e,"class","graph svelte-11pj9ut"),ve(e,"flex-basis",n[1].full?"70%":"100%")},m(o,s){O(o,e,s),n[6](e),i||(t=[oe(e,"mouseover",n[2]),oe(e,"mouseout",n[3]),oe(e,"mousemove",n[4]),oe(e,"drop",n[5]),oe(e,"dragover",fo)],i=!0)},p(o,[s]){s&2&&ve(e,"flex-basis",o[1].full?"70%":"100%")},i:ce,o:ce,d(o){o&&N(e),n[6](null),i=!1,Je(t)}}}function fo(n){n.preventDefault()}function mo(n,e){let i=Math.atan2(n,-e)*(180/Math.PI);return i<0&&(i+=360),i}function go(n,e,i){let t,o,s;te(n,De,y=>i(12,t=y)),te(n,B,y=>i(1,o=y)),te(n,ne,y=>i(13,s=y));let r=Y(Q),l=Y(_t),d,u={x:0,y:0};we(()=>{r.mount(d)});function a(y){if(W(B,o.buttonDown=!0,o),(y.key==="Alt"||y.key===" "||y.key.toLowerCase()==="x")&&(l.enableDrawMode(),y.key==="Alt"?W(B,o.drawing="undirected",o):W(B,o.drawing="directed",o)),y.key==="Backspace"){let w=r.$(":selected");w.length>0&&(t.do("remove",w),ie(s.mode)),W(B,o.buttonDown=!1,o)}if(["l","o","c"].includes(y.key.toLowerCase())){let w;switch(y.key.toLowerCase()){case"l":w=me;break;case"o":w=le;break;case"c":w=Le;break}be(w,{...u}),W(B,o.buttonDown=!1,o)}W(B,o.buttonDown=!1,o)}function m(){r.autoungrabify(!1),r.nodes().grabify()}function g(y){(y.key==="Alt"||y.key===" "||y.key.toLowerCase()==="x")&&(l.disableDrawMode(),W(B,o.drawing="none",o),m())}function c(){document.addEventListener("keydown",a),document.addEventListener("keyup",g)}function f(){document.removeEventListener("keydown",a,!1),document.removeEventListener("keyup",g,!1)}function $(y){u.x=y.offsetX,u.y=y.offsetY}r.on("ehcomplete",(y,w,T,S)=>{const p=S,x=w.id(),A=T.id();if(p.remove(),p.init(),x!==A?(o.drawing==="undirected"?p.setUndirected():p.setDirected(),pe(x),pe(A)):(p.makeLoop(),pe(A)),!((p.isUndirected()||p.myIsLoop())&&(w.isConstant()||T.isConstant()))&&!(p.isDirected()&&T.isConstant())&&!(p.isDirected()&&w.isConstant()&&T.connectedEdges(I=>I.isUserAdded()&&I.source().isConstant()).length>1)){if(p.myIsLoop()&&w.isOrdered()){ge("error","User-defined variance arrow is not allowed for ordered variables.");return}p.isDirected()&&w.isConstant()?p.makeMeanEdge():p.makeOtherEdge(),t.do("add",p),ie(s.mode)}});function h(y){let w=0;const T=100,S=T*2;y.preventDefault();let p={x:y.offsetX,y:y.offsetY};function x(I,k){let D;if(o.dataAvail){const fe=r.getObservedNodes().map(P=>P.data().label);D=o.columnNames.filter(P=>!fe.includes(P)).map(P=>({text:P,value:P}))}else D=Array.from({length:100},(fe,ee)=>`var${ee+1}`);const z={title:I,inputType:"select",multiple:!0,value:"",inputOptions:D,callback:k};bootbox.prompt(z)}function A(){ge("danger","Either no variable selected or at least one selected variable already is in the model.")}function J(I){return I&&!r.nodes().some(k=>k.data().label===I)}if(o.dragged=="observed-with-name")be(le,p,!0,o.draggedName,!0);else if(o.dragged=="multiple")x("Select Variables",function(I){if(J(I)){const k=r.zoom();I.forEach(D=>{be(le,{x:p.x+w*k,y:p.y},!0,D,!0),w+=T})}else A()});else if(o.dragged=="factor")x("Select Variables",function(I){if(J(I)){const k=r.zoom(),D=be(me,{x:p.x+T*k*I.length/2-je/2*k,y:p.y});I.forEach(z=>{const fe=be(le,{x:p.x+w*k,y:p.y+k*S},!0,z,!0);w+=T,qe(D,fe)}),W(ne,s.fix_first=!0,s),W(ne,s.fix_single=!0,s),W(ne,s.auto_var=!0,s),W(ne,s.intOvFree=!0,s),W(ne,s.intLvFree=!1,s)}else A()});else if(o.dragged=="growth"){let I=0;x("Select Time Points",function(k){if(J(k)){const D=r.zoom(),z=be(Le,{x:p.x+T*D*k.length/2-je/2*D,y:p.y},!0),fe=be(me,{x:p.x+je/2*D,y:p.y+1*S*D},!0,"Intercept"),ee=be(me,{x:p.x+T*D*(k.length-1)-je/2*D,y:p.y+1*S*D},!0,"Slope");qe(z,fe,!0,!1),qe(z,ee,!0,!1);let P=1;k.forEach(re=>{const Ge=be(le,{x:p.x+I*D,y:p.y+2*S*D},!0,re,!0);I+=T,qe(fe,Ge,!0,!0,1),P!=1&&qe(ee,Ge,!0,!0,P-1),P+=1}),W(ne,s.auto_var=!0,s),W(ne,s.intOvFree=!1,s),W(ne,s.intLvFree=!0,s)}})}else be(o.dragged,p);(o.dragged=="multiple"||o.dragged=="factor"||o.dragged=="growth")&&ie(s.mode),W(B,o.dragged=null,o)}let b=!1,C=null,_;r.on("mousedown","edge.loop",function(y){b=!0,C=y.target,C.unpanify(),_=C.style("loop-direction")});let L;r.on("mousemove",function(y){if(!b||!C)return;let T=C.source().renderedPosition();L=mo(u.x-T.x,u.y-T.y);const S=5,p=[0,90,180,270];for(let x=0;x<p.length;x++)if(Math.abs(L-p[x])<=S){L=p[x];break}C.data("loop-direction",`${L}deg`)}),window.addEventListener("mouseup",function(){if(b){if(b=!1,L===void 0||_===`${L}deg`)return;C.data("loop-direction",_),C.addClass("fixDeg"),t.do("style",{eles:C,style:{"loop-direction":`${L}deg`}}),C=null,L=void 0}});function v(y){se[y?"unshift":"push"](()=>{d=y,i(0,d)})}return[d,o,c,f,$,h,v]}class po extends X{constructor(e){super(),Z(this,e,go,co,K,{})}}function _n(n){const e=n.source().position(),i=n.target().position(),t={x:i.x-e.x,y:i.y-e.y},o=Math.sqrt(t.x**2+t.y**2);return{normalizedEdgeVector:{x:t.x/o,y:t.y/o},edgeMidpoint:n.midpoint(),edgeSourcePos:e,edgeTargetPos:i}}function ho(n,e){const{normalizedEdgeVector:i,edgeMidpoint:t,edgeSourcePos:o,edgeTargetPos:s}=_n(n),r=(s.y-t.y)/i.y-70,l=(o.y-t.y)/i.y+70;let d=Math.min(r,e);return d=Math.max(l,d),{newMarginX:d*i.x,newMarginY:d*i.y}}function At(n,e){const{newMarginX:i,newMarginY:t}=ho(n,e);n.style({"text-margin-x":i,"text-margin-y":t})}function bo(n,e,i){let t,o;te(n,B,d=>i(2,t=d)),te(n,ne,d=>i(3,o=d));let s=Y(Q);s.on("add","node",function(d){const u=d.target;if(u.isObserved()){let a=t.columnNames;a&&a.includes(u.getLabel())&&(u.link(),ge("success",`Variable ${u.getLabel()} linked to data`))}t.modelEmpty&&s.edges().length>0&&W(B,t.modelEmpty=!1,t)}),s.on("remove","node",function(d){s.getUserEdges().length==0&&(W(B,t.modelEmpty=!0,t),Shiny.setInputValue("show_help",Math.random())),t.loadingMode||ie(o.mode)}),s.on("remove","edge",function(d){pe(d.target.source().id()),pe(d.target.target().id())}),s.on("add","edge",function(d){W(B,t.everEdge=!0,t),t.modelEmpty&&s.edges().length>0&&W(B,t.modelEmpty=!1,t),pe(d.target.source().id()),pe(d.target.target().id())}),s.on("position","node",function(d){const u=d.target,a=u.neighborhood().nodes(),m=u.connectedEdges(g=>g.isDirected());a.forEach(g=>{pe(g.id())}),m.forEach(g=>{const c=g.data("displacement");c&&At(g,c)})});let r=null,l=!1;return s.on("mousedown",function(d){const u=f=>parseFloat(f.replace("px","")),a=d.position;let m=null,g=1/0;const c=30;s.edges().forEach(function(f){if(f.isDirected()&&!f.hasClass("edgecontrolediting-hascontrolpoints")){const $=u(f.style("text-margin-x")),h=u(f.style("text-margin-y")),b=f.midpoint(),C={x:b.x+$,y:b.y+h},_=Math.abs(a.x-C.x),L=a.y-C.y,v=Math.sqrt(_*_+L*L);v<g&&v<c&&(m=f,g=v)}}),m!==null&&!m.hasClass(".edgecontrolediting-hascontrolpoints")&&(r=m,l=!0,d.preventDefault(),m.unpanify())}),s.on("class","edge",function(d){const u=d.target;u.hasClass("edgecontrolediting-hascontrolpoints")&&(u.style({"text-margin-x":0,"text-margin-y":0}),u.data("displacement",null),r&&u.id()===r.id()&&(r=null,l=!1))}),s.on("mousemove",function(d){if(l&&r){const{normalizedEdgeVector:u,edgeMidpoint:a}=_n(r),m=d.position,g={x:m.x-a.x,y:m.y-a.y};let c=g.x*u.x+g.y*u.y;r.data("displacement",c),At(r,c)}}),s.on("mouseup",function(d){l=!1,r=null}),[]}class _o extends X{constructor(e){super(),Z(this,e,bo,null,K,{})}}function It(n,e,i){const t=n.slice();return t[21]=e[i],t}function Ft(n){let e,i,t,o,s,r,l,d,u,a,m,g,c,f,$=n[1],h=[];for(let b=0;b<$.length;b+=1)h[b]=Ot(It(n,$,b));return{c(){e=U("div"),i=V(),t=U("div"),o=U("button"),o.textContent="Multiple Variables",s=V(),r=U("button"),r.textContent="Factor",l=V(),d=U("button"),d.textContent="Growth",u=V(),a=U("div"),m=V(),g=U("ul");for(let b=0;b<h.length;b+=1)h[b].c();E(e,"class","vertical-bar svelte-r00s5r"),E(o,"class","draggable-item svelte-r00s5r"),E(o,"draggable","true"),E(r,"class","draggable-item svelte-r00s5r"),E(r,"draggable","true"),E(d,"class","draggable-item svelte-r00s5r"),E(d,"draggable","true"),E(t,"id","model-buttons"),E(t,"class","svelte-r00s5r"),E(a,"class","vertical-bar svelte-r00s5r"),E(g,"class","draggable-list svelte-r00s5r")},m(b,C){O(b,e,C),O(b,i,C),O(b,t,C),R(t,o),R(t,s),R(t,r),R(t,l),R(t,d),O(b,u,C),O(b,a,C),O(b,m,C),O(b,g,C);for(let _=0;_<h.length;_+=1)h[_]&&h[_].m(g,null);c||(f=[oe(o,"dragstart",n[14]),oe(r,"dragstart",n[15]),oe(d,"dragstart",n[16])],c=!0)},p(b,C){if(C&10){$=b[1];let _;for(_=0;_<$.length;_+=1){const L=It(b,$,_);h[_]?h[_].p(L,C):(h[_]=Ot(L),h[_].c(),h[_].m(g,null))}for(;_<h.length;_+=1)h[_].d(1);h.length=$.length}},d(b){b&&N(e),b&&N(i),b&&N(t),b&&N(u),b&&N(a),b&&N(m),b&&N(g),Oe(h,b),c=!1,Je(f)}}}function Ot(n){let e,i=n[21]+"",t,o,s,r;function l(...d){return n[17](n[21],...d)}return{c(){e=U("li"),t=_e(i),o=V(),E(e,"draggable","true"),E(e,"class","draggable-item svelte-r00s5r")},m(d,u){O(d,e,u),R(e,t),R(e,o),s||(r=oe(e,"dragstart",l),s=!0)},p(d,u){n=d,u&2&&i!==(i=n[21]+"")&&Re(t,i)},d(d){d&&N(e),s=!1,r()}}}function vo(n){let e,i,t,o,s,r,l,d,u,a,m,g,c,f,$,h=n[0].dataAvail&&Ft(n);return{c(){e=U("div"),i=U("div"),t=U("div"),o=U("button"),s=V(),r=U("button"),l=V(),d=U("div"),u=V(),a=U("div"),m=V(),g=U("div"),c=V(),h&&h.c(),E(o,"class","arrow-btn direct-arrow svelte-r00s5r"),E(o,"title","Draw Directed Arrows"),Pe(o,"active",n[0].drawing==="directed"),E(r,"class","arrow-btn undirected-arrow svelte-r00s5r"),E(r,"title","Draw Undirected Arrows"),Pe(r,"active",n[0].drawing==="undirected"),E(d,"role","button"),E(d,"id","add-manifest-variable"),E(d,"title","Create Observed Variable"),E(d,"draggable","true"),E(d,"class","variable-button svelte-r00s5r"),E(d,"data-button-type",le),E(d,"tabindex","0"),E(a,"role","button"),E(a,"tabindex","0"),E(a,"id","add-latent-variable"),E(a,"title","Create Latent Variable"),E(a,"draggable","true"),E(a,"class","variable-button svelte-r00s5r"),E(a,"data-button-type",me),E(g,"role","button"),E(g,"tabindex","0"),E(g,"id","add-constant-variable"),E(g,"class","variable-button svelte-r00s5r"),E(g,"title","Create Constant Variable"),E(g,"data-button-type","const"),E(g,"draggable","true"),E(t,"id","buttons"),E(t,"class","svelte-r00s5r"),E(i,"id","buttonCont"),E(i,"class","svelte-r00s5r"),E(e,"class","toolbox svelte-r00s5r")},m(b,C){O(b,e,C),R(e,i),R(i,t),R(t,o),R(t,s),R(t,r),R(t,l),R(t,d),R(t,u),R(t,a),R(t,m),R(t,g),R(e,c),h&&h.m(e,null),f||($=[oe(o,"click",n[9]),oe(r,"click",n[10]),oe(d,"dragstart",n[11]),oe(a,"dragstart",n[12]),oe(g,"dragstart",n[13])],f=!0)},p(b,[C]){C&1&&Pe(o,"active",b[0].drawing==="directed"),C&1&&Pe(r,"active",b[0].drawing==="undirected"),b[0].dataAvail?h?h.p(b,C):(h=Ft(b),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},i:ce,o:ce,d(b){b&&N(e),h&&h.d(),f=!1,Je($)}}}function $o(n,e,i){let t,o;te(n,B,y=>i(0,t=y)),te(n,Q,y=>i(8,o=y)),B.subscribe(y=>{});function s(y){W(B,t.dragged=y,t)}function r(y,w){W(B,t.dragged="observed-with-name",t),W(B,t.draggedName=w,t)}function l(y){W(B,t.dragged="multiple",t)}function d(y){W(B,t.dragged="factor",t)}function u(y){W(B,t.dragged="growth",t)}let a,m=Y(_t);function g(y){t.drawing===y?(m.disableDrawMode(),W(B,t.drawing="none",t)):(m.enableDrawMode(),W(B,t.drawing=y,t))}const c=()=>{g("directed")},f=()=>{g("undirected")},$=()=>{event.dataTransfer.setData("text/plain","node"),s(le)},h=()=>{s(me)},b=()=>{s(Le)},C=y=>l(),_=y=>d(),L=y=>u(),v=(y,w)=>r(w,y);return n.$$.update=()=>{if(n.$$.dirty&257&&typeof o.getObservedNodes=="function"&&t.columnNames!==null){const y=o.getObservedNodes().map(w=>w.data("label"));i(1,a=t.columnNames.filter(w=>!y.includes(w)))}},[t,a,s,r,l,d,u,g,o,c,f,$,h,b,C,_,L,v]}class yo extends X{constructor(e){super(),Z(this,e,$o,vo,K,{})}}function wo(n){let e,i,t,o,s;const r=n[1].default,l=Xe(r,n,n[0],null);return o=new yo({}),{c(){e=U("nav"),i=U("ul"),l&&l.c(),t=V(),G(o.$$.fragment),E(i,"class","nav navbar-nav navbar-left"),E(e,"class","navbar navbar-default navbar-static-top navbar-left svelte-12n5yi9")},m(d,u){O(d,e,u),R(e,i),l&&l.m(i,null),R(e,t),q(o,e,null),s=!0},p(d,[u]){l&&l.p&&(!s||u&1)&&Ze(l,r,d,d[0],s?Qe(r,d[0],u,null):Ke(d[0]),null)},i(d){s||(M(l,d),M(o.$$.fragment,d),s=!0)},o(d){F(l,d),F(o.$$.fragment,d),s=!1},d(d){d&&N(e),l&&l.d(d),j(o)}}}function ko(n,e,i){let{$$slots:t={},$$scope:o}=e;return n.$$set=s=>{"$$scope"in s&&i(0,o=s.$$scope)},[o,t]}class Eo extends X{constructor(e){super(),Z(this,e,ko,wo,K,{})}}function So(n){let e,i,t,o,s,r,l;const d=n[3].default,u=Xe(d,n,n[2],null);return{c(){e=U("li"),i=U("a"),t=_e(n[0]),o=U("span"),s=V(),r=U("ul"),u&&u.c(),E(o,"class","caret"),E(i,"href","#"),E(i,"class","dropdown-toggle svelte-1oq006n"),E(i,"data-toggle","dropdown"),E(i,"role","button"),E(i,"aria-haspopup","true"),E(i,"aria-expanded","false"),E(i,"draggable","false"),Pe(i,"minimal",n[1]),E(r,"class","dropdown-menu"),E(e,"class","dropdown")},m(a,m){O(a,e,m),R(e,i),R(i,t),R(i,o),R(e,s),R(e,r),u&&u.m(r,null),l=!0},p(a,[m]){(!l||m&1)&&Re(t,a[0]),(!l||m&2)&&Pe(i,"minimal",a[1]),u&&u.p&&(!l||m&4)&&Ze(u,d,a,a[2],l?Qe(d,a[2],m,null):Ke(a[2]),null)},i(a){l||(M(u,a),l=!0)},o(a){F(u,a),l=!1},d(a){a&&N(e),u&&u.d(a)}}}function Co(n,e,i){let{$$slots:t={},$$scope:o}=e,{name:s}=e,{minimal:r=!1}=e;return n.$$set=l=>{"name"in l&&i(0,s=l.name),"minimal"in l&&i(1,r=l.minimal),"$$scope"in l&&i(2,o=l.$$scope)},[s,r,o,t]}class et extends X{constructor(e){super(),Z(this,e,Co,So,K,{name:0,minimal:1})}}function Nt(n,e,i){const t=n.slice();return t[4]=e[i],t}function Tt(n){let e;return{c(){e=U("li"),E(e,"class","divider")},m(i,t){O(i,e,t)},d(i){i&&N(e)}}}function xt(n){let e,i,t=n[4].name+"",o,s,r,l,d;function u(...m){return n[3](n[4],...m)}let a=n[4].divider&&Tt();return{c(){e=U("li"),i=U("a"),o=_e(t),s=V(),a&&a.c(),r=Be(),E(i,"href","#"),Pe(e,"disabled",n[4].disable)},m(m,g){O(m,e,g),R(e,i),R(i,o),O(m,s,g),a&&a.m(m,g),O(m,r,g),l||(d=oe(i,"click",u),l=!0)},p(m,g){n=m,g&1&&t!==(t=n[4].name+"")&&Re(o,t),g&1&&Pe(e,"disabled",n[4].disable),n[4].divider?a||(a=Tt(),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},d(m){m&&N(e),m&&N(s),a&&a.d(m),m&&N(r),l=!1,d()}}}function Lo(n){let e,i=n[0],t=[];for(let o=0;o<i.length;o+=1)t[o]=xt(Nt(n,i,o));return{c(){for(let o=0;o<t.length;o+=1)t[o].c();e=Be()},m(o,s){for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(o,s);O(o,e,s)},p(o,s){if(s&1){i=o[0];let r;for(r=0;r<i.length;r+=1){const l=Nt(o,i,r);t[r]?t[r].p(l,s):(t[r]=xt(l),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=i.length}},d(o){Oe(t,o),o&&N(e)}}}function Mo(n){let e,i;return e=new et({props:{minimal:n[2],name:n[1],$$slots:{default:[Lo]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},p(t,[o]){const s={};o&4&&(s.minimal=t[2]),o&2&&(s.name=t[1]),o&129&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}function Do(n,e){e.disable||e.action(n)}function Ao(n,e,i){let{menuItems:t}=e,{name:o}=e,{minimal:s=!1}=e;const r=(l,d)=>Do(d,l);return n.$$set=l=>{"menuItems"in l&&i(0,t=l.menuItems),"name"in l&&i(1,o=l.name),"minimal"in l&&i(2,s=l.minimal)},[t,o,s,r]}class at extends X{constructor(e){super(),Z(this,e,Ao,Mo,K,{menuItems:0,name:1,minimal:2})}}function gt(n,e){if(n==null)throw new Error("Columnnames may not be null.");const t=Y(Q).nodes(function(s){return s.isObserved()});if(t.length>0)for(var o=0;o<t.length;o++){const s=t[o],r=s.getLabel();n.includes(r)&&!s.isLinked()?s.link():!n.includes(r)&&s.isLinked()&&s.unlink()}}async function vn(n){Shiny.setInputValue("down-requestData",{goal:n,random:Math.random()})}function pt(){Y(Q).elements().remove(),bn(),B.update(e=>(e.parsedModel=!1,e)),ne.update(e=>(e.fix_first=!0,e.mode="user model",e)),Shiny.setInputValue("show_help",Math.random()),Ie.update(e=>{for(let i in e)e[i]=null;return e})}function ht(n){pt();let e=JSON.parse(n),i=Y(Q),t;t=JSON.parse(e.model);const o=JSON.parse(e.modelOpt),s=JSON.parse(e.gridViewOpt);if(Pt(ne,o),Pt(ne,s),e.fitCache!==void 0){const r=JSON.parse(e.fitCache);Ie.set(r)}B.update(r=>(r.loadingMode=!0,r)),i.json({elements:t}),i.nodes().forEach(r=>{r.style({width:r.data("width")}),r.style({height:r.data("height")})}),Y(B).dataAvail&&gt(Y(B).columnNames),Y(ne).mode!=="user model"?ue.update(r=>(r.showLav=!0,r)):ue.update(r=>(r.showLav=!1,r)),i.nodes().forEach(r=>{pe(r.id())}),B.update(r=>(r.loadingMode=!1,r))}function bt(){const n=Y(Q);n.nodes().forEach(l=>{l.data("width",l.width()),l.data("height",l.height())});let e=n.json().elements;e.nodes.forEach(l=>{l.classes=l.classes.split(" ").filter(d=>d!==Ue).join(" ")});const i=JSON.stringify(e),t=JSON.stringify(Y(ne)),o=JSON.stringify(Y(ne)),s=JSON.stringify(Y(Ie));return JSON.stringify({model:i,modelOpt:t,gridViewOpt:o,fitCache:s})}function Pt(n,e){n.update(i=>{for(let t in e)e.hasOwnProperty(t)&&e[t]!==void 0&&(i[t]=e[t]);return i})}function Io(n){let e,i;return e=new at({props:{name:"File",menuItems:n[1],minimal:!n[0]}}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},p(t,[o]){const s={};o&2&&(s.menuItems=t[1]),o&1&&(s.minimal=!t[0]),e.$set(s)},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}function Fo(){document.getElementById("dataUpload-fileInput").click()}function Vt(){const n=new Date;return`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}_${String(n.getHours()).padStart(2,"0")}-${String(n.getMinutes()).padStart(2,"0")}-${String(n.getSeconds()).padStart(2,"0")}`}function Oo(n,e,i){let t,o;te(n,B,v=>i(2,t=v)),te(n,mt,v=>i(3,o=v));let{full:s=!0}=e;H.use(In);function r(){t.modelEmpty?pt():bootbox.confirm("Are you sure you want to create a new model? This will delete the current model.",function(v){v&&pt()})}function l(v,y){dt.saveAs(v,"model."+y)}async function d(){const v=document.createElement("input");v.setAttribute("type","file"),v.setAttribute("accept",".lvm");const y=await new Promise(T=>{v.addEventListener("change",S=>T(S.target.files[0])),v.click()}),w=await new Promise(T=>{const S=new FileReader;S.readAsText(y,"UTF-8"),S.onload=()=>T(S.result)});ht(w)}function u(){t.modelEmpty?d():bootbox.confirm("Are you sure you want to load a model? This will delete the current model.",function(v){v&&d()})}document.getElementById("dataUpload-fileInput").addEventListener("change",function(){this.files&&this.files.length>0&&window.$("#upload-modal").modal()});function a(){t.modelEmpty?m():bootbox.confirm("Are you sure you want to load model and data? This will delete the current model and data.",function(v){v&&m()})}function m(){const v=document.createElement("input");v.setAttribute("type","file"),v.setAttribute("accept",".lvd"),v.addEventListener("change",function(y){const w=y.target.files[0],T=new FileReader;T.readAsArrayBuffer(w),T.onload=function(){const S=T.result;St.loadAsync(S).then(function(p){p.file("data.csv").async("base64").then(function(x){Shiny.setInputValue("dataUpload-fileInput",{content:x});const A=setInterval(()=>{t.dataAvail&&(clearInterval(A),p.file("model.lvm").async("text").then(function(J){ht(J)}))},100)})})}}),v.click()}function g(){const v=bt();let y=new Blob([v],{type:"application/json;charset=utf-8"});dt.saveAs(y,"model_"+Vt()+".lvm")}Shiny.addCustomMessageHandler("dataForDownload",function(v){(async()=>{const y=bt(),w=new St;w.file("model.lvm",y),w.file("data.csv",v);const T=await w.generateAsync({type:"blob"}),S=new File([T],"model_"+Vt()+".lvd",{type:"application/zip"});dt.saveAs(S)})()});function c(){const v=Y(Q);W(B,t.dataAvail=!1,t),W(B,t.columnNames=null,t),W(B,t.loadedFileName=null,t),W(B,t.ids=null,t),W(mt,o=null,o),v.nodes().unlink(),Shiny.setInputValue("dataUpload-deleteData",Math.random())}function f(){const v=Y(Q);l(v.png({bg:"white"}),"png")}function $(){const v=Y(Q);l(v.jpg(),"jpg")}function h(){return Y(Q).svg({scale:1,full:!0})}function b(){const v=h(),y=new Blob([v],{type:"image/svg+xml;charset=utf-8"});l(y,"svg")}function C(){vn("download")}async function _(){const v=h(),w=new DOMParser().parseFromString(v,"image/svg+xml").documentElement;w.style.position="absolute",w.style.left="-9999px",document.body.appendChild(w);const T=w.getBoundingClientRect();document.body.removeChild(w);const S=T.width,p=T.height,x=new Fn({orientation:S>p?"landscape":"portrait",unit:"pt",format:[S,p]});await On(w,x,{width:S,height:p}),x.save("model.pdf")}let L;return n.$$set=v=>{"full"in v&&i(0,s=v.full)},n.$$.update=()=>{if(n.$$.dirty&5){let v=[{name:"New Model",action:r,divider:!0},{name:"Load Model",action:u},{name:"Load Data",action:Fo},{name:"Load Model and Data",action:a,divider:!0},{name:"Save Model",action:g,disable:t.modelEmpty},{name:"Save Model and Data",disable:t.modelEmpty||!t.dataAvail,action:C,divider:!0},{name:"Remove Data",action:c,disable:!t.dataAvail,divider:!0},{name:"Export Diagram to PNG",disable:t.modelEmpty,action:f},{name:"Export Diagram to JPG",disable:t.modelEmpty,action:$},{name:"Export Diagram to SVG",disable:t.modelEmpty,action:b},{name:"Export Diagram to PDF",disable:t.modelEmpty,action:_}];s?i(1,L=v):i(1,L=v.filter(y=>["Save Model","Load Model"].includes(y.name)||v.indexOf(y)>=v.length-4))}},[s,L,t]}class $n extends X{constructor(e){super(),Z(this,e,Oo,Io,K,{full:0})}}function No(n){let e;return{c(){e=U("span"),E(e,"class","glyphicon glyphicon-ok check-mark invisible"),E(e,"aria-hidden","true")},m(i,t){O(i,e,t)},d(i){i&&N(e)}}}function To(n){let e;return{c(){e=U("span"),E(e,"class","glyphicon glyphicon-ok check-mark"),E(e,"aria-hidden","true")},m(i,t){O(i,e,t)},d(i){i&&N(e)}}}function xo(n){let e,i,t,o,s,r,l,d,u;function a(c,f){return c[0]?To:No}let m=a(n),g=m(n);return{c(){e=U("li"),i=U("label"),t=U("input"),o=V(),g.c(),s=V(),r=_e(n[1]),E(t,"type","checkbox"),E(t,"class","check-box svelte-17cge7g"),t.disabled=n[2],E(i,"class",l=Ve(n[2]?"disabled-label":"")+" svelte-17cge7g"),E(e,"class","svelte-17cge7g")},m(c,f){O(c,e,f),R(e,i),R(i,t),t.checked=n[0],R(i,o),g.m(i,null),R(i,s),R(i,r),d||(u=oe(t,"change",n[3]),d=!0)},p(c,[f]){f&4&&(t.disabled=c[2]),f&1&&(t.checked=c[0]),m!==(m=a(c))&&(g.d(1),g=m(c),g&&(g.c(),g.m(i,s))),f&2&&Re(r,c[1]),f&4&&l!==(l=Ve(c[2]?"disabled-label":"")+" svelte-17cge7g")&&E(i,"class",l)},i:ce,o:ce,d(c){c&&N(e),g.d(),d=!1,u()}}}function Po(n,e,i){let{name:t}=e,{checked:o}=e,{disable:s=!1}=e;function r(){o=this.checked,i(0,o)}return n.$$set=l=>{"name"in l&&i(1,t=l.name),"checked"in l&&i(0,o=l.checked),"disable"in l&&i(2,s=l.disable)},[o,t,s,r]}class Ce extends X{constructor(e){super(),Z(this,e,Po,xo,K,{name:1,checked:0,disable:2})}}function Vo(n){let e;return{c(){e=U("span"),E(e,"class","glyphicon glyphicon-ok check-mark invisible"),E(e,"aria-hidden","true")},m(i,t){O(i,e,t)},d(i){i&&N(e)}}}function Ro(n){let e;return{c(){e=U("span"),E(e,"class","glyphicon glyphicon-ok check-mark"),E(e,"aria-hidden","true")},m(i,t){O(i,e,t)},d(i){i&&N(e)}}}function zo(n){let e,i,t,o=!1,s,r,l,d,u,a,m,g;function c(h,b){return h[0]===h[2]?Ro:Vo}let f=c(n),$=f(n);return a=Mn(n[5][0]),{c(){e=U("div"),i=U("label"),t=U("input"),s=V(),$.c(),r=V(),l=_e(n[1]),E(t,"type","radio"),E(t,"name","meanStruc"),t.__value=n[2],t.value=t.__value,t.disabled=n[3],E(t,"class","svelte-lbhkwe"),E(i,"class",d=Ve(n[3]?"text-muted":"")+" svelte-lbhkwe"),E(e,"class",u=Ve(n[3]?"radio disabled":"radio")+" svelte-lbhkwe"),a.p(t)},m(h,b){O(h,e,b),R(e,i),R(i,t),t.checked=t.__value===n[0],R(i,s),$.m(i,null),R(i,r),R(i,l),m||(g=oe(t,"change",n[4]),m=!0)},p(h,[b]){b&4&&(t.__value=h[2],t.value=t.__value,o=!0),b&8&&(t.disabled=h[3]),(o||b&1)&&(t.checked=t.__value===h[0]),f!==(f=c(h))&&($.d(1),$=f(h),$&&($.c(),$.m(i,r))),b&2&&Re(l,h[1]),b&8&&d!==(d=Ve(h[3]?"text-muted":"")+" svelte-lbhkwe")&&E(i,"class",d),b&8&&u!==(u=Ve(h[3]?"radio disabled":"radio")+" svelte-lbhkwe")&&E(e,"class",u)},i:ce,o:ce,d(h){h&&N(e),$.d(),a.r(),m=!1,g()}}}function Bo(n,e,i){let{name:t}=e,{value:o}=e,{group:s}=e,{isDisabled:r=!1}=e;const l=[[]];function d(){s=this.__value,i(0,s)}return n.$$set=u=>{"name"in u&&i(1,t=u.name),"value"in u&&i(2,o=u.value),"group"in u&&i(0,s=u.group),"isDisabled"in u&&i(3,r=u.isDisabled)},[s,t,o,r,d,l]}class tt extends X{constructor(e){super(),Z(this,e,Bo,zo,K,{name:1,value:2,group:0,isDisabled:3})}}const Rt=[{name:"Arrows Created by Lavaan",modelSlot:"showLav"},{name:"Variance Arrows",modelSlot:"showVar"},{name:"Mean Arrows",modelSlot:"showMean"}];let zt=[{name:"Estimate",value:"est"},{name:"Confidence Interval",value:"ci"},{name:"Estimate + p-value (stars)",value:"estPVal"},{name:"Estimate + Standard Error",value:"estSE"}];function Uo(n,e,i){const t=Y(Q),o=e?"_std":"",s=yn(n,o,i);t.style().selector("edge.hasEst").style({label:s}).update();const r=jo(n,o,i);t.style().selector("edge.hasEst.label").style({label:r}).update();const l=Ho(n,o,i);t.style().selector("edge.hasEstFixed").style({label:l}).update()}function Go(n,e,i){function t(a){return a.reduce((m,g,c)=>(g&&m.push(c),m),[])}const o=Y(Q),s=[e,n,i],r=t(s),l=t(s.map(a=>!a)),d=r.concat(l);function u(a,m){return[c=>c.isLavaanAdded(),c=>c.isLoop(),c=>c.isMean()][a](m)}for(let a of d){const m=o.elements(function(g){return u(a,g)});if(s[a]?m.removeClass("hidden"):m.addClass("hidden"),a==2){const g=m.connectedEdges().connectedNodes(),c=m.connectedEdges();s[a]?c.forEach(f=>{f.removeClass("hidden")}):c.forEach(f=>{f.addClass("hidden")}),g.forEach(f=>{pe(f.id())})}else m.forEach(g=>{pe(g.source().id()),pe(g.target().id())})}}function qo(n){return n===null?"NA":n<.001?"***":n<.01?"**":n<.05?"*":""}function yn(n,e,i){const t=o=>o===null?"NA":o.toFixed(i);switch(n){case"est":return o=>t(o.data("estimates")["est"+e]);case"ci":return o=>`[${t(o.data("estimates")["ciLow"+e])}, ${t(o.data("estimates")["ciHigh"+e])}]`;case"estPVal":return o=>`${t(o.data("estimates")["est"+e])}${qo(o.data("estimates").p_value)}`;case"estSE":return o=>`${t(o.data("estimates")["est"+e])} (${t(o.data("estimates")["se"+e])})`;default:return()=>"NA"}}function jo(n,e,i){const t=yn(n,e,i);return o=>`${o.data("label")} = ${t(o)}`}function Ho(n,e,i){const t=o=>o===null?"NA":o.toFixed(i);return o=>"@"+t(o.data("estimates")["estFixed"+e])}function Wo(n){let e,i,t,o,s,r;return{c(){e=U("li"),i=_e(n[1]),t=V(),o=U("input"),ve(o,"width","4em"),E(o,"type","number"),E(o,"min",n[2]),ve(e,"padding-left","28px")},m(l,d){O(l,e,d),R(e,i),R(e,t),R(e,o),it(o,n[0]),s||(r=oe(o,"input",n[3]),s=!0)},p(l,[d]){d&2&&Re(i,l[1]),d&4&&E(o,"min",l[2]),d&1&&lt(o.value)!==l[0]&&it(o,l[0])},i:ce,o:ce,d(l){l&&N(e),s=!1,r()}}}function Yo(n,e,i){let{name:t}=e,{value:o}=e,{min:s}=e;function r(){o=lt(this.value),i(0,o)}return n.$$set=l=>{"name"in l&&i(1,t=l.name),"value"in l&&i(0,o=l.value),"min"in l&&i(2,s=l.min)},[o,t,s,r]}class rt extends X{constructor(e){super(),Z(this,e,Yo,Wo,K,{name:1,value:0,min:2})}}function Bt(n,e,i){const t=n.slice();return t[9]=e[i],t}function Ut(n,e,i){const t=n.slice();return t[9]=e[i],t[12]=e,t[13]=i,t}function Gt(n){let e,i,t,o;function s(d){n[3](d,n[9])}function r(d){n[4](d,n[9])}let l={disable:!1};return n[9].name!==void 0&&(l.name=n[9].name),n[1][n[9].modelSlot]!==void 0&&(l.checked=n[1][n[9].modelSlot]),e=new Ce({props:l}),se.push(()=>ae(e,"name",s)),se.push(()=>ae(e,"checked",r)),{c(){G(e.$$.fragment)},m(d,u){q(e,d,u),o=!0},p(d,u){n=d;const a={};!i&&u&4&&(i=!0,a.name=n[9].name,de(()=>i=!1)),!t&&u&6&&(t=!0,a.checked=n[1][n[9].modelSlot],de(()=>t=!1)),e.$set(a)},i(d){o||(M(e.$$.fragment,d),o=!0)},o(d){F(e.$$.fragment,d),o=!1},d(d){j(e,d)}}}function qt(n){let e,i,t;function o(r){n[6](r)}let s={name:n[9].name,value:n[9].value};return n[1].view!==void 0&&(s.group=n[1].view),e=new tt({props:s}),se.push(()=>ae(e,"group",o)),{c(){G(e.$$.fragment)},m(r,l){q(e,r,l),t=!0},p(r,l){const d={};!i&&l&2&&(i=!0,d.group=r[1].view,de(()=>i=!1)),e.$set(d)},i(r){t||(M(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){j(e,r)}}}function Jo(n){let e,i,t,o,s,r,l,d,u,a,m,g,c,f,$,h,b,C,_,L,v=n[2],y=[];for(let k=0;k<v.length;k+=1)y[k]=Gt(Ut(n,v,k));const w=k=>F(y[k],1,1,()=>{y[k]=null});function T(k){n[5](k)}let S={name:"Standardized Estimates",disable:!1};n[1].std!==void 0&&(S.checked=n[1].std),o=new Ce({props:S}),se.push(()=>ae(o,"checked",T));let p=zt,x=[];for(let k=0;k<p.length;k+=1)x[k]=qt(Bt(n,p,k));const A=k=>F(x[k],1,1,()=>{x[k]=null});function J(k){n[8](k)}let I={name:"Number Digits",min:0};return n[1].number_digits!==void 0&&(I.value=n[1].number_digits),h=new rt({props:I}),se.push(()=>ae(h,"value",J)),{c(){for(let k=0;k<y.length;k+=1)y[k].c();e=V(),i=U("li"),t=V(),G(o.$$.fragment),r=V(),l=U("li"),d=V();for(let k=0;k<x.length;k+=1)x[k].c();u=V(),a=U("li"),m=V(),g=U("li"),c=_e(`Confidence Level
    `),f=U("input"),$=V(),G(h.$$.fragment),E(i,"class","divider"),E(l,"class","divider"),E(a,"class","divider"),E(f,"type","number"),E(f,"min","0"),E(f,"max","0.999999"),E(f,"step","0.01"),ve(f,"width","4em"),ve(g,"padding-left","28px")},m(k,D){for(let z=0;z<y.length;z+=1)y[z]&&y[z].m(k,D);O(k,e,D),O(k,i,D),O(k,t,D),q(o,k,D),O(k,r,D),O(k,l,D),O(k,d,D);for(let z=0;z<x.length;z+=1)x[z]&&x[z].m(k,D);O(k,u,D),O(k,a,D),O(k,m,D),O(k,g,D),R(g,c),R(g,f),it(f,n[1].ci),O(k,$,D),q(h,k,D),C=!0,_||(L=oe(f,"input",n[7]),_=!0)},p(k,D){if(D&6){v=k[2];let ee;for(ee=0;ee<v.length;ee+=1){const P=Ut(k,v,ee);y[ee]?(y[ee].p(P,D),M(y[ee],1)):(y[ee]=Gt(P),y[ee].c(),M(y[ee],1),y[ee].m(e.parentNode,e))}for($e(),ee=v.length;ee<y.length;ee+=1)w(ee);ye()}const z={};if(!s&&D&2&&(s=!0,z.checked=k[1].std,de(()=>s=!1)),o.$set(z),D&2){p=zt;let ee;for(ee=0;ee<p.length;ee+=1){const P=Bt(k,p,ee);x[ee]?(x[ee].p(P,D),M(x[ee],1)):(x[ee]=qt(P),x[ee].c(),M(x[ee],1),x[ee].m(u.parentNode,u))}for($e(),ee=p.length;ee<x.length;ee+=1)A(ee);ye()}D&2&&lt(f.value)!==k[1].ci&&it(f,k[1].ci);const fe={};!b&&D&2&&(b=!0,fe.value=k[1].number_digits,de(()=>b=!1)),h.$set(fe)},i(k){if(!C){for(let D=0;D<v.length;D+=1)M(y[D]);M(o.$$.fragment,k);for(let D=0;D<p.length;D+=1)M(x[D]);M(h.$$.fragment,k),C=!0}},o(k){y=y.filter(Boolean);for(let D=0;D<y.length;D+=1)F(y[D]);F(o.$$.fragment,k),x=x.filter(Boolean);for(let D=0;D<x.length;D+=1)F(x[D]);F(h.$$.fragment,k),C=!1},d(k){Oe(y,k),k&&N(e),k&&N(i),k&&N(t),j(o,k),k&&N(r),k&&N(l),k&&N(d),Oe(x,k),k&&N(u),k&&N(a),k&&N(m),k&&N(g),k&&N($),j(h,k),_=!1,L()}}}function Xo(n){let e,i;return e=new et({props:{name:"View",minimal:n[0],$$slots:{default:[Jo]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},p(t,[o]){const s={};o&1&&(s.minimal=t[0]),o&16390&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}function Zo(n,e,i){let t;te(n,ue,m=>i(1,t=m));let{minimal:o=!1}=e;function s(m,g){n.$$.not_equal(g.name,m)&&(g.name=m,i(2,Rt))}function r(m,g){n.$$.not_equal(t[g.modelSlot],m)&&(t[g.modelSlot]=m,ue.set(t))}function l(m){n.$$.not_equal(t.std,m)&&(t.std=m,ue.set(t))}function d(m){n.$$.not_equal(t.view,m)&&(t.view=m,ue.set(t))}function u(){t.ci=lt(this.value),ue.set(t)}function a(m){n.$$.not_equal(t.number_digits,m)&&(t.number_digits=m,ue.set(t))}return n.$$set=m=>{"minimal"in m&&i(0,o=m.minimal)},n.$$.update=()=>{n.$$.dirty&2&&Shiny.setInputValue("ests-confindence_level",t.ci)},[o,t,Rt,s,r,l,d,u,a]}class wn extends X{constructor(e){super(),Z(this,e,Zo,Xo,K,{minimal:0})}}function jt(n,e,i){const t=n.slice();return t[9]=e[i],t}function Ht(n,e,i){const t=n.slice();return t[9]=e[i],t}function Wt(n,e,i){const t=n.slice();return t[9]=e[i],t}function Yt(n){let e,i,t;function o(r){n[4](r)}let s={name:n[9].name,value:n[9].value};return n[0].estimator!==void 0&&(s.group=n[0].estimator),e=new tt({props:s}),se.push(()=>ae(e,"group",o)),{c(){G(e.$$.fragment)},m(r,l){q(e,r,l),t=!0},p(r,l){const d={};!i&&l&1&&(i=!0,d.group=r[0].estimator,de(()=>i=!1)),e.$set(d)},i(r){t||(M(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){j(e,r)}}}function Jt(n){let e,i,t;function o(r){n[5](r)}let s={name:n[9].name,value:n[9].value};return n[0].se!==void 0&&(s.group=n[0].se),e=new tt({props:s}),se.push(()=>ae(e,"group",o)),{c(){G(e.$$.fragment)},m(r,l){q(e,r,l),t=!0},p(r,l){const d={};!i&&l&1&&(i=!0,d.group=r[0].se,de(()=>i=!1)),e.$set(d)},i(r){t||(M(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){j(e,r)}}}function Xt(n){let e,i,t;function o(r){n[7](r)}let s={name:n[9].name,value:n[9].value};return n[0].missing!==void 0&&(s.group=n[0].missing),e=new tt({props:s}),se.push(()=>ae(e,"group",o)),{c(){G(e.$$.fragment)},m(r,l){q(e,r,l),t=!0},p(r,l){const d={};!i&&l&1&&(i=!0,d.group=r[0].missing,de(()=>i=!1)),e.$set(d)},i(r){t||(M(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){j(e,r)}}}function Ko(n){let e,i,t,o,s,r,l,d,u,a,m,g,c,f,$,h,b,C,_=n[1],L=[];for(let I=0;I<_.length;I+=1)L[I]=Yt(Wt(n,_,I));const v=I=>F(L[I],1,1,()=>{L[I]=null});let y=n[2],w=[];for(let I=0;I<y.length;I+=1)w[I]=Jt(Ht(n,y,I));const T=I=>F(w[I],1,1,()=>{w[I]=null});function S(I){n[6](I)}let p={name:"Number of Bootstrap Samples:",min:5};n[0].n_boot!==void 0&&(p.value=n[0].n_boot),m=new rt({props:p}),se.push(()=>ae(m,"value",S));let x=n[3],A=[];for(let I=0;I<x.length;I+=1)A[I]=Xt(jt(n,x,I));const J=I=>F(A[I],1,1,()=>{A[I]=null});return{c(){e=U("li"),i=U("a"),i.textContent="Estimator",t=V(),o=U("ul");for(let I=0;I<L.length;I+=1)L[I].c();s=V(),r=U("li"),l=U("a"),l.textContent="Standard Error",d=V(),u=U("ul");for(let I=0;I<w.length;I+=1)w[I].c();a=V(),G(m.$$.fragment),c=V(),f=U("li"),$=U("a"),$.textContent="Missing Values",h=V(),b=U("ul");for(let I=0;I<A.length;I+=1)A[I].c();E(i,"tabindex","-1"),E(i,"href","#"),E(i,"class","svelte-143y7r6"),E(o,"class","dropdown-menu svelte-143y7r6"),E(e,"class","dropdown-submenu svelte-143y7r6"),E(l,"tabindex","-1"),E(l,"href","#"),E(l,"class","svelte-143y7r6"),E(u,"class","dropdown-menu svelte-143y7r6"),E(r,"class","dropdown-submenu svelte-143y7r6"),E($,"tabindex","-1"),E($,"href","#"),E($,"class","svelte-143y7r6"),E(b,"class","dropdown-menu svelte-143y7r6"),E(f,"class","dropdown-submenu svelte-143y7r6")},m(I,k){O(I,e,k),R(e,i),R(e,t),R(e,o);for(let D=0;D<L.length;D+=1)L[D]&&L[D].m(o,null);O(I,s,k),O(I,r,k),R(r,l),R(r,d),R(r,u);for(let D=0;D<w.length;D+=1)w[D]&&w[D].m(u,null);R(u,a),q(m,u,null),O(I,c,k),O(I,f,k),R(f,$),R(f,h),R(f,b);for(let D=0;D<A.length;D+=1)A[D]&&A[D].m(b,null);C=!0},p(I,k){if(k&3){_=I[1];let z;for(z=0;z<_.length;z+=1){const fe=Wt(I,_,z);L[z]?(L[z].p(fe,k),M(L[z],1)):(L[z]=Yt(fe),L[z].c(),M(L[z],1),L[z].m(o,null))}for($e(),z=_.length;z<L.length;z+=1)v(z);ye()}if(k&5){y=I[2];let z;for(z=0;z<y.length;z+=1){const fe=Ht(I,y,z);w[z]?(w[z].p(fe,k),M(w[z],1)):(w[z]=Jt(fe),w[z].c(),M(w[z],1),w[z].m(u,a))}for($e(),z=y.length;z<w.length;z+=1)T(z);ye()}const D={};if(!g&&k&1&&(g=!0,D.value=I[0].n_boot,de(()=>g=!1)),m.$set(D),k&9){x=I[3];let z;for(z=0;z<x.length;z+=1){const fe=jt(I,x,z);A[z]?(A[z].p(fe,k),M(A[z],1)):(A[z]=Xt(fe),A[z].c(),M(A[z],1),A[z].m(b,null))}for($e(),z=x.length;z<A.length;z+=1)J(z);ye()}},i(I){if(!C){for(let k=0;k<_.length;k+=1)M(L[k]);for(let k=0;k<y.length;k+=1)M(w[k]);M(m.$$.fragment,I);for(let k=0;k<x.length;k+=1)M(A[k]);C=!0}},o(I){L=L.filter(Boolean);for(let k=0;k<L.length;k+=1)F(L[k]);w=w.filter(Boolean);for(let k=0;k<w.length;k+=1)F(w[k]);F(m.$$.fragment,I),A=A.filter(Boolean);for(let k=0;k<A.length;k+=1)F(A[k]);C=!1},d(I){I&&N(e),Oe(L,I),I&&N(s),I&&N(r),Oe(w,I),j(m),I&&N(c),I&&N(f),Oe(A,I)}}}function Qo(n){let e,i;return e=new et({props:{name:ei,$$slots:{default:[Ko]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},p(t,[o]){const s={};o&65537&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}const ei="Estimation";function ti(n,e,i){let t;te(n,ne,m=>i(0,t=m));const o=[{value:"default",name:"Default"},{value:"ML",name:"Maximum Likelihood (ML)"},{value:"GLS",name:"Generalized Least Squares (GLS)"},{value:"WLS",name:"Weighted Least Squares (WLS)"},{value:"ULS",name:"Unweighted Least Squares (ULS)"},{value:"DWLS",name:"Diagonally Weighted Least Squares (DWLS)"},{value:"DLS",name:"Distributionally-weighted Least Squares (DLW)"}],s=[{value:"default",name:"Default"},{value:"robust",name:"Robust"},{value:"boot",name:"Bootstrap"}],r=[{value:"listwise",name:"Listwise Deletion"},{value:"ml",name:"Full Information Maximum Likelihood (FIML)"}];function l(m){n.$$.not_equal(t.estimator,m)&&(t.estimator=m,ne.set(t))}function d(m){n.$$.not_equal(t.se,m)&&(t.se=m,ne.set(t))}function u(m){n.$$.not_equal(t.n_boot,m)&&(t.n_boot=m,ne.set(t))}function a(m){n.$$.not_equal(t.missing,m)&&(t.missing=m,ne.set(t))}return[t,o,s,r,l,d,u,a]}class ni extends X{constructor(e){super(),Z(this,e,ti,Qo,K,{})}}let ft=0,kn=!1;function En(){return typeof Shiny=="object"&&Shiny!==null}function oi(n){const e=Object.keys(n),i=n[e[0]].length,t=[];for(let o=0;o<i;o++){const s={};for(const r of e)s[r]=n[r][o];t.push(s)}return t}function ot(n,e=!0){kn=e,ft=ft+1;let i=gn(!0);i.name=n,i.counter=ft,En()&&Shiny.setInputValue("layout-layout",JSON.stringify(i))}En()&&Shiny.addCustomMessageHandler("semPlotLayout",function(n){n=oi(n);const e=125,i=200;let t=1/0,o=1/0;for(let u=0;u<n.length;u++)for(let a=u+1;a<n.length;a++){const m=Math.abs(n[u].x-n[a].x),g=Math.abs(n[u].y-n[a].y);m<t&&n[u].y===n[a].y&&(t=m),g<o&&g!==0&&(o=g)}const s=e/t,r=i/o;let l={};n.forEach(u=>{const a=u.x*s+400,m=u.y*-1*r+400;l[u.name]={x:a,y:m}});let d={name:"preset",positions:function(u){const a=u.data("label");return l[a]},fit:!0,padding:60,animate:!0};kn?Y(De).do("layout",{options:d}):Y(Q).layout(d).run()});function ii(n){let e,i;return e=new at({props:{name:"Apply Layout",menuItems:n[1],minimal:n[0]}}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},p(t,[o]){const s={};o&2&&(s.menuItems=t[1]),o&1&&(s.minimal=t[0]),e.$set(s)},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}function si(n,e,i){let t,o,s;te(n,B,g=>i(2,o=g)),te(n,De,g=>i(3,s=g));let{minimal:r=!1}=e;Y(Q),we(()=>{H.use(Nn),H.use(Tn),H.use(xn)});function l(){const g={name:"dagre",rankSep:150,animate:!0};s.do("layout",{options:g})}function d(){const g={name:"breadthfirst",animate:!0,spacingFactor:1};s.do("layout",{options:g})}function u(){const g={name:"circle",animate:!0};s.do("layout",{options:g})}function a(){const g={name:"fcose",animate:!0,idealEdgeLength:c=>150,quality:"proof",randomize:!1,nodeSeparation:200};s.do("layout",{options:g})}function m(){const g={name:"cola",animate:!0,nodeSpacing(c){return 50}};s.do("layout",{options:g})}return n.$$set=g=>{"minimal"in g&&i(0,r=g.minimal)},n.$$.update=()=>{n.$$.dirty&4&&i(1,t=[{name:"Recommended: Tree",action:()=>ot("tree"),disable:o.modelEmpty},{name:"Recommended: Tree2",action:()=>ot("tree2"),disable:o.modelEmpty},{name:"Recommended: Tree3",action:()=>ot("tree3"),disable:o.modelEmpty,divider:!0},{name:"Experimental: Tree",action:l,disable:o.modelEmpty},{name:"Experimental: Tree2",action:d,disable:o.modelEmpty},{name:"Experimental: Circle",action:u,disable:o.modelEmpty},{name:"Experimental: Force-directed",action:a,disable:o.modelEmpty},{name:"Experimental: Cola",action:m,disable:o.modelEmpty}])},[r,t,o]}class Sn extends X{constructor(e){super(),Z(this,e,si,ii,K,{minimal:0})}}function Zt(n,e,i){const t=n.slice();return t[11]=e[i],t[12]=e,t[13]=i,t}function Kt(n,e,i){const t=n.slice();return t[11]=e[i],t}function Qt(n){let e,i,t;function o(r){n[4](r)}let s={name:n[11].name,value:n[11].value};return n[0].meanStruc!==void 0&&(s.group=n[0].meanStruc),e=new tt({props:s}),se.push(()=>ae(e,"group",o)),{c(){G(e.$$.fragment)},m(r,l){q(e,r,l),t=!0},p(r,l){const d={};!i&&l&1&&(i=!0,d.group=r[0].meanStruc,de(()=>i=!1)),e.$set(d)},i(r){t||(M(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){j(e,r)}}}function en(n){let e,i,t,o;function s(d){n[9](d,n[11])}function r(d){n[10](d,n[11])}let l={};return n[11].name!==void 0&&(l.name=n[11].name),n[0][n[11].modelProperty]!==void 0&&(l.checked=n[0][n[11].modelProperty]),e=new Ce({props:l}),se.push(()=>ae(e,"name",s)),se.push(()=>ae(e,"checked",r)),{c(){G(e.$$.fragment)},m(d,u){q(e,d,u),o=!0},p(d,u){n=d;const a={};!i&&u&2&&(i=!0,a.name=n[11].name,de(()=>i=!1)),!t&&u&3&&(t=!0,a.checked=n[0][n[11].modelProperty],de(()=>t=!1)),e.$set(a)},i(d){o||(M(e.$$.fragment,d),o=!0)},o(d){F(e.$$.fragment,d),o=!1},d(d){j(e,d)}}}function ri(n){let e,i,t,o,s,r,l,d,u,a,m,g,c,f,$,h=n[3],b=[];for(let A=0;A<h.length;A+=1)b[A]=Qt(Kt(n,h,A));const C=A=>F(b[A],1,1,()=>{b[A]=null});function _(A){n[5](A)}function L(A){n[6](A)}let v={name:"Add Intercepts for all Observed Variables"};n[0].intOvFree!==void 0&&(v.checked=n[0].intOvFree),n[2]!==void 0&&(v.disable=n[2]),r=new Ce({props:v}),se.push(()=>ae(r,"checked",_)),se.push(()=>ae(r,"disable",L));function y(A){n[7](A)}function w(A){n[8](A)}let T={name:"Add Intercepts for all Latent Variables"};n[0].intLvFree!==void 0&&(T.checked=n[0].intLvFree),n[2]!==void 0&&(T.disable=n[2]),a=new Ce({props:T}),se.push(()=>ae(a,"checked",y)),se.push(()=>ae(a,"disable",w));let S=n[1],p=[];for(let A=0;A<S.length;A+=1)p[A]=en(Zt(n,S,A));const x=A=>F(p[A],1,1,()=>{p[A]=null});return{c(){e=U("li"),i=U("a"),i.textContent="Add Means?",t=V(),o=U("ul");for(let A=0;A<b.length;A+=1)b[A].c();s=V(),G(r.$$.fragment),u=V(),G(a.$$.fragment),c=V();for(let A=0;A<p.length;A+=1)p[A].c();f=Be(),E(i,"tabindex","-1"),E(i,"href","#"),E(i,"class","svelte-143y7r6"),E(o,"class","dropdown-menu svelte-143y7r6"),E(e,"class","dropdown-submenu svelte-143y7r6")},m(A,J){O(A,e,J),R(e,i),R(e,t),R(e,o);for(let I=0;I<b.length;I+=1)b[I]&&b[I].m(o,null);O(A,s,J),q(r,A,J),O(A,u,J),q(a,A,J),O(A,c,J);for(let I=0;I<p.length;I+=1)p[I]&&p[I].m(A,J);O(A,f,J),$=!0},p(A,J){if(J&9){h=A[3];let D;for(D=0;D<h.length;D+=1){const z=Kt(A,h,D);b[D]?(b[D].p(z,J),M(b[D],1)):(b[D]=Qt(z),b[D].c(),M(b[D],1),b[D].m(o,null))}for($e(),D=h.length;D<b.length;D+=1)C(D);ye()}const I={};!l&&J&1&&(l=!0,I.checked=A[0].intOvFree,de(()=>l=!1)),!d&&J&4&&(d=!0,I.disable=A[2],de(()=>d=!1)),r.$set(I);const k={};if(!m&&J&1&&(m=!0,k.checked=A[0].intLvFree,de(()=>m=!1)),!g&&J&4&&(g=!0,k.disable=A[2],de(()=>g=!1)),a.$set(k),J&3){S=A[1];let D;for(D=0;D<S.length;D+=1){const z=Zt(A,S,D);p[D]?(p[D].p(z,J),M(p[D],1)):(p[D]=en(z),p[D].c(),M(p[D],1),p[D].m(f.parentNode,f))}for($e(),D=S.length;D<p.length;D+=1)x(D);ye()}},i(A){if(!$){for(let J=0;J<h.length;J+=1)M(b[J]);M(r.$$.fragment,A),M(a.$$.fragment,A);for(let J=0;J<S.length;J+=1)M(p[J]);$=!0}},o(A){b=b.filter(Boolean);for(let J=0;J<b.length;J+=1)F(b[J]);F(r.$$.fragment,A),F(a.$$.fragment,A),p=p.filter(Boolean);for(let J=0;J<p.length;J+=1)F(p[J]);$=!1},d(A){A&&N(e),Oe(b,A),A&&N(s),j(r,A),A&&N(u),j(a,A),A&&N(c),Oe(p,A),A&&N(f)}}}function li(n){let e,i;return e=new et({props:{name:ai,$$slots:{default:[ri]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},p(t,[o]){const s={};o&65543&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}const ai="Automatically...";function di(n,e,i){let t,o;te(n,ne,f=>i(0,o=f));const s=[{name:"Fix Factor Loading of First Indicator at 1",modelProperty:"fix_first"},{name:"Include Variances",modelProperty:"auto_var"},{name:"Include Covariances of Exogenous Latent Variables",modelProperty:"auto_cov_lv_x"},{name:"Include Covariances of Dependent Variables",modelProperty:"auto_cov_y"},{name:"Fix Variance of Only Indicator to 0",modelProperty:"fix_single"},{name:"Treat Exogenous Observed Variables as Fixed Variables",modelProperty:"fixed_x"},{name:"Include Freely Estimated Thresholds for Ordered Variables",modelProperty:"auto.th"},{name:"Include Freely Estimated Response Scaling Parameters for Ordered Variables",modelProperty:"auto.delta"}];let r=[{name:"Default",value:"default"},{name:"Yes",value:"true"},{name:"No",value:"false"}];function l(f){n.$$.not_equal(o.meanStruc,f)&&(o.meanStruc=f,ne.set(o))}function d(f){n.$$.not_equal(o.intOvFree,f)&&(o.intOvFree=f,ne.set(o))}function u(f){t=f,i(2,t),i(0,o)}function a(f){n.$$.not_equal(o.intLvFree,f)&&(o.intLvFree=f,ne.set(o))}function m(f){t=f,i(2,t),i(0,o)}function g(f,$){n.$$.not_equal($.name,f)&&($.name=f,i(1,s))}function c(f,$){n.$$.not_equal(o[$.modelProperty],f)&&(o[$.modelProperty]=f,ne.set(o))}return n.$$.update=()=>{n.$$.dirty&1&&i(2,t=o.meanStruc==="false")},[o,s,t,r,l,d,u,a,m,g,c]}class ui extends X{constructor(e){super(),Z(this,e,di,li,K,{})}}function ci(n){let e,i;return e=new at({props:{name:"Help",menuItems:n[0]}}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},p:ce,i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}function fi(){Shiny.setInputValue("show_help",Math.random())}function mi(){window.open("https://doi.org/10.1080/10705511.2024.2420678","_blank")}function gi(){bootbox.alert({title:"How to Cite",className:"dialogWide",message:`To cite this package in publications, please use:<br><br>
              <div style="margin-left: 20px;">
                  Karch, J. D. (2025). lavaangui: A Web-Based Graphical Interface for Specifying Lavaan Models by Drawing Path Diagrams.
                  <i>Structural Equation Modeling: A Multidisciplinary Journal,</i> 1–12. 
                  <a href="https://doi.org/10.1080/10705511.2024.2420678" target="_blank">https://doi.org/10.1080/10705511.2024.2420678</a>
              </div>
              <br>
              A BibTeX entry for LaTeX users is:<br><br>
              <div style="margin-left: 20px;">
                  <pre>
@Article{,
  author = {J. D. Karch},
  year = {2025},
  title = {{lavaangui}: A Web-Based Graphical Interface for Specifying Lavaan Models by Drawing Path Diagrams},
  journal = {Structural Equation Modeling: A Multidisciplinary Journal},
  doi = {10.1080/10705511.2024.2420678},
  publisher = {Routledge},
  pages = {1--12},
}</pre>
              </div>`})}function pi(n){let e;const i=[{name:"Show Commands",action:fi},{name:"Open Tutorial",action:mi},{name:"About",action:t},{name:"Cite",action:gi}];function t(){bootbox.alert({title:"About Lavaangui",size:"large",message:`Version: ${e}<br> Author: Julian D. Karch<br> Email: j.d.karch@fsw.leidenuniv.nl <br> lavaangui is BETA software. Please report any bugs at https://github.com/karchjd/lavaangui/issues.`})}return Shiny.addCustomMessageHandler("version",function(o){e=o[0].join(".")}),[i]}class hi extends X{constructor(e){super(),Z(this,e,pi,ci,K,{})}}function bi(n){let e,i,t,o,s,r,l,d,u,a,m,g,c,f,$,h,b,C,_,L,v;function y(P){n[2](P)}let w={name:"Show Grid"};n[1].gridShow!==void 0&&(w.checked=n[1].gridShow),e=new Ce({props:w}),se.push(()=>ae(e,"checked",y));function T(P){n[3](P)}let S={name:"Snap to Grid"};n[1].gridSnap!==void 0&&(S.checked=n[1].gridSnap),o=new Ce({props:S}),se.push(()=>ae(o,"checked",T));function p(P){n[4](P)}let x={name:"Resize to Grid"};n[1].gridResize!==void 0&&(x.checked=n[1].gridResize),l=new Ce({props:x}),se.push(()=>ae(l,"checked",p));function A(P){n[5](P)}let J={name:"Snap to Alignment on Release"};n[1].gridAlign!==void 0&&(J.checked=n[1].gridAlign),a=new Ce({props:J}),se.push(()=>ae(a,"checked",A));function I(P){n[6](P)}let k={name:"Move Grid on Pan"};n[1].gridMovePan!==void 0&&(k.checked=n[1].gridMovePan),c=new Ce({props:k}),se.push(()=>ae(c,"checked",I));function D(P){n[7](P)}let z={name:"Grid Spacing:",min:5};n[1].gridSpace!==void 0&&(z.value=n[1].gridSpace),h=new rt({props:z}),se.push(()=>ae(h,"value",D));function fe(P){n[8](P)}let ee={name:"Line Width:",min:0};return n[1].gridWidth!==void 0&&(ee.value=n[1].gridWidth),_=new rt({props:ee}),se.push(()=>ae(_,"value",fe)),{c(){G(e.$$.fragment),t=V(),G(o.$$.fragment),r=V(),G(l.$$.fragment),u=V(),G(a.$$.fragment),g=V(),G(c.$$.fragment),$=V(),G(h.$$.fragment),C=V(),G(_.$$.fragment)},m(P,re){q(e,P,re),O(P,t,re),q(o,P,re),O(P,r,re),q(l,P,re),O(P,u,re),q(a,P,re),O(P,g,re),q(c,P,re),O(P,$,re),q(h,P,re),O(P,C,re),q(_,P,re),v=!0},p(P,re){const Ge={};!i&&re&2&&(i=!0,Ge.checked=P[1].gridShow,de(()=>i=!1)),e.$set(Ge);const vt={};!s&&re&2&&(s=!0,vt.checked=P[1].gridSnap,de(()=>s=!1)),o.$set(vt);const $t={};!d&&re&2&&(d=!0,$t.checked=P[1].gridResize,de(()=>d=!1)),l.$set($t);const yt={};!m&&re&2&&(m=!0,yt.checked=P[1].gridAlign,de(()=>m=!1)),a.$set(yt);const wt={};!f&&re&2&&(f=!0,wt.checked=P[1].gridMovePan,de(()=>f=!1)),c.$set(wt);const kt={};!b&&re&2&&(b=!0,kt.value=P[1].gridSpace,de(()=>b=!1)),h.$set(kt);const Et={};!L&&re&2&&(L=!0,Et.value=P[1].gridWidth,de(()=>L=!1)),_.$set(Et)},i(P){v||(M(e.$$.fragment,P),M(o.$$.fragment,P),M(l.$$.fragment,P),M(a.$$.fragment,P),M(c.$$.fragment,P),M(h.$$.fragment,P),M(_.$$.fragment,P),v=!0)},o(P){F(e.$$.fragment,P),F(o.$$.fragment,P),F(l.$$.fragment,P),F(a.$$.fragment,P),F(c.$$.fragment,P),F(h.$$.fragment,P),F(_.$$.fragment,P),v=!1},d(P){j(e,P),P&&N(t),j(o,P),P&&N(r),j(l,P),P&&N(u),j(a,P),P&&N(g),j(c,P),P&&N($),j(h,P),P&&N(C),j(_,P)}}}function _i(n){let e,i;return e=new et({props:{minimal:n[0],name:"Grid Options",$$slots:{default:[bi]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},p(t,[o]){const s={};o&1&&(s.minimal=t[0]),o&514&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}function vi(n,e,i){let t;te(n,ue,g=>i(1,t=g));let{minimal:o=!1}=e;function s(g){n.$$.not_equal(t.gridShow,g)&&(t.gridShow=g,ue.set(t))}function r(g){n.$$.not_equal(t.gridSnap,g)&&(t.gridSnap=g,ue.set(t))}function l(g){n.$$.not_equal(t.gridResize,g)&&(t.gridResize=g,ue.set(t))}function d(g){n.$$.not_equal(t.gridAlign,g)&&(t.gridAlign=g,ue.set(t))}function u(g){n.$$.not_equal(t.gridMovePan,g)&&(t.gridMovePan=g,ue.set(t))}function a(g){n.$$.not_equal(t.gridSpace,g)&&(t.gridSpace=g,ue.set(t))}function m(g){n.$$.not_equal(t.gridWidth,g)&&(t.gridWidth=g,ue.set(t))}return n.$$set=g=>{"minimal"in g&&i(0,o=g.minimal)},[o,t,s,r,l,d,u,a,m]}class Cn extends X{constructor(e){super(),Z(this,e,vi,_i,K,{minimal:0})}}function $i(n){return window.$(document).ready(function(){var e=!1;window.$(".navbar .dropdown").hover(function(){e&&(window.$(".navbar .dropdown").removeClass("open"),window.$(this).addClass("open"))},function(){}),window.$(".navbar .dropdown").on("show.bs.dropdown",function(){e=!0}),window.$(".navbar .dropdown").on("hide.bs.dropdown",function(){window.$(".navbar .dropdown.open").length<=1&&(e=!1)})}),[]}class yi extends X{constructor(e){super(),Z(this,e,$i,null,K,{})}}function wi(n){let e,i;return e=new at({props:{name:"Edit",menuItems:n[0]}}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},p(t,[o]){const s={};o&1&&(s.menuItems=t[0]),e.$set(s)},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}function ki(n,e,i){let t,o;te(n,B,d=>i(1,t=d)),te(n,De,d=>i(2,o=d));function s(){o.undo()}function r(){o.redo()}let l=[];return n.$$.update=()=>{n.$$.dirty&2&&i(0,l=[{name:"Undo",action:s,disable:t.undoEmpty},{name:"Redo",action:r,disable:t.redoEmpty}])},[l,t]}class Ei extends X{constructor(e){super(),Z(this,e,ki,wi,K,{})}}function Si(n){let e,i,t,o,s,r,l,d,u,a,m,g,c,f,$,h,b,C;return e=new $n({}),t=new Ei({}),s=new wn({}),l=new ui({}),u=new ni({}),m=new Sn({}),c=new Cn({}),$=new hi({}),b=new yi({}),{c(){G(e.$$.fragment),i=V(),G(t.$$.fragment),o=V(),G(s.$$.fragment),r=V(),G(l.$$.fragment),d=V(),G(u.$$.fragment),a=V(),G(m.$$.fragment),g=V(),G(c.$$.fragment),f=V(),G($.$$.fragment),h=V(),G(b.$$.fragment)},m(_,L){q(e,_,L),O(_,i,L),q(t,_,L),O(_,o,L),q(s,_,L),O(_,r,L),q(l,_,L),O(_,d,L),q(u,_,L),O(_,a,L),q(m,_,L),O(_,g,L),q(c,_,L),O(_,f,L),q($,_,L),O(_,h,L),q(b,_,L),C=!0},i(_){C||(M(e.$$.fragment,_),M(t.$$.fragment,_),M(s.$$.fragment,_),M(l.$$.fragment,_),M(u.$$.fragment,_),M(m.$$.fragment,_),M(c.$$.fragment,_),M($.$$.fragment,_),M(b.$$.fragment,_),C=!0)},o(_){F(e.$$.fragment,_),F(t.$$.fragment,_),F(s.$$.fragment,_),F(l.$$.fragment,_),F(u.$$.fragment,_),F(m.$$.fragment,_),F(c.$$.fragment,_),F($.$$.fragment,_),F(b.$$.fragment,_),C=!1},d(_){j(e,_),_&&N(i),j(t,_),_&&N(o),j(s,_),_&&N(r),j(l,_),_&&N(d),j(u,_),_&&N(a),j(m,_),_&&N(g),j(c,_),_&&N(f),j($,_),_&&N(h),j(b,_)}}}function Ci(n){let e,i;return e=new Eo({props:{$$slots:{default:[Si]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},p(t,[o]){const s={};o&1&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}class Li extends X{constructor(e){super(),Z(this,e,null,Ci,K,{})}}function Mi(n){let e;return{c(){e=U("pre"),E(e,"id","res-results"),E(e,"class","shiny-html-output well svelte-74yvxb"),E(e,"data-testid","result-text")},m(i,t){O(i,e,t)},p:ce,i:ce,o:ce,d(i){i&&N(e)}}}class Di extends X{constructor(e){super(),Z(this,e,null,Mi,K,{})}}function Ai(n){return window.cy=Y(Q),B.subscribe(e=>{window.appState=e}),ne.subscribe(e=>{window.modelOptions=e}),mt.subscribe(e=>{window.dataInfo=e}),Ie.subscribe(e=>{window.fitCache=e}),ue.subscribe(e=>{window.gridViewOptions=e}),De.subscribe(e=>{window.ur=e}),[]}class Ii extends X{constructor(e){super(),Z(this,e,Ai,null,K,{})}}function Fi(n){return new RegExp("^[a-zA-Z\\._][a-zA-Z0-9\\._]*(?<!\\.)$").test(n)}function tn(n){return n==""?(bootbox.alert("Provide a label"),!1):Fi(n)?!0:(bootbox.alert("Provide a valid label"),!1)}function Oi(n,e){const i=e?"full":"minimal";return n.filter(t=>t.show===i||t.show==="both")}function Ni(n,e,i){let t,o,s;te(n,B,c=>i(1,t=c)),te(n,De,c=>i(2,o=c)),te(n,ne,c=>i(3,s=c));let r=Y(Q);H.use(Pn);var l=new Vn.ColorPicker("#picker",{width:200,color:"rgb(255, 0, 0)",borderWidth:1,borderColor:"#fff"});function d(c,f){var $;const h=r.$(":selected");if(h.length>1){if(f==="nodes"&&!h.every(b=>b.isNode()))return bootbox.alert("Not all selected elements are nodes. Aborting"),null;if(f==="edges"&&!h.every(b=>b.isEdge()))return bootbox.alert("Not all selected elements are edges. Aborting"),null;if(f==="nodes.edges"&&!h.every(b=>b.isEdge()||b.isNode()))return bootbox.alert("Not all selected elements are nodes or edges. Aborting"),null;$=h}else $=c;return $}const u=[{id:"add-observed",content:"Add Observed Variable",coreAsWell:!0,onClickFunction(c){const f=c.renderedPosition;be(le,f)},show:"full"},{id:"add-latent",content:"Add Latent Variable",coreAsWell:!0,onClickFunction(c){const f=c.renderedPosition;be(me,f)},show:"full"},{id:"add-constant",content:"Add Constant Variable",coreAsWell:!0,onClickFunction(c){const f=c.renderedPosition;be(Le,f)},show:"full"},{id:"label-para",content:"Add/Change Label",selector:`edge.${he}`,onClickFunction(c){const f=c.target||c.cyTarget;bootbox.prompt({title:"Enter a Label",value:f.getLabel(),callback($){if(!tn($))return!1;$!==f.getLabel()&&$!==null&&(f.addLabel($),ie(s.mode))}})},show:"full",hasTrailingDivider:!1},{id:"label-remove",content:"Remove Label",selector:`edge.${ze}`,onClickFunction(c){(c.target||c.cyTarget).removeLabel(),ie(s.mode)},show:"both",hasTrailingDivider:!1},{id:"remove-edge",content:"Delete Edge",selector:`edge.${he}`,onClickFunction(c){(c.target||c.cyTarget).remove(),ie(s.mode)},show:"full",hasTrailingDivider:!0},{id:"fix-para",content:"Fix Parameter",selector:`edge.${Ee}.${he}, edge.${Ae}.${he}`,onClickFunction(c){const f=c.target||c.cyTarget;bootbox.prompt({title:"Enter a Value",inputType:"number",step:"any",callback($){if($=="")return bootbox.alert("Provide a value"),!1;$!==null&&(f.fixPara($),ie(s.mode))}})},show:"full",hasTrailingDivider:!1},{id:"free-para",content:"Free Parameter",selector:`edge.${Se}.${he}, edge.${Ae}.${he}`,onClickFunction(c){var f=c.target||c.cyTarget;f.freePara(),ie(s.mode)},show:"full",hasTrailingDivider:!1},{id:"free-force-para",content:"Force Parameter Free",selector:`edge.${Ee}.${he}, edge.${Se}.${he}`,onClickFunction(c){(c.target||c.cyTarget).forceFreePara(),ie(s.mode)},show:"full",hasTrailingDivider:!0},{id:"revert-arrow",content:"Revert Direction",selector:`edge[isMean="0"].${Me}.${he}`,onClickFunction(c){(c.target||c.cyTarget).revert(),ie(s.mode)},show:"full",hasTrailingDivider:!1},{id:"set-undirected",content:"Set Undirected",selector:`edge[isMean="0"].${Me}.${he}`,onClickFunction(c){(c.target||c.cyTarget).setUndirected(),ie(s.mode)},show:"full",hasTrailingDivider:!0},{id:"set-arrow",content:"Set Directed",selector:`edge.${Fe}.${he}`,onClickFunction(c){(c.target||c.cyTarget).setDirected(),ie(s.mode)},show:"full",hasTrailingDivider:!0},{id:"free-orientation",content:"Free Loop Orientation",selector:`edge.${st}.fixDeg`,onClickFunction(c){const f=c.target||c.cyTarget;f.removeClass("fixDeg"),pe(f.source().id())},show:"both",hasTrailingDivider:!0},{id:"change-fromUser",content:"Include in User Model",selector:`edge.${xe}`,onClickFunction(c){const f=c.target||c.cyTarget;if(f.myIsLoop()&&f.source().isOrdered()){ge("danger","User-defined variance arrow is not allowed for ordered variables.");return}f.markAddedUser(),ie(s.mode)},show:"full",hasTrailingDivider:!0},{id:"color-edge",content:"Change Edge Color",selector:"edge",show:"both",onClickFunction(c){var f=c.target||c.cyTarget;const $=d(f,"edges");if($===null)return null;m(f,$,"edge")}},{id:"change-line-width",content:"Change Line Width",show:"both",selector:"edge",onClickFunction(c){var f=c.target||c.cyTarget;const $=d(f,"edges");if($===null)return null;bootbox.prompt({title:"Enter New Line Width:",value:f.style("width"),callback(h){h!==null&&o.do("style",{eles:$,style:{width:h}})}})}},{id:"rename-node",show:"full",content:"Rename Variable",selector:`node.${me}, node.${le}`,onClickFunction(c){const f=c.target||c.cyTarget,$=t.columnNames;let h;t.dataAvail&&(h=$.map(C=>`<option value="${C}">${C}</option>`).join(""));const b=t.dataAvail&&f.isObserved()?`
      <label>Or Select From Variables in Your Data:</label>
      <select class="form-control" id="label-dropdown">
        <option value="">--Select--</option>
        ${h}
      </select>
    `:"";bootbox.dialog({title:"Rename Variable",message:`
      <div>
        <label>Enter a label:</label>
        <input type="text" class="form-control" id="new-label" value=${f.getLabel()}>
        ${b}
      </div>
    `,buttons:{cancel:{label:"Cancel",className:"btn-default"},confirm:{label:"Rename",className:"btn-primary",callback(){let C=document.getElementById("new-label").value;const _=t.dataAvail&&f.isObserved()?document.getElementById("label-dropdown").value:"";let L;if(C==f.getLabel()&&_!=""?L=_:L=C,!tn(L))return!1;L&&(f.setLabel(L),$&&$.includes(f.getLabel())?(f.link(),ge("success",`Variable ${f.data("label")} linked to data`)):f.isLinked()&&(f.unlink(),ge("info",`Variable ${f.getLabel()} unlinked`)),ie(s.mode))}}},onShown(C){document.getElementById("new-label").addEventListener("keypress",function(_){_.key==="Enter"&&(_.preventDefault(),C.target.querySelector(".btn-primary").click())})}})}},{id:"remove-node",content:"Delete Variable",selector:`node.${me}, node.${le}, node.${Le}`,onClickFunction(c){(c.target||c.cyTarget).remove(),ie(s.mode)},show:"full",hasTrailingDivider:!0},{id:"change-latent",content:"Change to Latent",selector:`node.${le}`,onClickFunction(c){(c.target||c.cyTarget).makeLatent(),ie(s.mode)},show:"full",hasTrailingDivider:!1},{id:"change-ordered",content:"Change to Ordered",selector:`node.${le}.${Ye}`,onClickFunction(c){const f=c.target||c.cyTarget;f.makeOrdered(),f.connectedEdges().forEach($=>{$.myIsLoop()&&$.isUserAdded()&&($.remove(),ge("warning","Removed variance user-defined arrow as it is not allowed for ordered variables."))}),ie(s.mode)},show:"full",hasTrailingDivider:!0},{id:"change-continous",content:"Change to Continous",selector:`node.${le}.${We}`,onClickFunction(c){(c.target||c.cyTarget).makeContinous(),ie(s.mode)},show:"full",hasTrailingDivider:!0},{id:"change-observed",show:"full",content:"Change to Observed",selector:`node.${me}`,hasTrailingDivider:!0,onClickFunction(c){const f=c.target||c.cyTarget;f.makeObserved();let $=t.columnNames;$&&$.includes(f.getLabel())&&(f.link(),bootbox.alert("Variable linked with data set")),ie(s.mode)}},{id:"color-node",content:"Change Background Color",selector:"node",show:"both",onClickFunction(c){var f=c.target||c.cyTarget;const $=d(f,"nodes");if($===null)return null;m(f,$,"nodes")}},{id:"change-border-width",content:"Change Border Width",show:"both",selector:`node.${me}, node.${le}, node.${Le}`,onClickFunction(c){var f=c.target||c.cyTarget;const $=d(f,"nodes");if($===null)return null;bootbox.prompt({title:"Enter New Border Width:",value:f.style("border-width"),callback(h){h!==null&&o.do("style",{eles:$,style:{"border-width":h}})}})}},{id:"change-font-size",content:"Change Font Size",show:"both",hasTrailingDivider:!0,selector:`node.${me}, node.${le}, node.${Le}, edge`,onClickFunction(c){var f=c.target||c.cyTarget;const $=d(f,"nodes.edges");if($===null)return null;bootbox.prompt({title:"Enter New Font Size:",value:f.style("font-size"),callback(h){h!==null&&o.do("style",{eles:$,style:{"font-size":h}})}})}}];let a;function m(c,f,$){var h=document.getElementById("picker");h.style.display="block",h.style.left=event.pageX+"px",h.style.top=event.pageY+"px";let b;a=f;const C=function(v){b=v.hexString};l.on("color:change",C);const _=function(v){h.contains(v.target)||($=="edge"?o.do("style",{eles:a,style:{"line-color":b,"target-arrow-color":b,"source-arrow-color":b}}):o.do("style",{eles:a,style:{"background-color":b}}),h.style.display="none",l.off("color:change",C),document.removeEventListener("click",_),document.removeEventListener("keydown",L))};setTimeout(()=>document.addEventListener("click",_),0);const L=function(v){v.key==="Enter"&&_(v)};document.addEventListener("keydown",L)}const g=Oi(u,t.full);return we(()=>{r.contextMenus({menuItems:g})}),[]}class Ti extends X{constructor(e){super(),Z(this,e,Ni,null,K,{})}}function xi(n){let e,i,t,o,s,r,l,d,u,a,m,g,c,f,$,h,b,C,_,L,v,y,w,T;return{c(){e=U("div"),i=U("button"),t=_e("Show Data"),s=V(),r=U("div"),l=U("button"),d=_e("User Model"),a=V(),m=U("button"),g=_e("Autocompleted Model"),f=V(),$=U("button"),h=_e("Estimates"),_=V(),L=U("button"),v=_e("More Results"),E(i,"class","btn btn-lg btn-default"),i.disabled=o=!n[2].dataAvail,E(l,"class",u="btn btn-lg "+(n[1]==="user model"?"btn-primary active":"btn-default")),E(m,"class",c="btn btn-lg "+(n[1]==="full model"?"btn-primary active":"btn-default")),E($,"class",b="btn btn-lg "+(n[1]==="estimate"?"btn-primary active":"btn-default")),$.disabled=C=!n[2].dataAvail||n[2].modelEmpty,E(r,"class","btn-group btn-toggle svelte-xny576"),E(L,"class","btn btn-lg btn-default"),L.disabled=y=n[0].mode!="estimate",E(e,"class","toolbox navbar-static-bottom svelte-xny576")},m(S,p){O(S,e,p),R(e,i),R(i,t),R(e,s),R(e,r),R(r,l),R(l,d),R(r,a),R(r,m),R(m,g),R(r,f),R(r,$),R($,h),R(e,_),R(e,L),R(L,v),w||(T=[oe(i,"click",n[6]),oe(l,"click",n[7]),oe(m,"click",n[8]),oe($,"click",n[9]),oe(L,"click",n[10])],w=!0)},p(S,[p]){p&4&&o!==(o=!S[2].dataAvail)&&(i.disabled=o),p&2&&u!==(u="btn btn-lg "+(S[1]==="user model"?"btn-primary active":"btn-default"))&&E(l,"class",u),p&2&&c!==(c="btn btn-lg "+(S[1]==="full model"?"btn-primary active":"btn-default"))&&E(m,"class",c),p&2&&b!==(b="btn btn-lg "+(S[1]==="estimate"?"btn-primary active":"btn-default"))&&E($,"class",b),p&4&&C!==(C=!S[2].dataAvail||S[2].modelEmpty)&&($.disabled=C),p&1&&y!==(y=S[0].mode!="estimate")&&(L.disabled=y)},i:ce,o:ce,d(S){S&&N(e),w=!1,Je(T)}}}function Pi(){window.$("#data-modal-2").modal()}function Vi(n,e,i){let t,o,s;te(n,ne,$=>i(0,t=$)),te(n,B,$=>i(2,o=$)),te(n,ue,$=>i(11,s=$));let r;function l($){i(1,r=$),$!=="user model"?W(ue,s.showLav=!0,s):W(ue,s.showLav=!1,s),W(ne,t.mode=$,t)}window.$("#data-modal-extend-results").on("hidden.bs.modal",function(){W(B,o.showServerErrors=!0,o)});function d(){window.$("#data-modal-extend-results").modal(),W(B,o.showServerErrors=!1,o)}let u=!1;we(()=>{i(5,u=!0)});const a=()=>Pi(),m=()=>l("user model"),g=()=>l("full model"),c=()=>l("estimate"),f=()=>d();return n.$$.update=()=>{n.$$.dirty&33&&u&&i(1,r=t.mode)},[t,r,o,l,d,u,a,m,g,c,f]}class Ri extends X{constructor(e){super(),Z(this,e,Vi,xi,K,{})}}function zi(){return typeof Shiny=="object"&&Shiny!==null}function Bi(n){let e=0,i=Number.NEGATIVE_INFINITY,t=Number.NEGATIVE_INFINITY,o=n.nodes().length;n.nodes().forEach(l=>{let d=l.position();e+=d.x,d.x>i&&(i=d.x),d.y>t&&(t=d.y)});let s=e/o,r=t+100;return{x:s,y:r}}function Ui(n,e){if(!n)throw new Error(e||"Assertion failed")}function Gi(n,e,i){let t,o,s;te(n,ne,a=>i(0,t=a)),te(n,B,a=>i(1,o=a)),te(n,Ie,a=>i(2,s=a));function r(a,m,g){let c,f,$;return m==="=~"?(c=Me,f=a,$=g):m=="~1"?(f=1,$=a,c=Me):m==="~~"?($=g,f=a,a===g?c=st:c=Fe):($=a,f=g,c=Me),{directed:c,source:f,target:$}}function l(a,m,g,c){let f=r(a,m,g);f.user=c;const h=Y(Q).edges(function(b){let C;if(f.source!=1?(C=b.source().getLabel()==f.source&&b.target().getLabel()==f.target,f.directed==Fe&&(C=C||b.source().getLabel()==f.target&&b.target().getLabel()==f.source)):C=b.source().isConstant()&&b.target().getLabel()==f.target,f.user!=null)if(f.user==1)C=C&&b.isUserAdded();else if(f.user==0)C=C&&b.isLavaanAdded();else throw new Error("User was neither 0 nor 1");return C});if(h.length>1)throw new Error("Multiple edges found");return h}function d(a,m){W(B,o.meansModelled=!1,o),W(B,o.loadingMode=!0,o);let g=Y(Q);if(!m)g.edges().invalidate();else{let b=function(L,v,y){be(L,y,!1,v)};const h=Array.isArray(a.obs)?a.obs:[a.obs];let C={x:200,y:200};for(let L=0;L<h.length;L++)C.x=C.x+50,b(le,h[L],C);const _=Array.isArray(a.latent)?a.latent:[a.latent];C={x:200,y:100};for(let L=0;L<_.length;L++)C.x=C.x+50,b(me,_[L]);a=a.parTable}const c=new Set;for(let h=0;h<a.lhs.length;h++)a.op[h]==="|"&&c.add(a.lhs[h]);let f=!1,$;for(let h=0;h<a.lhs.length;h++){if(a.op[h]=="~*~"||a.op[h]=="|"||a.op[h]=="==")continue;let b=l(a.lhs[h],a.op[h],a.rhs[h],a.user[h]);if(!m&&a.user[h]==1)Ui(b.length==1),b.validate(),b.isModifiedLavaan()&&b.isFixed()&&b.revertLavaanFix(),a.free[h]==0&&!b.isFixed()&&b.fixPara(a.ustart[h]).markModifiedLavaan();else{let C;if(m||b.length==0){const _=r(a.lhs[h],a.op[h],a.rhs[h]);if(m&&o.full&&a.user[h]==0)continue;let L;if(_.source!==1)L=g.nodes(function(y){return y.getLabel()==_.source})[0].id();else{if(W(B,o.meansModelled=!0,o),a.free[h]==0&&a.ustart[h]==0)continue;f||($=be(Le,Bi(g),!1),f=!0,g.nodes(function(w){return w.id()==$})[0].markAddedLavaan()),L=$}const v=g.nodes(function(y){return y.getLabel()==_.target})[0].id();C=g.add({groups:"edges",data:{source:L,target:v},classes:_.directed+" nolabel"}),a.label[h]!=""&&C.addLabelImport(a.label[h]),a.user[h]==1?C.markAddedUser():C.markAddedLavaan(),!m&&_.directed==Me&&(pe(L),pe(v))}else!m&&b.length==1&&(C=b);a.free[h]==0?a.ustart[h]!==0&&a.exo[h]!==1?c.has(C.target().getLabel())&&a.op[h]=="~~"?C.fixPara("Total Variance 1"):C.fixPara(a.ustart[h]):C.remove():C.setFree(),m||C.validate()}}if(!m)g.edges().forEach(h=>{h.isValid()||h.remove()}),g.getLavaanNodes().forEach(h=>{h.connectedEdges().length==0&&(h.remove(),g.nodes().forEach(b=>{pe(b.id())}))});else{ot("tree",!1);const h=new Map;g.getUndirectedEdges().forEach(_=>{const L=pe(_.source().id(),!0),v=pe(_.target().id(),!0),y=w=>{h.set(w,(h.get(w)||0)+1)};y(L),y(v)});let b=null,C=0;h.forEach((_,L)=>{_>C&&(C=_,b=L)}),b===180&&g.edges().forEach(_=>{_.isUserAdded()&&_.data("control-point-distances",[100])}),g.fit()}o.parsedModel||W(B,o.parsedModel=!0,o),g.getUserEdges().length>0&&W(B,o.modelEmpty=!1,o),W(B,o.loadingMode=!1,o)}function u(a,m){Y(Q);const g=a.op.some(c=>c.includes("~~"));for(let c=0;c<a.lhs.length;c++){if(a.op[c]=="~*~"||a.op[c]=="|")continue;let f=l(a.lhs[c],a.op[c],a.rhs[c]);if(f.length>0){let $={};f.isFree()?($.est=a.est[c],$.p_value=a.pvalue[c],$.se=a.se[c],$.ciLow=a["ci.lower"][c],$.ciHigh=a["ci.upper"][c],$.est_std=m["est.std"][c],$.se_std=m.se[c],$.ciLow_std=m["ci.lower"][c],$.ciHigh_std=m["ci.upper"][c],f.addClass("hasEst")):g&&a.op[c]=="~~"&&($.estFixed=a.est[c],$.estFixed_std=m["est.std"][c],f.addClass("hasEstFixed")),f.data("estimates",$)}}}return zi()&&(Shiny.addCustomMessageHandler("dataInfo",function(a){gt(a.columns),W(B,o.columnNames=[...a.columns],o),W(B,o.ids=[...a.columns],o),W(B,o.loadedFileName=a.name,o),W(B,o.dataAvail=!0,o),ie(t.mode),window.$("#upload-modal").modal("hide"),a.showData&&window.$("#data-modal-2").modal()}),Shiny.addCustomMessageHandler("lav_failed",function(a){W(B,o.fitting=!1,o),a=="stopped"?ge("danger","Fitting stopped by user"):ge("danger","Fitting failed")}),Shiny.addCustomMessageHandler("fitting",function(a){W(B,o.fitting=!0,o)}),Shiny.addCustomMessageHandler("lav_warning_error",function(a){const m=a.type=="warning"?"warning":"error";a.origin=="loading data"&&window.$("#upload-modal").modal("hide"),ge(a.type,`During ${a.origin} the following ${m} occurred: ${a.message}`)}),Shiny.addCustomMessageHandler("lav_error_fitting",function(a){W(B,o.fitting=!1,o),ge(a.type,"During "+a.origin+" the following error occurred: "+a.message)}),Shiny.addCustomMessageHandler("usecache",function(a){ge("info","Reusing cached results because model and data did not change since last fit")}),Shiny.addCustomMessageHandler("data_missing",function(a){ge("danger","Could not fit model because no data is available")}),Shiny.addCustomMessageHandler("columnames",function(a){const m=Y(Q),g=o.columnNames[a.index];W(B,o.columnNames[a.index]=a.newcolname,o),m.getObservedNodes().forEach(c=>{c.getLabel()==g&&(c.setLabel(a.newcolname),ie(t.mode))}),gt(o.columnNames)}),Shiny.addCustomMessageHandler("missing_vars",function(a){var m=[].concat(a).join(", ");ge("danger","Could not fit model because "+m+" are observed variables in the model but not present in the data.")}),Shiny.addCustomMessageHandler("lav_model",function(a){d(a,!1)}),Shiny.addCustomMessageHandler("imported_model",function(a){d(a,!0);let m=Y(Q);Array.isArray(a.ordered)||(a.ordered=[a.ordered]),a.ordered.forEach(g=>{m.nodes(function(c){return c.getLabel()==g})[0].makeOrdered()}),W(ne,t.fix_first=!1,t),ge("warning","lavaangui only imports user edges. Your full model is very likely different than what you fitted in lavaan because of different options used. To display the model, as you fitted it in lavaan, use plot_lavaan")}),Shiny.addCustomMessageHandler("lav_results",function(a){W(B,o.loadingMode=!0,o),W(Ie,s.lastFitLavFit=a.fitted_model,s),W(Ie,s.lastFitModel=a.model,s),W(Ie,s.lastFitData=a.data,s),W(B,o.fitting=!1,o),W(B,o.loadingMode=!1,o)}),Shiny.addCustomMessageHandler("lav_estimates",function(a){const m=a.normal,g=a.std;u(m,g)}),Shiny.addCustomMessageHandler("setToEstimate",function(a){W(ne,t.mode="estimate",t)})),[]}class qi extends X{constructor(e){super(),Z(this,e,Gi,null,K,{})}}function ji(n){Rn(H);let e=Y(Q);var i={zoomFactor:.05,zoomDelay:45,minZoom:e.minZoom(),maxZoom:e.maxZoom(),fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,zoomOnly:!1,fitSelector:void 0,animateOnFit(){return!1},fitAnimationDuration:1e3};return we(()=>{e.panzoom(i),e.on("zoom",function(t){var o=e.zoom();o<i.minZoom?e.zoom(i.minZoom):o>i.maxZoom&&e.zoom(i.maxZoom)})}),[]}class Hi extends X{constructor(e){super(),Z(this,e,ji,null,K,{})}}function Wi(n){let e,i;const t=n[1].default,o=Xe(t,n,n[0],null);return{c(){e=U("div"),o&&o.c(),E(e,"class","svelte-16igfw6")},m(s,r){O(s,e,r),o&&o.m(e,null),i=!0},p(s,[r]){o&&o.p&&(!i||r&1)&&Ze(o,t,s,s[0],i?Qe(t,s[0],r,null):Ke(s[0]),null)},i(s){i||(M(o,s),i=!0)},o(s){F(o,s),i=!1},d(s){s&&N(e),o&&o.d(s)}}}function Yi(n,e,i){let{$$slots:t={},$$scope:o}=e;return n.$$set=s=>{"$$scope"in s&&i(0,o=s.$$scope)},[o,t]}class Ji extends X{constructor(e){super(),Z(this,e,Yi,Wi,K,{})}}function Xi(n,e,i){let t,o;te(n,De,r=>i(0,t=r)),te(n,B,r=>i(1,o=r));let s=Y(Q);return setInterval(()=>{o.drawing=="none"&&s&&(s.autoungrabify(!1),s.nodes().grabify(),W(B,o.undoEmpty=t.isUndoStackEmpty(),o),W(B,o.redoEmpty=t.isRedoStackEmpty(),o))},1e3),window.addEventListener("beforeunload",r=>{r.preventDefault(),r.returnValue=""}),we(()=>{Shiny.unbindAll(),Shiny.bindAll()}),[]}class Zi extends X{constructor(e){super(),Z(this,e,Xi,null,K,{})}}function nn(n){let e,i,t,o,s,r;return{c(){e=U("div"),i=U("button"),i.innerHTML='<span class="glyphicon glyphicon-refresh spinning svelte-16d2v0h"></span> Fitting...',t=V(),o=U("button"),o.textContent="Cancel",E(i,"class","btn btn-lg btn-secondary fixed-width disabled-button svelte-16d2v0h"),E(i,"id","fitting-button"),i.disabled=!0,E(o,"class","btn btn-lg btn-default fixed-width svelte-16d2v0h"),E(e,"class","center-screen svelte-16d2v0h")},m(l,d){O(l,e,d),R(e,i),R(e,t),R(e,o),s||(r=oe(o,"click",Qi),s=!0)},p:ce,d(l){l&&N(e),s=!1,r()}}}function Ki(n){let e,i=n[0].fitting&&nn();return{c(){i&&i.c(),e=Be()},m(t,o){i&&i.m(t,o),O(t,e,o)},p(t,[o]){t[0].fitting?i?i.p(t,o):(i=nn(),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:ce,o:ce,d(t){i&&i.d(t),t&&N(e)}}}function Qi(){Shiny.setInputValue("run-abort",Math.random())}function es(n,e,i){let t;return te(n,B,o=>i(0,t=o)),[t]}class ts extends X{constructor(e){super(),Z(this,e,es,Ki,K,{})}}function on(n){let e,i,t=n[2][n[0].type].label+"",o,s,r=n[0].message+"",l,d;return{c(){e=U("div"),i=U("strong"),o=_e(t),s=V(),l=_e(r),E(e,"class",d=Ve(n[2][n[0].type].class+(n[1]?" fadeOut":""))+" svelte-1wv9zbn")},m(u,a){O(u,e,a),R(e,i),R(i,o),R(e,s),R(e,l)},p(u,a){a&1&&t!==(t=u[2][u[0].type].label+"")&&Re(o,t),a&1&&r!==(r=u[0].message+"")&&Re(l,r),a&3&&d!==(d=Ve(u[2][u[0].type].class+(u[1]?" fadeOut":""))+" svelte-1wv9zbn")&&E(e,"class",d)},d(u){u&&N(e)}}}function ns(n){let e,i=n[0].message!==""&&on(n);return{c(){i&&i.c(),e=Be()},m(t,o){i&&i.m(t,o),O(t,e,o)},p(t,[o]){t[0].message!==""?i?i.p(t,o):(i=on(t),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:ce,o:ce,d(t){i&&i.d(t),t&&N(e)}}}function os(n,e,i){let t;te(n,mn,l=>i(0,t=l));let o={success:{class:"alert-success",label:"Success!"},info:{class:"alert-info",label:"Info!"},warning:{class:"alert-warning",label:"Warning!"},danger:{class:"alert-danger",label:"Danger!"}},s=!1,r;return n.$$.update=()=>{n.$$.dirty&9&&t.message!==""&&(i(1,s=!1),clearTimeout(r),i(3,r=setTimeout(()=>{i(1,s=!0)},1e4)))},[t,s,o,r]}class is extends X{constructor(e){super(),Z(this,e,os,ns,K,{})}}function ss(n,e){const i={};return n.forEach((t,o)=>{i[t]=e[o]}),i}function rs(n,e){const i=Object.keys(e);let t={};return i.forEach(o=>{n.hasOwnProperty(o)&&(t[o]=n[o])}),t}function ls(n,e,i){let t,o,s;te(n,De,l=>i(0,t=l)),te(n,B,l=>i(1,o=l)),te(n,ne,l=>i(2,s=l));let r=Y(Q);return we(()=>{H.use(zn);const l={isDebug:!0};let d=r.undoRedo(l);De.set(d),d.action("style",function(u){let a={};const m=Object.keys(u.style);return u.eles.forEach(function(g){let c=[];m.forEach(f=>{c.push(g.data(f)||g.style(f)),g.data(f,u.style[f])}),a[g.id()]=ss(m,c)}),{eles:u.eles,style:a}},function(u){const a=rs(u.eles[0].style(),u.style[Object.keys(u.style)[0]]);return Object.keys(u.style).forEach(function(m){var g=r.getElementById(m);for(var c in u.style[m])g.data(c,u.style[m][c])}),{eles:u.eles,style:a}}),r.on("afterUndo",function(u,a){a!=="style"&&a!=="move"&&ie(s.mode)}),r.on("afterRedo",function(u,a){a!=="style"&&a!=="move"&&ie(s.mode)}),document.addEventListener("keydown",function(u){(u.ctrlKey||u.metaKey)&&u.target.nodeName==="BODY"&&u.which===90&&!o.fitting&&(u.preventDefault(),u.stopPropagation(),u.shiftKey?t.redo():t.undo())}),document.addEventListener("keyup",function(u){u.metaKey&&u.target.nodeName==="BODY"&&u.which===90&&(u.preventDefault(),u.stopPropagation())})}),[]}class as extends X{constructor(e){super(),Z(this,e,ls,null,K,{})}}function ds(n,e,i){let t;return te(n,B,o=>i(0,t=o)),Shiny.addCustomMessageHandler("fullServer",function(o){W(B,t.full=o.full,t),W(B,t.ready=!0,t),W(B,t.shinyapps=o.shinyapps,t)}),[]}class us extends X{constructor(e){super(),Z(this,e,ds,null,K,{})}}function cs(n,e,i){let t;te(n,ue,s=>i(1,t=s));let o=!1;return we(()=>{i(0,o=!0)}),n.$$.update=()=>{n.$$.dirty&3&&o&&Go(t.showVar,t.showLav,t.showMean),n.$$.dirty&3&&o&&Uo(t.view,t.std,t.number_digits)},[o,t]}class fs extends X{constructor(e){super(),Z(this,e,cs,null,K,{})}}function ms(n){let e,i,t,o;const s=n[6].default,r=Xe(s,n,n[5],null);return{c(){e=U("section"),r&&r.c(),ve(e,"left",n[0]+"px"),ve(e,"top",n[1]+"px"),E(e,"class","draggable svelte-13fkbj1")},m(l,d){O(l,e,d),r&&r.m(e,null),i=!0,t||(o=[oe(window,"mouseup",n[4]),oe(window,"mousemove",n[3]),oe(e,"mousedown",n[2])],t=!0)},p(l,[d]){r&&r.p&&(!i||d&32)&&Ze(r,s,l,l[5],i?Qe(s,l[5],d,null):Ke(l[5]),null),(!i||d&1)&&ve(e,"left",l[0]+"px"),(!i||d&2)&&ve(e,"top",l[1]+"px")},i(l){i||(M(r,l),i=!0)},o(l){F(r,l),i=!1},d(l){l&&N(e),r&&r.d(l),t=!1,Je(o)}}}function gs(n,e,i){let{$$slots:t={},$$scope:o}=e,{left:s=100}=e,{top:r=100}=e,l=!1,d=0,u=0;function a(c){l=!0,d=c.clientX-s,u=c.clientY-r}function m(c){l&&(i(0,s=c.clientX-d),i(1,r=c.clientY-u))}function g(){l=!1}return n.$$set=c=>{"left"in c&&i(0,s=c.left),"top"in c&&i(1,r=c.top),"$$scope"in c&&i(5,o=c.$$scope)},[s,r,a,m,g,o,t]}class ps extends X{constructor(e){super(),Z(this,e,gs,ms,K,{left:0,top:1})}}function hs(n){let e,i,t;const o=n[0].default,s=Xe(o,n,n[1],null);return{c(){e=U("ul"),i=U("div"),s&&s.c(),ve(i,"display","flex"),ve(i,"flex-direction","column"),E(e,"class","nav navbar-nav navbar-left"),ve(e,"border","1px solid black"),ve(e,"z-index","9999")},m(r,l){O(r,e,l),R(e,i),s&&s.m(i,null),t=!0},p(r,l){s&&s.p&&(!t||l&2)&&Ze(s,o,r,r[1],t?Qe(o,r[1],l,null):Ke(r[1]),null)},i(r){t||(M(s,r),t=!0)},o(r){F(s,r),t=!1},d(r){r&&N(e),s&&s.d(r)}}}function bs(n){let e,i;return e=new ps({props:{$$slots:{default:[hs]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},p(t,[o]){const s={};o&2&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}function _s(n,e,i){let{$$slots:t={},$$scope:o}=e;return n.$$set=s=>{"$$scope"in s&&i(1,o=s.$$scope)},[t,o]}class vs extends X{constructor(e){super(),Z(this,e,_s,bs,K,{})}}function $s(n,e){return bootbox.alert({title:"<span style='color: red;'>Error</span>",message:`A ${e} error occurred:<br> <span style='color: red;'>${n}</span>.<br><br>Please consider reporting this issue by sending an email to <a href="mailto:j.d.karch@fsw.leidenuniv.nl">j.d.karch@fsw.leidenuniv.nl</a>.`,centerVertical:!0}),!0}function ys(){return typeof Shiny=="object"&&Shiny!==null}function ws(n){return ys()&&Shiny.addCustomMessageHandler("serverError",function(e){Y(B).showServerErrors&&$s(e.msg,"Server")}),[]}class ks extends X{constructor(e){super(),Z(this,e,ws,null,K,{})}}function Es(n,e,i){let t;return te(n,ne,o=>i(0,t=o)),n.$$.update=()=>{n.$$.dirty&1&&ie(t.mode)},[t]}class Ss extends X{constructor(e){super(),Z(this,e,Es,null,K,{})}}function Cs(n){H.use(Bn);let e=Y(Q);return we(()=>{e.automove({nodesMatching:".automove-viewport",reposition:"viewport"})}),[]}class Ls extends X{constructor(e){super(),Z(this,e,Cs,null,K,{})}}function Ms(n){Un(H,window.$,fn);let e=Y(Q);return we(()=>{e.nodeEditing({resizeToContentCueImage:"",undoable:!0})}),[]}class Ds extends X{constructor(e){super(),Z(this,e,Ms,null,K,{})}}function As(n){return H("collection","init",function(){return this.addClass(Ee).addClass(He).addClass(he),this}),H("collection","free",function(){return this.hasClass(Ee)}),H("collection","addLabel",function(e){return this.addLabelImport(e).removeClass(Te),this}),H("collection","addLabelImport",function(e){return this.data("label",e).addClass(ze).removeClass(He),this}),H("collection","removeLabel",function(){return this.removeClass(ze).addClass(He).data("label",null),this}),H("collection","setLabel",function(e){return this.data("label",e),this}),H("collection","getLabel",function(){return this.data("label")}),H("collection","fixPara",function(e){return this.data("value",e).removeClass(Ee).removeClass(Ae).removeClass(Lt).addClass(Se),this}),H("collection","freePara",function(){return this.removeClass(Se).removeClass(Ae).removeClass(Te).addClass(Ee),this}),H("collection","setFree",function(){return this.removeClass(Se).removeClass(Ae).addClass(Ee),this}),H("collection","forceFreePara",function(){return this.removeClass(Ee).removeClass(Se).removeClass(Te).addClass(Ae),this}),H("collection","revert",function(){const e=this.source().id(),i=this.target().id();return this.move({source:i,target:e}),this}),H("collection","setUndirected",function(){return this.removeClass(Me).addClass(Fe),this}),H("collection","setDirected",function(){return this.removeClass(Fe).addClass(Me),this}),H("collection","isUndirected",function(){return this.hasClass(Fe)}),H("collection","isDirected",function(){return this.hasClass(Me)}),H("collection","makeLoop",function(){return this.addClass(st),this}),H("collection","myIsLoop",function(){return this.hasClass(st)}),H("collection","makeMeanEdge",function(){return this.data("isMean","1"),this}),H("collection","isMean",function(){return this.data("isMean")==="1"||this.isConstant()}),H("collection","makeOtherEdge",function(){return this.data("isMean","0"),this}),H("collection","isFixed",function(){return this.hasClass(Se)}),H("collection","isFree",function(){return this.hasClass(Ee)||this.hasClass(Ae)}),H("collection","isForceFree",function(){return this.hasClass(Ae)}),H("collection","hasLabel",function(){return this.hasClass(ze)}),H("collection","isModifiedLavaan",function(){return this.hasClass(Te)}),H("collection","markModifiedLavaan",function(){return this.addClass(Te),this}),H("collection","markAddedLavaan",function(){return this.addClass(xe).removeClass(he),this}),H("collection","markAddedUser",function(){return this.removeClass(xe).addClass(he),this}),H("collection","isUserAdded",function(){return this.hasClass(he)}),H("collection","isLavaanAdded",function(){return this.hasClass(xe)}),H("collection","getValue",function(){return this.data("value")}),H("collection","setValue",function(e){this.data("value",e)}),H("collection","invalidate",function(){return this.removeClass(ut),this}),H("collection","validate",function(){return this.addClass(ut),this}),H("collection","isValid",function(){return this.hasClass(ut)}),H("collection","revertLavaanFix",function(){this.freePara().removeClass(Te)}),H("collection","removeEstimates",function(){return this.removeClass(Lt).removeClass(Hn),this.removeData("estimates"),this}),H("collection","link",function(){return this.addClass(Ue),this}),H("collection","unlink",function(){return this.removeClass(Ue),this}),H("collection","isLinked",function(){return this.hasClass(Ue)}),H("collection","isLatent",function(){return this.hasClass(me)}),H("collection","makeLatent",function(){return this.removeClass(le).addClass(me).removeClass(Ue),this}),H("collection","makeObserved",function(){return this.addClass(le).removeClass(me),this}),H("collection","makeOrdered",function(){return this.removeClass(Ye).addClass(We),this}),H("collection","isOrdered",function(){return this.hasClass(We)}),H("collection","makeContinous",function(){return this.addClass(Ye).removeClass(We),this}),H("collection","isConstant",function(){return this.hasClass(Le)}),H("collection","isObserved",function(){return this.hasClass(le)}),H("core","getLavaanNodes",function(){return this.nodes(`.${xe}`)}),H("core","getLavaanEdges",function(){return this.edges(`.${xe}`)}),H("core","getObservedNodes",function(){return this.nodes(`.${le}`)}),H("core","getUserEdges",function(){return this.edges(`.${he}`)}),H("core","getUndirectedEdges",function(){return this.edges(`.${Fe}`)}),H("core","getLavaanModifiedEdges",function(){return this.edges(`.${Te}`)}),H("core","getLatentNodes",function(){return this.nodes(function(e){return e.hasClass(me)})}),[]}class Is extends X{constructor(e){super(),Z(this,e,As,null,K,{})}}function Fs(n){Gn(H,window.$,fn);let e=Y(Q);return we(()=>{const i="Bend";e.edgeEditing({undoable:!0,bendRemovalSensitivity:16,enableMultipleAnchorRemovalOption:!0,initAnchorsAutomatically:!1,useTrailingDividersAfterContextMenuOptions:!1,enableCreateAnchorOnDrag:!0,anchorShapeSizeFactor:4,addBendMenuItemTitle:null,removeBendMenuItemTitle:null,removeAllBendMenuItemTitle:null,addControlMenuItemTitle:`Add ${i} Point`,removeControlMenuItemTitle:`Remove ${i} Point`,removeAllControlMenuItemTitle:`Remove All ${i} Points`,handleReconnectEdge:!1}),e.style().update()}),[]}class Os extends X{constructor(e){super(),Z(this,e,Fs,null,K,{})}}const sn=840;function Ns(n,e,i){let t;te(n,B,r=>i(0,t=r));function o(){var r=setTimeout(s,sn*1e3);window.onmousemove=l,window.onmousedown=l,window.onclick=l,window.onscroll=l,window.onkeypress=l;function l(){clearTimeout(r),r=setTimeout(s,sn*1e3)}}async function s(){console.log("Timeout");let r=null,l=null;if(t.dataAvail&&(vn("saveData"),l=await new Promise(u=>{Shiny.addCustomMessageHandler("dataForSave",function(a){u(a)})})),t.modelEmpty||(r=bt()),r!=null||l!=null){bootbox.alert("Due to inactivity, you will be disconnected from the server shortly. Your work was saved for you. In case you have already been disconnected now, you can continue where you left off by refreshing the page.");let u=sessionStorage.getItem("sessionId");u||(u=Date.now().toString(),sessionStorage.setItem("sessionId",u),console.log("Session ID save: ",u));var d=new Ct("ModelDatabase");d.version(1).stores({cache:"sessionId, model, data"}),await d.cache.clear(),await d.cache.put({sessionId:u,model:r,data:l})}}return we(async()=>{let r=sessionStorage.getItem("sessionId");if(console.log("Session ID load: ",r),r){var l=new Ct("ModelDatabase");l.version(1).stores({cache:"sessionId, model, data"});const d=await l.cache.get(r);d.model&&(console.log("Model loaded from cache"),ht(d.model)),d.data&&(console.log("Data loaded from cache"),Shiny.setInputValue("dataUpload-fileInput",{content:btoa(d.data)}))}}),o(),[]}class Ts extends X{constructor(e){super(),Z(this,e,Ns,null,K,{})}}function rn(n){let e,i,t,o,s,r,l,d,u,a,m,g,c,f,$,h,b,C,_=n[0].full&&ln();i=new Kn({});const L=[Ps,xs],v=[];function y(S,p){return S[0].full?0:1}s=y(n),r=v[s]=L[s](n),d=new Ji({props:{$$slots:{default:[Rs]},$$scope:{ctx:n}}});let w=n[0].full&&dn();m=new Ii({}),c=new qi({}),$=new Zi({});let T=n[0].shinyapps&&un();return{c(){_&&_.c(),e=V(),G(i.$$.fragment),t=V(),o=U("div"),r.c(),l=V(),G(d.$$.fragment),u=V(),w&&w.c(),a=V(),G(m.$$.fragment),g=V(),G(c.$$.fragment),f=V(),G($.$$.fragment),h=V(),T&&T.c(),b=Be(),E(o,"class","svelte-15ghafl")},m(S,p){_&&_.m(S,p),O(S,e,p),q(i,S,p),O(S,t,p),O(S,o,p),v[s].m(o,null),R(o,l),q(d,o,null),R(o,u),w&&w.m(o,null),O(S,a,p),q(m,S,p),O(S,g,p),q(c,S,p),O(S,f,p),q($,S,p),O(S,h,p),T&&T.m(S,p),O(S,b,p),C=!0},p(S,p){S[0].full?_?p&1&&M(_,1):(_=ln(),_.c(),M(_,1),_.m(e.parentNode,e)):_&&($e(),F(_,1,1,()=>{_=null}),ye());let x=s;s=y(S),s!==x&&($e(),F(v[x],1,1,()=>{v[x]=null}),ye(),r=v[s],r||(r=v[s]=L[s](S),r.c()),M(r,1),r.m(o,l));const A={};p&3&&(A.$$scope={dirty:p,ctx:S}),d.$set(A),S[0].full?w?p&1&&M(w,1):(w=dn(),w.c(),M(w,1),w.m(o,null)):w&&($e(),F(w,1,1,()=>{w=null}),ye()),S[0].shinyapps?T?p&1&&M(T,1):(T=un(),T.c(),M(T,1),T.m(b.parentNode,b)):T&&($e(),F(T,1,1,()=>{T=null}),ye())},i(S){C||(M(_),M(i.$$.fragment,S),M(r),M(d.$$.fragment,S),M(w),M(m.$$.fragment,S),M(c.$$.fragment,S),M($.$$.fragment,S),M(T),C=!0)},o(S){F(_),F(i.$$.fragment,S),F(r),F(d.$$.fragment,S),F(w),F(m.$$.fragment,S),F(c.$$.fragment,S),F($.$$.fragment,S),F(T),C=!1},d(S){_&&_.d(S),S&&N(e),j(i,S),S&&N(t),S&&N(o),v[s].d(),j(d),w&&w.d(),S&&N(a),j(m,S),S&&N(g),j(c,S),S&&N(f),j($,S),S&&N(h),T&&T.d(S),S&&N(b)}}}function ln(n){let e,i;return e=new ts({}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}function xs(n){let e,i;return e=new vs({props:{$$slots:{default:[Vs]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}function Ps(n){let e,i;return e=new Li({}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}function Vs(n){let e,i,t,o,s,r,l,d;return e=new $n({props:{full:!1}}),t=new wn({props:{minimal:!0}}),s=new Sn({props:{minimal:!0}}),l=new Cn({props:{minimal:!0}}),{c(){G(e.$$.fragment),i=V(),G(t.$$.fragment),o=V(),G(s.$$.fragment),r=V(),G(l.$$.fragment)},m(u,a){q(e,u,a),O(u,i,a),q(t,u,a),O(u,o,a),q(s,u,a),O(u,r,a),q(l,u,a),d=!0},p:ce,i(u){d||(M(e.$$.fragment,u),M(t.$$.fragment,u),M(s.$$.fragment,u),M(l.$$.fragment,u),d=!0)},o(u){F(e.$$.fragment,u),F(t.$$.fragment,u),F(s.$$.fragment,u),F(l.$$.fragment,u),d=!1},d(u){j(e,u),u&&N(i),j(t,u),u&&N(o),j(s,u),u&&N(r),j(l,u)}}}function an(n){let e,i;return e=new Di({}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}function Rs(n){let e,i,t,o,s,r,l,d,u,a,m,g,c,f,$,h,b,C,_,L,v,y,w,T;e=new po({}),t=new as({}),s=new Is({}),l=new jn({}),u=new Ls({}),m=new Ds({}),c=new Hi({}),$=new Ti({}),b=new _o({}),_=new fs({}),v=new Os({});let S=n[0].full&&an();return{c(){G(e.$$.fragment),i=V(),G(t.$$.fragment),o=V(),G(s.$$.fragment),r=V(),G(l.$$.fragment),d=V(),G(u.$$.fragment),a=V(),G(m.$$.fragment),g=V(),G(c.$$.fragment),f=V(),G($.$$.fragment),h=V(),G(b.$$.fragment),C=V(),G(_.$$.fragment),L=V(),G(v.$$.fragment),y=V(),S&&S.c(),w=Be()},m(p,x){q(e,p,x),O(p,i,x),q(t,p,x),O(p,o,x),q(s,p,x),O(p,r,x),q(l,p,x),O(p,d,x),q(u,p,x),O(p,a,x),q(m,p,x),O(p,g,x),q(c,p,x),O(p,f,x),q($,p,x),O(p,h,x),q(b,p,x),O(p,C,x),q(_,p,x),O(p,L,x),q(v,p,x),O(p,y,x),S&&S.m(p,x),O(p,w,x),T=!0},p(p,x){p[0].full?S?x&1&&M(S,1):(S=an(),S.c(),M(S,1),S.m(w.parentNode,w)):S&&($e(),F(S,1,1,()=>{S=null}),ye())},i(p){T||(M(e.$$.fragment,p),M(t.$$.fragment,p),M(s.$$.fragment,p),M(l.$$.fragment,p),M(u.$$.fragment,p),M(m.$$.fragment,p),M(c.$$.fragment,p),M($.$$.fragment,p),M(b.$$.fragment,p),M(_.$$.fragment,p),M(v.$$.fragment,p),M(S),T=!0)},o(p){F(e.$$.fragment,p),F(t.$$.fragment,p),F(s.$$.fragment,p),F(l.$$.fragment,p),F(u.$$.fragment,p),F(m.$$.fragment,p),F(c.$$.fragment,p),F($.$$.fragment,p),F(b.$$.fragment,p),F(_.$$.fragment,p),F(v.$$.fragment,p),F(S),T=!1},d(p){j(e,p),p&&N(i),j(t,p),p&&N(o),j(s,p),p&&N(r),j(l,p),p&&N(d),j(u,p),p&&N(a),j(m,p),p&&N(g),j(c,p),p&&N(f),j($,p),p&&N(h),j(b,p),p&&N(C),j(_,p),p&&N(L),j(v,p),p&&N(y),S&&S.d(p),p&&N(w)}}}function dn(n){let e,i,t,o,s,r;return e=new is({}),t=new Ri({}),s=new Ss({}),{c(){G(e.$$.fragment),i=V(),G(t.$$.fragment),o=V(),G(s.$$.fragment)},m(l,d){q(e,l,d),O(l,i,d),q(t,l,d),O(l,o,d),q(s,l,d),r=!0},i(l){r||(M(e.$$.fragment,l),M(t.$$.fragment,l),M(s.$$.fragment,l),r=!0)},o(l){F(e.$$.fragment,l),F(t.$$.fragment,l),F(s.$$.fragment,l),r=!1},d(l){j(e,l),l&&N(i),j(t,l),l&&N(o),j(s,l)}}}function un(n){let e,i;return e=new Ts({}),{c(){G(e.$$.fragment)},m(t,o){q(e,t,o),i=!0},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){j(e,t)}}}function zs(n){let e,i,t,o,s;e=new us({});let r=n[0].ready&&rn(n);return o=new ks({}),{c(){G(e.$$.fragment),i=V(),r&&r.c(),t=V(),G(o.$$.fragment)},m(l,d){q(e,l,d),O(l,i,d),r&&r.m(l,d),O(l,t,d),q(o,l,d),s=!0},p(l,[d]){l[0].ready?r?(r.p(l,d),d&1&&M(r,1)):(r=rn(l),r.c(),M(r,1),r.m(t.parentNode,t)):r&&($e(),F(r,1,1,()=>{r=null}),ye())},i(l){s||(M(e.$$.fragment,l),M(r),M(o.$$.fragment,l),s=!0)},o(l){F(e.$$.fragment,l),F(r),F(o.$$.fragment,l),s=!1},d(l){j(e,l),l&&N(i),r&&r.d(l),l&&N(t),j(o,l)}}}function Bs(n,e,i){let t;return te(n,B,o=>i(0,t=o)),[t]}class Us extends X{constructor(e){super(),Z(this,e,Bs,zs,K,{})}}new Us({target:document.getElementById("app")});
