import{d as On,w as Ne,S as X,i as Z,s as K,c as te,g as Y,o as we,e as G,a as E,b as ve,f as I,l as ie,n as ce,h as N,r as Xe,j as W,k as se,m as V,t as Pe,p as R,q as Ie,u as _e,v as ze,x as Ze,y as q,z as j,A as Ke,B as Qe,C as et,D as M,E as O,F as H,G as Be,H as Ve,I as In,J as rt,K as dt,L as ae,M as ye,N as $e,O as de}from"./svelte-fdfc2579.js";import{c as B}from"./cytoscape-716fe419.js";import{g as Nn}from"./cytoscape-grid-guide-e8f04797.js";import{e as Tn}from"./cytoscape-edgehandles-98723a1d.js";import{v as gn}from"./uuid-4a60fe23.js";import{J as Mt}from"./jszip-84e7feea.js";import{s as xn}from"./cytoscape-svg-f6b36117.js";import{F as ct}from"./file-saver-daf94496.js";import{E as Pn}from"./jspdf-f4d4ca1d.js";import{U as Vn}from"./svg2pdf.js-0c98a8e5.js";import{d as Rn}from"./cytoscape-dagre-22838d04.js";import{f as zn}from"./cytoscape-fcose-1883323b.js";import{c as Bn}from"./cytoscape-cola-0e9b31a3.js";import{c as Un}from"./cytoscape-context-menus-864590d1.js";import{i as Gn}from"./@jaames-324f80d4.js";import{p as qn}from"./cytoscape-panzoom-50d4e635.js";import{u as jn}from"./cytoscape-undo-redo-8b156ffa.js";import{a as Hn}from"./cytoscape-automove-b06479d5.js";import{K as pn}from"./konva-9c11d4c7.js";import{n as Wn}from"./cytoscape-node-editing-50bf11b2.js";import{e as Yn}from"./cytoscape-edge-editing-11f5d8e5.js";import{D as Dt}from"./dexie-5509e3b5.js";import"./core-js-93797867.js";import"./functional-red-black-tree-9a31655a.js";import"./lodash.memoize-aae0dfad.js";import"./lodash.throttle-085a2e14.js";import"./dagre-e7a63eac.js";import"./graphlib-04d9d874.js";import"./lodash-399c0d8f.js";import"./@babel-f352b073.js";import"./fflate-7e11f8f1.js";import"./cssesc-ae0dab9a.js";import"./font-family-papandreou-e99f1152.js";import"./svgpath-0da963bf.js";import"./specificity-c7128631.js";import"./cose-base-abb6f3d0.js";import"./layout-base-8b616591.js";import"./webcola-fa77233e.js";import"./jquery-fb849a2e.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function o(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(i){if(i.ep)return;i.ep=!0;const s=o(i);fetch(i.href,s)}})();const Q=Ne(null),$t=Ne(null),De=Ne(null);let ne=Ne({meanStruc:"default",intOvFree:!0,intLvFree:!1,estimator:"default",se:"default",missing:"listwise",n_boot:1e3,fix_first:!0,fix_single:!0,auto_var:!0,auto_cov_lv_x:!0,auto_cov_y:!0,fixed_x:!0,mode:"user model","auto.th":!0,"auto.delta":!0}),ue=Ne({gridShow:!1,gridSpace:26,gridColor:"#dedede",gridWidth:1,gridMovePan:!1,gridSnap:!1,gridAlign:!0,gridResize:!1,showLav:!0,showVar:!0,showMean:!0,std:!1,view:"est",ci:.95,number_digits:2}),Fe=Ne({lastFitModel:null,lastFitLavFit:null,lastFitData:null}),U=Ne({fitting:!1,loadingMode:!1,runCounter:0,modelEmpty:!0,dataAvail:!1,columnNames:null,loadedFileName:null,ids:null,dragged:null,draggedName:null,full:!0,ready:!1,parsedModel:!1,meansModelled:null,buttonDown:!1,showServerErrors:!0,everEdge:!1,drawing:"none",undoEmpty:!0,redoEmpty:!0,server:!1,shinyapps:!1}),ht=Ne(0);On(U,n=>n.columnNames);const hn=Ne({type:"info",message:"",key:0});function ge(n,e){hn.update(o=>({type:n,message:e,key:o.key+1}))}ge("info","Greetings. lavaangui is BETA software. Please report any bugs at https://github.com/karchjd/lavaangui/issues.");function Jn(n,e,o){let t;te(n,ue,l=>o(1,t=l));let i=!1;Nn(B);let s=Y(Q);var r={snapToGridOnRelease:!1,drawGrid:!1,snapToAlignmentLocationDuringDrag:!1,distributionGuidelines:!0,geometricGuideline:!0,initPosAlignment:!1,centerToEdgeAlignment:!1,resize:!1,parentPadding:!1,guidelinesStackOrder:4,guidelinesTolerance:2,guidelinesStyle:{strokeStyle:"#8b7d6b",geometricGuidelineRange:2e3,range:100,minDistRange:10,distGuidelineOffset:10,horizontalDistColor:"#ff0000",verticalDistColor:"#00ff00",initPosAlignmentColor:"#0000ff",lineDash:[0,0],horizontalDistLine:[0,0],verticalDistLine:[0,0],initPosAlignmentLine:[0,0]},parentSpacing:-1};return we(()=>{s.gridGuide(r),o(0,i=!0)}),n.$$.update=()=>{n.$$.dirty&3&&i&&t.gridShow!==void 0&&Y(Q).gridGuide({drawGrid:t.gridShow}),n.$$.dirty&3&&i&&t.gridSpace!==void 0&&Y(Q).gridGuide({gridSpacing:t.gridSpace}),n.$$.dirty&3&&i&&t.gridWidth!==void 0&&Y(Q).gridGuide({lineWidth:t.gridWidth}),n.$$.dirty&3&&i&&t.gridMovePan!==void 0&&Y(Q).gridGuide({panGrid:t.gridMovePan}),n.$$.dirty&3&&i&&t.gridSnap!==void 0&&Y(Q).gridGuide({snapToGridDuringDrag:t.gridSnap}),n.$$.dirty&3&&i&&t.gridAlign!==void 0&&Y(Q).gridGuide({snapToAlignmentLocationOnRelease:t.gridAlign}),n.$$.dirty&3&&i&&t.gridResize!==void 0&&Y(Q).gridGuide({resize:t.gridResize})},[i,t]}class Xn extends X{constructor(e){super(),Z(this,e,Jn,null,K,{})}}const le="observed-variable",me="latent-variable",Le="constant",Ce="free",Ge="nolabel",he="fromUser",Re="label",Te="byLav",ke="fixed",Ae="forcefree",Me="directed",Oe="undirected",lt="loop",Ue="linked",xe="fromLav",At="hasEst",ft="validated",Je="continous",Ye="ordered",Zn="hasEstFixed",He=80,Kn=80,Qn="loRegression",ot="regression",We="factorLoad",bn={label:function(n){return n.data("label")+"@"+n.data("value")}},_n={label:function(n){return"@"+n.data("value")}},eo=[{selector:"element",style:{"font-size":function(n){return n.data("font-size")||14}}},{selector:"node",style:{width:He.toString(),height:"80","background-color":function(n){return n.data("background-color")||"white"},"border-color":function(n){return n.data("border-color")||"grey"},"border-width":function(n){return n.data("border-width")||"2px"},label:"data(label)","text-valign":"center","text-halign":"center","text-wrap":"ellipsis","text-max-width":function(n){return n.width()}}},{selector:`node.${le}`,style:{shape:"rectangle"}},{selector:`node.${le}.${Ye}`,style:{"border-style":"double","border-width":5}},{selector:`node.${me}`,style:{shape:function(n){return n.data("shape")||"ellipse"},"border-color":"black"}},{selector:`node.${Le}`,style:{shape:"triangle",label:"1","text-valign":"center","text-margin-y":"10px","border-color":"black"}},{selector:`node.${Ue}`,style:{"border-color":"black"}},{selector:"edge",style:{width:function(n){return n.data("width")||3},"line-color":function(n){return n.data("line-color")||"#000"},"target-arrow-color":function(n){return n.data("target-arrow-color")||"#000"},"source-arrow-color":function(n){return n.data("source-arrow-color")||"#000"},"target-arrow-shape":"triangle","line-style":function(n){return n.data("line-style")||"solid"},"curve-style":"bezier","text-valign":"center","text-halign":"center","text-wrap":"wrap","text-max-width":Kn,"z-index":10,color:"#000","text-outline-color":"#fff","text-outline-width":"2px","text-background-color":"#fff","text-background-opacity":1,"text-background-padding":"4px"}},{selector:"edge.loop",style:{"curve-style":"bezier","source-arrow-shape":"triangle","loop-direction":function(n){return n.data("loop-direction")||0},"loop-sweep":.8,"control-point-step-size":n=>{const e=n.source(),o=parseInt(e.style("height")),t=parseInt(e.style("width"));let i;return n.style("loop-direction")=="0deg"||n.style("loop-direction")=="180deg"?i=o:n.style("loop-direction")=="90deg"||n.style("loop-direction")=="270deg"?i=t:i=Math.max(t,o),i/80*60}}},{selector:`edge.${Oe}`,style:{"curve-style":"unbundled-bezier","control-point-distances":function(n){return n.data("control-point-distances")||[-100]},"control-point-weights":[.5],"source-arrow-shape":"triangle"}},{selector:`edge.${Re}, edge.${Re}`,style:{label:function(n){return n.data("label")}}},{selector:`edge.${ke}.${Re}`,style:_n},{selector:`edge.${ke}.${Ge}`,style:bn},{selector:`edge.${Ae}`,style:{"line-color":"blue"}},{selector:`edge.${xe}, edge.${Te}`,style:{"line-style":function(n){return n.data("line-style")||"dashed"}}},{selector:"edge.hidden, node.hidden",style:{display:"none"}},{selector:"edge:selected",style:{"underlay-opacity":.5,"underlay-color":"#928ff8"}},{selector:"node:selected",style:{"underlay-color":"#928ff8","underlay-opacity":.5}}],to={autoungrabify:!1,autolock:!1,style:eo,minZoom:.02,maxZoom:5},no={preview:!1,hoverDelay:150,handleNodes:"node",snap:!0,handleColor:"#ff0000",handleSize:10,canConnect:function(n,e){return!cy.edges(function(t){if(!t.isUserAdded())return!1;const i=t.source().id()==n.id()&&t.target().id()==e.id(),s=t.source().id()==e.id()&&t.target().id()==n.id();return i||s}).length}};function oo(n){B.use(Tn);var e=B(to);return e.boxSelectionEnabled(!0),Q.set(e),$t.set(e.edgehandles(no)),[]}class io extends X{constructor(e){super(),Z(this,e,oo,null,K,{})}}function oe(n){var e=Y(U);if(!e.full)return;let o=Y(Q);const t=o.edges();for(var i=0;i<t.length;i++)t[i].removeEstimates();if(o.getUserEdges().length==0){o.getLavaanNodes().remove(),o.getLavaanEdges().remove(),Shiny.setInputValue("show_help",Math.random());return}if(!e.dataAvail&&n=="estimate"){ge("danger","Model not send to lavaan because no data available");return}let s=vn(n);Shiny.setInputValue("run-fromJavascript",JSON.stringify(s)),Shiny.setInputValue("runCounter",Math.random()),n==="user model"&&o.getLavaanModifiedEdges().forEach(r=>{r.freePara()})}function so(n,e){for(let o=0;o<n.length;o++)if(n[o]===e)return!0;return!1}function it(n,e){let o;n==null?o="1":o=n.getLabel();let t=!1,i;if(e.isFixed()&&!e.isModifiedLavaan()?(i=e.getValue()+"*"+o,t=!0):e.isForceFree()&&(i="NA*"+o,t=!0),e.hasLabel()){const s=e.getLabel();t?i+=" + "+s+"*"+o:(t=!0,i=s+"*"+o)}else t||(i=o);return i}class ro{constructor(e,o,t=null,i=null,s=null,r=null){this.mode=e,Object.assign(this,{model:{options:t,syntax:i,R_script:o,ordered_labels:r},forceUpdate:Math.random(),cache:s})}}function Ft(n,e="target"){let o="";const t=Math.max(...n.map(l=>l[e]().position().x))-Math.min(...n.map(l=>l[e]().position().x)),i=Math.max(...n.map(l=>l[e]().position().y))-Math.min(...n.map(l=>l[e]().position().y)),s=t>=i?"x":"y",r=n.map((l,d)=>({index:d,value:l.target().position()[s]})).sort((l,d)=>l.value-d.value).map(l=>l.index);for(let l=0;l<n.length;l++){const d=n[r[l]][e]();l>0&&(o+=" + "),o+=it(d,n[r[l]])}return o}function vn(n){let e=Y(Q),o=Y(U),t="",i="";i+=`library(lavaan)
`,o.dataAvail?i+=`data <- read.csv("${o.loadedFileName}")
`:i+=`#make sure your data is loaded into the 'data' variable
`;let s=e.getLatentNodes();s=s.nodes(function(y){const $=y.connectedEdges(function(w){return w.isDirected()&&w.source().id()==y.id()});return $.length>0&&$.every(w=>w.target().isLatent())});let r=e.getLatentNodes();r=r.nodes(function(y){const $=y.connectedEdges(function(T){return T.isDirected()&&T.target().id()==y.id()}),w=y.connectedEdges(function(T){return T.isDirected()});return w.length>0&&$.length==w.length});let l=e.getLatentNodes(),d=!1;for(let y=0;y<l.length;y++){const $=l[y],w=$.connectedEdges(function(T){return T.isDirected()&&T.source().id()==$.id()&&(T.target().isObserved()&&T.isFactLoad()||s.some(C=>C.id()===$.id()))});w.length>0&&(d||(t+=`# measurement model
`,d=!0),t+=" "+$.getLabel()+" =~ "+Ft(w,"target")+`
`)}function c(y){return y.isDirected()&&!y.source().isConstant()&&(!(y.source().isLatent()&&y.target().isObserved())||y.isRegression())&&!(y.source().isLatent()&&s.some(w=>w.id()===y.source().id())&&y.target().isLatent())&&(y.isUserAdded()||y.isModifiedLavaan())&&!r.some(w=>w.id()===y.target().id())}let a=e.edges(c),m=[];for(let y=0;y<a.length;y++)so(m,a[y].target())||m.push(a[y].target());if(m.length>0){t+=`
# regressions`;for(let y=0;y<m.length;y++){const $=m[y],w=$.connectedEdges(T=>c(T)&&T.target().same($));if(w.length>0){let T="";for(var g=0;g<w.length;g++){var u=w[g].source();g>0&&(T+=" + "),T+=it(u,w[g])}t+=`
 `+$.getLabel()+" ~ "+T}}}let f=e.edges(function(y){return(y.isUndirected()||y.myIsLoop())&&(y.isUserAdded()||y.isModifiedLavaan())});if(f.length>0){t+=`

# (residual) (co)variances`;for(let y=0;y<f.length;y++){let $=f[y].source().data("label");t+=`
 `+$+" ~~ "+it(f[y].target(),f[y])}}const h=e.nodes(function(y){return y.isConstant()});for(let y=0;y<h.length;y++){const w=h[y].connectedEdges(function(T){return T.isUserAdded()});if(w.length>0){t+=`
# intercepts
`;for(var g=0;g<w.length;g++){var u=w[g].target();t+=" "+u.getLabel()+" ~ "+it(void 0,w[g])+`
`}}}d=!1;for(let y=0;y<r.length;y++){const $=r[y],w=$.connectedEdges(function(T){return T.isDirected()&&T.target().id()==$.id()});w.length>0&&(d||(t+=`

 #  formative factors
`,d=!0),t+=" "+$.getLabel()+" <~ "+Ft(w,"source")+`
`)}t=`'
`+t+`'

`;function b(y,$=60){return y.split(`
`).map(w=>{if(w.includes("+")&&w.length>$){const T=w.split(" + ");let C=[],p=T[0];const x=w.match(/^\s*/)[0],A=p.indexOf("~")+1;for(let J=1;J<T.length;J++)p.length+T[J].length+3>$?(C.push(p+" + "),p=x+" ".repeat(A)+T[J]):p+=" + "+T[J];return C.push(p),C.join(`
`)}return w}).join(`
`)}t=b(t);const S=e.nodes(function(y){return y.isOrdered()}).map(y=>y.getLabel()),v=lo(S);return i+="model <-"+t,i+="result <- lavaan(model, data, "+v,new ro(n,i,v,t=t,Y(Fe),S)}function lo(n){const e=Y(ne),o=Ee(e.meanStruc),t=Ee(e.intOvFree),i=Ee(e.intLvFree);let s=`meanstructure = ${o},
		 int.ov.free = ${t}, int.lv.free = ${i},
		 estimator = ${mt(e.estimator)}, se = ${mt(e.se)},
		 missing = ${mt(e.missing)}, auto.fix.first = ${Ee(e.fix_first)},
		 auto.fix.single = ${Ee(e.fix_single)}, auto.var = ${Ee(e.auto_var)},
		 auto.cov.lv.x = ${Ee(e.auto_cov_lv_x)}, auto.cov.y = ${Ee(e.auto_cov_y)},
  		 fixed.x = ${Ee(e.fixed_x)}, auto.th = ${Ee(e["auto.th"])}, 
  		 auto.delta = ${Ee(e["auto.delta"])}`;if(e.se=="boot"){const r=`, bootstrap = ${e.n_boot})`;s=s+r}else s=s+")";return n.length>0&&(s=`ordered = ${'c("'+n.join('", "')+'")'}, 
    		 ${s}`),s}function mt(n){return'"'+n+'"'}function Ee(n){if(n==!0||n=="true")return"TRUE";if(n==!1||n=="false")return"FALSE";if(n=="default")return'"default"';throw new Error("Should not happen")}let yn,$n;function wn(){yn=1,$n=1}wn();function ao(n){return new RegExp("^[a-zA-Z\\._][a-zA-Z0-9\\._]*(?<!\\.)$").test(n)}function uo(n){return ao(n)?!0:(bootbox.alert(`The variable <b>${n}</b> was not added to the model because <b>${n}</b> is not a valid lavaan variable name. Please use only letters, numbers, underscores, and dots. The name must start with a letter or underscore and cannot end with a dot. You can use the <b>Show Data</b> menu to rename <b>${n}</b>.`),!1)}function be(n,e,o=!0,t=null,i=!1){let s=Y(Q),r=gn(),l;if(t!==null){if(!uo(t))return;if(s.nodes().find(c=>c.data().label===t)){ge("danger","Node with the same label already exists.");return}l=t}else n==le?l="x"+yn++:n==me?l="f"+$n++:l=void 0,s.nodes().find(c=>c.data().label===l)&&(l=l+".1");let d=Y(De);return e?d.do("add",{group:"nodes",data:{id:r,label:l},classes:[n,Je],renderedPosition:e}):(e={x:Math.random()*400+50,y:Math.random()*400+50},s.add({group:"nodes",data:{id:r,label:l},classes:[n,Je],renderedPosition:e})),o&&oe(Y(ne).mode),r}function je(n,e,o=!0,t=!1,i=null,s=!0){let r=Y(Q),l=gn();return r.add({group:"edges",data:{id:l,source:n,target:e,value:t?i:void 0},classes:`${o?Me:Oe} ${s?he:xe} ${t?ke:Ce} ${Ge}`})}function pe(n,e=!1){const o=ho(n);if(!o&&!e)return null;const t=fo(n),i=mo(t),s=co(po(i),i);return o&&o.data("loop-direction",`${s}deg`),s}function co(n,e){const o=[0,180,90,270],t=35,i=o.sort((l,d)=>{const c=Math.min(Math.abs(l-n),360-Math.abs(l-n)),a=Math.min(Math.abs(d-n),360-Math.abs(d-n));return c-a}),r=[[0,180],[90,270]].flatMap(l=>i.filter(d=>l.includes(d)));for(const l of r)if(!e.some(c=>{const a=Math.abs(l-c);return Math.min(a,360-a)<=t}))return l;return n}function fo(n){const e=cy.getElementById(n);if(e.length===0){console.error(`Node with ID ${n} does not exist.`);return}let o=[];return e.connectedEdges(t=>t.style("display")!=="none").forEach(t=>{const i=t.source(),s=t.target();let r;(i.id()!==e.id()||s.id()!==e.id())&&(i.id()===e.id()?r=Ot(t.sourceEndpoint(),e.position()):r=Ot(t.targetEndpoint(),e.position()),o.push(r))}),o}function Ot(n,e){return Object.keys(n).reduce((o,t)=>{if(e.hasOwnProperty(t))o[t]=n[t]-e[t];else throw new Error(`Key ${t} not found in second object`);return o},{})}function mo(n){let e=[];return n.forEach(o=>{e.push(go(o))}),e}function go(n){let e=Math.atan2(n.y,n.x)*180/Math.PI;return e=(e+90)%360,e}function po(n){let e=-1,o=null;for(let t=0;t<=360;t++){let i=1/0;for(let s=0;s<n.length;s++){let r=Math.abs(n[s]-t);r=Math.min(r,360-r),i=Math.min(i,r)}i>e&&(e=i,o=t)}return o}function ho(n,e){var o=cy.getElementById(n),t=null;return o.connectedEdges().forEach(function(i){var s=i.source(),r=i.target();if(s.id()===n&&r.id()===n){t=i;return}}),t!==null&&o.connectedEdges().length>1&&!t.hasClass("fixDeg")?t:null}function bo(n){let e,o,t;return{c(){e=G("div"),E(e,"id","cy"),E(e,"class","graph svelte-11pj9ut"),ve(e,"flex-basis",n[1].full?"70%":"100%")},m(i,s){I(i,e,s),n[6](e),o||(t=[ie(e,"mouseover",n[2]),ie(e,"mouseout",n[3]),ie(e,"mousemove",n[4]),ie(e,"drop",n[5]),ie(e,"dragover",_o)],o=!0)},p(i,[s]){s&2&&ve(e,"flex-basis",i[1].full?"70%":"100%")},i:ce,o:ce,d(i){i&&N(e),n[6](null),o=!1,Xe(t)}}}function _o(n){n.preventDefault()}function vo(n,e){let o=Math.atan2(n,-e)*(180/Math.PI);return o<0&&(o+=360),o}function yo(n,e,o){let t,i,s;te(n,De,$=>o(12,t=$)),te(n,U,$=>o(1,i=$)),te(n,ne,$=>o(13,s=$));let r=Y(Q),l=Y($t),d,c={x:0,y:0};we(()=>{r.mount(d)});function a($){if(W(U,i.buttonDown=!0,i),($.key==="Alt"||$.key===" "||$.key.toLowerCase()==="x")&&(l.enableDrawMode(),$.key==="Alt"?W(U,i.drawing="undirected",i):W(U,i.drawing="directed",i)),$.key==="Backspace"){let w=r.$(":selected");w.length>0&&(t.do("remove",w),oe(s.mode)),W(U,i.buttonDown=!1,i)}if(["l","o","c"].includes($.key.toLowerCase())){let w;switch($.key.toLowerCase()){case"l":w=me;break;case"o":w=le;break;case"c":w=Le;break}be(w,{...c}),W(U,i.buttonDown=!1,i)}W(U,i.buttonDown=!1,i)}function m(){r.autoungrabify(!1),r.nodes().grabify()}function g($){($.key==="Alt"||$.key===" "||$.key.toLowerCase()==="x")&&(l.disableDrawMode(),W(U,i.drawing="none",i),m())}function u(){document.addEventListener("keydown",a),document.addEventListener("keyup",g)}function f(){document.removeEventListener("keydown",a,!1),document.removeEventListener("keyup",g,!1)}function h($){c.x=$.offsetX,c.y=$.offsetY}r.on("ehcomplete",($,w,T,C)=>{const p=C,x=w.id(),A=T.id();if(p.remove(),p.init(),x!==A?(i.drawing==="undirected"?p.setUndirected():p.setDirected(),pe(x),pe(A)):(p.makeLoop(),pe(A)),!((p.isUndirected()||p.myIsLoop())&&(w.isConstant()||T.isConstant()))&&!(p.isDirected()&&T.isConstant())&&(p.checkAndMarkPotentalLatObReg(),!(p.isDirected()&&w.isConstant()&&T.connectedEdges(F=>F.isUserAdded()&&F.source().isConstant()).length>1))){if(p.myIsLoop()&&w.isOrdered()){ge("error","User-defined variance arrow is not allowed for ordered variables.");return}p.isDirected()&&w.isConstant()?p.makeMeanEdge():p.makeOtherEdge(),t.do("add",p),oe(s.mode)}});function b($){let w=0;const T=100,C=T*2;$.preventDefault();let p={x:$.offsetX,y:$.offsetY};function x(F,k){let D;if(i.dataAvail){const fe=r.getObservedNodes().map(P=>P.data().label);D=i.columnNames.filter(P=>!fe.includes(P)).map(P=>({text:P,value:P}))}else D=Array.from({length:100},(fe,ee)=>`var${ee+1}`);const z={title:F,inputType:"select",multiple:!0,value:"",inputOptions:D,callback:k};bootbox.prompt(z)}function A(){ge("danger","Either no variable selected or at least one selected variable already is in the model.")}function J(F){return F&&!r.nodes().some(k=>k.data().label===F)}if(i.dragged=="observed-with-name")be(le,p,!0,i.draggedName,!0);else if(i.dragged=="multiple")x("Select Variables",function(F){if(J(F)){const k=r.zoom();F.forEach(D=>{be(le,{x:p.x+w*k,y:p.y},!0,D,!0),w+=T})}else A()});else if(i.dragged=="factor")x("Select Variables",function(F){if(J(F)){const k=r.zoom(),D=be(me,{x:p.x+T*k*F.length/2-He/2*k,y:p.y});F.forEach(z=>{const fe=be(le,{x:p.x+w*k,y:p.y+k*C},!0,z,!0);w+=T,je(D,fe)}),W(ne,s.fix_first=!0,s),W(ne,s.fix_single=!0,s),W(ne,s.auto_var=!0,s),W(ne,s.intOvFree=!0,s),W(ne,s.intLvFree=!1,s)}else A()});else if(i.dragged=="growth"){let F=0;x("Select Time Points",function(k){if(J(k)){const D=r.zoom(),z=be(Le,{x:p.x+T*D*k.length/2-He/2*D,y:p.y},!0),fe=be(me,{x:p.x+He/2*D,y:p.y+1*C*D},!0,"Intercept"),ee=be(me,{x:p.x+T*D*(k.length-1)-He/2*D,y:p.y+1*C*D},!0,"Slope");je(z,fe,!0,!1),je(z,ee,!0,!1);let P=1;k.forEach(re=>{const qe=be(le,{x:p.x+F*D,y:p.y+2*C*D},!0,re,!0);F+=T,je(fe,qe,!0,!0,1),P!=1&&je(ee,qe,!0,!0,P-1),P+=1}),W(ne,s.auto_var=!0,s),W(ne,s.intOvFree=!1,s),W(ne,s.intLvFree=!0,s)}})}else be(i.dragged,p);(i.dragged=="multiple"||i.dragged=="factor"||i.dragged=="growth")&&oe(s.mode),W(U,i.dragged=null,i)}let _=!1,S=null,v;r.on("mousedown","edge.loop",function($){_=!0,S=$.target,S.unpanify(),v=S.style("loop-direction")});let L;r.on("mousemove",function($){if(!_||!S)return;let T=S.source().renderedPosition();L=vo(c.x-T.x,c.y-T.y);const C=5,p=[0,90,180,270];for(let x=0;x<p.length;x++)if(Math.abs(L-p[x])<=C){L=p[x];break}S.data("loop-direction",`${L}deg`)}),window.addEventListener("mouseup",function(){if(_){if(_=!1,L===void 0||v===`${L}deg`)return;S.data("loop-direction",v),S.addClass("fixDeg"),t.do("style",{eles:S,style:{"loop-direction":`${L}deg`}}),S=null,L=void 0}});function y($){se[$?"unshift":"push"](()=>{d=$,o(0,d)})}return[d,i,u,f,h,b,y]}class $o extends X{constructor(e){super(),Z(this,e,yo,bo,K,{})}}function kn(n){const e=n.source().position(),o=n.target().position(),t={x:o.x-e.x,y:o.y-e.y},i=Math.sqrt(t.x**2+t.y**2);return{normalizedEdgeVector:{x:t.x/i,y:t.y/i},edgeMidpoint:n.midpoint(),edgeSourcePos:e,edgeTargetPos:o}}function wo(n,e){const{normalizedEdgeVector:o,edgeMidpoint:t,edgeSourcePos:i,edgeTargetPos:s}=kn(n),r=(s.y-t.y)/o.y-70,l=(i.y-t.y)/o.y+70;let d=Math.min(r,e);return d=Math.max(l,d),{newMarginX:d*o.x,newMarginY:d*o.y}}function It(n,e){const{newMarginX:o,newMarginY:t}=wo(n,e);n.style({"text-margin-x":o,"text-margin-y":t})}function ko(n,e,o){let t,i;te(n,U,d=>o(2,t=d)),te(n,ne,d=>o(3,i=d));let s=Y(Q);s.on("add","node",function(d){const c=d.target;if(c.isObserved()){let a=t.columnNames;a&&a.includes(c.getLabel())&&(c.link(),ge("success",`Variable ${c.getLabel()} linked to data`))}c.isLatent()&&c.data("shape","ellipse"),t.modelEmpty&&s.edges().length>0&&W(U,t.modelEmpty=!1,t)}),s.on("remove","node",function(d){s.getUserEdges().length==0&&(W(U,t.modelEmpty=!0,t),Shiny.setInputValue("show_help",Math.random())),t.loadingMode||oe(i.mode)}),s.on("remove","edge",function(d){pe(d.target.source().id()),pe(d.target.target().id())}),s.on("add","edge",function(d){W(U,t.everEdge=!0,t),t.modelEmpty&&s.edges().length>0&&W(U,t.modelEmpty=!1,t),pe(d.target.source().id()),pe(d.target.target().id())}),s.on("position","node",function(d){const c=d.target,a=c.neighborhood().nodes(),m=c.connectedEdges(g=>g.isDirected());a.forEach(g=>{pe(g.id())}),m.forEach(g=>{const u=g.data("displacement");u&&It(g,u)})});let r=null,l=!1;return s.on("mousedown",function(d){const c=f=>parseFloat(f.replace("px","")),a=d.position;let m=null,g=1/0;const u=30;s.edges().forEach(function(f){if(f.isDirected()&&!f.hasClass("edgecontrolediting-hascontrolpoints")){const h=c(f.style("text-margin-x")),b=c(f.style("text-margin-y")),_=f.midpoint(),S={x:_.x+h,y:_.y+b},v=Math.abs(a.x-S.x),L=a.y-S.y,y=Math.sqrt(v*v+L*L);y<g&&y<u&&(m=f,g=y)}}),m!==null&&!m.hasClass(".edgecontrolediting-hascontrolpoints")&&(r=m,l=!0,d.preventDefault(),m.unpanify())}),s.on("class","edge",function(d){const c=d.target;c.hasClass("edgecontrolediting-hascontrolpoints")&&(c.style({"text-margin-x":0,"text-margin-y":0}),c.data("displacement",null),r&&c.id()===r.id()&&(r=null,l=!1))}),s.on("mousemove",function(d){if(l&&r){const{normalizedEdgeVector:c,edgeMidpoint:a}=kn(r),m=d.position,g={x:m.x-a.x,y:m.y-a.y};let u=g.x*c.x+g.y*c.y;r.data("displacement",u),It(r,u)}}),s.on("mouseup",function(d){l=!1,r=null}),[]}class Eo extends X{constructor(e){super(),Z(this,e,ko,null,K,{})}}function Nt(n,e,o){const t=n.slice();return t[21]=e[o],t}function Tt(n){let e,o,t,i,s,r,l,d,c,a,m,g,u,f,h=n[1],b=[];for(let _=0;_<h.length;_+=1)b[_]=xt(Nt(n,h,_));return{c(){e=G("div"),o=V(),t=G("div"),i=G("button"),i.textContent="Multiple Variables",s=V(),r=G("button"),r.textContent="Factor",l=V(),d=G("button"),d.textContent="Growth",c=V(),a=G("div"),m=V(),g=G("ul");for(let _=0;_<b.length;_+=1)b[_].c();E(e,"class","vertical-bar svelte-r00s5r"),E(i,"class","draggable-item svelte-r00s5r"),E(i,"draggable","true"),E(r,"class","draggable-item svelte-r00s5r"),E(r,"draggable","true"),E(d,"class","draggable-item svelte-r00s5r"),E(d,"draggable","true"),E(t,"id","model-buttons"),E(t,"class","svelte-r00s5r"),E(a,"class","vertical-bar svelte-r00s5r"),E(g,"class","draggable-list svelte-r00s5r")},m(_,S){I(_,e,S),I(_,o,S),I(_,t,S),R(t,i),R(t,s),R(t,r),R(t,l),R(t,d),I(_,c,S),I(_,a,S),I(_,m,S),I(_,g,S);for(let v=0;v<b.length;v+=1)b[v]&&b[v].m(g,null);u||(f=[ie(i,"dragstart",n[14]),ie(r,"dragstart",n[15]),ie(d,"dragstart",n[16])],u=!0)},p(_,S){if(S&10){h=_[1];let v;for(v=0;v<h.length;v+=1){const L=Nt(_,h,v);b[v]?b[v].p(L,S):(b[v]=xt(L),b[v].c(),b[v].m(g,null))}for(;v<b.length;v+=1)b[v].d(1);b.length=h.length}},d(_){_&&N(e),_&&N(o),_&&N(t),_&&N(c),_&&N(a),_&&N(m),_&&N(g),Ie(b,_),u=!1,Xe(f)}}}function xt(n){let e,o=n[21]+"",t,i,s,r;function l(...d){return n[17](n[21],...d)}return{c(){e=G("li"),t=_e(o),i=V(),E(e,"draggable","true"),E(e,"class","draggable-item svelte-r00s5r")},m(d,c){I(d,e,c),R(e,t),R(e,i),s||(r=ie(e,"dragstart",l),s=!0)},p(d,c){n=d,c&2&&o!==(o=n[21]+"")&&ze(t,o)},d(d){d&&N(e),s=!1,r()}}}function Co(n){let e,o,t,i,s,r,l,d,c,a,m,g,u,f,h,b=n[0].dataAvail&&Tt(n);return{c(){e=G("div"),o=G("div"),t=G("div"),i=G("button"),s=V(),r=G("button"),l=V(),d=G("div"),c=V(),a=G("div"),m=V(),g=G("div"),u=V(),b&&b.c(),E(i,"class","arrow-btn direct-arrow svelte-r00s5r"),E(i,"title","Draw Directed Arrows"),Pe(i,"active",n[0].drawing==="directed"),E(r,"class","arrow-btn undirected-arrow svelte-r00s5r"),E(r,"title","Draw Undirected Arrows"),Pe(r,"active",n[0].drawing==="undirected"),E(d,"role","button"),E(d,"id","add-manifest-variable"),E(d,"title","Create Observed Variable"),E(d,"draggable","true"),E(d,"class","variable-button svelte-r00s5r"),E(d,"data-button-type",le),E(d,"tabindex","0"),E(a,"role","button"),E(a,"tabindex","0"),E(a,"id","add-latent-variable"),E(a,"title","Create Latent Variable"),E(a,"draggable","true"),E(a,"class","variable-button svelte-r00s5r"),E(a,"data-button-type",me),E(g,"role","button"),E(g,"tabindex","0"),E(g,"id","add-constant-variable"),E(g,"class","variable-button svelte-r00s5r"),E(g,"title","Create Constant Variable"),E(g,"data-button-type","const"),E(g,"draggable","true"),E(t,"id","buttons"),E(t,"class","svelte-r00s5r"),E(o,"id","buttonCont"),E(o,"class","svelte-r00s5r"),E(e,"class","toolbox svelte-r00s5r")},m(_,S){I(_,e,S),R(e,o),R(o,t),R(t,i),R(t,s),R(t,r),R(t,l),R(t,d),R(t,c),R(t,a),R(t,m),R(t,g),R(e,u),b&&b.m(e,null),f||(h=[ie(i,"click",n[9]),ie(r,"click",n[10]),ie(d,"dragstart",n[11]),ie(a,"dragstart",n[12]),ie(g,"dragstart",n[13])],f=!0)},p(_,[S]){S&1&&Pe(i,"active",_[0].drawing==="directed"),S&1&&Pe(r,"active",_[0].drawing==="undirected"),_[0].dataAvail?b?b.p(_,S):(b=Tt(_),b.c(),b.m(e,null)):b&&(b.d(1),b=null)},i:ce,o:ce,d(_){_&&N(e),b&&b.d(),f=!1,Xe(h)}}}function So(n,e,o){let t,i;te(n,U,$=>o(0,t=$)),te(n,Q,$=>o(8,i=$)),U.subscribe($=>{});function s($){W(U,t.dragged=$,t)}function r($,w){W(U,t.dragged="observed-with-name",t),W(U,t.draggedName=w,t)}function l($){W(U,t.dragged="multiple",t)}function d($){W(U,t.dragged="factor",t)}function c($){W(U,t.dragged="growth",t)}let a,m=Y($t);function g($){t.drawing===$?(m.disableDrawMode(),W(U,t.drawing="none",t)):(m.enableDrawMode(),W(U,t.drawing=$,t))}const u=()=>{g("directed")},f=()=>{g("undirected")},h=()=>{event.dataTransfer.setData("text/plain","node"),s(le)},b=()=>{s(me)},_=()=>{s(Le)},S=$=>l(),v=$=>d(),L=$=>c(),y=($,w)=>r(w,$);return n.$$.update=()=>{if(n.$$.dirty&257&&typeof i.getObservedNodes=="function"&&t.columnNames!==null){const $=i.getObservedNodes().map(w=>w.data("label"));o(1,a=t.columnNames.filter(w=>!$.includes(w)))}},[t,a,s,r,l,d,c,g,i,u,f,h,b,_,S,v,L,y]}class Lo extends X{constructor(e){super(),Z(this,e,So,Co,K,{})}}function Mo(n){let e,o,t,i,s;const r=n[1].default,l=Ze(r,n,n[0],null);return i=new Lo({}),{c(){e=G("nav"),o=G("ul"),l&&l.c(),t=V(),q(i.$$.fragment),E(o,"class","nav navbar-nav navbar-left"),E(e,"class","navbar navbar-default navbar-static-top navbar-left svelte-12n5yi9")},m(d,c){I(d,e,c),R(e,o),l&&l.m(o,null),R(e,t),j(i,e,null),s=!0},p(d,[c]){l&&l.p&&(!s||c&1)&&Ke(l,r,d,d[0],s?et(r,d[0],c,null):Qe(d[0]),null)},i(d){s||(M(l,d),M(i.$$.fragment,d),s=!0)},o(d){O(l,d),O(i.$$.fragment,d),s=!1},d(d){d&&N(e),l&&l.d(d),H(i)}}}function Do(n,e,o){let{$$slots:t={},$$scope:i}=e;return n.$$set=s=>{"$$scope"in s&&o(0,i=s.$$scope)},[i,t]}class Ao extends X{constructor(e){super(),Z(this,e,Do,Mo,K,{})}}function Fo(n){let e,o,t,i,s,r,l;const d=n[3].default,c=Ze(d,n,n[2],null);return{c(){e=G("li"),o=G("a"),t=_e(n[0]),i=G("span"),s=V(),r=G("ul"),c&&c.c(),E(i,"class","caret"),E(o,"href","#"),E(o,"class","dropdown-toggle svelte-1oq006n"),E(o,"data-toggle","dropdown"),E(o,"role","button"),E(o,"aria-haspopup","true"),E(o,"aria-expanded","false"),E(o,"draggable","false"),Pe(o,"minimal",n[1]),E(r,"class","dropdown-menu"),E(e,"class","dropdown")},m(a,m){I(a,e,m),R(e,o),R(o,t),R(o,i),R(e,s),R(e,r),c&&c.m(r,null),l=!0},p(a,[m]){(!l||m&1)&&ze(t,a[0]),(!l||m&2)&&Pe(o,"minimal",a[1]),c&&c.p&&(!l||m&4)&&Ke(c,d,a,a[2],l?et(d,a[2],m,null):Qe(a[2]),null)},i(a){l||(M(c,a),l=!0)},o(a){O(c,a),l=!1},d(a){a&&N(e),c&&c.d(a)}}}function Oo(n,e,o){let{$$slots:t={},$$scope:i}=e,{name:s}=e,{minimal:r=!1}=e;return n.$$set=l=>{"name"in l&&o(0,s=l.name),"minimal"in l&&o(1,r=l.minimal),"$$scope"in l&&o(2,i=l.$$scope)},[s,r,i,t]}class tt extends X{constructor(e){super(),Z(this,e,Oo,Fo,K,{name:0,minimal:1})}}function Pt(n,e,o){const t=n.slice();return t[4]=e[o],t}function Vt(n){let e;return{c(){e=G("li"),E(e,"class","divider")},m(o,t){I(o,e,t)},d(o){o&&N(e)}}}function Rt(n){let e,o,t=n[4].name+"",i,s,r,l,d;function c(...m){return n[3](n[4],...m)}let a=n[4].divider&&Vt();return{c(){e=G("li"),o=G("a"),i=_e(t),s=V(),a&&a.c(),r=Be(),E(o,"href","#"),Pe(e,"disabled",n[4].disable)},m(m,g){I(m,e,g),R(e,o),R(o,i),I(m,s,g),a&&a.m(m,g),I(m,r,g),l||(d=ie(o,"click",c),l=!0)},p(m,g){n=m,g&1&&t!==(t=n[4].name+"")&&ze(i,t),g&1&&Pe(e,"disabled",n[4].disable),n[4].divider?a||(a=Vt(),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},d(m){m&&N(e),m&&N(s),a&&a.d(m),m&&N(r),l=!1,d()}}}function Io(n){let e,o=n[0],t=[];for(let i=0;i<o.length;i+=1)t[i]=Rt(Pt(n,o,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=Be()},m(i,s){for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(i,s);I(i,e,s)},p(i,s){if(s&1){o=i[0];let r;for(r=0;r<o.length;r+=1){const l=Pt(i,o,r);t[r]?t[r].p(l,s):(t[r]=Rt(l),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=o.length}},d(i){Ie(t,i),i&&N(e)}}}function No(n){let e,o;return e=new tt({props:{minimal:n[2],name:n[1],$$slots:{default:[Io]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},p(t,[i]){const s={};i&4&&(s.minimal=t[2]),i&2&&(s.name=t[1]),i&129&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){O(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}function To(n,e){e.disable||e.action(n)}function xo(n,e,o){let{menuItems:t}=e,{name:i}=e,{minimal:s=!1}=e;const r=(l,d)=>To(d,l);return n.$$set=l=>{"menuItems"in l&&o(0,t=l.menuItems),"name"in l&&o(1,i=l.name),"minimal"in l&&o(2,s=l.minimal)},[t,i,s,r]}class ut extends X{constructor(e){super(),Z(this,e,xo,No,K,{menuItems:0,name:1,minimal:2})}}function bt(n,e){if(n==null)throw new Error("Columnnames may not be null.");const t=Y(Q).nodes(function(s){return s.isObserved()});if(t.length>0)for(var i=0;i<t.length;i++){const s=t[i],r=s.getLabel();n.includes(r)&&!s.isLinked()?s.link():!n.includes(r)&&s.isLinked()&&s.unlink()}}async function En(n){Shiny.setInputValue("down-requestData",{goal:n,random:Math.random()})}function _t(){Y(Q).elements().remove(),wn(),U.update(e=>(e.parsedModel=!1,e)),ne.update(e=>(e.fix_first=!0,e.mode="user model",e)),Shiny.setInputValue("show_help",Math.random()),Fe.update(e=>{for(let o in e)e[o]=null;return e})}function vt(n){_t();let e=JSON.parse(n),o=Y(Q),t;t=JSON.parse(e.model);const i=JSON.parse(e.modelOpt),s=JSON.parse(e.gridViewOpt);if(zt(ne,i),zt(ne,s),e.fitCache!==void 0){const r=JSON.parse(e.fitCache);Fe.set(r)}U.update(r=>(r.loadingMode=!0,r)),o.json({elements:t}),o.nodes().forEach(r=>{r.style({width:r.data("width")}),r.style({height:r.data("height")})}),Y(U).dataAvail&&bt(Y(U).columnNames),Y(ne).mode!=="user model"?ue.update(r=>(r.showLav=!0,r)):ue.update(r=>(r.showLav=!1,r)),o.nodes().forEach(r=>{pe(r.id())}),o.edges().forEach(r=>{r.checkAndMarkPotentialLatObReg()}),o.getLatentNodes().forEach(r=>{r.data("shape")||r.data("shape","ellipse")}),U.update(r=>(r.loadingMode=!1,r))}function yt(){const n=Y(Q);n.nodes().forEach(l=>{l.data("width",l.width()),l.data("height",l.height())});let e=n.json().elements;e.nodes.forEach(l=>{l.classes=l.classes.split(" ").filter(d=>d!==Ue).join(" ")});const o=JSON.stringify(e),t=JSON.stringify(Y(ne)),i=JSON.stringify(Y(ne)),s=JSON.stringify(Y(Fe));return JSON.stringify({model:o,modelOpt:t,gridViewOpt:i,fitCache:s})}function zt(n,e){n.update(o=>{for(let t in e)e.hasOwnProperty(t)&&e[t]!==void 0&&(o[t]=e[t]);return o})}function Po(n){let e,o;return e=new ut({props:{name:"File",menuItems:n[1],minimal:!n[0]}}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},p(t,[i]){const s={};i&2&&(s.menuItems=t[1]),i&1&&(s.minimal=!t[0]),e.$set(s)},i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){O(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}function Vo(){document.getElementById("dataUpload-fileInput").click()}function Bt(){const n=new Date;return`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}_${String(n.getHours()).padStart(2,"0")}-${String(n.getMinutes()).padStart(2,"0")}-${String(n.getSeconds()).padStart(2,"0")}`}function Ro(n,e,o){let t,i;te(n,U,y=>o(2,t=y)),te(n,ht,y=>o(3,i=y));let{full:s=!0}=e;B.use(xn);function r(){t.modelEmpty?_t():bootbox.confirm("Are you sure you want to create a new model? This will delete the current model.",function(y){y&&_t()})}function l(y,$){ct.saveAs(y,"model."+$)}async function d(){const y=document.createElement("input");y.setAttribute("type","file"),y.setAttribute("accept",".lvm");const $=await new Promise(T=>{y.addEventListener("change",C=>T(C.target.files[0])),y.click()}),w=await new Promise(T=>{const C=new FileReader;C.readAsText($,"UTF-8"),C.onload=()=>T(C.result)});vt(w)}function c(){t.modelEmpty?d():bootbox.confirm("Are you sure you want to load a model? This will delete the current model.",function(y){y&&d()})}document.getElementById("dataUpload-fileInput").addEventListener("change",function(){this.files&&this.files.length>0&&window.$("#upload-modal").modal()});function a(){t.modelEmpty?m():bootbox.confirm("Are you sure you want to load model and data? This will delete the current model and data.",function(y){y&&m()})}function m(){const y=document.createElement("input");y.setAttribute("type","file"),y.setAttribute("accept",".lvd"),y.addEventListener("change",function($){const w=$.target.files[0],T=new FileReader;T.readAsArrayBuffer(w),T.onload=function(){const C=T.result;Mt.loadAsync(C).then(function(p){p.file("data.csv").async("base64").then(function(x){Shiny.setInputValue("dataUpload-fileInput",{content:x});const A=setInterval(()=>{t.dataAvail&&(clearInterval(A),p.file("model.lvm").async("text").then(function(J){vt(J)}))},100)})})}}),y.click()}function g(){const y=yt();let $=new Blob([y],{type:"application/json;charset=utf-8"});ct.saveAs($,"model_"+Bt()+".lvm")}Shiny.addCustomMessageHandler("dataForDownload",function(y){(async()=>{const $=yt(),w=new Mt;w.file("model.lvm",$),w.file("data.csv",y);const T=await w.generateAsync({type:"blob"}),C=new File([T],"model_"+Bt()+".lvd",{type:"application/zip"});ct.saveAs(C)})()});function u(){const y=Y(Q);W(U,t.dataAvail=!1,t),W(U,t.columnNames=null,t),W(U,t.loadedFileName=null,t),W(U,t.ids=null,t),W(ht,i=null,i),y.nodes().unlink(),Shiny.setInputValue("dataUpload-deleteData",Math.random())}function f(){const y=Y(Q);l(y.png({bg:"white"}),"png")}function h(){const y=Y(Q);l(y.jpg(),"jpg")}function b(){return Y(Q).svg({scale:1,full:!0})}function _(){const y=b(),$=new Blob([y],{type:"image/svg+xml;charset=utf-8"});l($,"svg")}function S(){En("download")}async function v(){const y=b(),w=new DOMParser().parseFromString(y,"image/svg+xml").documentElement;w.style.position="absolute",w.style.left="-9999px",document.body.appendChild(w);const T=w.getBoundingClientRect();document.body.removeChild(w);const C=T.width,p=T.height,x=new Pn({orientation:C>p?"landscape":"portrait",unit:"pt",format:[C,p]});await Vn(w,x,{width:C,height:p}),x.save("model.pdf")}let L;return n.$$set=y=>{"full"in y&&o(0,s=y.full)},n.$$.update=()=>{if(n.$$.dirty&5){let y=[{name:"New Model",action:r,divider:!0},{name:"Load Model",action:c},{name:"Load Data",action:Vo},{name:"Load Model and Data",action:a,divider:!0},{name:"Save Model",action:g,disable:t.modelEmpty},{name:"Save Model and Data",disable:t.modelEmpty||!t.dataAvail,action:S,divider:!0},{name:"Remove Data",action:u,disable:!t.dataAvail,divider:!0},{name:"Export Diagram to PNG",disable:t.modelEmpty,action:f},{name:"Export Diagram to JPG",disable:t.modelEmpty,action:h},{name:"Export Diagram to SVG",disable:t.modelEmpty,action:_},{name:"Export Diagram to PDF",disable:t.modelEmpty,action:v}];s?o(1,L=y):o(1,L=y.filter($=>["Save Model","Load Model"].includes($.name)||y.indexOf($)>=y.length-4))}},[s,L,t]}class Cn extends X{constructor(e){super(),Z(this,e,Ro,Po,K,{full:0})}}function zo(n){let e;return{c(){e=G("span"),E(e,"class","glyphicon glyphicon-ok check-mark invisible"),E(e,"aria-hidden","true")},m(o,t){I(o,e,t)},d(o){o&&N(e)}}}function Bo(n){let e;return{c(){e=G("span"),E(e,"class","glyphicon glyphicon-ok check-mark"),E(e,"aria-hidden","true")},m(o,t){I(o,e,t)},d(o){o&&N(e)}}}function Uo(n){let e,o,t,i,s,r,l,d,c;function a(u,f){return u[0]?Bo:zo}let m=a(n),g=m(n);return{c(){e=G("li"),o=G("label"),t=G("input"),i=V(),g.c(),s=V(),r=_e(n[1]),E(t,"type","checkbox"),E(t,"class","check-box svelte-17cge7g"),t.disabled=n[2],E(o,"class",l=Ve(n[2]?"disabled-label":"")+" svelte-17cge7g"),E(e,"class","svelte-17cge7g")},m(u,f){I(u,e,f),R(e,o),R(o,t),t.checked=n[0],R(o,i),g.m(o,null),R(o,s),R(o,r),d||(c=ie(t,"change",n[3]),d=!0)},p(u,[f]){f&4&&(t.disabled=u[2]),f&1&&(t.checked=u[0]),m!==(m=a(u))&&(g.d(1),g=m(u),g&&(g.c(),g.m(o,s))),f&2&&ze(r,u[1]),f&4&&l!==(l=Ve(u[2]?"disabled-label":"")+" svelte-17cge7g")&&E(o,"class",l)},i:ce,o:ce,d(u){u&&N(e),g.d(),d=!1,c()}}}function Go(n,e,o){let{name:t}=e,{checked:i}=e,{disable:s=!1}=e;function r(){i=this.checked,o(0,i)}return n.$$set=l=>{"name"in l&&o(1,t=l.name),"checked"in l&&o(0,i=l.checked),"disable"in l&&o(2,s=l.disable)},[i,t,s,r]}class Se extends X{constructor(e){super(),Z(this,e,Go,Uo,K,{name:1,checked:0,disable:2})}}function qo(n){let e;return{c(){e=G("span"),E(e,"class","glyphicon glyphicon-ok check-mark invisible"),E(e,"aria-hidden","true")},m(o,t){I(o,e,t)},d(o){o&&N(e)}}}function jo(n){let e;return{c(){e=G("span"),E(e,"class","glyphicon glyphicon-ok check-mark"),E(e,"aria-hidden","true")},m(o,t){I(o,e,t)},d(o){o&&N(e)}}}function Ho(n){let e,o,t,i=!1,s,r,l,d,c,a,m,g;function u(b,_){return b[0]===b[2]?jo:qo}let f=u(n),h=f(n);return a=In(n[5][0]),{c(){e=G("div"),o=G("label"),t=G("input"),s=V(),h.c(),r=V(),l=_e(n[1]),E(t,"type","radio"),E(t,"name","meanStruc"),t.__value=n[2],t.value=t.__value,t.disabled=n[3],E(t,"class","svelte-lbhkwe"),E(o,"class",d=Ve(n[3]?"text-muted":"")+" svelte-lbhkwe"),E(e,"class",c=Ve(n[3]?"radio disabled":"radio")+" svelte-lbhkwe"),a.p(t)},m(b,_){I(b,e,_),R(e,o),R(o,t),t.checked=t.__value===n[0],R(o,s),h.m(o,null),R(o,r),R(o,l),m||(g=ie(t,"change",n[4]),m=!0)},p(b,[_]){_&4&&(t.__value=b[2],t.value=t.__value,i=!0),_&8&&(t.disabled=b[3]),(i||_&1)&&(t.checked=t.__value===b[0]),f!==(f=u(b))&&(h.d(1),h=f(b),h&&(h.c(),h.m(o,r))),_&2&&ze(l,b[1]),_&8&&d!==(d=Ve(b[3]?"text-muted":"")+" svelte-lbhkwe")&&E(o,"class",d),_&8&&c!==(c=Ve(b[3]?"radio disabled":"radio")+" svelte-lbhkwe")&&E(e,"class",c)},i:ce,o:ce,d(b){b&&N(e),h.d(),a.r(),m=!1,g()}}}function Wo(n,e,o){let{name:t}=e,{value:i}=e,{group:s}=e,{isDisabled:r=!1}=e;const l=[[]];function d(){s=this.__value,o(0,s)}return n.$$set=c=>{"name"in c&&o(1,t=c.name),"value"in c&&o(2,i=c.value),"group"in c&&o(0,s=c.group),"isDisabled"in c&&o(3,r=c.isDisabled)},[s,t,i,r,d,l]}class nt extends X{constructor(e){super(),Z(this,e,Wo,Ho,K,{name:1,value:2,group:0,isDisabled:3})}}const Ut=[{name:"Arrows Created by Lavaan",modelSlot:"showLav"},{name:"Variance Arrows",modelSlot:"showVar"},{name:"Mean Arrows",modelSlot:"showMean"}];let Gt=[{name:"Estimate",value:"est"},{name:"Confidence Interval",value:"ci"},{name:"Estimate + p-value (stars)",value:"estPVal"},{name:"Estimate + Standard Error",value:"estSE"}];function Yo(n,e,o){const t=Y(Q),i=e?"_std":"",s=Sn(n,i,o);t.style().selector("edge.hasEst").style({label:s}).update();const r=Zo(n,i,o);t.style().selector("edge.hasEst.label").style({label:r}).update(),e?(t.style().selector("edge.hasEstStd").style({label:s}).update(),t.style().selector("edge.hasEstStd.label").style({label:r}).update(),t.style().selector("edge.fixedUnderStd").style({label:function(d){return"@1"}}).update(),t.style().selector("edge.fixedUnderStd.label").style({label:function(d){return d.data("label")+"@1"}}).update()):(t.style().selector(`edge.${ke}.${Ge}`).style(_n).update(),t.style().selector(`edge.${ke}.${Re}`).style(bn).update());const l=Ko(n,i,o);t.style().selector("edge.hasEstFixed").style({label:l}).update()}function Jo(n,e,o){function t(a){return a.reduce((m,g,u)=>(g&&m.push(u),m),[])}const i=Y(Q),s=[e,n,o],r=t(s),l=t(s.map(a=>!a)),d=r.concat(l);function c(a,m){return[u=>u.isLavaanAdded(),u=>u.isLoop(),u=>u.isMean()][a](m)}for(let a of d){const m=i.elements(function(g){return c(a,g)});if(s[a]?m.removeClass("hidden"):m.addClass("hidden"),a==2){const g=m.connectedEdges().connectedNodes(),u=m.connectedEdges();s[a]?u.forEach(f=>{f.removeClass("hidden")}):u.forEach(f=>{f.addClass("hidden")}),g.forEach(f=>{pe(f.id())})}else m.forEach(g=>{pe(g.source().id()),pe(g.target().id())})}}function Xo(n){return n===null?"NA":n<.001?"***":n<.01?"**":n<.05?"*":""}function Sn(n,e,o){const t=(i,s)=>i?i[s].toFixed(o):"NA";switch(n){case"est":return i=>t(i.data("estimates"),"est"+e);case"ci":return i=>`[${t(i.data("estimates"),"ciLow"+e)}, ${t(i.data("estimates"),"ciHigh"+e)}]`;case"estPVal":return i=>`${t(i.data("estimates"),"est"+e)}${Xo(i.data("estimates"))}`;case"estSE":return i=>`${t(i.data("estimates"),"est"+e)} (${t(i.data("estimates"),"se"+e)})`;default:return()=>"NA"}}function Zo(n,e,o){const t=Sn(n,e,o);return i=>`${i.data("label")} = ${t(i)}`}function Ko(n,e,o){const t=i=>i===null?"NA":i.toFixed(o);return i=>"@"+t(i.data("estimates")["estFixed"+e])}function Qo(n){let e,o,t,i,s,r;return{c(){e=G("li"),o=_e(n[1]),t=V(),i=G("input"),ve(i,"width","4em"),E(i,"type","number"),E(i,"min",n[2]),ve(e,"padding-left","28px")},m(l,d){I(l,e,d),R(e,o),R(e,t),R(e,i),rt(i,n[0]),s||(r=ie(i,"input",n[3]),s=!0)},p(l,[d]){d&2&&ze(o,l[1]),d&4&&E(i,"min",l[2]),d&1&&dt(i.value)!==l[0]&&rt(i,l[0])},i:ce,o:ce,d(l){l&&N(e),s=!1,r()}}}function ei(n,e,o){let{name:t}=e,{value:i}=e,{min:s}=e;function r(){i=dt(this.value),o(0,i)}return n.$$set=l=>{"name"in l&&o(1,t=l.name),"value"in l&&o(0,i=l.value),"min"in l&&o(2,s=l.min)},[i,t,s,r]}class at extends X{constructor(e){super(),Z(this,e,ei,Qo,K,{name:1,value:0,min:2})}}function qt(n,e,o){const t=n.slice();return t[9]=e[o],t}function jt(n,e,o){const t=n.slice();return t[9]=e[o],t[12]=e,t[13]=o,t}function Ht(n){let e,o,t,i;function s(d){n[3](d,n[9])}function r(d){n[4](d,n[9])}let l={disable:!1};return n[9].name!==void 0&&(l.name=n[9].name),n[1][n[9].modelSlot]!==void 0&&(l.checked=n[1][n[9].modelSlot]),e=new Se({props:l}),se.push(()=>ae(e,"name",s)),se.push(()=>ae(e,"checked",r)),{c(){q(e.$$.fragment)},m(d,c){j(e,d,c),i=!0},p(d,c){n=d;const a={};!o&&c&4&&(o=!0,a.name=n[9].name,de(()=>o=!1)),!t&&c&6&&(t=!0,a.checked=n[1][n[9].modelSlot],de(()=>t=!1)),e.$set(a)},i(d){i||(M(e.$$.fragment,d),i=!0)},o(d){O(e.$$.fragment,d),i=!1},d(d){H(e,d)}}}function Wt(n){let e,o,t;function i(r){n[6](r)}let s={name:n[9].name,value:n[9].value};return n[1].view!==void 0&&(s.group=n[1].view),e=new nt({props:s}),se.push(()=>ae(e,"group",i)),{c(){q(e.$$.fragment)},m(r,l){j(e,r,l),t=!0},p(r,l){const d={};!o&&l&2&&(o=!0,d.group=r[1].view,de(()=>o=!1)),e.$set(d)},i(r){t||(M(e.$$.fragment,r),t=!0)},o(r){O(e.$$.fragment,r),t=!1},d(r){H(e,r)}}}function ti(n){let e,o,t,i,s,r,l,d,c,a,m,g,u,f,h,b,_,S,v,L,y=n[2],$=[];for(let k=0;k<y.length;k+=1)$[k]=Ht(jt(n,y,k));const w=k=>O($[k],1,1,()=>{$[k]=null});function T(k){n[5](k)}let C={name:"Standardized Estimates",disable:!1};n[1].std!==void 0&&(C.checked=n[1].std),i=new Se({props:C}),se.push(()=>ae(i,"checked",T));let p=Gt,x=[];for(let k=0;k<p.length;k+=1)x[k]=Wt(qt(n,p,k));const A=k=>O(x[k],1,1,()=>{x[k]=null});function J(k){n[8](k)}let F={name:"Number Digits",min:0};return n[1].number_digits!==void 0&&(F.value=n[1].number_digits),b=new at({props:F}),se.push(()=>ae(b,"value",J)),{c(){for(let k=0;k<$.length;k+=1)$[k].c();e=V(),o=G("li"),t=V(),q(i.$$.fragment),r=V(),l=G("li"),d=V();for(let k=0;k<x.length;k+=1)x[k].c();c=V(),a=G("li"),m=V(),g=G("li"),u=_e(`Confidence Level
    `),f=G("input"),h=V(),q(b.$$.fragment),E(o,"class","divider"),E(l,"class","divider"),E(a,"class","divider"),E(f,"type","number"),E(f,"min","0"),E(f,"max","0.999999"),E(f,"step","0.01"),ve(f,"width","4em"),ve(g,"padding-left","28px")},m(k,D){for(let z=0;z<$.length;z+=1)$[z]&&$[z].m(k,D);I(k,e,D),I(k,o,D),I(k,t,D),j(i,k,D),I(k,r,D),I(k,l,D),I(k,d,D);for(let z=0;z<x.length;z+=1)x[z]&&x[z].m(k,D);I(k,c,D),I(k,a,D),I(k,m,D),I(k,g,D),R(g,u),R(g,f),rt(f,n[1].ci),I(k,h,D),j(b,k,D),S=!0,v||(L=ie(f,"input",n[7]),v=!0)},p(k,D){if(D&6){y=k[2];let ee;for(ee=0;ee<y.length;ee+=1){const P=jt(k,y,ee);$[ee]?($[ee].p(P,D),M($[ee],1)):($[ee]=Ht(P),$[ee].c(),M($[ee],1),$[ee].m(e.parentNode,e))}for(ye(),ee=y.length;ee<$.length;ee+=1)w(ee);$e()}const z={};if(!s&&D&2&&(s=!0,z.checked=k[1].std,de(()=>s=!1)),i.$set(z),D&2){p=Gt;let ee;for(ee=0;ee<p.length;ee+=1){const P=qt(k,p,ee);x[ee]?(x[ee].p(P,D),M(x[ee],1)):(x[ee]=Wt(P),x[ee].c(),M(x[ee],1),x[ee].m(c.parentNode,c))}for(ye(),ee=p.length;ee<x.length;ee+=1)A(ee);$e()}D&2&&dt(f.value)!==k[1].ci&&rt(f,k[1].ci);const fe={};!_&&D&2&&(_=!0,fe.value=k[1].number_digits,de(()=>_=!1)),b.$set(fe)},i(k){if(!S){for(let D=0;D<y.length;D+=1)M($[D]);M(i.$$.fragment,k);for(let D=0;D<p.length;D+=1)M(x[D]);M(b.$$.fragment,k),S=!0}},o(k){$=$.filter(Boolean);for(let D=0;D<$.length;D+=1)O($[D]);O(i.$$.fragment,k),x=x.filter(Boolean);for(let D=0;D<x.length;D+=1)O(x[D]);O(b.$$.fragment,k),S=!1},d(k){Ie($,k),k&&N(e),k&&N(o),k&&N(t),H(i,k),k&&N(r),k&&N(l),k&&N(d),Ie(x,k),k&&N(c),k&&N(a),k&&N(m),k&&N(g),k&&N(h),H(b,k),v=!1,L()}}}function ni(n){let e,o;return e=new tt({props:{name:"View",minimal:n[0],$$slots:{default:[ti]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},p(t,[i]){const s={};i&1&&(s.minimal=t[0]),i&16390&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){O(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}function oi(n,e,o){let t;te(n,ue,m=>o(1,t=m));let{minimal:i=!1}=e;function s(m,g){n.$$.not_equal(g.name,m)&&(g.name=m,o(2,Ut))}function r(m,g){n.$$.not_equal(t[g.modelSlot],m)&&(t[g.modelSlot]=m,ue.set(t))}function l(m){n.$$.not_equal(t.std,m)&&(t.std=m,ue.set(t))}function d(m){n.$$.not_equal(t.view,m)&&(t.view=m,ue.set(t))}function c(){t.ci=dt(this.value),ue.set(t)}function a(m){n.$$.not_equal(t.number_digits,m)&&(t.number_digits=m,ue.set(t))}return n.$$set=m=>{"minimal"in m&&o(0,i=m.minimal)},n.$$.update=()=>{n.$$.dirty&2&&Shiny.setInputValue("ests-confindence_level",t.ci)},[i,t,Ut,s,r,l,d,c,a]}class Ln extends X{constructor(e){super(),Z(this,e,oi,ni,K,{minimal:0})}}function Yt(n,e,o){const t=n.slice();return t[9]=e[o],t}function Jt(n,e,o){const t=n.slice();return t[9]=e[o],t}function Xt(n,e,o){const t=n.slice();return t[9]=e[o],t}function Zt(n){let e,o,t;function i(r){n[4](r)}let s={name:n[9].name,value:n[9].value};return n[0].estimator!==void 0&&(s.group=n[0].estimator),e=new nt({props:s}),se.push(()=>ae(e,"group",i)),{c(){q(e.$$.fragment)},m(r,l){j(e,r,l),t=!0},p(r,l){const d={};!o&&l&1&&(o=!0,d.group=r[0].estimator,de(()=>o=!1)),e.$set(d)},i(r){t||(M(e.$$.fragment,r),t=!0)},o(r){O(e.$$.fragment,r),t=!1},d(r){H(e,r)}}}function Kt(n){let e,o,t;function i(r){n[5](r)}let s={name:n[9].name,value:n[9].value};return n[0].se!==void 0&&(s.group=n[0].se),e=new nt({props:s}),se.push(()=>ae(e,"group",i)),{c(){q(e.$$.fragment)},m(r,l){j(e,r,l),t=!0},p(r,l){const d={};!o&&l&1&&(o=!0,d.group=r[0].se,de(()=>o=!1)),e.$set(d)},i(r){t||(M(e.$$.fragment,r),t=!0)},o(r){O(e.$$.fragment,r),t=!1},d(r){H(e,r)}}}function Qt(n){let e,o,t;function i(r){n[7](r)}let s={name:n[9].name,value:n[9].value};return n[0].missing!==void 0&&(s.group=n[0].missing),e=new nt({props:s}),se.push(()=>ae(e,"group",i)),{c(){q(e.$$.fragment)},m(r,l){j(e,r,l),t=!0},p(r,l){const d={};!o&&l&1&&(o=!0,d.group=r[0].missing,de(()=>o=!1)),e.$set(d)},i(r){t||(M(e.$$.fragment,r),t=!0)},o(r){O(e.$$.fragment,r),t=!1},d(r){H(e,r)}}}function ii(n){let e,o,t,i,s,r,l,d,c,a,m,g,u,f,h,b,_,S,v=n[1],L=[];for(let F=0;F<v.length;F+=1)L[F]=Zt(Xt(n,v,F));const y=F=>O(L[F],1,1,()=>{L[F]=null});let $=n[2],w=[];for(let F=0;F<$.length;F+=1)w[F]=Kt(Jt(n,$,F));const T=F=>O(w[F],1,1,()=>{w[F]=null});function C(F){n[6](F)}let p={name:"Number of Bootstrap Samples:",min:5};n[0].n_boot!==void 0&&(p.value=n[0].n_boot),m=new at({props:p}),se.push(()=>ae(m,"value",C));let x=n[3],A=[];for(let F=0;F<x.length;F+=1)A[F]=Qt(Yt(n,x,F));const J=F=>O(A[F],1,1,()=>{A[F]=null});return{c(){e=G("li"),o=G("a"),o.textContent="Estimator",t=V(),i=G("ul");for(let F=0;F<L.length;F+=1)L[F].c();s=V(),r=G("li"),l=G("a"),l.textContent="Standard Error",d=V(),c=G("ul");for(let F=0;F<w.length;F+=1)w[F].c();a=V(),q(m.$$.fragment),u=V(),f=G("li"),h=G("a"),h.textContent="Missing Values",b=V(),_=G("ul");for(let F=0;F<A.length;F+=1)A[F].c();E(o,"tabindex","-1"),E(o,"href","#"),E(o,"class","svelte-143y7r6"),E(i,"class","dropdown-menu svelte-143y7r6"),E(e,"class","dropdown-submenu svelte-143y7r6"),E(l,"tabindex","-1"),E(l,"href","#"),E(l,"class","svelte-143y7r6"),E(c,"class","dropdown-menu svelte-143y7r6"),E(r,"class","dropdown-submenu svelte-143y7r6"),E(h,"tabindex","-1"),E(h,"href","#"),E(h,"class","svelte-143y7r6"),E(_,"class","dropdown-menu svelte-143y7r6"),E(f,"class","dropdown-submenu svelte-143y7r6")},m(F,k){I(F,e,k),R(e,o),R(e,t),R(e,i);for(let D=0;D<L.length;D+=1)L[D]&&L[D].m(i,null);I(F,s,k),I(F,r,k),R(r,l),R(r,d),R(r,c);for(let D=0;D<w.length;D+=1)w[D]&&w[D].m(c,null);R(c,a),j(m,c,null),I(F,u,k),I(F,f,k),R(f,h),R(f,b),R(f,_);for(let D=0;D<A.length;D+=1)A[D]&&A[D].m(_,null);S=!0},p(F,k){if(k&3){v=F[1];let z;for(z=0;z<v.length;z+=1){const fe=Xt(F,v,z);L[z]?(L[z].p(fe,k),M(L[z],1)):(L[z]=Zt(fe),L[z].c(),M(L[z],1),L[z].m(i,null))}for(ye(),z=v.length;z<L.length;z+=1)y(z);$e()}if(k&5){$=F[2];let z;for(z=0;z<$.length;z+=1){const fe=Jt(F,$,z);w[z]?(w[z].p(fe,k),M(w[z],1)):(w[z]=Kt(fe),w[z].c(),M(w[z],1),w[z].m(c,a))}for(ye(),z=$.length;z<w.length;z+=1)T(z);$e()}const D={};if(!g&&k&1&&(g=!0,D.value=F[0].n_boot,de(()=>g=!1)),m.$set(D),k&9){x=F[3];let z;for(z=0;z<x.length;z+=1){const fe=Yt(F,x,z);A[z]?(A[z].p(fe,k),M(A[z],1)):(A[z]=Qt(fe),A[z].c(),M(A[z],1),A[z].m(_,null))}for(ye(),z=x.length;z<A.length;z+=1)J(z);$e()}},i(F){if(!S){for(let k=0;k<v.length;k+=1)M(L[k]);for(let k=0;k<$.length;k+=1)M(w[k]);M(m.$$.fragment,F);for(let k=0;k<x.length;k+=1)M(A[k]);S=!0}},o(F){L=L.filter(Boolean);for(let k=0;k<L.length;k+=1)O(L[k]);w=w.filter(Boolean);for(let k=0;k<w.length;k+=1)O(w[k]);O(m.$$.fragment,F),A=A.filter(Boolean);for(let k=0;k<A.length;k+=1)O(A[k]);S=!1},d(F){F&&N(e),Ie(L,F),F&&N(s),F&&N(r),Ie(w,F),H(m),F&&N(u),F&&N(f),Ie(A,F)}}}function si(n){let e,o;return e=new tt({props:{name:ri,$$slots:{default:[ii]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},p(t,[i]){const s={};i&65537&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){O(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}const ri="Estimation";function li(n,e,o){let t;te(n,ne,m=>o(0,t=m));const i=[{value:"default",name:"Default"},{value:"ML",name:"Maximum Likelihood (ML)"},{value:"GLS",name:"Generalized Least Squares (GLS)"},{value:"WLS",name:"Weighted Least Squares (WLS)"},{value:"ULS",name:"Unweighted Least Squares (ULS)"},{value:"DWLS",name:"Diagonally Weighted Least Squares (DWLS)"},{value:"DLS",name:"Distributionally-weighted Least Squares (DLW)"}],s=[{value:"default",name:"Default"},{value:"robust",name:"Robust"},{value:"boot",name:"Bootstrap"}],r=[{value:"listwise",name:"Listwise Deletion"},{value:"ml",name:"Full Information Maximum Likelihood (FIML)"}];function l(m){n.$$.not_equal(t.estimator,m)&&(t.estimator=m,ne.set(t))}function d(m){n.$$.not_equal(t.se,m)&&(t.se=m,ne.set(t))}function c(m){n.$$.not_equal(t.n_boot,m)&&(t.n_boot=m,ne.set(t))}function a(m){n.$$.not_equal(t.missing,m)&&(t.missing=m,ne.set(t))}return[t,i,s,r,l,d,c,a]}class ai extends X{constructor(e){super(),Z(this,e,li,si,K,{})}}let gt=0,Mn=!1;function Dn(){return typeof Shiny=="object"&&Shiny!==null}function di(n){const e=Object.keys(n),o=n[e[0]].length,t=[];for(let i=0;i<o;i++){const s={};for(const r of e)s[r]=n[r][i];t.push(s)}return t}function st(n,e=!0){Mn=e,gt=gt+1;let o=vn(!0);o.name=n,o.counter=gt,Dn()&&Shiny.setInputValue("layout-layout",JSON.stringify(o))}Dn()&&Shiny.addCustomMessageHandler("semPlotLayout",function(n){n=di(n);const e=125,o=200;let t=1/0,i=1/0;for(let c=0;c<n.length;c++)for(let a=c+1;a<n.length;a++){const m=Math.abs(n[c].x-n[a].x),g=Math.abs(n[c].y-n[a].y);m<t&&n[c].y===n[a].y&&(t=m),g<i&&g!==0&&(i=g)}const s=e/t,r=o/i;let l={};n.forEach(c=>{const a=c.x*s+400,m=c.y*-1*r+400;l[c.name]={x:a,y:m}});let d={name:"preset",positions:function(c){const a=c.data("label");return l[a]},fit:!0,padding:60,animate:!0};Mn?Y(De).do("layout",{options:d}):Y(Q).layout(d).run()});function ui(n){let e,o;return e=new ut({props:{name:"Apply Layout",menuItems:n[1],minimal:n[0]}}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},p(t,[i]){const s={};i&2&&(s.menuItems=t[1]),i&1&&(s.minimal=t[0]),e.$set(s)},i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){O(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}function ci(n,e,o){let t,i,s;te(n,U,g=>o(2,i=g)),te(n,De,g=>o(3,s=g));let{minimal:r=!1}=e;Y(Q),we(()=>{B.use(Rn),B.use(zn),B.use(Bn)});function l(){const g={name:"dagre",rankSep:150,animate:!0};s.do("layout",{options:g})}function d(){const g={name:"breadthfirst",animate:!0,spacingFactor:1};s.do("layout",{options:g})}function c(){const g={name:"circle",animate:!0};s.do("layout",{options:g})}function a(){const g={name:"fcose",animate:!0,idealEdgeLength:u=>150,quality:"proof",randomize:!1,nodeSeparation:200};s.do("layout",{options:g})}function m(){const g={name:"cola",animate:!0,nodeSpacing(u){return 50}};s.do("layout",{options:g})}return n.$$set=g=>{"minimal"in g&&o(0,r=g.minimal)},n.$$.update=()=>{n.$$.dirty&4&&o(1,t=[{name:"Recommended: Tree",action:()=>st("tree"),disable:i.modelEmpty},{name:"Recommended: Tree2",action:()=>st("tree2"),disable:i.modelEmpty},{name:"Recommended: Tree3",action:()=>st("tree3"),disable:i.modelEmpty,divider:!0},{name:"Experimental: Tree",action:l,disable:i.modelEmpty},{name:"Experimental: Tree2",action:d,disable:i.modelEmpty},{name:"Experimental: Circle",action:c,disable:i.modelEmpty},{name:"Experimental: Force-directed",action:a,disable:i.modelEmpty},{name:"Experimental: Cola",action:m,disable:i.modelEmpty}])},[r,t,i]}class An extends X{constructor(e){super(),Z(this,e,ci,ui,K,{minimal:0})}}function en(n,e,o){const t=n.slice();return t[11]=e[o],t[12]=e,t[13]=o,t}function tn(n,e,o){const t=n.slice();return t[11]=e[o],t}function nn(n){let e,o,t;function i(r){n[4](r)}let s={name:n[11].name,value:n[11].value};return n[0].meanStruc!==void 0&&(s.group=n[0].meanStruc),e=new nt({props:s}),se.push(()=>ae(e,"group",i)),{c(){q(e.$$.fragment)},m(r,l){j(e,r,l),t=!0},p(r,l){const d={};!o&&l&1&&(o=!0,d.group=r[0].meanStruc,de(()=>o=!1)),e.$set(d)},i(r){t||(M(e.$$.fragment,r),t=!0)},o(r){O(e.$$.fragment,r),t=!1},d(r){H(e,r)}}}function on(n){let e,o,t,i;function s(d){n[9](d,n[11])}function r(d){n[10](d,n[11])}let l={};return n[11].name!==void 0&&(l.name=n[11].name),n[0][n[11].modelProperty]!==void 0&&(l.checked=n[0][n[11].modelProperty]),e=new Se({props:l}),se.push(()=>ae(e,"name",s)),se.push(()=>ae(e,"checked",r)),{c(){q(e.$$.fragment)},m(d,c){j(e,d,c),i=!0},p(d,c){n=d;const a={};!o&&c&2&&(o=!0,a.name=n[11].name,de(()=>o=!1)),!t&&c&3&&(t=!0,a.checked=n[0][n[11].modelProperty],de(()=>t=!1)),e.$set(a)},i(d){i||(M(e.$$.fragment,d),i=!0)},o(d){O(e.$$.fragment,d),i=!1},d(d){H(e,d)}}}function fi(n){let e,o,t,i,s,r,l,d,c,a,m,g,u,f,h,b=n[3],_=[];for(let A=0;A<b.length;A+=1)_[A]=nn(tn(n,b,A));const S=A=>O(_[A],1,1,()=>{_[A]=null});function v(A){n[5](A)}function L(A){n[6](A)}let y={name:"Add Intercepts for all Observed Variables"};n[0].intOvFree!==void 0&&(y.checked=n[0].intOvFree),n[2]!==void 0&&(y.disable=n[2]),r=new Se({props:y}),se.push(()=>ae(r,"checked",v)),se.push(()=>ae(r,"disable",L));function $(A){n[7](A)}function w(A){n[8](A)}let T={name:"Add Intercepts for all Latent Variables"};n[0].intLvFree!==void 0&&(T.checked=n[0].intLvFree),n[2]!==void 0&&(T.disable=n[2]),a=new Se({props:T}),se.push(()=>ae(a,"checked",$)),se.push(()=>ae(a,"disable",w));let C=n[1],p=[];for(let A=0;A<C.length;A+=1)p[A]=on(en(n,C,A));const x=A=>O(p[A],1,1,()=>{p[A]=null});return{c(){e=G("li"),o=G("a"),o.textContent="Add Means?",t=V(),i=G("ul");for(let A=0;A<_.length;A+=1)_[A].c();s=V(),q(r.$$.fragment),c=V(),q(a.$$.fragment),u=V();for(let A=0;A<p.length;A+=1)p[A].c();f=Be(),E(o,"tabindex","-1"),E(o,"href","#"),E(o,"class","svelte-143y7r6"),E(i,"class","dropdown-menu svelte-143y7r6"),E(e,"class","dropdown-submenu svelte-143y7r6")},m(A,J){I(A,e,J),R(e,o),R(e,t),R(e,i);for(let F=0;F<_.length;F+=1)_[F]&&_[F].m(i,null);I(A,s,J),j(r,A,J),I(A,c,J),j(a,A,J),I(A,u,J);for(let F=0;F<p.length;F+=1)p[F]&&p[F].m(A,J);I(A,f,J),h=!0},p(A,J){if(J&9){b=A[3];let D;for(D=0;D<b.length;D+=1){const z=tn(A,b,D);_[D]?(_[D].p(z,J),M(_[D],1)):(_[D]=nn(z),_[D].c(),M(_[D],1),_[D].m(i,null))}for(ye(),D=b.length;D<_.length;D+=1)S(D);$e()}const F={};!l&&J&1&&(l=!0,F.checked=A[0].intOvFree,de(()=>l=!1)),!d&&J&4&&(d=!0,F.disable=A[2],de(()=>d=!1)),r.$set(F);const k={};if(!m&&J&1&&(m=!0,k.checked=A[0].intLvFree,de(()=>m=!1)),!g&&J&4&&(g=!0,k.disable=A[2],de(()=>g=!1)),a.$set(k),J&3){C=A[1];let D;for(D=0;D<C.length;D+=1){const z=en(A,C,D);p[D]?(p[D].p(z,J),M(p[D],1)):(p[D]=on(z),p[D].c(),M(p[D],1),p[D].m(f.parentNode,f))}for(ye(),D=C.length;D<p.length;D+=1)x(D);$e()}},i(A){if(!h){for(let J=0;J<b.length;J+=1)M(_[J]);M(r.$$.fragment,A),M(a.$$.fragment,A);for(let J=0;J<C.length;J+=1)M(p[J]);h=!0}},o(A){_=_.filter(Boolean);for(let J=0;J<_.length;J+=1)O(_[J]);O(r.$$.fragment,A),O(a.$$.fragment,A),p=p.filter(Boolean);for(let J=0;J<p.length;J+=1)O(p[J]);h=!1},d(A){A&&N(e),Ie(_,A),A&&N(s),H(r,A),A&&N(c),H(a,A),A&&N(u),Ie(p,A),A&&N(f)}}}function mi(n){let e,o;return e=new tt({props:{name:gi,$$slots:{default:[fi]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},p(t,[i]){const s={};i&65543&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){O(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}const gi="Automatically...";function pi(n,e,o){let t,i;te(n,ne,f=>o(0,i=f));const s=[{name:"Fix Factor Loading of First Indicator at 1",modelProperty:"fix_first"},{name:"Include Variances",modelProperty:"auto_var"},{name:"Include Covariances of Exogenous Latent Variables",modelProperty:"auto_cov_lv_x"},{name:"Include Covariances of Dependent Variables",modelProperty:"auto_cov_y"},{name:"Fix Variance of Only Indicator to 0",modelProperty:"fix_single"},{name:"Treat Exogenous Observed Variables as Fixed Variables",modelProperty:"fixed_x"},{name:"Include Freely Estimated Thresholds for Ordered Variables",modelProperty:"auto.th"},{name:"Include Freely Estimated Response Scaling Parameters for Ordered Variables",modelProperty:"auto.delta"}];let r=[{name:"Default",value:"default"},{name:"Yes",value:"true"},{name:"No",value:"false"}];function l(f){n.$$.not_equal(i.meanStruc,f)&&(i.meanStruc=f,ne.set(i))}function d(f){n.$$.not_equal(i.intOvFree,f)&&(i.intOvFree=f,ne.set(i))}function c(f){t=f,o(2,t),o(0,i)}function a(f){n.$$.not_equal(i.intLvFree,f)&&(i.intLvFree=f,ne.set(i))}function m(f){t=f,o(2,t),o(0,i)}function g(f,h){n.$$.not_equal(h.name,f)&&(h.name=f,o(1,s))}function u(f,h){n.$$.not_equal(i[h.modelProperty],f)&&(i[h.modelProperty]=f,ne.set(i))}return n.$$.update=()=>{n.$$.dirty&1&&o(2,t=i.meanStruc==="false")},[i,s,t,r,l,d,c,a,m,g,u]}class hi extends X{constructor(e){super(),Z(this,e,pi,mi,K,{})}}function bi(n){let e,o;return e=new ut({props:{name:"Help",menuItems:n[0]}}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},p:ce,i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){O(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}function _i(){Shiny.setInputValue("show_help",Math.random())}function vi(){window.open("https://doi.org/10.1080/10705511.2024.2420678","_blank")}function yi(){bootbox.alert({title:"How to Cite",className:"dialogWide",message:`To cite this package in publications, please use:<br><br>
              <div style="margin-left: 20px;">
                  Karch, J. D. (2025). lavaangui: A Web-Based Graphical Interface for Specifying Lavaan Models by Drawing Path Diagrams.
                  <i>Structural Equation Modeling: A Multidisciplinary Journal,</i> 1–12. 
                  <a href="https://doi.org/10.1080/10705511.2024.2420678" target="_blank">https://doi.org/10.1080/10705511.2024.2420678</a>
              </div>
              <br>
              A BibTeX entry for LaTeX users is:<br><br>
              <div style="margin-left: 20px;">
                  <pre>
@Article{,
  author = {J. D. Karch},
  year = {2025},
  title = {{lavaangui}: A Web-Based Graphical Interface for Specifying Lavaan Models by Drawing Path Diagrams},
  journal = {Structural Equation Modeling: A Multidisciplinary Journal},
  doi = {10.1080/10705511.2024.2420678},
  publisher = {Routledge},
  pages = {1--12},
}</pre>
              </div>`})}function $i(n){let e,o;Shiny.addCustomMessageHandler("version",function(s){e=s[0].join(".")}),Shiny.addCustomMessageHandler("lavVersion",function(s){o=s[0].join(".")});const t=[{name:"Show Commands",action:_i},{name:"Open Tutorial",action:vi},{name:"About",action:i},{name:"Cite",action:yi}];function i(){bootbox.alert({title:"About lavaangui",size:"large",message:`lavaangui version: ${e}<br> lavaan version: ${o}  <br>Author: Julian D. Karch<br> Email: j.d.karch@fsw.leidenuniv.nl <br> lavaangui is BETA software. Please report any bugs at https://github.com/karchjd/lavaangui/issues.`})}return[t]}class wi extends X{constructor(e){super(),Z(this,e,$i,bi,K,{})}}function ki(n){let e,o,t,i,s,r,l,d,c,a,m,g,u,f,h,b,_,S,v,L,y;function $(P){n[2](P)}let w={name:"Show Grid"};n[1].gridShow!==void 0&&(w.checked=n[1].gridShow),e=new Se({props:w}),se.push(()=>ae(e,"checked",$));function T(P){n[3](P)}let C={name:"Snap to Grid"};n[1].gridSnap!==void 0&&(C.checked=n[1].gridSnap),i=new Se({props:C}),se.push(()=>ae(i,"checked",T));function p(P){n[4](P)}let x={name:"Resize to Grid"};n[1].gridResize!==void 0&&(x.checked=n[1].gridResize),l=new Se({props:x}),se.push(()=>ae(l,"checked",p));function A(P){n[5](P)}let J={name:"Snap to Alignment on Release"};n[1].gridAlign!==void 0&&(J.checked=n[1].gridAlign),a=new Se({props:J}),se.push(()=>ae(a,"checked",A));function F(P){n[6](P)}let k={name:"Move Grid on Pan"};n[1].gridMovePan!==void 0&&(k.checked=n[1].gridMovePan),u=new Se({props:k}),se.push(()=>ae(u,"checked",F));function D(P){n[7](P)}let z={name:"Grid Spacing:",min:5};n[1].gridSpace!==void 0&&(z.value=n[1].gridSpace),b=new at({props:z}),se.push(()=>ae(b,"value",D));function fe(P){n[8](P)}let ee={name:"Line Width:",min:0};return n[1].gridWidth!==void 0&&(ee.value=n[1].gridWidth),v=new at({props:ee}),se.push(()=>ae(v,"value",fe)),{c(){q(e.$$.fragment),t=V(),q(i.$$.fragment),r=V(),q(l.$$.fragment),c=V(),q(a.$$.fragment),g=V(),q(u.$$.fragment),h=V(),q(b.$$.fragment),S=V(),q(v.$$.fragment)},m(P,re){j(e,P,re),I(P,t,re),j(i,P,re),I(P,r,re),j(l,P,re),I(P,c,re),j(a,P,re),I(P,g,re),j(u,P,re),I(P,h,re),j(b,P,re),I(P,S,re),j(v,P,re),y=!0},p(P,re){const qe={};!o&&re&2&&(o=!0,qe.checked=P[1].gridShow,de(()=>o=!1)),e.$set(qe);const wt={};!s&&re&2&&(s=!0,wt.checked=P[1].gridSnap,de(()=>s=!1)),i.$set(wt);const kt={};!d&&re&2&&(d=!0,kt.checked=P[1].gridResize,de(()=>d=!1)),l.$set(kt);const Et={};!m&&re&2&&(m=!0,Et.checked=P[1].gridAlign,de(()=>m=!1)),a.$set(Et);const Ct={};!f&&re&2&&(f=!0,Ct.checked=P[1].gridMovePan,de(()=>f=!1)),u.$set(Ct);const St={};!_&&re&2&&(_=!0,St.value=P[1].gridSpace,de(()=>_=!1)),b.$set(St);const Lt={};!L&&re&2&&(L=!0,Lt.value=P[1].gridWidth,de(()=>L=!1)),v.$set(Lt)},i(P){y||(M(e.$$.fragment,P),M(i.$$.fragment,P),M(l.$$.fragment,P),M(a.$$.fragment,P),M(u.$$.fragment,P),M(b.$$.fragment,P),M(v.$$.fragment,P),y=!0)},o(P){O(e.$$.fragment,P),O(i.$$.fragment,P),O(l.$$.fragment,P),O(a.$$.fragment,P),O(u.$$.fragment,P),O(b.$$.fragment,P),O(v.$$.fragment,P),y=!1},d(P){H(e,P),P&&N(t),H(i,P),P&&N(r),H(l,P),P&&N(c),H(a,P),P&&N(g),H(u,P),P&&N(h),H(b,P),P&&N(S),H(v,P)}}}function Ei(n){let e,o;return e=new tt({props:{minimal:n[0],name:"Grid Options",$$slots:{default:[ki]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},p(t,[i]){const s={};i&1&&(s.minimal=t[0]),i&514&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){O(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}function Ci(n,e,o){let t;te(n,ue,g=>o(1,t=g));let{minimal:i=!1}=e;function s(g){n.$$.not_equal(t.gridShow,g)&&(t.gridShow=g,ue.set(t))}function r(g){n.$$.not_equal(t.gridSnap,g)&&(t.gridSnap=g,ue.set(t))}function l(g){n.$$.not_equal(t.gridResize,g)&&(t.gridResize=g,ue.set(t))}function d(g){n.$$.not_equal(t.gridAlign,g)&&(t.gridAlign=g,ue.set(t))}function c(g){n.$$.not_equal(t.gridMovePan,g)&&(t.gridMovePan=g,ue.set(t))}function a(g){n.$$.not_equal(t.gridSpace,g)&&(t.gridSpace=g,ue.set(t))}function m(g){n.$$.not_equal(t.gridWidth,g)&&(t.gridWidth=g,ue.set(t))}return n.$$set=g=>{"minimal"in g&&o(0,i=g.minimal)},[i,t,s,r,l,d,c,a,m]}class Fn extends X{constructor(e){super(),Z(this,e,Ci,Ei,K,{minimal:0})}}function Si(n){return window.$(document).ready(function(){var e=!1;window.$(".navbar .dropdown").hover(function(){e&&(window.$(".navbar .dropdown").removeClass("open"),window.$(this).addClass("open"))},function(){}),window.$(".navbar .dropdown").on("show.bs.dropdown",function(){e=!0}),window.$(".navbar .dropdown").on("hide.bs.dropdown",function(){window.$(".navbar .dropdown.open").length<=1&&(e=!1)})}),[]}class Li extends X{constructor(e){super(),Z(this,e,Si,null,K,{})}}function Mi(n){let e,o;return e=new ut({props:{name:"Edit",menuItems:n[0]}}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},p(t,[i]){const s={};i&1&&(s.menuItems=t[0]),e.$set(s)},i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){O(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}function Di(n,e,o){let t,i;te(n,U,d=>o(1,t=d)),te(n,De,d=>o(2,i=d));function s(){i.undo()}function r(){i.redo()}let l=[];return n.$$.update=()=>{n.$$.dirty&2&&o(0,l=[{name:"Undo",action:s,disable:t.undoEmpty},{name:"Redo",action:r,disable:t.redoEmpty}])},[l,t]}class Ai extends X{constructor(e){super(),Z(this,e,Di,Mi,K,{})}}function Fi(n){let e,o,t,i,s,r,l,d,c,a,m,g,u,f,h,b,_,S;return e=new Cn({}),t=new Ai({}),s=new Ln({}),l=new hi({}),c=new ai({}),m=new An({}),u=new Fn({}),h=new wi({}),_=new Li({}),{c(){q(e.$$.fragment),o=V(),q(t.$$.fragment),i=V(),q(s.$$.fragment),r=V(),q(l.$$.fragment),d=V(),q(c.$$.fragment),a=V(),q(m.$$.fragment),g=V(),q(u.$$.fragment),f=V(),q(h.$$.fragment),b=V(),q(_.$$.fragment)},m(v,L){j(e,v,L),I(v,o,L),j(t,v,L),I(v,i,L),j(s,v,L),I(v,r,L),j(l,v,L),I(v,d,L),j(c,v,L),I(v,a,L),j(m,v,L),I(v,g,L),j(u,v,L),I(v,f,L),j(h,v,L),I(v,b,L),j(_,v,L),S=!0},i(v){S||(M(e.$$.fragment,v),M(t.$$.fragment,v),M(s.$$.fragment,v),M(l.$$.fragment,v),M(c.$$.fragment,v),M(m.$$.fragment,v),M(u.$$.fragment,v),M(h.$$.fragment,v),M(_.$$.fragment,v),S=!0)},o(v){O(e.$$.fragment,v),O(t.$$.fragment,v),O(s.$$.fragment,v),O(l.$$.fragment,v),O(c.$$.fragment,v),O(m.$$.fragment,v),O(u.$$.fragment,v),O(h.$$.fragment,v),O(_.$$.fragment,v),S=!1},d(v){H(e,v),v&&N(o),H(t,v),v&&N(i),H(s,v),v&&N(r),H(l,v),v&&N(d),H(c,v),v&&N(a),H(m,v),v&&N(g),H(u,v),v&&N(f),H(h,v),v&&N(b),H(_,v)}}}function Oi(n){let e,o;return e=new Ao({props:{$$slots:{default:[Fi]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},p(t,[i]){const s={};i&1&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){O(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}class Ii extends X{constructor(e){super(),Z(this,e,null,Oi,K,{})}}function Ni(n){let e;return{c(){e=G("pre"),E(e,"id","res-results"),E(e,"class","shiny-html-output well svelte-74yvxb"),E(e,"data-testid","result-text")},m(o,t){I(o,e,t)},p:ce,i:ce,o:ce,d(o){o&&N(e)}}}class Ti extends X{constructor(e){super(),Z(this,e,null,Ni,K,{})}}function xi(n){return window.cy=Y(Q),U.subscribe(e=>{window.appState=e}),ne.subscribe(e=>{window.modelOptions=e}),ht.subscribe(e=>{window.dataInfo=e}),Fe.subscribe(e=>{window.fitCache=e}),ue.subscribe(e=>{window.gridViewOptions=e}),De.subscribe(e=>{window.ur=e}),[]}class Pi extends X{constructor(e){super(),Z(this,e,xi,null,K,{})}}function Vi(n){return new RegExp("^[a-zA-Z\\._][a-zA-Z0-9\\._]*(?<!\\.)$").test(n)}function sn(n){return n==""?(bootbox.alert("Provide a label"),!1):Vi(n)?!0:(bootbox.alert("Provide a valid label"),!1)}function Ri(n,e){const o=e?"full":"minimal";return n.filter(t=>t.show===o||t.show==="both")}function zi(n,e,o){let t,i,s;te(n,U,u=>o(1,t=u)),te(n,De,u=>o(2,i=u)),te(n,ne,u=>o(3,s=u));let r=Y(Q);B.use(Un);var l=new Gn.ColorPicker("#picker",{width:200,color:"rgb(255, 0, 0)",borderWidth:1,borderColor:"#fff"});function d(u,f){var h;const b=r.$(":selected");if(b.length>1){if(f==="nodes"&&!b.every(_=>_.isNode()))return bootbox.alert("Not all selected elements are nodes. Aborting"),null;if(f==="edges"&&!b.every(_=>_.isEdge()))return bootbox.alert("Not all selected elements are edges. Aborting"),null;if(f==="nodes.edges"&&!b.every(_=>_.isEdge()||_.isNode()))return bootbox.alert("Not all selected elements are nodes or edges. Aborting"),null;h=b}else h=u;return h}const c=[{id:"add-observed",content:"Add Observed Variable",coreAsWell:!0,onClickFunction(u){const f=u.renderedPosition;be(le,f)},show:"full"},{id:"add-latent",content:"Add Latent Variable",coreAsWell:!0,onClickFunction(u){const f=u.renderedPosition;be(me,f)},show:"full"},{id:"add-constant",content:"Add Constant Variable",coreAsWell:!0,onClickFunction(u){const f=u.renderedPosition;be(Le,f)},show:"full"},{id:"label-para",content:"Add/Change Label",selector:`edge.${he}`,onClickFunction(u){const f=u.target||u.cyTarget;bootbox.prompt({title:"Enter a Label",value:f.getLabel(),callback(h){if(!sn(h))return!1;h!==f.getLabel()&&h!==null&&(f.addLabel(h),oe(s.mode))}})},show:"both",hasTrailingDivider:!1},{id:"label-remove",content:"Remove Label",selector:`edge.${Re}`,onClickFunction(u){(u.target||u.cyTarget).removeLabel(),oe(s.mode)},show:"both",hasTrailingDivider:!1},{id:"remove-edge",content:"Delete Edge",selector:`edge.${he}`,onClickFunction(u){(u.target||u.cyTarget).remove(),oe(s.mode)},show:"full",hasTrailingDivider:!0},{id:"fix-para",content:"Fix Parameter",selector:`edge.${Ce}.${he}, edge.${Ae}.${he}`,onClickFunction(u){const f=u.target||u.cyTarget;bootbox.prompt({title:"Enter a Value",inputType:"number",step:"any",callback(h){if(h=="")return bootbox.alert("Provide a value"),!1;h!==null&&(f.fixPara(h),oe(s.mode))}})},show:"full",hasTrailingDivider:!1},{id:"free-para",content:"Free Parameter",selector:`edge.${ke}.${he}, edge.${Ae}.${he}`,onClickFunction(u){var f=u.target||u.cyTarget;f.freePara(),oe(s.mode)},show:"full",hasTrailingDivider:!1},{id:"switch-reg",content:"Mark as Regression Relationship",selector:`edge.${We}`,onClickFunction(u){(u.target||u.cyTarget).markRegression(),oe(s.mode)},show:"full",hasTrailingDivider:!1},{id:"switch-factor",content:"Mark as Factor Loading",selector:`edge.${ot}`,onClickFunction(u){(u.target||u.cyTarget).markFactload(),oe(s.mode)},show:"full",hasTrailingDivider:!1},{id:"free-force-para",content:"Force Parameter Free",selector:`edge.${Ce}.${he}, edge.${ke}.${he}`,onClickFunction(u){(u.target||u.cyTarget).forceFreePara(),oe(s.mode)},show:"full",hasTrailingDivider:!0},{id:"revert-arrow",content:"Revert Direction",selector:`edge[isMean="0"].${Me}.${he}`,onClickFunction(u){(u.target||u.cyTarget).revert(),oe(s.mode)},show:"full",hasTrailingDivider:!1},{id:"set-undirected",content:"Set Undirected",selector:`edge[isMean="0"].${Me}.${he}`,onClickFunction(u){(u.target||u.cyTarget).setUndirected(),oe(s.mode)},show:"full",hasTrailingDivider:!0},{id:"set-arrow",content:"Set Directed",selector:`edge.${Oe}.${he}`,onClickFunction(u){(u.target||u.cyTarget).setDirected(),oe(s.mode)},show:"full",hasTrailingDivider:!0},{id:"free-orientation",content:"Free Loop Orientation",selector:`edge.${lt}.fixDeg`,onClickFunction(u){const f=u.target||u.cyTarget;f.removeClass("fixDeg"),pe(f.source().id())},show:"both",hasTrailingDivider:!0},{id:"change-fromUser",content:"Include in User Model",selector:`edge.${xe}`,onClickFunction(u){const f=u.target||u.cyTarget;if(f.myIsLoop()&&f.source().isOrdered()){ge("danger","User-defined variance arrow is not allowed for ordered variables.");return}f.markAddedUser(),oe(s.mode)},show:"full",hasTrailingDivider:!0},{id:"color-edge",content:"Change Edge Color",selector:"edge",show:"both",onClickFunction(u){var f=u.target||u.cyTarget;const h=d(f,"edges");if(h===null)return null;m(f,h,"edge")}},{id:"change-line-style",content:"Change Line Style",show:"both",selector:"edge",submenu:[{id:"line-style-solid",content:"Solid",selector:"edge",onClickFunction(u){const f=u.target||u.cyTarget,h=d(f,"edges");h!==null&&i.do("style",{eles:h,style:{"line-style":"solid"}})}},{id:"line-style-dotted",content:"Dotted",selector:"edge",onClickFunction(u){const f=u.target||u.cyTarget,h=d(f,"edges");h!==null&&i.do("style",{eles:h,style:{"line-style":"dotted"}})}},{id:"line-style-dashed",content:"Dashed",selector:"edge",onClickFunction(u){const f=u.target||u.cyTarget,h=d(f,"edges");h!==null&&i.do("style",{eles:h,style:{"line-style":"dashed"}})}}]},{id:"change-line-width",content:"Change Line Width",show:"both",selector:"edge",onClickFunction(u){var f=u.target||u.cyTarget;const h=d(f,"edges");if(h===null)return null;bootbox.prompt({title:"Enter New Line Width:",value:f.style("width"),callback(b){b!==null&&i.do("style",{eles:h,style:{width:b}})}})}},{id:"rename-node",show:"both",content:"Rename Variable",selector:`node.${me}, node.${le}`,onClickFunction(u){const f=u.target||u.cyTarget,h=t.columnNames;let b;t.dataAvail&&(b=h.map(S=>`<option value="${S}">${S}</option>`).join(""));const _=t.dataAvail&&f.isObserved()?`
      <label>Or Select From Variables in Your Data:</label>
      <select class="form-control" id="label-dropdown">
        <option value="">--Select--</option>
        ${b}
      </select>
    `:"";bootbox.dialog({title:"Rename Variable",message:`
      <div>
        <label>Enter a label:</label>
        <input type="text" class="form-control" id="new-label" value=${f.getLabel()}>
        ${_}
      </div>
    `,buttons:{cancel:{label:"Cancel",className:"btn-default"},confirm:{label:"Rename",className:"btn-primary",callback(){let S=document.getElementById("new-label").value;const v=t.dataAvail&&f.isObserved()?document.getElementById("label-dropdown").value:"";let L;if(S==f.getLabel()&&v!=""?L=v:L=S,!sn(L))return!1;L&&(f.setLabel(L),h&&h.includes(f.getLabel())?(f.link(),ge("success",`Variable ${f.data("label")} linked to data`)):f.isLinked()&&(f.unlink(),ge("info",`Variable ${f.getLabel()} unlinked`)),oe(s.mode))}}},onShown(S){document.getElementById("new-label").addEventListener("keypress",function(v){v.key==="Enter"&&(v.preventDefault(),S.target.querySelector(".btn-primary").click())})}})}},{id:"remove-node",content:"Delete Variable",selector:`node.${me}, node.${le}, node.${Le}`,onClickFunction(u){(u.target||u.cyTarget).remove(),oe(s.mode)},show:"full",hasTrailingDivider:!0},{id:"change-latent",content:"Change to Latent",selector:`node.${le}`,onClickFunction(u){(u.target||u.cyTarget).makeLatent(),oe(s.mode)},show:"full",hasTrailingDivider:!1},{id:"change-ordered",content:"Change to Ordered",selector:`node.${le}.${Je}`,onClickFunction(u){const f=u.target||u.cyTarget;f.makeOrdered(),f.connectedEdges().forEach(h=>{h.myIsLoop()&&h.isUserAdded()&&(h.remove(),ge("warning","Removed variance user-defined arrow as it is not allowed for ordered variables."))}),oe(s.mode)},show:"full",hasTrailingDivider:!0},{id:"change-continous",content:"Change to Continous",selector:`node.${le}.${Ye}`,onClickFunction(u){(u.target||u.cyTarget).makeContinous(),oe(s.mode)},show:"full",hasTrailingDivider:!0},{id:"change-observed",show:"full",content:"Change to Observed",selector:`node.${me}`,hasTrailingDivider:!0,onClickFunction(u){const f=u.target||u.cyTarget;f.makeObserved();let h=t.columnNames;h&&h.includes(f.getLabel())&&(f.link(),bootbox.alert("Variable linked with data set")),oe(s.mode)}},{id:"change-shape-hexagon",content:"Change Shape to Hexagon",selector:'node[shape = "ellipse"]',show:"both",onClickFunction(u){var f=u.target||u.cyTarget;const h=d(f,"nodes");if(h===null)return null;i.do("style",{eles:h,style:{shape:"hexagon"}})}},{id:"change-shape-ellipse",content:"Change Shape to Ellipse",selector:'node[shape = "hexagon"]',show:"both",onClickFunction(u){var f=u.target||u.cyTarget;const h=d(f,"nodes");if(h===null)return null;i.do("style",{eles:h,style:{shape:"ellipse"}})}},{id:"color-node",content:"Change Background Color",selector:"node",show:"both",onClickFunction(u){var f=u.target||u.cyTarget;const h=d(f,"nodes");if(h===null)return null;m(f,h,"nodes")}},{id:"change-border-width",content:"Change Border Width",show:"both",selector:`node.${me}, node.${le}, node.${Le}`,onClickFunction(u){var f=u.target||u.cyTarget;const h=d(f,"nodes");if(h===null)return null;bootbox.prompt({title:"Enter New Border Width:",value:f.style("border-width"),callback(b){b!==null&&i.do("style",{eles:h,style:{"border-width":b}})}})}},{id:"change-font-size",content:"Change Font Size",show:"both",hasTrailingDivider:!0,selector:`node.${me}, node.${le}, node.${Le}, edge`,onClickFunction(u){var f=u.target||u.cyTarget;const h=d(f,"nodes.edges");if(h===null)return null;bootbox.prompt({title:"Enter New Font Size:",value:f.style("font-size"),callback(b){b!==null&&i.do("style",{eles:h,style:{"font-size":b}})}})}}];let a;function m(u,f,h){var b=document.getElementById("picker");b.style.display="block",b.style.left=event.pageX+"px",b.style.top=event.pageY+"px";let _;a=f;const S=function(y){_=y.hexString};l.on("color:change",S);const v=function(y){b.contains(y.target)||(h=="edge"?i.do("style",{eles:a,style:{"line-color":_,"target-arrow-color":_,"source-arrow-color":_}}):i.do("style",{eles:a,style:{"background-color":_}}),b.style.display="none",l.off("color:change",S),document.removeEventListener("click",v),document.removeEventListener("keydown",L))};setTimeout(()=>document.addEventListener("click",v),0);const L=function(y){y.key==="Enter"&&v(y)};document.addEventListener("keydown",L)}const g=Ri(c,t.full);return we(()=>{r.contextMenus({menuItems:g})}),[]}class Bi extends X{constructor(e){super(),Z(this,e,zi,null,K,{})}}function Ui(n){let e,o,t,i,s,r,l,d,c,a,m,g,u,f,h,b,_,S,v,L,y,$,w,T;return{c(){e=G("div"),o=G("button"),t=_e("Show Data"),s=V(),r=G("div"),l=G("button"),d=_e("User Model"),a=V(),m=G("button"),g=_e("Autocompleted Model"),f=V(),h=G("button"),b=_e("Estimates"),v=V(),L=G("button"),y=_e("More Results"),E(o,"class","btn btn-lg btn-default"),o.disabled=i=!n[2].dataAvail,E(l,"class",c="btn btn-lg "+(n[1]==="user model"?"btn-primary active":"btn-default")),E(m,"class",u="btn btn-lg "+(n[1]==="full model"?"btn-primary active":"btn-default")),E(h,"class",_="btn btn-lg "+(n[1]==="estimate"?"btn-primary active":"btn-default")),h.disabled=S=!n[2].dataAvail||n[2].modelEmpty,E(r,"class","btn-group btn-toggle svelte-xny576"),E(L,"class","btn btn-lg btn-default"),L.disabled=$=n[0].mode!="estimate",E(e,"class","toolbox navbar-static-bottom svelte-xny576")},m(C,p){I(C,e,p),R(e,o),R(o,t),R(e,s),R(e,r),R(r,l),R(l,d),R(r,a),R(r,m),R(m,g),R(r,f),R(r,h),R(h,b),R(e,v),R(e,L),R(L,y),w||(T=[ie(o,"click",n[6]),ie(l,"click",n[7]),ie(m,"click",n[8]),ie(h,"click",n[9]),ie(L,"click",n[10])],w=!0)},p(C,[p]){p&4&&i!==(i=!C[2].dataAvail)&&(o.disabled=i),p&2&&c!==(c="btn btn-lg "+(C[1]==="user model"?"btn-primary active":"btn-default"))&&E(l,"class",c),p&2&&u!==(u="btn btn-lg "+(C[1]==="full model"?"btn-primary active":"btn-default"))&&E(m,"class",u),p&2&&_!==(_="btn btn-lg "+(C[1]==="estimate"?"btn-primary active":"btn-default"))&&E(h,"class",_),p&4&&S!==(S=!C[2].dataAvail||C[2].modelEmpty)&&(h.disabled=S),p&1&&$!==($=C[0].mode!="estimate")&&(L.disabled=$)},i:ce,o:ce,d(C){C&&N(e),w=!1,Xe(T)}}}function Gi(){window.$("#data-modal-2").modal()}function qi(n,e,o){let t,i,s;te(n,ne,h=>o(0,t=h)),te(n,U,h=>o(2,i=h)),te(n,ue,h=>o(11,s=h));let r;function l(h){o(1,r=h),h!=="user model"?W(ue,s.showLav=!0,s):W(ue,s.showLav=!1,s),W(ne,t.mode=h,t)}window.$("#data-modal-extend-results").on("hidden.bs.modal",function(){W(U,i.showServerErrors=!0,i)});function d(){window.$("#data-modal-extend-results").modal(),W(U,i.showServerErrors=!1,i)}let c=!1;we(()=>{o(5,c=!0)});const a=()=>Gi(),m=()=>l("user model"),g=()=>l("full model"),u=()=>l("estimate"),f=()=>d();return n.$$.update=()=>{n.$$.dirty&33&&c&&o(1,r=t.mode)},[t,r,i,l,d,c,a,m,g,u,f]}class ji extends X{constructor(e){super(),Z(this,e,qi,Ui,K,{})}}function pt(n,e){if(n===e)return!0;const o=Math.abs(n-e);return o<Number.EPSILON?!0:o<=Number.EPSILON*Math.min(Math.abs(n),Math.abs(e))}function Hi(){return typeof Shiny=="object"&&Shiny!==null}function Wi(n){let e=0,o=Number.NEGATIVE_INFINITY,t=Number.NEGATIVE_INFINITY,i=n.nodes().length;n.nodes().forEach(l=>{let d=l.position();e+=d.x,d.x>o&&(o=d.x),d.y>t&&(t=d.y)});let s=e/i,r=t+100;return{x:s,y:r}}function Yi(n,e){if(!n)throw new Error(e||"Assertion failed")}function Ji(n,e,o){let t,i,s;te(n,ne,a=>o(0,t=a)),te(n,U,a=>o(1,i=a)),te(n,Fe,a=>o(2,s=a));function r(a,m,g){let u,f,h;return m==="=~"?(u=Me,f=a,h=g):m=="~1"?(f=1,h=a,u=Me):m==="~~"?(h=g,f=a,a===g?u=lt:u=Oe):(h=a,f=g,u=Me),{directed:u,source:f,target:h}}function l(a,m,g,u){let f=r(a,m,g);f.user=u;const b=Y(Q).edges(function(_){let S;if(f.source!=1?(S=_.source().getLabel()==f.source&&_.target().getLabel()==f.target,f.directed==Oe&&(S=S||_.source().getLabel()==f.target&&_.target().getLabel()==f.source)):S=_.source().isConstant()&&_.target().getLabel()==f.target,f.user!=null)if(f.user==1||f.user==7)S=S&&_.isUserAdded();else if(f.user==0)S=S&&_.isLavaanAdded();else throw new Error("User was neither 0 nor 1");return S});if(b.length>1)throw new Error("Multiple edges found");return b}function d(a,m){W(U,i.meansModelled=!1,i),W(U,i.loadingMode=!0,i);let g=Y(Q);if(!m)g.edges().invalidate();else{let _=function(L,y,$){be(L,$,!1,y)};const b=Array.isArray(a.obs)?a.obs:[a.obs];let S={x:200,y:200};for(let L=0;L<b.length;L++)S.x=S.x+50,_(le,b[L],S);const v=Array.isArray(a.latent)?a.latent:[a.latent];S={x:200,y:100};for(let L=0;L<v.length;L++)S.x=S.x+50,_(me,v[L]);a=a.parTable}const u=new Set;for(let b=0;b<a.lhs.length;b++)a.op[b]==="|"&&u.add(a.lhs[b]);let f=!1,h;for(let b=0;b<a.lhs.length;b++){if(a.op[b]=="~*~"||a.op[b]=="|"||a.op[b]=="==")continue;let _=l(a.lhs[b],a.op[b],a.rhs[b],a.user[b]);if(!m&&a.user[b]==1)Yi(_.length==1),_.validate(),_.isModifiedLavaan()&&_.isFixed()&&_.revertLavaanFix(),a.free[b]==0&&!_.isFixed()&&_.fixPara(a.ustart[b]).markModifiedLavaan();else{let S;if(m||_.length==0){const v=r(a.lhs[b],a.op[b],a.rhs[b]);if(m&&i.full&&a.user[b]==0)continue;let L;if(v.source!==1)L=g.nodes(function($){return $.getLabel()==v.source})[0].id();else{if(W(U,i.meansModelled=!0,i),a.free[b]==0&&a.ustart[b]==0)continue;f||(h=be(Le,Wi(g),!1),f=!0,g.nodes(function(w){return w.id()==h})[0].markAddedLavaan()),L=h}const y=g.nodes(function($){return $.getLabel()==v.target})[0].id();S=g.add({groups:"edges",data:{source:L,target:y},classes:v.directed+" nolabel"}),a.label[b]!=""&&S.addLabelImport(a.label[b]),a.user[b]==1?S.markAddedUser():S.markAddedLavaan(),!m&&v.directed==Me&&(pe(L),pe(y))}else!m&&_.length==1&&(S=_);a.free[b]==0?a.ustart[b]!==0&&a.exo[b]!==1?u.has(S.target().getLabel())&&a.op[b]=="~~"?S.fixPara("Total Variance 1"):S.fixPara(a.ustart[b]):S.remove():S.setFree(),m||S.validate(),S.checkAndMarkPotentialLatObReg()}}if(!m)g.edges().forEach(b=>{b.isValid()||b.remove()}),g.getLavaanNodes().forEach(b=>{b.connectedEdges().length==0&&(b.remove(),g.nodes().forEach(_=>{pe(_.id())}))});else{st("tree",!1);const b=new Map;g.getUndirectedEdges().forEach(v=>{const L=pe(v.source().id(),!0),y=pe(v.target().id(),!0),$=w=>{b.set(w,(b.get(w)||0)+1)};$(L),$(y)});let _=null,S=0;b.forEach((v,L)=>{v>S&&(S=v,_=L)}),_===180&&g.edges().forEach(v=>{v.isUserAdded()&&v.data("control-point-distances",[100])}),g.fit()}i.parsedModel||W(U,i.parsedModel=!0,i),g.getUserEdges().length>0&&W(U,i.modelEmpty=!1,i),W(U,i.loadingMode=!1,i)}function c(a,m){Y(Q);const g=a.op.some(u=>u.includes("~~"));for(let u=0;u<a.lhs.length;u++){if(a.op[u]=="~*~"||a.op[u]=="|")continue;let f=l(a.lhs[u],a.op[u],a.rhs[u]);if(f.length>0){let h={};f.isFree()?(h.est=a.est[u],h.p_value=a.pvalue[u],h.se=a.se[u],h.ciLow=a["ci.lower"][u],h.ciHigh=a["ci.upper"][u],h.est_std=m["est.std"][u],h.se_std=m.se[u],h.ciLow_std=m["ci.lower"][u],h.ciHigh_std=m["ci.upper"][u],h.p_value_std=m.pvalue[u],pt(h.est_std,1)&&h.p_value_std==null&&pt(h.ciLow_std,1)&&pt(h.ciHigh_std,1)&&f.addClass("fixedUnderStd"),f.addClass("hasEst")):g&&a.op[u]=="~~"?(h.estFixed=a.est[u],h.estFixed_std=m["est.std"][u],f.addClass("hasEstFixed")):f.isFixed()&&(h.est_std=m["est.std"][u],h.se_std=m.se[u],h.ciLow_std=m["ci.lower"][u],h.ciHigh_std=m["ci.upper"][u],f.addClass("hasEstStd")),f.data("estimates",h)}}}return Hi()&&(Shiny.addCustomMessageHandler("dataInfo",function(a){bt(a.columns),W(U,i.columnNames=[...a.columns],i),W(U,i.ids=[...a.columns],i),W(U,i.loadedFileName=a.name,i),W(U,i.dataAvail=!0,i),oe(t.mode),window.$("#upload-modal").modal("hide"),a.showData&&window.$("#data-modal-2").modal()}),Shiny.addCustomMessageHandler("lav_failed",function(a){W(U,i.fitting=!1,i),a=="stopped"?ge("danger","Fitting stopped by user"):ge("danger","Fitting failed")}),Shiny.addCustomMessageHandler("fitting",function(a){W(U,i.fitting=!0,i)}),Shiny.addCustomMessageHandler("lav_warning_error",function(a){const m=a.type=="warning"?"warning":"error";a.origin=="loading data"&&window.$("#upload-modal").modal("hide"),ge(a.type,`During ${a.origin} the following ${m} occurred: ${a.message}`)}),Shiny.addCustomMessageHandler("lav_error_fitting",function(a){W(U,i.fitting=!1,i),ge(a.type,"During "+a.origin+" the following error occurred: "+a.message)}),Shiny.addCustomMessageHandler("usecache",function(a){ge("info","Reusing cached results because model and data did not change since last fit")}),Shiny.addCustomMessageHandler("data_missing",function(a){ge("danger","Could not fit model because no data is available")}),Shiny.addCustomMessageHandler("columnames",function(a){const m=Y(Q),g=i.columnNames[a.index];W(U,i.columnNames[a.index]=a.newcolname,i),m.getObservedNodes().forEach(u=>{u.getLabel()==g&&(u.setLabel(a.newcolname),oe(t.mode))}),bt(i.columnNames)}),Shiny.addCustomMessageHandler("missing_vars",function(a){var m=[].concat(a).join(", ");ge("danger","Could not fit model because "+m+" are observed variables in the model but not present in the data.")}),Shiny.addCustomMessageHandler("lav_model",function(a){d(a,!1)}),Shiny.addCustomMessageHandler("imported_model",function(a){d(a,!0);let m=Y(Q);Array.isArray(a.ordered)||(a.ordered=[a.ordered]),a.ordered.forEach(g=>{m.nodes(function(u){return u.getLabel()==g})[0].makeOrdered()}),W(ne,t.fix_first=!1,t),ge("warning","lavaangui only imports user edges. Your full model is very likely different than what you fitted in lavaan because of different options used. To display the model, as you fitted it in lavaan, use plot_lavaan")}),Shiny.addCustomMessageHandler("lav_results",function(a){W(U,i.loadingMode=!0,i),W(Fe,s.lastFitLavFit=a.fitted_model,s),W(Fe,s.lastFitModel=a.model,s),W(Fe,s.lastFitData=a.data,s),W(U,i.fitting=!1,i),W(U,i.loadingMode=!1,i)}),Shiny.addCustomMessageHandler("lav_estimates",function(a){const m=a.normal,g=a.std;c(m,g)}),Shiny.addCustomMessageHandler("setToEstimate",function(a){W(ne,t.mode="estimate",t)})),[]}class Xi extends X{constructor(e){super(),Z(this,e,Ji,null,K,{})}}function Zi(n){qn(B);let e=Y(Q);var o={zoomFactor:.05,zoomDelay:45,minZoom:e.minZoom(),maxZoom:e.maxZoom(),fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,zoomOnly:!1,fitSelector:void 0,animateOnFit(){return!1},fitAnimationDuration:1e3};return we(()=>{e.panzoom(o),e.on("zoom",function(t){var i=e.zoom();i<o.minZoom?e.zoom(o.minZoom):i>o.maxZoom&&e.zoom(o.maxZoom)})}),[]}class Ki extends X{constructor(e){super(),Z(this,e,Zi,null,K,{})}}function Qi(n){let e,o;const t=n[1].default,i=Ze(t,n,n[0],null);return{c(){e=G("div"),i&&i.c(),E(e,"class","svelte-16igfw6")},m(s,r){I(s,e,r),i&&i.m(e,null),o=!0},p(s,[r]){i&&i.p&&(!o||r&1)&&Ke(i,t,s,s[0],o?et(t,s[0],r,null):Qe(s[0]),null)},i(s){o||(M(i,s),o=!0)},o(s){O(i,s),o=!1},d(s){s&&N(e),i&&i.d(s)}}}function es(n,e,o){let{$$slots:t={},$$scope:i}=e;return n.$$set=s=>{"$$scope"in s&&o(0,i=s.$$scope)},[i,t]}class ts extends X{constructor(e){super(),Z(this,e,es,Qi,K,{})}}function ns(n,e,o){let t,i;te(n,De,r=>o(0,t=r)),te(n,U,r=>o(1,i=r));let s=Y(Q);return setInterval(()=>{i.drawing=="none"&&s&&(s.autoungrabify(!1),s.nodes().grabify(),W(U,i.undoEmpty=t.isUndoStackEmpty(),i),W(U,i.redoEmpty=t.isRedoStackEmpty(),i))},1e3),window.addEventListener("beforeunload",r=>{r.preventDefault(),r.returnValue=""}),we(()=>{Shiny.unbindAll(),Shiny.bindAll()}),[]}class os extends X{constructor(e){super(),Z(this,e,ns,null,K,{})}}function rn(n){let e,o,t,i,s,r;return{c(){e=G("div"),o=G("button"),o.innerHTML='<span class="glyphicon glyphicon-refresh spinning svelte-16d2v0h"></span> Fitting...',t=V(),i=G("button"),i.textContent="Cancel",E(o,"class","btn btn-lg btn-secondary fixed-width disabled-button svelte-16d2v0h"),E(o,"id","fitting-button"),o.disabled=!0,E(i,"class","btn btn-lg btn-default fixed-width svelte-16d2v0h"),E(e,"class","center-screen svelte-16d2v0h")},m(l,d){I(l,e,d),R(e,o),R(e,t),R(e,i),s||(r=ie(i,"click",ss),s=!0)},p:ce,d(l){l&&N(e),s=!1,r()}}}function is(n){let e,o=n[0].fitting&&rn();return{c(){o&&o.c(),e=Be()},m(t,i){o&&o.m(t,i),I(t,e,i)},p(t,[i]){t[0].fitting?o?o.p(t,i):(o=rn(),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null)},i:ce,o:ce,d(t){o&&o.d(t),t&&N(e)}}}function ss(){Shiny.setInputValue("run-abort",Math.random())}function rs(n,e,o){let t;return te(n,U,i=>o(0,t=i)),[t]}class ls extends X{constructor(e){super(),Z(this,e,rs,is,K,{})}}function ln(n){let e,o,t=n[2][n[0].type].label+"",i,s,r=n[0].message+"",l,d;return{c(){e=G("div"),o=G("strong"),i=_e(t),s=V(),l=_e(r),E(e,"class",d=Ve(n[2][n[0].type].class+(n[1]?" fadeOut":""))+" svelte-1wv9zbn")},m(c,a){I(c,e,a),R(e,o),R(o,i),R(e,s),R(e,l)},p(c,a){a&1&&t!==(t=c[2][c[0].type].label+"")&&ze(i,t),a&1&&r!==(r=c[0].message+"")&&ze(l,r),a&3&&d!==(d=Ve(c[2][c[0].type].class+(c[1]?" fadeOut":""))+" svelte-1wv9zbn")&&E(e,"class",d)},d(c){c&&N(e)}}}function as(n){let e,o=n[0].message!==""&&ln(n);return{c(){o&&o.c(),e=Be()},m(t,i){o&&o.m(t,i),I(t,e,i)},p(t,[i]){t[0].message!==""?o?o.p(t,i):(o=ln(t),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null)},i:ce,o:ce,d(t){o&&o.d(t),t&&N(e)}}}function ds(n,e,o){let t;te(n,hn,l=>o(0,t=l));let i={success:{class:"alert-success",label:"Success!"},info:{class:"alert-info",label:"Info!"},warning:{class:"alert-warning",label:"Warning!"},danger:{class:"alert-danger",label:"Danger!"}},s=!1,r;return n.$$.update=()=>{n.$$.dirty&9&&t.message!==""&&(o(1,s=!1),clearTimeout(r),o(3,r=setTimeout(()=>{o(1,s=!0)},1e4)))},[t,s,i,r]}class us extends X{constructor(e){super(),Z(this,e,ds,as,K,{})}}function cs(n,e){const o={};return n.forEach((t,i)=>{o[t]=e[i]}),o}function fs(n,e){const o=Object.keys(e);let t={};return o.forEach(i=>{n.hasOwnProperty(i)&&(t[i]=n[i])}),t}function ms(n,e,o){let t,i,s;te(n,De,l=>o(0,t=l)),te(n,U,l=>o(1,i=l)),te(n,ne,l=>o(2,s=l));let r=Y(Q);return we(()=>{B.use(jn);const l={isDebug:!0};let d=r.undoRedo(l);De.set(d),d.action("style",function(c){let a={};const m=Object.keys(c.style);return c.eles.forEach(function(g){let u=[];m.forEach(f=>{u.push(g.data(f)||g.style(f)),g.data(f,c.style[f])}),a[g.id()]=cs(m,u)}),{eles:c.eles,style:a}},function(c){const a=fs(c.eles[0].style(),c.style[Object.keys(c.style)[0]]);return Object.keys(c.style).forEach(function(m){var g=r.getElementById(m);for(var u in c.style[m])g.data(u,c.style[m][u])}),{eles:c.eles,style:a}}),r.on("afterUndo",function(c,a){a!=="style"&&a!=="move"&&oe(s.mode)}),r.on("afterRedo",function(c,a){a!=="style"&&a!=="move"&&oe(s.mode)}),document.addEventListener("keydown",function(c){(c.ctrlKey||c.metaKey)&&c.target.nodeName==="BODY"&&c.which===90&&!i.fitting&&(c.preventDefault(),c.stopPropagation(),c.shiftKey?t.redo():t.undo())}),document.addEventListener("keyup",function(c){c.metaKey&&c.target.nodeName==="BODY"&&c.which===90&&(c.preventDefault(),c.stopPropagation())})}),[]}class gs extends X{constructor(e){super(),Z(this,e,ms,null,K,{})}}function ps(n,e,o){let t;return te(n,U,i=>o(0,t=i)),Shiny.addCustomMessageHandler("fullServer",function(i){W(U,t.full=i.full,t),W(U,t.ready=!0,t),W(U,t.shinyapps=i.shinyapps,t)}),[]}class hs extends X{constructor(e){super(),Z(this,e,ps,null,K,{})}}function bs(n,e,o){let t;te(n,ue,s=>o(1,t=s));let i=!1;return we(()=>{o(0,i=!0)}),n.$$.update=()=>{n.$$.dirty&3&&i&&Jo(t.showVar,t.showLav,t.showMean),n.$$.dirty&3&&i&&Yo(t.view,t.std,t.number_digits)},[i,t]}class _s extends X{constructor(e){super(),Z(this,e,bs,null,K,{})}}function vs(n){let e,o,t,i;const s=n[6].default,r=Ze(s,n,n[5],null);return{c(){e=G("section"),r&&r.c(),ve(e,"left",n[0]+"px"),ve(e,"top",n[1]+"px"),E(e,"class","draggable svelte-13fkbj1")},m(l,d){I(l,e,d),r&&r.m(e,null),o=!0,t||(i=[ie(window,"mouseup",n[4]),ie(window,"mousemove",n[3]),ie(e,"mousedown",n[2])],t=!0)},p(l,[d]){r&&r.p&&(!o||d&32)&&Ke(r,s,l,l[5],o?et(s,l[5],d,null):Qe(l[5]),null),(!o||d&1)&&ve(e,"left",l[0]+"px"),(!o||d&2)&&ve(e,"top",l[1]+"px")},i(l){o||(M(r,l),o=!0)},o(l){O(r,l),o=!1},d(l){l&&N(e),r&&r.d(l),t=!1,Xe(i)}}}function ys(n,e,o){let{$$slots:t={},$$scope:i}=e,{left:s=100}=e,{top:r=100}=e,l=!1,d=0,c=0;function a(u){l=!0,d=u.clientX-s,c=u.clientY-r}function m(u){l&&(o(0,s=u.clientX-d),o(1,r=u.clientY-c))}function g(){l=!1}return n.$$set=u=>{"left"in u&&o(0,s=u.left),"top"in u&&o(1,r=u.top),"$$scope"in u&&o(5,i=u.$$scope)},[s,r,a,m,g,i,t]}class $s extends X{constructor(e){super(),Z(this,e,ys,vs,K,{left:0,top:1})}}function ws(n){let e,o,t;const i=n[0].default,s=Ze(i,n,n[1],null);return{c(){e=G("ul"),o=G("div"),s&&s.c(),ve(o,"display","flex"),ve(o,"flex-direction","column"),E(e,"class","nav navbar-nav navbar-left"),ve(e,"border","1px solid black"),ve(e,"z-index","9999")},m(r,l){I(r,e,l),R(e,o),s&&s.m(o,null),t=!0},p(r,l){s&&s.p&&(!t||l&2)&&Ke(s,i,r,r[1],t?et(i,r[1],l,null):Qe(r[1]),null)},i(r){t||(M(s,r),t=!0)},o(r){O(s,r),t=!1},d(r){r&&N(e),s&&s.d(r)}}}function ks(n){let e,o;return e=new $s({props:{$$slots:{default:[ws]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},p(t,[i]){const s={};i&2&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){O(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}function Es(n,e,o){let{$$slots:t={},$$scope:i}=e;return n.$$set=s=>{"$$scope"in s&&o(1,i=s.$$scope)},[t,i]}class Cs extends X{constructor(e){super(),Z(this,e,Es,ks,K,{})}}function Ss(n,e){return bootbox.alert({title:"<span style='color: red;'>Error</span>",message:`A ${e} error occurred:<br> <span style='color: red;'>${n}</span>.<br><br>Please consider reporting this issue by sending an email to <a href="mailto:j.d.karch@fsw.leidenuniv.nl">j.d.karch@fsw.leidenuniv.nl</a>.`,centerVertical:!0}),!0}function Ls(){return typeof Shiny=="object"&&Shiny!==null}function Ms(n){return Ls()&&Shiny.addCustomMessageHandler("serverError",function(e){Y(U).showServerErrors&&Ss(e.msg,"Server")}),[]}class Ds extends X{constructor(e){super(),Z(this,e,Ms,null,K,{})}}function As(n,e,o){let t;return te(n,ne,i=>o(0,t=i)),n.$$.update=()=>{n.$$.dirty&1&&oe(t.mode)},[t]}class Fs extends X{constructor(e){super(),Z(this,e,As,null,K,{})}}function Os(n){B.use(Hn);let e=Y(Q);return we(()=>{e.automove({nodesMatching:".automove-viewport",reposition:"viewport"})}),[]}class Is extends X{constructor(e){super(),Z(this,e,Os,null,K,{})}}function Ns(n){Wn(B,window.$,pn);let e=Y(Q);return we(()=>{e.nodeEditing({resizeToContentCueImage:"",undoable:!0})}),[]}class Ts extends X{constructor(e){super(),Z(this,e,Ns,null,K,{})}}function xs(n){return B("collection","init",function(){return this.addClass(Ce).addClass(Ge).addClass(he),this}),B("collection","free",function(){return this.hasClass(Ce)}),B("collection","addLabel",function(e){return this.addLabelImport(e).removeClass(Te),this}),B("collection","addLabelImport",function(e){return this.data("label",e).addClass(Re).removeClass(Ge),this}),B("collection","removeLabel",function(){return this.removeClass(Re).addClass(Ge).data("label",null),this}),B("collection","setLabel",function(e){return this.data("label",e),this}),B("collection","getLabel",function(){return this.data("label")}),B("collection","fixPara",function(e){return this.data("value",e).removeClass(Ce).removeClass(Ae).removeClass(At).addClass(ke),this}),B("collection","freePara",function(){return this.removeClass(ke).removeClass(Ae).removeClass(Te).addClass(Ce),this}),B("collection","setFree",function(){return this.removeClass(ke).removeClass(Ae).addClass(Ce),this}),B("collection","forceFreePara",function(){return this.removeClass(Ce).removeClass(ke).removeClass(Te).addClass(Ae),this}),B("collection","revert",function(){const e=this.source().id(),o=this.target().id();return this.move({source:o,target:e}),this}),B("collection","setUndirected",function(){return this.removeClass(Me).addClass(Oe),this}),B("collection","setDirected",function(){return this.removeClass(Oe).addClass(Me),this}),B("collection","isUndirected",function(){return this.hasClass(Oe)}),B("collection","isDirected",function(){return this.hasClass(Me)}),B("collection","makeLoop",function(){return this.addClass(lt),this}),B("collection","myIsLoop",function(){return this.hasClass(lt)}),B("collection","makeMeanEdge",function(){return this.data("isMean","1"),this}),B("collection","isMean",function(){return this.data("isMean")==="1"||this.isConstant()}),B("collection","makeOtherEdge",function(){return this.data("isMean","0"),this}),B("collection","isFixed",function(){return this.hasClass(ke)}),B("collection","isFree",function(){return this.hasClass(Ce)||this.hasClass(Ae)}),B("collection","isForceFree",function(){return this.hasClass(Ae)}),B("collection","hasLabel",function(){return this.hasClass(Re)}),B("collection","isModifiedLavaan",function(){return this.hasClass(Te)}),B("collection","markModifiedLavaan",function(){return this.addClass(Te),this}),B("collection","markAddedLavaan",function(){return this.addClass(xe).removeClass(he),this}),B("collection","markAddedUser",function(){return this.removeClass(xe).addClass(he),this}),B("collection","isUserAdded",function(){return this.hasClass(he)}),B("collection","isLavaanAdded",function(){return this.hasClass(xe)}),B("collection","getValue",function(){return this.data("value")}),B("collection","setValue",function(e){this.data("value",e)}),B("collection","invalidate",function(){return this.removeClass(ft),this}),B("collection","validate",function(){return this.addClass(ft),this}),B("collection","isValid",function(){return this.hasClass(ft)}),B("collection","revertLavaanFix",function(){this.freePara().removeClass(Te)}),B("collection","removeEstimates",function(){return this.removeClass(At).removeClass(Zn),this.removeData("estimates"),this.removeClass("fixedUnderStd"),this.removeClass("hasEst"),this.removeClass("hasEstFixed"),this.removeClass("hasEstStd"),this}),B("collection","checkAndMarkPotentialLatObReg",function(){return this.isDirected()&&this.source().isLatent()&&this.target().isObserved()&&(this.addClass(Qn),this.addClass(We)),this}),B("collection","markRegression",function(){return this.addClass(ot),this.removeClass(We),this}),B("collection","markFactload",function(){return this.removeClass(ot),this.addClass(We),this}),B("collection","isRegression",function(){return this.hasClass(ot)}),B("collection","isFactLoad",function(){return this.hasClass(We)}),B("collection","link",function(){return this.addClass(Ue),this}),B("collection","unlink",function(){return this.removeClass(Ue),this}),B("collection","isLinked",function(){return this.hasClass(Ue)}),B("collection","isLatent",function(){return this.hasClass(me)}),B("collection","makeLatent",function(){return this.removeClass(le).addClass(me).removeClass(Ue),this}),B("collection","makeObserved",function(){return this.addClass(le).removeClass(me),this}),B("collection","makeOrdered",function(){return this.removeClass(Je).addClass(Ye),this}),B("collection","isOrdered",function(){return this.hasClass(Ye)}),B("collection","makeContinous",function(){return this.addClass(Je).removeClass(Ye),this}),B("collection","isConstant",function(){return this.hasClass(Le)}),B("collection","isObserved",function(){return this.hasClass(le)}),B("core","getLavaanNodes",function(){return this.nodes(`.${xe}`)}),B("core","getLavaanEdges",function(){return this.edges(`.${xe}`)}),B("core","getObservedNodes",function(){return this.nodes(`.${le}`)}),B("core","getUserEdges",function(){return this.edges(`.${he}`)}),B("core","getUndirectedEdges",function(){return this.edges(`.${Oe}`)}),B("core","getLavaanModifiedEdges",function(){return this.edges(`.${Te}`)}),B("core","getLatentNodes",function(){return this.nodes(function(e){return e.hasClass(me)})}),[]}class Ps extends X{constructor(e){super(),Z(this,e,xs,null,K,{})}}function Vs(n){Yn(B,window.$,pn);let e=Y(Q);return we(()=>{const o="Bend";e.edgeEditing({undoable:!0,bendRemovalSensitivity:16,enableMultipleAnchorRemovalOption:!0,initAnchorsAutomatically:!1,useTrailingDividersAfterContextMenuOptions:!1,enableCreateAnchorOnDrag:!0,anchorShapeSizeFactor:4,addBendMenuItemTitle:null,removeBendMenuItemTitle:null,removeAllBendMenuItemTitle:null,addControlMenuItemTitle:`Add ${o} Point`,removeControlMenuItemTitle:`Remove ${o} Point`,removeAllControlMenuItemTitle:`Remove All ${o} Points`,handleReconnectEdge:!1}),e.style().update()}),[]}class Rs extends X{constructor(e){super(),Z(this,e,Vs,null,K,{})}}const an=840;function zs(n,e,o){let t;te(n,U,r=>o(0,t=r));function i(){var r=setTimeout(s,an*1e3);window.onmousemove=l,window.onmousedown=l,window.onclick=l,window.onscroll=l,window.onkeypress=l;function l(){clearTimeout(r),r=setTimeout(s,an*1e3)}}async function s(){console.log("Timeout");let r=null,l=null;if(t.dataAvail&&(En("saveData"),l=await new Promise(c=>{Shiny.addCustomMessageHandler("dataForSave",function(a){c(a)})})),t.modelEmpty||(r=yt()),r!=null||l!=null){bootbox.alert("Due to inactivity, you will be disconnected from the server shortly. Your work was saved for you. In case you have already been disconnected now, you can continue where you left off by refreshing the page.");let c=sessionStorage.getItem("sessionId");c||(c=Date.now().toString(),sessionStorage.setItem("sessionId",c),console.log("Session ID save: ",c));var d=new Dt("ModelDatabase");d.version(1).stores({cache:"sessionId, model, data"}),await d.cache.clear(),await d.cache.put({sessionId:c,model:r,data:l})}}return we(async()=>{let r=sessionStorage.getItem("sessionId");if(console.log("Session ID load: ",r),r){var l=new Dt("ModelDatabase");l.version(1).stores({cache:"sessionId, model, data"});const d=await l.cache.get(r);d.model&&(console.log("Model loaded from cache"),vt(d.model)),d.data&&(console.log("Data loaded from cache"),Shiny.setInputValue("dataUpload-fileInput",{content:btoa(d.data)}))}}),i(),[]}class Bs extends X{constructor(e){super(),Z(this,e,zs,null,K,{})}}function dn(n){let e,o,t,i,s,r,l,d,c,a,m,g,u,f,h,b,_,S,v=n[0].full&&un();o=new io({});const L=[Gs,Us],y=[];function $(C,p){return C[0].full?0:1}s=$(n),r=y[s]=L[s](n),d=new ts({props:{$$slots:{default:[js]},$$scope:{ctx:n}}});let w=n[0].full&&fn();m=new Pi({}),u=new Xi({}),h=new os({});let T=n[0].shinyapps&&mn();return{c(){v&&v.c(),e=V(),q(o.$$.fragment),t=V(),i=G("div"),r.c(),l=V(),q(d.$$.fragment),c=V(),w&&w.c(),a=V(),q(m.$$.fragment),g=V(),q(u.$$.fragment),f=V(),q(h.$$.fragment),b=V(),T&&T.c(),_=Be(),E(i,"class","svelte-15ghafl")},m(C,p){v&&v.m(C,p),I(C,e,p),j(o,C,p),I(C,t,p),I(C,i,p),y[s].m(i,null),R(i,l),j(d,i,null),R(i,c),w&&w.m(i,null),I(C,a,p),j(m,C,p),I(C,g,p),j(u,C,p),I(C,f,p),j(h,C,p),I(C,b,p),T&&T.m(C,p),I(C,_,p),S=!0},p(C,p){C[0].full?v?p&1&&M(v,1):(v=un(),v.c(),M(v,1),v.m(e.parentNode,e)):v&&(ye(),O(v,1,1,()=>{v=null}),$e());let x=s;s=$(C),s!==x&&(ye(),O(y[x],1,1,()=>{y[x]=null}),$e(),r=y[s],r||(r=y[s]=L[s](C),r.c()),M(r,1),r.m(i,l));const A={};p&3&&(A.$$scope={dirty:p,ctx:C}),d.$set(A),C[0].full?w?p&1&&M(w,1):(w=fn(),w.c(),M(w,1),w.m(i,null)):w&&(ye(),O(w,1,1,()=>{w=null}),$e()),C[0].shinyapps?T?p&1&&M(T,1):(T=mn(),T.c(),M(T,1),T.m(_.parentNode,_)):T&&(ye(),O(T,1,1,()=>{T=null}),$e())},i(C){S||(M(v),M(o.$$.fragment,C),M(r),M(d.$$.fragment,C),M(w),M(m.$$.fragment,C),M(u.$$.fragment,C),M(h.$$.fragment,C),M(T),S=!0)},o(C){O(v),O(o.$$.fragment,C),O(r),O(d.$$.fragment,C),O(w),O(m.$$.fragment,C),O(u.$$.fragment,C),O(h.$$.fragment,C),O(T),S=!1},d(C){v&&v.d(C),C&&N(e),H(o,C),C&&N(t),C&&N(i),y[s].d(),H(d),w&&w.d(),C&&N(a),H(m,C),C&&N(g),H(u,C),C&&N(f),H(h,C),C&&N(b),T&&T.d(C),C&&N(_)}}}function un(n){let e,o;return e=new ls({}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){O(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}function Us(n){let e,o;return e=new Cs({props:{$$slots:{default:[qs]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){O(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}function Gs(n){let e,o;return e=new Ii({}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){O(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}function qs(n){let e,o,t,i,s,r,l,d;return e=new Cn({props:{full:!1}}),t=new Ln({props:{minimal:!0}}),s=new An({props:{minimal:!0}}),l=new Fn({props:{minimal:!0}}),{c(){q(e.$$.fragment),o=V(),q(t.$$.fragment),i=V(),q(s.$$.fragment),r=V(),q(l.$$.fragment)},m(c,a){j(e,c,a),I(c,o,a),j(t,c,a),I(c,i,a),j(s,c,a),I(c,r,a),j(l,c,a),d=!0},p:ce,i(c){d||(M(e.$$.fragment,c),M(t.$$.fragment,c),M(s.$$.fragment,c),M(l.$$.fragment,c),d=!0)},o(c){O(e.$$.fragment,c),O(t.$$.fragment,c),O(s.$$.fragment,c),O(l.$$.fragment,c),d=!1},d(c){H(e,c),c&&N(o),H(t,c),c&&N(i),H(s,c),c&&N(r),H(l,c)}}}function cn(n){let e,o;return e=new Ti({}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){O(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}function js(n){let e,o,t,i,s,r,l,d,c,a,m,g,u,f,h,b,_,S,v,L,y,$,w,T;e=new $o({}),t=new gs({}),s=new Ps({}),l=new Xn({}),c=new Is({}),m=new Ts({}),u=new Ki({}),h=new Bi({}),_=new Eo({}),v=new _s({}),y=new Rs({});let C=n[0].full&&cn();return{c(){q(e.$$.fragment),o=V(),q(t.$$.fragment),i=V(),q(s.$$.fragment),r=V(),q(l.$$.fragment),d=V(),q(c.$$.fragment),a=V(),q(m.$$.fragment),g=V(),q(u.$$.fragment),f=V(),q(h.$$.fragment),b=V(),q(_.$$.fragment),S=V(),q(v.$$.fragment),L=V(),q(y.$$.fragment),$=V(),C&&C.c(),w=Be()},m(p,x){j(e,p,x),I(p,o,x),j(t,p,x),I(p,i,x),j(s,p,x),I(p,r,x),j(l,p,x),I(p,d,x),j(c,p,x),I(p,a,x),j(m,p,x),I(p,g,x),j(u,p,x),I(p,f,x),j(h,p,x),I(p,b,x),j(_,p,x),I(p,S,x),j(v,p,x),I(p,L,x),j(y,p,x),I(p,$,x),C&&C.m(p,x),I(p,w,x),T=!0},p(p,x){p[0].full?C?x&1&&M(C,1):(C=cn(),C.c(),M(C,1),C.m(w.parentNode,w)):C&&(ye(),O(C,1,1,()=>{C=null}),$e())},i(p){T||(M(e.$$.fragment,p),M(t.$$.fragment,p),M(s.$$.fragment,p),M(l.$$.fragment,p),M(c.$$.fragment,p),M(m.$$.fragment,p),M(u.$$.fragment,p),M(h.$$.fragment,p),M(_.$$.fragment,p),M(v.$$.fragment,p),M(y.$$.fragment,p),M(C),T=!0)},o(p){O(e.$$.fragment,p),O(t.$$.fragment,p),O(s.$$.fragment,p),O(l.$$.fragment,p),O(c.$$.fragment,p),O(m.$$.fragment,p),O(u.$$.fragment,p),O(h.$$.fragment,p),O(_.$$.fragment,p),O(v.$$.fragment,p),O(y.$$.fragment,p),O(C),T=!1},d(p){H(e,p),p&&N(o),H(t,p),p&&N(i),H(s,p),p&&N(r),H(l,p),p&&N(d),H(c,p),p&&N(a),H(m,p),p&&N(g),H(u,p),p&&N(f),H(h,p),p&&N(b),H(_,p),p&&N(S),H(v,p),p&&N(L),H(y,p),p&&N($),C&&C.d(p),p&&N(w)}}}function fn(n){let e,o,t,i,s,r;return e=new us({}),t=new ji({}),s=new Fs({}),{c(){q(e.$$.fragment),o=V(),q(t.$$.fragment),i=V(),q(s.$$.fragment)},m(l,d){j(e,l,d),I(l,o,d),j(t,l,d),I(l,i,d),j(s,l,d),r=!0},i(l){r||(M(e.$$.fragment,l),M(t.$$.fragment,l),M(s.$$.fragment,l),r=!0)},o(l){O(e.$$.fragment,l),O(t.$$.fragment,l),O(s.$$.fragment,l),r=!1},d(l){H(e,l),l&&N(o),H(t,l),l&&N(i),H(s,l)}}}function mn(n){let e,o;return e=new Bs({}),{c(){q(e.$$.fragment)},m(t,i){j(e,t,i),o=!0},i(t){o||(M(e.$$.fragment,t),o=!0)},o(t){O(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}function Hs(n){let e,o,t,i,s;e=new hs({});let r=n[0].ready&&dn(n);return i=new Ds({}),{c(){q(e.$$.fragment),o=V(),r&&r.c(),t=V(),q(i.$$.fragment)},m(l,d){j(e,l,d),I(l,o,d),r&&r.m(l,d),I(l,t,d),j(i,l,d),s=!0},p(l,[d]){l[0].ready?r?(r.p(l,d),d&1&&M(r,1)):(r=dn(l),r.c(),M(r,1),r.m(t.parentNode,t)):r&&(ye(),O(r,1,1,()=>{r=null}),$e())},i(l){s||(M(e.$$.fragment,l),M(r),M(i.$$.fragment,l),s=!0)},o(l){O(e.$$.fragment,l),O(r),O(i.$$.fragment,l),s=!1},d(l){H(e,l),l&&N(o),r&&r.d(l),l&&N(t),H(i,l)}}}function Ws(n,e,o){let t;return te(n,U,i=>o(0,t=i)),[t]}class Ys extends X{constructor(e){super(),Z(this,e,Ws,Hs,K,{})}}new Ys({target:document.getElementById("app")});
