import{d as _n,w as Te,S as J,i as X,s as Z,c as K,g as Y,o as we,e as z,a as k,b as $e,f as O,l as ie,n as re,h as F,r as Xe,j as R,k as le,m as x,t as Pe,p as P,q as Fe,u as _e,v as Re,x as Ze,y as G,z as U,A as Ke,B as Qe,C as et,D as C,E as D,F as q,G as Ge,H as Ve,I as $n,J as ot,K as lt,L as ce,M as ve,N as ye,O as fe}from"./svelte-fdfc2579.js";import{c as H}from"./cytoscape-86e840ae.js";import{g as vn}from"./cytoscape-grid-guide-eb2f2e88.js";import{e as yn}from"./cytoscape-edgehandles-455db19b.js";import{v as on}from"./uuid-a960c1f4.js";import{J as wt}from"./jszip-133f2485.js";import{s as wn}from"./cytoscape-svg-5a8e6db6.js";import{F as dt}from"./file-saver-05fab67f.js";import{E as kn}from"./jspdf-a7c15206.js";import{U as En}from"./svg2pdf.js-d0866cf6.js";import{d as Cn}from"./cytoscape-dagre-a4f19369.js";import{f as Sn}from"./cytoscape-fcose-2999cda1.js";import{c as Ln}from"./cytoscape-cola-af60e250.js";import{c as Mn}from"./cytoscape-context-menus-cfc05c35.js";import{i as Dn}from"./@jaames-324f80d4.js";import{p as An}from"./cytoscape-panzoom-81d89c13.js";import{u as On}from"./cytoscape-undo-redo-eac3a982.js";import{a as Fn}from"./cytoscape-automove-085c6bfa.js";import{K as sn}from"./konva-bc9c0e16.js";import{n as Nn}from"./cytoscape-node-editing-170df28d.js";import{e as In}from"./cytoscape-edge-editing-b8b574b0.js";import"./core-js-bbf708ea.js";import"./lodash-6eb5ace2.js";import"./heap-8ffeb77a.js";import"./functional-red-black-tree-9a31655a.js";import"./lodash.memoize-ae7939c9.js";import"./lodash.throttle-e32db46a.js";import"./dagre-9b2543cb.js";import"./graphlib-a6487d85.js";import"./@babel-75df473a.js";import"./fflate-8981c52c.js";import"./cssesc-5de85916.js";import"./font-family-papandreou-066b018a.js";import"./svgpath-76644159.js";import"./specificity-c7128631.js";import"./cose-base-3e61f9ec.js";import"./layout-base-45dab9bc.js";import"./webcola-fe958753.js";import"./jquery-793df3aa.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function o(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(i){if(i.ep)return;i.ep=!0;const s=o(i);fetch(i.href,s)}})();const Q=Te(null),pt=Te(null),Le=Te(null);let ne=Te({meanStruc:"default",intOvFree:!0,intLvFree:!1,estimator:"default",se:"default",missing:"listwise",n_boot:1e3,fix_first:!0,fix_single:!0,auto_var:!0,auto_cov_lv_x:!0,auto_cov_y:!0,fixed_x:!0,mode:"user model"}),de=Te({gridShow:!1,gridSpace:26,gridColor:"#dedede",gridWidth:1,gridMovePan:!1,gridSnap:!1,gridAlign:!0,gridResize:!1,showLav:!0,showVar:!0,showMean:!0,std:!1,view:"est",ci:.95,number_digits:2}),Oe=Te({lastFitModel:null,lastFitLavFit:null,lastFitData:null}),B=Te({fitting:!1,loadingMode:!1,runCounter:0,modelEmpty:!0,dataAvail:!1,columnNames:null,loadedFileName:null,ids:null,dragged:null,draggedName:null,full:!0,ready:!1,parsedModel:!1,meansModelled:null,buttonDown:!1,showServerErrors:!0,everEdge:!1,drawing:"none",undoEmpty:!0,redoEmpty:!0}),mt=Te(0);_n(B,n=>n.columnNames);const rn=Te({type:"info",message:"",key:0});function be(n,e){rn.update(o=>({type:n,message:e,key:o.key+1}))}be("info","Greetings");function Tn(n,e,o){let t;K(n,de,l=>o(1,t=l));let i=!1;vn(H);let s=Y(Q);var r={snapToGridOnRelease:!1,drawGrid:!1,snapToAlignmentLocationDuringDrag:!1,distributionGuidelines:!0,geometricGuideline:!0,initPosAlignment:!1,centerToEdgeAlignment:!1,resize:!1,parentPadding:!1,guidelinesStackOrder:4,guidelinesTolerance:2,guidelinesStyle:{strokeStyle:"#8b7d6b",geometricGuidelineRange:2e3,range:100,minDistRange:10,distGuidelineOffset:10,horizontalDistColor:"#ff0000",verticalDistColor:"#00ff00",initPosAlignmentColor:"#0000ff",lineDash:[0,0],horizontalDistLine:[0,0],verticalDistLine:[0,0],initPosAlignmentLine:[0,0]},parentSpacing:-1};return we(()=>{s.gridGuide(r),o(0,i=!0)}),n.$$.update=()=>{n.$$.dirty&3&&i&&t.gridShow!==void 0&&Y(Q).gridGuide({drawGrid:t.gridShow}),n.$$.dirty&3&&i&&t.gridSpace!==void 0&&Y(Q).gridGuide({gridSpacing:t.gridSpace}),n.$$.dirty&3&&i&&t.gridWidth!==void 0&&Y(Q).gridGuide({lineWidth:t.gridWidth}),n.$$.dirty&3&&i&&t.gridMovePan!==void 0&&Y(Q).gridGuide({panGrid:t.gridMovePan}),n.$$.dirty&3&&i&&t.gridSnap!==void 0&&Y(Q).gridGuide({snapToGridDuringDrag:t.gridSnap}),n.$$.dirty&3&&i&&t.gridAlign!==void 0&&Y(Q).gridGuide({snapToAlignmentLocationOnRelease:t.gridAlign}),n.$$.dirty&3&&i&&t.gridResize!==void 0&&Y(Q).gridGuide({resize:t.gridResize})},[i,t]}class xn extends J{constructor(e){super(),X(this,e,Tn,null,Z,{})}}const ue="observed-variable",me="latent-variable",Se="constant",ke="free",We="nolabel",ge="fromUser",ze="label",xe="byLav",Ee="fixed",De="forcefree",Ne="directed",Ie="undirected",st="loop",Be="linked",Ae="fromLav",kt="hasEst",ut="validated",Je="continous",Ye="ordered",Pn="hasEstFixed",He=80,Vn=80,Rn=[{selector:"element",style:{"font-size":function(n){return n.data("font-size")||14}}},{selector:"node",style:{width:He.toString(),height:"80","background-color":function(n){return n.data("background-color")||"white"},"border-color":function(n){return n.data("border-color")||"grey"},"border-width":function(n){return n.data("border-width")||"2px"},label:"data(label)","text-valign":"center","text-halign":"center"}},{selector:`node.${ue}`,style:{shape:"rectangle"}},{selector:`node.${ue}.${Ye}`,style:{"border-style":"double","border-width":5}},{selector:`node.${me}`,style:{shape:"ellipse","border-color":"black"}},{selector:`node.${Se}`,style:{shape:"triangle",label:"1","text-valign":"center","text-margin-y":"10px","border-color":"black"}},{selector:`node.${Be}`,style:{"border-color":"black"}},{selector:"edge",style:{width:function(n){return n.data("width")||3},"line-color":function(n){return n.data("line-color")||"#000"},"target-arrow-color":function(n){return n.data("target-arrow-color")||"#000"},"source-arrow-color":function(n){return n.data("source-arrow-color")||"#000"},"target-arrow-shape":"triangle","curve-style":"bezier","text-valign":"center","text-halign":"center","text-wrap":"wrap","text-max-width":Vn,"z-index":10,color:"#000","text-outline-color":"#fff","text-outline-width":"2px","text-background-color":"#fff","text-background-opacity":1,"text-background-padding":"4px"}},{selector:"edge.loop",style:{"curve-style":"bezier","source-arrow-shape":"triangle","loop-direction":function(n){return n.data("loop-direction")||0},"loop-sweep":.8,"control-point-step-size":n=>{const e=n.source(),o=parseInt(e.style("height")),t=parseInt(e.style("width"));let i;return n.style("loop-direction")=="0deg"||n.style("loop-direction")=="180deg"?i=o:n.style("loop-direction")=="90deg"||n.style("loop-direction")=="270deg"?i=t:i=Math.max(t,o),i/80*60}}},{selector:`edge.${Ie}`,style:{"curve-style":"unbundled-bezier","control-point-distances":[-100],"control-point-weights":[.5],"source-arrow-shape":"triangle"}},{selector:`edge.${Ie}.${Ae}`,style:{"control-point-distances":[100]}},{selector:`edge.${ze}, edge.${ze}`,style:{label:function(n){return n.data("label")}}},{selector:`edge.${Ee}.${ze}`,style:{label:function(n){return n.data("label")+"@"+n.data("value")}}},{selector:`edge.${Ee}.${We}`,style:{label:function(n){return"@"+n.data("value")}}},{selector:`edge.${De}`,style:{"line-color":"blue"}},{selector:`edge.${Ae}, edge.${xe}`,style:{"line-style":"dashed"}},{selector:"edge.hidden, node.hidden",style:{display:"none"}},{selector:"edge:selected",style:{"underlay-opacity":.5,"underlay-color":"#928ff8"}},{selector:"node:selected",style:{"underlay-color":"#928ff8","underlay-opacity":.5}}],zn={autoungrabify:!1,autolock:!1,style:Rn,minZoom:.02,maxZoom:5},Bn={preview:!1,hoverDelay:150,handleNodes:"node",snap:!0,handleColor:"#ff0000",handleSize:10,canConnect:function(n,e){return!cy.edges(function(t){if(!t.isUserAdded())return!1;const i=t.source().id()==n.id()&&t.target().id()==e.id(),s=t.source().id()==e.id()&&t.target().id()==n.id();return i||s}).length}};function Gn(n){H.use(yn);var e=H(zn);return e.boxSelectionEnabled(!0),Q.set(e),pt.set(e.edgehandles(Bn)),[]}class Un extends J{constructor(e){super(),X(this,e,Gn,null,Z,{})}}function oe(n){var e=Y(B);if(!e.full)return;let o=Y(Q);const t=o.edges();for(var i=0;i<t.length;i++)t[i].removeEstimates();if(o.getUserEdges().length==0){o.getLavaanNodes().remove(),o.getLavaanEdges().remove(),Shiny.setInputValue("show_help",Math.random());return}if(!e.dataAvail&&n=="estimate"){be("danger","Model not send to lavaan because no data available");return}let s=ln(n);Shiny.setInputValue("run-fromJavascript",JSON.stringify(s)),Shiny.setInputValue("runCounter",Math.random()),n==="user model"&&o.getLavaanModifiedEdges().forEach(r=>{r.freePara()})}function qn(n,e){for(let o=0;o<n.length;o++)if(n[o]===e)return!0;return!1}function nt(n,e){let o;n==null?o="1":o=n.getLabel();let t=!1,i;if(e.isFixed()&&!e.isModifiedLavaan()?(i=e.getValue()+"*"+o,t=!0):e.isForceFree()&&(i="NA*"+o,t=!0),e.hasLabel()){const s=e.getLabel();t?i+=" + "+s+"*"+o:(t=!0,i=s+"*"+o)}else t||(i=o);return i}class jn{constructor(e,o,t=null,i=null,s=null,r=null){this.mode=e,Object.assign(this,{model:{options:t,syntax:i,R_script:o,ordered_labels:r},forceUpdate:Math.random(),cache:s})}}function Et(n,e="target"){let o="";const t=Math.max(...n.map(l=>l[e]().position().x))-Math.min(...n.map(l=>l[e]().position().x)),i=Math.max(...n.map(l=>l[e]().position().y))-Math.min(...n.map(l=>l[e]().position().y)),s=t>=i?"x":"y",r=n.map((l,a)=>({index:a,value:l.source().position()[s]})).sort((l,a)=>l.value-a.value).map(l=>l.index);for(let l=0;l<n.length;l++){const a=n[r[l]][e]();l>0&&(o+=" + "),o+=nt(a,n[r[l]])}return o}function ln(n){let e=Y(Q),o=Y(B),t="",i="";i+=`library(lavaan)
`,o.dataAvail?i+=`data <- read.csv("${o.loadedFileName}")
`:i+=`#make sure your data is loaded into the 'data' variable
`;let s=e.getLatentNodes();s=s.nodes(function(h){const g=h.connectedEdges(function(v){return v.isDirected()&&v.source().id()==h.id()});return g.length>0&&g.every(v=>v.target().isLatent())});let r=e.getLatentNodes();r=r.nodes(function(h){const g=h.connectedEdges(function(I){return I.isDirected()&&I.target().id()==h.id()}),v=h.connectedEdges(function(I){return I.isDirected()});return v.length>0&&g.length==v.length});let l=e.getLatentNodes(),a=!1;for(let h=0;h<l.length;h++){const g=l[h],v=g.connectedEdges(function(I){return I.isDirected()&&I.source().id()==g.id()&&(I.target().isObserved()||s.some(j=>j.id()===g.id()))});v.length>0&&(a||(t+=`# measurement model
`,a=!0),t+=" "+g.getLabel()+" =~ "+Et(v,"target")+`
`)}function u(h){return h.isDirected()&&!h.source().isConstant()&&!(h.source().isLatent()&&h.target().isObserved())&&!(h.source().isLatent()&&s.some(v=>v.id()===h.source().id())&&h.target().isLatent())&&(h.isUserAdded()||h.isModifiedLavaan())&&!r.some(v=>v.id()===h.target().id())}let d=e.edges(u),f=[];for(let h=0;h<d.length;h++)qn(f,d[h].target())||f.push(d[h].target());if(f.length>0){t+=`
# regressions`;for(let h=0;h<f.length;h++){const g=f[h],v=g.connectedEdges(I=>u(I)&&I.target().same(g));if(v.length>0){let I="";for(var p=0;p<v.length;p++){var c=v[p].source();p>0&&(I+=" + "),I+=nt(c,v[p])}t+=`
 `+g.getLabel()+" ~ "+I}}}let b=e.edges(function(h){return(h.isUndirected()||h.myIsLoop())&&(h.isUserAdded()||h.isModifiedLavaan())});if(b.length>0){t+=`

# (residual) (co)variances`;for(let h=0;h<b.length;h++){let g=b[h].source().data("label");t+=`
 `+g+" ~~ "+nt(b[h].target(),b[h])}}const _=e.nodes(function(h){return h.isConstant()});for(let h=0;h<_.length;h++){const v=_[h].connectedEdges(function(I){return I.isUserAdded()});if(v.length>0){t+=`
# intercepts
`;for(var p=0;p<v.length;p++){var c=v[p].target();t+=c.getLabel()+" ~ "+nt(void 0,v[p])+`
`}}}a=!1;for(let h=0;h<r.length;h++){const g=r[h],v=g.connectedEdges(function(I){return I.isDirected()&&I.target().id()==g.id()});v.length>0&&(a||(t+=`

 #  formative factors
`,a=!0),t+=" "+g.getLabel()+" <~ "+Et(v,"source")+`
`)}t=`'
`+t+`'

`;function $(h,g=60){return h.split(`
`).map(v=>{if(v.includes("+")&&v.length>g){const I=v.split(" + ");let j=[],m=I[0];const E=v.match(/^\s*/)[0],W=m.indexOf("~")+1;for(let te=1;te<I.length;te++)m.length+I[te].length+3>g?(j.push(m+" + "),m=E+" ".repeat(W)+I[te]):m+=" + "+I[te];return j.push(m),j.join(`
`)}return v}).join(`
`)}t=$(t);const S=e.nodes(function(h){return h.isOrdered()}).map(h=>h.getLabel()),M=Hn(S);return i+="model <-"+t,i+="result <- lavaan(model, data, "+M,new jn(n,i,M,t=t,Y(Oe),S)}function Hn(n){const e=Y(ne),o=Me(e.meanStruc),t=Me(e.intOvFree),i=Me(e.intLvFree);let s=`meanstructure = ${o},
		 int.ov.free = ${t}, int.lv.free = ${i},
		 estimator = ${ct(e.estimator)}, se = ${ct(e.se)},
		 missing = ${ct(e.missing)}, auto.fix.first = ${Me(e.fix_first)},
		 auto.fix.single = ${Me(e.fix_single)}, auto.var = ${Me(e.auto_var)},
		 auto.cov.lv.x = ${Me(e.auto_cov_lv_x)}, auto.cov.y = ${Me(e.auto_cov_y)},
  		 fixed.x = ${Me(e.fixed_x)}`;if(e.se=="boot"){const r=`, bootstrap = ${e.n_boot})`;s=s+r}else s=s+")";return n.length>0&&(s=`ordered = ${'c("'+n.join('", "')+'")'}, ${s}`),s}function ct(n){return'"'+n+'"'}function Me(n){if(n==!0||n=="true")return"TRUE";if(n==!1||n=="false")return"FALSE";if(n=="default")return'"default"';throw new Error("Should not happen")}let an,dn;function un(){an=1,dn=1}un();function he(n,e,o=!0,t=null){let i=Y(Q),s=on(),r;if(t!==null){if(i.nodes().find(a=>a.data().label===t)){be("danger","Node with the same label already exists.");return}r=t}else n==ue?r="x"+an++:n==me?r="f"+dn++:r=void 0,i.nodes().find(a=>a.data().label===r)&&(r=r+".1");let l=Y(Le);return e?l.do("add",{group:"nodes",data:{id:s,label:r},classes:[n,Je],renderedPosition:e}):(e={x:Math.random()*400+50,y:Math.random()*400+50},i.add({group:"nodes",data:{id:s,label:r},classes:[n,Je],renderedPosition:e})),o&&oe(Y(ne).mode),s}function je(n,e,o=!0,t=!1,i=null,s=!0){let r=Y(Q),l=on();return r.add({group:"edges",data:{id:l,source:n,target:e,value:t?i:void 0},classes:`${o?Ne:Ie} ${s?ge:Ae} ${t?Ee:ke} ${We}`})}function pe(n){const e=Kn(n);if(e!=null){const o=Yn(n),t=Jn(o);let i=Zn(t);i=Wn(i,t),e.data("loop-direction",`${i}deg`)}}function Wn(n,e){const o=[0,180,90,270],t=35,i=o.sort((l,a)=>{const u=Math.min(Math.abs(l-n),360-Math.abs(l-n)),d=Math.min(Math.abs(a-n),360-Math.abs(a-n));return u-d}),r=[[0,180],[90,270]].flatMap(l=>i.filter(a=>l.includes(a)));for(const l of r)if(!e.some(u=>{const d=Math.abs(l-u);return Math.min(d,360-d)<=t}))return l;return n}function Yn(n){const e=cy.getElementById(n);if(e.length===0){console.error(`Node with ID ${n} does not exist.`);return}let o=[];return e.connectedEdges(t=>t.style("display")!=="none").forEach(t=>{const i=t.source(),s=t.target();let r;(i.id()!==e.id()||s.id()!==e.id())&&(i.id()===e.id()?r=Ct(t.sourceEndpoint(),e.position()):r=Ct(t.targetEndpoint(),e.position()),o.push(r))}),o}function Ct(n,e){return Object.keys(n).reduce((o,t)=>{if(e.hasOwnProperty(t))o[t]=n[t]-e[t];else throw new Error(`Key ${t} not found in second object`);return o},{})}function Jn(n){let e=[];return n.forEach(o=>{e.push(Xn(o))}),e}function Xn(n){let e=Math.atan2(n.y,n.x)*180/Math.PI;return e=(e+90)%360,e}function Zn(n){let e=-1,o=null;for(let t=0;t<=360;t++){let i=1/0;for(let s=0;s<n.length;s++){let r=Math.abs(n[s]-t);r=Math.min(r,360-r),i=Math.min(i,r)}i>e&&(e=i,o=t)}return o}function Kn(n,e){var o=cy.getElementById(n),t=null;return o.connectedEdges().forEach(function(i){var s=i.source(),r=i.target();if(s.id()===n&&r.id()===n){t=i;return}}),t!==null&&o.connectedEdges().length>1&&!t.hasClass("fixDeg")?t:null}function Qn(n){let e,o,t;return{c(){e=z("div"),k(e,"id","cy"),k(e,"class","graph svelte-11pj9ut"),$e(e,"flex-basis",n[1].full?"70%":"100%")},m(i,s){O(i,e,s),n[6](e),o||(t=[ie(e,"mouseover",n[2]),ie(e,"mouseout",n[3]),ie(e,"mousemove",n[4]),ie(e,"drop",n[5]),ie(e,"dragover",ei)],o=!0)},p(i,[s]){s&2&&$e(e,"flex-basis",i[1].full?"70%":"100%")},i:re,o:re,d(i){i&&F(e),n[6](null),o=!1,Xe(t)}}}function ei(n){n.preventDefault()}function ti(n,e){let o=Math.atan2(n,-e)*(180/Math.PI);return o<0&&(o+=360),o}function ni(n,e,o){let t,i,s;K(n,Le,g=>o(12,t=g)),K(n,B,g=>o(1,i=g)),K(n,ne,g=>o(13,s=g));let r=Y(Q),l=Y(pt),a,u={x:0,y:0};we(()=>{r.mount(a)});function d(g){if(R(B,i.buttonDown=!0,i),(g.key==="Alt"||g.key===" "||g.key.toLowerCase()==="x")&&(l.enableDrawMode(),g.key==="Alt"?R(B,i.drawing="undirected",i):R(B,i.drawing="directed",i)),g.key==="Backspace"){let v=r.$(":selected");v.length>0&&(t.do("remove",v),oe(s.mode)),R(B,i.buttonDown=!1,i)}if(["l","o","c"].includes(g.key.toLowerCase())){let v;switch(g.key.toLowerCase()){case"l":v=me;break;case"o":v=ue;break;case"c":v=Se;break}he(v,{...u}),R(B,i.buttonDown=!1,i)}R(B,i.buttonDown=!1,i)}function f(){r.autoungrabify(!1),r.nodes().grabify()}function p(g){(g.key==="Alt"||g.key===" "||g.key.toLowerCase()==="x")&&(l.disableDrawMode(),R(B,i.drawing="none",i),f())}function c(){document.addEventListener("keydown",d),document.addEventListener("keyup",p)}function b(){document.removeEventListener("keydown",d,!1),document.removeEventListener("keyup",p,!1)}function _(g){u.x=g.offsetX,u.y=g.offsetY}r.on("ehcomplete",(g,v,I,j)=>{const m=j,E=v.id(),W=I.id();m.remove(),m.init(),E!==W?(i.drawing==="undirected"?m.setUndirected():m.setDirected(),pe(E),pe(W)):(m.makeLoop(),pe(W)),!((m.isUndirected()||m.myIsLoop())&&(v.isConstant()||I.isConstant()))&&(m.isDirected()&&I.isConstant()||m.isDirected()&&v.isConstant()&&I.connectedEdges(L=>L.isUserAdded()&&L.source().isConstant()).length>1||(m.isDirected()&&v.isConstant()?m.makeMeanEdge():m.makeOtherEdge(),t.do("add",m),oe(s.mode)))});function $(g){let v=0;const I=100,j=I*2;g.preventDefault();let m={x:g.offsetX,y:g.offsetY};function E(L,w){let N;if(i.dataAvail){const se=r.getObservedNodes().map(T=>T.data().label);N=i.columnNames.filter(T=>!se.includes(T)).map(T=>({text:T,value:T}))}else N=Array.from({length:100},(se,ee)=>`var${ee+1}`);const V={title:L,inputType:"select",multiple:!0,value:"",inputOptions:N,callback:w};bootbox.prompt(V)}function W(){be("danger","Either no variable selected or at least one selected variable already is in the model.")}function te(L){return L&&!r.nodes().some(w=>w.data().label===L)}if(i.dragged=="observed-with-name")he(ue,m,!0,i.draggedName);else if(i.dragged=="multiple")E("Select Variables",function(L){if(te(L)){const w=r.zoom();L.forEach(N=>{he(ue,{x:m.x+v*w,y:m.y},!0,N),v+=I})}else W()});else if(i.dragged=="factor")E("Select Variables",function(L){if(te(L)){const w=r.zoom(),N=he(me,{x:m.x+I*w*L.length/2-He/2*w,y:m.y});L.forEach(V=>{const se=he(ue,{x:m.x+v*w,y:m.y+w*j},!0,V);v+=I,je(N,se)}),R(ne,s.fix_first=!0,s),R(ne,s.fix_single=!0,s),R(ne,s.auto_var=!0,s),R(ne,s.intOvFree=!0,s),R(ne,s.intLvFree=!1,s)}else W()});else if(i.dragged=="growth"){let L=0;E("Select Time Points",function(w){if(te(w)){const N=r.zoom(),V=he(Se,{x:m.x+I*N*w.length/2-He/2*N,y:m.y},!0),se=he(me,{x:m.x+He/2*N,y:m.y+1*j*N},!0,"Intercept"),ee=he(me,{x:m.x+I*N*(w.length-1)-He/2*N,y:m.y+1*j*N},!0,"Slope");je(V,se,!0,!1),je(V,ee,!0,!1);let T=1;w.forEach(ae=>{const qe=he(ue,{x:m.x+L*N,y:m.y+2*j*N},!0,ae);L+=I,je(se,qe,!0,!0,1),T!=1&&je(ee,qe,!0,!0,T-1),T+=1}),R(ne,s.auto_var=!0,s),R(ne,s.intOvFree=!1,s),R(ne,s.intLvFree=!0,s)}})}else he(i.dragged,m);(i.dragged=="multiple"||i.dragged=="factor"||i.dragged=="growth")&&oe(s.mode),R(B,i.dragged=null,i)}let y=!1,S=null,M;r.on("mousedown","edge.loop",function(g){y=!0,S=g.target,S.unpanify(),M=S.style("loop-direction")});let A;r.on("mousemove",function(g){if(!y||!S)return;let I=S.source().renderedPosition();A=ti(u.x-I.x,u.y-I.y);const j=5,m=[0,90,180,270];for(let E=0;E<m.length;E++)if(Math.abs(A-m[E])<=j){A=m[E];break}S.data("loop-direction",`${A}deg`)}),window.addEventListener("mouseup",function(){if(y){if(y=!1,A===void 0||M===`${A}deg`)return;S.data("loop-direction",M),S.addClass("fixDeg"),t.do("style",{eles:S,style:{"loop-direction":`${A}deg`}}),S=null}});function h(g){le[g?"unshift":"push"](()=>{a=g,o(0,a)})}return[a,i,c,b,_,$,h]}class ii extends J{constructor(e){super(),X(this,e,ni,Qn,Z,{})}}function oi(n,e,o){let t,i;K(n,B,a=>o(2,t=a)),K(n,ne,a=>o(3,i=a));let s=Y(Q);s.on("add","node",function(a){const u=a.target;if(u.isObserved()){let d=t.columnNames;d&&d.includes(u.getLabel())&&(u.link(),be("success",`Variable ${u.getLabel()} linked to data`))}t.modelEmpty&&s.edges().length>0&&R(B,t.modelEmpty=!1,t)}),s.on("remove","node",function(a){s.getUserEdges().length==0&&(R(B,t.modelEmpty=!0,t),Shiny.setInputValue("show_help",Math.random())),t.loadingMode||oe(i.mode)}),s.on("remove","edge",function(a){pe(a.target.source().id()),pe(a.target.target().id())}),s.on("add","edge",function(a){R(B,t.everEdge=!0,t),t.modelEmpty&&s.edges().length>0&&R(B,t.modelEmpty=!1,t),pe(a.target.source().id()),pe(a.target.target().id())}),s.on("position","node",function(a){a.target.neighborhood().nodes().forEach(f=>{const p=f.id();pe(p)})});let r=null,l=!1;return s.on("mousedown",function(a){const u=b=>parseFloat(b.replace("px","")),d=a.position;let f=null,p=1/0;const c=30;s.edges().forEach(function(b){if(b.isDirected()){const _=u(b.style("text-margin-x")),$=u(b.style("text-margin-y")),y=b.midpoint(),S={x:y.x+_,y:y.y+$},M=Math.abs(d.x-S.x),A=d.y-S.y,h=Math.sqrt(M*M+A*A);h<p&&h<c&&(f=b,p=h)}}),f!==null&&(r=f,l=!0,a.preventDefault(),f.unpanify())}),s.on("mousemove",function(a){if(l&&r){const u=a.position,d=r.midpoint(),f=r.source().position(),p=r.target().position(),c={x:p.x-f.x,y:p.y-f.y},b=Math.sqrt(c.x**2+c.y**2),_={x:c.x/b,y:c.y/b},$={x:u.x-d.x,y:u.y-d.y};let y=$.x*_.x+$.y*_.y;const S=(p.y-d.y)/_.y-70,M=(f.y-d.y)/_.y+70;let A=Math.min(S,y);A=Math.max(M,A);const h=A*_.x,g=A*_.y;r.style({"text-margin-x":h,"text-margin-y":g})}}),s.on("mouseup",function(a){l=!1,r=null}),[]}class si extends J{constructor(e){super(),X(this,e,oi,null,Z,{})}}function St(n,e,o){const t=n.slice();return t[21]=e[o],t}function Lt(n){let e,o,t,i,s,r,l,a,u,d,f,p,c,b,_=n[1],$=[];for(let y=0;y<_.length;y+=1)$[y]=Mt(St(n,_,y));return{c(){e=z("div"),o=x(),t=z("div"),i=z("button"),i.textContent="Multiple Variables",s=x(),r=z("button"),r.textContent="Factor",l=x(),a=z("button"),a.textContent="Growth",u=x(),d=z("div"),f=x(),p=z("ul");for(let y=0;y<$.length;y+=1)$[y].c();k(e,"class","vertical-bar svelte-r00s5r"),k(i,"class","draggable-item svelte-r00s5r"),k(i,"draggable","true"),k(r,"class","draggable-item svelte-r00s5r"),k(r,"draggable","true"),k(a,"class","draggable-item svelte-r00s5r"),k(a,"draggable","true"),k(t,"id","model-buttons"),k(t,"class","svelte-r00s5r"),k(d,"class","vertical-bar svelte-r00s5r"),k(p,"class","draggable-list svelte-r00s5r")},m(y,S){O(y,e,S),O(y,o,S),O(y,t,S),P(t,i),P(t,s),P(t,r),P(t,l),P(t,a),O(y,u,S),O(y,d,S),O(y,f,S),O(y,p,S);for(let M=0;M<$.length;M+=1)$[M]&&$[M].m(p,null);c||(b=[ie(i,"dragstart",n[14]),ie(r,"dragstart",n[15]),ie(a,"dragstart",n[16])],c=!0)},p(y,S){if(S&10){_=y[1];let M;for(M=0;M<_.length;M+=1){const A=St(y,_,M);$[M]?$[M].p(A,S):($[M]=Mt(A),$[M].c(),$[M].m(p,null))}for(;M<$.length;M+=1)$[M].d(1);$.length=_.length}},d(y){y&&F(e),y&&F(o),y&&F(t),y&&F(u),y&&F(d),y&&F(f),y&&F(p),Fe($,y),c=!1,Xe(b)}}}function Mt(n){let e,o=n[21]+"",t,i,s,r;function l(...a){return n[17](n[21],...a)}return{c(){e=z("li"),t=_e(o),i=x(),k(e,"draggable","true"),k(e,"class","draggable-item svelte-r00s5r")},m(a,u){O(a,e,u),P(e,t),P(e,i),s||(r=ie(e,"dragstart",l),s=!0)},p(a,u){n=a,u&2&&o!==(o=n[21]+"")&&Re(t,o)},d(a){a&&F(e),s=!1,r()}}}function ri(n){let e,o,t,i,s,r,l,a,u,d,f,p,c,b,_,$=n[0].dataAvail&&Lt(n);return{c(){e=z("div"),o=z("div"),t=z("div"),i=z("button"),s=x(),r=z("button"),l=x(),a=z("div"),u=x(),d=z("div"),f=x(),p=z("div"),c=x(),$&&$.c(),k(i,"class","arrow-btn direct-arrow svelte-r00s5r"),k(i,"title","Draw Directed Arrows"),Pe(i,"active",n[0].drawing==="directed"),k(r,"class","arrow-btn undirected-arrow svelte-r00s5r"),k(r,"title","Draw Undirected Arrows"),Pe(r,"active",n[0].drawing==="undirected"),k(a,"role","button"),k(a,"id","add-manifest-variable"),k(a,"title","Create Observed Variable"),k(a,"draggable","true"),k(a,"class","variable-button svelte-r00s5r"),k(a,"data-button-type",ue),k(a,"tabindex","0"),k(d,"role","button"),k(d,"tabindex","0"),k(d,"id","add-latent-variable"),k(d,"title","Create Latent Variable"),k(d,"draggable","true"),k(d,"class","variable-button svelte-r00s5r"),k(d,"data-button-type",me),k(p,"role","button"),k(p,"tabindex","0"),k(p,"id","add-constant-variable"),k(p,"class","variable-button svelte-r00s5r"),k(p,"title","Create Constant Variable"),k(p,"data-button-type","const"),k(p,"draggable","true"),k(t,"id","buttons"),k(t,"class","svelte-r00s5r"),k(o,"id","buttonCont"),k(o,"class","svelte-r00s5r"),k(e,"class","toolbox svelte-r00s5r")},m(y,S){O(y,e,S),P(e,o),P(o,t),P(t,i),P(t,s),P(t,r),P(t,l),P(t,a),P(t,u),P(t,d),P(t,f),P(t,p),P(e,c),$&&$.m(e,null),b||(_=[ie(i,"click",n[9]),ie(r,"click",n[10]),ie(a,"dragstart",n[11]),ie(d,"dragstart",n[12]),ie(p,"dragstart",n[13])],b=!0)},p(y,[S]){S&1&&Pe(i,"active",y[0].drawing==="directed"),S&1&&Pe(r,"active",y[0].drawing==="undirected"),y[0].dataAvail?$?$.p(y,S):($=Lt(y),$.c(),$.m(e,null)):$&&($.d(1),$=null)},i:re,o:re,d(y){y&&F(e),$&&$.d(),b=!1,Xe(_)}}}function li(n,e,o){let t,i;K(n,B,g=>o(0,t=g)),K(n,Q,g=>o(8,i=g)),B.subscribe(g=>{});function s(g){R(B,t.dragged=g,t)}function r(g,v){R(B,t.dragged="observed-with-name",t),R(B,t.draggedName=v,t)}function l(g){R(B,t.dragged="multiple",t)}function a(g){R(B,t.dragged="factor",t)}function u(g){R(B,t.dragged="growth",t)}let d,f=Y(pt);function p(g){t.drawing===g?(f.disableDrawMode(),R(B,t.drawing="none",t)):(f.enableDrawMode(),R(B,t.drawing=g,t))}const c=()=>{p("directed")},b=()=>{p("undirected")},_=()=>{event.dataTransfer.setData("text/plain","node"),s(ue)},$=()=>{s(me)},y=()=>{s(Se)},S=g=>l(),M=g=>a(),A=g=>u(),h=(g,v)=>r(v,g);return n.$$.update=()=>{if(n.$$.dirty&257&&typeof i.getObservedNodes=="function"&&t.columnNames!==null){const g=i.getObservedNodes().map(v=>v.data("label"));o(1,d=t.columnNames.filter(v=>!g.includes(v)))}},[t,d,s,r,l,a,u,p,i,c,b,_,$,y,S,M,A,h]}class ai extends J{constructor(e){super(),X(this,e,li,ri,Z,{})}}function di(n){let e,o,t,i,s;const r=n[1].default,l=Ze(r,n,n[0],null);return i=new ai({}),{c(){e=z("nav"),o=z("ul"),l&&l.c(),t=x(),G(i.$$.fragment),k(o,"class","nav navbar-nav navbar-left"),k(e,"class","navbar navbar-default navbar-static-top navbar-left svelte-12n5yi9")},m(a,u){O(a,e,u),P(e,o),l&&l.m(o,null),P(e,t),U(i,e,null),s=!0},p(a,[u]){l&&l.p&&(!s||u&1)&&Ke(l,r,a,a[0],s?et(r,a[0],u,null):Qe(a[0]),null)},i(a){s||(C(l,a),C(i.$$.fragment,a),s=!0)},o(a){D(l,a),D(i.$$.fragment,a),s=!1},d(a){a&&F(e),l&&l.d(a),q(i)}}}function ui(n,e,o){let{$$slots:t={},$$scope:i}=e;return n.$$set=s=>{"$$scope"in s&&o(0,i=s.$$scope)},[i,t]}class ci extends J{constructor(e){super(),X(this,e,ui,di,Z,{})}}function gt(n,e){if(n==null)throw new Error("Columnnames may not be null.");const t=Y(Q).nodes(function(s){return s.isObserved()});if(t.length>0)for(var i=0;i<t.length;i++){const s=t[i],r=s.getLabel();n.includes(r)&&!s.isLinked()?s.link():!n.includes(r)&&s.isLinked()&&s.unlink()}}function fi(n){let e,o,t,i,s,r,l;const a=n[3].default,u=Ze(a,n,n[2],null);return{c(){e=z("li"),o=z("a"),t=_e(n[0]),i=z("span"),s=x(),r=z("ul"),u&&u.c(),k(i,"class","caret"),k(o,"href","#"),k(o,"class","dropdown-toggle svelte-1oq006n"),k(o,"data-toggle","dropdown"),k(o,"role","button"),k(o,"aria-haspopup","true"),k(o,"aria-expanded","false"),k(o,"draggable","false"),Pe(o,"minimal",n[1]),k(r,"class","dropdown-menu"),k(e,"class","dropdown")},m(d,f){O(d,e,f),P(e,o),P(o,t),P(o,i),P(e,s),P(e,r),u&&u.m(r,null),l=!0},p(d,[f]){(!l||f&1)&&Re(t,d[0]),(!l||f&2)&&Pe(o,"minimal",d[1]),u&&u.p&&(!l||f&4)&&Ke(u,a,d,d[2],l?et(a,d[2],f,null):Qe(d[2]),null)},i(d){l||(C(u,d),l=!0)},o(d){D(u,d),l=!1},d(d){d&&F(e),u&&u.d(d)}}}function mi(n,e,o){let{$$slots:t={},$$scope:i}=e,{name:s}=e,{minimal:r=!1}=e;return n.$$set=l=>{"name"in l&&o(0,s=l.name),"minimal"in l&&o(1,r=l.minimal),"$$scope"in l&&o(2,i=l.$$scope)},[s,r,i,t]}class Ue extends J{constructor(e){super(),X(this,e,mi,fi,Z,{name:0,minimal:1})}}function Dt(n,e,o){const t=n.slice();return t[4]=e[o],t}function At(n){let e;return{c(){e=z("li"),k(e,"class","divider")},m(o,t){O(o,e,t)},d(o){o&&F(e)}}}function Ot(n){let e,o,t=n[4].name+"",i,s,r,l,a;function u(...f){return n[3](n[4],...f)}let d=n[4].divider&&At();return{c(){e=z("li"),o=z("a"),i=_e(t),s=x(),d&&d.c(),r=Ge(),k(o,"href","#"),Pe(e,"disabled",n[4].disable)},m(f,p){O(f,e,p),P(e,o),P(o,i),O(f,s,p),d&&d.m(f,p),O(f,r,p),l||(a=ie(o,"click",u),l=!0)},p(f,p){n=f,p&1&&t!==(t=n[4].name+"")&&Re(i,t),p&1&&Pe(e,"disabled",n[4].disable),n[4].divider?d||(d=At(),d.c(),d.m(r.parentNode,r)):d&&(d.d(1),d=null)},d(f){f&&F(e),f&&F(s),d&&d.d(f),f&&F(r),l=!1,a()}}}function gi(n){let e,o=n[0],t=[];for(let i=0;i<o.length;i+=1)t[i]=Ot(Dt(n,o,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=Ge()},m(i,s){for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(i,s);O(i,e,s)},p(i,s){if(s&1){o=i[0];let r;for(r=0;r<o.length;r+=1){const l=Dt(i,o,r);t[r]?t[r].p(l,s):(t[r]=Ot(l),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=o.length}},d(i){Fe(t,i),i&&F(e)}}}function pi(n){let e,o;return e=new Ue({props:{minimal:n[2],name:n[1],$$slots:{default:[gi]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},p(t,[i]){const s={};i&4&&(s.minimal=t[2]),i&2&&(s.name=t[1]),i&129&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(C(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}function hi(n,e){e.disable||e.action(n)}function bi(n,e,o){let{menuItems:t}=e,{name:i}=e,{minimal:s=!1}=e;const r=(l,a)=>hi(a,l);return n.$$set=l=>{"menuItems"in l&&o(0,t=l.menuItems),"name"in l&&o(1,i=l.name),"minimal"in l&&o(2,s=l.minimal)},[t,i,s,r]}class at extends J{constructor(e){super(),X(this,e,bi,pi,Z,{menuItems:0,name:1,minimal:2})}}function _i(n){let e,o;return e=new at({props:{name:"File",menuItems:n[1],minimal:!n[0]}}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},p(t,[i]){const s={};i&2&&(s.menuItems=t[1]),i&1&&(s.minimal=!t[0]),e.$set(s)},i(t){o||(C(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}function Ft(n,e){for(let o in e)e.hasOwnProperty(o)&&e[o]!==void 0&&(n[o]=e[o])}function $i(){document.getElementById("dataUpload-fileInput").click()}function Nt(){const n=new Date;return`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}_${String(n.getHours()).padStart(2,"0")}-${String(n.getMinutes()).padStart(2,"0")}-${String(n.getSeconds()).padStart(2,"0")}`}async function vi(){Shiny.setInputValue("down-requestData",Math.random())}function yi(n,e,o){let t,i,s,r,l;K(n,B,m=>o(2,t=m)),K(n,mt,m=>o(3,i=m)),K(n,Oe,m=>o(4,s=m)),K(n,ne,m=>o(5,r=m)),K(n,de,m=>o(6,l=m));let{full:a=!0}=e;H.use(wn);function u(){t.modelEmpty?d():bootbox.confirm("Are you sure you want to create a new model? This will delete the current model.",function(m){m&&d()})}function d(){Y(Q).elements().remove(),un(),R(B,t.parsedModel=!1,t),R(ne,r.fix_first=!0,r),R(ne,r.mode="user model",r),Shiny.setInputValue("show_help",Math.random());for(let E in s)R(Oe,s[E]=null,s)}function f(m,E){dt.saveAs(m,"model."+E)}function p(m){d();let E=JSON.parse(m),W=Y(Q),te;te=JSON.parse(E.model);const L=JSON.parse(E.modelOpt),w=JSON.parse(E.gridViewOpt);if(Ft(r,L),Ft(l,w),E.fitCache!=null){const N=JSON.parse(E.fitCache);R(Oe,s=N,s)}R(B,t.loadingMode=!0,t),W.json({elements:te}),W.nodes().forEach(N=>{N.style({width:N.data("width")}),N.style({height:N.data("height")})}),t.dataAvail&&gt(t.columnNames),r.mode!=="user model"?R(de,l.showLav=!0,l):R(de,l.showLav=!1,l),W.nodes().forEach(N=>{pe(N.id())}),R(B,t.loadingMode=!1,t)}async function c(){const m=document.createElement("input");m.setAttribute("type","file"),m.setAttribute("accept",".lvm");const E=await new Promise(te=>{m.addEventListener("change",L=>te(L.target.files[0])),m.click()}),W=await new Promise(te=>{const L=new FileReader;L.readAsText(E,"UTF-8"),L.onload=()=>te(L.result)});p(W)}function b(){t.modelEmpty?c():bootbox.confirm("Are you sure you want to load a model? This will delete the current model.",function(m){m&&c()})}function _(){t.modelEmpty?$():bootbox.confirm("Are you sure you want to load a model? This will delete the current model.",function(m){m&&$()})}function $(){const m=document.createElement("input");m.setAttribute("type","file"),m.setAttribute("accept",".lvd"),m.addEventListener("change",function(E){const W=E.target.files[0],te=new FileReader;te.readAsArrayBuffer(W),te.onload=function(){const L=te.result;wt.loadAsync(L).then(function(w){w.file("data.csv").async("base64").then(function(N){Shiny.setInputValue("dataUpload-fileInput",{content:N});const V=setInterval(()=>{t.dataAvail&&(clearInterval(V),w.file("model.lvm").async("text").then(function(se){p(se)}))},100)})})}}),m.click()}function y(){const m=Y(Q);m.nodes().forEach(V=>{V.data("width",V.width()),V.data("height",V.height())});let E=m.json().elements;E.nodes.forEach(V=>{V.classes=V.classes.split(" ").filter(se=>se!==Be).join(" ")});const W=JSON.stringify(E),te=JSON.stringify(r),L=JSON.stringify(r),w=JSON.stringify(s);return JSON.stringify({model:W,modelOpt:te,gridViewOpt:L,fitCache:w})}function S(){const m=y();let E=new Blob([m],{type:"application/json;charset=utf-8"});dt.saveAs(E,"model_"+Nt()+".lvm")}Shiny.addCustomMessageHandler("dataForDownload",function(m){(async()=>{const E=y(),W=new wt;W.file("model.lvm",E),W.file("data.csv",m);const te=await W.generateAsync({type:"blob"}),L=new File([te],"model_"+Nt()+".lvd",{type:"application/zip"});dt.saveAs(L)})()});function M(){const m=Y(Q);R(B,t.dataAvail=!1,t),R(B,t.columnNames=null,t),R(B,t.loadedFileName=null,t),R(B,t.ids=null,t),R(mt,i=null,i),m.nodes().unlink(),Shiny.setInputValue("dataUpload-deleteData",Math.random())}function A(){const m=Y(Q);f(m.png({bg:"white"}),"png")}function h(){const m=Y(Q);f(m.jpg(),"jpg")}function g(){return Y(Q).svg({scale:1,full:!0})}function v(){const m=g(),E=new Blob([m],{type:"image/svg+xml;charset=utf-8"});f(E,"svg")}async function I(){const m=g(),W=new DOMParser().parseFromString(m,"image/svg+xml").documentElement;W.style.position="absolute",W.style.left="-9999px",document.body.appendChild(W);const te=W.getBoundingClientRect();document.body.removeChild(W);const L=te.width,w=te.height,N=new kn({orientation:L>w?"landscape":"portrait",unit:"pt",format:[L,w]});await En(W,N,{width:L,height:w}),N.save("model.pdf")}let j;return n.$$set=m=>{"full"in m&&o(0,a=m.full)},n.$$.update=()=>{if(n.$$.dirty&5){let m=[{name:"New Model",action:u},{name:"Load Model",action:b},{name:"Load Data",action:$i},{name:"Load Model and Data",action:_},{name:"Download Model",action:S,disable:t.modelEmpty},{name:"Remove Data",action:M,disable:!t.dataAvail},{name:"Download Model and Data",disable:t.modelEmpty||!t.dataAvail,action:vi,divider:!0},{name:"Export Diagram to PNG",disable:t.modelEmpty,action:A},{name:"Export Diagram to JPG",disable:t.modelEmpty,action:h},{name:"Export Diagram to SVG",disable:t.modelEmpty,action:v},{name:"Export Diagram to PDF",disable:t.modelEmpty,action:I}];a?o(1,j=m):o(1,j=m.filter(E=>["Download Model","Load Model"].includes(E.name)||m.indexOf(E)>=m.length-4))}},[a,j,t]}class cn extends J{constructor(e){super(),X(this,e,yi,_i,Z,{full:0})}}function wi(n){let e;return{c(){e=z("span"),k(e,"class","glyphicon glyphicon-ok check-mark invisible"),k(e,"aria-hidden","true")},m(o,t){O(o,e,t)},d(o){o&&F(e)}}}function ki(n){let e;return{c(){e=z("span"),k(e,"class","glyphicon glyphicon-ok check-mark"),k(e,"aria-hidden","true")},m(o,t){O(o,e,t)},d(o){o&&F(e)}}}function Ei(n){let e,o,t,i,s,r,l,a,u;function d(c,b){return c[0]?ki:wi}let f=d(n),p=f(n);return{c(){e=z("li"),o=z("label"),t=z("input"),i=x(),p.c(),s=x(),r=_e(n[1]),k(t,"type","checkbox"),k(t,"class","check-box svelte-17cge7g"),t.disabled=n[2],k(o,"class",l=Ve(n[2]?"disabled-label":"")+" svelte-17cge7g"),k(e,"class","svelte-17cge7g")},m(c,b){O(c,e,b),P(e,o),P(o,t),t.checked=n[0],P(o,i),p.m(o,null),P(o,s),P(o,r),a||(u=ie(t,"change",n[3]),a=!0)},p(c,[b]){b&4&&(t.disabled=c[2]),b&1&&(t.checked=c[0]),f!==(f=d(c))&&(p.d(1),p=f(c),p&&(p.c(),p.m(o,s))),b&2&&Re(r,c[1]),b&4&&l!==(l=Ve(c[2]?"disabled-label":"")+" svelte-17cge7g")&&k(o,"class",l)},i:re,o:re,d(c){c&&F(e),p.d(),a=!1,u()}}}function Ci(n,e,o){let{name:t}=e,{checked:i}=e,{disable:s=!1}=e;function r(){i=this.checked,o(0,i)}return n.$$set=l=>{"name"in l&&o(1,t=l.name),"checked"in l&&o(0,i=l.checked),"disable"in l&&o(2,s=l.disable)},[i,t,s,r]}class Ce extends J{constructor(e){super(),X(this,e,Ci,Ei,Z,{name:1,checked:0,disable:2})}}function Si(n){let e;return{c(){e=z("span"),k(e,"class","glyphicon glyphicon-ok check-mark invisible"),k(e,"aria-hidden","true")},m(o,t){O(o,e,t)},d(o){o&&F(e)}}}function Li(n){let e;return{c(){e=z("span"),k(e,"class","glyphicon glyphicon-ok check-mark"),k(e,"aria-hidden","true")},m(o,t){O(o,e,t)},d(o){o&&F(e)}}}function Mi(n){let e,o,t,i=!1,s,r,l,a,u,d,f,p;function c($,y){return $[0]===$[2]?Li:Si}let b=c(n),_=b(n);return d=$n(n[5][0]),{c(){e=z("div"),o=z("label"),t=z("input"),s=x(),_.c(),r=x(),l=_e(n[1]),k(t,"type","radio"),k(t,"name","meanStruc"),t.__value=n[2],t.value=t.__value,t.disabled=n[3],k(t,"class","svelte-lbhkwe"),k(o,"class",a=Ve(n[3]?"text-muted":"")+" svelte-lbhkwe"),k(e,"class",u=Ve(n[3]?"radio disabled":"radio")+" svelte-lbhkwe"),d.p(t)},m($,y){O($,e,y),P(e,o),P(o,t),t.checked=t.__value===n[0],P(o,s),_.m(o,null),P(o,r),P(o,l),f||(p=ie(t,"change",n[4]),f=!0)},p($,[y]){y&4&&(t.__value=$[2],t.value=t.__value,i=!0),y&8&&(t.disabled=$[3]),(i||y&1)&&(t.checked=t.__value===$[0]),b!==(b=c($))&&(_.d(1),_=b($),_&&(_.c(),_.m(o,r))),y&2&&Re(l,$[1]),y&8&&a!==(a=Ve($[3]?"text-muted":"")+" svelte-lbhkwe")&&k(o,"class",a),y&8&&u!==(u=Ve($[3]?"radio disabled":"radio")+" svelte-lbhkwe")&&k(e,"class",u)},i:re,o:re,d($){$&&F(e),_.d(),d.r(),f=!1,p()}}}function Di(n,e,o){let{name:t}=e,{value:i}=e,{group:s}=e,{isDisabled:r=!1}=e;const l=[[]];function a(){s=this.__value,o(0,s)}return n.$$set=u=>{"name"in u&&o(1,t=u.name),"value"in u&&o(2,i=u.value),"group"in u&&o(0,s=u.group),"isDisabled"in u&&o(3,r=u.isDisabled)},[s,t,i,r,a,l]}class tt extends J{constructor(e){super(),X(this,e,Di,Mi,Z,{name:1,value:2,group:0,isDisabled:3})}}const It=[{name:"Arrows Created by Lavaan",modelSlot:"showLav"},{name:"Variance Arrows",modelSlot:"showVar"},{name:"Mean Arrows",modelSlot:"showMean"}];let Tt=[{name:"Estimate",value:"est"},{name:"Confidence Interval",value:"ci"},{name:"Estimate + p-value (stars)",value:"estPVal"},{name:"Estimate + Standard Error",value:"estSE"}];function Ai(n,e,o){const t=Y(Q),i=e?"_std":"",s=fn(n,i,o);t.style().selector("edge.hasEst").style({label:s}).update();const r=Ni(n,i,o);t.style().selector("edge.hasEst.label").style({label:r}).update();const l=Ii(n,i,o);t.style().selector("edge.hasEstFixed").style({label:l}).update()}function Oi(n,e,o,t){const i=Y(Q),s=[e,n,o];function r(l,a){return[d=>d.isLavaanAdded(),d=>d.isLoop(),d=>d.isMean()][l](a)}for(let l of[0,1,2]){const a=i.elements(function(u){return r(l,u)});if(s[l]?a.removeClass("hidden"):a.addClass("hidden"),l==2){const u=a.connectedEdges().connectedNodes(),d=a.connectedEdges();s[l]?d.forEach(f=>{f.removeClass("hidden")}):d.forEach(f=>{f.addClass("hidden")}),u.forEach(f=>{pe(f.id())})}else a.forEach(u=>{pe(u.source().id()),pe(u.target().id())})}}function Fi(n){return n===null?"NA":n<.001?"***":n<.01?"**":n<.05?"*":""}function fn(n,e,o){const t=i=>i===null?"NA":i.toFixed(o);switch(n){case"est":return i=>t(i.data("estimates")["est"+e]);case"ci":return i=>`[${t(i.data("estimates")["ciLow"+e])}, ${t(i.data("estimates")["ciHigh"+e])}]`;case"estPVal":return i=>`${t(i.data("estimates")["est"+e])}${Fi(i.data("estimates").p_value)}`;case"estSE":return i=>`${t(i.data("estimates")["est"+e])} (${t(i.data("estimates")["se"+e])})`;default:return()=>"NA"}}function Ni(n,e,o){const t=fn(n,e,o);return i=>`${i.data("label")} = ${t(i)}`}function Ii(n,e,o){const t=i=>i===null?"NA":i.toFixed(o);return i=>"@"+t(i.data("estimates")["estFixed"+e])}function Ti(n){let e,o,t,i,s,r;return{c(){e=z("li"),o=_e(n[1]),t=x(),i=z("input"),$e(i,"width","4em"),k(i,"type","number"),k(i,"min",n[2]),$e(e,"padding-left","28px")},m(l,a){O(l,e,a),P(e,o),P(e,t),P(e,i),ot(i,n[0]),s||(r=ie(i,"input",n[3]),s=!0)},p(l,[a]){a&2&&Re(o,l[1]),a&4&&k(i,"min",l[2]),a&1&&lt(i.value)!==l[0]&&ot(i,l[0])},i:re,o:re,d(l){l&&F(e),s=!1,r()}}}function xi(n,e,o){let{name:t}=e,{value:i}=e,{min:s}=e;function r(){i=lt(this.value),o(0,i)}return n.$$set=l=>{"name"in l&&o(1,t=l.name),"value"in l&&o(0,i=l.value),"min"in l&&o(2,s=l.min)},[i,t,s,r]}class rt extends J{constructor(e){super(),X(this,e,xi,Ti,Z,{name:1,value:0,min:2})}}function xt(n,e,o){const t=n.slice();return t[9]=e[o],t}function Pt(n,e,o){const t=n.slice();return t[9]=e[o],t[12]=e,t[13]=o,t}function Vt(n){let e,o,t,i;function s(a){n[3](a,n[9])}function r(a){n[4](a,n[9])}let l={disable:!1};return n[9].name!==void 0&&(l.name=n[9].name),n[1][n[9].modelSlot]!==void 0&&(l.checked=n[1][n[9].modelSlot]),e=new Ce({props:l}),le.push(()=>ce(e,"name",s)),le.push(()=>ce(e,"checked",r)),{c(){G(e.$$.fragment)},m(a,u){U(e,a,u),i=!0},p(a,u){n=a;const d={};!o&&u&4&&(o=!0,d.name=n[9].name,fe(()=>o=!1)),!t&&u&6&&(t=!0,d.checked=n[1][n[9].modelSlot],fe(()=>t=!1)),e.$set(d)},i(a){i||(C(e.$$.fragment,a),i=!0)},o(a){D(e.$$.fragment,a),i=!1},d(a){q(e,a)}}}function Rt(n){let e,o,t;function i(r){n[6](r)}let s={name:n[9].name,value:n[9].value};return n[1].view!==void 0&&(s.group=n[1].view),e=new tt({props:s}),le.push(()=>ce(e,"group",i)),{c(){G(e.$$.fragment)},m(r,l){U(e,r,l),t=!0},p(r,l){const a={};!o&&l&2&&(o=!0,a.group=r[1].view,fe(()=>o=!1)),e.$set(a)},i(r){t||(C(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){q(e,r)}}}function Pi(n){let e,o,t,i,s,r,l,a,u,d,f,p,c,b,_,$,y,S,M,A,h=n[2],g=[];for(let w=0;w<h.length;w+=1)g[w]=Vt(Pt(n,h,w));const v=w=>D(g[w],1,1,()=>{g[w]=null});function I(w){n[5](w)}let j={name:"Standardized Estimates",disable:!1};n[1].std!==void 0&&(j.checked=n[1].std),i=new Ce({props:j}),le.push(()=>ce(i,"checked",I));let m=Tt,E=[];for(let w=0;w<m.length;w+=1)E[w]=Rt(xt(n,m,w));const W=w=>D(E[w],1,1,()=>{E[w]=null});function te(w){n[8](w)}let L={name:"Number Digits",min:0};return n[1].number_digits!==void 0&&(L.value=n[1].number_digits),$=new rt({props:L}),le.push(()=>ce($,"value",te)),{c(){for(let w=0;w<g.length;w+=1)g[w].c();e=x(),o=z("li"),t=x(),G(i.$$.fragment),r=x(),l=z("li"),a=x();for(let w=0;w<E.length;w+=1)E[w].c();u=x(),d=z("li"),f=x(),p=z("li"),c=_e(`Confidence Level
    `),b=z("input"),_=x(),G($.$$.fragment),k(o,"class","divider"),k(l,"class","divider"),k(d,"class","divider"),k(b,"type","number"),k(b,"min","0"),k(b,"max","0.999999"),k(b,"step","0.01"),$e(b,"width","4em"),$e(p,"padding-left","28px")},m(w,N){for(let V=0;V<g.length;V+=1)g[V]&&g[V].m(w,N);O(w,e,N),O(w,o,N),O(w,t,N),U(i,w,N),O(w,r,N),O(w,l,N),O(w,a,N);for(let V=0;V<E.length;V+=1)E[V]&&E[V].m(w,N);O(w,u,N),O(w,d,N),O(w,f,N),O(w,p,N),P(p,c),P(p,b),ot(b,n[1].ci),O(w,_,N),U($,w,N),S=!0,M||(A=ie(b,"input",n[7]),M=!0)},p(w,N){if(N&6){h=w[2];let ee;for(ee=0;ee<h.length;ee+=1){const T=Pt(w,h,ee);g[ee]?(g[ee].p(T,N),C(g[ee],1)):(g[ee]=Vt(T),g[ee].c(),C(g[ee],1),g[ee].m(e.parentNode,e))}for(ve(),ee=h.length;ee<g.length;ee+=1)v(ee);ye()}const V={};if(!s&&N&2&&(s=!0,V.checked=w[1].std,fe(()=>s=!1)),i.$set(V),N&2){m=Tt;let ee;for(ee=0;ee<m.length;ee+=1){const T=xt(w,m,ee);E[ee]?(E[ee].p(T,N),C(E[ee],1)):(E[ee]=Rt(T),E[ee].c(),C(E[ee],1),E[ee].m(u.parentNode,u))}for(ve(),ee=m.length;ee<E.length;ee+=1)W(ee);ye()}N&2&&lt(b.value)!==w[1].ci&&ot(b,w[1].ci);const se={};!y&&N&2&&(y=!0,se.value=w[1].number_digits,fe(()=>y=!1)),$.$set(se)},i(w){if(!S){for(let N=0;N<h.length;N+=1)C(g[N]);C(i.$$.fragment,w);for(let N=0;N<m.length;N+=1)C(E[N]);C($.$$.fragment,w),S=!0}},o(w){g=g.filter(Boolean);for(let N=0;N<g.length;N+=1)D(g[N]);D(i.$$.fragment,w),E=E.filter(Boolean);for(let N=0;N<E.length;N+=1)D(E[N]);D($.$$.fragment,w),S=!1},d(w){Fe(g,w),w&&F(e),w&&F(o),w&&F(t),q(i,w),w&&F(r),w&&F(l),w&&F(a),Fe(E,w),w&&F(u),w&&F(d),w&&F(f),w&&F(p),w&&F(_),q($,w),M=!1,A()}}}function Vi(n){let e,o;return e=new Ue({props:{name:"View",minimal:n[0],$$slots:{default:[Pi]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},p(t,[i]){const s={};i&1&&(s.minimal=t[0]),i&16390&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(C(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}function Ri(n,e,o){let t;K(n,de,f=>o(1,t=f));let{minimal:i=!1}=e;function s(f,p){n.$$.not_equal(p.name,f)&&(p.name=f,o(2,It))}function r(f,p){n.$$.not_equal(t[p.modelSlot],f)&&(t[p.modelSlot]=f,de.set(t))}function l(f){n.$$.not_equal(t.std,f)&&(t.std=f,de.set(t))}function a(f){n.$$.not_equal(t.view,f)&&(t.view=f,de.set(t))}function u(){t.ci=lt(this.value),de.set(t)}function d(f){n.$$.not_equal(t.number_digits,f)&&(t.number_digits=f,de.set(t))}return n.$$set=f=>{"minimal"in f&&o(0,i=f.minimal)},n.$$.update=()=>{n.$$.dirty&2&&Shiny.setInputValue("ests-confindence_level",t.ci)},[i,t,It,s,r,l,a,u,d]}class mn extends J{constructor(e){super(),X(this,e,Ri,Vi,Z,{minimal:0})}}function zt(n,e,o){const t=n.slice();return t[8]=e[o],t}function Bt(n){let e,o,t;function i(r){n[3](r)}let s={name:n[8].name,value:n[8].value};return n[0].meanStruc!==void 0&&(s.group=n[0].meanStruc),e=new tt({props:s}),le.push(()=>ce(e,"group",i)),{c(){G(e.$$.fragment)},m(r,l){U(e,r,l),t=!0},p(r,l){const a={};!o&&l&1&&(o=!0,a.group=r[0].meanStruc,fe(()=>o=!1)),e.$set(a)},i(r){t||(C(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){q(e,r)}}}function zi(n){let e,o,t,i,s,r,l,a,u,d,f,p,c,b=n[2],_=[];for(let v=0;v<b.length;v+=1)_[v]=Bt(zt(n,b,v));const $=v=>D(_[v],1,1,()=>{_[v]=null});function y(v){n[4](v)}function S(v){n[5](v)}let M={name:"Add Intercepts for all Observed Variables"};n[0].intOvFree!==void 0&&(M.checked=n[0].intOvFree),n[1]!==void 0&&(M.disable=n[1]),r=new Ce({props:M}),le.push(()=>ce(r,"checked",y)),le.push(()=>ce(r,"disable",S));function A(v){n[6](v)}function h(v){n[7](v)}let g={name:"Add Intercepts for all Latent Variables"};return n[0].intLvFree!==void 0&&(g.checked=n[0].intLvFree),n[1]!==void 0&&(g.disable=n[1]),d=new Ce({props:g}),le.push(()=>ce(d,"checked",A)),le.push(()=>ce(d,"disable",h)),{c(){e=z("li"),o=z("a"),o.textContent="Model Means?",t=x(),i=z("ul");for(let v=0;v<_.length;v+=1)_[v].c();s=x(),G(r.$$.fragment),u=x(),G(d.$$.fragment),k(o,"tabindex","-1"),k(o,"href","#"),k(o,"class","svelte-143y7r6"),k(i,"class","dropdown-menu svelte-143y7r6"),k(e,"class","dropdown-submenu svelte-143y7r6")},m(v,I){O(v,e,I),P(e,o),P(e,t),P(e,i);for(let j=0;j<_.length;j+=1)_[j]&&_[j].m(i,null);O(v,s,I),U(r,v,I),O(v,u,I),U(d,v,I),c=!0},p(v,I){if(I&5){b=v[2];let E;for(E=0;E<b.length;E+=1){const W=zt(v,b,E);_[E]?(_[E].p(W,I),C(_[E],1)):(_[E]=Bt(W),_[E].c(),C(_[E],1),_[E].m(i,null))}for(ve(),E=b.length;E<_.length;E+=1)$(E);ye()}const j={};!l&&I&1&&(l=!0,j.checked=v[0].intOvFree,fe(()=>l=!1)),!a&&I&2&&(a=!0,j.disable=v[1],fe(()=>a=!1)),r.$set(j);const m={};!f&&I&1&&(f=!0,m.checked=v[0].intLvFree,fe(()=>f=!1)),!p&&I&2&&(p=!0,m.disable=v[1],fe(()=>p=!1)),d.$set(m)},i(v){if(!c){for(let I=0;I<b.length;I+=1)C(_[I]);C(r.$$.fragment,v),C(d.$$.fragment,v),c=!0}},o(v){_=_.filter(Boolean);for(let I=0;I<_.length;I+=1)D(_[I]);D(r.$$.fragment,v),D(d.$$.fragment,v),c=!1},d(v){v&&F(e),Fe(_,v),v&&F(s),q(r,v),v&&F(u),q(d,v)}}}function Bi(n){let e,o;return e=new Ue({props:{name:Gi,$$slots:{default:[zi]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},p(t,[i]){const s={};i&2051&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(C(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}let Gi="Mean Options";function Ui(n,e,o){let t,i;K(n,ne,f=>o(0,i=f));let s=[{name:"Automatic",value:"default"},{name:"Yes",value:"true"},{name:"No",value:"false"}];function r(f){n.$$.not_equal(i.meanStruc,f)&&(i.meanStruc=f,ne.set(i))}function l(f){n.$$.not_equal(i.intOvFree,f)&&(i.intOvFree=f,ne.set(i))}function a(f){t=f,o(1,t),o(0,i)}function u(f){n.$$.not_equal(i.intLvFree,f)&&(i.intLvFree=f,ne.set(i))}function d(f){t=f,o(1,t),o(0,i)}return n.$$.update=()=>{n.$$.dirty&1&&o(1,t=i.meanStruc==="false")},[i,t,s,r,l,a,u,d]}class qi extends J{constructor(e){super(),X(this,e,Ui,Bi,Z,{})}}function Gt(n,e,o){const t=n.slice();return t[9]=e[o],t}function Ut(n,e,o){const t=n.slice();return t[9]=e[o],t}function qt(n,e,o){const t=n.slice();return t[9]=e[o],t}function jt(n){let e,o,t;function i(r){n[4](r)}let s={name:n[9].name,value:n[9].value};return n[0].estimator!==void 0&&(s.group=n[0].estimator),e=new tt({props:s}),le.push(()=>ce(e,"group",i)),{c(){G(e.$$.fragment)},m(r,l){U(e,r,l),t=!0},p(r,l){const a={};!o&&l&1&&(o=!0,a.group=r[0].estimator,fe(()=>o=!1)),e.$set(a)},i(r){t||(C(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){q(e,r)}}}function Ht(n){let e,o,t;function i(r){n[5](r)}let s={name:n[9].name,value:n[9].value};return n[0].se!==void 0&&(s.group=n[0].se),e=new tt({props:s}),le.push(()=>ce(e,"group",i)),{c(){G(e.$$.fragment)},m(r,l){U(e,r,l),t=!0},p(r,l){const a={};!o&&l&1&&(o=!0,a.group=r[0].se,fe(()=>o=!1)),e.$set(a)},i(r){t||(C(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){q(e,r)}}}function Wt(n){let e,o,t;function i(r){n[7](r)}let s={name:n[9].name,value:n[9].value};return n[0].missing!==void 0&&(s.group=n[0].missing),e=new tt({props:s}),le.push(()=>ce(e,"group",i)),{c(){G(e.$$.fragment)},m(r,l){U(e,r,l),t=!0},p(r,l){const a={};!o&&l&1&&(o=!0,a.group=r[0].missing,fe(()=>o=!1)),e.$set(a)},i(r){t||(C(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){q(e,r)}}}function ji(n){let e,o,t,i,s,r,l,a,u,d,f,p,c,b,_,$,y,S,M=n[1],A=[];for(let L=0;L<M.length;L+=1)A[L]=jt(qt(n,M,L));const h=L=>D(A[L],1,1,()=>{A[L]=null});let g=n[2],v=[];for(let L=0;L<g.length;L+=1)v[L]=Ht(Ut(n,g,L));const I=L=>D(v[L],1,1,()=>{v[L]=null});function j(L){n[6](L)}let m={name:"Number of Bootstrap Samples:",min:5};n[0].n_boot!==void 0&&(m.value=n[0].n_boot),f=new rt({props:m}),le.push(()=>ce(f,"value",j));let E=n[3],W=[];for(let L=0;L<E.length;L+=1)W[L]=Wt(Gt(n,E,L));const te=L=>D(W[L],1,1,()=>{W[L]=null});return{c(){e=z("li"),o=z("a"),o.textContent="Estimator",t=x(),i=z("ul");for(let L=0;L<A.length;L+=1)A[L].c();s=x(),r=z("li"),l=z("a"),l.textContent="Standard Error",a=x(),u=z("ul");for(let L=0;L<v.length;L+=1)v[L].c();d=x(),G(f.$$.fragment),c=x(),b=z("li"),_=z("a"),_.textContent="Missing Values",$=x(),y=z("ul");for(let L=0;L<W.length;L+=1)W[L].c();k(o,"tabindex","-1"),k(o,"href","#"),k(o,"class","svelte-143y7r6"),k(i,"class","dropdown-menu svelte-143y7r6"),k(e,"class","dropdown-submenu svelte-143y7r6"),k(l,"tabindex","-1"),k(l,"href","#"),k(l,"class","svelte-143y7r6"),k(u,"class","dropdown-menu svelte-143y7r6"),k(r,"class","dropdown-submenu svelte-143y7r6"),k(_,"tabindex","-1"),k(_,"href","#"),k(_,"class","svelte-143y7r6"),k(y,"class","dropdown-menu svelte-143y7r6"),k(b,"class","dropdown-submenu svelte-143y7r6")},m(L,w){O(L,e,w),P(e,o),P(e,t),P(e,i);for(let N=0;N<A.length;N+=1)A[N]&&A[N].m(i,null);O(L,s,w),O(L,r,w),P(r,l),P(r,a),P(r,u);for(let N=0;N<v.length;N+=1)v[N]&&v[N].m(u,null);P(u,d),U(f,u,null),O(L,c,w),O(L,b,w),P(b,_),P(b,$),P(b,y);for(let N=0;N<W.length;N+=1)W[N]&&W[N].m(y,null);S=!0},p(L,w){if(w&3){M=L[1];let V;for(V=0;V<M.length;V+=1){const se=qt(L,M,V);A[V]?(A[V].p(se,w),C(A[V],1)):(A[V]=jt(se),A[V].c(),C(A[V],1),A[V].m(i,null))}for(ve(),V=M.length;V<A.length;V+=1)h(V);ye()}if(w&5){g=L[2];let V;for(V=0;V<g.length;V+=1){const se=Ut(L,g,V);v[V]?(v[V].p(se,w),C(v[V],1)):(v[V]=Ht(se),v[V].c(),C(v[V],1),v[V].m(u,d))}for(ve(),V=g.length;V<v.length;V+=1)I(V);ye()}const N={};if(!p&&w&1&&(p=!0,N.value=L[0].n_boot,fe(()=>p=!1)),f.$set(N),w&9){E=L[3];let V;for(V=0;V<E.length;V+=1){const se=Gt(L,E,V);W[V]?(W[V].p(se,w),C(W[V],1)):(W[V]=Wt(se),W[V].c(),C(W[V],1),W[V].m(y,null))}for(ve(),V=E.length;V<W.length;V+=1)te(V);ye()}},i(L){if(!S){for(let w=0;w<M.length;w+=1)C(A[w]);for(let w=0;w<g.length;w+=1)C(v[w]);C(f.$$.fragment,L);for(let w=0;w<E.length;w+=1)C(W[w]);S=!0}},o(L){A=A.filter(Boolean);for(let w=0;w<A.length;w+=1)D(A[w]);v=v.filter(Boolean);for(let w=0;w<v.length;w+=1)D(v[w]);D(f.$$.fragment,L),W=W.filter(Boolean);for(let w=0;w<W.length;w+=1)D(W[w]);S=!1},d(L){L&&F(e),Fe(A,L),L&&F(s),L&&F(r),Fe(v,L),q(f),L&&F(c),L&&F(b),Fe(W,L)}}}function Hi(n){let e,o;return e=new Ue({props:{name:Wi,$$slots:{default:[ji]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},p(t,[i]){const s={};i&65537&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(C(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}const Wi="Estimation";function Yi(n,e,o){let t;K(n,ne,f=>o(0,t=f));const i=[{value:"default",name:"Default"},{value:"ML",name:"Maximum Likelihood (ML)"},{value:"GLS",name:"Generalized Least Squares (GLS)"},{value:"WLS",name:"Weighted Least Squares (WLS)"},{value:"ULS",name:"Unweighted Least Squares (ULS)"},{value:"DLS",name:"Distributionally-weighted Least Squares (DLW)"}],s=[{value:"default",name:"Default"},{value:"robust",name:"Robust"},{value:"boot",name:"Bootstrap"}],r=[{value:"listwise",name:"Listwise Deletion"},{value:"ml",name:"Full Information Maximum Likelihood (FIML)"}];function l(f){n.$$.not_equal(t.estimator,f)&&(t.estimator=f,ne.set(t))}function a(f){n.$$.not_equal(t.se,f)&&(t.se=f,ne.set(t))}function u(f){n.$$.not_equal(t.n_boot,f)&&(t.n_boot=f,ne.set(t))}function d(f){n.$$.not_equal(t.missing,f)&&(t.missing=f,ne.set(t))}return[t,i,s,r,l,a,u,d]}class Ji extends J{constructor(e){super(),X(this,e,Yi,Hi,Z,{})}}let ft=0,gn=!1;function pn(){return typeof Shiny=="object"&&Shiny!==null}function Xi(n){const e=Object.keys(n),o=n[e[0]].length,t=[];for(let i=0;i<o;i++){const s={};for(const r of e)s[r]=n[r][i];t.push(s)}return t}function it(n,e=!0){gn=e,ft=ft+1;let o=ln(!0);o.name=n,o.counter=ft,pn()&&Shiny.setInputValue("layout-layout",JSON.stringify(o))}pn()&&Shiny.addCustomMessageHandler("semPlotLayout",function(n){n=Xi(n);const e=125,o=200;let t=1/0,i=1/0;for(let u=0;u<n.length;u++)for(let d=u+1;d<n.length;d++){const f=Math.abs(n[u].x-n[d].x),p=Math.abs(n[u].y-n[d].y);f<t&&n[u].y===n[d].y&&(t=f),p<i&&p!==0&&(i=p)}const s=e/t,r=o/i;let l={};n.forEach(u=>{const d=u.x*s+400,f=u.y*-1*r+400;l[u.name]={x:d,y:f}});let a={name:"preset",positions:function(u){const d=u.data("label");return l[d]},fit:!0,padding:60,animate:!0};gn?Y(Le).do("layout",{options:a}):Y(Q).layout(a).run()});function Zi(n){let e,o;return e=new at({props:{name:"Apply Layout",menuItems:n[1],minimal:n[0]}}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},p(t,[i]){const s={};i&2&&(s.menuItems=t[1]),i&1&&(s.minimal=t[0]),e.$set(s)},i(t){o||(C(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}function Ki(n,e,o){let t,i,s;K(n,B,p=>o(2,i=p)),K(n,Le,p=>o(3,s=p));let{minimal:r=!1}=e;Y(Q),we(()=>{H.use(Cn),H.use(Sn),H.use(Ln)});function l(){const p={name:"dagre",rankSep:150,animate:!0};s.do("layout",{options:p})}function a(){const p={name:"breadthfirst",animate:!0,spacingFactor:1};s.do("layout",{options:p})}function u(){const p={name:"circle",animate:!0};s.do("layout",{options:p})}function d(){const p={name:"fcose",animate:!0,idealEdgeLength:c=>150,quality:"proof",randomize:!1,nodeSeparation:200};s.do("layout",{options:p})}function f(){const p={name:"cola",animate:!0,nodeSpacing(c){return 50}};s.do("layout",{options:p})}return n.$$set=p=>{"minimal"in p&&o(0,r=p.minimal)},n.$$.update=()=>{n.$$.dirty&4&&o(1,t=[{name:"Recommended: Tree",action:()=>it("tree"),disable:i.modelEmpty},{name:"Recommended: Tree2",action:()=>it("tree2"),disable:i.modelEmpty},{name:"Recommended: Tree3",action:()=>it("tree3"),disable:i.modelEmpty},{name:"Experimental: Tree",action:l,disable:i.modelEmpty},{name:"Experimental: Tree2",action:a,disable:i.modelEmpty},{name:"Experimental: Circle",action:u,disable:i.modelEmpty},{name:"Experimental: Force-directed",action:d,disable:i.modelEmpty},{name:"Experimental: Cola",action:f,disable:i.modelEmpty}])},[r,t,i]}class hn extends J{constructor(e){super(),X(this,e,Ki,Zi,Z,{minimal:0})}}function Yt(n,e,o){const t=n.slice();return t[4]=e[o],t[5]=e,t[6]=o,t}function Jt(n){let e,o,t,i;function s(a){n[2](a,n[4])}function r(a){n[3](a,n[4])}let l={};return n[4].name!==void 0&&(l.name=n[4].name),n[1][n[4].modelProperty]!==void 0&&(l.checked=n[1][n[4].modelProperty]),e=new Ce({props:l}),le.push(()=>ce(e,"name",s)),le.push(()=>ce(e,"checked",r)),{c(){G(e.$$.fragment)},m(a,u){U(e,a,u),i=!0},p(a,u){n=a;const d={};!o&&u&1&&(o=!0,d.name=n[4].name,fe(()=>o=!1)),!t&&u&3&&(t=!0,d.checked=n[1][n[4].modelProperty],fe(()=>t=!1)),e.$set(d)},i(a){i||(C(e.$$.fragment,a),i=!0)},o(a){D(e.$$.fragment,a),i=!1},d(a){q(e,a)}}}function Qi(n){let e,o,t=n[0],i=[];for(let r=0;r<t.length;r+=1)i[r]=Jt(Yt(n,t,r));const s=r=>D(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=Ge()},m(r,l){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(r,l);O(r,e,l),o=!0},p(r,l){if(l&3){t=r[0];let a;for(a=0;a<t.length;a+=1){const u=Yt(r,t,a);i[a]?(i[a].p(u,l),C(i[a],1)):(i[a]=Jt(u),i[a].c(),C(i[a],1),i[a].m(e.parentNode,e))}for(ve(),a=t.length;a<i.length;a+=1)s(a);ye()}},i(r){if(!o){for(let l=0;l<t.length;l+=1)C(i[l]);o=!0}},o(r){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)D(i[l]);o=!1},d(r){Fe(i,r),r&&F(e)}}}function eo(n){let e,o;return e=new Ue({props:{name:to,$$slots:{default:[Qi]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},p(t,[i]){const s={};i&131&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(C(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}const to="Automatically..";function no(n,e,o){let t;K(n,ne,l=>o(1,t=l));const i=[{name:"Fix Factor Loading of First Indicator at 1",modelProperty:"fix_first"},{name:"Include Variances",modelProperty:"auto_var"},{name:"Include Covariances of Exogenous Latent Variables",modelProperty:"auto_cov_lv_x"},{name:"Include Covariances of Dependent Variables",modelProperty:"auto_cov_y"},{name:"Fix Variance of Only Indicator to 0",modelProperty:"fix_single"},{name:"Treat Exogenous Observed Variables as Fixed Variables",modelProperty:"fixed_x"}];function s(l,a){n.$$.not_equal(a.name,l)&&(a.name=l,o(0,i))}function r(l,a){n.$$.not_equal(t[a.modelProperty],l)&&(t[a.modelProperty]=l,ne.set(t))}return[i,t,s,r]}class io extends J{constructor(e){super(),X(this,e,no,eo,Z,{})}}function oo(n){let e,o;return e=new at({props:{name:"Help",menuItems:n[0]}}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},p:re,i(t){o||(C(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}function so(){Shiny.setInputValue("show_help",Math.random())}function ro(){window.open("https://doi.org/10.31234/osf.io/f4ary","_blank")}function lo(n){let e;const o=[{name:"Show Commands",action:so},{name:"Open Tutorial",action:ro},{name:"About",action:t}];function t(){bootbox.alert({title:"About Lavaangui",message:`Version: ${e}<br> Author: Julian D. Karch<br> Email: j.d.karch@fsw.leidenuniv.nl`})}return Shiny.addCustomMessageHandler("version",function(i){e=i[0].join(".")}),[o]}class ao extends J{constructor(e){super(),X(this,e,lo,oo,Z,{})}}function uo(n){let e,o,t,i,s,r,l,a,u,d,f,p,c,b,_,$,y,S,M,A,h;function g(T){n[2](T)}let v={name:"Show Grid"};n[1].gridShow!==void 0&&(v.checked=n[1].gridShow),e=new Ce({props:v}),le.push(()=>ce(e,"checked",g));function I(T){n[3](T)}let j={name:"Snap to Grid"};n[1].gridSnap!==void 0&&(j.checked=n[1].gridSnap),i=new Ce({props:j}),le.push(()=>ce(i,"checked",I));function m(T){n[4](T)}let E={name:"Resize to Grid"};n[1].gridResize!==void 0&&(E.checked=n[1].gridResize),l=new Ce({props:E}),le.push(()=>ce(l,"checked",m));function W(T){n[5](T)}let te={name:"Snap to Alignment on Release"};n[1].gridAlign!==void 0&&(te.checked=n[1].gridAlign),d=new Ce({props:te}),le.push(()=>ce(d,"checked",W));function L(T){n[6](T)}let w={name:"Move Grid on Pan"};n[1].gridMovePan!==void 0&&(w.checked=n[1].gridMovePan),c=new Ce({props:w}),le.push(()=>ce(c,"checked",L));function N(T){n[7](T)}let V={name:"Grid Spacing:",min:5};n[1].gridSpace!==void 0&&(V.value=n[1].gridSpace),$=new rt({props:V}),le.push(()=>ce($,"value",N));function se(T){n[8](T)}let ee={name:"Line Width:",min:0};return n[1].gridWidth!==void 0&&(ee.value=n[1].gridWidth),M=new rt({props:ee}),le.push(()=>ce(M,"value",se)),{c(){G(e.$$.fragment),t=x(),G(i.$$.fragment),r=x(),G(l.$$.fragment),u=x(),G(d.$$.fragment),p=x(),G(c.$$.fragment),_=x(),G($.$$.fragment),S=x(),G(M.$$.fragment)},m(T,ae){U(e,T,ae),O(T,t,ae),U(i,T,ae),O(T,r,ae),U(l,T,ae),O(T,u,ae),U(d,T,ae),O(T,p,ae),U(c,T,ae),O(T,_,ae),U($,T,ae),O(T,S,ae),U(M,T,ae),h=!0},p(T,ae){const qe={};!o&&ae&2&&(o=!0,qe.checked=T[1].gridShow,fe(()=>o=!1)),e.$set(qe);const ht={};!s&&ae&2&&(s=!0,ht.checked=T[1].gridSnap,fe(()=>s=!1)),i.$set(ht);const bt={};!a&&ae&2&&(a=!0,bt.checked=T[1].gridResize,fe(()=>a=!1)),l.$set(bt);const _t={};!f&&ae&2&&(f=!0,_t.checked=T[1].gridAlign,fe(()=>f=!1)),d.$set(_t);const $t={};!b&&ae&2&&(b=!0,$t.checked=T[1].gridMovePan,fe(()=>b=!1)),c.$set($t);const vt={};!y&&ae&2&&(y=!0,vt.value=T[1].gridSpace,fe(()=>y=!1)),$.$set(vt);const yt={};!A&&ae&2&&(A=!0,yt.value=T[1].gridWidth,fe(()=>A=!1)),M.$set(yt)},i(T){h||(C(e.$$.fragment,T),C(i.$$.fragment,T),C(l.$$.fragment,T),C(d.$$.fragment,T),C(c.$$.fragment,T),C($.$$.fragment,T),C(M.$$.fragment,T),h=!0)},o(T){D(e.$$.fragment,T),D(i.$$.fragment,T),D(l.$$.fragment,T),D(d.$$.fragment,T),D(c.$$.fragment,T),D($.$$.fragment,T),D(M.$$.fragment,T),h=!1},d(T){q(e,T),T&&F(t),q(i,T),T&&F(r),q(l,T),T&&F(u),q(d,T),T&&F(p),q(c,T),T&&F(_),q($,T),T&&F(S),q(M,T)}}}function co(n){let e,o;return e=new Ue({props:{minimal:n[0],name:"Grid Options",$$slots:{default:[uo]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},p(t,[i]){const s={};i&1&&(s.minimal=t[0]),i&514&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(C(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}function fo(n,e,o){let t;K(n,de,p=>o(1,t=p));let{minimal:i=!1}=e;function s(p){n.$$.not_equal(t.gridShow,p)&&(t.gridShow=p,de.set(t))}function r(p){n.$$.not_equal(t.gridSnap,p)&&(t.gridSnap=p,de.set(t))}function l(p){n.$$.not_equal(t.gridResize,p)&&(t.gridResize=p,de.set(t))}function a(p){n.$$.not_equal(t.gridAlign,p)&&(t.gridAlign=p,de.set(t))}function u(p){n.$$.not_equal(t.gridMovePan,p)&&(t.gridMovePan=p,de.set(t))}function d(p){n.$$.not_equal(t.gridSpace,p)&&(t.gridSpace=p,de.set(t))}function f(p){n.$$.not_equal(t.gridWidth,p)&&(t.gridWidth=p,de.set(t))}return n.$$set=p=>{"minimal"in p&&o(0,i=p.minimal)},[i,t,s,r,l,a,u,d,f]}class bn extends J{constructor(e){super(),X(this,e,fo,co,Z,{minimal:0})}}function mo(n){return window.$(document).ready(function(){var e=!1;window.$(".navbar .dropdown").hover(function(){e&&(window.$(".navbar .dropdown").removeClass("open"),window.$(this).addClass("open"))},function(){}),window.$(".navbar .dropdown").on("show.bs.dropdown",function(){e=!0}),window.$(".navbar .dropdown").on("hide.bs.dropdown",function(){window.$(".navbar .dropdown.open").length<=1&&(e=!1)})}),[]}class go extends J{constructor(e){super(),X(this,e,mo,null,Z,{})}}function po(n){let e,o;return e=new at({props:{name:"Edit",menuItems:n[0]}}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},p(t,[i]){const s={};i&1&&(s.menuItems=t[0]),e.$set(s)},i(t){o||(C(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}function ho(n,e,o){let t,i;K(n,B,a=>o(1,t=a)),K(n,Le,a=>o(2,i=a));function s(){i.undo()}function r(){i.redo()}let l=[];return n.$$.update=()=>{n.$$.dirty&2&&o(0,l=[{name:"Undo",action:s,disable:t.undoEmpty},{name:"Redo",action:r,disable:t.redoEmpty}])},[l,t]}class bo extends J{constructor(e){super(),X(this,e,ho,po,Z,{})}}function _o(n){let e,o,t,i,s,r,l,a,u,d,f,p,c,b,_,$,y,S,M,A;return e=new cn({}),t=new bo({}),s=new mn({}),l=new qi({}),u=new io({}),f=new Ji({}),c=new hn({}),_=new bn({}),y=new ao({}),M=new go({}),{c(){G(e.$$.fragment),o=x(),G(t.$$.fragment),i=x(),G(s.$$.fragment),r=x(),G(l.$$.fragment),a=x(),G(u.$$.fragment),d=x(),G(f.$$.fragment),p=x(),G(c.$$.fragment),b=x(),G(_.$$.fragment),$=x(),G(y.$$.fragment),S=x(),G(M.$$.fragment)},m(h,g){U(e,h,g),O(h,o,g),U(t,h,g),O(h,i,g),U(s,h,g),O(h,r,g),U(l,h,g),O(h,a,g),U(u,h,g),O(h,d,g),U(f,h,g),O(h,p,g),U(c,h,g),O(h,b,g),U(_,h,g),O(h,$,g),U(y,h,g),O(h,S,g),U(M,h,g),A=!0},i(h){A||(C(e.$$.fragment,h),C(t.$$.fragment,h),C(s.$$.fragment,h),C(l.$$.fragment,h),C(u.$$.fragment,h),C(f.$$.fragment,h),C(c.$$.fragment,h),C(_.$$.fragment,h),C(y.$$.fragment,h),C(M.$$.fragment,h),A=!0)},o(h){D(e.$$.fragment,h),D(t.$$.fragment,h),D(s.$$.fragment,h),D(l.$$.fragment,h),D(u.$$.fragment,h),D(f.$$.fragment,h),D(c.$$.fragment,h),D(_.$$.fragment,h),D(y.$$.fragment,h),D(M.$$.fragment,h),A=!1},d(h){q(e,h),h&&F(o),q(t,h),h&&F(i),q(s,h),h&&F(r),q(l,h),h&&F(a),q(u,h),h&&F(d),q(f,h),h&&F(p),q(c,h),h&&F(b),q(_,h),h&&F($),q(y,h),h&&F(S),q(M,h)}}}function $o(n){let e,o;return e=new ci({props:{$$slots:{default:[_o]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},p(t,[i]){const s={};i&1&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(C(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}class vo extends J{constructor(e){super(),X(this,e,null,$o,Z,{})}}function yo(n){let e;return{c(){e=z("pre"),k(e,"id","res-results"),k(e,"class","shiny-html-output well svelte-74yvxb"),k(e,"data-testid","result-text")},m(o,t){O(o,e,t)},p:re,i:re,o:re,d(o){o&&F(e)}}}class wo extends J{constructor(e){super(),X(this,e,null,yo,Z,{})}}function ko(n){return window.cy=Y(Q),B.subscribe(e=>{window.appState=e}),ne.subscribe(e=>{window.modelOptions=e}),mt.subscribe(e=>{window.dataInfo=e}),Oe.subscribe(e=>{window.fitCache=e}),de.subscribe(e=>{window.gridViewOptions=e}),Le.subscribe(e=>{window.ur=e}),[]}class Eo extends J{constructor(e){super(),X(this,e,ko,null,Z,{})}}function Co(n){return new RegExp("^[a-zA-Z\\._][a-zA-Z0-9\\._]*(?<!\\.)$").test(n)}function Xt(n){return n==""?(bootbox.alert("Provide a label"),!1):Co(n)?!0:(bootbox.alert("Provide a valid label"),!1)}function So(n,e){const o=e?"full":"minimal";return n.filter(t=>t.show===o||t.show==="both")}function Lo(n,e,o){let t,i,s;K(n,B,c=>o(1,t=c)),K(n,Le,c=>o(2,i=c)),K(n,ne,c=>o(3,s=c));let r=Y(Q);H.use(Mn);var l=new Dn.ColorPicker("#picker",{width:200,color:"rgb(255, 0, 0)",borderWidth:1,borderColor:"#fff"});function a(c,b){var _;const $=r.$(":selected");if($.length>1){if(b==="nodes"&&!$.every(y=>y.isNode()))return bootbox.alert("Not all selected elements are nodes. Aborting"),null;if(b==="edges"&&!$.every(y=>y.isEdge()))return bootbox.alert("Not all selected elements are edges. Aborting"),null;if(b==="nodes.edges"&&!$.every(y=>y.isEdge()||y.isNode()))return bootbox.alert("Not all selected elements are nodes or edges. Aborting"),null;_=$}else _=c;return _}const u=[{id:"add-observed",content:"Add Observed Variable",coreAsWell:!0,onClickFunction(c){const b=c.renderedPosition;he(ue,b)},show:"full"},{id:"add-latent",content:"Add Latent Variable",coreAsWell:!0,onClickFunction(c){const b=c.renderedPosition;he(me,b)},show:"full"},{id:"add-constant",content:"Add Constant Variable",coreAsWell:!0,onClickFunction(c){const b=c.renderedPosition;he(Se,b)},show:"full"},{id:"label-para",content:"Add/Change Label",selector:`edge.${ge}`,onClickFunction(c){const b=c.target||c.cyTarget;bootbox.prompt({title:"Enter a Label",value:b.getLabel(),callback(_){if(!Xt(_))return!1;_!==b.getLabel()&&_!==null&&(b.addLabel(_),oe(s.mode))}})},show:"full",hasTrailingDivider:!1},{id:"label-remove",content:"Remove Label",selector:`edge.${ze}`,onClickFunction(c){(c.target||c.cyTarget).removeLabel(),oe(s.mode)},show:"both",hasTrailingDivider:!1},{id:"remove-edge",content:"Delete Edge",selector:`edge.${ge}`,onClickFunction(c){(c.target||c.cyTarget).remove(),oe(s.mode)},show:"full",hasTrailingDivider:!0},{id:"fix-para",content:"Fix Parameter",selector:`edge.${ke}.${ge}, edge.${De}.${ge}`,onClickFunction(c){const b=c.target||c.cyTarget;bootbox.prompt({title:"Enter a Value",inputType:"number",callback(_){if(_=="")return bootbox.alert("Provide a value"),!1;_!==null&&(b.fixPara(_),oe(s.mode))}})},show:"full",hasTrailingDivider:!1},{id:"free-para",content:"Free Parameter",selector:`edge.${Ee}.${ge}, edge.${De}.${ge}`,onClickFunction(c){var b=c.target||c.cyTarget;b.freePara(),oe(s.mode)},show:"full",hasTrailingDivider:!1},{id:"free-force-para",content:"Force Parameter Free",selector:`edge.${ke}.${ge}, edge.${Ee}.${ge}`,onClickFunction(c){(c.target||c.cyTarget).forceFreePara(),oe(s.mode)},show:"full",hasTrailingDivider:!0},{id:"revert-arrow",content:"Revert Direction",selector:`edge[isMean="0"].${Ne}.${ge}`,onClickFunction(c){(c.target||c.cyTarget).revert(),oe(s.mode)},show:"full",hasTrailingDivider:!1},{id:"set-undirected",content:"Set Undirected",selector:`edge[isMean="0"].${Ne}.${ge}`,onClickFunction(c){(c.target||c.cyTarget).setUndirected(),oe(s.mode)},show:"full",hasTrailingDivider:!0},{id:"set-arrow",content:"Set Directed",selector:`edge.${Ie}.${ge}`,onClickFunction(c){(c.target||c.cyTarget).setDirected(),oe(s.mode)},show:"full",hasTrailingDivider:!0},{id:"free-orientation",content:"Free Loop Orientation",selector:`edge.${st}.fixDeg`,onClickFunction(c){const b=c.target||c.cyTarget;b.removeClass("fixDeg"),pe(b.source().id())},show:"both",hasTrailingDivider:!0},{id:"change-fromUser",content:"Include in User Model",selector:`edge.${Ae}`,onClickFunction(c){(c.target||c.cyTarget).markAddedUser(),oe(s.mode)},show:"full",hasTrailingDivider:!0},{id:"color-edge",content:"Change Edge Color",selector:"edge",show:"both",onClickFunction(c){var b=c.target||c.cyTarget;const _=a(b,"edges");if(_===null)return null;f(b,_,"edge")}},{id:"change-line-width",content:"Change Line Width",show:"both",selector:"edge",onClickFunction(c){var b=c.target||c.cyTarget;const _=a(b,"edges");if(_===null)return null;bootbox.prompt({title:"Enter New Line Width:",value:b.style("width"),callback($){$!==null&&i.do("style",{eles:_,style:{width:$}})}})}},{id:"rename-node",show:"full",content:"Rename Variable",selector:`node.${me}, node.${ue}`,onClickFunction(c){const b=c.target||c.cyTarget,_=t.columnNames;let $;t.dataAvail&&($=_.map(S=>`<option value="${S}">${S}</option>`).join(""));const y=t.dataAvail&&b.isObserved()?`
      <label>Or Select From Variables in Your Data:</label>
      <select class="form-control" id="label-dropdown">
        <option value="">--Select--</option>
        ${$}
      </select>
    `:"";bootbox.dialog({title:"Rename Variable",message:`
      <div>
        <label>Enter a label:</label>
        <input type="text" class="form-control" id="new-label" value=${b.getLabel()}>
        ${y}
      </div>
    `,buttons:{cancel:{label:"Cancel",className:"btn-default"},confirm:{label:"Rename",className:"btn-primary",callback(){let S=document.getElementById("new-label").value;const M=t.dataAvail&&b.isObserved()?document.getElementById("label-dropdown").value:"";let A;if(S==b.getLabel()&&M!=""?A=M:A=S,!Xt(A))return!1;A&&(b.setLabel(A),_&&_.includes(b.getLabel())?(b.link(),be("success",`Variable ${b.data("label")} linked to data`)):b.isLinked()&&(b.unlink(),be("info",`Variable ${b.getLabel()} unlinked`)),oe(s.mode))}}},onShown(S){document.getElementById("new-label").addEventListener("keypress",function(M){M.key==="Enter"&&(M.preventDefault(),S.target.querySelector(".btn-primary").click())})}})}},{id:"remove-node",content:"Delete Variable",selector:`node.${me}, node.${ue}, node.${Se}`,onClickFunction(c){(c.target||c.cyTarget).remove(),oe(s.mode)},show:"full",hasTrailingDivider:!0},{id:"change-latent",content:"Change to Latent",selector:`node.${ue}`,onClickFunction(c){(c.target||c.cyTarget).makeLatent(),oe(s.mode)},show:"full",hasTrailingDivider:!1},{id:"change-ordered",content:"Change to Ordered",selector:`node.${ue}.${Je}`,onClickFunction(c){(c.target||c.cyTarget).makeOrdered(),oe(s.mode)},show:"full",hasTrailingDivider:!0},{id:"change-continous",content:"Change to Continous",selector:`node.${ue}.${Ye}`,onClickFunction(c){(c.target||c.cyTarget).makeContinous(),oe(s.mode)},show:"full",hasTrailingDivider:!0},{id:"change-observed",show:"full",content:"Change to Observed",selector:`node.${me}`,hasTrailingDivider:!0,onClickFunction(c){const b=c.target||c.cyTarget;b.makeObserved();let _=t.columnNames;_&&_.includes(b.getLabel())&&(b.link(),bootbox.alert("Variable linked with data set")),oe(s.mode)}},{id:"color-node",content:"Change Background Color",selector:"node",show:"both",onClickFunction(c){var b=c.target||c.cyTarget;const _=a(b,"nodes");if(_===null)return null;f(b,_,"nodes")}},{id:"change-border-width",content:"Change Border Width",show:"both",selector:`node.${me}, node.${ue}, node.${Se}`,onClickFunction(c){var b=c.target||c.cyTarget;const _=a(b,"nodes");if(_===null)return null;bootbox.prompt({title:"Enter New Border Width:",value:b.style("border-width"),callback($){$!==null&&i.do("style",{eles:_,style:{"border-width":$}})}})}},{id:"change-font-size",content:"Change Font Size",show:"both",hasTrailingDivider:!0,selector:`node.${me}, node.${ue}, node.${Se}, edge`,onClickFunction(c){var b=c.target||c.cyTarget;const _=a(b,"nodes.edges");if(_===null)return null;bootbox.prompt({title:"Enter New Font Size:",value:b.style("font-size"),callback($){$!==null&&i.do("style",{eles:_,style:{"font-size":$}})}})}}];let d;function f(c,b,_){var $=document.getElementById("picker");$.style.display="block",$.style.left=event.pageX+"px",$.style.top=event.pageY+"px";let y;d=b;const S=function(h){y=h.hexString};l.on("color:change",S);const M=function(h){$.contains(h.target)||(_=="edge"?i.do("style",{eles:d,style:{"line-color":y,"target-arrow-color":y,"source-arrow-color":y}}):i.do("style",{eles:d,style:{"background-color":y}}),$.style.display="none",l.off("color:change",S),document.removeEventListener("click",M),document.removeEventListener("keydown",A))};setTimeout(()=>document.addEventListener("click",M),0);const A=function(h){h.key==="Enter"&&M(h)};document.addEventListener("keydown",A)}const p=So(u,t.full);return we(()=>{r.contextMenus({menuItems:p})}),[]}class Mo extends J{constructor(e){super(),X(this,e,Lo,null,Z,{})}}function Do(n){let e;return{c(){e=z("div"),e.innerHTML=`<label class="control-label shiny-label-null" for="fileInput" id="fileInput-label"></label> 
  <div class="input-group svelte-1qxcvef"><label class="input-group-btn input-group-prepend"><span class="btn btn-default btn-file">Browse...
        <input id="dataUpload-fileInput" name="fileInput" type="file" style="position: absolute !important; top: -99999px !important; left: -99999px !important;" accept=".csv,.sav, .xlsx, .rds"/></span></label> 
    <input type="text" class="form-control" placeholder="No file selected" readonly="readonly"/></div> 
  <div id="fileInput_progress" class="progress active shiny-file-input-progress svelte-1qxcvef"><div class="progress-bar svelte-1qxcvef"></div></div>`,k(e,"class","form-group shiny-input-container svelte-1qxcvef")},m(o,t){O(o,e,t)},p:re,i:re,o:re,d(o){o&&F(e)}}}class Ao extends J{constructor(e){super(),X(this,e,null,Do,Z,{})}}function Oo(n){let e,o,t,i,s,r,l,a,u,d,f,p,c,b,_,$,y,S,M,A,h,g,v,I;return{c(){e=z("div"),o=z("button"),t=_e("Show Data"),s=x(),r=z("div"),l=z("button"),a=_e("User Model"),d=x(),f=z("button"),p=_e("Autocompleted Model"),b=x(),_=z("button"),$=_e("Estimates"),M=x(),A=z("button"),h=_e("More Results"),k(o,"class","btn btn-lg btn-default"),o.disabled=i=!n[2].dataAvail,k(l,"class",u="btn btn-lg "+(n[1]==="user model"?"btn-primary active":"btn-default")),k(f,"class",c="btn btn-lg "+(n[1]==="full model"?"btn-primary active":"btn-default")),k(_,"class",y="btn btn-lg "+(n[1]==="estimate"?"btn-primary active":"btn-default")),_.disabled=S=!n[2].dataAvail||n[2].modelEmpty,k(r,"class","btn-group btn-toggle svelte-xny576"),k(A,"class","btn btn-lg btn-default"),A.disabled=g=n[0].mode!="estimate",k(e,"class","toolbox navbar-static-bottom svelte-xny576")},m(j,m){O(j,e,m),P(e,o),P(o,t),P(e,s),P(e,r),P(r,l),P(l,a),P(r,d),P(r,f),P(f,p),P(r,b),P(r,_),P(_,$),P(e,M),P(e,A),P(A,h),v||(I=[ie(o,"click",n[6]),ie(l,"click",n[7]),ie(f,"click",n[8]),ie(_,"click",n[9]),ie(A,"click",n[10])],v=!0)},p(j,[m]){m&4&&i!==(i=!j[2].dataAvail)&&(o.disabled=i),m&2&&u!==(u="btn btn-lg "+(j[1]==="user model"?"btn-primary active":"btn-default"))&&k(l,"class",u),m&2&&c!==(c="btn btn-lg "+(j[1]==="full model"?"btn-primary active":"btn-default"))&&k(f,"class",c),m&2&&y!==(y="btn btn-lg "+(j[1]==="estimate"?"btn-primary active":"btn-default"))&&k(_,"class",y),m&4&&S!==(S=!j[2].dataAvail||j[2].modelEmpty)&&(_.disabled=S),m&1&&g!==(g=j[0].mode!="estimate")&&(A.disabled=g)},i:re,o:re,d(j){j&&F(e),v=!1,Xe(I)}}}function Fo(){window.$("#data-modal-2").modal()}function No(n,e,o){let t,i,s;K(n,ne,_=>o(0,t=_)),K(n,B,_=>o(2,i=_)),K(n,de,_=>o(11,s=_));let r;function l(_){o(1,r=_),_!=="user model"?R(de,s.showLav=!0,s):R(de,s.showLav=!1,s),R(ne,t.mode=_,t)}window.$("#data-modal-extend-results").on("hidden.bs.modal",function(){R(B,i.showServerErrors=!0,i)});function a(){window.$("#data-modal-extend-results").modal(),R(B,i.showServerErrors=!1,i)}let u=!1;we(()=>{o(5,u=!0)});const d=()=>Fo(),f=()=>l("user model"),p=()=>l("full model"),c=()=>l("estimate"),b=()=>a();return n.$$.update=()=>{n.$$.dirty&33&&u&&o(1,r=t.mode)},[t,r,i,l,a,u,d,f,p,c,b]}class Io extends J{constructor(e){super(),X(this,e,No,Oo,Z,{})}}function To(){return typeof Shiny=="object"&&Shiny!==null}function xo(n){let e=0,o=Number.NEGATIVE_INFINITY,t=Number.NEGATIVE_INFINITY,i=n.nodes().length;n.nodes().forEach(l=>{let a=l.position();e+=a.x,a.x>o&&(o=a.x),a.y>t&&(t=a.y)});let s=e/i,r=t+100;return{x:s,y:r}}function Po(n,e){if(!n)throw new Error(e||"Assertion failed")}function Vo(n,e,o){let t,i,s;K(n,ne,d=>o(0,t=d)),K(n,B,d=>o(1,i=d)),K(n,Oe,d=>o(2,s=d));function r(d,f,p){let c,b,_;return f==="=~"?(c=Ne,b=d,_=p):f=="~1"?(b=1,_=d,c=Ne):(_=d,b=p,f==="~~"?d===p?c=st:c=Ie:c=Ne),{directed:c,source:b,target:_}}function l(d,f,p,c){let b=r(d,f,p);b.user=c;const $=Y(Q).edges(function(y){let S;if(b.source!=1?(S=y.source().getLabel()==b.source&&y.target().getLabel()==b.target,b.directed==Ie&&(S=S||y.source().getLabel()==b.target&&y.target().getLabel()==b.source)):S=y.source().isConstant()&&y.target().getLabel()==b.target,b.user!=null)if(b.user==1)S=S&&y.isUserAdded();else if(b.user==0)S=S&&y.isLavaanAdded();else throw new Error("User was neither 0 nor 1");return S});if($.length>1)throw new Error("Multiple edges found");return $}function a(d,f){R(B,i.meansModelled=!1,i),R(B,i.loadingMode=!0,i);let p=Y(Q);if(!f)p.edges().invalidate();else{let y=function(A,h,g){he(A,g,!1,h)};const $=Array.isArray(d.obs)?d.obs:[d.obs];let S={x:200,y:200};for(let A=0;A<$.length;A++)S.x=S.x+50,y(ue,$[A],S);const M=Array.isArray(d.latent)?d.latent:[d.latent];S={x:200,y:100};for(let A=0;A<M.length;A++)S.x=S.x+50,y(me,M[A]);d=d.parTable}const c=new Set;for(let $=0;$<d.lhs.length;$++)d.op[$]==="|"&&c.add(d.lhs[$]);let b=!1,_;for(let $=0;$<d.lhs.length;$++){if(d.op[$]=="~*~"||d.op[$]=="|")continue;let y=l(d.lhs[$],d.op[$],d.rhs[$],d.user[$]);if(!f&&d.user[$]==1)Po(y.length==1),y.validate(),y.isModifiedLavaan()&&y.isFixed()&&y.revertLavaanFix(),d.free[$]==0&&!y.isFixed()&&y.fixPara(d.ustart[$]).markModifiedLavaan();else{let S;if(f||y.length==0){const M=r(d.lhs[$],d.op[$],d.rhs[$]);if(f&&i.full&&d.user[$]==0)continue;let A;if(M.source!==1)A=p.nodes(function(g){return g.getLabel()==M.source})[0].id();else{if(R(B,i.meansModelled=!0,i),d.free[$]==0&&d.ustart[$]==0)continue;b||(_=he(Se,xo(p),!1),b=!0,p.nodes(function(v){return v.id()==_})[0].markAddedLavaan()),A=_}const h=p.nodes(function(g){return g.getLabel()==M.target})[0].id();S=p.add({groups:"edges",data:{source:A,target:h},classes:M.directed+" nolabel"}),d.label[$]!=""&&S.addLabelImport(d.label[$]),d.user[$]==1?S.markAddedUser():S.markAddedLavaan(),pe(A),pe(h)}else!f&&y.length==1&&(S=y);d.free[$]==0?d.ustart[$]!==0&&d.exo[$]!==1?c.has(S.target().getLabel())&&d.op[$]=="~~"?S.fixPara("Total Variance 1"):S.fixPara(d.ustart[$]):S.remove():S.setFree(),f||S.validate()}}f?(it("tree",!1),p.fit()):(p.edges().forEach($=>{$.isValid()||$.remove()}),p.getLavaanNodes().forEach($=>{$.connectedEdges().length==0&&($.remove(),p.nodes().forEach(y=>{pe(y.id())}))})),i.parsedModel||R(B,i.parsedModel=!0,i),p.getUserEdges().length>0&&R(B,i.modelEmpty=!1,i),R(B,i.loadingMode=!1,i)}function u(d,f){Y(Q);const p=d.op.some(c=>c.includes("~~"));for(let c=0;c<d.lhs.length;c++){if(d.op[c]=="~*~"||d.op[c]=="|")continue;let b=l(d.lhs[c],d.op[c],d.rhs[c]);if(b.length>0){let _={};b.isFree()?(_.est=d.est[c],_.p_value=d.pvalue[c],_.se=d.se[c],_.ciLow=d["ci.lower"][c],_.ciHigh=d["ci.upper"][c],_.est_std=f["est.std"][c],_.se_std=f.se[c],_.ciLow_std=f["ci.lower"][c],_.ciHigh_std=f["ci.upper"][c],b.addClass("hasEst")):p&&d.op[c]=="~~"&&(_.estFixed=d.est[c],_.estFixed_std=f["est.std"][c],b.addClass("hasEstFixed")),b.data("estimates",_)}}}return To()&&(Shiny.addCustomMessageHandler("dataInfo",function(d){gt(d.columns),R(B,i.columnNames=[...d.columns],i),R(B,i.ids=[...d.columns],i),R(B,i.loadedFileName=d.name,i),R(B,i.dataAvail=!0,i),oe(t.mode),d.showData&&window.$("#data-modal-2").modal()}),Shiny.addCustomMessageHandler("lav_failed",function(d){R(B,i.fitting=!1,i),d=="stopped"?be("danger","Fitting stopped by user"):be("danger","Fitting failed")}),Shiny.addCustomMessageHandler("fitting",function(d){R(B,i.fitting=!0,i)}),Shiny.addCustomMessageHandler("lav_warning_error",function(d){const f=d.type=="warning"?"warning":"error";be(d.type,`During ${d.origin} the following ${f} occurred: ${d.message}`)}),Shiny.addCustomMessageHandler("lav_error_fitting",function(d){R(B,i.fitting=!1,i),be(d.type,"During "+d.origin+" the following error occurred: "+d.message)}),Shiny.addCustomMessageHandler("usecache",function(d){be("info","Reusing cached results because model and data did not change since last fit")}),Shiny.addCustomMessageHandler("data_missing",function(d){be("danger","Could not fit model because no data is available")}),Shiny.addCustomMessageHandler("columnames",function(d){const f=Y(Q),p=i.columnNames[d.index];R(B,i.columnNames[d.index]=d.newcolname,i),f.getObservedNodes().forEach(c=>{c.getLabel()==p&&(c.setLabel(d.newcolname),oe(t.mode))}),gt(i.columnNames)}),Shiny.addCustomMessageHandler("missing_vars",function(d){var f=[].concat(d).join(", ");be("danger","Could not fit model because "+f+" are observed variables in the model but not present in the data.")}),Shiny.addCustomMessageHandler("lav_model",function(d){a(d,!1)}),Shiny.addCustomMessageHandler("imported_model",function(d){a(d,!0);let f=Y(Q);Array.isArray(d.ordered)||(d.ordered=[d.ordered]),d.ordered.forEach(p=>{f.nodes(function(c){return c.getLabel()==p})[0].makeOrdered()}),R(ne,t.fix_first=!1,t),be("warning","lavaangui only imports user edges. Your full model is very likely different than what you fitted in lavaan because of different options used. To display the model, as you fitted it in lavaan, use plot_interactive")}),Shiny.addCustomMessageHandler("lav_results",function(d){R(B,i.loadingMode=!0,i),R(Oe,s.lastFitLavFit=d.fitted_model,s),R(Oe,s.lastFitModel=d.model,s),R(Oe,s.lastFitData=d.data,s),R(B,i.fitting=!1,i),R(B,i.loadingMode=!1,i)}),Shiny.addCustomMessageHandler("lav_estimates",function(d){const f=d.normal,p=d.std;u(f,p)}),Shiny.addCustomMessageHandler("setToEstimate",function(d){R(ne,t.mode="estimate",t)})),[]}class Ro extends J{constructor(e){super(),X(this,e,Vo,null,Z,{})}}function zo(n){An(H);let e=Y(Q);var o={zoomFactor:.05,zoomDelay:45,minZoom:e.minZoom(),maxZoom:e.maxZoom(),fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,zoomOnly:!1,fitSelector:void 0,animateOnFit(){return!1},fitAnimationDuration:1e3};return we(()=>{e.panzoom(o),e.on("zoom",function(t){var i=e.zoom();i<o.minZoom?e.zoom(o.minZoom):i>o.maxZoom&&e.zoom(o.maxZoom)})}),[]}class Bo extends J{constructor(e){super(),X(this,e,zo,null,Z,{})}}function Go(n){let e,o;const t=n[1].default,i=Ze(t,n,n[0],null);return{c(){e=z("div"),i&&i.c(),k(e,"class","svelte-16igfw6")},m(s,r){O(s,e,r),i&&i.m(e,null),o=!0},p(s,[r]){i&&i.p&&(!o||r&1)&&Ke(i,t,s,s[0],o?et(t,s[0],r,null):Qe(s[0]),null)},i(s){o||(C(i,s),o=!0)},o(s){D(i,s),o=!1},d(s){s&&F(e),i&&i.d(s)}}}function Uo(n,e,o){let{$$slots:t={},$$scope:i}=e;return n.$$set=s=>{"$$scope"in s&&o(0,i=s.$$scope)},[i,t]}class qo extends J{constructor(e){super(),X(this,e,Uo,Go,Z,{})}}function jo(n,e,o){let t,i;K(n,Le,r=>o(0,t=r)),K(n,B,r=>o(1,i=r));let s=Y(Q);return setInterval(()=>{i.drawing=="none"&&s&&(s.autoungrabify(!1),s.nodes().grabify(),R(B,i.undoEmpty=t.isUndoStackEmpty(),i),R(B,i.redoEmpty=t.isRedoStackEmpty(),i))},1e3),window.addEventListener("beforeunload",r=>{r.preventDefault(),r.returnValue=""}),we(()=>{Shiny.unbindAll(),Shiny.bindAll()}),[]}class Ho extends J{constructor(e){super(),X(this,e,jo,null,Z,{})}}function Zt(n){let e,o,t,i,s,r;return{c(){e=z("div"),o=z("button"),o.innerHTML='<span class="glyphicon glyphicon-refresh spinning svelte-16d2v0h"></span> Fitting...',t=x(),i=z("button"),i.textContent="Cancel",k(o,"class","btn btn-lg btn-secondary fixed-width disabled-button svelte-16d2v0h"),k(o,"id","fitting-button"),o.disabled=!0,k(i,"class","btn btn-lg btn-default fixed-width svelte-16d2v0h"),k(e,"class","center-screen svelte-16d2v0h")},m(l,a){O(l,e,a),P(e,o),P(e,t),P(e,i),s||(r=ie(i,"click",Yo),s=!0)},p:re,d(l){l&&F(e),s=!1,r()}}}function Wo(n){let e,o=n[0].fitting&&Zt();return{c(){o&&o.c(),e=Ge()},m(t,i){o&&o.m(t,i),O(t,e,i)},p(t,[i]){t[0].fitting?o?o.p(t,i):(o=Zt(),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null)},i:re,o:re,d(t){o&&o.d(t),t&&F(e)}}}function Yo(){Shiny.setInputValue("run-abort",Math.random())}function Jo(n,e,o){let t;return K(n,B,i=>o(0,t=i)),[t]}class Xo extends J{constructor(e){super(),X(this,e,Jo,Wo,Z,{})}}function Kt(n){let e,o,t=n[2][n[0].type].label+"",i,s,r=n[0].message+"",l,a;return{c(){e=z("div"),o=z("strong"),i=_e(t),s=x(),l=_e(r),k(e,"class",a=Ve(n[2][n[0].type].class+(n[1]?" fadeOut":""))+" svelte-1wv9zbn")},m(u,d){O(u,e,d),P(e,o),P(o,i),P(e,s),P(e,l)},p(u,d){d&1&&t!==(t=u[2][u[0].type].label+"")&&Re(i,t),d&1&&r!==(r=u[0].message+"")&&Re(l,r),d&3&&a!==(a=Ve(u[2][u[0].type].class+(u[1]?" fadeOut":""))+" svelte-1wv9zbn")&&k(e,"class",a)},d(u){u&&F(e)}}}function Zo(n){let e,o=n[0].message!==""&&Kt(n);return{c(){o&&o.c(),e=Ge()},m(t,i){o&&o.m(t,i),O(t,e,i)},p(t,[i]){t[0].message!==""?o?o.p(t,i):(o=Kt(t),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null)},i:re,o:re,d(t){o&&o.d(t),t&&F(e)}}}function Ko(n,e,o){let t;K(n,rn,l=>o(0,t=l));let i={success:{class:"alert-success",label:"Success!"},info:{class:"alert-info",label:"Info!"},warning:{class:"alert-warning",label:"Warning!"},danger:{class:"alert-danger",label:"Danger!"}},s=!1,r;return n.$$.update=()=>{n.$$.dirty&9&&t.message!==""&&(o(1,s=!1),clearTimeout(r),o(3,r=setTimeout(()=>{o(1,s=!0)},1e4)))},[t,s,i,r]}class Qo extends J{constructor(e){super(),X(this,e,Ko,Zo,Z,{})}}function es(n,e){const o={};return n.forEach((t,i)=>{o[t]=e[i]}),o}function ts(n,e){const o=Object.keys(e);let t={};return o.forEach(i=>{n.hasOwnProperty(i)&&(t[i]=n[i])}),t}function ns(n,e,o){let t,i,s;K(n,Le,l=>o(0,t=l)),K(n,B,l=>o(1,i=l)),K(n,ne,l=>o(2,s=l));let r=Y(Q);return we(()=>{H.use(On);const l={isDebug:!0};let a=r.undoRedo(l);Le.set(a),a.action("style",function(u){let d={};const f=Object.keys(u.style);return u.eles.forEach(function(p){let c=[];f.forEach(b=>{c.push(p.data(b)||p.style(b)),p.data(b,u.style[b])}),d[p.id()]=es(f,c)}),{eles:u.eles,style:d}},function(u){const d=ts(u.eles[0].style(),u.style[Object.keys(u.style)[0]]);return Object.keys(u.style).forEach(function(f){var p=r.getElementById(f);for(var c in u.style[f])p.data(c,u.style[f][c])}),{eles:u.eles,style:d}}),r.on("afterUndo",function(u,d){d!=="style"&&d!=="move"&&oe(s.mode)}),r.on("afterRedo",function(u,d){d!=="style"&&d!=="move"&&oe(s.mode)}),document.addEventListener("keydown",function(u){(u.ctrlKey||u.metaKey)&&u.target.nodeName==="BODY"&&u.which===90&&!i.fitting&&(u.preventDefault(),u.stopPropagation(),u.shiftKey?t.redo():t.undo())}),document.addEventListener("keyup",function(u){u.metaKey&&u.target.nodeName==="BODY"&&u.which===90&&(u.preventDefault(),u.stopPropagation())})}),[]}class is extends J{constructor(e){super(),X(this,e,ns,null,Z,{})}}function os(){return typeof Shiny=="object"&&Shiny!==null}function ss(n,e,o){let t;return K(n,B,i=>o(0,t=i)),os()?Shiny.addCustomMessageHandler("full",function(i){R(B,t.full=i,t),R(B,t.ready=!0,t)}):(R(B,t.full=!0,t),R(B,t.ready=!0,t)),[]}class rs extends J{constructor(e){super(),X(this,e,ss,null,Z,{})}}function ls(n,e,o){let t;K(n,de,s=>o(1,t=s));let i=!1;return we(()=>{o(0,i=!0)}),n.$$.update=()=>{n.$$.dirty&3&&i&&Oi(t.showVar,t.showLav,t.showMean),n.$$.dirty&3&&i&&Ai(t.view,t.std,t.number_digits)},[i,t]}class as extends J{constructor(e){super(),X(this,e,ls,null,Z,{})}}function ds(n){let e,o,t,i;const s=n[6].default,r=Ze(s,n,n[5],null);return{c(){e=z("section"),r&&r.c(),$e(e,"left",n[0]+"px"),$e(e,"top",n[1]+"px"),k(e,"class","draggable svelte-13fkbj1")},m(l,a){O(l,e,a),r&&r.m(e,null),o=!0,t||(i=[ie(window,"mouseup",n[4]),ie(window,"mousemove",n[3]),ie(e,"mousedown",n[2])],t=!0)},p(l,[a]){r&&r.p&&(!o||a&32)&&Ke(r,s,l,l[5],o?et(s,l[5],a,null):Qe(l[5]),null),(!o||a&1)&&$e(e,"left",l[0]+"px"),(!o||a&2)&&$e(e,"top",l[1]+"px")},i(l){o||(C(r,l),o=!0)},o(l){D(r,l),o=!1},d(l){l&&F(e),r&&r.d(l),t=!1,Xe(i)}}}function us(n,e,o){let{$$slots:t={},$$scope:i}=e,{left:s=100}=e,{top:r=100}=e,l=!1,a=0,u=0;function d(c){l=!0,a=c.clientX-s,u=c.clientY-r}function f(c){l&&(o(0,s=c.clientX-a),o(1,r=c.clientY-u))}function p(){l=!1}return n.$$set=c=>{"left"in c&&o(0,s=c.left),"top"in c&&o(1,r=c.top),"$$scope"in c&&o(5,i=c.$$scope)},[s,r,d,f,p,i,t]}class cs extends J{constructor(e){super(),X(this,e,us,ds,Z,{left:0,top:1})}}function fs(n){let e,o,t;const i=n[0].default,s=Ze(i,n,n[1],null);return{c(){e=z("ul"),o=z("div"),s&&s.c(),$e(o,"display","flex"),$e(o,"flex-direction","column"),k(e,"class","nav navbar-nav navbar-left"),$e(e,"border","1px solid black"),$e(e,"z-index","9999")},m(r,l){O(r,e,l),P(e,o),s&&s.m(o,null),t=!0},p(r,l){s&&s.p&&(!t||l&2)&&Ke(s,i,r,r[1],t?et(i,r[1],l,null):Qe(r[1]),null)},i(r){t||(C(s,r),t=!0)},o(r){D(s,r),t=!1},d(r){r&&F(e),s&&s.d(r)}}}function ms(n){let e,o;return e=new cs({props:{$$slots:{default:[fs]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},p(t,[i]){const s={};i&2&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(C(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}function gs(n,e,o){let{$$slots:t={},$$scope:i}=e;return n.$$set=s=>{"$$scope"in s&&o(1,i=s.$$scope)},[t,i]}class ps extends J{constructor(e){super(),X(this,e,gs,ms,Z,{})}}function hs(n,e){return bootbox.alert({title:"<span style='color: red;'>Error</span>",message:`A ${e} error occurred:<br> <span style='color: red;'>${n}</span>.<br><br>Please consider reporting this issue by sending an email to <a href="mailto:j.d.karch@fsw.leidenuniv.nl">j.d.karch@fsw.leidenuniv.nl</a>.`,centerVertical:!0}),!0}function bs(){return typeof Shiny=="object"&&Shiny!==null}function _s(n){return bs()&&Shiny.addCustomMessageHandler("serverError",function(e){Y(B).showServerErrors&&hs(e.msg,"Server")}),[]}class $s extends J{constructor(e){super(),X(this,e,_s,null,Z,{})}}function vs(n,e,o){let t;return K(n,ne,i=>o(0,t=i)),n.$$.update=()=>{n.$$.dirty&1&&oe(t.mode)},[t]}class ys extends J{constructor(e){super(),X(this,e,vs,null,Z,{})}}function ws(n){H.use(Fn);let e=Y(Q);return we(()=>{e.automove({nodesMatching:".automove-viewport",reposition:"viewport"})}),[]}class ks extends J{constructor(e){super(),X(this,e,ws,null,Z,{})}}function Es(n){Nn(H,window.$,sn);let e=Y(Q);return we(()=>{e.nodeEditing({resizeToContentCueImage:"",undoable:!0})}),[]}class Cs extends J{constructor(e){super(),X(this,e,Es,null,Z,{})}}function Ss(n){return H("collection","init",function(){return this.addClass(ke).addClass(We).addClass(ge),this}),H("collection","free",function(){return this.hasClass(ke)}),H("collection","addLabel",function(e){return this.addLabelImport(e).removeClass(xe),this}),H("collection","addLabelImport",function(e){return this.data("label",e).addClass(ze).removeClass(We),this}),H("collection","removeLabel",function(){return this.removeClass(ze).addClass(We).data("label",null),this}),H("collection","setLabel",function(e){return this.data("label",e),this}),H("collection","getLabel",function(){return this.data("label")}),H("collection","fixPara",function(e){return this.data("value",e).removeClass(ke).removeClass(De).removeClass(kt).addClass(Ee),this}),H("collection","freePara",function(){return this.removeClass(Ee).removeClass(De).removeClass(xe).addClass(ke),this}),H("collection","setFree",function(){return this.removeClass(Ee).removeClass(De).addClass(ke),this}),H("collection","forceFreePara",function(){return this.removeClass(ke).removeClass(Ee).removeClass(xe).addClass(De),this}),H("collection","revert",function(){const e=this.source().id(),o=this.target().id();return this.move({source:o,target:e}),this}),H("collection","setUndirected",function(){return this.removeClass(Ne).addClass(Ie),this}),H("collection","setDirected",function(){return this.removeClass(Ie).addClass(Ne),this}),H("collection","isUndirected",function(){return this.hasClass(Ie)}),H("collection","isDirected",function(){return this.hasClass(Ne)}),H("collection","makeLoop",function(){return this.addClass(st),this}),H("collection","myIsLoop",function(){return this.hasClass(st)}),H("collection","makeMeanEdge",function(){return this.data("isMean","1"),this}),H("collection","isMean",function(){return this.data("isMean")==="1"||this.isConstant()}),H("collection","makeOtherEdge",function(){return this.data("isMean","0"),this}),H("collection","isFixed",function(){return this.hasClass(Ee)}),H("collection","isFree",function(){return this.hasClass(ke)||this.hasClass(De)}),H("collection","isForceFree",function(){return this.hasClass(De)}),H("collection","hasLabel",function(){return this.hasClass(ze)}),H("collection","isModifiedLavaan",function(){return this.hasClass(xe)}),H("collection","markModifiedLavaan",function(){return this.addClass(xe),this}),H("collection","markAddedLavaan",function(){return this.addClass(Ae).removeClass(ge),this}),H("collection","markAddedUser",function(){return this.removeClass(Ae).addClass(ge),this}),H("collection","isUserAdded",function(){return this.hasClass(ge)}),H("collection","isLavaanAdded",function(){return this.hasClass(Ae)}),H("collection","getValue",function(){return this.data("value")}),H("collection","setValue",function(e){this.data("value",e)}),H("collection","invalidate",function(){return this.removeClass(ut),this}),H("collection","validate",function(){return this.addClass(ut),this}),H("collection","isValid",function(){return this.hasClass(ut)}),H("collection","revertLavaanFix",function(){this.freePara().removeClass(xe)}),H("collection","removeEstimates",function(){return this.removeClass(kt).removeClass(Pn),this.removeData("estimates"),this}),H("collection","link",function(){return this.addClass(Be),this}),H("collection","unlink",function(){return this.removeClass(Be),this}),H("collection","isLinked",function(){return this.hasClass(Be)}),H("collection","isLatent",function(){return this.hasClass(me)}),H("collection","makeLatent",function(){return this.removeClass(ue).addClass(me).removeClass(Be),this}),H("collection","makeObserved",function(){return this.addClass(ue).removeClass(me),this}),H("collection","makeOrdered",function(){return this.removeClass(Je).addClass(Ye),this}),H("collection","isOrdered",function(){return this.hasClass(Ye)}),H("collection","makeContinous",function(){return this.addClass(Je).removeClass(Ye),this}),H("collection","isConstant",function(){return this.hasClass(Se)}),H("collection","isObserved",function(){return this.hasClass(ue)}),H("core","getLavaanNodes",function(){return this.nodes(`.${Ae}`)}),H("core","getLavaanEdges",function(){return this.edges(`.${Ae}`)}),H("core","getObservedNodes",function(){return this.nodes(`.${ue}`)}),H("core","getUserEdges",function(){return this.edges(`.${ge}`)}),H("core","getLavaanModifiedEdges",function(){return this.edges(`.${xe}`)}),H("core","getLatentNodes",function(){return this.nodes(function(e){return e.hasClass(me)})}),[]}class Ls extends J{constructor(e){super(),X(this,e,Ss,null,Z,{})}}function Ms(n){In(H,window.$,sn);let e=Y(Q);return we(()=>{const o="Bend",t="Kink";e.edgeEditing({undoable:!0,bendRemovalSensitivity:16,enableMultipleAnchorRemovalOption:!0,initAnchorsAutomatically:!1,useTrailingDividersAfterContextMenuOptions:!1,enableCreateAnchorOnDrag:!0,anchorShapeSizeFactor:4,addBendMenuItemTitle:`Add ${t} Point`,removeBendMenuItemTitle:`Remove ${t} Point`,removeAllBendMenuItemTitle:`Remove All${t} Points`,addControlMenuItemTitle:`Add ${o} Point`,removeControlMenuItemTitle:`Remove ${o} Point`,removeAllControlMenuItemTitle:`Remove All ${o} Points`}),e.style().update()}),[]}class Ds extends J{constructor(e){super(),X(this,e,Ms,null,Z,{})}}function Qt(n){let e,o,t,i,s,r,l,a,u,d,f,p,c,b,_,$,y=n[0].full&&en();o=new Un({});const S=[Os,As],M=[];function A(g,v){return g[0].full?0:1}s=A(n),r=M[s]=S[s](n),a=new qo({props:{$$slots:{default:[Ns]},$$scope:{ctx:n}}});let h=n[0].full&&nn();return f=new Eo({}),c=new Ro({}),_=new Ho({}),{c(){y&&y.c(),e=x(),G(o.$$.fragment),t=x(),i=z("div"),r.c(),l=x(),G(a.$$.fragment),u=x(),h&&h.c(),d=x(),G(f.$$.fragment),p=x(),G(c.$$.fragment),b=x(),G(_.$$.fragment),k(i,"class","svelte-15ghafl")},m(g,v){y&&y.m(g,v),O(g,e,v),U(o,g,v),O(g,t,v),O(g,i,v),M[s].m(i,null),P(i,l),U(a,i,null),P(i,u),h&&h.m(i,null),O(g,d,v),U(f,g,v),O(g,p,v),U(c,g,v),O(g,b,v),U(_,g,v),$=!0},p(g,v){g[0].full?y?v&1&&C(y,1):(y=en(),y.c(),C(y,1),y.m(e.parentNode,e)):y&&(ve(),D(y,1,1,()=>{y=null}),ye());let I=s;s=A(g),s!==I&&(ve(),D(M[I],1,1,()=>{M[I]=null}),ye(),r=M[s],r||(r=M[s]=S[s](g),r.c()),C(r,1),r.m(i,l));const j={};v&3&&(j.$$scope={dirty:v,ctx:g}),a.$set(j),g[0].full?h?v&1&&C(h,1):(h=nn(),h.c(),C(h,1),h.m(i,null)):h&&(ve(),D(h,1,1,()=>{h=null}),ye())},i(g){$||(C(y),C(o.$$.fragment,g),C(r),C(a.$$.fragment,g),C(h),C(f.$$.fragment,g),C(c.$$.fragment,g),C(_.$$.fragment,g),$=!0)},o(g){D(y),D(o.$$.fragment,g),D(r),D(a.$$.fragment,g),D(h),D(f.$$.fragment,g),D(c.$$.fragment,g),D(_.$$.fragment,g),$=!1},d(g){y&&y.d(g),g&&F(e),q(o,g),g&&F(t),g&&F(i),M[s].d(),q(a),h&&h.d(),g&&F(d),q(f,g),g&&F(p),q(c,g),g&&F(b),q(_,g)}}}function en(n){let e,o;return e=new Xo({}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},i(t){o||(C(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}function As(n){let e,o;return e=new ps({props:{$$slots:{default:[Fs]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},i(t){o||(C(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}function Os(n){let e,o;return e=new vo({}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},i(t){o||(C(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}function Fs(n){let e,o,t,i,s,r,l,a;return e=new cn({props:{full:!1}}),t=new mn({props:{minimal:!0}}),s=new hn({props:{minimal:!0}}),l=new bn({props:{minimal:!0}}),{c(){G(e.$$.fragment),o=x(),G(t.$$.fragment),i=x(),G(s.$$.fragment),r=x(),G(l.$$.fragment)},m(u,d){U(e,u,d),O(u,o,d),U(t,u,d),O(u,i,d),U(s,u,d),O(u,r,d),U(l,u,d),a=!0},p:re,i(u){a||(C(e.$$.fragment,u),C(t.$$.fragment,u),C(s.$$.fragment,u),C(l.$$.fragment,u),a=!0)},o(u){D(e.$$.fragment,u),D(t.$$.fragment,u),D(s.$$.fragment,u),D(l.$$.fragment,u),a=!1},d(u){q(e,u),u&&F(o),q(t,u),u&&F(i),q(s,u),u&&F(r),q(l,u)}}}function tn(n){let e,o;return e=new wo({}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},i(t){o||(C(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}function Ns(n){let e,o,t,i,s,r,l,a,u,d,f,p,c,b,_,$,y,S,M,A,h,g,v,I;e=new ii({}),t=new is({}),s=new Ls({}),l=new xn({}),u=new ks({}),f=new Cs({}),c=new Bo({}),_=new Mo({}),y=new si({}),M=new as({}),h=new Ds({});let j=n[0].full&&tn();return{c(){G(e.$$.fragment),o=x(),G(t.$$.fragment),i=x(),G(s.$$.fragment),r=x(),G(l.$$.fragment),a=x(),G(u.$$.fragment),d=x(),G(f.$$.fragment),p=x(),G(c.$$.fragment),b=x(),G(_.$$.fragment),$=x(),G(y.$$.fragment),S=x(),G(M.$$.fragment),A=x(),G(h.$$.fragment),g=x(),j&&j.c(),v=Ge()},m(m,E){U(e,m,E),O(m,o,E),U(t,m,E),O(m,i,E),U(s,m,E),O(m,r,E),U(l,m,E),O(m,a,E),U(u,m,E),O(m,d,E),U(f,m,E),O(m,p,E),U(c,m,E),O(m,b,E),U(_,m,E),O(m,$,E),U(y,m,E),O(m,S,E),U(M,m,E),O(m,A,E),U(h,m,E),O(m,g,E),j&&j.m(m,E),O(m,v,E),I=!0},p(m,E){m[0].full?j?E&1&&C(j,1):(j=tn(),j.c(),C(j,1),j.m(v.parentNode,v)):j&&(ve(),D(j,1,1,()=>{j=null}),ye())},i(m){I||(C(e.$$.fragment,m),C(t.$$.fragment,m),C(s.$$.fragment,m),C(l.$$.fragment,m),C(u.$$.fragment,m),C(f.$$.fragment,m),C(c.$$.fragment,m),C(_.$$.fragment,m),C(y.$$.fragment,m),C(M.$$.fragment,m),C(h.$$.fragment,m),C(j),I=!0)},o(m){D(e.$$.fragment,m),D(t.$$.fragment,m),D(s.$$.fragment,m),D(l.$$.fragment,m),D(u.$$.fragment,m),D(f.$$.fragment,m),D(c.$$.fragment,m),D(_.$$.fragment,m),D(y.$$.fragment,m),D(M.$$.fragment,m),D(h.$$.fragment,m),D(j),I=!1},d(m){q(e,m),m&&F(o),q(t,m),m&&F(i),q(s,m),m&&F(r),q(l,m),m&&F(a),q(u,m),m&&F(d),q(f,m),m&&F(p),q(c,m),m&&F(b),q(_,m),m&&F($),q(y,m),m&&F(S),q(M,m),m&&F(A),q(h,m),m&&F(g),j&&j.d(m),m&&F(v)}}}function nn(n){let e,o,t,i,s,r;return e=new Qo({}),t=new Io({}),s=new ys({}),{c(){G(e.$$.fragment),o=x(),G(t.$$.fragment),i=x(),G(s.$$.fragment)},m(l,a){U(e,l,a),O(l,o,a),U(t,l,a),O(l,i,a),U(s,l,a),r=!0},i(l){r||(C(e.$$.fragment,l),C(t.$$.fragment,l),C(s.$$.fragment,l),r=!0)},o(l){D(e.$$.fragment,l),D(t.$$.fragment,l),D(s.$$.fragment,l),r=!1},d(l){q(e,l),l&&F(o),q(t,l),l&&F(i),q(s,l)}}}function Is(n){let e,o,t,i,s,r,l;e=new rs({});let a=n[0].ready&&Qt(n);return i=new Ao({}),r=new $s({}),{c(){G(e.$$.fragment),o=x(),a&&a.c(),t=x(),G(i.$$.fragment),s=x(),G(r.$$.fragment)},m(u,d){U(e,u,d),O(u,o,d),a&&a.m(u,d),O(u,t,d),U(i,u,d),O(u,s,d),U(r,u,d),l=!0},p(u,[d]){u[0].ready?a?(a.p(u,d),d&1&&C(a,1)):(a=Qt(u),a.c(),C(a,1),a.m(t.parentNode,t)):a&&(ve(),D(a,1,1,()=>{a=null}),ye())},i(u){l||(C(e.$$.fragment,u),C(a),C(i.$$.fragment,u),C(r.$$.fragment,u),l=!0)},o(u){D(e.$$.fragment,u),D(a),D(i.$$.fragment,u),D(r.$$.fragment,u),l=!1},d(u){q(e,u),u&&F(o),a&&a.d(u),u&&F(t),q(i,u),u&&F(s),q(r,u)}}}function Ts(n,e,o){let t;return K(n,B,i=>o(0,t=i)),[t]}class xs extends J{constructor(e){super(),X(this,e,Ts,Is,Z,{})}}new xs({target:document.getElementById("app")});
