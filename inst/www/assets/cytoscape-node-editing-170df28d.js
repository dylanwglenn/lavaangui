import{g as Ft}from"./core-js-bbf708ea.js";var Ot={exports:{}};(function(Dt,_t){(function(yt,st){Dt.exports=st()})(self,function(){return(()=>{var yt={265:(_,j,at)=>{var G,Ct,rt,xt,dt,Kt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y};Ct=Math.max,rt=Date.now||function(){return new Date().getTime()},xt=function(y,f,l){var B,m,R,h,s,g,L,k,i,v=0,S=!1,E=!0;if(typeof y!="function")throw new TypeError("Expected a function");if(f=f<0?0:+f||0,l===!0){var p=!0;E=!1}else i=(k=l)===void 0?"undefined":Kt(k),!k||i!="object"&&i!="function"||(p=!!l.leading,S="maxWait"in l&&Ct(+l.maxWait||0,f),E="trailing"in l?!!l.trailing:E);function N(C,x){x&&clearTimeout(x),m=g=L=void 0,C&&(v=rt(),R=y.apply(s,B),g||m||(B=s=void 0))}function Z(){var C=f-(rt()-h);C<=0||C>f?N(L,m):g=setTimeout(Z,C)}function A(){N(E,g)}function $(){if(B=arguments,h=rt(),s=this,L=E&&(g||!p),S===!1)var C=p&&!g;else{m||p||(v=h);var x=S-(h-v),H=x<=0||x>S;H?(m&&(m=clearTimeout(m)),v=h,R=y.apply(s,B)):m||(m=setTimeout(A,x))}return H&&g?g=clearTimeout(g):g||f===S||(g=setTimeout(Z,f)),C&&(H=!0,R=y.apply(s,B)),!H||g||m||(B=s=void 0),R}return $.cancel=function(){g&&clearTimeout(g),m&&clearTimeout(m),v=0,m=g=L=void 0},$},dt=function(y,f,l){if(y&&f&&l){var B=0;y("core","nodeEditing",function(R){var h,s=this;if(R==="get")return m(s,"api");var g,L,k=1.1,i=f.extend(!0,{padding:5,undoable:!0,grappleSize:8,grappleColor:"green",inactiveGrappleStroke:"inside 1px blue",boundingRectangleLineDash:[4,8],boundingRectangleLineColor:"red",boundingRectangleLineWidth:1.5,zIndex:999,moveSelectedNodesOnKeyEvents:function(){return!0},minWidth:function(t){return t.data("resizeMinWidth")||15},minHeight:function(t){return t.data("resizeMinHeight")||15},getCompoundMinWidth:function(t){return t.css("min-width")},getCompoundMinHeight:function(t){return t.css("min-height")},getCompoundMinWidthBiasRight:function(t){return t.css("min-width-bias-right")},getCompoundMinWidthBiasLeft:function(t){return t.css("min-width-bias-left")},getCompoundMinHeightBiasTop:function(t){return t.css("min-height-bias-top")},getCompoundMinHeightBiasBottom:function(t){return t.css("min-height-bias-bottom")},setWidth:function(t,e){t.css("width",e)},setHeight:function(t,e){t.css("height",e)},setCompoundMinWidth:function(t,e){t.css("min-width",e)},setCompoundMinHeight:function(t,e){t.css("min-height",e)},setCompoundMinWidthBiasLeft:function(t,e){t.css("min-width-bias-left",e)},setCompoundMinWidthBiasRight:function(t,e){t.css("min-width-bias-right",e)},setCompoundMinHeightBiasTop:function(t,e){t.css("min-height-bias-top",e)},setCompoundMinHeightBiasBottom:function(t,e){t.css("min-height-bias-bottom",e)},isFixedAspectRatioResizeMode:function(t){return t.is(".fixedAspectRatioResizeMode")},isNoResizeMode:function(t){return t.is(".noResizeMode, :parent")},isNoControlsMode:function(t){return t.is(".noControlsMode")},cursors:{default:"default",inactive:"not-allowed",nw:"nw-resize",n:"n-resize",ne:"ne-resize",e:"e-resize",se:"se-resize",s:"s-resize",sw:"sw-resize",w:"w-resize"},resizeToContentCueEnabled:function(t){return!0},resizeToContentFunction:void 0,resizeToContentCuePosition:"bottom-right",resizeToContentCueImage:"/node_modules/cytoscape-node-editing/resizeCue.svg",enableMovementWithArrowKeys:!0,autoRemoveResizeToContentCue:!1},R),v=f(s.container()),S="cy-node-edge-editing-stage"+B;B++;var E,p,N=f('<div id="'+S+'"></div>');v.find("#"+S).length<1&&v.append(N),(E=l.stages.length<B?new l.Stage({id:"node-edge-editing-stage",container:S,width:v.width(),height:v.height()}):l.stages[B-1]).getChildren().length<1?(p=new l.Layer,E.add(p)):p=E.getChildren()[0];var Z=xt(function(){N.attr("height",v.height()).attr("width",v.width()).css({position:"absolute",top:0,left:0,"z-index":i.zIndex}),setTimeout(function(){var t=N.offset(),e=v.offset();N.css({top:-(t.top-e.top),left:-(t.left-e.left)}),p.getStage().setWidth(v.width()),p.getStage().setHeight(v.height())},0)},250);Z(),f(window).on("resize",Z);var A=function(t){this.parent=t,this.boundingRectangle=new $(t);var e=["topleft","topcenter","topright","centerright","bottomright","bottomcenter","bottomleft","centerleft"];this.grapples=[];for(var n=0;n<e.length;n++){var o=e[n],a=!0;(i.isNoResizeMode(t)||i.isFixedAspectRatioResizeMode(t)&&o.indexOf("center")>=0)&&(a=!1),this.grapples.push(new C(t,this,o,a))}!i.resizeToContentCueEnabled(t)||i.isNoResizeMode(t)||i.autoRemoveResizeToContentCue&&(!i.autoRemoveResizeToContentCue||wt(t))||(this.resizeCue=new x(t,this)),p.draw()};A.prototype.update=function(){this.boundingRectangle.update();for(var t=0;t<this.grapples.length;t++)this.grapples[t].update();var e=this.boundingRectangle.parent,n=i.resizeToContentCueEnabled(e)&&!i.isNoResizeMode(e)&&(!i.autoRemoveResizeToContentCue||i.autoRemoveResizeToContentCue&&!wt(e));this.resizeCue&&n?this.resizeCue.update():this.resizeCue&&!n?(this.resizeCue.unbindEvents(),this.resizeCue.shape.destroy(),delete this.resizeCue):!this.resizeCue&&n&&(this.resizeCue=new x(e,this)),p.draw()},A.prototype.remove=function(){this.boundingRectangle.shape.destroy(),delete this.boundingRectangle;for(var t=0;t<this.grapples.length;t++)this.grapples[t].unbindAllEvents(),this.grapples[t].shape.destroy();delete this.grapples,this.resizeCue&&(this.resizeCue.unbindEvents(),this.resizeCue.shape.destroy(),delete this.resizeCue),p.draw()};var $=function(t){this.parent=t,this.shape=null;var e=t.renderedPosition(),n=t.renderedOuterWidth()+M(),o=t.renderedOuterHeight()+M(),a={x:e.x-n/2,y:e.y-o/2},d=new l.Rect({x:a.x,y:a.y,width:n,height:o,stroke:i.boundingRectangleLineColor,strokeWidth:i.boundingRectangleLineWidth,dash:i.boundingRectangleLineDash});p.add(d),this.shape=d};$.prototype.update=function(){var t=this.parent.renderedPosition(),e=this.parent.renderedOuterWidth()+M(),n=this.parent.renderedOuterHeight()+M(),o={x:t.x-e/2,y:t.y-n/2};this.shape.x(o.x),this.shape.y(o.y),this.shape.width(e),this.shape.height(n)};var C=function(t,e,n,o){this.parent=t,this.location=n,this.isActive=o,this.resizeControls=e;var a=t.renderedPosition(),d=t.renderedOuterWidth()+M(),u=t.renderedOuterHeight()+M(),r={x:a.x-d/2,y:a.y-u/2},c=zt(t);if(this.shape=new l.Rect({width:c,height:c}),this.isActive)this.shape.fill(i.grappleColor);else{var K=i.inactiveGrappleStroke.split(" "),tt=K[2],X=parseInt(K[1].replace(/px/,""));this.shape.stroke(tt),this.shape.strokeWidth(X)}this.updateShapePosition(r,d,u,c),p.add(this.shape),this.isActive?this.bindActiveEvents():this.bindInactiveEvents()};C.prototype.bindInactiveEvents=function(){var t=function e(n){s.boxSelectionEnabled(!0),s.panningEnabled(!0),s.autounselectify(!1),s.autoungrabify(!1),p.getStage().off("contentTouchend contentMouseup",e)};this.shape.on("mouseenter",function(e){e.target.getStage().container().style.cursor=i.cursors.inactive}),this.shape.on("mouseleave",function(e){e.target.getStage()!=null&&(e.target.getStage().container().style.cursor=i.cursors.default)}),this.shape.on("touchstart mousedown",function(e){s.boxSelectionEnabled(!1),s.panningEnabled(!1),s.autounselectify(!0),s.autoungrabify(!0),p.getStage().on("contentTouchend contentMouseup",t)})},C.prototype.bindActiveEvents=function(){var t,e,n,o,a,d,u=this,r=u.parent,c={},K={topleft:"nw",topcenter:"n",topright:"ne",centerright:"e",bottomright:"se",bottomcenter:"s",bottomleft:"sw",centerleft:"w"},tt=function w(q){s.style().selector("core").style("active-bg-opacity",a).update(),u.shape.getStage().container().style.cursor=i.cursors.default,s.boxSelectionEnabled(!0),s.panningEnabled(!0),setTimeout(function(){s.autounselectify(!1),s.autoungrabify(!1)},0),s.trigger("nodeediting.resizeend",[u.location,u.parent]),p.getStage().off("contentTouchend contentMouseup",w),p.getStage().off("contentTouchmove contentMousemove",X),u.shape.on("mouseenter",et),u.shape.on("mouseleave",it)},X=function(w){var q=u.shape.getStage().getPointerPosition(),P=q.x,Et=q.y,W=(Et-c.y)/s.zoom(),T=(P-c.x)/s.zoom(),z=u.location;s.batch(function(){var ht=i.isFixedAspectRatioResizeMode(r);if(!(ht&&z.indexOf("center")>=0||i.isNoResizeMode(r))){if(ht){var kt=o(r)/n(r),Lt=z=="topright"||z=="bottomleft";T>W?W=T*kt*(Lt?-1:1):T=W/kt*(Lt?-1:1)}var J=r.position(),ft=J.x,lt=J.y,ut=!1,pt=!1,V=0,nt=0,Y=0,ot=0;if(r.isParent()){var F=n(r)-d.w,I=o(r)-d.h;F>0&&(nt=F-(V=F*parseFloat(i.getCompoundMinWidthBiasLeft(r))/(parseFloat(i.getCompoundMinWidthBiasLeft(r))+parseFloat(i.getCompoundMinWidthBiasRight(r))))),I>0&&(ot=I-(Y=I*parseFloat(i.getCompoundMinHeightBiasTop(r))/(parseFloat(i.getCompoundMinHeightBiasTop(r))+parseFloat(i.getCompoundMinHeightBiasBottom(r)))))}if(z.startsWith("top")){if(o(r)-W>i.minHeight(r)&&(!r.isParent()||Y-W>=0))lt=J.y+W/2,pt=!0,e(r,o(r)-W);else if(ht)return}else if(z.startsWith("bottom")){if(o(r)+W>i.minHeight(r)&&(!r.isParent()||ot+W>=0))lt=J.y+W/2,pt=!0,e(r,o(r)+W);else if(ht)return}if(z.endsWith("left")&&n(r)-T>i.minWidth(r)&&(!r.isParent()||V-T>=0)?(ft=J.x+T/2,ut=!0,t(r,n(r)-T)):z.endsWith("right")&&n(r)+T>i.minWidth(r)&&(!r.isParent()||nt+T>=0)&&(ft=J.x+T/2,ut=!0,t(r,n(r)+T)),r.isParent()||!ut&&!pt||r.position({x:ft,y:lt}),r.isParent()){if(F=n(r)-d.w,I=o(r)-d.h,ut&&F>0){z.endsWith("right")?nt=F-V:z.endsWith("left")&&(V=F-nt);var mt=V/(V+nt)*100,Nt=100-mt;if(mt<0||Nt<0)return;i.setCompoundMinWidthBiasLeft(r,mt+"%"),i.setCompoundMinWidthBiasRight(r,Nt+"%")}if(pt&&I>0){z.startsWith("top")?Y=I-ot:z.startsWith("bottom")&&(ot=I-Y);var vt=Y/(Y+ot)*100,At=100-vt;if(vt<0||At<0)return;i.setCompoundMinHeightBiasTop(r,vt+"%"),i.setCompoundMinHeightBiasBottom(r,At+"%")}}}}),c.x=P,c.y=Et,u.resizeControls.update(),s.trigger("nodeediting.resizedrag",[z,r])},et=function(w){w.target.getStage().container().style.cursor=i.cursors[K[u.location]]},it=function(w){w.target.getStage()!=null&&(w.target.getStage().container().style.cursor=i.cursors.default)};this.shape.on("mouseenter",et),this.shape.on("mouseleave",it),this.shape.on("touchstart mousedown",function(w){d=r.children().boundingBox(),t=r.isParent()?i.setCompoundMinWidth:i.setWidth,e=r.isParent()?i.setCompoundMinHeight:i.setHeight,n=function(P){return P.isParent()?Math.max(parseFloat(i.getCompoundMinWidth(P)),d.w):P.width()},o=function(P){return P.isParent()?Math.max(parseFloat(i.getCompoundMinHeight(P)),d.h):P.height()},s.trigger("nodeediting.resizestart",[u.location,u.parent]),s.style()._private.coreStyle["active-bg-opacity"]&&(a=s.style()._private.coreStyle["active-bg-opacity"].value),s.style().selector("core").style("active-bg-opacity",0).update(),w.target.getStage().container().style.cursor=i.cursors[K[u.location]];var q=w.target.getStage().getPointerPosition();c.x=q.x,c.y=q.y,s.boxSelectionEnabled(!1),s.panningEnabled(!1),s.autounselectify(!0),s.autoungrabify(!0),u.shape.off("mouseenter",et),u.shape.off("mouseleave",it),p.getStage().on("contentTouchend contentMouseup",tt),p.getStage().on("contentTouchmove contentMousemove",X)})},C.prototype.update=function(){var t=this.parent.renderedPosition(),e=this.parent.renderedOuterWidth()+M(),n=this.parent.renderedOuterHeight()+M(),o={x:t.x-e/2,y:t.y-n/2},a=zt(this.parent);this.shape.width(a),this.shape.height(a),this.updateShapePosition(o,e,n,a)},C.prototype.unbindAllEvents=function(){this.shape.off("mouseenter"),this.shape.off("mouseleave"),this.shape.off("touchstart mousedown")},C.prototype.updateShapePosition=function(t,e,n,o){switch(this.location){case"topleft":this.shape.x(t.x-o/2),this.shape.y(t.y-o/2);break;case"topcenter":this.shape.x(t.x+e/2-o/2),this.shape.y(t.y-o/2);break;case"topright":this.shape.x(t.x+e-o/2),this.shape.y(t.y-o/2);break;case"centerright":this.shape.x(t.x+e-o/2),this.shape.y(t.y+n/2-o/2);break;case"bottomright":this.shape.x(t.x+e-o/2),this.shape.y(t.y+n-o/2);break;case"bottomcenter":this.shape.x(t.x+e/2-o/2),this.shape.y(t.y+n-o/2);break;case"bottomleft":this.shape.x(t.x-o/2),this.shape.y(t.y+n-o/2);break;case"centerleft":this.shape.x(t.x-o/2),this.shape.y(t.y+n/2-o/2)}};var x=function(t,e){this.parent=t,this.resizeControls=e;var n=t.renderedPosition(),o=t.renderedOuterWidth()+M(),a=t.renderedOuterHeight()+M(),d={x:n.x-o/2,y:n.y-a/2},u=Bt(t),r=Rt(t),c=new Image;c.src=i.resizeToContentCueImage,this.shape=new l.Image({width:r,height:u,image:c}),c.onload=function(){p.draw()},this.updateShapePosition(d,o,a,r,u),this.bindEvents(),p.add(this.shape)};x.prototype.update=function(){var t=this.parent.renderedPosition(),e=this.parent.renderedOuterWidth()+M(),n=this.parent.renderedOuterHeight()+M(),o={x:t.x-e/2,y:t.y-n/2},a=Bt(this.parent),d=Rt(this.parent);this.shape.width(d),this.shape.height(a),this.updateShapePosition(o,e,n,d,a)},x.prototype.updateShapePosition=function(t,e,n,o,a){switch(i.resizeToContentCuePosition){case"top-left":this.shape.x(t.x+.4*o),this.shape.y(t.y+.4*a);break;case"top-right":this.shape.x(t.x+e-1.4*o),this.shape.y(t.y+.4*a);break;case"bottom-left":this.shape.x(t.x+.4*o),this.shape.y(t.y+n-1.4*a);break;default:this.shape.x(t.x+e-1.4*o),this.shape.y(t.y+n-1.4*a)}},x.prototype.bindEvents=function(){var t=this.parent,e=this;this.shape.on("mousedown",function(n){n.evt.preventDefault(),n.evt.stopPropagation()}),this.shape.on("click",function(n){n.evt.preventDefault(),typeof i.resizeToContentFunction=="function"?i.resizeToContentFunction([t]):s.undoRedo&&i.undoable?s.trigger("nodeediting.resizetocontent",[e]):ct({self:e,firstTime:!0})})},x.prototype.unbindEvents=function(){this.shape.off("mousedown"),this.shape.off("click")};var H,bt=function(t){if(t.isParent())return t.children().boundingBox().h;var e=document.createElement("canvas").getContext("2d"),n=t.style();return e.font=n["font-size"]+" "+n["font-family"],Math.max(1.1*e.measureText("M").width,30)},Mt=function(t){if(t.isParent())return t.children().boundingBox().w;var e=document.createElement("canvas").getContext("2d"),n=t.style();e.font=n["font-size"]+" "+n["font-family"];var o=n.label.split(`
`),a=0;return o.forEach(function(d){var u=e.measureText(d).width;a<u&&(a=u)}),a},wt=function(t){var e=t.width(),n=t.height(),o=bt(t),a=Mt(t);if(a!==0&&typeof i.isFixedAspectRatioResizeMode=="function"&&i.isFixedAspectRatioResizeMode(t)){var d=t.width()/t.height(),u=a<o?a:o*d,r=a<o?a/d:o;u>=a&&r>=o?(a=u,o=r):o=(a=a<o?o*d:a)<o?o:a/d}return e===a*k&&n===o*k},zt=function(t){return Math.max(1,s.zoom())*i.grappleSize*Math.min(t.width()/25,t.height()/25,1)},Bt=function(t){return Math.max(1,s.zoom())*i.grappleSize*1.25*Math.min(t.width()/25,t.height()/25,1)},Rt=function(t){return Math.max(1,s.zoom())*i.grappleSize*1.25*Math.min(t.width()/25,t.height()/25,1)},M=function(){return i.padding*Math.max(1,s.zoom())},ct=function(t){var e=t.self.parent,n=e.isParent()?i.setCompoundMinWidth:i.setWidth,o=e.isParent()?i.setCompoundMinHeight:i.setHeight;if(t.firstTime){t.firstTime=null,t.oldWidth=e.isParent()?i.getCompoundMinWidth(e):e.width(),t.oldHeight=e.isParent()?i.getCompoundMinHeight(e):e.height(),e.isParent()&&(t.oldBiasLeft=i.getCompoundMinWidthBiasLeft(e)||"50%",t.oldBiasRight=i.getCompoundMinWidthBiasRight(e)||"50%",t.oldBiasTop=i.getCompoundMinHeightBiasTop(e)||"50%",t.oldBiasBottom=i.getCompoundMinHeightBiasBottom(e)||"50%");var a=Mt(e),d=bt(e);if(a!==0){if(typeof i.isFixedAspectRatioResizeMode=="function"&&i.isFixedAspectRatioResizeMode(e)){var u=e.width()/e.height(),r=a<d?a:d*u,c=a<d?a/u:d;r>=a&&c>=d?(a=r,d=c):d=(a=a<d?d*u:a)<d?d:a/u}n(e,a*k),o(e,d*k),e.isParent()&&(i.setCompoundMinWidthBiasLeft(e,"50%"),i.setCompoundMinWidthBiasRight(e,"50%"),i.setCompoundMinHeightBiasTop(e,"50%"),i.setCompoundMinHeightBiasBottom(e,"50%"))}return h&&h.update(),t}var K=t.oldWidth,tt=t.oldHeight;if(t.oldWidth=e.isParent()?i.getCompoundMinWidth(e):e.width(),t.oldHeight=e.isParent()?i.getCompoundMinHeight(e):e.height(),n(e,K),o(e,tt),e.isParent()){var X=t.oldBiasLeft||"50%",et=t.oldBiasRight||"50%",it=t.oldBiasTop||"50%",w=t.oldBiasBottom||"50%";t.oldBiasLeft=i.getCompoundMinWidthBiasLeft(e)||"50%",t.oldBiasRight=i.getCompoundMinWidthBiasRight(e)||"50%",t.oldBiasTop=i.getCompoundMinHeightBiasTop(e)||"50%",t.oldBiasBottom=i.getCompoundMinHeightBiasBottom(e)||"50%",i.setCompoundMinWidthBiasLeft(e,X),i.setCompoundMinWidthBiasRight(e,et),i.setCompoundMinHeightBiasTop(e,it),i.setCompoundMinHeightBiasBottom(e,w)}return h&&h.update(),t};function Wt(t,e){var n=function(o){for(var a={},d=0;d<o.length;d++)a[o[d].id()]=!0;return o.filter(function(u,r){typeof u=="number"&&(u=r);for(var c=u.parent()[0];c!=null;){if(a[c.id()])return!1;c=c.parent()[0]}return!0})}(e);n.union(n.descendants()).positions(function(o,a){typeof o=="number"&&(o=a);var d=o.position("x"),u=o.position("y");return o.isParent()?{x:d,y:u}:{x:d+t.x,y:u+t.y}})}var Q,O,gt=!1,U={37:!1,38:!1,39:!1,40:!1};if(Q={x:void 0,y:void 0},O={x:0,y:0},s.on("unselect","node",g=function(t){Q={x:void 0,y:void 0},O={x:0,y:0},h&&(h.remove(),h=null);var e=s.nodes(":selected");e.size()==1&&(h=new A(e))}),s.on("select","node",L=function(t){var e=t.target;h&&(h.remove(),h=null);var n=s.nodes(":selected");n.size()!=1||i.isNoControlsMode(e)||(h=new A(n))}),s.on("remove","node",function(t){t.target.selected()&&g()}),s.on("add","node",function(t){t.target.selected()&&L(t)}),s.on("position","node",function(t){h&&(h.parent.position(),t.target.id()==h.parent.id()?h.update():O.x==Q.x&&O.y==Q.y||(O=h.parent.position(),h.update(),Q={x:O.x,y:O.y}))}),s.on("zoom",function(){h&&h.update()}),s.on("pan",function(){h&&h.update()}),s.on("afterUndo afterRedo",function(){h&&(h.update(),Q={x:void 0,y:void 0})}),i.enableMovementWithArrowKeys&&(document.addEventListener("keydown",function(t){if(typeof i.moveSelectedNodesOnKeyEvents=="function"?i.moveSelectedNodesOnKeyEvents():i.moveSelectedNodesOnKeyEvents){var e=document.activeElement.tagName;if(e!="TEXTAREA"&&e!="INPUT"){switch(t.keyCode){case 37:case 39:case 38:case 40:case 32:t.preventDefault()}if(t.keyCode<37||t.keyCode>40)return;U[t.keyCode]=!0,t.preventDefault(),gt||(H=s.nodes(":selected"),s.trigger("nodeediting.movestart",[H]),gt=!0);var n=3;if(t.altKey&&t.shiftKey)return;t.altKey?n=1:t.shiftKey&&(n=10);var o=0,a=0;o+=U[39]?n:0,o-=U[37]?n:0,a+=U[40]?n:0,Wt({x:o,y:a-=U[38]?n:0},H)}}},!0),document.addEventListener("keyup",function(t){t.keyCode<"37"||t.keyCode>"40"||(t.preventDefault(),U[t.keyCode]=!1,(typeof i.moveSelectedNodesOnKeyEvents=="function"?i.moveSelectedNodesOnKeyEvents():i.moveSelectedNodesOnKeyEvents)&&(s.trigger("nodeediting.moveend",[H]),H=void 0,gt=!1))},!0)),s.undoRedo&&i.undoable){var b,D;s.on("nodeediting.resizestart",function(t,e,n){b={node:n,css:{}},n.isParent()?(b.css.minWidth=parseFloat(i.getCompoundMinWidth(n)),b.css.minHeight=parseFloat(i.getCompoundMinHeight(n)),b.css.biasLeft=i.getCompoundMinWidthBiasLeft(n),b.css.biasRight=i.getCompoundMinWidthBiasRight(n),b.css.biasTop=i.getCompoundMinHeightBiasTop(n),b.css.biasBottom=i.getCompoundMinHeightBiasBottom(n)):(b.css.width=n.width(),b.css.height=n.height(),b.position=f.extend({},n.position()))}),s.on("nodeediting.resizeend",function(t,e,n){b.firstTime=!0,s.undoRedo().do("resize",b),b=void 0}),s.on("nodeediting.movestart",function(t,e){e[0]!=null&&(D={firstTime:!0,firstNodePosition:{x:e[0].position("x"),y:e[0].position("y")},nodes:e})}),s.on("nodeediting.moveend",function(t,e){if(D!=null){var n=D.firstNodePosition;D.positionDiff={x:-e[0].position("x")+n.x,y:-e[0].position("y")+n.y},delete D.firstNodePosition,s.undoRedo().do("nodeediting.move",D),D=void 0}}),s.on("nodeediting.resizetocontent",function(t,e){var n={self:e,firstTime:!0};s.undoRedo().do("resizeToContent",n)});var Tt=function(t){if(t.firstTime)return h&&h.update(),delete t.firstTime,t;var e=t.node,n={node:e,css:{}};return e.isParent()?(n.css.minWidth=parseFloat(i.getCompoundMinWidth(e)),n.css.minHeight=parseFloat(i.getCompoundMinHeight(e)),n.css.biasLeft=i.getCompoundMinWidthBiasLeft(e),n.css.biasRight=i.getCompoundMinWidthBiasRight(e),n.css.biasTop=i.getCompoundMinHeightBiasTop(e),n.css.biasBottom=i.getCompoundMinHeightBiasBottom(e)):(n.css.width=e.width(),n.css.height=e.height(),n.position=f.extend({},e.position())),s.startBatch(),e.isParent()?(i.setCompoundMinWidth(e,t.css.minWidth),i.setCompoundMinHeight(e,t.css.minHeight),i.setCompoundMinWidthBiasLeft(e,t.css.biasLeft),i.setCompoundMinWidthBiasRight(e,t.css.biasRight),i.setCompoundMinHeightBiasTop(e,t.css.biasTop),i.setCompoundMinHeightBiasBottom(e,t.css.biasBottom)):(e.position(t.position),i.setWidth(e,t.css.width),i.setHeight(e,t.css.height)),s.endBatch(),h&&h.update(),n},Ht=function(t){if(t.firstTime)return delete t.firstTime,t;var e=t.nodes,n=t.positionDiff,o={nodes:e,positionDiff:{x:-n.x,y:-n.y}};return Wt(n,e),o};s.undoRedo().action("resize",Tt,Tt),s.undoRedo().action("nodeediting.move",Ht,Ht),s.undoRedo().action("resizeToContent",ct,ct)}var Pt,St={refreshGrapples:function(){if(h){var t=h.parent;h.remove(),h=new A(t)}},removeGrapples:function(){h&&(h.remove(),h=null)}};return Pt=St,m(s).api=Pt,St})}function m(R,h){R.scratch("_cyNodeEditing")===void 0&&R.scratch("_cyNodeEditing",{});var s=R.scratch("_cyNodeEditing");return h===void 0?s:s[h]}},_.exports&&(_.exports=dt),(G=(function(){return dt}).call(j,at,j,_))===void 0||(_.exports=G),typeof cytoscape<"u"&&typeof jQuery<"u"&&typeof Konva<"u"&&dt(cytoscape,jQuery,Konva)}},st={};return function _(j){var at=st[j];if(at!==void 0)return at.exports;var G=st[j]={exports:{}};return yt[j](G,G.exports,_),G.exports}(265)})()})})(Ot);var It=Ot.exports;const Gt=Ft(It);export{Gt as n};
