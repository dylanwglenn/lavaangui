import{d as Dn,w as Ne,S as W,i as J,s as X,c as ee,g as Y,o as we,e as R,a as w,b as _e,f as F,l as ne,n as de,h as I,r as Ke,j as H,k as ie,m as P,t as Pe,p as x,q as Oe,u as $e,v as Re,x as Qe,y as z,z as B,A as et,B as tt,C as nt,D as C,E as D,F as G,G as Be,H as xe,I as An,J as lt,K as dt,L as re,M as ve,N as ye,O as ae}from"./svelte-fdfc2579.js";import{c as q}from"./cytoscape-86e840ae.js";import{g as On}from"./cytoscape-grid-guide-eb2f2e88.js";import{e as Fn}from"./cytoscape-edgehandles-455db19b.js";import{v as gn}from"./uuid-a960c1f4.js";import{J as Mt}from"./jszip-133f2485.js";import{s as In}from"./cytoscape-svg-5a8e6db6.js";import{F as ct}from"./file-saver-05fab67f.js";import{E as Nn}from"./jspdf-a7c15206.js";import{U as Tn}from"./svg2pdf.js-d0866cf6.js";import{d as Pn}from"./cytoscape-dagre-a4f19369.js";import{f as xn}from"./cytoscape-fcose-2999cda1.js";import{c as Vn}from"./cytoscape-cola-af60e250.js";import{c as Rn}from"./cytoscape-context-menus-cfc05c35.js";import{i as zn}from"./@jaames-324f80d4.js";import{p as Bn}from"./cytoscape-panzoom-81d89c13.js";import{u as Gn}from"./cytoscape-undo-redo-eac3a982.js";import{a as Un}from"./cytoscape-automove-085c6bfa.js";import{K as pn}from"./konva-bc9c0e16.js";import{n as jn}from"./cytoscape-node-editing-170df28d.js";import{e as qn}from"./cytoscape-edge-editing-b8b574b0.js";import{D as Dt}from"./dexie-d2c71554.js";import"./core-js-bbf708ea.js";import"./lodash-6eb5ace2.js";import"./heap-8ffeb77a.js";import"./functional-red-black-tree-9a31655a.js";import"./lodash.memoize-ae7939c9.js";import"./lodash.throttle-e32db46a.js";import"./dagre-9b2543cb.js";import"./graphlib-a6487d85.js";import"./@babel-75df473a.js";import"./fflate-8981c52c.js";import"./cssesc-5de85916.js";import"./font-family-papandreou-066b018a.js";import"./svgpath-76644159.js";import"./specificity-c7128631.js";import"./cose-base-3e61f9ec.js";import"./layout-base-45dab9bc.js";import"./webcola-fe958753.js";import"./jquery-793df3aa.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function i(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function t(o){if(o.ep)return;o.ep=!0;const l=i(o);fetch(o.href,l)}})();const K=Ne(null),yt=Ne(null),Le=Ne(null);let te=Ne({meanStruc:"default",intOvFree:!0,intLvFree:!1,estimator:"default",se:"default",missing:"listwise",n_boot:1e3,fix_first:!0,fix_single:!0,auto_var:!0,auto_cov_lv_x:!0,auto_cov_y:!0,fixed_x:!0,mode:"user model"}),ce=Ne({gridShow:!1,gridSpace:26,gridColor:"#dedede",gridWidth:1,gridMovePan:!1,gridSnap:!1,gridAlign:!0,gridResize:!1,showLav:!0,showVar:!0,showMean:!0,std:!1,view:"est",ci:.95,number_digits:2}),Ve=Ne({lastFitModel:null,lastFitLavFit:null,lastFitData:null}),j=Ne({fitting:!1,loadingMode:!1,runCounter:0,modelEmpty:!0,dataAvail:!1,columnNames:null,loadedFileName:null,ids:null,dragged:null,draggedName:null,full:!0,ready:!1,parsedModel:!1,meansModelled:null,buttonDown:!1,showServerErrors:!0,everEdge:!1,drawing:"none",undoEmpty:!0,redoEmpty:!0,server:!1,shinyapps:!1}),pt=Ne(0);Dn(j,n=>n.columnNames);const hn=Ne({type:"info",message:"",key:0});function be(n,e){hn.update(i=>({type:n,message:e,key:i.key+1}))}be("info","Greetings. Lavaangui is BETA software. Please report any bugs at https://github.com/karchjd/lavaangui/issues.");function Hn(n,e,i){let t;ee(n,ce,r=>i(1,t=r));let o=!1;On(q);let l=Y(K);var s={snapToGridOnRelease:!1,drawGrid:!1,snapToAlignmentLocationDuringDrag:!1,distributionGuidelines:!0,geometricGuideline:!0,initPosAlignment:!1,centerToEdgeAlignment:!1,resize:!1,parentPadding:!1,guidelinesStackOrder:4,guidelinesTolerance:2,guidelinesStyle:{strokeStyle:"#8b7d6b",geometricGuidelineRange:2e3,range:100,minDistRange:10,distGuidelineOffset:10,horizontalDistColor:"#ff0000",verticalDistColor:"#00ff00",initPosAlignmentColor:"#0000ff",lineDash:[0,0],horizontalDistLine:[0,0],verticalDistLine:[0,0],initPosAlignmentLine:[0,0]},parentSpacing:-1};return we(()=>{l.gridGuide(s),i(0,o=!0)}),n.$$.update=()=>{n.$$.dirty&3&&o&&t.gridShow!==void 0&&Y(K).gridGuide({drawGrid:t.gridShow}),n.$$.dirty&3&&o&&t.gridSpace!==void 0&&Y(K).gridGuide({gridSpacing:t.gridSpace}),n.$$.dirty&3&&o&&t.gridWidth!==void 0&&Y(K).gridGuide({lineWidth:t.gridWidth}),n.$$.dirty&3&&o&&t.gridMovePan!==void 0&&Y(K).gridGuide({panGrid:t.gridMovePan}),n.$$.dirty&3&&o&&t.gridSnap!==void 0&&Y(K).gridGuide({snapToGridDuringDrag:t.gridSnap}),n.$$.dirty&3&&o&&t.gridAlign!==void 0&&Y(K).gridGuide({snapToAlignmentLocationOnRelease:t.gridAlign}),n.$$.dirty&3&&o&&t.gridResize!==void 0&&Y(K).gridGuide({resize:t.gridResize})},[o,t]}class Yn extends W{constructor(e){super(),J(this,e,Hn,null,X,{})}}const le="observed-variable",me="latent-variable",Se="constant",ke="free",We="nolabel",ge="fromUser",ze="label",Te="byLav",Ee="fixed",De="forcefree",Fe="directed",Ie="undirected",rt="loop",Ge="linked",Ae="fromLav",At="hasEst",ft="validated",Ze="continous",Je="ordered",Wn="hasEstFixed",He=80,Jn=80,Xn=[{selector:"element",style:{"font-size":function(n){return n.data("font-size")||14}}},{selector:"node",style:{width:He.toString(),height:"80","background-color":function(n){return n.data("background-color")||"white"},"border-color":function(n){return n.data("border-color")||"grey"},"border-width":function(n){return n.data("border-width")||"2px"},label:"data(label)","text-valign":"center","text-halign":"center"}},{selector:`node.${le}`,style:{shape:"rectangle"}},{selector:`node.${le}.${Je}`,style:{"border-style":"double","border-width":5}},{selector:`node.${me}`,style:{shape:"ellipse","border-color":"black"}},{selector:`node.${Se}`,style:{shape:"triangle",label:"1","text-valign":"center","text-margin-y":"10px","border-color":"black"}},{selector:`node.${Ge}`,style:{"border-color":"black"}},{selector:"edge",style:{width:function(n){return n.data("width")||3},"line-color":function(n){return n.data("line-color")||"#000"},"target-arrow-color":function(n){return n.data("target-arrow-color")||"#000"},"source-arrow-color":function(n){return n.data("source-arrow-color")||"#000"},"target-arrow-shape":"triangle","curve-style":"bezier","text-valign":"center","text-halign":"center","text-wrap":"wrap","text-max-width":Jn,"z-index":10,color:"#000","text-outline-color":"#fff","text-outline-width":"2px","text-background-color":"#fff","text-background-opacity":1,"text-background-padding":"4px"}},{selector:"edge.loop",style:{"curve-style":"bezier","source-arrow-shape":"triangle","loop-direction":function(n){return n.data("loop-direction")||0},"loop-sweep":.8,"control-point-step-size":n=>{const e=n.source(),i=parseInt(e.style("height")),t=parseInt(e.style("width"));let o;return n.style("loop-direction")=="0deg"||n.style("loop-direction")=="180deg"?o=i:n.style("loop-direction")=="90deg"||n.style("loop-direction")=="270deg"?o=t:o=Math.max(t,i),o/80*60}}},{selector:`edge.${Ie}`,style:{"curve-style":"unbundled-bezier","control-point-distances":[-100],"control-point-weights":[.5],"source-arrow-shape":"triangle"}},{selector:`edge.${Ie}.${Ae}`,style:{"control-point-distances":[100]}},{selector:`edge.${ze}, edge.${ze}`,style:{label:function(n){return n.data("label")}}},{selector:`edge.${Ee}.${ze}`,style:{label:function(n){return n.data("label")+"@"+n.data("value")}}},{selector:`edge.${Ee}.${We}`,style:{label:function(n){return"@"+n.data("value")}}},{selector:`edge.${De}`,style:{"line-color":"blue"}},{selector:`edge.${Ae}, edge.${Te}`,style:{"line-style":"dashed"}},{selector:"edge.hidden, node.hidden",style:{display:"none"}},{selector:"edge:selected",style:{"underlay-opacity":.5,"underlay-color":"#928ff8"}},{selector:"node:selected",style:{"underlay-color":"#928ff8","underlay-opacity":.5}}],Zn={autoungrabify:!1,autolock:!1,style:Xn,minZoom:.02,maxZoom:5},Kn={preview:!1,hoverDelay:150,handleNodes:"node",snap:!0,handleColor:"#ff0000",handleSize:10,canConnect:function(n,e){return!cy.edges(function(t){if(!t.isUserAdded())return!1;const o=t.source().id()==n.id()&&t.target().id()==e.id(),l=t.source().id()==e.id()&&t.target().id()==n.id();return o||l}).length}};function Qn(n){q.use(Fn);var e=q(Zn);return e.boxSelectionEnabled(!0),K.set(e),yt.set(e.edgehandles(Kn)),[]}class eo extends W{constructor(e){super(),J(this,e,Qn,null,X,{})}}function oe(n){var e=Y(j);if(!e.full)return;let i=Y(K);const t=i.edges();for(var o=0;o<t.length;o++)t[o].removeEstimates();if(i.getUserEdges().length==0){i.getLavaanNodes().remove(),i.getLavaanEdges().remove(),Shiny.setInputValue("show_help",Math.random());return}if(!e.dataAvail&&n=="estimate"){be("danger","Model not send to lavaan because no data available");return}let l=bn(n);Shiny.setInputValue("run-fromJavascript",JSON.stringify(l)),Shiny.setInputValue("runCounter",Math.random()),n==="user model"&&i.getLavaanModifiedEdges().forEach(s=>{s.freePara()})}function to(n,e){for(let i=0;i<n.length;i++)if(n[i]===e)return!0;return!1}function it(n,e){let i;n==null?i="1":i=n.getLabel();let t=!1,o;if(e.isFixed()&&!e.isModifiedLavaan()?(o=e.getValue()+"*"+i,t=!0):e.isForceFree()&&(o="NA*"+i,t=!0),e.hasLabel()){const l=e.getLabel();t?o+=" + "+l+"*"+i:(t=!0,o=l+"*"+i)}else t||(o=i);return o}class no{constructor(e,i,t=null,o=null,l=null,s=null){this.mode=e,Object.assign(this,{model:{options:t,syntax:o,R_script:i,ordered_labels:s},forceUpdate:Math.random(),cache:l})}}function Ot(n,e="target"){let i="";const t=Math.max(...n.map(r=>r[e]().position().x))-Math.min(...n.map(r=>r[e]().position().x)),o=Math.max(...n.map(r=>r[e]().position().y))-Math.min(...n.map(r=>r[e]().position().y)),l=t>=o?"x":"y",s=n.map((r,a)=>({index:a,value:r.source().position()[l]})).sort((r,a)=>r.value-a.value).map(r=>r.index);for(let r=0;r<n.length;r++){const a=n[s[r]][e]();r>0&&(i+=" + "),i+=it(a,n[s[r]])}return i}function bn(n){let e=Y(K),i=Y(j),t="",o="";o+=`library(lavaan)
`,i.dataAvail?o+=`data <- read.csv("${i.loadedFileName}")
`:o+=`#make sure your data is loaded into the 'data' variable
`;let l=e.getLatentNodes();l=l.nodes(function(m){const $=m.connectedEdges(function(h){return h.isDirected()&&h.source().id()==m.id()});return $.length>0&&$.every(h=>h.target().isLatent())});let s=e.getLatentNodes();s=s.nodes(function(m){const $=m.connectedEdges(function(M){return M.isDirected()&&M.target().id()==m.id()}),h=m.connectedEdges(function(M){return M.isDirected()});return h.length>0&&$.length==h.length});let r=e.getLatentNodes(),a=!1;for(let m=0;m<r.length;m++){const $=r[m],h=$.connectedEdges(function(M){return M.isDirected()&&M.source().id()==$.id()&&(M.target().isObserved()||l.some(E=>E.id()===$.id()))});h.length>0&&(a||(t+=`# measurement model
`,a=!0),t+=" "+$.getLabel()+" =~ "+Ot(h,"target")+`
`)}function u(m){return m.isDirected()&&!m.source().isConstant()&&!(m.source().isLatent()&&m.target().isObserved())&&!(m.source().isLatent()&&l.some(h=>h.id()===m.source().id())&&m.target().isLatent())&&(m.isUserAdded()||m.isModifiedLavaan())&&!s.some(h=>h.id()===m.target().id())}let d=e.edges(u),f=[];for(let m=0;m<d.length;m++)to(f,d[m].target())||f.push(d[m].target());if(f.length>0){t+=`
# regressions`;for(let m=0;m<f.length;m++){const $=f[m],h=$.connectedEdges(M=>u(M)&&M.target().same($));if(h.length>0){let M="";for(var g=0;g<h.length;g++){var c=h[g].source();g>0&&(M+=" + "),M+=it(c,h[g])}t+=`
 `+$.getLabel()+" ~ "+M}}}let p=e.edges(function(m){return(m.isUndirected()||m.myIsLoop())&&(m.isUserAdded()||m.isModifiedLavaan())});if(p.length>0){t+=`

# (residual) (co)variances`;for(let m=0;m<p.length;m++){let $=p[m].source().data("label");t+=`
 `+$+" ~~ "+it(p[m].target(),p[m])}}const b=e.nodes(function(m){return m.isConstant()});for(let m=0;m<b.length;m++){const h=b[m].connectedEdges(function(M){return M.isUserAdded()});if(h.length>0){t+=`
# intercepts
`;for(var g=0;g<h.length;g++){var c=h[g].target();t+=c.getLabel()+" ~ "+it(void 0,h[g])+`
`}}}a=!1;for(let m=0;m<s.length;m++){const $=s[m],h=$.connectedEdges(function(M){return M.isDirected()&&M.target().id()==$.id()});h.length>0&&(a||(t+=`

 #  formative factors
`,a=!0),t+=" "+$.getLabel()+" <~ "+Ot(h,"source")+`
`)}t=`'
`+t+`'

`;function v(m,$=60){return m.split(`
`).map(h=>{if(h.includes("+")&&h.length>$){const M=h.split(" + ");let E=[],_=M[0];const O=h.match(/^\s*/)[0],Z=_.indexOf("~")+1;for(let fe=1;fe<M.length;fe++)_.length+M[fe].length+3>$?(E.push(_+" + "),_=O+" ".repeat(Z)+M[fe]):_+=" + "+M[fe];return E.push(_),E.join(`
`)}return h}).join(`
`)}t=v(t);const S=e.nodes(function(m){return m.isOrdered()}).map(m=>m.getLabel()),L=oo(S);return o+="model <-"+t,o+="result <- lavaan(model, data, "+L,new no(n,o,L,t=t,Y(Ve),S)}function oo(n){const e=Y(te),i=Me(e.meanStruc),t=Me(e.intOvFree),o=Me(e.intLvFree);let l=`meanstructure = ${i},
		 int.ov.free = ${t}, int.lv.free = ${o},
		 estimator = ${mt(e.estimator)}, se = ${mt(e.se)},
		 missing = ${mt(e.missing)}, auto.fix.first = ${Me(e.fix_first)},
		 auto.fix.single = ${Me(e.fix_single)}, auto.var = ${Me(e.auto_var)},
		 auto.cov.lv.x = ${Me(e.auto_cov_lv_x)}, auto.cov.y = ${Me(e.auto_cov_y)},
  		 fixed.x = ${Me(e.fixed_x)}`;if(e.se=="boot"){const s=`, bootstrap = ${e.n_boot})`;l=l+s}else l=l+")";return n.length>0&&(l=`ordered = ${'c("'+n.join('", "')+'")'}, ${l}`),l}function mt(n){return'"'+n+'"'}function Me(n){if(n==!0||n=="true")return"TRUE";if(n==!1||n=="false")return"FALSE";if(n=="default")return'"default"';throw new Error("Should not happen")}let $n,_n;function vn(){$n=1,_n=1}vn();function he(n,e,i=!0,t=null){let o=Y(K),l=gn(),s;if(t!==null){if(o.nodes().find(a=>a.data().label===t)){be("danger","Node with the same label already exists.");return}s=t}else n==le?s="x"+$n++:n==me?s="f"+_n++:s=void 0,o.nodes().find(a=>a.data().label===s)&&(s=s+".1");let r=Y(Le);return e?r.do("add",{group:"nodes",data:{id:l,label:s},classes:[n,Ze],renderedPosition:e}):(e={x:Math.random()*400+50,y:Math.random()*400+50},o.add({group:"nodes",data:{id:l,label:s},classes:[n,Ze],renderedPosition:e})),i&&oe(Y(te).mode),l}function qe(n,e,i=!0,t=!1,o=null,l=!0){let s=Y(K),r=gn();return s.add({group:"edges",data:{id:r,source:n,target:e,value:t?o:void 0},classes:`${i?Fe:Ie} ${l?ge:Ae} ${t?Ee:ke} ${We}`})}function pe(n){const e=uo(n);if(e!=null){const i=so(n),t=lo(i);let o=ao(t);o=io(o,t),e.data("loop-direction",`${o}deg`)}}function io(n,e){const i=[0,180,90,270],t=35,o=i.sort((r,a)=>{const u=Math.min(Math.abs(r-n),360-Math.abs(r-n)),d=Math.min(Math.abs(a-n),360-Math.abs(a-n));return u-d}),s=[[0,180],[90,270]].flatMap(r=>o.filter(a=>r.includes(a)));for(const r of s)if(!e.some(u=>{const d=Math.abs(r-u);return Math.min(d,360-d)<=t}))return r;return n}function so(n){const e=cy.getElementById(n);if(e.length===0){console.error(`Node with ID ${n} does not exist.`);return}let i=[];return e.connectedEdges(t=>t.style("display")!=="none").forEach(t=>{const o=t.source(),l=t.target();let s;(o.id()!==e.id()||l.id()!==e.id())&&(o.id()===e.id()?s=Ft(t.sourceEndpoint(),e.position()):s=Ft(t.targetEndpoint(),e.position()),i.push(s))}),i}function Ft(n,e){return Object.keys(n).reduce((i,t)=>{if(e.hasOwnProperty(t))i[t]=n[t]-e[t];else throw new Error(`Key ${t} not found in second object`);return i},{})}function lo(n){let e=[];return n.forEach(i=>{e.push(ro(i))}),e}function ro(n){let e=Math.atan2(n.y,n.x)*180/Math.PI;return e=(e+90)%360,e}function ao(n){let e=-1,i=null;for(let t=0;t<=360;t++){let o=1/0;for(let l=0;l<n.length;l++){let s=Math.abs(n[l]-t);s=Math.min(s,360-s),o=Math.min(o,s)}o>e&&(e=o,i=t)}return i}function uo(n,e){var i=cy.getElementById(n),t=null;return i.connectedEdges().forEach(function(o){var l=o.source(),s=o.target();if(l.id()===n&&s.id()===n){t=o;return}}),t!==null&&i.connectedEdges().length>1&&!t.hasClass("fixDeg")?t:null}function co(n){let e,i,t;return{c(){e=R("div"),w(e,"id","cy"),w(e,"class","graph svelte-11pj9ut"),_e(e,"flex-basis",n[1].full?"70%":"100%")},m(o,l){F(o,e,l),n[6](e),i||(t=[ne(e,"mouseover",n[2]),ne(e,"mouseout",n[3]),ne(e,"mousemove",n[4]),ne(e,"drop",n[5]),ne(e,"dragover",fo)],i=!0)},p(o,[l]){l&2&&_e(e,"flex-basis",o[1].full?"70%":"100%")},i:de,o:de,d(o){o&&I(e),n[6](null),i=!1,Ke(t)}}}function fo(n){n.preventDefault()}function mo(n,e){let i=Math.atan2(n,-e)*(180/Math.PI);return i<0&&(i+=360),i}function go(n,e,i){let t,o,l;ee(n,Le,$=>i(12,t=$)),ee(n,j,$=>i(1,o=$)),ee(n,te,$=>i(13,l=$));let s=Y(K),r=Y(yt),a,u={x:0,y:0};we(()=>{s.mount(a)});function d($){if(H(j,o.buttonDown=!0,o),($.key==="Alt"||$.key===" "||$.key.toLowerCase()==="x")&&(r.enableDrawMode(),$.key==="Alt"?H(j,o.drawing="undirected",o):H(j,o.drawing="directed",o)),$.key==="Backspace"){let h=s.$(":selected");h.length>0&&(t.do("remove",h),oe(l.mode)),H(j,o.buttonDown=!1,o)}if(["l","o","c"].includes($.key.toLowerCase())){let h;switch($.key.toLowerCase()){case"l":h=me;break;case"o":h=le;break;case"c":h=Se;break}he(h,{...u}),H(j,o.buttonDown=!1,o)}H(j,o.buttonDown=!1,o)}function f(){s.autoungrabify(!1),s.nodes().grabify()}function g($){($.key==="Alt"||$.key===" "||$.key.toLowerCase()==="x")&&(r.disableDrawMode(),H(j,o.drawing="none",o),f())}function c(){document.addEventListener("keydown",d),document.addEventListener("keyup",g)}function p(){document.removeEventListener("keydown",d,!1),document.removeEventListener("keyup",g,!1)}function b($){u.x=$.offsetX,u.y=$.offsetY}s.on("ehcomplete",($,h,M,E)=>{const _=E,O=h.id(),Z=M.id();_.remove(),_.init(),O!==Z?(o.drawing==="undirected"?_.setUndirected():_.setDirected(),pe(O),pe(Z)):(_.makeLoop(),pe(Z)),!((_.isUndirected()||_.myIsLoop())&&(h.isConstant()||M.isConstant()))&&(_.isDirected()&&M.isConstant()||_.isDirected()&&h.isConstant()&&M.connectedEdges(N=>N.isUserAdded()&&N.source().isConstant()).length>1||(_.isDirected()&&h.isConstant()?_.makeMeanEdge():_.makeOtherEdge(),t.do("add",_),oe(l.mode)))});function v($){let h=0;const M=100,E=M*2;$.preventDefault();let _={x:$.offsetX,y:$.offsetY};function O(N,k){let V;if(o.dataAvail){const ue=s.getObservedNodes().map(T=>T.data().label);V=o.columnNames.filter(T=>!ue.includes(T)).map(T=>({text:T,value:T}))}else V=Array.from({length:100},(ue,Q)=>`var${Q+1}`);const U={title:N,inputType:"select",multiple:!0,value:"",inputOptions:V,callback:k};bootbox.prompt(U)}function Z(){be("danger","Either no variable selected or at least one selected variable already is in the model.")}function fe(N){return N&&!s.nodes().some(k=>k.data().label===N)}if(o.dragged=="observed-with-name")he(le,_,!0,o.draggedName);else if(o.dragged=="multiple")O("Select Variables",function(N){if(fe(N)){const k=s.zoom();N.forEach(V=>{he(le,{x:_.x+h*k,y:_.y},!0,V),h+=M})}else Z()});else if(o.dragged=="factor")O("Select Variables",function(N){if(fe(N)){const k=s.zoom(),V=he(me,{x:_.x+M*k*N.length/2-He/2*k,y:_.y});N.forEach(U=>{const ue=he(le,{x:_.x+h*k,y:_.y+k*E},!0,U);h+=M,qe(V,ue)}),H(te,l.fix_first=!0,l),H(te,l.fix_single=!0,l),H(te,l.auto_var=!0,l),H(te,l.intOvFree=!0,l),H(te,l.intLvFree=!1,l)}else Z()});else if(o.dragged=="growth"){let N=0;O("Select Time Points",function(k){if(fe(k)){const V=s.zoom(),U=he(Se,{x:_.x+M*V*k.length/2-He/2*V,y:_.y},!0),ue=he(me,{x:_.x+He/2*V,y:_.y+1*E*V},!0,"Intercept"),Q=he(me,{x:_.x+M*V*(k.length-1)-He/2*V,y:_.y+1*E*V},!0,"Slope");qe(U,ue,!0,!1),qe(U,Q,!0,!1);let T=1;k.forEach(se=>{const je=he(le,{x:_.x+N*V,y:_.y+2*E*V},!0,se);N+=M,qe(ue,je,!0,!0,1),T!=1&&qe(Q,je,!0,!0,T-1),T+=1}),H(te,l.auto_var=!0,l),H(te,l.intOvFree=!1,l),H(te,l.intLvFree=!0,l)}})}else he(o.dragged,_);(o.dragged=="multiple"||o.dragged=="factor"||o.dragged=="growth")&&oe(l.mode),H(j,o.dragged=null,o)}let y=!1,S=null,L;s.on("mousedown","edge.loop",function($){y=!0,S=$.target,S.unpanify(),L=S.style("loop-direction")});let A;s.on("mousemove",function($){if(!y||!S)return;let M=S.source().renderedPosition();A=mo(u.x-M.x,u.y-M.y);const E=5,_=[0,90,180,270];for(let O=0;O<_.length;O++)if(Math.abs(A-_[O])<=E){A=_[O];break}S.data("loop-direction",`${A}deg`)}),window.addEventListener("mouseup",function(){if(y){if(y=!1,A===void 0||L===`${A}deg`)return;S.data("loop-direction",L),S.addClass("fixDeg"),t.do("style",{eles:S,style:{"loop-direction":`${A}deg`}}),S=null}});function m($){ie[$?"unshift":"push"](()=>{a=$,i(0,a)})}return[a,o,c,p,b,v,m]}class po extends W{constructor(e){super(),J(this,e,go,co,X,{})}}function ho(n,e,i){let t,o;ee(n,j,a=>i(2,t=a)),ee(n,te,a=>i(3,o=a));let l=Y(K);l.on("add","node",function(a){const u=a.target;if(u.isObserved()){let d=t.columnNames;d&&d.includes(u.getLabel())&&(u.link(),be("success",`Variable ${u.getLabel()} linked to data`))}t.modelEmpty&&l.edges().length>0&&H(j,t.modelEmpty=!1,t)}),l.on("remove","node",function(a){l.getUserEdges().length==0&&(H(j,t.modelEmpty=!0,t),Shiny.setInputValue("show_help",Math.random())),t.loadingMode||oe(o.mode)}),l.on("remove","edge",function(a){pe(a.target.source().id()),pe(a.target.target().id())}),l.on("add","edge",function(a){H(j,t.everEdge=!0,t),t.modelEmpty&&l.edges().length>0&&H(j,t.modelEmpty=!1,t),pe(a.target.source().id()),pe(a.target.target().id())}),l.on("position","node",function(a){a.target.neighborhood().nodes().forEach(f=>{const g=f.id();pe(g)})});let s=null,r=!1;return l.on("mousedown",function(a){const u=p=>parseFloat(p.replace("px","")),d=a.position;let f=null,g=1/0;const c=30;l.edges().forEach(function(p){if(p.isDirected()){const b=u(p.style("text-margin-x")),v=u(p.style("text-margin-y")),y=p.midpoint(),S={x:y.x+b,y:y.y+v},L=Math.abs(d.x-S.x),A=d.y-S.y,m=Math.sqrt(L*L+A*A);m<g&&m<c&&(f=p,g=m)}}),f!==null&&(s=f,r=!0,a.preventDefault(),f.unpanify())}),l.on("mousemove",function(a){if(r&&s){const u=a.position,d=s.midpoint(),f=s.source().position(),g=s.target().position(),c={x:g.x-f.x,y:g.y-f.y},p=Math.sqrt(c.x**2+c.y**2),b={x:c.x/p,y:c.y/p},v={x:u.x-d.x,y:u.y-d.y};let y=v.x*b.x+v.y*b.y;const S=(g.y-d.y)/b.y-70,L=(f.y-d.y)/b.y+70;let A=Math.min(S,y);A=Math.max(L,A);const m=A*b.x,$=A*b.y;s.style({"text-margin-x":m,"text-margin-y":$})}}),l.on("mouseup",function(a){r=!1,s=null}),[]}class bo extends W{constructor(e){super(),J(this,e,ho,null,X,{})}}function It(n,e,i){const t=n.slice();return t[21]=e[i],t}function Nt(n){let e,i,t,o,l,s,r,a,u,d,f,g,c,p,b=n[1],v=[];for(let y=0;y<b.length;y+=1)v[y]=Tt(It(n,b,y));return{c(){e=R("div"),i=P(),t=R("div"),o=R("button"),o.textContent="Multiple Variables",l=P(),s=R("button"),s.textContent="Factor",r=P(),a=R("button"),a.textContent="Growth",u=P(),d=R("div"),f=P(),g=R("ul");for(let y=0;y<v.length;y+=1)v[y].c();w(e,"class","vertical-bar svelte-r00s5r"),w(o,"class","draggable-item svelte-r00s5r"),w(o,"draggable","true"),w(s,"class","draggable-item svelte-r00s5r"),w(s,"draggable","true"),w(a,"class","draggable-item svelte-r00s5r"),w(a,"draggable","true"),w(t,"id","model-buttons"),w(t,"class","svelte-r00s5r"),w(d,"class","vertical-bar svelte-r00s5r"),w(g,"class","draggable-list svelte-r00s5r")},m(y,S){F(y,e,S),F(y,i,S),F(y,t,S),x(t,o),x(t,l),x(t,s),x(t,r),x(t,a),F(y,u,S),F(y,d,S),F(y,f,S),F(y,g,S);for(let L=0;L<v.length;L+=1)v[L]&&v[L].m(g,null);c||(p=[ne(o,"dragstart",n[14]),ne(s,"dragstart",n[15]),ne(a,"dragstart",n[16])],c=!0)},p(y,S){if(S&10){b=y[1];let L;for(L=0;L<b.length;L+=1){const A=It(y,b,L);v[L]?v[L].p(A,S):(v[L]=Tt(A),v[L].c(),v[L].m(g,null))}for(;L<v.length;L+=1)v[L].d(1);v.length=b.length}},d(y){y&&I(e),y&&I(i),y&&I(t),y&&I(u),y&&I(d),y&&I(f),y&&I(g),Oe(v,y),c=!1,Ke(p)}}}function Tt(n){let e,i=n[21]+"",t,o,l,s;function r(...a){return n[17](n[21],...a)}return{c(){e=R("li"),t=$e(i),o=P(),w(e,"draggable","true"),w(e,"class","draggable-item svelte-r00s5r")},m(a,u){F(a,e,u),x(e,t),x(e,o),l||(s=ne(e,"dragstart",r),l=!0)},p(a,u){n=a,u&2&&i!==(i=n[21]+"")&&Re(t,i)},d(a){a&&I(e),l=!1,s()}}}function $o(n){let e,i,t,o,l,s,r,a,u,d,f,g,c,p,b,v=n[0].dataAvail&&Nt(n);return{c(){e=R("div"),i=R("div"),t=R("div"),o=R("button"),l=P(),s=R("button"),r=P(),a=R("div"),u=P(),d=R("div"),f=P(),g=R("div"),c=P(),v&&v.c(),w(o,"class","arrow-btn direct-arrow svelte-r00s5r"),w(o,"title","Draw Directed Arrows"),Pe(o,"active",n[0].drawing==="directed"),w(s,"class","arrow-btn undirected-arrow svelte-r00s5r"),w(s,"title","Draw Undirected Arrows"),Pe(s,"active",n[0].drawing==="undirected"),w(a,"role","button"),w(a,"id","add-manifest-variable"),w(a,"title","Create Observed Variable"),w(a,"draggable","true"),w(a,"class","variable-button svelte-r00s5r"),w(a,"data-button-type",le),w(a,"tabindex","0"),w(d,"role","button"),w(d,"tabindex","0"),w(d,"id","add-latent-variable"),w(d,"title","Create Latent Variable"),w(d,"draggable","true"),w(d,"class","variable-button svelte-r00s5r"),w(d,"data-button-type",me),w(g,"role","button"),w(g,"tabindex","0"),w(g,"id","add-constant-variable"),w(g,"class","variable-button svelte-r00s5r"),w(g,"title","Create Constant Variable"),w(g,"data-button-type","const"),w(g,"draggable","true"),w(t,"id","buttons"),w(t,"class","svelte-r00s5r"),w(i,"id","buttonCont"),w(i,"class","svelte-r00s5r"),w(e,"class","toolbox svelte-r00s5r")},m(y,S){F(y,e,S),x(e,i),x(i,t),x(t,o),x(t,l),x(t,s),x(t,r),x(t,a),x(t,u),x(t,d),x(t,f),x(t,g),x(e,c),v&&v.m(e,null),p||(b=[ne(o,"click",n[9]),ne(s,"click",n[10]),ne(a,"dragstart",n[11]),ne(d,"dragstart",n[12]),ne(g,"dragstart",n[13])],p=!0)},p(y,[S]){S&1&&Pe(o,"active",y[0].drawing==="directed"),S&1&&Pe(s,"active",y[0].drawing==="undirected"),y[0].dataAvail?v?v.p(y,S):(v=Nt(y),v.c(),v.m(e,null)):v&&(v.d(1),v=null)},i:de,o:de,d(y){y&&I(e),v&&v.d(),p=!1,Ke(b)}}}function _o(n,e,i){let t,o;ee(n,j,$=>i(0,t=$)),ee(n,K,$=>i(8,o=$)),j.subscribe($=>{});function l($){H(j,t.dragged=$,t)}function s($,h){H(j,t.dragged="observed-with-name",t),H(j,t.draggedName=h,t)}function r($){H(j,t.dragged="multiple",t)}function a($){H(j,t.dragged="factor",t)}function u($){H(j,t.dragged="growth",t)}let d,f=Y(yt);function g($){t.drawing===$?(f.disableDrawMode(),H(j,t.drawing="none",t)):(f.enableDrawMode(),H(j,t.drawing=$,t))}const c=()=>{g("directed")},p=()=>{g("undirected")},b=()=>{event.dataTransfer.setData("text/plain","node"),l(le)},v=()=>{l(me)},y=()=>{l(Se)},S=$=>r(),L=$=>a(),A=$=>u(),m=($,h)=>s(h,$);return n.$$.update=()=>{if(n.$$.dirty&257&&typeof o.getObservedNodes=="function"&&t.columnNames!==null){const $=o.getObservedNodes().map(h=>h.data("label"));i(1,d=t.columnNames.filter(h=>!$.includes(h)))}},[t,d,l,s,r,a,u,g,o,c,p,b,v,y,S,L,A,m]}class vo extends W{constructor(e){super(),J(this,e,_o,$o,X,{})}}function yo(n){let e,i,t,o,l;const s=n[1].default,r=Qe(s,n,n[0],null);return o=new vo({}),{c(){e=R("nav"),i=R("ul"),r&&r.c(),t=P(),z(o.$$.fragment),w(i,"class","nav navbar-nav navbar-left"),w(e,"class","navbar navbar-default navbar-static-top navbar-left svelte-12n5yi9")},m(a,u){F(a,e,u),x(e,i),r&&r.m(i,null),x(e,t),B(o,e,null),l=!0},p(a,[u]){r&&r.p&&(!l||u&1)&&et(r,s,a,a[0],l?nt(s,a[0],u,null):tt(a[0]),null)},i(a){l||(C(r,a),C(o.$$.fragment,a),l=!0)},o(a){D(r,a),D(o.$$.fragment,a),l=!1},d(a){a&&I(e),r&&r.d(a),G(o)}}}function wo(n,e,i){let{$$slots:t={},$$scope:o}=e;return n.$$set=l=>{"$$scope"in l&&i(0,o=l.$$scope)},[o,t]}class ko extends W{constructor(e){super(),J(this,e,wo,yo,X,{})}}function Eo(n){let e,i,t,o,l,s,r;const a=n[3].default,u=Qe(a,n,n[2],null);return{c(){e=R("li"),i=R("a"),t=$e(n[0]),o=R("span"),l=P(),s=R("ul"),u&&u.c(),w(o,"class","caret"),w(i,"href","#"),w(i,"class","dropdown-toggle svelte-1oq006n"),w(i,"data-toggle","dropdown"),w(i,"role","button"),w(i,"aria-haspopup","true"),w(i,"aria-expanded","false"),w(i,"draggable","false"),Pe(i,"minimal",n[1]),w(s,"class","dropdown-menu"),w(e,"class","dropdown")},m(d,f){F(d,e,f),x(e,i),x(i,t),x(i,o),x(e,l),x(e,s),u&&u.m(s,null),r=!0},p(d,[f]){(!r||f&1)&&Re(t,d[0]),(!r||f&2)&&Pe(i,"minimal",d[1]),u&&u.p&&(!r||f&4)&&et(u,a,d,d[2],r?nt(a,d[2],f,null):tt(d[2]),null)},i(d){r||(C(u,d),r=!0)},o(d){D(u,d),r=!1},d(d){d&&I(e),u&&u.d(d)}}}function Co(n,e,i){let{$$slots:t={},$$scope:o}=e,{name:l}=e,{minimal:s=!1}=e;return n.$$set=r=>{"name"in r&&i(0,l=r.name),"minimal"in r&&i(1,s=r.minimal),"$$scope"in r&&i(2,o=r.$$scope)},[l,s,o,t]}class Ue extends W{constructor(e){super(),J(this,e,Co,Eo,X,{name:0,minimal:1})}}function Pt(n,e,i){const t=n.slice();return t[4]=e[i],t}function xt(n){let e;return{c(){e=R("li"),w(e,"class","divider")},m(i,t){F(i,e,t)},d(i){i&&I(e)}}}function Vt(n){let e,i,t=n[4].name+"",o,l,s,r,a;function u(...f){return n[3](n[4],...f)}let d=n[4].divider&&xt();return{c(){e=R("li"),i=R("a"),o=$e(t),l=P(),d&&d.c(),s=Be(),w(i,"href","#"),Pe(e,"disabled",n[4].disable)},m(f,g){F(f,e,g),x(e,i),x(i,o),F(f,l,g),d&&d.m(f,g),F(f,s,g),r||(a=ne(i,"click",u),r=!0)},p(f,g){n=f,g&1&&t!==(t=n[4].name+"")&&Re(o,t),g&1&&Pe(e,"disabled",n[4].disable),n[4].divider?d||(d=xt(),d.c(),d.m(s.parentNode,s)):d&&(d.d(1),d=null)},d(f){f&&I(e),f&&I(l),d&&d.d(f),f&&I(s),r=!1,a()}}}function So(n){let e,i=n[0],t=[];for(let o=0;o<i.length;o+=1)t[o]=Vt(Pt(n,i,o));return{c(){for(let o=0;o<t.length;o+=1)t[o].c();e=Be()},m(o,l){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(o,l);F(o,e,l)},p(o,l){if(l&1){i=o[0];let s;for(s=0;s<i.length;s+=1){const r=Pt(o,i,s);t[s]?t[s].p(r,l):(t[s]=Vt(r),t[s].c(),t[s].m(e.parentNode,e))}for(;s<t.length;s+=1)t[s].d(1);t.length=i.length}},d(o){Oe(t,o),o&&I(e)}}}function Lo(n){let e,i;return e=new Ue({props:{minimal:n[2],name:n[1],$$slots:{default:[So]},$$scope:{ctx:n}}}),{c(){z(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},p(t,[o]){const l={};o&4&&(l.minimal=t[2]),o&2&&(l.name=t[1]),o&129&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){i||(C(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){G(e,t)}}}function Mo(n,e){e.disable||e.action(n)}function Do(n,e,i){let{menuItems:t}=e,{name:o}=e,{minimal:l=!1}=e;const s=(r,a)=>Mo(a,r);return n.$$set=r=>{"menuItems"in r&&i(0,t=r.menuItems),"name"in r&&i(1,o=r.name),"minimal"in r&&i(2,l=r.minimal)},[t,o,l,s]}class ut extends W{constructor(e){super(),J(this,e,Do,Lo,X,{menuItems:0,name:1,minimal:2})}}function ht(n,e){if(n==null)throw new Error("Columnnames may not be null.");const t=Y(K).nodes(function(l){return l.isObserved()});if(t.length>0)for(var o=0;o<t.length;o++){const l=t[o],s=l.getLabel();n.includes(s)&&!l.isLinked()?l.link():!n.includes(s)&&l.isLinked()&&l.unlink()}}async function yn(n){Shiny.setInputValue("down-requestData",{goal:n,random:Math.random()})}let Ye=Y(j),Xe=Y(te),bt=Y(Ve),Rt=Y(ce);function $t(){Y(K).elements().remove(),vn(),Ye.parsedModel=!1,Xe.fix_first=!0,Xe.mode="user model",Shiny.setInputValue("show_help",Math.random());for(let e in bt)bt[e]=null}function _t(n){$t();let e=JSON.parse(n),i=Y(K),t;t=JSON.parse(e.model);const o=JSON.parse(e.modelOpt),l=JSON.parse(e.gridViewOpt);zt(Xe,o),zt(Xe,l),e.fitCache!=null&&(bt=JSON.parse(e.fitCache)),Ye.loadingMode=!0,i.json({elements:t}),i.nodes().forEach(s=>{s.style({width:s.data("width")}),s.style({height:s.data("height")})}),Ye.dataAvail&&ht(Ye.columnNames),Xe.mode!=="user model"?Rt.showLav=!0:Rt.showLav=!1,i.nodes().forEach(s=>{pe(s.id())}),Ye.loadingMode=!1}function vt(){const n=Y(K);n.nodes().forEach(r=>{r.data("width",r.width()),r.data("height",r.height())});let e=n.json().elements;e.nodes.forEach(r=>{r.classes=r.classes.split(" ").filter(a=>a!==Ge).join(" ")});const i=JSON.stringify(e),t=JSON.stringify(Y(te)),o=JSON.stringify(Y(te)),l=JSON.stringify(Y(Ve));return JSON.stringify({model:i,modelOpt:t,gridViewOpt:o,fitCache:l})}function zt(n,e){for(let i in e)e.hasOwnProperty(i)&&e[i]!==void 0&&(n[i]=e[i])}function Ao(n){let e,i;return e=new ut({props:{name:"File",menuItems:n[1],minimal:!n[0]}}),{c(){z(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},p(t,[o]){const l={};o&2&&(l.menuItems=t[1]),o&1&&(l.minimal=!t[0]),e.$set(l)},i(t){i||(C(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){G(e,t)}}}function Oo(){document.getElementById("dataUpload-fileInput").click(),window.$("#upload-modal").modal()}function Bt(){const n=new Date;return`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}_${String(n.getHours()).padStart(2,"0")}-${String(n.getMinutes()).padStart(2,"0")}-${String(n.getSeconds()).padStart(2,"0")}`}function Fo(n,e,i){let t,o;ee(n,j,m=>i(2,t=m)),ee(n,pt,m=>i(3,o=m));let{full:l=!0}=e;q.use(In);function s(){t.modelEmpty?$t():bootbox.confirm("Are you sure you want to create a new model? This will delete the current model.",function(m){m&&$t()})}function r(m,$){ct.saveAs(m,"model."+$)}async function a(){const m=document.createElement("input");m.setAttribute("type","file"),m.setAttribute("accept",".lvm");const $=await new Promise(M=>{m.addEventListener("change",E=>M(E.target.files[0])),m.click()}),h=await new Promise(M=>{const E=new FileReader;E.readAsText($,"UTF-8"),E.onload=()=>M(E.result)});_t(h)}function u(){t.modelEmpty?a():bootbox.confirm("Are you sure you want to load a model? This will delete the current model.",function(m){m&&a()})}function d(){t.modelEmpty?f():bootbox.confirm("Are you sure you want to load model and data? This will delete the current model and data.",function(m){m&&f()})}function f(){const m=document.createElement("input");m.setAttribute("type","file"),m.setAttribute("accept",".lvd"),m.addEventListener("change",function($){const h=$.target.files[0],M=new FileReader;M.readAsArrayBuffer(h),M.onload=function(){const E=M.result;Mt.loadAsync(E).then(function(_){_.file("data.csv").async("base64").then(function(O){Shiny.setInputValue("dataUpload-fileInput",{content:O}),window.$("#upload-modal").modal();const Z=setInterval(()=>{t.dataAvail&&(clearInterval(Z),_.file("model.lvm").async("text").then(function(fe){_t(fe)}))},100)})})}}),m.click()}function g(){const m=vt();let $=new Blob([m],{type:"application/json;charset=utf-8"});ct.saveAs($,"model_"+Bt()+".lvm")}Shiny.addCustomMessageHandler("dataForDownload",function(m){(async()=>{const $=vt(),h=new Mt;h.file("model.lvm",$),h.file("data.csv",m);const M=await h.generateAsync({type:"blob"}),E=new File([M],"model_"+Bt()+".lvd",{type:"application/zip"});ct.saveAs(E)})()});function c(){const m=Y(K);H(j,t.dataAvail=!1,t),H(j,t.columnNames=null,t),H(j,t.loadedFileName=null,t),H(j,t.ids=null,t),H(pt,o=null,o),m.nodes().unlink(),Shiny.setInputValue("dataUpload-deleteData",Math.random())}function p(){const m=Y(K);r(m.png({bg:"white"}),"png")}function b(){const m=Y(K);r(m.jpg(),"jpg")}function v(){return Y(K).svg({scale:1,full:!0})}function y(){const m=v(),$=new Blob([m],{type:"image/svg+xml;charset=utf-8"});r($,"svg")}function S(){yn("download")}async function L(){const m=v(),h=new DOMParser().parseFromString(m,"image/svg+xml").documentElement;h.style.position="absolute",h.style.left="-9999px",document.body.appendChild(h);const M=h.getBoundingClientRect();document.body.removeChild(h);const E=M.width,_=M.height,O=new Nn({orientation:E>_?"landscape":"portrait",unit:"pt",format:[E,_]});await Tn(h,O,{width:E,height:_}),O.save("model.pdf")}let A;return n.$$set=m=>{"full"in m&&i(0,l=m.full)},n.$$.update=()=>{if(n.$$.dirty&5){let m=[{name:"New Model",action:s},{name:"Load Model",action:u},{name:"Load Data",action:Oo},{name:"Load Model and Data",action:d},{name:"Download Model",action:g,disable:t.modelEmpty},{name:"Remove Data",action:c,disable:!t.dataAvail},{name:"Download Model and Data",disable:t.modelEmpty||!t.dataAvail,action:S,divider:!0},{name:"Export Diagram to PNG",disable:t.modelEmpty,action:p},{name:"Export Diagram to JPG",disable:t.modelEmpty,action:b},{name:"Export Diagram to SVG",disable:t.modelEmpty,action:y},{name:"Export Diagram to PDF",disable:t.modelEmpty,action:L}];l?i(1,A=m):i(1,A=m.filter($=>["Download Model","Load Model"].includes($.name)||m.indexOf($)>=m.length-4))}},[l,A,t]}class wn extends W{constructor(e){super(),J(this,e,Fo,Ao,X,{full:0})}}function Io(n){let e;return{c(){e=R("span"),w(e,"class","glyphicon glyphicon-ok check-mark invisible"),w(e,"aria-hidden","true")},m(i,t){F(i,e,t)},d(i){i&&I(e)}}}function No(n){let e;return{c(){e=R("span"),w(e,"class","glyphicon glyphicon-ok check-mark"),w(e,"aria-hidden","true")},m(i,t){F(i,e,t)},d(i){i&&I(e)}}}function To(n){let e,i,t,o,l,s,r,a,u;function d(c,p){return c[0]?No:Io}let f=d(n),g=f(n);return{c(){e=R("li"),i=R("label"),t=R("input"),o=P(),g.c(),l=P(),s=$e(n[1]),w(t,"type","checkbox"),w(t,"class","check-box svelte-17cge7g"),t.disabled=n[2],w(i,"class",r=xe(n[2]?"disabled-label":"")+" svelte-17cge7g"),w(e,"class","svelte-17cge7g")},m(c,p){F(c,e,p),x(e,i),x(i,t),t.checked=n[0],x(i,o),g.m(i,null),x(i,l),x(i,s),a||(u=ne(t,"change",n[3]),a=!0)},p(c,[p]){p&4&&(t.disabled=c[2]),p&1&&(t.checked=c[0]),f!==(f=d(c))&&(g.d(1),g=f(c),g&&(g.c(),g.m(i,l))),p&2&&Re(s,c[1]),p&4&&r!==(r=xe(c[2]?"disabled-label":"")+" svelte-17cge7g")&&w(i,"class",r)},i:de,o:de,d(c){c&&I(e),g.d(),a=!1,u()}}}function Po(n,e,i){let{name:t}=e,{checked:o}=e,{disable:l=!1}=e;function s(){o=this.checked,i(0,o)}return n.$$set=r=>{"name"in r&&i(1,t=r.name),"checked"in r&&i(0,o=r.checked),"disable"in r&&i(2,l=r.disable)},[o,t,l,s]}class Ce extends W{constructor(e){super(),J(this,e,Po,To,X,{name:1,checked:0,disable:2})}}function xo(n){let e;return{c(){e=R("span"),w(e,"class","glyphicon glyphicon-ok check-mark invisible"),w(e,"aria-hidden","true")},m(i,t){F(i,e,t)},d(i){i&&I(e)}}}function Vo(n){let e;return{c(){e=R("span"),w(e,"class","glyphicon glyphicon-ok check-mark"),w(e,"aria-hidden","true")},m(i,t){F(i,e,t)},d(i){i&&I(e)}}}function Ro(n){let e,i,t,o=!1,l,s,r,a,u,d,f,g;function c(v,y){return v[0]===v[2]?Vo:xo}let p=c(n),b=p(n);return d=An(n[5][0]),{c(){e=R("div"),i=R("label"),t=R("input"),l=P(),b.c(),s=P(),r=$e(n[1]),w(t,"type","radio"),w(t,"name","meanStruc"),t.__value=n[2],t.value=t.__value,t.disabled=n[3],w(t,"class","svelte-lbhkwe"),w(i,"class",a=xe(n[3]?"text-muted":"")+" svelte-lbhkwe"),w(e,"class",u=xe(n[3]?"radio disabled":"radio")+" svelte-lbhkwe"),d.p(t)},m(v,y){F(v,e,y),x(e,i),x(i,t),t.checked=t.__value===n[0],x(i,l),b.m(i,null),x(i,s),x(i,r),f||(g=ne(t,"change",n[4]),f=!0)},p(v,[y]){y&4&&(t.__value=v[2],t.value=t.__value,o=!0),y&8&&(t.disabled=v[3]),(o||y&1)&&(t.checked=t.__value===v[0]),p!==(p=c(v))&&(b.d(1),b=p(v),b&&(b.c(),b.m(i,s))),y&2&&Re(r,v[1]),y&8&&a!==(a=xe(v[3]?"text-muted":"")+" svelte-lbhkwe")&&w(i,"class",a),y&8&&u!==(u=xe(v[3]?"radio disabled":"radio")+" svelte-lbhkwe")&&w(e,"class",u)},i:de,o:de,d(v){v&&I(e),b.d(),d.r(),f=!1,g()}}}function zo(n,e,i){let{name:t}=e,{value:o}=e,{group:l}=e,{isDisabled:s=!1}=e;const r=[[]];function a(){l=this.__value,i(0,l)}return n.$$set=u=>{"name"in u&&i(1,t=u.name),"value"in u&&i(2,o=u.value),"group"in u&&i(0,l=u.group),"isDisabled"in u&&i(3,s=u.isDisabled)},[l,t,o,s,a,r]}class ot extends W{constructor(e){super(),J(this,e,zo,Ro,X,{name:1,value:2,group:0,isDisabled:3})}}const Gt=[{name:"Arrows Created by Lavaan",modelSlot:"showLav"},{name:"Variance Arrows",modelSlot:"showVar"},{name:"Mean Arrows",modelSlot:"showMean"}];let Ut=[{name:"Estimate",value:"est"},{name:"Confidence Interval",value:"ci"},{name:"Estimate + p-value (stars)",value:"estPVal"},{name:"Estimate + Standard Error",value:"estSE"}];function Bo(n,e,i){const t=Y(K),o=e?"_std":"",l=kn(n,o,i);t.style().selector("edge.hasEst").style({label:l}).update();const s=jo(n,o,i);t.style().selector("edge.hasEst.label").style({label:s}).update();const r=qo(n,o,i);t.style().selector("edge.hasEstFixed").style({label:r}).update()}function Go(n,e,i){function t(d){return d.reduce((f,g,c)=>(g&&f.push(c),f),[])}const o=Y(K),l=[e,n,i],s=t(l),r=t(l.map(d=>!d)),a=s.concat(r);function u(d,f){return[c=>c.isLavaanAdded(),c=>c.isLoop(),c=>c.isMean()][d](f)}for(let d of a){const f=o.elements(function(g){return u(d,g)});if(l[d]?f.removeClass("hidden"):f.addClass("hidden"),d==2){const g=f.connectedEdges().connectedNodes(),c=f.connectedEdges();l[d]?c.forEach(p=>{p.removeClass("hidden")}):c.forEach(p=>{p.addClass("hidden")}),g.forEach(p=>{pe(p.id())})}else f.forEach(g=>{pe(g.source().id()),pe(g.target().id())})}}function Uo(n){return n===null?"NA":n<.001?"***":n<.01?"**":n<.05?"*":""}function kn(n,e,i){const t=o=>o===null?"NA":o.toFixed(i);switch(n){case"est":return o=>t(o.data("estimates")["est"+e]);case"ci":return o=>`[${t(o.data("estimates")["ciLow"+e])}, ${t(o.data("estimates")["ciHigh"+e])}]`;case"estPVal":return o=>`${t(o.data("estimates")["est"+e])}${Uo(o.data("estimates").p_value)}`;case"estSE":return o=>`${t(o.data("estimates")["est"+e])} (${t(o.data("estimates")["se"+e])})`;default:return()=>"NA"}}function jo(n,e,i){const t=kn(n,e,i);return o=>`${o.data("label")} = ${t(o)}`}function qo(n,e,i){const t=o=>o===null?"NA":o.toFixed(i);return o=>"@"+t(o.data("estimates")["estFixed"+e])}function Ho(n){let e,i,t,o,l,s;return{c(){e=R("li"),i=$e(n[1]),t=P(),o=R("input"),_e(o,"width","4em"),w(o,"type","number"),w(o,"min",n[2]),_e(e,"padding-left","28px")},m(r,a){F(r,e,a),x(e,i),x(e,t),x(e,o),lt(o,n[0]),l||(s=ne(o,"input",n[3]),l=!0)},p(r,[a]){a&2&&Re(i,r[1]),a&4&&w(o,"min",r[2]),a&1&&dt(o.value)!==r[0]&&lt(o,r[0])},i:de,o:de,d(r){r&&I(e),l=!1,s()}}}function Yo(n,e,i){let{name:t}=e,{value:o}=e,{min:l}=e;function s(){o=dt(this.value),i(0,o)}return n.$$set=r=>{"name"in r&&i(1,t=r.name),"value"in r&&i(0,o=r.value),"min"in r&&i(2,l=r.min)},[o,t,l,s]}class at extends W{constructor(e){super(),J(this,e,Yo,Ho,X,{name:1,value:0,min:2})}}function jt(n,e,i){const t=n.slice();return t[9]=e[i],t}function qt(n,e,i){const t=n.slice();return t[9]=e[i],t[12]=e,t[13]=i,t}function Ht(n){let e,i,t,o;function l(a){n[3](a,n[9])}function s(a){n[4](a,n[9])}let r={disable:!1};return n[9].name!==void 0&&(r.name=n[9].name),n[1][n[9].modelSlot]!==void 0&&(r.checked=n[1][n[9].modelSlot]),e=new Ce({props:r}),ie.push(()=>re(e,"name",l)),ie.push(()=>re(e,"checked",s)),{c(){z(e.$$.fragment)},m(a,u){B(e,a,u),o=!0},p(a,u){n=a;const d={};!i&&u&4&&(i=!0,d.name=n[9].name,ae(()=>i=!1)),!t&&u&6&&(t=!0,d.checked=n[1][n[9].modelSlot],ae(()=>t=!1)),e.$set(d)},i(a){o||(C(e.$$.fragment,a),o=!0)},o(a){D(e.$$.fragment,a),o=!1},d(a){G(e,a)}}}function Yt(n){let e,i,t;function o(s){n[6](s)}let l={name:n[9].name,value:n[9].value};return n[1].view!==void 0&&(l.group=n[1].view),e=new ot({props:l}),ie.push(()=>re(e,"group",o)),{c(){z(e.$$.fragment)},m(s,r){B(e,s,r),t=!0},p(s,r){const a={};!i&&r&2&&(i=!0,a.group=s[1].view,ae(()=>i=!1)),e.$set(a)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){D(e.$$.fragment,s),t=!1},d(s){G(e,s)}}}function Wo(n){let e,i,t,o,l,s,r,a,u,d,f,g,c,p,b,v,y,S,L,A,m=n[2],$=[];for(let k=0;k<m.length;k+=1)$[k]=Ht(qt(n,m,k));const h=k=>D($[k],1,1,()=>{$[k]=null});function M(k){n[5](k)}let E={name:"Standardized Estimates",disable:!1};n[1].std!==void 0&&(E.checked=n[1].std),o=new Ce({props:E}),ie.push(()=>re(o,"checked",M));let _=Ut,O=[];for(let k=0;k<_.length;k+=1)O[k]=Yt(jt(n,_,k));const Z=k=>D(O[k],1,1,()=>{O[k]=null});function fe(k){n[8](k)}let N={name:"Number Digits",min:0};return n[1].number_digits!==void 0&&(N.value=n[1].number_digits),v=new at({props:N}),ie.push(()=>re(v,"value",fe)),{c(){for(let k=0;k<$.length;k+=1)$[k].c();e=P(),i=R("li"),t=P(),z(o.$$.fragment),s=P(),r=R("li"),a=P();for(let k=0;k<O.length;k+=1)O[k].c();u=P(),d=R("li"),f=P(),g=R("li"),c=$e(`Confidence Level
    `),p=R("input"),b=P(),z(v.$$.fragment),w(i,"class","divider"),w(r,"class","divider"),w(d,"class","divider"),w(p,"type","number"),w(p,"min","0"),w(p,"max","0.999999"),w(p,"step","0.01"),_e(p,"width","4em"),_e(g,"padding-left","28px")},m(k,V){for(let U=0;U<$.length;U+=1)$[U]&&$[U].m(k,V);F(k,e,V),F(k,i,V),F(k,t,V),B(o,k,V),F(k,s,V),F(k,r,V),F(k,a,V);for(let U=0;U<O.length;U+=1)O[U]&&O[U].m(k,V);F(k,u,V),F(k,d,V),F(k,f,V),F(k,g,V),x(g,c),x(g,p),lt(p,n[1].ci),F(k,b,V),B(v,k,V),S=!0,L||(A=ne(p,"input",n[7]),L=!0)},p(k,V){if(V&6){m=k[2];let Q;for(Q=0;Q<m.length;Q+=1){const T=qt(k,m,Q);$[Q]?($[Q].p(T,V),C($[Q],1)):($[Q]=Ht(T),$[Q].c(),C($[Q],1),$[Q].m(e.parentNode,e))}for(ve(),Q=m.length;Q<$.length;Q+=1)h(Q);ye()}const U={};if(!l&&V&2&&(l=!0,U.checked=k[1].std,ae(()=>l=!1)),o.$set(U),V&2){_=Ut;let Q;for(Q=0;Q<_.length;Q+=1){const T=jt(k,_,Q);O[Q]?(O[Q].p(T,V),C(O[Q],1)):(O[Q]=Yt(T),O[Q].c(),C(O[Q],1),O[Q].m(u.parentNode,u))}for(ve(),Q=_.length;Q<O.length;Q+=1)Z(Q);ye()}V&2&&dt(p.value)!==k[1].ci&&lt(p,k[1].ci);const ue={};!y&&V&2&&(y=!0,ue.value=k[1].number_digits,ae(()=>y=!1)),v.$set(ue)},i(k){if(!S){for(let V=0;V<m.length;V+=1)C($[V]);C(o.$$.fragment,k);for(let V=0;V<_.length;V+=1)C(O[V]);C(v.$$.fragment,k),S=!0}},o(k){$=$.filter(Boolean);for(let V=0;V<$.length;V+=1)D($[V]);D(o.$$.fragment,k),O=O.filter(Boolean);for(let V=0;V<O.length;V+=1)D(O[V]);D(v.$$.fragment,k),S=!1},d(k){Oe($,k),k&&I(e),k&&I(i),k&&I(t),G(o,k),k&&I(s),k&&I(r),k&&I(a),Oe(O,k),k&&I(u),k&&I(d),k&&I(f),k&&I(g),k&&I(b),G(v,k),L=!1,A()}}}function Jo(n){let e,i;return e=new Ue({props:{name:"View",minimal:n[0],$$slots:{default:[Wo]},$$scope:{ctx:n}}}),{c(){z(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},p(t,[o]){const l={};o&1&&(l.minimal=t[0]),o&16390&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){i||(C(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){G(e,t)}}}function Xo(n,e,i){let t;ee(n,ce,f=>i(1,t=f));let{minimal:o=!1}=e;function l(f,g){n.$$.not_equal(g.name,f)&&(g.name=f,i(2,Gt))}function s(f,g){n.$$.not_equal(t[g.modelSlot],f)&&(t[g.modelSlot]=f,ce.set(t))}function r(f){n.$$.not_equal(t.std,f)&&(t.std=f,ce.set(t))}function a(f){n.$$.not_equal(t.view,f)&&(t.view=f,ce.set(t))}function u(){t.ci=dt(this.value),ce.set(t)}function d(f){n.$$.not_equal(t.number_digits,f)&&(t.number_digits=f,ce.set(t))}return n.$$set=f=>{"minimal"in f&&i(0,o=f.minimal)},n.$$.update=()=>{n.$$.dirty&2&&Shiny.setInputValue("ests-confindence_level",t.ci)},[o,t,Gt,l,s,r,a,u,d]}class En extends W{constructor(e){super(),J(this,e,Xo,Jo,X,{minimal:0})}}function Wt(n,e,i){const t=n.slice();return t[8]=e[i],t}function Jt(n){let e,i,t;function o(s){n[3](s)}let l={name:n[8].name,value:n[8].value};return n[0].meanStruc!==void 0&&(l.group=n[0].meanStruc),e=new ot({props:l}),ie.push(()=>re(e,"group",o)),{c(){z(e.$$.fragment)},m(s,r){B(e,s,r),t=!0},p(s,r){const a={};!i&&r&1&&(i=!0,a.group=s[0].meanStruc,ae(()=>i=!1)),e.$set(a)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){D(e.$$.fragment,s),t=!1},d(s){G(e,s)}}}function Zo(n){let e,i,t,o,l,s,r,a,u,d,f,g,c,p=n[2],b=[];for(let h=0;h<p.length;h+=1)b[h]=Jt(Wt(n,p,h));const v=h=>D(b[h],1,1,()=>{b[h]=null});function y(h){n[4](h)}function S(h){n[5](h)}let L={name:"Add Intercepts for all Observed Variables"};n[0].intOvFree!==void 0&&(L.checked=n[0].intOvFree),n[1]!==void 0&&(L.disable=n[1]),s=new Ce({props:L}),ie.push(()=>re(s,"checked",y)),ie.push(()=>re(s,"disable",S));function A(h){n[6](h)}function m(h){n[7](h)}let $={name:"Add Intercepts for all Latent Variables"};return n[0].intLvFree!==void 0&&($.checked=n[0].intLvFree),n[1]!==void 0&&($.disable=n[1]),d=new Ce({props:$}),ie.push(()=>re(d,"checked",A)),ie.push(()=>re(d,"disable",m)),{c(){e=R("li"),i=R("a"),i.textContent="Model Means?",t=P(),o=R("ul");for(let h=0;h<b.length;h+=1)b[h].c();l=P(),z(s.$$.fragment),u=P(),z(d.$$.fragment),w(i,"tabindex","-1"),w(i,"href","#"),w(i,"class","svelte-143y7r6"),w(o,"class","dropdown-menu svelte-143y7r6"),w(e,"class","dropdown-submenu svelte-143y7r6")},m(h,M){F(h,e,M),x(e,i),x(e,t),x(e,o);for(let E=0;E<b.length;E+=1)b[E]&&b[E].m(o,null);F(h,l,M),B(s,h,M),F(h,u,M),B(d,h,M),c=!0},p(h,M){if(M&5){p=h[2];let O;for(O=0;O<p.length;O+=1){const Z=Wt(h,p,O);b[O]?(b[O].p(Z,M),C(b[O],1)):(b[O]=Jt(Z),b[O].c(),C(b[O],1),b[O].m(o,null))}for(ve(),O=p.length;O<b.length;O+=1)v(O);ye()}const E={};!r&&M&1&&(r=!0,E.checked=h[0].intOvFree,ae(()=>r=!1)),!a&&M&2&&(a=!0,E.disable=h[1],ae(()=>a=!1)),s.$set(E);const _={};!f&&M&1&&(f=!0,_.checked=h[0].intLvFree,ae(()=>f=!1)),!g&&M&2&&(g=!0,_.disable=h[1],ae(()=>g=!1)),d.$set(_)},i(h){if(!c){for(let M=0;M<p.length;M+=1)C(b[M]);C(s.$$.fragment,h),C(d.$$.fragment,h),c=!0}},o(h){b=b.filter(Boolean);for(let M=0;M<b.length;M+=1)D(b[M]);D(s.$$.fragment,h),D(d.$$.fragment,h),c=!1},d(h){h&&I(e),Oe(b,h),h&&I(l),G(s,h),h&&I(u),G(d,h)}}}function Ko(n){let e,i;return e=new Ue({props:{name:Qo,$$slots:{default:[Zo]},$$scope:{ctx:n}}}),{c(){z(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},p(t,[o]){const l={};o&2051&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){i||(C(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){G(e,t)}}}let Qo="Mean Options";function ei(n,e,i){let t,o;ee(n,te,f=>i(0,o=f));let l=[{name:"Automatic",value:"default"},{name:"Yes",value:"true"},{name:"No",value:"false"}];function s(f){n.$$.not_equal(o.meanStruc,f)&&(o.meanStruc=f,te.set(o))}function r(f){n.$$.not_equal(o.intOvFree,f)&&(o.intOvFree=f,te.set(o))}function a(f){t=f,i(1,t),i(0,o)}function u(f){n.$$.not_equal(o.intLvFree,f)&&(o.intLvFree=f,te.set(o))}function d(f){t=f,i(1,t),i(0,o)}return n.$$.update=()=>{n.$$.dirty&1&&i(1,t=o.meanStruc==="false")},[o,t,l,s,r,a,u,d]}class ti extends W{constructor(e){super(),J(this,e,ei,Ko,X,{})}}function Xt(n,e,i){const t=n.slice();return t[9]=e[i],t}function Zt(n,e,i){const t=n.slice();return t[9]=e[i],t}function Kt(n,e,i){const t=n.slice();return t[9]=e[i],t}function Qt(n){let e,i,t;function o(s){n[4](s)}let l={name:n[9].name,value:n[9].value};return n[0].estimator!==void 0&&(l.group=n[0].estimator),e=new ot({props:l}),ie.push(()=>re(e,"group",o)),{c(){z(e.$$.fragment)},m(s,r){B(e,s,r),t=!0},p(s,r){const a={};!i&&r&1&&(i=!0,a.group=s[0].estimator,ae(()=>i=!1)),e.$set(a)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){D(e.$$.fragment,s),t=!1},d(s){G(e,s)}}}function en(n){let e,i,t;function o(s){n[5](s)}let l={name:n[9].name,value:n[9].value};return n[0].se!==void 0&&(l.group=n[0].se),e=new ot({props:l}),ie.push(()=>re(e,"group",o)),{c(){z(e.$$.fragment)},m(s,r){B(e,s,r),t=!0},p(s,r){const a={};!i&&r&1&&(i=!0,a.group=s[0].se,ae(()=>i=!1)),e.$set(a)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){D(e.$$.fragment,s),t=!1},d(s){G(e,s)}}}function tn(n){let e,i,t;function o(s){n[7](s)}let l={name:n[9].name,value:n[9].value};return n[0].missing!==void 0&&(l.group=n[0].missing),e=new ot({props:l}),ie.push(()=>re(e,"group",o)),{c(){z(e.$$.fragment)},m(s,r){B(e,s,r),t=!0},p(s,r){const a={};!i&&r&1&&(i=!0,a.group=s[0].missing,ae(()=>i=!1)),e.$set(a)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){D(e.$$.fragment,s),t=!1},d(s){G(e,s)}}}function ni(n){let e,i,t,o,l,s,r,a,u,d,f,g,c,p,b,v,y,S,L=n[1],A=[];for(let N=0;N<L.length;N+=1)A[N]=Qt(Kt(n,L,N));const m=N=>D(A[N],1,1,()=>{A[N]=null});let $=n[2],h=[];for(let N=0;N<$.length;N+=1)h[N]=en(Zt(n,$,N));const M=N=>D(h[N],1,1,()=>{h[N]=null});function E(N){n[6](N)}let _={name:"Number of Bootstrap Samples:",min:5};n[0].n_boot!==void 0&&(_.value=n[0].n_boot),f=new at({props:_}),ie.push(()=>re(f,"value",E));let O=n[3],Z=[];for(let N=0;N<O.length;N+=1)Z[N]=tn(Xt(n,O,N));const fe=N=>D(Z[N],1,1,()=>{Z[N]=null});return{c(){e=R("li"),i=R("a"),i.textContent="Estimator",t=P(),o=R("ul");for(let N=0;N<A.length;N+=1)A[N].c();l=P(),s=R("li"),r=R("a"),r.textContent="Standard Error",a=P(),u=R("ul");for(let N=0;N<h.length;N+=1)h[N].c();d=P(),z(f.$$.fragment),c=P(),p=R("li"),b=R("a"),b.textContent="Missing Values",v=P(),y=R("ul");for(let N=0;N<Z.length;N+=1)Z[N].c();w(i,"tabindex","-1"),w(i,"href","#"),w(i,"class","svelte-143y7r6"),w(o,"class","dropdown-menu svelte-143y7r6"),w(e,"class","dropdown-submenu svelte-143y7r6"),w(r,"tabindex","-1"),w(r,"href","#"),w(r,"class","svelte-143y7r6"),w(u,"class","dropdown-menu svelte-143y7r6"),w(s,"class","dropdown-submenu svelte-143y7r6"),w(b,"tabindex","-1"),w(b,"href","#"),w(b,"class","svelte-143y7r6"),w(y,"class","dropdown-menu svelte-143y7r6"),w(p,"class","dropdown-submenu svelte-143y7r6")},m(N,k){F(N,e,k),x(e,i),x(e,t),x(e,o);for(let V=0;V<A.length;V+=1)A[V]&&A[V].m(o,null);F(N,l,k),F(N,s,k),x(s,r),x(s,a),x(s,u);for(let V=0;V<h.length;V+=1)h[V]&&h[V].m(u,null);x(u,d),B(f,u,null),F(N,c,k),F(N,p,k),x(p,b),x(p,v),x(p,y);for(let V=0;V<Z.length;V+=1)Z[V]&&Z[V].m(y,null);S=!0},p(N,k){if(k&3){L=N[1];let U;for(U=0;U<L.length;U+=1){const ue=Kt(N,L,U);A[U]?(A[U].p(ue,k),C(A[U],1)):(A[U]=Qt(ue),A[U].c(),C(A[U],1),A[U].m(o,null))}for(ve(),U=L.length;U<A.length;U+=1)m(U);ye()}if(k&5){$=N[2];let U;for(U=0;U<$.length;U+=1){const ue=Zt(N,$,U);h[U]?(h[U].p(ue,k),C(h[U],1)):(h[U]=en(ue),h[U].c(),C(h[U],1),h[U].m(u,d))}for(ve(),U=$.length;U<h.length;U+=1)M(U);ye()}const V={};if(!g&&k&1&&(g=!0,V.value=N[0].n_boot,ae(()=>g=!1)),f.$set(V),k&9){O=N[3];let U;for(U=0;U<O.length;U+=1){const ue=Xt(N,O,U);Z[U]?(Z[U].p(ue,k),C(Z[U],1)):(Z[U]=tn(ue),Z[U].c(),C(Z[U],1),Z[U].m(y,null))}for(ve(),U=O.length;U<Z.length;U+=1)fe(U);ye()}},i(N){if(!S){for(let k=0;k<L.length;k+=1)C(A[k]);for(let k=0;k<$.length;k+=1)C(h[k]);C(f.$$.fragment,N);for(let k=0;k<O.length;k+=1)C(Z[k]);S=!0}},o(N){A=A.filter(Boolean);for(let k=0;k<A.length;k+=1)D(A[k]);h=h.filter(Boolean);for(let k=0;k<h.length;k+=1)D(h[k]);D(f.$$.fragment,N),Z=Z.filter(Boolean);for(let k=0;k<Z.length;k+=1)D(Z[k]);S=!1},d(N){N&&I(e),Oe(A,N),N&&I(l),N&&I(s),Oe(h,N),G(f),N&&I(c),N&&I(p),Oe(Z,N)}}}function oi(n){let e,i;return e=new Ue({props:{name:ii,$$slots:{default:[ni]},$$scope:{ctx:n}}}),{c(){z(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},p(t,[o]){const l={};o&65537&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){i||(C(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){G(e,t)}}}const ii="Estimation";function si(n,e,i){let t;ee(n,te,f=>i(0,t=f));const o=[{value:"default",name:"Default"},{value:"ML",name:"Maximum Likelihood (ML)"},{value:"GLS",name:"Generalized Least Squares (GLS)"},{value:"WLS",name:"Weighted Least Squares (WLS)"},{value:"ULS",name:"Unweighted Least Squares (ULS)"},{value:"DLS",name:"Distributionally-weighted Least Squares (DLW)"}],l=[{value:"default",name:"Default"},{value:"robust",name:"Robust"},{value:"boot",name:"Bootstrap"}],s=[{value:"listwise",name:"Listwise Deletion"},{value:"ml",name:"Full Information Maximum Likelihood (FIML)"}];function r(f){n.$$.not_equal(t.estimator,f)&&(t.estimator=f,te.set(t))}function a(f){n.$$.not_equal(t.se,f)&&(t.se=f,te.set(t))}function u(f){n.$$.not_equal(t.n_boot,f)&&(t.n_boot=f,te.set(t))}function d(f){n.$$.not_equal(t.missing,f)&&(t.missing=f,te.set(t))}return[t,o,l,s,r,a,u,d]}class li extends W{constructor(e){super(),J(this,e,si,oi,X,{})}}let gt=0,Cn=!1;function Sn(){return typeof Shiny=="object"&&Shiny!==null}function ri(n){const e=Object.keys(n),i=n[e[0]].length,t=[];for(let o=0;o<i;o++){const l={};for(const s of e)l[s]=n[s][o];t.push(l)}return t}function st(n,e=!0){Cn=e,gt=gt+1;let i=bn(!0);i.name=n,i.counter=gt,Sn()&&Shiny.setInputValue("layout-layout",JSON.stringify(i))}Sn()&&Shiny.addCustomMessageHandler("semPlotLayout",function(n){n=ri(n);const e=125,i=200;let t=1/0,o=1/0;for(let u=0;u<n.length;u++)for(let d=u+1;d<n.length;d++){const f=Math.abs(n[u].x-n[d].x),g=Math.abs(n[u].y-n[d].y);f<t&&n[u].y===n[d].y&&(t=f),g<o&&g!==0&&(o=g)}const l=e/t,s=i/o;let r={};n.forEach(u=>{const d=u.x*l+400,f=u.y*-1*s+400;r[u.name]={x:d,y:f}});let a={name:"preset",positions:function(u){const d=u.data("label");return r[d]},fit:!0,padding:60,animate:!0};Cn?Y(Le).do("layout",{options:a}):Y(K).layout(a).run()});function ai(n){let e,i;return e=new ut({props:{name:"Apply Layout",menuItems:n[1],minimal:n[0]}}),{c(){z(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},p(t,[o]){const l={};o&2&&(l.menuItems=t[1]),o&1&&(l.minimal=t[0]),e.$set(l)},i(t){i||(C(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){G(e,t)}}}function di(n,e,i){let t,o,l;ee(n,j,g=>i(2,o=g)),ee(n,Le,g=>i(3,l=g));let{minimal:s=!1}=e;Y(K),we(()=>{q.use(Pn),q.use(xn),q.use(Vn)});function r(){const g={name:"dagre",rankSep:150,animate:!0};l.do("layout",{options:g})}function a(){const g={name:"breadthfirst",animate:!0,spacingFactor:1};l.do("layout",{options:g})}function u(){const g={name:"circle",animate:!0};l.do("layout",{options:g})}function d(){const g={name:"fcose",animate:!0,idealEdgeLength:c=>150,quality:"proof",randomize:!1,nodeSeparation:200};l.do("layout",{options:g})}function f(){const g={name:"cola",animate:!0,nodeSpacing(c){return 50}};l.do("layout",{options:g})}return n.$$set=g=>{"minimal"in g&&i(0,s=g.minimal)},n.$$.update=()=>{n.$$.dirty&4&&i(1,t=[{name:"Recommended: Tree",action:()=>st("tree"),disable:o.modelEmpty},{name:"Recommended: Tree2",action:()=>st("tree2"),disable:o.modelEmpty},{name:"Recommended: Tree3",action:()=>st("tree3"),disable:o.modelEmpty},{name:"Experimental: Tree",action:r,disable:o.modelEmpty},{name:"Experimental: Tree2",action:a,disable:o.modelEmpty},{name:"Experimental: Circle",action:u,disable:o.modelEmpty},{name:"Experimental: Force-directed",action:d,disable:o.modelEmpty},{name:"Experimental: Cola",action:f,disable:o.modelEmpty}])},[s,t,o]}class Ln extends W{constructor(e){super(),J(this,e,di,ai,X,{minimal:0})}}function nn(n,e,i){const t=n.slice();return t[4]=e[i],t[5]=e,t[6]=i,t}function on(n){let e,i,t,o;function l(a){n[2](a,n[4])}function s(a){n[3](a,n[4])}let r={};return n[4].name!==void 0&&(r.name=n[4].name),n[1][n[4].modelProperty]!==void 0&&(r.checked=n[1][n[4].modelProperty]),e=new Ce({props:r}),ie.push(()=>re(e,"name",l)),ie.push(()=>re(e,"checked",s)),{c(){z(e.$$.fragment)},m(a,u){B(e,a,u),o=!0},p(a,u){n=a;const d={};!i&&u&1&&(i=!0,d.name=n[4].name,ae(()=>i=!1)),!t&&u&3&&(t=!0,d.checked=n[1][n[4].modelProperty],ae(()=>t=!1)),e.$set(d)},i(a){o||(C(e.$$.fragment,a),o=!0)},o(a){D(e.$$.fragment,a),o=!1},d(a){G(e,a)}}}function ui(n){let e,i,t=n[0],o=[];for(let s=0;s<t.length;s+=1)o[s]=on(nn(n,t,s));const l=s=>D(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();e=Be()},m(s,r){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(s,r);F(s,e,r),i=!0},p(s,r){if(r&3){t=s[0];let a;for(a=0;a<t.length;a+=1){const u=nn(s,t,a);o[a]?(o[a].p(u,r),C(o[a],1)):(o[a]=on(u),o[a].c(),C(o[a],1),o[a].m(e.parentNode,e))}for(ve(),a=t.length;a<o.length;a+=1)l(a);ye()}},i(s){if(!i){for(let r=0;r<t.length;r+=1)C(o[r]);i=!0}},o(s){o=o.filter(Boolean);for(let r=0;r<o.length;r+=1)D(o[r]);i=!1},d(s){Oe(o,s),s&&I(e)}}}function ci(n){let e,i;return e=new Ue({props:{name:fi,$$slots:{default:[ui]},$$scope:{ctx:n}}}),{c(){z(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},p(t,[o]){const l={};o&131&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){i||(C(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){G(e,t)}}}const fi="Automatically..";function mi(n,e,i){let t;ee(n,te,r=>i(1,t=r));const o=[{name:"Fix Factor Loading of First Indicator at 1",modelProperty:"fix_first"},{name:"Include Variances",modelProperty:"auto_var"},{name:"Include Covariances of Exogenous Latent Variables",modelProperty:"auto_cov_lv_x"},{name:"Include Covariances of Dependent Variables",modelProperty:"auto_cov_y"},{name:"Fix Variance of Only Indicator to 0",modelProperty:"fix_single"},{name:"Treat Exogenous Observed Variables as Fixed Variables",modelProperty:"fixed_x"}];function l(r,a){n.$$.not_equal(a.name,r)&&(a.name=r,i(0,o))}function s(r,a){n.$$.not_equal(t[a.modelProperty],r)&&(t[a.modelProperty]=r,te.set(t))}return[o,t,l,s]}class gi extends W{constructor(e){super(),J(this,e,mi,ci,X,{})}}function pi(n){let e,i;return e=new ut({props:{name:"Help",menuItems:n[0]}}),{c(){z(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},p:de,i(t){i||(C(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){G(e,t)}}}function hi(){Shiny.setInputValue("show_help",Math.random())}function bi(){window.open("https://doi.org/10.31234/osf.io/f4ary","_blank")}function $i(n){let e;const i=[{name:"Show Commands",action:hi},{name:"Open Tutorial",action:bi},{name:"About",action:t}];function t(){bootbox.alert({title:"About Lavaangui",message:`Version: ${e}<br> Author: Julian D. Karch<br> Email: j.d.karch@fsw.leidenuniv.nl`})}return Shiny.addCustomMessageHandler("version",function(o){e=o[0].join(".")}),[i]}class _i extends W{constructor(e){super(),J(this,e,$i,pi,X,{})}}function vi(n){let e,i,t,o,l,s,r,a,u,d,f,g,c,p,b,v,y,S,L,A,m;function $(T){n[2](T)}let h={name:"Show Grid"};n[1].gridShow!==void 0&&(h.checked=n[1].gridShow),e=new Ce({props:h}),ie.push(()=>re(e,"checked",$));function M(T){n[3](T)}let E={name:"Snap to Grid"};n[1].gridSnap!==void 0&&(E.checked=n[1].gridSnap),o=new Ce({props:E}),ie.push(()=>re(o,"checked",M));function _(T){n[4](T)}let O={name:"Resize to Grid"};n[1].gridResize!==void 0&&(O.checked=n[1].gridResize),r=new Ce({props:O}),ie.push(()=>re(r,"checked",_));function Z(T){n[5](T)}let fe={name:"Snap to Alignment on Release"};n[1].gridAlign!==void 0&&(fe.checked=n[1].gridAlign),d=new Ce({props:fe}),ie.push(()=>re(d,"checked",Z));function N(T){n[6](T)}let k={name:"Move Grid on Pan"};n[1].gridMovePan!==void 0&&(k.checked=n[1].gridMovePan),c=new Ce({props:k}),ie.push(()=>re(c,"checked",N));function V(T){n[7](T)}let U={name:"Grid Spacing:",min:5};n[1].gridSpace!==void 0&&(U.value=n[1].gridSpace),v=new at({props:U}),ie.push(()=>re(v,"value",V));function ue(T){n[8](T)}let Q={name:"Line Width:",min:0};return n[1].gridWidth!==void 0&&(Q.value=n[1].gridWidth),L=new at({props:Q}),ie.push(()=>re(L,"value",ue)),{c(){z(e.$$.fragment),t=P(),z(o.$$.fragment),s=P(),z(r.$$.fragment),u=P(),z(d.$$.fragment),g=P(),z(c.$$.fragment),b=P(),z(v.$$.fragment),S=P(),z(L.$$.fragment)},m(T,se){B(e,T,se),F(T,t,se),B(o,T,se),F(T,s,se),B(r,T,se),F(T,u,se),B(d,T,se),F(T,g,se),B(c,T,se),F(T,b,se),B(v,T,se),F(T,S,se),B(L,T,se),m=!0},p(T,se){const je={};!i&&se&2&&(i=!0,je.checked=T[1].gridShow,ae(()=>i=!1)),e.$set(je);const wt={};!l&&se&2&&(l=!0,wt.checked=T[1].gridSnap,ae(()=>l=!1)),o.$set(wt);const kt={};!a&&se&2&&(a=!0,kt.checked=T[1].gridResize,ae(()=>a=!1)),r.$set(kt);const Et={};!f&&se&2&&(f=!0,Et.checked=T[1].gridAlign,ae(()=>f=!1)),d.$set(Et);const Ct={};!p&&se&2&&(p=!0,Ct.checked=T[1].gridMovePan,ae(()=>p=!1)),c.$set(Ct);const St={};!y&&se&2&&(y=!0,St.value=T[1].gridSpace,ae(()=>y=!1)),v.$set(St);const Lt={};!A&&se&2&&(A=!0,Lt.value=T[1].gridWidth,ae(()=>A=!1)),L.$set(Lt)},i(T){m||(C(e.$$.fragment,T),C(o.$$.fragment,T),C(r.$$.fragment,T),C(d.$$.fragment,T),C(c.$$.fragment,T),C(v.$$.fragment,T),C(L.$$.fragment,T),m=!0)},o(T){D(e.$$.fragment,T),D(o.$$.fragment,T),D(r.$$.fragment,T),D(d.$$.fragment,T),D(c.$$.fragment,T),D(v.$$.fragment,T),D(L.$$.fragment,T),m=!1},d(T){G(e,T),T&&I(t),G(o,T),T&&I(s),G(r,T),T&&I(u),G(d,T),T&&I(g),G(c,T),T&&I(b),G(v,T),T&&I(S),G(L,T)}}}function yi(n){let e,i;return e=new Ue({props:{minimal:n[0],name:"Grid Options",$$slots:{default:[vi]},$$scope:{ctx:n}}}),{c(){z(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},p(t,[o]){const l={};o&1&&(l.minimal=t[0]),o&514&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){i||(C(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){G(e,t)}}}function wi(n,e,i){let t;ee(n,ce,g=>i(1,t=g));let{minimal:o=!1}=e;function l(g){n.$$.not_equal(t.gridShow,g)&&(t.gridShow=g,ce.set(t))}function s(g){n.$$.not_equal(t.gridSnap,g)&&(t.gridSnap=g,ce.set(t))}function r(g){n.$$.not_equal(t.gridResize,g)&&(t.gridResize=g,ce.set(t))}function a(g){n.$$.not_equal(t.gridAlign,g)&&(t.gridAlign=g,ce.set(t))}function u(g){n.$$.not_equal(t.gridMovePan,g)&&(t.gridMovePan=g,ce.set(t))}function d(g){n.$$.not_equal(t.gridSpace,g)&&(t.gridSpace=g,ce.set(t))}function f(g){n.$$.not_equal(t.gridWidth,g)&&(t.gridWidth=g,ce.set(t))}return n.$$set=g=>{"minimal"in g&&i(0,o=g.minimal)},[o,t,l,s,r,a,u,d,f]}class Mn extends W{constructor(e){super(),J(this,e,wi,yi,X,{minimal:0})}}function ki(n){return window.$(document).ready(function(){var e=!1;window.$(".navbar .dropdown").hover(function(){e&&(window.$(".navbar .dropdown").removeClass("open"),window.$(this).addClass("open"))},function(){}),window.$(".navbar .dropdown").on("show.bs.dropdown",function(){e=!0}),window.$(".navbar .dropdown").on("hide.bs.dropdown",function(){window.$(".navbar .dropdown.open").length<=1&&(e=!1)})}),[]}class Ei extends W{constructor(e){super(),J(this,e,ki,null,X,{})}}function Ci(n){let e,i;return e=new ut({props:{name:"Edit",menuItems:n[0]}}),{c(){z(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},p(t,[o]){const l={};o&1&&(l.menuItems=t[0]),e.$set(l)},i(t){i||(C(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){G(e,t)}}}function Si(n,e,i){let t,o;ee(n,j,a=>i(1,t=a)),ee(n,Le,a=>i(2,o=a));function l(){o.undo()}function s(){o.redo()}let r=[];return n.$$.update=()=>{n.$$.dirty&2&&i(0,r=[{name:"Undo",action:l,disable:t.undoEmpty},{name:"Redo",action:s,disable:t.redoEmpty}])},[r,t]}class Li extends W{constructor(e){super(),J(this,e,Si,Ci,X,{})}}function Mi(n){let e,i,t,o,l,s,r,a,u,d,f,g,c,p,b,v,y,S,L,A;return e=new wn({}),t=new Li({}),l=new En({}),r=new ti({}),u=new gi({}),f=new li({}),c=new Ln({}),b=new Mn({}),y=new _i({}),L=new Ei({}),{c(){z(e.$$.fragment),i=P(),z(t.$$.fragment),o=P(),z(l.$$.fragment),s=P(),z(r.$$.fragment),a=P(),z(u.$$.fragment),d=P(),z(f.$$.fragment),g=P(),z(c.$$.fragment),p=P(),z(b.$$.fragment),v=P(),z(y.$$.fragment),S=P(),z(L.$$.fragment)},m(m,$){B(e,m,$),F(m,i,$),B(t,m,$),F(m,o,$),B(l,m,$),F(m,s,$),B(r,m,$),F(m,a,$),B(u,m,$),F(m,d,$),B(f,m,$),F(m,g,$),B(c,m,$),F(m,p,$),B(b,m,$),F(m,v,$),B(y,m,$),F(m,S,$),B(L,m,$),A=!0},i(m){A||(C(e.$$.fragment,m),C(t.$$.fragment,m),C(l.$$.fragment,m),C(r.$$.fragment,m),C(u.$$.fragment,m),C(f.$$.fragment,m),C(c.$$.fragment,m),C(b.$$.fragment,m),C(y.$$.fragment,m),C(L.$$.fragment,m),A=!0)},o(m){D(e.$$.fragment,m),D(t.$$.fragment,m),D(l.$$.fragment,m),D(r.$$.fragment,m),D(u.$$.fragment,m),D(f.$$.fragment,m),D(c.$$.fragment,m),D(b.$$.fragment,m),D(y.$$.fragment,m),D(L.$$.fragment,m),A=!1},d(m){G(e,m),m&&I(i),G(t,m),m&&I(o),G(l,m),m&&I(s),G(r,m),m&&I(a),G(u,m),m&&I(d),G(f,m),m&&I(g),G(c,m),m&&I(p),G(b,m),m&&I(v),G(y,m),m&&I(S),G(L,m)}}}function Di(n){let e,i;return e=new ko({props:{$$slots:{default:[Mi]},$$scope:{ctx:n}}}),{c(){z(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},p(t,[o]){const l={};o&1&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){i||(C(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){G(e,t)}}}class Ai extends W{constructor(e){super(),J(this,e,null,Di,X,{})}}function Oi(n){let e;return{c(){e=R("pre"),w(e,"id","res-results"),w(e,"class","shiny-html-output well svelte-74yvxb"),w(e,"data-testid","result-text")},m(i,t){F(i,e,t)},p:de,i:de,o:de,d(i){i&&I(e)}}}class Fi extends W{constructor(e){super(),J(this,e,null,Oi,X,{})}}function Ii(n){return window.cy=Y(K),j.subscribe(e=>{window.appState=e}),te.subscribe(e=>{window.modelOptions=e}),pt.subscribe(e=>{window.dataInfo=e}),Ve.subscribe(e=>{window.fitCache=e}),ce.subscribe(e=>{window.gridViewOptions=e}),Le.subscribe(e=>{window.ur=e}),[]}class Ni extends W{constructor(e){super(),J(this,e,Ii,null,X,{})}}function Ti(n){return new RegExp("^[a-zA-Z\\._][a-zA-Z0-9\\._]*(?<!\\.)$").test(n)}function sn(n){return n==""?(bootbox.alert("Provide a label"),!1):Ti(n)?!0:(bootbox.alert("Provide a valid label"),!1)}function Pi(n,e){const i=e?"full":"minimal";return n.filter(t=>t.show===i||t.show==="both")}function xi(n,e,i){let t,o,l;ee(n,j,c=>i(1,t=c)),ee(n,Le,c=>i(2,o=c)),ee(n,te,c=>i(3,l=c));let s=Y(K);q.use(Rn);var r=new zn.ColorPicker("#picker",{width:200,color:"rgb(255, 0, 0)",borderWidth:1,borderColor:"#fff"});function a(c,p){var b;const v=s.$(":selected");if(v.length>1){if(p==="nodes"&&!v.every(y=>y.isNode()))return bootbox.alert("Not all selected elements are nodes. Aborting"),null;if(p==="edges"&&!v.every(y=>y.isEdge()))return bootbox.alert("Not all selected elements are edges. Aborting"),null;if(p==="nodes.edges"&&!v.every(y=>y.isEdge()||y.isNode()))return bootbox.alert("Not all selected elements are nodes or edges. Aborting"),null;b=v}else b=c;return b}const u=[{id:"add-observed",content:"Add Observed Variable",coreAsWell:!0,onClickFunction(c){const p=c.renderedPosition;he(le,p)},show:"full"},{id:"add-latent",content:"Add Latent Variable",coreAsWell:!0,onClickFunction(c){const p=c.renderedPosition;he(me,p)},show:"full"},{id:"add-constant",content:"Add Constant Variable",coreAsWell:!0,onClickFunction(c){const p=c.renderedPosition;he(Se,p)},show:"full"},{id:"label-para",content:"Add/Change Label",selector:`edge.${ge}`,onClickFunction(c){const p=c.target||c.cyTarget;bootbox.prompt({title:"Enter a Label",value:p.getLabel(),callback(b){if(!sn(b))return!1;b!==p.getLabel()&&b!==null&&(p.addLabel(b),oe(l.mode))}})},show:"full",hasTrailingDivider:!1},{id:"label-remove",content:"Remove Label",selector:`edge.${ze}`,onClickFunction(c){(c.target||c.cyTarget).removeLabel(),oe(l.mode)},show:"both",hasTrailingDivider:!1},{id:"remove-edge",content:"Delete Edge",selector:`edge.${ge}`,onClickFunction(c){(c.target||c.cyTarget).remove(),oe(l.mode)},show:"full",hasTrailingDivider:!0},{id:"fix-para",content:"Fix Parameter",selector:`edge.${ke}.${ge}, edge.${De}.${ge}`,onClickFunction(c){const p=c.target||c.cyTarget;bootbox.prompt({title:"Enter a Value",inputType:"number",callback(b){if(b=="")return bootbox.alert("Provide a value"),!1;b!==null&&(p.fixPara(b),oe(l.mode))}})},show:"full",hasTrailingDivider:!1},{id:"free-para",content:"Free Parameter",selector:`edge.${Ee}.${ge}, edge.${De}.${ge}`,onClickFunction(c){var p=c.target||c.cyTarget;p.freePara(),oe(l.mode)},show:"full",hasTrailingDivider:!1},{id:"free-force-para",content:"Force Parameter Free",selector:`edge.${ke}.${ge}, edge.${Ee}.${ge}`,onClickFunction(c){(c.target||c.cyTarget).forceFreePara(),oe(l.mode)},show:"full",hasTrailingDivider:!0},{id:"revert-arrow",content:"Revert Direction",selector:`edge[isMean="0"].${Fe}.${ge}`,onClickFunction(c){(c.target||c.cyTarget).revert(),oe(l.mode)},show:"full",hasTrailingDivider:!1},{id:"set-undirected",content:"Set Undirected",selector:`edge[isMean="0"].${Fe}.${ge}`,onClickFunction(c){(c.target||c.cyTarget).setUndirected(),oe(l.mode)},show:"full",hasTrailingDivider:!0},{id:"set-arrow",content:"Set Directed",selector:`edge.${Ie}.${ge}`,onClickFunction(c){(c.target||c.cyTarget).setDirected(),oe(l.mode)},show:"full",hasTrailingDivider:!0},{id:"free-orientation",content:"Free Loop Orientation",selector:`edge.${rt}.fixDeg`,onClickFunction(c){const p=c.target||c.cyTarget;p.removeClass("fixDeg"),pe(p.source().id())},show:"both",hasTrailingDivider:!0},{id:"change-fromUser",content:"Include in User Model",selector:`edge.${Ae}`,onClickFunction(c){(c.target||c.cyTarget).markAddedUser(),oe(l.mode)},show:"full",hasTrailingDivider:!0},{id:"color-edge",content:"Change Edge Color",selector:"edge",show:"both",onClickFunction(c){var p=c.target||c.cyTarget;const b=a(p,"edges");if(b===null)return null;f(p,b,"edge")}},{id:"change-line-width",content:"Change Line Width",show:"both",selector:"edge",onClickFunction(c){var p=c.target||c.cyTarget;const b=a(p,"edges");if(b===null)return null;bootbox.prompt({title:"Enter New Line Width:",value:p.style("width"),callback(v){v!==null&&o.do("style",{eles:b,style:{width:v}})}})}},{id:"rename-node",show:"full",content:"Rename Variable",selector:`node.${me}, node.${le}`,onClickFunction(c){const p=c.target||c.cyTarget,b=t.columnNames;let v;t.dataAvail&&(v=b.map(S=>`<option value="${S}">${S}</option>`).join(""));const y=t.dataAvail&&p.isObserved()?`
      <label>Or Select From Variables in Your Data:</label>
      <select class="form-control" id="label-dropdown">
        <option value="">--Select--</option>
        ${v}
      </select>
    `:"";bootbox.dialog({title:"Rename Variable",message:`
      <div>
        <label>Enter a label:</label>
        <input type="text" class="form-control" id="new-label" value=${p.getLabel()}>
        ${y}
      </div>
    `,buttons:{cancel:{label:"Cancel",className:"btn-default"},confirm:{label:"Rename",className:"btn-primary",callback(){let S=document.getElementById("new-label").value;const L=t.dataAvail&&p.isObserved()?document.getElementById("label-dropdown").value:"";let A;if(S==p.getLabel()&&L!=""?A=L:A=S,!sn(A))return!1;A&&(p.setLabel(A),b&&b.includes(p.getLabel())?(p.link(),be("success",`Variable ${p.data("label")} linked to data`)):p.isLinked()&&(p.unlink(),be("info",`Variable ${p.getLabel()} unlinked`)),oe(l.mode))}}},onShown(S){document.getElementById("new-label").addEventListener("keypress",function(L){L.key==="Enter"&&(L.preventDefault(),S.target.querySelector(".btn-primary").click())})}})}},{id:"remove-node",content:"Delete Variable",selector:`node.${me}, node.${le}, node.${Se}`,onClickFunction(c){(c.target||c.cyTarget).remove(),oe(l.mode)},show:"full",hasTrailingDivider:!0},{id:"change-latent",content:"Change to Latent",selector:`node.${le}`,onClickFunction(c){(c.target||c.cyTarget).makeLatent(),oe(l.mode)},show:"full",hasTrailingDivider:!1},{id:"change-ordered",content:"Change to Ordered",selector:`node.${le}.${Ze}`,onClickFunction(c){(c.target||c.cyTarget).makeOrdered(),oe(l.mode)},show:"full",hasTrailingDivider:!0},{id:"change-continous",content:"Change to Continous",selector:`node.${le}.${Je}`,onClickFunction(c){(c.target||c.cyTarget).makeContinous(),oe(l.mode)},show:"full",hasTrailingDivider:!0},{id:"change-observed",show:"full",content:"Change to Observed",selector:`node.${me}`,hasTrailingDivider:!0,onClickFunction(c){const p=c.target||c.cyTarget;p.makeObserved();let b=t.columnNames;b&&b.includes(p.getLabel())&&(p.link(),bootbox.alert("Variable linked with data set")),oe(l.mode)}},{id:"color-node",content:"Change Background Color",selector:"node",show:"both",onClickFunction(c){var p=c.target||c.cyTarget;const b=a(p,"nodes");if(b===null)return null;f(p,b,"nodes")}},{id:"change-border-width",content:"Change Border Width",show:"both",selector:`node.${me}, node.${le}, node.${Se}`,onClickFunction(c){var p=c.target||c.cyTarget;const b=a(p,"nodes");if(b===null)return null;bootbox.prompt({title:"Enter New Border Width:",value:p.style("border-width"),callback(v){v!==null&&o.do("style",{eles:b,style:{"border-width":v}})}})}},{id:"change-font-size",content:"Change Font Size",show:"both",hasTrailingDivider:!0,selector:`node.${me}, node.${le}, node.${Se}, edge`,onClickFunction(c){var p=c.target||c.cyTarget;const b=a(p,"nodes.edges");if(b===null)return null;bootbox.prompt({title:"Enter New Font Size:",value:p.style("font-size"),callback(v){v!==null&&o.do("style",{eles:b,style:{"font-size":v}})}})}}];let d;function f(c,p,b){var v=document.getElementById("picker");v.style.display="block",v.style.left=event.pageX+"px",v.style.top=event.pageY+"px";let y;d=p;const S=function(m){y=m.hexString};r.on("color:change",S);const L=function(m){v.contains(m.target)||(b=="edge"?o.do("style",{eles:d,style:{"line-color":y,"target-arrow-color":y,"source-arrow-color":y}}):o.do("style",{eles:d,style:{"background-color":y}}),v.style.display="none",r.off("color:change",S),document.removeEventListener("click",L),document.removeEventListener("keydown",A))};setTimeout(()=>document.addEventListener("click",L),0);const A=function(m){m.key==="Enter"&&L(m)};document.addEventListener("keydown",A)}const g=Pi(u,t.full);return we(()=>{s.contextMenus({menuItems:g})}),[]}class Vi extends W{constructor(e){super(),J(this,e,xi,null,X,{})}}function Ri(n){let e,i,t,o,l,s,r,a,u,d,f,g,c,p,b,v,y,S,L,A,m,$,h,M;return{c(){e=R("div"),i=R("button"),t=$e("Show Data"),l=P(),s=R("div"),r=R("button"),a=$e("User Model"),d=P(),f=R("button"),g=$e("Autocompleted Model"),p=P(),b=R("button"),v=$e("Estimates"),L=P(),A=R("button"),m=$e("More Results"),w(i,"class","btn btn-lg btn-default"),i.disabled=o=!n[2].dataAvail,w(r,"class",u="btn btn-lg "+(n[1]==="user model"?"btn-primary active":"btn-default")),w(f,"class",c="btn btn-lg "+(n[1]==="full model"?"btn-primary active":"btn-default")),w(b,"class",y="btn btn-lg "+(n[1]==="estimate"?"btn-primary active":"btn-default")),b.disabled=S=!n[2].dataAvail||n[2].modelEmpty,w(s,"class","btn-group btn-toggle svelte-xny576"),w(A,"class","btn btn-lg btn-default"),A.disabled=$=n[0].mode!="estimate",w(e,"class","toolbox navbar-static-bottom svelte-xny576")},m(E,_){F(E,e,_),x(e,i),x(i,t),x(e,l),x(e,s),x(s,r),x(r,a),x(s,d),x(s,f),x(f,g),x(s,p),x(s,b),x(b,v),x(e,L),x(e,A),x(A,m),h||(M=[ne(i,"click",n[6]),ne(r,"click",n[7]),ne(f,"click",n[8]),ne(b,"click",n[9]),ne(A,"click",n[10])],h=!0)},p(E,[_]){_&4&&o!==(o=!E[2].dataAvail)&&(i.disabled=o),_&2&&u!==(u="btn btn-lg "+(E[1]==="user model"?"btn-primary active":"btn-default"))&&w(r,"class",u),_&2&&c!==(c="btn btn-lg "+(E[1]==="full model"?"btn-primary active":"btn-default"))&&w(f,"class",c),_&2&&y!==(y="btn btn-lg "+(E[1]==="estimate"?"btn-primary active":"btn-default"))&&w(b,"class",y),_&4&&S!==(S=!E[2].dataAvail||E[2].modelEmpty)&&(b.disabled=S),_&1&&$!==($=E[0].mode!="estimate")&&(A.disabled=$)},i:de,o:de,d(E){E&&I(e),h=!1,Ke(M)}}}function zi(){window.$("#data-modal-2").modal()}function Bi(n,e,i){let t,o,l;ee(n,te,b=>i(0,t=b)),ee(n,j,b=>i(2,o=b)),ee(n,ce,b=>i(11,l=b));let s;function r(b){i(1,s=b),b!=="user model"?H(ce,l.showLav=!0,l):H(ce,l.showLav=!1,l),H(te,t.mode=b,t)}window.$("#data-modal-extend-results").on("hidden.bs.modal",function(){H(j,o.showServerErrors=!0,o)});function a(){window.$("#data-modal-extend-results").modal(),H(j,o.showServerErrors=!1,o)}let u=!1;we(()=>{i(5,u=!0)});const d=()=>zi(),f=()=>r("user model"),g=()=>r("full model"),c=()=>r("estimate"),p=()=>a();return n.$$.update=()=>{n.$$.dirty&33&&u&&i(1,s=t.mode)},[t,s,o,r,a,u,d,f,g,c,p]}class Gi extends W{constructor(e){super(),J(this,e,Bi,Ri,X,{})}}function Ui(){return typeof Shiny=="object"&&Shiny!==null}function ji(n){let e=0,i=Number.NEGATIVE_INFINITY,t=Number.NEGATIVE_INFINITY,o=n.nodes().length;n.nodes().forEach(r=>{let a=r.position();e+=a.x,a.x>i&&(i=a.x),a.y>t&&(t=a.y)});let l=e/o,s=t+100;return{x:l,y:s}}function qi(n,e){if(!n)throw new Error(e||"Assertion failed")}function Hi(n,e,i){let t,o,l;ee(n,te,d=>i(0,t=d)),ee(n,j,d=>i(1,o=d)),ee(n,Ve,d=>i(2,l=d));function s(d,f,g){let c,p,b;return f==="=~"?(c=Fe,p=d,b=g):f=="~1"?(p=1,b=d,c=Fe):(b=d,p=g,f==="~~"?d===g?c=rt:c=Ie:c=Fe),{directed:c,source:p,target:b}}function r(d,f,g,c){let p=s(d,f,g);p.user=c;const v=Y(K).edges(function(y){let S;if(p.source!=1?(S=y.source().getLabel()==p.source&&y.target().getLabel()==p.target,p.directed==Ie&&(S=S||y.source().getLabel()==p.target&&y.target().getLabel()==p.source)):S=y.source().isConstant()&&y.target().getLabel()==p.target,p.user!=null)if(p.user==1)S=S&&y.isUserAdded();else if(p.user==0)S=S&&y.isLavaanAdded();else throw new Error("User was neither 0 nor 1");return S});if(v.length>1)throw new Error("Multiple edges found");return v}function a(d,f){H(j,o.meansModelled=!1,o),H(j,o.loadingMode=!0,o);let g=Y(K);if(!f)g.edges().invalidate();else{let y=function(A,m,$){he(A,$,!1,m)};const v=Array.isArray(d.obs)?d.obs:[d.obs];let S={x:200,y:200};for(let A=0;A<v.length;A++)S.x=S.x+50,y(le,v[A],S);const L=Array.isArray(d.latent)?d.latent:[d.latent];S={x:200,y:100};for(let A=0;A<L.length;A++)S.x=S.x+50,y(me,L[A]);d=d.parTable}const c=new Set;for(let v=0;v<d.lhs.length;v++)d.op[v]==="|"&&c.add(d.lhs[v]);let p=!1,b;for(let v=0;v<d.lhs.length;v++){if(d.op[v]=="~*~"||d.op[v]=="|")continue;let y=r(d.lhs[v],d.op[v],d.rhs[v],d.user[v]);if(!f&&d.user[v]==1)qi(y.length==1),y.validate(),y.isModifiedLavaan()&&y.isFixed()&&y.revertLavaanFix(),d.free[v]==0&&!y.isFixed()&&y.fixPara(d.ustart[v]).markModifiedLavaan();else{let S;if(f||y.length==0){const L=s(d.lhs[v],d.op[v],d.rhs[v]);if(f&&o.full&&d.user[v]==0)continue;let A;if(L.source!==1)A=g.nodes(function($){return $.getLabel()==L.source})[0].id();else{if(H(j,o.meansModelled=!0,o),d.free[v]==0&&d.ustart[v]==0)continue;p||(b=he(Se,ji(g),!1),p=!0,g.nodes(function(h){return h.id()==b})[0].markAddedLavaan()),A=b}const m=g.nodes(function($){return $.getLabel()==L.target})[0].id();S=g.add({groups:"edges",data:{source:A,target:m},classes:L.directed+" nolabel"}),d.label[v]!=""&&S.addLabelImport(d.label[v]),d.user[v]==1?S.markAddedUser():S.markAddedLavaan(),pe(A),pe(m)}else!f&&y.length==1&&(S=y);d.free[v]==0?d.ustart[v]!==0&&d.exo[v]!==1?c.has(S.target().getLabel())&&d.op[v]=="~~"?S.fixPara("Total Variance 1"):S.fixPara(d.ustart[v]):S.remove():S.setFree(),f||S.validate()}}f?(st("tree",!1),g.fit()):(g.edges().forEach(v=>{v.isValid()||v.remove()}),g.getLavaanNodes().forEach(v=>{v.connectedEdges().length==0&&(v.remove(),g.nodes().forEach(y=>{pe(y.id())}))})),o.parsedModel||H(j,o.parsedModel=!0,o),g.getUserEdges().length>0&&H(j,o.modelEmpty=!1,o),H(j,o.loadingMode=!1,o)}function u(d,f){Y(K);const g=d.op.some(c=>c.includes("~~"));for(let c=0;c<d.lhs.length;c++){if(d.op[c]=="~*~"||d.op[c]=="|")continue;let p=r(d.lhs[c],d.op[c],d.rhs[c]);if(p.length>0){let b={};p.isFree()?(b.est=d.est[c],b.p_value=d.pvalue[c],b.se=d.se[c],b.ciLow=d["ci.lower"][c],b.ciHigh=d["ci.upper"][c],b.est_std=f["est.std"][c],b.se_std=f.se[c],b.ciLow_std=f["ci.lower"][c],b.ciHigh_std=f["ci.upper"][c],p.addClass("hasEst")):g&&d.op[c]=="~~"&&(b.estFixed=d.est[c],b.estFixed_std=f["est.std"][c],p.addClass("hasEstFixed")),p.data("estimates",b)}}}return Ui()&&(Shiny.addCustomMessageHandler("dataInfo",function(d){ht(d.columns),H(j,o.columnNames=[...d.columns],o),H(j,o.ids=[...d.columns],o),H(j,o.loadedFileName=d.name,o),H(j,o.dataAvail=!0,o),oe(t.mode),window.$("#upload-modal").modal("hide"),d.showData&&window.$("#data-modal-2").modal()}),Shiny.addCustomMessageHandler("lav_failed",function(d){H(j,o.fitting=!1,o),d=="stopped"?be("danger","Fitting stopped by user"):be("danger","Fitting failed")}),Shiny.addCustomMessageHandler("fitting",function(d){H(j,o.fitting=!0,o)}),Shiny.addCustomMessageHandler("lav_warning_error",function(d){const f=d.type=="warning"?"warning":"error";be(d.type,`During ${d.origin} the following ${f} occurred: ${d.message}`)}),Shiny.addCustomMessageHandler("lav_error_fitting",function(d){H(j,o.fitting=!1,o),be(d.type,"During "+d.origin+" the following error occurred: "+d.message)}),Shiny.addCustomMessageHandler("usecache",function(d){be("info","Reusing cached results because model and data did not change since last fit")}),Shiny.addCustomMessageHandler("data_missing",function(d){be("danger","Could not fit model because no data is available")}),Shiny.addCustomMessageHandler("columnames",function(d){const f=Y(K),g=o.columnNames[d.index];H(j,o.columnNames[d.index]=d.newcolname,o),f.getObservedNodes().forEach(c=>{c.getLabel()==g&&(c.setLabel(d.newcolname),oe(t.mode))}),ht(o.columnNames)}),Shiny.addCustomMessageHandler("missing_vars",function(d){var f=[].concat(d).join(", ");be("danger","Could not fit model because "+f+" are observed variables in the model but not present in the data.")}),Shiny.addCustomMessageHandler("lav_model",function(d){a(d,!1)}),Shiny.addCustomMessageHandler("imported_model",function(d){a(d,!0);let f=Y(K);Array.isArray(d.ordered)||(d.ordered=[d.ordered]),d.ordered.forEach(g=>{f.nodes(function(c){return c.getLabel()==g})[0].makeOrdered()}),H(te,t.fix_first=!1,t),be("warning","lavaangui only imports user edges. Your full model is very likely different than what you fitted in lavaan because of different options used. To display the model, as you fitted it in lavaan, use plot_lavaan")}),Shiny.addCustomMessageHandler("lav_results",function(d){H(j,o.loadingMode=!0,o),H(Ve,l.lastFitLavFit=d.fitted_model,l),H(Ve,l.lastFitModel=d.model,l),H(Ve,l.lastFitData=d.data,l),H(j,o.fitting=!1,o),H(j,o.loadingMode=!1,o)}),Shiny.addCustomMessageHandler("lav_estimates",function(d){const f=d.normal,g=d.std;u(f,g)}),Shiny.addCustomMessageHandler("setToEstimate",function(d){H(te,t.mode="estimate",t)})),[]}class Yi extends W{constructor(e){super(),J(this,e,Hi,null,X,{})}}function Wi(n){Bn(q);let e=Y(K);var i={zoomFactor:.05,zoomDelay:45,minZoom:e.minZoom(),maxZoom:e.maxZoom(),fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,zoomOnly:!1,fitSelector:void 0,animateOnFit(){return!1},fitAnimationDuration:1e3};return we(()=>{e.panzoom(i),e.on("zoom",function(t){var o=e.zoom();o<i.minZoom?e.zoom(i.minZoom):o>i.maxZoom&&e.zoom(i.maxZoom)})}),[]}class Ji extends W{constructor(e){super(),J(this,e,Wi,null,X,{})}}function Xi(n){let e,i;const t=n[1].default,o=Qe(t,n,n[0],null);return{c(){e=R("div"),o&&o.c(),w(e,"class","svelte-16igfw6")},m(l,s){F(l,e,s),o&&o.m(e,null),i=!0},p(l,[s]){o&&o.p&&(!i||s&1)&&et(o,t,l,l[0],i?nt(t,l[0],s,null):tt(l[0]),null)},i(l){i||(C(o,l),i=!0)},o(l){D(o,l),i=!1},d(l){l&&I(e),o&&o.d(l)}}}function Zi(n,e,i){let{$$slots:t={},$$scope:o}=e;return n.$$set=l=>{"$$scope"in l&&i(0,o=l.$$scope)},[o,t]}class Ki extends W{constructor(e){super(),J(this,e,Zi,Xi,X,{})}}function Qi(n,e,i){let t,o;ee(n,Le,s=>i(0,t=s)),ee(n,j,s=>i(1,o=s));let l=Y(K);return setInterval(()=>{o.drawing=="none"&&l&&(l.autoungrabify(!1),l.nodes().grabify(),H(j,o.undoEmpty=t.isUndoStackEmpty(),o),H(j,o.redoEmpty=t.isRedoStackEmpty(),o))},1e3),window.addEventListener("beforeunload",s=>{s.preventDefault(),s.returnValue=""}),we(()=>{Shiny.unbindAll(),Shiny.bindAll()}),[]}class es extends W{constructor(e){super(),J(this,e,Qi,null,X,{})}}function ln(n){let e,i,t,o,l,s;return{c(){e=R("div"),i=R("button"),i.innerHTML='<span class="glyphicon glyphicon-refresh spinning svelte-16d2v0h"></span> Fitting...',t=P(),o=R("button"),o.textContent="Cancel",w(i,"class","btn btn-lg btn-secondary fixed-width disabled-button svelte-16d2v0h"),w(i,"id","fitting-button"),i.disabled=!0,w(o,"class","btn btn-lg btn-default fixed-width svelte-16d2v0h"),w(e,"class","center-screen svelte-16d2v0h")},m(r,a){F(r,e,a),x(e,i),x(e,t),x(e,o),l||(s=ne(o,"click",ns),l=!0)},p:de,d(r){r&&I(e),l=!1,s()}}}function ts(n){let e,i=n[0].fitting&&ln();return{c(){i&&i.c(),e=Be()},m(t,o){i&&i.m(t,o),F(t,e,o)},p(t,[o]){t[0].fitting?i?i.p(t,o):(i=ln(),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:de,o:de,d(t){i&&i.d(t),t&&I(e)}}}function ns(){Shiny.setInputValue("run-abort",Math.random())}function os(n,e,i){let t;return ee(n,j,o=>i(0,t=o)),[t]}class is extends W{constructor(e){super(),J(this,e,os,ts,X,{})}}function rn(n){let e,i,t=n[2][n[0].type].label+"",o,l,s=n[0].message+"",r,a;return{c(){e=R("div"),i=R("strong"),o=$e(t),l=P(),r=$e(s),w(e,"class",a=xe(n[2][n[0].type].class+(n[1]?" fadeOut":""))+" svelte-1wv9zbn")},m(u,d){F(u,e,d),x(e,i),x(i,o),x(e,l),x(e,r)},p(u,d){d&1&&t!==(t=u[2][u[0].type].label+"")&&Re(o,t),d&1&&s!==(s=u[0].message+"")&&Re(r,s),d&3&&a!==(a=xe(u[2][u[0].type].class+(u[1]?" fadeOut":""))+" svelte-1wv9zbn")&&w(e,"class",a)},d(u){u&&I(e)}}}function ss(n){let e,i=n[0].message!==""&&rn(n);return{c(){i&&i.c(),e=Be()},m(t,o){i&&i.m(t,o),F(t,e,o)},p(t,[o]){t[0].message!==""?i?i.p(t,o):(i=rn(t),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:de,o:de,d(t){i&&i.d(t),t&&I(e)}}}function ls(n,e,i){let t;ee(n,hn,r=>i(0,t=r));let o={success:{class:"alert-success",label:"Success!"},info:{class:"alert-info",label:"Info!"},warning:{class:"alert-warning",label:"Warning!"},danger:{class:"alert-danger",label:"Danger!"}},l=!1,s;return n.$$.update=()=>{n.$$.dirty&9&&t.message!==""&&(i(1,l=!1),clearTimeout(s),i(3,s=setTimeout(()=>{i(1,l=!0)},1e4)))},[t,l,o,s]}class rs extends W{constructor(e){super(),J(this,e,ls,ss,X,{})}}function as(n,e){const i={};return n.forEach((t,o)=>{i[t]=e[o]}),i}function ds(n,e){const i=Object.keys(e);let t={};return i.forEach(o=>{n.hasOwnProperty(o)&&(t[o]=n[o])}),t}function us(n,e,i){let t,o,l;ee(n,Le,r=>i(0,t=r)),ee(n,j,r=>i(1,o=r)),ee(n,te,r=>i(2,l=r));let s=Y(K);return we(()=>{q.use(Gn);const r={isDebug:!0};let a=s.undoRedo(r);Le.set(a),a.action("style",function(u){let d={};const f=Object.keys(u.style);return u.eles.forEach(function(g){let c=[];f.forEach(p=>{c.push(g.data(p)||g.style(p)),g.data(p,u.style[p])}),d[g.id()]=as(f,c)}),{eles:u.eles,style:d}},function(u){const d=ds(u.eles[0].style(),u.style[Object.keys(u.style)[0]]);return Object.keys(u.style).forEach(function(f){var g=s.getElementById(f);for(var c in u.style[f])g.data(c,u.style[f][c])}),{eles:u.eles,style:d}}),s.on("afterUndo",function(u,d){d!=="style"&&d!=="move"&&oe(l.mode)}),s.on("afterRedo",function(u,d){d!=="style"&&d!=="move"&&oe(l.mode)}),document.addEventListener("keydown",function(u){(u.ctrlKey||u.metaKey)&&u.target.nodeName==="BODY"&&u.which===90&&!o.fitting&&(u.preventDefault(),u.stopPropagation(),u.shiftKey?t.redo():t.undo())}),document.addEventListener("keyup",function(u){u.metaKey&&u.target.nodeName==="BODY"&&u.which===90&&(u.preventDefault(),u.stopPropagation())})}),[]}class cs extends W{constructor(e){super(),J(this,e,us,null,X,{})}}function fs(n,e,i){let t;return ee(n,j,o=>i(0,t=o)),Shiny.addCustomMessageHandler("fullServer",function(o){H(j,t.full=o.full,t),H(j,t.ready=!0,t),H(j,t.shinyapps=o.shinyapps,t)}),[]}class ms extends W{constructor(e){super(),J(this,e,fs,null,X,{})}}function gs(n,e,i){let t;ee(n,ce,l=>i(1,t=l));let o=!1;return we(()=>{i(0,o=!0)}),n.$$.update=()=>{n.$$.dirty&3&&o&&Go(t.showVar,t.showLav,t.showMean),n.$$.dirty&3&&o&&Bo(t.view,t.std,t.number_digits)},[o,t]}class ps extends W{constructor(e){super(),J(this,e,gs,null,X,{})}}function hs(n){let e,i,t,o;const l=n[6].default,s=Qe(l,n,n[5],null);return{c(){e=R("section"),s&&s.c(),_e(e,"left",n[0]+"px"),_e(e,"top",n[1]+"px"),w(e,"class","draggable svelte-13fkbj1")},m(r,a){F(r,e,a),s&&s.m(e,null),i=!0,t||(o=[ne(window,"mouseup",n[4]),ne(window,"mousemove",n[3]),ne(e,"mousedown",n[2])],t=!0)},p(r,[a]){s&&s.p&&(!i||a&32)&&et(s,l,r,r[5],i?nt(l,r[5],a,null):tt(r[5]),null),(!i||a&1)&&_e(e,"left",r[0]+"px"),(!i||a&2)&&_e(e,"top",r[1]+"px")},i(r){i||(C(s,r),i=!0)},o(r){D(s,r),i=!1},d(r){r&&I(e),s&&s.d(r),t=!1,Ke(o)}}}function bs(n,e,i){let{$$slots:t={},$$scope:o}=e,{left:l=100}=e,{top:s=100}=e,r=!1,a=0,u=0;function d(c){r=!0,a=c.clientX-l,u=c.clientY-s}function f(c){r&&(i(0,l=c.clientX-a),i(1,s=c.clientY-u))}function g(){r=!1}return n.$$set=c=>{"left"in c&&i(0,l=c.left),"top"in c&&i(1,s=c.top),"$$scope"in c&&i(5,o=c.$$scope)},[l,s,d,f,g,o,t]}class $s extends W{constructor(e){super(),J(this,e,bs,hs,X,{left:0,top:1})}}function _s(n){let e,i,t;const o=n[0].default,l=Qe(o,n,n[1],null);return{c(){e=R("ul"),i=R("div"),l&&l.c(),_e(i,"display","flex"),_e(i,"flex-direction","column"),w(e,"class","nav navbar-nav navbar-left"),_e(e,"border","1px solid black"),_e(e,"z-index","9999")},m(s,r){F(s,e,r),x(e,i),l&&l.m(i,null),t=!0},p(s,r){l&&l.p&&(!t||r&2)&&et(l,o,s,s[1],t?nt(o,s[1],r,null):tt(s[1]),null)},i(s){t||(C(l,s),t=!0)},o(s){D(l,s),t=!1},d(s){s&&I(e),l&&l.d(s)}}}function vs(n){let e,i;return e=new $s({props:{$$slots:{default:[_s]},$$scope:{ctx:n}}}),{c(){z(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},p(t,[o]){const l={};o&2&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){i||(C(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){G(e,t)}}}function ys(n,e,i){let{$$slots:t={},$$scope:o}=e;return n.$$set=l=>{"$$scope"in l&&i(1,o=l.$$scope)},[t,o]}class ws extends W{constructor(e){super(),J(this,e,ys,vs,X,{})}}function ks(n,e){return bootbox.alert({title:"<span style='color: red;'>Error</span>",message:`A ${e} error occurred:<br> <span style='color: red;'>${n}</span>.<br><br>Please consider reporting this issue by sending an email to <a href="mailto:j.d.karch@fsw.leidenuniv.nl">j.d.karch@fsw.leidenuniv.nl</a>.`,centerVertical:!0}),!0}function Es(){return typeof Shiny=="object"&&Shiny!==null}function Cs(n){return Es()&&Shiny.addCustomMessageHandler("serverError",function(e){Y(j).showServerErrors&&ks(e.msg,"Server")}),[]}class Ss extends W{constructor(e){super(),J(this,e,Cs,null,X,{})}}function Ls(n,e,i){let t;return ee(n,te,o=>i(0,t=o)),n.$$.update=()=>{n.$$.dirty&1&&oe(t.mode)},[t]}class Ms extends W{constructor(e){super(),J(this,e,Ls,null,X,{})}}function Ds(n){q.use(Un);let e=Y(K);return we(()=>{e.automove({nodesMatching:".automove-viewport",reposition:"viewport"})}),[]}class As extends W{constructor(e){super(),J(this,e,Ds,null,X,{})}}function Os(n){jn(q,window.$,pn);let e=Y(K);return we(()=>{e.nodeEditing({resizeToContentCueImage:"",undoable:!0})}),[]}class Fs extends W{constructor(e){super(),J(this,e,Os,null,X,{})}}function Is(n){return q("collection","init",function(){return this.addClass(ke).addClass(We).addClass(ge),this}),q("collection","free",function(){return this.hasClass(ke)}),q("collection","addLabel",function(e){return this.addLabelImport(e).removeClass(Te),this}),q("collection","addLabelImport",function(e){return this.data("label",e).addClass(ze).removeClass(We),this}),q("collection","removeLabel",function(){return this.removeClass(ze).addClass(We).data("label",null),this}),q("collection","setLabel",function(e){return this.data("label",e),this}),q("collection","getLabel",function(){return this.data("label")}),q("collection","fixPara",function(e){return this.data("value",e).removeClass(ke).removeClass(De).removeClass(At).addClass(Ee),this}),q("collection","freePara",function(){return this.removeClass(Ee).removeClass(De).removeClass(Te).addClass(ke),this}),q("collection","setFree",function(){return this.removeClass(Ee).removeClass(De).addClass(ke),this}),q("collection","forceFreePara",function(){return this.removeClass(ke).removeClass(Ee).removeClass(Te).addClass(De),this}),q("collection","revert",function(){const e=this.source().id(),i=this.target().id();return this.move({source:i,target:e}),this}),q("collection","setUndirected",function(){return this.removeClass(Fe).addClass(Ie),this}),q("collection","setDirected",function(){return this.removeClass(Ie).addClass(Fe),this}),q("collection","isUndirected",function(){return this.hasClass(Ie)}),q("collection","isDirected",function(){return this.hasClass(Fe)}),q("collection","makeLoop",function(){return this.addClass(rt),this}),q("collection","myIsLoop",function(){return this.hasClass(rt)}),q("collection","makeMeanEdge",function(){return this.data("isMean","1"),this}),q("collection","isMean",function(){return this.data("isMean")==="1"||this.isConstant()}),q("collection","makeOtherEdge",function(){return this.data("isMean","0"),this}),q("collection","isFixed",function(){return this.hasClass(Ee)}),q("collection","isFree",function(){return this.hasClass(ke)||this.hasClass(De)}),q("collection","isForceFree",function(){return this.hasClass(De)}),q("collection","hasLabel",function(){return this.hasClass(ze)}),q("collection","isModifiedLavaan",function(){return this.hasClass(Te)}),q("collection","markModifiedLavaan",function(){return this.addClass(Te),this}),q("collection","markAddedLavaan",function(){return this.addClass(Ae).removeClass(ge),this}),q("collection","markAddedUser",function(){return this.removeClass(Ae).addClass(ge),this}),q("collection","isUserAdded",function(){return this.hasClass(ge)}),q("collection","isLavaanAdded",function(){return this.hasClass(Ae)}),q("collection","getValue",function(){return this.data("value")}),q("collection","setValue",function(e){this.data("value",e)}),q("collection","invalidate",function(){return this.removeClass(ft),this}),q("collection","validate",function(){return this.addClass(ft),this}),q("collection","isValid",function(){return this.hasClass(ft)}),q("collection","revertLavaanFix",function(){this.freePara().removeClass(Te)}),q("collection","removeEstimates",function(){return this.removeClass(At).removeClass(Wn),this.removeData("estimates"),this}),q("collection","link",function(){return this.addClass(Ge),this}),q("collection","unlink",function(){return this.removeClass(Ge),this}),q("collection","isLinked",function(){return this.hasClass(Ge)}),q("collection","isLatent",function(){return this.hasClass(me)}),q("collection","makeLatent",function(){return this.removeClass(le).addClass(me).removeClass(Ge),this}),q("collection","makeObserved",function(){return this.addClass(le).removeClass(me),this}),q("collection","makeOrdered",function(){return this.removeClass(Ze).addClass(Je),this}),q("collection","isOrdered",function(){return this.hasClass(Je)}),q("collection","makeContinous",function(){return this.addClass(Ze).removeClass(Je),this}),q("collection","isConstant",function(){return this.hasClass(Se)}),q("collection","isObserved",function(){return this.hasClass(le)}),q("core","getLavaanNodes",function(){return this.nodes(`.${Ae}`)}),q("core","getLavaanEdges",function(){return this.edges(`.${Ae}`)}),q("core","getObservedNodes",function(){return this.nodes(`.${le}`)}),q("core","getUserEdges",function(){return this.edges(`.${ge}`)}),q("core","getLavaanModifiedEdges",function(){return this.edges(`.${Te}`)}),q("core","getLatentNodes",function(){return this.nodes(function(e){return e.hasClass(me)})}),[]}class Ns extends W{constructor(e){super(),J(this,e,Is,null,X,{})}}function Ts(n){qn(q,window.$,pn);let e=Y(K);return we(()=>{const i="Bend",t="Kink";e.edgeEditing({undoable:!0,bendRemovalSensitivity:16,enableMultipleAnchorRemovalOption:!0,initAnchorsAutomatically:!1,useTrailingDividersAfterContextMenuOptions:!1,enableCreateAnchorOnDrag:!0,anchorShapeSizeFactor:4,addBendMenuItemTitle:`Add ${t} Point`,removeBendMenuItemTitle:`Remove ${t} Point`,removeAllBendMenuItemTitle:`Remove All${t} Points`,addControlMenuItemTitle:`Add ${i} Point`,removeControlMenuItemTitle:`Remove ${i} Point`,removeAllControlMenuItemTitle:`Remove All ${i} Points`}),e.style().update()}),[]}class Ps extends W{constructor(e){super(),J(this,e,Ts,null,X,{})}}const an=840;function xs(n,e,i){let t;ee(n,j,s=>i(0,t=s));function o(){var s=setTimeout(l,an*1e3);window.onmousemove=r,window.onmousedown=r,window.onclick=r,window.onscroll=r,window.onkeypress=r;function r(){clearTimeout(s),s=setTimeout(l,an*1e3)}}async function l(){console.log("Timeout");let s=null,r=null;if(t.dataAvail&&(yn("saveData"),r=await new Promise(u=>{Shiny.addCustomMessageHandler("dataForSave",function(d){u(d)})})),t.modelEmpty||(s=vt()),s!=null||r!=null){bootbox.alert("Due to inactivity, you will be disconnected from the server shortly. Your work was saved for you. In case you have already been disconnected now, you can continue where you left off by refreshing the page.");let u=sessionStorage.getItem("sessionId");u||(u=Date.now().toString(),sessionStorage.setItem("sessionId",u),console.log("Session ID save: ",u));var a=new Dt("ModelDatabase");a.version(1).stores({cache:"sessionId, model, data"}),await a.cache.clear(),await a.cache.put({sessionId:u,model:s,data:r})}}return we(async()=>{let s=sessionStorage.getItem("sessionId");if(console.log("Session ID load: ",s),s){var r=new Dt("ModelDatabase");r.version(1).stores({cache:"sessionId, model, data"});const a=await r.cache.get(s);a.model&&(console.log("Model loaded from cache"),_t(a.model)),a.data&&(console.log("Data loaded from cache"),Shiny.setInputValue("dataUpload-fileInput",{content:btoa(a.data)}),window.$("#upload-modal").modal())}}),o(),[]}class Vs extends W{constructor(e){super(),J(this,e,xs,null,X,{})}}function dn(n){let e,i,t,o,l,s,r,a,u,d,f,g,c,p,b,v,y,S,L=n[0].full&&un();i=new eo({});const A=[zs,Rs],m=[];function $(E,_){return E[0].full?0:1}l=$(n),s=m[l]=A[l](n),a=new Ki({props:{$$slots:{default:[Gs]},$$scope:{ctx:n}}});let h=n[0].full&&fn();f=new Ni({}),c=new Yi({}),b=new es({});let M=n[0].shinyapps&&mn();return{c(){L&&L.c(),e=P(),z(i.$$.fragment),t=P(),o=R("div"),s.c(),r=P(),z(a.$$.fragment),u=P(),h&&h.c(),d=P(),z(f.$$.fragment),g=P(),z(c.$$.fragment),p=P(),z(b.$$.fragment),v=P(),M&&M.c(),y=Be(),w(o,"class","svelte-15ghafl")},m(E,_){L&&L.m(E,_),F(E,e,_),B(i,E,_),F(E,t,_),F(E,o,_),m[l].m(o,null),x(o,r),B(a,o,null),x(o,u),h&&h.m(o,null),F(E,d,_),B(f,E,_),F(E,g,_),B(c,E,_),F(E,p,_),B(b,E,_),F(E,v,_),M&&M.m(E,_),F(E,y,_),S=!0},p(E,_){E[0].full?L?_&1&&C(L,1):(L=un(),L.c(),C(L,1),L.m(e.parentNode,e)):L&&(ve(),D(L,1,1,()=>{L=null}),ye());let O=l;l=$(E),l!==O&&(ve(),D(m[O],1,1,()=>{m[O]=null}),ye(),s=m[l],s||(s=m[l]=A[l](E),s.c()),C(s,1),s.m(o,r));const Z={};_&3&&(Z.$$scope={dirty:_,ctx:E}),a.$set(Z),E[0].full?h?_&1&&C(h,1):(h=fn(),h.c(),C(h,1),h.m(o,null)):h&&(ve(),D(h,1,1,()=>{h=null}),ye()),E[0].shinyapps?M?_&1&&C(M,1):(M=mn(),M.c(),C(M,1),M.m(y.parentNode,y)):M&&(ve(),D(M,1,1,()=>{M=null}),ye())},i(E){S||(C(L),C(i.$$.fragment,E),C(s),C(a.$$.fragment,E),C(h),C(f.$$.fragment,E),C(c.$$.fragment,E),C(b.$$.fragment,E),C(M),S=!0)},o(E){D(L),D(i.$$.fragment,E),D(s),D(a.$$.fragment,E),D(h),D(f.$$.fragment,E),D(c.$$.fragment,E),D(b.$$.fragment,E),D(M),S=!1},d(E){L&&L.d(E),E&&I(e),G(i,E),E&&I(t),E&&I(o),m[l].d(),G(a),h&&h.d(),E&&I(d),G(f,E),E&&I(g),G(c,E),E&&I(p),G(b,E),E&&I(v),M&&M.d(E),E&&I(y)}}}function un(n){let e,i;return e=new is({}),{c(){z(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},i(t){i||(C(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){G(e,t)}}}function Rs(n){let e,i;return e=new ws({props:{$$slots:{default:[Bs]},$$scope:{ctx:n}}}),{c(){z(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},i(t){i||(C(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){G(e,t)}}}function zs(n){let e,i;return e=new Ai({}),{c(){z(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},i(t){i||(C(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){G(e,t)}}}function Bs(n){let e,i,t,o,l,s,r,a;return e=new wn({props:{full:!1}}),t=new En({props:{minimal:!0}}),l=new Ln({props:{minimal:!0}}),r=new Mn({props:{minimal:!0}}),{c(){z(e.$$.fragment),i=P(),z(t.$$.fragment),o=P(),z(l.$$.fragment),s=P(),z(r.$$.fragment)},m(u,d){B(e,u,d),F(u,i,d),B(t,u,d),F(u,o,d),B(l,u,d),F(u,s,d),B(r,u,d),a=!0},p:de,i(u){a||(C(e.$$.fragment,u),C(t.$$.fragment,u),C(l.$$.fragment,u),C(r.$$.fragment,u),a=!0)},o(u){D(e.$$.fragment,u),D(t.$$.fragment,u),D(l.$$.fragment,u),D(r.$$.fragment,u),a=!1},d(u){G(e,u),u&&I(i),G(t,u),u&&I(o),G(l,u),u&&I(s),G(r,u)}}}function cn(n){let e,i;return e=new Fi({}),{c(){z(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},i(t){i||(C(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){G(e,t)}}}function Gs(n){let e,i,t,o,l,s,r,a,u,d,f,g,c,p,b,v,y,S,L,A,m,$,h,M;e=new po({}),t=new cs({}),l=new Ns({}),r=new Yn({}),u=new As({}),f=new Fs({}),c=new Ji({}),b=new Vi({}),y=new bo({}),L=new ps({}),m=new Ps({});let E=n[0].full&&cn();return{c(){z(e.$$.fragment),i=P(),z(t.$$.fragment),o=P(),z(l.$$.fragment),s=P(),z(r.$$.fragment),a=P(),z(u.$$.fragment),d=P(),z(f.$$.fragment),g=P(),z(c.$$.fragment),p=P(),z(b.$$.fragment),v=P(),z(y.$$.fragment),S=P(),z(L.$$.fragment),A=P(),z(m.$$.fragment),$=P(),E&&E.c(),h=Be()},m(_,O){B(e,_,O),F(_,i,O),B(t,_,O),F(_,o,O),B(l,_,O),F(_,s,O),B(r,_,O),F(_,a,O),B(u,_,O),F(_,d,O),B(f,_,O),F(_,g,O),B(c,_,O),F(_,p,O),B(b,_,O),F(_,v,O),B(y,_,O),F(_,S,O),B(L,_,O),F(_,A,O),B(m,_,O),F(_,$,O),E&&E.m(_,O),F(_,h,O),M=!0},p(_,O){_[0].full?E?O&1&&C(E,1):(E=cn(),E.c(),C(E,1),E.m(h.parentNode,h)):E&&(ve(),D(E,1,1,()=>{E=null}),ye())},i(_){M||(C(e.$$.fragment,_),C(t.$$.fragment,_),C(l.$$.fragment,_),C(r.$$.fragment,_),C(u.$$.fragment,_),C(f.$$.fragment,_),C(c.$$.fragment,_),C(b.$$.fragment,_),C(y.$$.fragment,_),C(L.$$.fragment,_),C(m.$$.fragment,_),C(E),M=!0)},o(_){D(e.$$.fragment,_),D(t.$$.fragment,_),D(l.$$.fragment,_),D(r.$$.fragment,_),D(u.$$.fragment,_),D(f.$$.fragment,_),D(c.$$.fragment,_),D(b.$$.fragment,_),D(y.$$.fragment,_),D(L.$$.fragment,_),D(m.$$.fragment,_),D(E),M=!1},d(_){G(e,_),_&&I(i),G(t,_),_&&I(o),G(l,_),_&&I(s),G(r,_),_&&I(a),G(u,_),_&&I(d),G(f,_),_&&I(g),G(c,_),_&&I(p),G(b,_),_&&I(v),G(y,_),_&&I(S),G(L,_),_&&I(A),G(m,_),_&&I($),E&&E.d(_),_&&I(h)}}}function fn(n){let e,i,t,o,l,s;return e=new rs({}),t=new Gi({}),l=new Ms({}),{c(){z(e.$$.fragment),i=P(),z(t.$$.fragment),o=P(),z(l.$$.fragment)},m(r,a){B(e,r,a),F(r,i,a),B(t,r,a),F(r,o,a),B(l,r,a),s=!0},i(r){s||(C(e.$$.fragment,r),C(t.$$.fragment,r),C(l.$$.fragment,r),s=!0)},o(r){D(e.$$.fragment,r),D(t.$$.fragment,r),D(l.$$.fragment,r),s=!1},d(r){G(e,r),r&&I(i),G(t,r),r&&I(o),G(l,r)}}}function mn(n){let e,i;return e=new Vs({}),{c(){z(e.$$.fragment)},m(t,o){B(e,t,o),i=!0},i(t){i||(C(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){G(e,t)}}}function Us(n){let e,i,t,o,l;e=new ms({});let s=n[0].ready&&dn(n);return o=new Ss({}),{c(){z(e.$$.fragment),i=P(),s&&s.c(),t=P(),z(o.$$.fragment)},m(r,a){B(e,r,a),F(r,i,a),s&&s.m(r,a),F(r,t,a),B(o,r,a),l=!0},p(r,[a]){r[0].ready?s?(s.p(r,a),a&1&&C(s,1)):(s=dn(r),s.c(),C(s,1),s.m(t.parentNode,t)):s&&(ve(),D(s,1,1,()=>{s=null}),ye())},i(r){l||(C(e.$$.fragment,r),C(s),C(o.$$.fragment,r),l=!0)},o(r){D(e.$$.fragment,r),D(s),D(o.$$.fragment,r),l=!1},d(r){G(e,r),r&&I(i),s&&s.d(r),r&&I(t),G(o,r)}}}function js(n,e,i){let t;return ee(n,j,o=>i(0,t=o)),[t]}class qs extends W{constructor(e){super(),J(this,e,js,Us,X,{})}}new qs({target:document.getElementById("app")});
