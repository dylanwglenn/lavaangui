import{d as Dn,w as Te,S as X,i as Z,s as K,c as te,g as Y,o as we,e as G,a as E,b as ve,f as I,l as ie,n as ce,h as T,r as Xe,j as W,k as se,m as V,t as xe,p as R,q as Ie,u as _e,v as Re,x as Ze,y as q,z as j,A as Ke,B as Qe,C as et,D as M,E as O,F as H,G as Be,H as Ve,I as An,J as rt,K as dt,L as ae,M as $e,N as ye,O as de}from"./svelte-fdfc2579.js";import{c as B}from"./cytoscape-716fe419.js";import{g as Fn}from"./cytoscape-grid-guide-e8f04797.js";import{e as On}from"./cytoscape-edgehandles-98723a1d.js";import{v as mn}from"./uuid-4a60fe23.js";import{J as Lt}from"./jszip-84e7feea.js";import{s as In}from"./cytoscape-svg-f6b36117.js";import{F as ct}from"./file-saver-daf94496.js";import{E as Tn}from"./jspdf-f4d4ca1d.js";import{U as Nn}from"./svg2pdf.js-0c98a8e5.js";import{d as Pn}from"./cytoscape-dagre-22838d04.js";import{f as xn}from"./cytoscape-fcose-1883323b.js";import{c as Vn}from"./cytoscape-cola-0e9b31a3.js";import{c as Rn}from"./cytoscape-context-menus-864590d1.js";import{i as zn}from"./@jaames-324f80d4.js";import{p as Bn}from"./cytoscape-panzoom-50d4e635.js";import{u as Un}from"./cytoscape-undo-redo-8b156ffa.js";import{a as Gn}from"./cytoscape-automove-b06479d5.js";import{K as gn}from"./konva-9c11d4c7.js";import{n as qn}from"./cytoscape-node-editing-50bf11b2.js";import{e as jn}from"./cytoscape-edge-editing-11f5d8e5.js";import{D as Mt}from"./dexie-5509e3b5.js";import"./core-js-93797867.js";import"./functional-red-black-tree-9a31655a.js";import"./lodash.memoize-aae0dfad.js";import"./lodash.throttle-085a2e14.js";import"./dagre-e7a63eac.js";import"./graphlib-04d9d874.js";import"./lodash-399c0d8f.js";import"./@babel-f352b073.js";import"./fflate-7e11f8f1.js";import"./cssesc-ae0dab9a.js";import"./font-family-papandreou-e99f1152.js";import"./svgpath-0da963bf.js";import"./specificity-c7128631.js";import"./cose-base-abb6f3d0.js";import"./layout-base-8b616591.js";import"./webcola-fa77233e.js";import"./jquery-fb849a2e.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function i(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(o){if(o.ep)return;o.ep=!0;const s=i(o);fetch(o.href,s)}})();const Q=Te(null),$t=Te(null),De=Te(null);let ne=Te({meanStruc:"default",intOvFree:!0,intLvFree:!1,estimator:"default",se:"default",missing:"listwise",n_boot:1e3,fix_first:!0,fix_single:!0,auto_var:!0,auto_cov_lv_x:!0,auto_cov_y:!0,fixed_x:!0,mode:"user model","auto.th":!0,"auto.delta":!0}),ue=Te({gridShow:!1,gridSpace:26,gridColor:"#dedede",gridWidth:1,gridMovePan:!1,gridSnap:!1,gridAlign:!0,gridResize:!1,showLav:!0,showVar:!0,showMean:!0,std:!1,view:"est",ci:.95,number_digits:2}),Fe=Te({lastFitModel:null,lastFitLavFit:null,lastFitData:null}),U=Te({fitting:!1,loadingMode:!1,runCounter:0,modelEmpty:!0,dataAvail:!1,columnNames:null,loadedFileName:null,ids:null,dragged:null,draggedName:null,full:!0,ready:!1,parsedModel:!1,meansModelled:null,buttonDown:!1,showServerErrors:!0,everEdge:!1,drawing:"none",undoEmpty:!0,redoEmpty:!0,server:!1,shinyapps:!1}),pt=Te(0);Dn(U,n=>n.columnNames);const pn=Te({type:"info",message:"",key:0});function ge(n,e){pn.update(i=>({type:n,message:e,key:i.key+1}))}ge("info","Greetings. lavaangui is BETA software. Please report any bugs at https://github.com/karchjd/lavaangui/issues.");function Hn(n,e,i){let t;te(n,ue,l=>i(1,t=l));let o=!1;Fn(B);let s=Y(Q);var r={snapToGridOnRelease:!1,drawGrid:!1,snapToAlignmentLocationDuringDrag:!1,distributionGuidelines:!0,geometricGuideline:!0,initPosAlignment:!1,centerToEdgeAlignment:!1,resize:!1,parentPadding:!1,guidelinesStackOrder:4,guidelinesTolerance:2,guidelinesStyle:{strokeStyle:"#8b7d6b",geometricGuidelineRange:2e3,range:100,minDistRange:10,distGuidelineOffset:10,horizontalDistColor:"#ff0000",verticalDistColor:"#00ff00",initPosAlignmentColor:"#0000ff",lineDash:[0,0],horizontalDistLine:[0,0],verticalDistLine:[0,0],initPosAlignmentLine:[0,0]},parentSpacing:-1};return we(()=>{s.gridGuide(r),i(0,o=!0)}),n.$$.update=()=>{n.$$.dirty&3&&o&&t.gridShow!==void 0&&Y(Q).gridGuide({drawGrid:t.gridShow}),n.$$.dirty&3&&o&&t.gridSpace!==void 0&&Y(Q).gridGuide({gridSpacing:t.gridSpace}),n.$$.dirty&3&&o&&t.gridWidth!==void 0&&Y(Q).gridGuide({lineWidth:t.gridWidth}),n.$$.dirty&3&&o&&t.gridMovePan!==void 0&&Y(Q).gridGuide({panGrid:t.gridMovePan}),n.$$.dirty&3&&o&&t.gridSnap!==void 0&&Y(Q).gridGuide({snapToGridDuringDrag:t.gridSnap}),n.$$.dirty&3&&o&&t.gridAlign!==void 0&&Y(Q).gridGuide({snapToAlignmentLocationOnRelease:t.gridAlign}),n.$$.dirty&3&&o&&t.gridResize!==void 0&&Y(Q).gridGuide({resize:t.gridResize})},[o,t]}class Wn extends X{constructor(e){super(),Z(this,e,Hn,null,K,{})}}const le="observed-variable",me="latent-variable",Le="constant",Ee="free",We="nolabel",he="fromUser",ze="label",Ne="byLav",Ce="fixed",Ae="forcefree",Me="directed",Oe="undirected",lt="loop",Ue="linked",Pe="fromLav",Dt="hasEst",ft="validated",Je="continous",Ye="ordered",Yn="hasEstFixed",je=80,Jn=80,Xn="loRegression",ot="regression",He="factorLoad",Zn=[{selector:"element",style:{"font-size":function(n){return n.data("font-size")||14}}},{selector:"node",style:{width:je.toString(),height:"80","background-color":function(n){return n.data("background-color")||"white"},"border-color":function(n){return n.data("border-color")||"grey"},"border-width":function(n){return n.data("border-width")||"2px"},label:"data(label)","text-valign":"center","text-halign":"center","text-wrap":"ellipsis","text-max-width":function(n){return n.width()}}},{selector:`node.${le}`,style:{shape:"rectangle"}},{selector:`node.${le}.${Ye}`,style:{"border-style":"double","border-width":5}},{selector:`node.${me}`,style:{shape:"ellipse","border-color":"black"}},{selector:`node.${Le}`,style:{shape:"triangle",label:"1","text-valign":"center","text-margin-y":"10px","border-color":"black"}},{selector:`node.${Ue}`,style:{"border-color":"black"}},{selector:"edge",style:{width:function(n){return n.data("width")||3},"line-color":function(n){return n.data("line-color")||"#000"},"target-arrow-color":function(n){return n.data("target-arrow-color")||"#000"},"source-arrow-color":function(n){return n.data("source-arrow-color")||"#000"},"target-arrow-shape":"triangle","line-style":function(n){return n.data("line-style")||"solid"},"curve-style":"bezier","text-valign":"center","text-halign":"center","text-wrap":"wrap","text-max-width":Jn,"z-index":10,color:"#000","text-outline-color":"#fff","text-outline-width":"2px","text-background-color":"#fff","text-background-opacity":1,"text-background-padding":"4px"}},{selector:"edge.loop",style:{"curve-style":"bezier","source-arrow-shape":"triangle","loop-direction":function(n){return n.data("loop-direction")||0},"loop-sweep":.8,"control-point-step-size":n=>{const e=n.source(),i=parseInt(e.style("height")),t=parseInt(e.style("width"));let o;return n.style("loop-direction")=="0deg"||n.style("loop-direction")=="180deg"?o=i:n.style("loop-direction")=="90deg"||n.style("loop-direction")=="270deg"?o=t:o=Math.max(t,i),o/80*60}}},{selector:`edge.${Oe}`,style:{"curve-style":"unbundled-bezier","control-point-distances":function(n){return n.data("control-point-distances")||[-100]},"control-point-weights":[.5],"source-arrow-shape":"triangle"}},{selector:`edge.${ze}, edge.${ze}`,style:{label:function(n){return n.data("label")}}},{selector:`edge.${Ce}.${ze}`,style:{label:function(n){return n.data("label")+"@"+n.data("value")}}},{selector:`edge.${Ce}.${We}`,style:{label:function(n){return"@"+n.data("value")}}},{selector:`edge.${Ae}`,style:{"line-color":"blue"}},{selector:`edge.${Pe}, edge.${Ne}`,style:{"line-style":function(n){return n.data("line-style")||"dashed"}}},{selector:"edge.hidden, node.hidden",style:{display:"none"}},{selector:"edge:selected",style:{"underlay-opacity":.5,"underlay-color":"#928ff8"}},{selector:"node:selected",style:{"underlay-color":"#928ff8","underlay-opacity":.5}}],Kn={autoungrabify:!1,autolock:!1,style:Zn,minZoom:.02,maxZoom:5},Qn={preview:!1,hoverDelay:150,handleNodes:"node",snap:!0,handleColor:"#ff0000",handleSize:10,canConnect:function(n,e){return!cy.edges(function(t){if(!t.isUserAdded())return!1;const o=t.source().id()==n.id()&&t.target().id()==e.id(),s=t.source().id()==e.id()&&t.target().id()==n.id();return o||s}).length}};function eo(n){B.use(On);var e=B(Kn);return e.boxSelectionEnabled(!0),Q.set(e),$t.set(e.edgehandles(Qn)),[]}class to extends X{constructor(e){super(),Z(this,e,eo,null,K,{})}}function oe(n){console.log("tolavaan called with mode: "+n);var e=Y(U);if(!e.full)return;let i=Y(Q);const t=i.edges();for(var o=0;o<t.length;o++)t[o].removeEstimates();if(i.getUserEdges().length==0){i.getLavaanNodes().remove(),i.getLavaanEdges().remove(),Shiny.setInputValue("show_help",Math.random());return}if(!e.dataAvail&&n=="estimate"){ge("danger","Model not send to lavaan because no data available");return}let s=hn(n);console.log("tolavaan for_R: ",s),Shiny.setInputValue("run-fromJavascript",JSON.stringify(s)),Shiny.setInputValue("runCounter",Math.random()),n==="user model"&&i.getLavaanModifiedEdges().forEach(r=>{r.freePara()})}function no(n,e){for(let i=0;i<n.length;i++)if(n[i]===e)return!0;return!1}function it(n,e){let i;n==null?i="1":i=n.getLabel();let t=!1,o;if(e.isFixed()&&!e.isModifiedLavaan()?(o=e.getValue()+"*"+i,t=!0):e.isForceFree()&&(o="NA*"+i,t=!0),e.hasLabel()){const s=e.getLabel();t?o+=" + "+s+"*"+i:(t=!0,o=s+"*"+i)}else t||(o=i);return o}class oo{constructor(e,i,t=null,o=null,s=null,r=null){this.mode=e,Object.assign(this,{model:{options:t,syntax:o,R_script:i,ordered_labels:r},forceUpdate:Math.random(),cache:s})}}function At(n,e="target"){let i="";const t=Math.max(...n.map(l=>l[e]().position().x))-Math.min(...n.map(l=>l[e]().position().x)),o=Math.max(...n.map(l=>l[e]().position().y))-Math.min(...n.map(l=>l[e]().position().y)),s=t>=o?"x":"y",r=n.map((l,d)=>({index:d,value:l.target().position()[s]})).sort((l,d)=>l.value-d.value).map(l=>l.index);for(let l=0;l<n.length;l++){const d=n[r[l]][e]();l>0&&(i+=" + "),i+=it(d,n[r[l]])}return i}function hn(n){let e=Y(Q),i=Y(U),t="",o="";o+=`library(lavaan)
`,i.dataAvail?o+=`data <- read.csv("${i.loadedFileName}")
`:o+=`#make sure your data is loaded into the 'data' variable
`;debugger;let s=e.getLatentNodes();s=s.nodes(function($){const y=$.connectedEdges(function(w){return w.isDirected()&&w.source().id()==$.id()});return y.length>0&&y.every(w=>w.target().isLatent())});let r=e.getLatentNodes();r=r.nodes(function($){const y=$.connectedEdges(function(N){return N.isDirected()&&N.target().id()==$.id()}),w=$.connectedEdges(function(N){return N.isDirected()});return w.length>0&&y.length==w.length});let l=e.getLatentNodes(),d=!1;for(let $=0;$<l.length;$++){const y=l[$],w=y.connectedEdges(function(N){return N.isDirected()&&N.source().id()==y.id()&&(N.target().isObserved()&&N.isFactLoad()||s.some(C=>C.id()===y.id()))});w.length>0&&(d||(t+=`# measurement model
`,d=!0),t+=" "+y.getLabel()+" =~ "+At(w,"target")+`
`)}function c($){return $.isDirected()&&!$.source().isConstant()&&(!($.source().isLatent()&&$.target().isObserved())||$.isRegression())&&!($.source().isLatent()&&s.some(w=>w.id()===$.source().id())&&$.target().isLatent())&&($.isUserAdded()||$.isModifiedLavaan())&&!r.some(w=>w.id()===$.target().id())}let a=e.edges(c),m=[];for(let $=0;$<a.length;$++)no(m,a[$].target())||m.push(a[$].target());if(m.length>0){t+=`
# regressions`;for(let $=0;$<m.length;$++){const y=m[$],w=y.connectedEdges(N=>c(N)&&N.target().same(y));if(w.length>0){let N="";for(var g=0;g<w.length;g++){var u=w[g].source();g>0&&(N+=" + "),N+=it(u,w[g])}t+=`
 `+y.getLabel()+" ~ "+N}}}let f=e.edges(function($){return($.isUndirected()||$.myIsLoop())&&($.isUserAdded()||$.isModifiedLavaan())});if(f.length>0){t+=`

# (residual) (co)variances`;for(let $=0;$<f.length;$++){let y=f[$].source().data("label");t+=`
 `+y+" ~~ "+it(f[$].target(),f[$])}}const b=e.nodes(function($){return $.isConstant()});for(let $=0;$<b.length;$++){const w=b[$].connectedEdges(function(N){return N.isUserAdded()});if(w.length>0){t+=`
# intercepts
`;for(var g=0;g<w.length;g++){var u=w[g].target();t+=" "+u.getLabel()+" ~ "+it(void 0,w[g])+`
`}}}d=!1;for(let $=0;$<r.length;$++){const y=r[$],w=y.connectedEdges(function(N){return N.isDirected()&&N.target().id()==y.id()});w.length>0&&(d||(t+=`

 #  formative factors
`,d=!0),t+=" "+y.getLabel()+" <~ "+At(w,"source")+`
`)}t=`'
`+t+`'

`;function h($,y=60){return $.split(`
`).map(w=>{if(w.includes("+")&&w.length>y){const N=w.split(" + ");let C=[],p=N[0];const P=w.match(/^\s*/)[0],A=p.indexOf("~")+1;for(let J=1;J<N.length;J++)p.length+N[J].length+3>y?(C.push(p+" + "),p=P+" ".repeat(A)+N[J]):p+=" + "+N[J];return C.push(p),C.join(`
`)}return w}).join(`
`)}t=h(t);const S=e.nodes(function($){return $.isOrdered()}).map($=>$.getLabel()),v=io(S);return o+="model <-"+t,o+="result <- lavaan(model, data, "+v,new oo(n,o,v,t=t,Y(Fe),S)}function io(n){const e=Y(ne),i=ke(e.meanStruc),t=ke(e.intOvFree),o=ke(e.intLvFree);let s=`meanstructure = ${i},
		 int.ov.free = ${t}, int.lv.free = ${o},
		 estimator = ${mt(e.estimator)}, se = ${mt(e.se)},
		 missing = ${mt(e.missing)}, auto.fix.first = ${ke(e.fix_first)},
		 auto.fix.single = ${ke(e.fix_single)}, auto.var = ${ke(e.auto_var)},
		 auto.cov.lv.x = ${ke(e.auto_cov_lv_x)}, auto.cov.y = ${ke(e.auto_cov_y)},
  		 fixed.x = ${ke(e.fixed_x)}, auto.th = ${ke(e["auto.th"])}, 
  		 auto.delta = ${ke(e["auto.delta"])}`;if(e.se=="boot"){const r=`, bootstrap = ${e.n_boot})`;s=s+r}else s=s+")";return n.length>0&&(s=`ordered = ${'c("'+n.join('", "')+'")'}, 
    		 ${s}`),s}function mt(n){return'"'+n+'"'}function ke(n){if(n==!0||n=="true")return"TRUE";if(n==!1||n=="false")return"FALSE";if(n=="default")return'"default"';throw new Error("Should not happen")}let bn,_n;function vn(){bn=1,_n=1}vn();function so(n){return new RegExp("^[a-zA-Z\\._][a-zA-Z0-9\\._]*(?<!\\.)$").test(n)}function ro(n){return so(n)?!0:(bootbox.alert(`The variable <b>${n}</b> was not added to the model because <b>${n}</b> is not a valid lavaan variable name. Please use only letters, numbers, underscores, and dots. The name must start with a letter or underscore and cannot end with a dot. You can use the <b>Show Data</b> menu to rename <b>${n}</b>.`),!1)}function be(n,e,i=!0,t=null,o=!1){let s=Y(Q),r=mn(),l;if(t!==null){if(!ro(t))return;if(s.nodes().find(c=>c.data().label===t)){ge("danger","Node with the same label already exists.");return}l=t}else n==le?l="x"+bn++:n==me?l="f"+_n++:l=void 0,s.nodes().find(c=>c.data().label===l)&&(l=l+".1");let d=Y(De);return e?d.do("add",{group:"nodes",data:{id:r,label:l},classes:[n,Je],renderedPosition:e}):(e={x:Math.random()*400+50,y:Math.random()*400+50},s.add({group:"nodes",data:{id:r,label:l},classes:[n,Je],renderedPosition:e})),i&&oe(Y(ne).mode),r}function qe(n,e,i=!0,t=!1,o=null,s=!0){let r=Y(Q),l=mn();return r.add({group:"edges",data:{id:l,source:n,target:e,value:t?o:void 0},classes:`${i?Me:Oe} ${s?he:Pe} ${t?Ce:Ee} ${We}`})}function pe(n,e=!1){const i=mo(n);if(!i&&!e)return null;const t=ao(n),o=uo(t),s=lo(fo(o),o);return i&&i.data("loop-direction",`${s}deg`),s}function lo(n,e){const i=[0,180,90,270],t=35,o=i.sort((l,d)=>{const c=Math.min(Math.abs(l-n),360-Math.abs(l-n)),a=Math.min(Math.abs(d-n),360-Math.abs(d-n));return c-a}),r=[[0,180],[90,270]].flatMap(l=>o.filter(d=>l.includes(d)));for(const l of r)if(!e.some(c=>{const a=Math.abs(l-c);return Math.min(a,360-a)<=t}))return l;return n}function ao(n){const e=cy.getElementById(n);if(e.length===0){console.error(`Node with ID ${n} does not exist.`);return}let i=[];return e.connectedEdges(t=>t.style("display")!=="none").forEach(t=>{const o=t.source(),s=t.target();let r;(o.id()!==e.id()||s.id()!==e.id())&&(o.id()===e.id()?r=Ft(t.sourceEndpoint(),e.position()):r=Ft(t.targetEndpoint(),e.position()),i.push(r))}),i}function Ft(n,e){return Object.keys(n).reduce((i,t)=>{if(e.hasOwnProperty(t))i[t]=n[t]-e[t];else throw new Error(`Key ${t} not found in second object`);return i},{})}function uo(n){let e=[];return n.forEach(i=>{e.push(co(i))}),e}function co(n){let e=Math.atan2(n.y,n.x)*180/Math.PI;return e=(e+90)%360,e}function fo(n){let e=-1,i=null;for(let t=0;t<=360;t++){let o=1/0;for(let s=0;s<n.length;s++){let r=Math.abs(n[s]-t);r=Math.min(r,360-r),o=Math.min(o,r)}o>e&&(e=o,i=t)}return i}function mo(n,e){var i=cy.getElementById(n),t=null;return i.connectedEdges().forEach(function(o){var s=o.source(),r=o.target();if(s.id()===n&&r.id()===n){t=o;return}}),t!==null&&i.connectedEdges().length>1&&!t.hasClass("fixDeg")?t:null}function go(n){let e,i,t;return{c(){e=G("div"),E(e,"id","cy"),E(e,"class","graph svelte-11pj9ut"),ve(e,"flex-basis",n[1].full?"70%":"100%")},m(o,s){I(o,e,s),n[6](e),i||(t=[ie(e,"mouseover",n[2]),ie(e,"mouseout",n[3]),ie(e,"mousemove",n[4]),ie(e,"drop",n[5]),ie(e,"dragover",po)],i=!0)},p(o,[s]){s&2&&ve(e,"flex-basis",o[1].full?"70%":"100%")},i:ce,o:ce,d(o){o&&T(e),n[6](null),i=!1,Xe(t)}}}function po(n){n.preventDefault()}function ho(n,e){let i=Math.atan2(n,-e)*(180/Math.PI);return i<0&&(i+=360),i}function bo(n,e,i){let t,o,s;te(n,De,y=>i(12,t=y)),te(n,U,y=>i(1,o=y)),te(n,ne,y=>i(13,s=y));let r=Y(Q),l=Y($t),d,c={x:0,y:0};we(()=>{r.mount(d)});function a(y){if(W(U,o.buttonDown=!0,o),(y.key==="Alt"||y.key===" "||y.key.toLowerCase()==="x")&&(l.enableDrawMode(),y.key==="Alt"?W(U,o.drawing="undirected",o):W(U,o.drawing="directed",o)),y.key==="Backspace"){let w=r.$(":selected");w.length>0&&(t.do("remove",w),oe(s.mode)),W(U,o.buttonDown=!1,o)}if(["l","o","c"].includes(y.key.toLowerCase())){let w;switch(y.key.toLowerCase()){case"l":w=me;break;case"o":w=le;break;case"c":w=Le;break}be(w,{...c}),W(U,o.buttonDown=!1,o)}W(U,o.buttonDown=!1,o)}function m(){r.autoungrabify(!1),r.nodes().grabify()}function g(y){(y.key==="Alt"||y.key===" "||y.key.toLowerCase()==="x")&&(l.disableDrawMode(),W(U,o.drawing="none",o),m())}function u(){document.addEventListener("keydown",a),document.addEventListener("keyup",g)}function f(){document.removeEventListener("keydown",a,!1),document.removeEventListener("keyup",g,!1)}function b(y){c.x=y.offsetX,c.y=y.offsetY}r.on("ehcomplete",(y,w,N,C)=>{const p=C,P=w.id(),A=N.id();if(p.remove(),p.init(),P!==A?(o.drawing==="undirected"?p.setUndirected():p.setDirected(),pe(P),pe(A)):(p.makeLoop(),pe(A)),!((p.isUndirected()||p.myIsLoop())&&(w.isConstant()||N.isConstant()))&&!(p.isDirected()&&N.isConstant())&&(p.checkAndMarkPotentalLatObReg(),!(p.isDirected()&&w.isConstant()&&N.connectedEdges(F=>F.isUserAdded()&&F.source().isConstant()).length>1))){if(p.myIsLoop()&&w.isOrdered()){ge("error","User-defined variance arrow is not allowed for ordered variables.");return}p.isDirected()&&w.isConstant()?p.makeMeanEdge():p.makeOtherEdge(),t.do("add",p),oe(s.mode)}});function h(y){let w=0;const N=100,C=N*2;y.preventDefault();let p={x:y.offsetX,y:y.offsetY};function P(F,k){let D;if(o.dataAvail){const fe=r.getObservedNodes().map(x=>x.data().label);D=o.columnNames.filter(x=>!fe.includes(x)).map(x=>({text:x,value:x}))}else D=Array.from({length:100},(fe,ee)=>`var${ee+1}`);const z={title:F,inputType:"select",multiple:!0,value:"",inputOptions:D,callback:k};bootbox.prompt(z)}function A(){ge("danger","Either no variable selected or at least one selected variable already is in the model.")}function J(F){return F&&!r.nodes().some(k=>k.data().label===F)}if(o.dragged=="observed-with-name")be(le,p,!0,o.draggedName,!0);else if(o.dragged=="multiple")P("Select Variables",function(F){if(J(F)){const k=r.zoom();F.forEach(D=>{be(le,{x:p.x+w*k,y:p.y},!0,D,!0),w+=N})}else A()});else if(o.dragged=="factor")P("Select Variables",function(F){if(J(F)){const k=r.zoom(),D=be(me,{x:p.x+N*k*F.length/2-je/2*k,y:p.y});F.forEach(z=>{const fe=be(le,{x:p.x+w*k,y:p.y+k*C},!0,z,!0);w+=N,qe(D,fe)}),W(ne,s.fix_first=!0,s),W(ne,s.fix_single=!0,s),W(ne,s.auto_var=!0,s),W(ne,s.intOvFree=!0,s),W(ne,s.intLvFree=!1,s)}else A()});else if(o.dragged=="growth"){let F=0;P("Select Time Points",function(k){if(J(k)){const D=r.zoom(),z=be(Le,{x:p.x+N*D*k.length/2-je/2*D,y:p.y},!0),fe=be(me,{x:p.x+je/2*D,y:p.y+1*C*D},!0,"Intercept"),ee=be(me,{x:p.x+N*D*(k.length-1)-je/2*D,y:p.y+1*C*D},!0,"Slope");qe(z,fe,!0,!1),qe(z,ee,!0,!1);let x=1;k.forEach(re=>{const Ge=be(le,{x:p.x+F*D,y:p.y+2*C*D},!0,re,!0);F+=N,qe(fe,Ge,!0,!0,1),x!=1&&qe(ee,Ge,!0,!0,x-1),x+=1}),W(ne,s.auto_var=!0,s),W(ne,s.intOvFree=!1,s),W(ne,s.intLvFree=!0,s)}})}else be(o.dragged,p);(o.dragged=="multiple"||o.dragged=="factor"||o.dragged=="growth")&&oe(s.mode),W(U,o.dragged=null,o)}let _=!1,S=null,v;r.on("mousedown","edge.loop",function(y){_=!0,S=y.target,S.unpanify(),v=S.style("loop-direction")});let L;r.on("mousemove",function(y){if(!_||!S)return;let N=S.source().renderedPosition();L=ho(c.x-N.x,c.y-N.y);const C=5,p=[0,90,180,270];for(let P=0;P<p.length;P++)if(Math.abs(L-p[P])<=C){L=p[P];break}S.data("loop-direction",`${L}deg`)}),window.addEventListener("mouseup",function(){if(_){if(_=!1,L===void 0||v===`${L}deg`)return;S.data("loop-direction",v),S.addClass("fixDeg"),t.do("style",{eles:S,style:{"loop-direction":`${L}deg`}}),S=null,L=void 0}});function $(y){se[y?"unshift":"push"](()=>{d=y,i(0,d)})}return[d,o,u,f,b,h,$]}class _o extends X{constructor(e){super(),Z(this,e,bo,go,K,{})}}function $n(n){const e=n.source().position(),i=n.target().position(),t={x:i.x-e.x,y:i.y-e.y},o=Math.sqrt(t.x**2+t.y**2);return{normalizedEdgeVector:{x:t.x/o,y:t.y/o},edgeMidpoint:n.midpoint(),edgeSourcePos:e,edgeTargetPos:i}}function vo(n,e){const{normalizedEdgeVector:i,edgeMidpoint:t,edgeSourcePos:o,edgeTargetPos:s}=$n(n),r=(s.y-t.y)/i.y-70,l=(o.y-t.y)/i.y+70;let d=Math.min(r,e);return d=Math.max(l,d),{newMarginX:d*i.x,newMarginY:d*i.y}}function Ot(n,e){const{newMarginX:i,newMarginY:t}=vo(n,e);n.style({"text-margin-x":i,"text-margin-y":t})}function $o(n,e,i){let t,o;te(n,U,d=>i(2,t=d)),te(n,ne,d=>i(3,o=d));let s=Y(Q);s.on("add","node",function(d){const c=d.target;if(c.isObserved()){let a=t.columnNames;a&&a.includes(c.getLabel())&&(c.link(),ge("success",`Variable ${c.getLabel()} linked to data`))}t.modelEmpty&&s.edges().length>0&&W(U,t.modelEmpty=!1,t)}),s.on("remove","node",function(d){s.getUserEdges().length==0&&(W(U,t.modelEmpty=!0,t),Shiny.setInputValue("show_help",Math.random())),t.loadingMode||oe(o.mode)}),s.on("remove","edge",function(d){pe(d.target.source().id()),pe(d.target.target().id())}),s.on("add","edge",function(d){W(U,t.everEdge=!0,t),t.modelEmpty&&s.edges().length>0&&W(U,t.modelEmpty=!1,t),pe(d.target.source().id()),pe(d.target.target().id())}),s.on("position","node",function(d){const c=d.target,a=c.neighborhood().nodes(),m=c.connectedEdges(g=>g.isDirected());a.forEach(g=>{pe(g.id())}),m.forEach(g=>{const u=g.data("displacement");u&&Ot(g,u)})});let r=null,l=!1;return s.on("mousedown",function(d){const c=f=>parseFloat(f.replace("px","")),a=d.position;let m=null,g=1/0;const u=30;s.edges().forEach(function(f){if(f.isDirected()&&!f.hasClass("edgecontrolediting-hascontrolpoints")){const b=c(f.style("text-margin-x")),h=c(f.style("text-margin-y")),_=f.midpoint(),S={x:_.x+b,y:_.y+h},v=Math.abs(a.x-S.x),L=a.y-S.y,$=Math.sqrt(v*v+L*L);$<g&&$<u&&(m=f,g=$)}}),m!==null&&!m.hasClass(".edgecontrolediting-hascontrolpoints")&&(r=m,l=!0,d.preventDefault(),m.unpanify())}),s.on("class","edge",function(d){const c=d.target;c.hasClass("edgecontrolediting-hascontrolpoints")&&(c.style({"text-margin-x":0,"text-margin-y":0}),c.data("displacement",null),r&&c.id()===r.id()&&(r=null,l=!1))}),s.on("mousemove",function(d){if(l&&r){const{normalizedEdgeVector:c,edgeMidpoint:a}=$n(r),m=d.position,g={x:m.x-a.x,y:m.y-a.y};let u=g.x*c.x+g.y*c.y;r.data("displacement",u),Ot(r,u)}}),s.on("mouseup",function(d){l=!1,r=null}),[]}class yo extends X{constructor(e){super(),Z(this,e,$o,null,K,{})}}function It(n,e,i){const t=n.slice();return t[21]=e[i],t}function Tt(n){let e,i,t,o,s,r,l,d,c,a,m,g,u,f,b=n[1],h=[];for(let _=0;_<b.length;_+=1)h[_]=Nt(It(n,b,_));return{c(){e=G("div"),i=V(),t=G("div"),o=G("button"),o.textContent="Multiple Variables",s=V(),r=G("button"),r.textContent="Factor",l=V(),d=G("button"),d.textContent="Growth",c=V(),a=G("div"),m=V(),g=G("ul");for(let _=0;_<h.length;_+=1)h[_].c();E(e,"class","vertical-bar svelte-r00s5r"),E(o,"class","draggable-item svelte-r00s5r"),E(o,"draggable","true"),E(r,"class","draggable-item svelte-r00s5r"),E(r,"draggable","true"),E(d,"class","draggable-item svelte-r00s5r"),E(d,"draggable","true"),E(t,"id","model-buttons"),E(t,"class","svelte-r00s5r"),E(a,"class","vertical-bar svelte-r00s5r"),E(g,"class","draggable-list svelte-r00s5r")},m(_,S){I(_,e,S),I(_,i,S),I(_,t,S),R(t,o),R(t,s),R(t,r),R(t,l),R(t,d),I(_,c,S),I(_,a,S),I(_,m,S),I(_,g,S);for(let v=0;v<h.length;v+=1)h[v]&&h[v].m(g,null);u||(f=[ie(o,"dragstart",n[14]),ie(r,"dragstart",n[15]),ie(d,"dragstart",n[16])],u=!0)},p(_,S){if(S&10){b=_[1];let v;for(v=0;v<b.length;v+=1){const L=It(_,b,v);h[v]?h[v].p(L,S):(h[v]=Nt(L),h[v].c(),h[v].m(g,null))}for(;v<h.length;v+=1)h[v].d(1);h.length=b.length}},d(_){_&&T(e),_&&T(i),_&&T(t),_&&T(c),_&&T(a),_&&T(m),_&&T(g),Ie(h,_),u=!1,Xe(f)}}}function Nt(n){let e,i=n[21]+"",t,o,s,r;function l(...d){return n[17](n[21],...d)}return{c(){e=G("li"),t=_e(i),o=V(),E(e,"draggable","true"),E(e,"class","draggable-item svelte-r00s5r")},m(d,c){I(d,e,c),R(e,t),R(e,o),s||(r=ie(e,"dragstart",l),s=!0)},p(d,c){n=d,c&2&&i!==(i=n[21]+"")&&Re(t,i)},d(d){d&&T(e),s=!1,r()}}}function wo(n){let e,i,t,o,s,r,l,d,c,a,m,g,u,f,b,h=n[0].dataAvail&&Tt(n);return{c(){e=G("div"),i=G("div"),t=G("div"),o=G("button"),s=V(),r=G("button"),l=V(),d=G("div"),c=V(),a=G("div"),m=V(),g=G("div"),u=V(),h&&h.c(),E(o,"class","arrow-btn direct-arrow svelte-r00s5r"),E(o,"title","Draw Directed Arrows"),xe(o,"active",n[0].drawing==="directed"),E(r,"class","arrow-btn undirected-arrow svelte-r00s5r"),E(r,"title","Draw Undirected Arrows"),xe(r,"active",n[0].drawing==="undirected"),E(d,"role","button"),E(d,"id","add-manifest-variable"),E(d,"title","Create Observed Variable"),E(d,"draggable","true"),E(d,"class","variable-button svelte-r00s5r"),E(d,"data-button-type",le),E(d,"tabindex","0"),E(a,"role","button"),E(a,"tabindex","0"),E(a,"id","add-latent-variable"),E(a,"title","Create Latent Variable"),E(a,"draggable","true"),E(a,"class","variable-button svelte-r00s5r"),E(a,"data-button-type",me),E(g,"role","button"),E(g,"tabindex","0"),E(g,"id","add-constant-variable"),E(g,"class","variable-button svelte-r00s5r"),E(g,"title","Create Constant Variable"),E(g,"data-button-type","const"),E(g,"draggable","true"),E(t,"id","buttons"),E(t,"class","svelte-r00s5r"),E(i,"id","buttonCont"),E(i,"class","svelte-r00s5r"),E(e,"class","toolbox svelte-r00s5r")},m(_,S){I(_,e,S),R(e,i),R(i,t),R(t,o),R(t,s),R(t,r),R(t,l),R(t,d),R(t,c),R(t,a),R(t,m),R(t,g),R(e,u),h&&h.m(e,null),f||(b=[ie(o,"click",n[9]),ie(r,"click",n[10]),ie(d,"dragstart",n[11]),ie(a,"dragstart",n[12]),ie(g,"dragstart",n[13])],f=!0)},p(_,[S]){S&1&&xe(o,"active",_[0].drawing==="directed"),S&1&&xe(r,"active",_[0].drawing==="undirected"),_[0].dataAvail?h?h.p(_,S):(h=Tt(_),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},i:ce,o:ce,d(_){_&&T(e),h&&h.d(),f=!1,Xe(b)}}}function ko(n,e,i){let t,o;te(n,U,y=>i(0,t=y)),te(n,Q,y=>i(8,o=y)),U.subscribe(y=>{});function s(y){W(U,t.dragged=y,t)}function r(y,w){W(U,t.dragged="observed-with-name",t),W(U,t.draggedName=w,t)}function l(y){W(U,t.dragged="multiple",t)}function d(y){W(U,t.dragged="factor",t)}function c(y){W(U,t.dragged="growth",t)}let a,m=Y($t);function g(y){t.drawing===y?(m.disableDrawMode(),W(U,t.drawing="none",t)):(m.enableDrawMode(),W(U,t.drawing=y,t))}const u=()=>{g("directed")},f=()=>{g("undirected")},b=()=>{event.dataTransfer.setData("text/plain","node"),s(le)},h=()=>{s(me)},_=()=>{s(Le)},S=y=>l(),v=y=>d(),L=y=>c(),$=(y,w)=>r(w,y);return n.$$.update=()=>{if(n.$$.dirty&257&&typeof o.getObservedNodes=="function"&&t.columnNames!==null){const y=o.getObservedNodes().map(w=>w.data("label"));i(1,a=t.columnNames.filter(w=>!y.includes(w)))}},[t,a,s,r,l,d,c,g,o,u,f,b,h,_,S,v,L,$]}class Eo extends X{constructor(e){super(),Z(this,e,ko,wo,K,{})}}function Co(n){let e,i,t,o,s;const r=n[1].default,l=Ze(r,n,n[0],null);return o=new Eo({}),{c(){e=G("nav"),i=G("ul"),l&&l.c(),t=V(),q(o.$$.fragment),E(i,"class","nav navbar-nav navbar-left"),E(e,"class","navbar navbar-default navbar-static-top navbar-left svelte-12n5yi9")},m(d,c){I(d,e,c),R(e,i),l&&l.m(i,null),R(e,t),j(o,e,null),s=!0},p(d,[c]){l&&l.p&&(!s||c&1)&&Ke(l,r,d,d[0],s?et(r,d[0],c,null):Qe(d[0]),null)},i(d){s||(M(l,d),M(o.$$.fragment,d),s=!0)},o(d){O(l,d),O(o.$$.fragment,d),s=!1},d(d){d&&T(e),l&&l.d(d),H(o)}}}function So(n,e,i){let{$$slots:t={},$$scope:o}=e;return n.$$set=s=>{"$$scope"in s&&i(0,o=s.$$scope)},[o,t]}class Lo extends X{constructor(e){super(),Z(this,e,So,Co,K,{})}}function Mo(n){let e,i,t,o,s,r,l;const d=n[3].default,c=Ze(d,n,n[2],null);return{c(){e=G("li"),i=G("a"),t=_e(n[0]),o=G("span"),s=V(),r=G("ul"),c&&c.c(),E(o,"class","caret"),E(i,"href","#"),E(i,"class","dropdown-toggle svelte-1oq006n"),E(i,"data-toggle","dropdown"),E(i,"role","button"),E(i,"aria-haspopup","true"),E(i,"aria-expanded","false"),E(i,"draggable","false"),xe(i,"minimal",n[1]),E(r,"class","dropdown-menu"),E(e,"class","dropdown")},m(a,m){I(a,e,m),R(e,i),R(i,t),R(i,o),R(e,s),R(e,r),c&&c.m(r,null),l=!0},p(a,[m]){(!l||m&1)&&Re(t,a[0]),(!l||m&2)&&xe(i,"minimal",a[1]),c&&c.p&&(!l||m&4)&&Ke(c,d,a,a[2],l?et(d,a[2],m,null):Qe(a[2]),null)},i(a){l||(M(c,a),l=!0)},o(a){O(c,a),l=!1},d(a){a&&T(e),c&&c.d(a)}}}function Do(n,e,i){let{$$slots:t={},$$scope:o}=e,{name:s}=e,{minimal:r=!1}=e;return n.$$set=l=>{"name"in l&&i(0,s=l.name),"minimal"in l&&i(1,r=l.minimal),"$$scope"in l&&i(2,o=l.$$scope)},[s,r,o,t]}class tt extends X{constructor(e){super(),Z(this,e,Do,Mo,K,{name:0,minimal:1})}}function Pt(n,e,i){const t=n.slice();return t[4]=e[i],t}function xt(n){let e;return{c(){e=G("li"),E(e,"class","divider")},m(i,t){I(i,e,t)},d(i){i&&T(e)}}}function Vt(n){let e,i,t=n[4].name+"",o,s,r,l,d;function c(...m){return n[3](n[4],...m)}let a=n[4].divider&&xt();return{c(){e=G("li"),i=G("a"),o=_e(t),s=V(),a&&a.c(),r=Be(),E(i,"href","#"),xe(e,"disabled",n[4].disable)},m(m,g){I(m,e,g),R(e,i),R(i,o),I(m,s,g),a&&a.m(m,g),I(m,r,g),l||(d=ie(i,"click",c),l=!0)},p(m,g){n=m,g&1&&t!==(t=n[4].name+"")&&Re(o,t),g&1&&xe(e,"disabled",n[4].disable),n[4].divider?a||(a=xt(),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},d(m){m&&T(e),m&&T(s),a&&a.d(m),m&&T(r),l=!1,d()}}}function Ao(n){let e,i=n[0],t=[];for(let o=0;o<i.length;o+=1)t[o]=Vt(Pt(n,i,o));return{c(){for(let o=0;o<t.length;o+=1)t[o].c();e=Be()},m(o,s){for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(o,s);I(o,e,s)},p(o,s){if(s&1){i=o[0];let r;for(r=0;r<i.length;r+=1){const l=Pt(o,i,r);t[r]?t[r].p(l,s):(t[r]=Vt(l),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=i.length}},d(o){Ie(t,o),o&&T(e)}}}function Fo(n){let e,i;return e=new tt({props:{minimal:n[2],name:n[1],$$slots:{default:[Ao]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(t,o){j(e,t,o),i=!0},p(t,[o]){const s={};o&4&&(s.minimal=t[2]),o&2&&(s.name=t[1]),o&129&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){O(e.$$.fragment,t),i=!1},d(t){H(e,t)}}}function Oo(n,e){e.disable||e.action(n)}function Io(n,e,i){let{menuItems:t}=e,{name:o}=e,{minimal:s=!1}=e;const r=(l,d)=>Oo(d,l);return n.$$set=l=>{"menuItems"in l&&i(0,t=l.menuItems),"name"in l&&i(1,o=l.name),"minimal"in l&&i(2,s=l.minimal)},[t,o,s,r]}class ut extends X{constructor(e){super(),Z(this,e,Io,Fo,K,{menuItems:0,name:1,minimal:2})}}function ht(n,e){if(n==null)throw new Error("Columnnames may not be null.");const t=Y(Q).nodes(function(s){return s.isObserved()});if(t.length>0)for(var o=0;o<t.length;o++){const s=t[o],r=s.getLabel();n.includes(r)&&!s.isLinked()?s.link():!n.includes(r)&&s.isLinked()&&s.unlink()}}async function yn(n){Shiny.setInputValue("down-requestData",{goal:n,random:Math.random()})}function bt(){Y(Q).elements().remove(),vn(),U.update(e=>(e.parsedModel=!1,e)),ne.update(e=>(e.fix_first=!0,e.mode="user model",e)),Shiny.setInputValue("show_help",Math.random()),Fe.update(e=>{for(let i in e)e[i]=null;return e})}function _t(n){bt();let e=JSON.parse(n),i=Y(Q),t;t=JSON.parse(e.model);const o=JSON.parse(e.modelOpt),s=JSON.parse(e.gridViewOpt);if(Rt(ne,o),Rt(ne,s),e.fitCache!==void 0){const r=JSON.parse(e.fitCache);Fe.set(r)}U.update(r=>(r.loadingMode=!0,r)),i.json({elements:t}),i.nodes().forEach(r=>{r.style({width:r.data("width")}),r.style({height:r.data("height")})}),Y(U).dataAvail&&ht(Y(U).columnNames),Y(ne).mode!=="user model"?ue.update(r=>(r.showLav=!0,r)):ue.update(r=>(r.showLav=!1,r)),i.nodes().forEach(r=>{pe(r.id())}),i.edges().forEach(r=>{r.checkAndMarkPotentialLatObReg()}),U.update(r=>(r.loadingMode=!1,r))}function vt(){const n=Y(Q);n.nodes().forEach(l=>{l.data("width",l.width()),l.data("height",l.height())});let e=n.json().elements;e.nodes.forEach(l=>{l.classes=l.classes.split(" ").filter(d=>d!==Ue).join(" ")});const i=JSON.stringify(e),t=JSON.stringify(Y(ne)),o=JSON.stringify(Y(ne)),s=JSON.stringify(Y(Fe));return JSON.stringify({model:i,modelOpt:t,gridViewOpt:o,fitCache:s})}function Rt(n,e){n.update(i=>{for(let t in e)e.hasOwnProperty(t)&&e[t]!==void 0&&(i[t]=e[t]);return i})}function To(n){let e,i;return e=new ut({props:{name:"File",menuItems:n[1],minimal:!n[0]}}),{c(){q(e.$$.fragment)},m(t,o){j(e,t,o),i=!0},p(t,[o]){const s={};o&2&&(s.menuItems=t[1]),o&1&&(s.minimal=!t[0]),e.$set(s)},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){O(e.$$.fragment,t),i=!1},d(t){H(e,t)}}}function No(){document.getElementById("dataUpload-fileInput").click()}function zt(){const n=new Date;return`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}_${String(n.getHours()).padStart(2,"0")}-${String(n.getMinutes()).padStart(2,"0")}-${String(n.getSeconds()).padStart(2,"0")}`}function Po(n,e,i){let t,o;te(n,U,$=>i(2,t=$)),te(n,pt,$=>i(3,o=$));let{full:s=!0}=e;B.use(In);function r(){t.modelEmpty?bt():bootbox.confirm("Are you sure you want to create a new model? This will delete the current model.",function($){$&&bt()})}function l($,y){ct.saveAs($,"model."+y)}async function d(){const $=document.createElement("input");$.setAttribute("type","file"),$.setAttribute("accept",".lvm");const y=await new Promise(N=>{$.addEventListener("change",C=>N(C.target.files[0])),$.click()}),w=await new Promise(N=>{const C=new FileReader;C.readAsText(y,"UTF-8"),C.onload=()=>N(C.result)});_t(w)}function c(){t.modelEmpty?d():bootbox.confirm("Are you sure you want to load a model? This will delete the current model.",function($){$&&d()})}document.getElementById("dataUpload-fileInput").addEventListener("change",function(){this.files&&this.files.length>0&&window.$("#upload-modal").modal()});function a(){t.modelEmpty?m():bootbox.confirm("Are you sure you want to load model and data? This will delete the current model and data.",function($){$&&m()})}function m(){const $=document.createElement("input");$.setAttribute("type","file"),$.setAttribute("accept",".lvd"),$.addEventListener("change",function(y){const w=y.target.files[0],N=new FileReader;N.readAsArrayBuffer(w),N.onload=function(){const C=N.result;Lt.loadAsync(C).then(function(p){p.file("data.csv").async("base64").then(function(P){Shiny.setInputValue("dataUpload-fileInput",{content:P});const A=setInterval(()=>{t.dataAvail&&(clearInterval(A),p.file("model.lvm").async("text").then(function(J){_t(J)}))},100)})})}}),$.click()}function g(){const $=vt();let y=new Blob([$],{type:"application/json;charset=utf-8"});ct.saveAs(y,"model_"+zt()+".lvm")}Shiny.addCustomMessageHandler("dataForDownload",function($){(async()=>{const y=vt(),w=new Lt;w.file("model.lvm",y),w.file("data.csv",$);const N=await w.generateAsync({type:"blob"}),C=new File([N],"model_"+zt()+".lvd",{type:"application/zip"});ct.saveAs(C)})()});function u(){const $=Y(Q);W(U,t.dataAvail=!1,t),W(U,t.columnNames=null,t),W(U,t.loadedFileName=null,t),W(U,t.ids=null,t),W(pt,o=null,o),$.nodes().unlink(),Shiny.setInputValue("dataUpload-deleteData",Math.random())}function f(){const $=Y(Q);l($.png({bg:"white"}),"png")}function b(){const $=Y(Q);l($.jpg(),"jpg")}function h(){return Y(Q).svg({scale:1,full:!0})}function _(){const $=h(),y=new Blob([$],{type:"image/svg+xml;charset=utf-8"});l(y,"svg")}function S(){yn("download")}async function v(){const $=h(),w=new DOMParser().parseFromString($,"image/svg+xml").documentElement;w.style.position="absolute",w.style.left="-9999px",document.body.appendChild(w);const N=w.getBoundingClientRect();document.body.removeChild(w);const C=N.width,p=N.height,P=new Tn({orientation:C>p?"landscape":"portrait",unit:"pt",format:[C,p]});await Nn(w,P,{width:C,height:p}),P.save("model.pdf")}let L;return n.$$set=$=>{"full"in $&&i(0,s=$.full)},n.$$.update=()=>{if(n.$$.dirty&5){let $=[{name:"New Model",action:r,divider:!0},{name:"Load Model",action:c},{name:"Load Data",action:No},{name:"Load Model and Data",action:a,divider:!0},{name:"Save Model",action:g,disable:t.modelEmpty},{name:"Save Model and Data",disable:t.modelEmpty||!t.dataAvail,action:S,divider:!0},{name:"Remove Data",action:u,disable:!t.dataAvail,divider:!0},{name:"Export Diagram to PNG",disable:t.modelEmpty,action:f},{name:"Export Diagram to JPG",disable:t.modelEmpty,action:b},{name:"Export Diagram to SVG",disable:t.modelEmpty,action:_},{name:"Export Diagram to PDF",disable:t.modelEmpty,action:v}];s?i(1,L=$):i(1,L=$.filter(y=>["Save Model","Load Model"].includes(y.name)||$.indexOf(y)>=$.length-4))}},[s,L,t]}class wn extends X{constructor(e){super(),Z(this,e,Po,To,K,{full:0})}}function xo(n){let e;return{c(){e=G("span"),E(e,"class","glyphicon glyphicon-ok check-mark invisible"),E(e,"aria-hidden","true")},m(i,t){I(i,e,t)},d(i){i&&T(e)}}}function Vo(n){let e;return{c(){e=G("span"),E(e,"class","glyphicon glyphicon-ok check-mark"),E(e,"aria-hidden","true")},m(i,t){I(i,e,t)},d(i){i&&T(e)}}}function Ro(n){let e,i,t,o,s,r,l,d,c;function a(u,f){return u[0]?Vo:xo}let m=a(n),g=m(n);return{c(){e=G("li"),i=G("label"),t=G("input"),o=V(),g.c(),s=V(),r=_e(n[1]),E(t,"type","checkbox"),E(t,"class","check-box svelte-17cge7g"),t.disabled=n[2],E(i,"class",l=Ve(n[2]?"disabled-label":"")+" svelte-17cge7g"),E(e,"class","svelte-17cge7g")},m(u,f){I(u,e,f),R(e,i),R(i,t),t.checked=n[0],R(i,o),g.m(i,null),R(i,s),R(i,r),d||(c=ie(t,"change",n[3]),d=!0)},p(u,[f]){f&4&&(t.disabled=u[2]),f&1&&(t.checked=u[0]),m!==(m=a(u))&&(g.d(1),g=m(u),g&&(g.c(),g.m(i,s))),f&2&&Re(r,u[1]),f&4&&l!==(l=Ve(u[2]?"disabled-label":"")+" svelte-17cge7g")&&E(i,"class",l)},i:ce,o:ce,d(u){u&&T(e),g.d(),d=!1,c()}}}function zo(n,e,i){let{name:t}=e,{checked:o}=e,{disable:s=!1}=e;function r(){o=this.checked,i(0,o)}return n.$$set=l=>{"name"in l&&i(1,t=l.name),"checked"in l&&i(0,o=l.checked),"disable"in l&&i(2,s=l.disable)},[o,t,s,r]}class Se extends X{constructor(e){super(),Z(this,e,zo,Ro,K,{name:1,checked:0,disable:2})}}function Bo(n){let e;return{c(){e=G("span"),E(e,"class","glyphicon glyphicon-ok check-mark invisible"),E(e,"aria-hidden","true")},m(i,t){I(i,e,t)},d(i){i&&T(e)}}}function Uo(n){let e;return{c(){e=G("span"),E(e,"class","glyphicon glyphicon-ok check-mark"),E(e,"aria-hidden","true")},m(i,t){I(i,e,t)},d(i){i&&T(e)}}}function Go(n){let e,i,t,o=!1,s,r,l,d,c,a,m,g;function u(h,_){return h[0]===h[2]?Uo:Bo}let f=u(n),b=f(n);return a=An(n[5][0]),{c(){e=G("div"),i=G("label"),t=G("input"),s=V(),b.c(),r=V(),l=_e(n[1]),E(t,"type","radio"),E(t,"name","meanStruc"),t.__value=n[2],t.value=t.__value,t.disabled=n[3],E(t,"class","svelte-lbhkwe"),E(i,"class",d=Ve(n[3]?"text-muted":"")+" svelte-lbhkwe"),E(e,"class",c=Ve(n[3]?"radio disabled":"radio")+" svelte-lbhkwe"),a.p(t)},m(h,_){I(h,e,_),R(e,i),R(i,t),t.checked=t.__value===n[0],R(i,s),b.m(i,null),R(i,r),R(i,l),m||(g=ie(t,"change",n[4]),m=!0)},p(h,[_]){_&4&&(t.__value=h[2],t.value=t.__value,o=!0),_&8&&(t.disabled=h[3]),(o||_&1)&&(t.checked=t.__value===h[0]),f!==(f=u(h))&&(b.d(1),b=f(h),b&&(b.c(),b.m(i,r))),_&2&&Re(l,h[1]),_&8&&d!==(d=Ve(h[3]?"text-muted":"")+" svelte-lbhkwe")&&E(i,"class",d),_&8&&c!==(c=Ve(h[3]?"radio disabled":"radio")+" svelte-lbhkwe")&&E(e,"class",c)},i:ce,o:ce,d(h){h&&T(e),b.d(),a.r(),m=!1,g()}}}function qo(n,e,i){let{name:t}=e,{value:o}=e,{group:s}=e,{isDisabled:r=!1}=e;const l=[[]];function d(){s=this.__value,i(0,s)}return n.$$set=c=>{"name"in c&&i(1,t=c.name),"value"in c&&i(2,o=c.value),"group"in c&&i(0,s=c.group),"isDisabled"in c&&i(3,r=c.isDisabled)},[s,t,o,r,d,l]}class nt extends X{constructor(e){super(),Z(this,e,qo,Go,K,{name:1,value:2,group:0,isDisabled:3})}}const Bt=[{name:"Arrows Created by Lavaan",modelSlot:"showLav"},{name:"Variance Arrows",modelSlot:"showVar"},{name:"Mean Arrows",modelSlot:"showMean"}];let Ut=[{name:"Estimate",value:"est"},{name:"Confidence Interval",value:"ci"},{name:"Estimate + p-value (stars)",value:"estPVal"},{name:"Estimate + Standard Error",value:"estSE"}];function jo(n,e,i){const t=Y(Q),o=e?"_std":"",s=kn(n,o,i);t.style().selector("edge.hasEst").style({label:s}).update();const r=Yo(n,o,i);t.style().selector("edge.hasEst.label").style({label:r}).update();const l=Jo(n,o,i);t.style().selector("edge.hasEstFixed").style({label:l}).update()}function Ho(n,e,i){function t(a){return a.reduce((m,g,u)=>(g&&m.push(u),m),[])}const o=Y(Q),s=[e,n,i],r=t(s),l=t(s.map(a=>!a)),d=r.concat(l);function c(a,m){return[u=>u.isLavaanAdded(),u=>u.isLoop(),u=>u.isMean()][a](m)}for(let a of d){const m=o.elements(function(g){return c(a,g)});if(s[a]?m.removeClass("hidden"):m.addClass("hidden"),a==2){const g=m.connectedEdges().connectedNodes(),u=m.connectedEdges();s[a]?u.forEach(f=>{f.removeClass("hidden")}):u.forEach(f=>{f.addClass("hidden")}),g.forEach(f=>{pe(f.id())})}else m.forEach(g=>{pe(g.source().id()),pe(g.target().id())})}}function Wo(n){return n===null?"NA":n<.001?"***":n<.01?"**":n<.05?"*":""}function kn(n,e,i){const t=o=>o===null?"NA":o.toFixed(i);switch(n){case"est":return o=>t(o.data("estimates")["est"+e]);case"ci":return o=>`[${t(o.data("estimates")["ciLow"+e])}, ${t(o.data("estimates")["ciHigh"+e])}]`;case"estPVal":return o=>`${t(o.data("estimates")["est"+e])}${Wo(o.data("estimates").p_value)}`;case"estSE":return o=>`${t(o.data("estimates")["est"+e])} (${t(o.data("estimates")["se"+e])})`;default:return()=>"NA"}}function Yo(n,e,i){const t=kn(n,e,i);return o=>`${o.data("label")} = ${t(o)}`}function Jo(n,e,i){const t=o=>o===null?"NA":o.toFixed(i);return o=>"@"+t(o.data("estimates")["estFixed"+e])}function Xo(n){let e,i,t,o,s,r;return{c(){e=G("li"),i=_e(n[1]),t=V(),o=G("input"),ve(o,"width","4em"),E(o,"type","number"),E(o,"min",n[2]),ve(e,"padding-left","28px")},m(l,d){I(l,e,d),R(e,i),R(e,t),R(e,o),rt(o,n[0]),s||(r=ie(o,"input",n[3]),s=!0)},p(l,[d]){d&2&&Re(i,l[1]),d&4&&E(o,"min",l[2]),d&1&&dt(o.value)!==l[0]&&rt(o,l[0])},i:ce,o:ce,d(l){l&&T(e),s=!1,r()}}}function Zo(n,e,i){let{name:t}=e,{value:o}=e,{min:s}=e;function r(){o=dt(this.value),i(0,o)}return n.$$set=l=>{"name"in l&&i(1,t=l.name),"value"in l&&i(0,o=l.value),"min"in l&&i(2,s=l.min)},[o,t,s,r]}class at extends X{constructor(e){super(),Z(this,e,Zo,Xo,K,{name:1,value:0,min:2})}}function Gt(n,e,i){const t=n.slice();return t[9]=e[i],t}function qt(n,e,i){const t=n.slice();return t[9]=e[i],t[12]=e,t[13]=i,t}function jt(n){let e,i,t,o;function s(d){n[3](d,n[9])}function r(d){n[4](d,n[9])}let l={disable:!1};return n[9].name!==void 0&&(l.name=n[9].name),n[1][n[9].modelSlot]!==void 0&&(l.checked=n[1][n[9].modelSlot]),e=new Se({props:l}),se.push(()=>ae(e,"name",s)),se.push(()=>ae(e,"checked",r)),{c(){q(e.$$.fragment)},m(d,c){j(e,d,c),o=!0},p(d,c){n=d;const a={};!i&&c&4&&(i=!0,a.name=n[9].name,de(()=>i=!1)),!t&&c&6&&(t=!0,a.checked=n[1][n[9].modelSlot],de(()=>t=!1)),e.$set(a)},i(d){o||(M(e.$$.fragment,d),o=!0)},o(d){O(e.$$.fragment,d),o=!1},d(d){H(e,d)}}}function Ht(n){let e,i,t;function o(r){n[6](r)}let s={name:n[9].name,value:n[9].value};return n[1].view!==void 0&&(s.group=n[1].view),e=new nt({props:s}),se.push(()=>ae(e,"group",o)),{c(){q(e.$$.fragment)},m(r,l){j(e,r,l),t=!0},p(r,l){const d={};!i&&l&2&&(i=!0,d.group=r[1].view,de(()=>i=!1)),e.$set(d)},i(r){t||(M(e.$$.fragment,r),t=!0)},o(r){O(e.$$.fragment,r),t=!1},d(r){H(e,r)}}}function Ko(n){let e,i,t,o,s,r,l,d,c,a,m,g,u,f,b,h,_,S,v,L,$=n[2],y=[];for(let k=0;k<$.length;k+=1)y[k]=jt(qt(n,$,k));const w=k=>O(y[k],1,1,()=>{y[k]=null});function N(k){n[5](k)}let C={name:"Standardized Estimates",disable:!1};n[1].std!==void 0&&(C.checked=n[1].std),o=new Se({props:C}),se.push(()=>ae(o,"checked",N));let p=Ut,P=[];for(let k=0;k<p.length;k+=1)P[k]=Ht(Gt(n,p,k));const A=k=>O(P[k],1,1,()=>{P[k]=null});function J(k){n[8](k)}let F={name:"Number Digits",min:0};return n[1].number_digits!==void 0&&(F.value=n[1].number_digits),h=new at({props:F}),se.push(()=>ae(h,"value",J)),{c(){for(let k=0;k<y.length;k+=1)y[k].c();e=V(),i=G("li"),t=V(),q(o.$$.fragment),r=V(),l=G("li"),d=V();for(let k=0;k<P.length;k+=1)P[k].c();c=V(),a=G("li"),m=V(),g=G("li"),u=_e(`Confidence Level
    `),f=G("input"),b=V(),q(h.$$.fragment),E(i,"class","divider"),E(l,"class","divider"),E(a,"class","divider"),E(f,"type","number"),E(f,"min","0"),E(f,"max","0.999999"),E(f,"step","0.01"),ve(f,"width","4em"),ve(g,"padding-left","28px")},m(k,D){for(let z=0;z<y.length;z+=1)y[z]&&y[z].m(k,D);I(k,e,D),I(k,i,D),I(k,t,D),j(o,k,D),I(k,r,D),I(k,l,D),I(k,d,D);for(let z=0;z<P.length;z+=1)P[z]&&P[z].m(k,D);I(k,c,D),I(k,a,D),I(k,m,D),I(k,g,D),R(g,u),R(g,f),rt(f,n[1].ci),I(k,b,D),j(h,k,D),S=!0,v||(L=ie(f,"input",n[7]),v=!0)},p(k,D){if(D&6){$=k[2];let ee;for(ee=0;ee<$.length;ee+=1){const x=qt(k,$,ee);y[ee]?(y[ee].p(x,D),M(y[ee],1)):(y[ee]=jt(x),y[ee].c(),M(y[ee],1),y[ee].m(e.parentNode,e))}for($e(),ee=$.length;ee<y.length;ee+=1)w(ee);ye()}const z={};if(!s&&D&2&&(s=!0,z.checked=k[1].std,de(()=>s=!1)),o.$set(z),D&2){p=Ut;let ee;for(ee=0;ee<p.length;ee+=1){const x=Gt(k,p,ee);P[ee]?(P[ee].p(x,D),M(P[ee],1)):(P[ee]=Ht(x),P[ee].c(),M(P[ee],1),P[ee].m(c.parentNode,c))}for($e(),ee=p.length;ee<P.length;ee+=1)A(ee);ye()}D&2&&dt(f.value)!==k[1].ci&&rt(f,k[1].ci);const fe={};!_&&D&2&&(_=!0,fe.value=k[1].number_digits,de(()=>_=!1)),h.$set(fe)},i(k){if(!S){for(let D=0;D<$.length;D+=1)M(y[D]);M(o.$$.fragment,k);for(let D=0;D<p.length;D+=1)M(P[D]);M(h.$$.fragment,k),S=!0}},o(k){y=y.filter(Boolean);for(let D=0;D<y.length;D+=1)O(y[D]);O(o.$$.fragment,k),P=P.filter(Boolean);for(let D=0;D<P.length;D+=1)O(P[D]);O(h.$$.fragment,k),S=!1},d(k){Ie(y,k),k&&T(e),k&&T(i),k&&T(t),H(o,k),k&&T(r),k&&T(l),k&&T(d),Ie(P,k),k&&T(c),k&&T(a),k&&T(m),k&&T(g),k&&T(b),H(h,k),v=!1,L()}}}function Qo(n){let e,i;return e=new tt({props:{name:"View",minimal:n[0],$$slots:{default:[Ko]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(t,o){j(e,t,o),i=!0},p(t,[o]){const s={};o&1&&(s.minimal=t[0]),o&16390&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){O(e.$$.fragment,t),i=!1},d(t){H(e,t)}}}function ei(n,e,i){let t;te(n,ue,m=>i(1,t=m));let{minimal:o=!1}=e;function s(m,g){n.$$.not_equal(g.name,m)&&(g.name=m,i(2,Bt))}function r(m,g){n.$$.not_equal(t[g.modelSlot],m)&&(t[g.modelSlot]=m,ue.set(t))}function l(m){n.$$.not_equal(t.std,m)&&(t.std=m,ue.set(t))}function d(m){n.$$.not_equal(t.view,m)&&(t.view=m,ue.set(t))}function c(){t.ci=dt(this.value),ue.set(t)}function a(m){n.$$.not_equal(t.number_digits,m)&&(t.number_digits=m,ue.set(t))}return n.$$set=m=>{"minimal"in m&&i(0,o=m.minimal)},n.$$.update=()=>{n.$$.dirty&2&&Shiny.setInputValue("ests-confindence_level",t.ci)},[o,t,Bt,s,r,l,d,c,a]}class En extends X{constructor(e){super(),Z(this,e,ei,Qo,K,{minimal:0})}}function Wt(n,e,i){const t=n.slice();return t[9]=e[i],t}function Yt(n,e,i){const t=n.slice();return t[9]=e[i],t}function Jt(n,e,i){const t=n.slice();return t[9]=e[i],t}function Xt(n){let e,i,t;function o(r){n[4](r)}let s={name:n[9].name,value:n[9].value};return n[0].estimator!==void 0&&(s.group=n[0].estimator),e=new nt({props:s}),se.push(()=>ae(e,"group",o)),{c(){q(e.$$.fragment)},m(r,l){j(e,r,l),t=!0},p(r,l){const d={};!i&&l&1&&(i=!0,d.group=r[0].estimator,de(()=>i=!1)),e.$set(d)},i(r){t||(M(e.$$.fragment,r),t=!0)},o(r){O(e.$$.fragment,r),t=!1},d(r){H(e,r)}}}function Zt(n){let e,i,t;function o(r){n[5](r)}let s={name:n[9].name,value:n[9].value};return n[0].se!==void 0&&(s.group=n[0].se),e=new nt({props:s}),se.push(()=>ae(e,"group",o)),{c(){q(e.$$.fragment)},m(r,l){j(e,r,l),t=!0},p(r,l){const d={};!i&&l&1&&(i=!0,d.group=r[0].se,de(()=>i=!1)),e.$set(d)},i(r){t||(M(e.$$.fragment,r),t=!0)},o(r){O(e.$$.fragment,r),t=!1},d(r){H(e,r)}}}function Kt(n){let e,i,t;function o(r){n[7](r)}let s={name:n[9].name,value:n[9].value};return n[0].missing!==void 0&&(s.group=n[0].missing),e=new nt({props:s}),se.push(()=>ae(e,"group",o)),{c(){q(e.$$.fragment)},m(r,l){j(e,r,l),t=!0},p(r,l){const d={};!i&&l&1&&(i=!0,d.group=r[0].missing,de(()=>i=!1)),e.$set(d)},i(r){t||(M(e.$$.fragment,r),t=!0)},o(r){O(e.$$.fragment,r),t=!1},d(r){H(e,r)}}}function ti(n){let e,i,t,o,s,r,l,d,c,a,m,g,u,f,b,h,_,S,v=n[1],L=[];for(let F=0;F<v.length;F+=1)L[F]=Xt(Jt(n,v,F));const $=F=>O(L[F],1,1,()=>{L[F]=null});let y=n[2],w=[];for(let F=0;F<y.length;F+=1)w[F]=Zt(Yt(n,y,F));const N=F=>O(w[F],1,1,()=>{w[F]=null});function C(F){n[6](F)}let p={name:"Number of Bootstrap Samples:",min:5};n[0].n_boot!==void 0&&(p.value=n[0].n_boot),m=new at({props:p}),se.push(()=>ae(m,"value",C));let P=n[3],A=[];for(let F=0;F<P.length;F+=1)A[F]=Kt(Wt(n,P,F));const J=F=>O(A[F],1,1,()=>{A[F]=null});return{c(){e=G("li"),i=G("a"),i.textContent="Estimator",t=V(),o=G("ul");for(let F=0;F<L.length;F+=1)L[F].c();s=V(),r=G("li"),l=G("a"),l.textContent="Standard Error",d=V(),c=G("ul");for(let F=0;F<w.length;F+=1)w[F].c();a=V(),q(m.$$.fragment),u=V(),f=G("li"),b=G("a"),b.textContent="Missing Values",h=V(),_=G("ul");for(let F=0;F<A.length;F+=1)A[F].c();E(i,"tabindex","-1"),E(i,"href","#"),E(i,"class","svelte-143y7r6"),E(o,"class","dropdown-menu svelte-143y7r6"),E(e,"class","dropdown-submenu svelte-143y7r6"),E(l,"tabindex","-1"),E(l,"href","#"),E(l,"class","svelte-143y7r6"),E(c,"class","dropdown-menu svelte-143y7r6"),E(r,"class","dropdown-submenu svelte-143y7r6"),E(b,"tabindex","-1"),E(b,"href","#"),E(b,"class","svelte-143y7r6"),E(_,"class","dropdown-menu svelte-143y7r6"),E(f,"class","dropdown-submenu svelte-143y7r6")},m(F,k){I(F,e,k),R(e,i),R(e,t),R(e,o);for(let D=0;D<L.length;D+=1)L[D]&&L[D].m(o,null);I(F,s,k),I(F,r,k),R(r,l),R(r,d),R(r,c);for(let D=0;D<w.length;D+=1)w[D]&&w[D].m(c,null);R(c,a),j(m,c,null),I(F,u,k),I(F,f,k),R(f,b),R(f,h),R(f,_);for(let D=0;D<A.length;D+=1)A[D]&&A[D].m(_,null);S=!0},p(F,k){if(k&3){v=F[1];let z;for(z=0;z<v.length;z+=1){const fe=Jt(F,v,z);L[z]?(L[z].p(fe,k),M(L[z],1)):(L[z]=Xt(fe),L[z].c(),M(L[z],1),L[z].m(o,null))}for($e(),z=v.length;z<L.length;z+=1)$(z);ye()}if(k&5){y=F[2];let z;for(z=0;z<y.length;z+=1){const fe=Yt(F,y,z);w[z]?(w[z].p(fe,k),M(w[z],1)):(w[z]=Zt(fe),w[z].c(),M(w[z],1),w[z].m(c,a))}for($e(),z=y.length;z<w.length;z+=1)N(z);ye()}const D={};if(!g&&k&1&&(g=!0,D.value=F[0].n_boot,de(()=>g=!1)),m.$set(D),k&9){P=F[3];let z;for(z=0;z<P.length;z+=1){const fe=Wt(F,P,z);A[z]?(A[z].p(fe,k),M(A[z],1)):(A[z]=Kt(fe),A[z].c(),M(A[z],1),A[z].m(_,null))}for($e(),z=P.length;z<A.length;z+=1)J(z);ye()}},i(F){if(!S){for(let k=0;k<v.length;k+=1)M(L[k]);for(let k=0;k<y.length;k+=1)M(w[k]);M(m.$$.fragment,F);for(let k=0;k<P.length;k+=1)M(A[k]);S=!0}},o(F){L=L.filter(Boolean);for(let k=0;k<L.length;k+=1)O(L[k]);w=w.filter(Boolean);for(let k=0;k<w.length;k+=1)O(w[k]);O(m.$$.fragment,F),A=A.filter(Boolean);for(let k=0;k<A.length;k+=1)O(A[k]);S=!1},d(F){F&&T(e),Ie(L,F),F&&T(s),F&&T(r),Ie(w,F),H(m),F&&T(u),F&&T(f),Ie(A,F)}}}function ni(n){let e,i;return e=new tt({props:{name:oi,$$slots:{default:[ti]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(t,o){j(e,t,o),i=!0},p(t,[o]){const s={};o&65537&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){O(e.$$.fragment,t),i=!1},d(t){H(e,t)}}}const oi="Estimation";function ii(n,e,i){let t;te(n,ne,m=>i(0,t=m));const o=[{value:"default",name:"Default"},{value:"ML",name:"Maximum Likelihood (ML)"},{value:"GLS",name:"Generalized Least Squares (GLS)"},{value:"WLS",name:"Weighted Least Squares (WLS)"},{value:"ULS",name:"Unweighted Least Squares (ULS)"},{value:"DWLS",name:"Diagonally Weighted Least Squares (DWLS)"},{value:"DLS",name:"Distributionally-weighted Least Squares (DLW)"}],s=[{value:"default",name:"Default"},{value:"robust",name:"Robust"},{value:"boot",name:"Bootstrap"}],r=[{value:"listwise",name:"Listwise Deletion"},{value:"ml",name:"Full Information Maximum Likelihood (FIML)"}];function l(m){n.$$.not_equal(t.estimator,m)&&(t.estimator=m,ne.set(t))}function d(m){n.$$.not_equal(t.se,m)&&(t.se=m,ne.set(t))}function c(m){n.$$.not_equal(t.n_boot,m)&&(t.n_boot=m,ne.set(t))}function a(m){n.$$.not_equal(t.missing,m)&&(t.missing=m,ne.set(t))}return[t,o,s,r,l,d,c,a]}class si extends X{constructor(e){super(),Z(this,e,ii,ni,K,{})}}let gt=0,Cn=!1;function Sn(){return typeof Shiny=="object"&&Shiny!==null}function ri(n){const e=Object.keys(n),i=n[e[0]].length,t=[];for(let o=0;o<i;o++){const s={};for(const r of e)s[r]=n[r][o];t.push(s)}return t}function st(n,e=!0){Cn=e,gt=gt+1;let i=hn(!0);i.name=n,i.counter=gt,Sn()&&Shiny.setInputValue("layout-layout",JSON.stringify(i))}Sn()&&Shiny.addCustomMessageHandler("semPlotLayout",function(n){n=ri(n);const e=125,i=200;let t=1/0,o=1/0;for(let c=0;c<n.length;c++)for(let a=c+1;a<n.length;a++){const m=Math.abs(n[c].x-n[a].x),g=Math.abs(n[c].y-n[a].y);m<t&&n[c].y===n[a].y&&(t=m),g<o&&g!==0&&(o=g)}const s=e/t,r=i/o;let l={};n.forEach(c=>{const a=c.x*s+400,m=c.y*-1*r+400;l[c.name]={x:a,y:m}});let d={name:"preset",positions:function(c){const a=c.data("label");return l[a]},fit:!0,padding:60,animate:!0};Cn?Y(De).do("layout",{options:d}):Y(Q).layout(d).run()});function li(n){let e,i;return e=new ut({props:{name:"Apply Layout",menuItems:n[1],minimal:n[0]}}),{c(){q(e.$$.fragment)},m(t,o){j(e,t,o),i=!0},p(t,[o]){const s={};o&2&&(s.menuItems=t[1]),o&1&&(s.minimal=t[0]),e.$set(s)},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){O(e.$$.fragment,t),i=!1},d(t){H(e,t)}}}function ai(n,e,i){let t,o,s;te(n,U,g=>i(2,o=g)),te(n,De,g=>i(3,s=g));let{minimal:r=!1}=e;Y(Q),we(()=>{B.use(Pn),B.use(xn),B.use(Vn)});function l(){const g={name:"dagre",rankSep:150,animate:!0};s.do("layout",{options:g})}function d(){const g={name:"breadthfirst",animate:!0,spacingFactor:1};s.do("layout",{options:g})}function c(){const g={name:"circle",animate:!0};s.do("layout",{options:g})}function a(){const g={name:"fcose",animate:!0,idealEdgeLength:u=>150,quality:"proof",randomize:!1,nodeSeparation:200};s.do("layout",{options:g})}function m(){const g={name:"cola",animate:!0,nodeSpacing(u){return 50}};s.do("layout",{options:g})}return n.$$set=g=>{"minimal"in g&&i(0,r=g.minimal)},n.$$.update=()=>{n.$$.dirty&4&&i(1,t=[{name:"Recommended: Tree",action:()=>st("tree"),disable:o.modelEmpty},{name:"Recommended: Tree2",action:()=>st("tree2"),disable:o.modelEmpty},{name:"Recommended: Tree3",action:()=>st("tree3"),disable:o.modelEmpty,divider:!0},{name:"Experimental: Tree",action:l,disable:o.modelEmpty},{name:"Experimental: Tree2",action:d,disable:o.modelEmpty},{name:"Experimental: Circle",action:c,disable:o.modelEmpty},{name:"Experimental: Force-directed",action:a,disable:o.modelEmpty},{name:"Experimental: Cola",action:m,disable:o.modelEmpty}])},[r,t,o]}class Ln extends X{constructor(e){super(),Z(this,e,ai,li,K,{minimal:0})}}function Qt(n,e,i){const t=n.slice();return t[11]=e[i],t[12]=e,t[13]=i,t}function en(n,e,i){const t=n.slice();return t[11]=e[i],t}function tn(n){let e,i,t;function o(r){n[4](r)}let s={name:n[11].name,value:n[11].value};return n[0].meanStruc!==void 0&&(s.group=n[0].meanStruc),e=new nt({props:s}),se.push(()=>ae(e,"group",o)),{c(){q(e.$$.fragment)},m(r,l){j(e,r,l),t=!0},p(r,l){const d={};!i&&l&1&&(i=!0,d.group=r[0].meanStruc,de(()=>i=!1)),e.$set(d)},i(r){t||(M(e.$$.fragment,r),t=!0)},o(r){O(e.$$.fragment,r),t=!1},d(r){H(e,r)}}}function nn(n){let e,i,t,o;function s(d){n[9](d,n[11])}function r(d){n[10](d,n[11])}let l={};return n[11].name!==void 0&&(l.name=n[11].name),n[0][n[11].modelProperty]!==void 0&&(l.checked=n[0][n[11].modelProperty]),e=new Se({props:l}),se.push(()=>ae(e,"name",s)),se.push(()=>ae(e,"checked",r)),{c(){q(e.$$.fragment)},m(d,c){j(e,d,c),o=!0},p(d,c){n=d;const a={};!i&&c&2&&(i=!0,a.name=n[11].name,de(()=>i=!1)),!t&&c&3&&(t=!0,a.checked=n[0][n[11].modelProperty],de(()=>t=!1)),e.$set(a)},i(d){o||(M(e.$$.fragment,d),o=!0)},o(d){O(e.$$.fragment,d),o=!1},d(d){H(e,d)}}}function di(n){let e,i,t,o,s,r,l,d,c,a,m,g,u,f,b,h=n[3],_=[];for(let A=0;A<h.length;A+=1)_[A]=tn(en(n,h,A));const S=A=>O(_[A],1,1,()=>{_[A]=null});function v(A){n[5](A)}function L(A){n[6](A)}let $={name:"Add Intercepts for all Observed Variables"};n[0].intOvFree!==void 0&&($.checked=n[0].intOvFree),n[2]!==void 0&&($.disable=n[2]),r=new Se({props:$}),se.push(()=>ae(r,"checked",v)),se.push(()=>ae(r,"disable",L));function y(A){n[7](A)}function w(A){n[8](A)}let N={name:"Add Intercepts for all Latent Variables"};n[0].intLvFree!==void 0&&(N.checked=n[0].intLvFree),n[2]!==void 0&&(N.disable=n[2]),a=new Se({props:N}),se.push(()=>ae(a,"checked",y)),se.push(()=>ae(a,"disable",w));let C=n[1],p=[];for(let A=0;A<C.length;A+=1)p[A]=nn(Qt(n,C,A));const P=A=>O(p[A],1,1,()=>{p[A]=null});return{c(){e=G("li"),i=G("a"),i.textContent="Add Means?",t=V(),o=G("ul");for(let A=0;A<_.length;A+=1)_[A].c();s=V(),q(r.$$.fragment),c=V(),q(a.$$.fragment),u=V();for(let A=0;A<p.length;A+=1)p[A].c();f=Be(),E(i,"tabindex","-1"),E(i,"href","#"),E(i,"class","svelte-143y7r6"),E(o,"class","dropdown-menu svelte-143y7r6"),E(e,"class","dropdown-submenu svelte-143y7r6")},m(A,J){I(A,e,J),R(e,i),R(e,t),R(e,o);for(let F=0;F<_.length;F+=1)_[F]&&_[F].m(o,null);I(A,s,J),j(r,A,J),I(A,c,J),j(a,A,J),I(A,u,J);for(let F=0;F<p.length;F+=1)p[F]&&p[F].m(A,J);I(A,f,J),b=!0},p(A,J){if(J&9){h=A[3];let D;for(D=0;D<h.length;D+=1){const z=en(A,h,D);_[D]?(_[D].p(z,J),M(_[D],1)):(_[D]=tn(z),_[D].c(),M(_[D],1),_[D].m(o,null))}for($e(),D=h.length;D<_.length;D+=1)S(D);ye()}const F={};!l&&J&1&&(l=!0,F.checked=A[0].intOvFree,de(()=>l=!1)),!d&&J&4&&(d=!0,F.disable=A[2],de(()=>d=!1)),r.$set(F);const k={};if(!m&&J&1&&(m=!0,k.checked=A[0].intLvFree,de(()=>m=!1)),!g&&J&4&&(g=!0,k.disable=A[2],de(()=>g=!1)),a.$set(k),J&3){C=A[1];let D;for(D=0;D<C.length;D+=1){const z=Qt(A,C,D);p[D]?(p[D].p(z,J),M(p[D],1)):(p[D]=nn(z),p[D].c(),M(p[D],1),p[D].m(f.parentNode,f))}for($e(),D=C.length;D<p.length;D+=1)P(D);ye()}},i(A){if(!b){for(let J=0;J<h.length;J+=1)M(_[J]);M(r.$$.fragment,A),M(a.$$.fragment,A);for(let J=0;J<C.length;J+=1)M(p[J]);b=!0}},o(A){_=_.filter(Boolean);for(let J=0;J<_.length;J+=1)O(_[J]);O(r.$$.fragment,A),O(a.$$.fragment,A),p=p.filter(Boolean);for(let J=0;J<p.length;J+=1)O(p[J]);b=!1},d(A){A&&T(e),Ie(_,A),A&&T(s),H(r,A),A&&T(c),H(a,A),A&&T(u),Ie(p,A),A&&T(f)}}}function ui(n){let e,i;return e=new tt({props:{name:ci,$$slots:{default:[di]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(t,o){j(e,t,o),i=!0},p(t,[o]){const s={};o&65543&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){O(e.$$.fragment,t),i=!1},d(t){H(e,t)}}}const ci="Automatically...";function fi(n,e,i){let t,o;te(n,ne,f=>i(0,o=f));const s=[{name:"Fix Factor Loading of First Indicator at 1",modelProperty:"fix_first"},{name:"Include Variances",modelProperty:"auto_var"},{name:"Include Covariances of Exogenous Latent Variables",modelProperty:"auto_cov_lv_x"},{name:"Include Covariances of Dependent Variables",modelProperty:"auto_cov_y"},{name:"Fix Variance of Only Indicator to 0",modelProperty:"fix_single"},{name:"Treat Exogenous Observed Variables as Fixed Variables",modelProperty:"fixed_x"},{name:"Include Freely Estimated Thresholds for Ordered Variables",modelProperty:"auto.th"},{name:"Include Freely Estimated Response Scaling Parameters for Ordered Variables",modelProperty:"auto.delta"}];let r=[{name:"Default",value:"default"},{name:"Yes",value:"true"},{name:"No",value:"false"}];function l(f){n.$$.not_equal(o.meanStruc,f)&&(o.meanStruc=f,ne.set(o))}function d(f){n.$$.not_equal(o.intOvFree,f)&&(o.intOvFree=f,ne.set(o))}function c(f){t=f,i(2,t),i(0,o)}function a(f){n.$$.not_equal(o.intLvFree,f)&&(o.intLvFree=f,ne.set(o))}function m(f){t=f,i(2,t),i(0,o)}function g(f,b){n.$$.not_equal(b.name,f)&&(b.name=f,i(1,s))}function u(f,b){n.$$.not_equal(o[b.modelProperty],f)&&(o[b.modelProperty]=f,ne.set(o))}return n.$$.update=()=>{n.$$.dirty&1&&i(2,t=o.meanStruc==="false")},[o,s,t,r,l,d,c,a,m,g,u]}class mi extends X{constructor(e){super(),Z(this,e,fi,ui,K,{})}}function gi(n){let e,i;return e=new ut({props:{name:"Help",menuItems:n[0]}}),{c(){q(e.$$.fragment)},m(t,o){j(e,t,o),i=!0},p:ce,i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){O(e.$$.fragment,t),i=!1},d(t){H(e,t)}}}function pi(){Shiny.setInputValue("show_help",Math.random())}function hi(){window.open("https://doi.org/10.1080/10705511.2024.2420678","_blank")}function bi(){bootbox.alert({title:"How to Cite",className:"dialogWide",message:`To cite this package in publications, please use:<br><br>
              <div style="margin-left: 20px;">
                  Karch, J. D. (2025). lavaangui: A Web-Based Graphical Interface for Specifying Lavaan Models by Drawing Path Diagrams.
                  <i>Structural Equation Modeling: A Multidisciplinary Journal,</i> 1–12. 
                  <a href="https://doi.org/10.1080/10705511.2024.2420678" target="_blank">https://doi.org/10.1080/10705511.2024.2420678</a>
              </div>
              <br>
              A BibTeX entry for LaTeX users is:<br><br>
              <div style="margin-left: 20px;">
                  <pre>
@Article{,
  author = {J. D. Karch},
  year = {2025},
  title = {{lavaangui}: A Web-Based Graphical Interface for Specifying Lavaan Models by Drawing Path Diagrams},
  journal = {Structural Equation Modeling: A Multidisciplinary Journal},
  doi = {10.1080/10705511.2024.2420678},
  publisher = {Routledge},
  pages = {1--12},
}</pre>
              </div>`})}function _i(n){let e;const i=[{name:"Show Commands",action:pi},{name:"Open Tutorial",action:hi},{name:"About",action:t},{name:"Cite",action:bi}];function t(){bootbox.alert({title:"About Lavaangui",size:"large",message:`Version: ${e}<br> Author: Julian D. Karch<br> Email: j.d.karch@fsw.leidenuniv.nl <br> lavaangui is BETA software. Please report any bugs at https://github.com/karchjd/lavaangui/issues.`})}return Shiny.addCustomMessageHandler("version",function(o){e=o[0].join(".")}),[i]}class vi extends X{constructor(e){super(),Z(this,e,_i,gi,K,{})}}function $i(n){let e,i,t,o,s,r,l,d,c,a,m,g,u,f,b,h,_,S,v,L,$;function y(x){n[2](x)}let w={name:"Show Grid"};n[1].gridShow!==void 0&&(w.checked=n[1].gridShow),e=new Se({props:w}),se.push(()=>ae(e,"checked",y));function N(x){n[3](x)}let C={name:"Snap to Grid"};n[1].gridSnap!==void 0&&(C.checked=n[1].gridSnap),o=new Se({props:C}),se.push(()=>ae(o,"checked",N));function p(x){n[4](x)}let P={name:"Resize to Grid"};n[1].gridResize!==void 0&&(P.checked=n[1].gridResize),l=new Se({props:P}),se.push(()=>ae(l,"checked",p));function A(x){n[5](x)}let J={name:"Snap to Alignment on Release"};n[1].gridAlign!==void 0&&(J.checked=n[1].gridAlign),a=new Se({props:J}),se.push(()=>ae(a,"checked",A));function F(x){n[6](x)}let k={name:"Move Grid on Pan"};n[1].gridMovePan!==void 0&&(k.checked=n[1].gridMovePan),u=new Se({props:k}),se.push(()=>ae(u,"checked",F));function D(x){n[7](x)}let z={name:"Grid Spacing:",min:5};n[1].gridSpace!==void 0&&(z.value=n[1].gridSpace),h=new at({props:z}),se.push(()=>ae(h,"value",D));function fe(x){n[8](x)}let ee={name:"Line Width:",min:0};return n[1].gridWidth!==void 0&&(ee.value=n[1].gridWidth),v=new at({props:ee}),se.push(()=>ae(v,"value",fe)),{c(){q(e.$$.fragment),t=V(),q(o.$$.fragment),r=V(),q(l.$$.fragment),c=V(),q(a.$$.fragment),g=V(),q(u.$$.fragment),b=V(),q(h.$$.fragment),S=V(),q(v.$$.fragment)},m(x,re){j(e,x,re),I(x,t,re),j(o,x,re),I(x,r,re),j(l,x,re),I(x,c,re),j(a,x,re),I(x,g,re),j(u,x,re),I(x,b,re),j(h,x,re),I(x,S,re),j(v,x,re),$=!0},p(x,re){const Ge={};!i&&re&2&&(i=!0,Ge.checked=x[1].gridShow,de(()=>i=!1)),e.$set(Ge);const yt={};!s&&re&2&&(s=!0,yt.checked=x[1].gridSnap,de(()=>s=!1)),o.$set(yt);const wt={};!d&&re&2&&(d=!0,wt.checked=x[1].gridResize,de(()=>d=!1)),l.$set(wt);const kt={};!m&&re&2&&(m=!0,kt.checked=x[1].gridAlign,de(()=>m=!1)),a.$set(kt);const Et={};!f&&re&2&&(f=!0,Et.checked=x[1].gridMovePan,de(()=>f=!1)),u.$set(Et);const Ct={};!_&&re&2&&(_=!0,Ct.value=x[1].gridSpace,de(()=>_=!1)),h.$set(Ct);const St={};!L&&re&2&&(L=!0,St.value=x[1].gridWidth,de(()=>L=!1)),v.$set(St)},i(x){$||(M(e.$$.fragment,x),M(o.$$.fragment,x),M(l.$$.fragment,x),M(a.$$.fragment,x),M(u.$$.fragment,x),M(h.$$.fragment,x),M(v.$$.fragment,x),$=!0)},o(x){O(e.$$.fragment,x),O(o.$$.fragment,x),O(l.$$.fragment,x),O(a.$$.fragment,x),O(u.$$.fragment,x),O(h.$$.fragment,x),O(v.$$.fragment,x),$=!1},d(x){H(e,x),x&&T(t),H(o,x),x&&T(r),H(l,x),x&&T(c),H(a,x),x&&T(g),H(u,x),x&&T(b),H(h,x),x&&T(S),H(v,x)}}}function yi(n){let e,i;return e=new tt({props:{minimal:n[0],name:"Grid Options",$$slots:{default:[$i]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(t,o){j(e,t,o),i=!0},p(t,[o]){const s={};o&1&&(s.minimal=t[0]),o&514&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){O(e.$$.fragment,t),i=!1},d(t){H(e,t)}}}function wi(n,e,i){let t;te(n,ue,g=>i(1,t=g));let{minimal:o=!1}=e;function s(g){n.$$.not_equal(t.gridShow,g)&&(t.gridShow=g,ue.set(t))}function r(g){n.$$.not_equal(t.gridSnap,g)&&(t.gridSnap=g,ue.set(t))}function l(g){n.$$.not_equal(t.gridResize,g)&&(t.gridResize=g,ue.set(t))}function d(g){n.$$.not_equal(t.gridAlign,g)&&(t.gridAlign=g,ue.set(t))}function c(g){n.$$.not_equal(t.gridMovePan,g)&&(t.gridMovePan=g,ue.set(t))}function a(g){n.$$.not_equal(t.gridSpace,g)&&(t.gridSpace=g,ue.set(t))}function m(g){n.$$.not_equal(t.gridWidth,g)&&(t.gridWidth=g,ue.set(t))}return n.$$set=g=>{"minimal"in g&&i(0,o=g.minimal)},[o,t,s,r,l,d,c,a,m]}class Mn extends X{constructor(e){super(),Z(this,e,wi,yi,K,{minimal:0})}}function ki(n){return window.$(document).ready(function(){var e=!1;window.$(".navbar .dropdown").hover(function(){e&&(window.$(".navbar .dropdown").removeClass("open"),window.$(this).addClass("open"))},function(){}),window.$(".navbar .dropdown").on("show.bs.dropdown",function(){e=!0}),window.$(".navbar .dropdown").on("hide.bs.dropdown",function(){window.$(".navbar .dropdown.open").length<=1&&(e=!1)})}),[]}class Ei extends X{constructor(e){super(),Z(this,e,ki,null,K,{})}}function Ci(n){let e,i;return e=new ut({props:{name:"Edit",menuItems:n[0]}}),{c(){q(e.$$.fragment)},m(t,o){j(e,t,o),i=!0},p(t,[o]){const s={};o&1&&(s.menuItems=t[0]),e.$set(s)},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){O(e.$$.fragment,t),i=!1},d(t){H(e,t)}}}function Si(n,e,i){let t,o;te(n,U,d=>i(1,t=d)),te(n,De,d=>i(2,o=d));function s(){o.undo()}function r(){o.redo()}let l=[];return n.$$.update=()=>{n.$$.dirty&2&&i(0,l=[{name:"Undo",action:s,disable:t.undoEmpty},{name:"Redo",action:r,disable:t.redoEmpty}])},[l,t]}class Li extends X{constructor(e){super(),Z(this,e,Si,Ci,K,{})}}function Mi(n){let e,i,t,o,s,r,l,d,c,a,m,g,u,f,b,h,_,S;return e=new wn({}),t=new Li({}),s=new En({}),l=new mi({}),c=new si({}),m=new Ln({}),u=new Mn({}),b=new vi({}),_=new Ei({}),{c(){q(e.$$.fragment),i=V(),q(t.$$.fragment),o=V(),q(s.$$.fragment),r=V(),q(l.$$.fragment),d=V(),q(c.$$.fragment),a=V(),q(m.$$.fragment),g=V(),q(u.$$.fragment),f=V(),q(b.$$.fragment),h=V(),q(_.$$.fragment)},m(v,L){j(e,v,L),I(v,i,L),j(t,v,L),I(v,o,L),j(s,v,L),I(v,r,L),j(l,v,L),I(v,d,L),j(c,v,L),I(v,a,L),j(m,v,L),I(v,g,L),j(u,v,L),I(v,f,L),j(b,v,L),I(v,h,L),j(_,v,L),S=!0},i(v){S||(M(e.$$.fragment,v),M(t.$$.fragment,v),M(s.$$.fragment,v),M(l.$$.fragment,v),M(c.$$.fragment,v),M(m.$$.fragment,v),M(u.$$.fragment,v),M(b.$$.fragment,v),M(_.$$.fragment,v),S=!0)},o(v){O(e.$$.fragment,v),O(t.$$.fragment,v),O(s.$$.fragment,v),O(l.$$.fragment,v),O(c.$$.fragment,v),O(m.$$.fragment,v),O(u.$$.fragment,v),O(b.$$.fragment,v),O(_.$$.fragment,v),S=!1},d(v){H(e,v),v&&T(i),H(t,v),v&&T(o),H(s,v),v&&T(r),H(l,v),v&&T(d),H(c,v),v&&T(a),H(m,v),v&&T(g),H(u,v),v&&T(f),H(b,v),v&&T(h),H(_,v)}}}function Di(n){let e,i;return e=new Lo({props:{$$slots:{default:[Mi]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(t,o){j(e,t,o),i=!0},p(t,[o]){const s={};o&1&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){O(e.$$.fragment,t),i=!1},d(t){H(e,t)}}}class Ai extends X{constructor(e){super(),Z(this,e,null,Di,K,{})}}function Fi(n){let e;return{c(){e=G("pre"),E(e,"id","res-results"),E(e,"class","shiny-html-output well svelte-74yvxb"),E(e,"data-testid","result-text")},m(i,t){I(i,e,t)},p:ce,i:ce,o:ce,d(i){i&&T(e)}}}class Oi extends X{constructor(e){super(),Z(this,e,null,Fi,K,{})}}function Ii(n){return window.cy=Y(Q),U.subscribe(e=>{window.appState=e}),ne.subscribe(e=>{window.modelOptions=e}),pt.subscribe(e=>{window.dataInfo=e}),Fe.subscribe(e=>{window.fitCache=e}),ue.subscribe(e=>{window.gridViewOptions=e}),De.subscribe(e=>{window.ur=e}),[]}class Ti extends X{constructor(e){super(),Z(this,e,Ii,null,K,{})}}function Ni(n){return new RegExp("^[a-zA-Z\\._][a-zA-Z0-9\\._]*(?<!\\.)$").test(n)}function on(n){return n==""?(bootbox.alert("Provide a label"),!1):Ni(n)?!0:(bootbox.alert("Provide a valid label"),!1)}function Pi(n,e){const i=e?"full":"minimal";return n.filter(t=>t.show===i||t.show==="both")}function xi(n,e,i){let t,o,s;te(n,U,u=>i(1,t=u)),te(n,De,u=>i(2,o=u)),te(n,ne,u=>i(3,s=u));let r=Y(Q);B.use(Rn);var l=new zn.ColorPicker("#picker",{width:200,color:"rgb(255, 0, 0)",borderWidth:1,borderColor:"#fff"});function d(u,f){var b;const h=r.$(":selected");if(h.length>1){if(f==="nodes"&&!h.every(_=>_.isNode()))return bootbox.alert("Not all selected elements are nodes. Aborting"),null;if(f==="edges"&&!h.every(_=>_.isEdge()))return bootbox.alert("Not all selected elements are edges. Aborting"),null;if(f==="nodes.edges"&&!h.every(_=>_.isEdge()||_.isNode()))return bootbox.alert("Not all selected elements are nodes or edges. Aborting"),null;b=h}else b=u;return b}const c=[{id:"add-observed",content:"Add Observed Variable",coreAsWell:!0,onClickFunction(u){const f=u.renderedPosition;be(le,f)},show:"full"},{id:"add-latent",content:"Add Latent Variable",coreAsWell:!0,onClickFunction(u){const f=u.renderedPosition;be(me,f)},show:"full"},{id:"add-constant",content:"Add Constant Variable",coreAsWell:!0,onClickFunction(u){const f=u.renderedPosition;be(Le,f)},show:"full"},{id:"label-para",content:"Add/Change Label",selector:`edge.${he}`,onClickFunction(u){const f=u.target||u.cyTarget;bootbox.prompt({title:"Enter a Label",value:f.getLabel(),callback(b){if(!on(b))return!1;b!==f.getLabel()&&b!==null&&(f.addLabel(b),oe(s.mode))}})},show:"full",hasTrailingDivider:!1},{id:"label-remove",content:"Remove Label",selector:`edge.${ze}`,onClickFunction(u){(u.target||u.cyTarget).removeLabel(),oe(s.mode)},show:"both",hasTrailingDivider:!1},{id:"remove-edge",content:"Delete Edge",selector:`edge.${he}`,onClickFunction(u){(u.target||u.cyTarget).remove(),oe(s.mode)},show:"full",hasTrailingDivider:!0},{id:"fix-para",content:"Fix Parameter",selector:`edge.${Ee}.${he}, edge.${Ae}.${he}`,onClickFunction(u){const f=u.target||u.cyTarget;bootbox.prompt({title:"Enter a Value",inputType:"number",step:"any",callback(b){if(b=="")return bootbox.alert("Provide a value"),!1;b!==null&&(f.fixPara(b),oe(s.mode))}})},show:"full",hasTrailingDivider:!1},{id:"free-para",content:"Free Parameter",selector:`edge.${Ce}.${he}, edge.${Ae}.${he}`,onClickFunction(u){var f=u.target||u.cyTarget;f.freePara(),oe(s.mode)},show:"full",hasTrailingDivider:!1},{id:"switch-reg",content:"Mark as Regression Relationship",selector:`edge.${He}`,onClickFunction(u){(u.target||u.cyTarget).markRegression(),oe(s.mode)},show:"full",hasTrailingDivider:!1},{id:"switch-factor",content:"Mark as Factor Loading",selector:`edge.${ot}`,onClickFunction(u){(u.target||u.cyTarget).markFactload(),oe(s.mode)},show:"full",hasTrailingDivider:!1},{id:"free-force-para",content:"Force Parameter Free",selector:`edge.${Ee}.${he}, edge.${Ce}.${he}`,onClickFunction(u){(u.target||u.cyTarget).forceFreePara(),oe(s.mode)},show:"full",hasTrailingDivider:!0},{id:"revert-arrow",content:"Revert Direction",selector:`edge[isMean="0"].${Me}.${he}`,onClickFunction(u){(u.target||u.cyTarget).revert(),oe(s.mode)},show:"full",hasTrailingDivider:!1},{id:"set-undirected",content:"Set Undirected",selector:`edge[isMean="0"].${Me}.${he}`,onClickFunction(u){(u.target||u.cyTarget).setUndirected(),oe(s.mode)},show:"full",hasTrailingDivider:!0},{id:"set-arrow",content:"Set Directed",selector:`edge.${Oe}.${he}`,onClickFunction(u){(u.target||u.cyTarget).setDirected(),oe(s.mode)},show:"full",hasTrailingDivider:!0},{id:"free-orientation",content:"Free Loop Orientation",selector:`edge.${lt}.fixDeg`,onClickFunction(u){const f=u.target||u.cyTarget;f.removeClass("fixDeg"),pe(f.source().id())},show:"both",hasTrailingDivider:!0},{id:"change-fromUser",content:"Include in User Model",selector:`edge.${Pe}`,onClickFunction(u){const f=u.target||u.cyTarget;if(f.myIsLoop()&&f.source().isOrdered()){ge("danger","User-defined variance arrow is not allowed for ordered variables.");return}f.markAddedUser(),oe(s.mode)},show:"full",hasTrailingDivider:!0},{id:"color-edge",content:"Change Edge Color",selector:"edge",show:"both",onClickFunction(u){var f=u.target||u.cyTarget;const b=d(f,"edges");if(b===null)return null;m(f,b,"edge")}},{id:"change-line-style",content:"Change Line Style",show:"both",selector:"edge",submenu:[{id:"line-style-solid",content:"Solid",selector:"edge",onClickFunction(u){const f=u.target||u.cyTarget,b=d(f,"edges");b!==null&&o.do("style",{eles:b,style:{"line-style":"solid"}})}},{id:"line-style-dotted",content:"Dotted",selector:"edge",onClickFunction(u){const f=u.target||u.cyTarget,b=d(f,"edges");b!==null&&o.do("style",{eles:b,style:{"line-style":"dotted"}})}},{id:"line-style-dashed",content:"Dashed",selector:"edge",onClickFunction(u){const f=u.target||u.cyTarget,b=d(f,"edges");b!==null&&o.do("style",{eles:b,style:{"line-style":"dashed"}})}}]},{id:"change-line-width",content:"Change Line Width",show:"both",selector:"edge",onClickFunction(u){var f=u.target||u.cyTarget;const b=d(f,"edges");if(b===null)return null;bootbox.prompt({title:"Enter New Line Width:",value:f.style("width"),callback(h){h!==null&&o.do("style",{eles:b,style:{width:h}})}})}},{id:"rename-node",show:"full",content:"Rename Variable",selector:`node.${me}, node.${le}`,onClickFunction(u){const f=u.target||u.cyTarget,b=t.columnNames;let h;t.dataAvail&&(h=b.map(S=>`<option value="${S}">${S}</option>`).join(""));const _=t.dataAvail&&f.isObserved()?`
      <label>Or Select From Variables in Your Data:</label>
      <select class="form-control" id="label-dropdown">
        <option value="">--Select--</option>
        ${h}
      </select>
    `:"";bootbox.dialog({title:"Rename Variable",message:`
      <div>
        <label>Enter a label:</label>
        <input type="text" class="form-control" id="new-label" value=${f.getLabel()}>
        ${_}
      </div>
    `,buttons:{cancel:{label:"Cancel",className:"btn-default"},confirm:{label:"Rename",className:"btn-primary",callback(){let S=document.getElementById("new-label").value;const v=t.dataAvail&&f.isObserved()?document.getElementById("label-dropdown").value:"";let L;if(S==f.getLabel()&&v!=""?L=v:L=S,!on(L))return!1;L&&(f.setLabel(L),b&&b.includes(f.getLabel())?(f.link(),ge("success",`Variable ${f.data("label")} linked to data`)):f.isLinked()&&(f.unlink(),ge("info",`Variable ${f.getLabel()} unlinked`)),oe(s.mode))}}},onShown(S){document.getElementById("new-label").addEventListener("keypress",function(v){v.key==="Enter"&&(v.preventDefault(),S.target.querySelector(".btn-primary").click())})}})}},{id:"remove-node",content:"Delete Variable",selector:`node.${me}, node.${le}, node.${Le}`,onClickFunction(u){(u.target||u.cyTarget).remove(),oe(s.mode)},show:"full",hasTrailingDivider:!0},{id:"change-latent",content:"Change to Latent",selector:`node.${le}`,onClickFunction(u){(u.target||u.cyTarget).makeLatent(),oe(s.mode)},show:"full",hasTrailingDivider:!1},{id:"change-ordered",content:"Change to Ordered",selector:`node.${le}.${Je}`,onClickFunction(u){const f=u.target||u.cyTarget;f.makeOrdered(),f.connectedEdges().forEach(b=>{b.myIsLoop()&&b.isUserAdded()&&(b.remove(),ge("warning","Removed variance user-defined arrow as it is not allowed for ordered variables."))}),oe(s.mode)},show:"full",hasTrailingDivider:!0},{id:"change-continous",content:"Change to Continous",selector:`node.${le}.${Ye}`,onClickFunction(u){(u.target||u.cyTarget).makeContinous(),oe(s.mode)},show:"full",hasTrailingDivider:!0},{id:"change-observed",show:"full",content:"Change to Observed",selector:`node.${me}`,hasTrailingDivider:!0,onClickFunction(u){const f=u.target||u.cyTarget;f.makeObserved();let b=t.columnNames;b&&b.includes(f.getLabel())&&(f.link(),bootbox.alert("Variable linked with data set")),oe(s.mode)}},{id:"color-node",content:"Change Background Color",selector:"node",show:"both",onClickFunction(u){var f=u.target||u.cyTarget;const b=d(f,"nodes");if(b===null)return null;m(f,b,"nodes")}},{id:"change-border-width",content:"Change Border Width",show:"both",selector:`node.${me}, node.${le}, node.${Le}`,onClickFunction(u){var f=u.target||u.cyTarget;const b=d(f,"nodes");if(b===null)return null;bootbox.prompt({title:"Enter New Border Width:",value:f.style("border-width"),callback(h){h!==null&&o.do("style",{eles:b,style:{"border-width":h}})}})}},{id:"change-font-size",content:"Change Font Size",show:"both",hasTrailingDivider:!0,selector:`node.${me}, node.${le}, node.${Le}, edge`,onClickFunction(u){var f=u.target||u.cyTarget;const b=d(f,"nodes.edges");if(b===null)return null;bootbox.prompt({title:"Enter New Font Size:",value:f.style("font-size"),callback(h){h!==null&&o.do("style",{eles:b,style:{"font-size":h}})}})}}];let a;function m(u,f,b){var h=document.getElementById("picker");h.style.display="block",h.style.left=event.pageX+"px",h.style.top=event.pageY+"px";let _;a=f;const S=function($){_=$.hexString};l.on("color:change",S);const v=function($){h.contains($.target)||(b=="edge"?o.do("style",{eles:a,style:{"line-color":_,"target-arrow-color":_,"source-arrow-color":_}}):o.do("style",{eles:a,style:{"background-color":_}}),h.style.display="none",l.off("color:change",S),document.removeEventListener("click",v),document.removeEventListener("keydown",L))};setTimeout(()=>document.addEventListener("click",v),0);const L=function($){$.key==="Enter"&&v($)};document.addEventListener("keydown",L)}const g=Pi(c,t.full);return we(()=>{r.contextMenus({menuItems:g})}),[]}class Vi extends X{constructor(e){super(),Z(this,e,xi,null,K,{})}}function Ri(n){let e,i,t,o,s,r,l,d,c,a,m,g,u,f,b,h,_,S,v,L,$,y,w,N;return{c(){e=G("div"),i=G("button"),t=_e("Show Data"),s=V(),r=G("div"),l=G("button"),d=_e("User Model"),a=V(),m=G("button"),g=_e("Autocompleted Model"),f=V(),b=G("button"),h=_e("Estimates"),v=V(),L=G("button"),$=_e("More Results"),E(i,"class","btn btn-lg btn-default"),i.disabled=o=!n[2].dataAvail,E(l,"class",c="btn btn-lg "+(n[1]==="user model"?"btn-primary active":"btn-default")),E(m,"class",u="btn btn-lg "+(n[1]==="full model"?"btn-primary active":"btn-default")),E(b,"class",_="btn btn-lg "+(n[1]==="estimate"?"btn-primary active":"btn-default")),b.disabled=S=!n[2].dataAvail||n[2].modelEmpty,E(r,"class","btn-group btn-toggle svelte-xny576"),E(L,"class","btn btn-lg btn-default"),L.disabled=y=n[0].mode!="estimate",E(e,"class","toolbox navbar-static-bottom svelte-xny576")},m(C,p){I(C,e,p),R(e,i),R(i,t),R(e,s),R(e,r),R(r,l),R(l,d),R(r,a),R(r,m),R(m,g),R(r,f),R(r,b),R(b,h),R(e,v),R(e,L),R(L,$),w||(N=[ie(i,"click",n[6]),ie(l,"click",n[7]),ie(m,"click",n[8]),ie(b,"click",n[9]),ie(L,"click",n[10])],w=!0)},p(C,[p]){p&4&&o!==(o=!C[2].dataAvail)&&(i.disabled=o),p&2&&c!==(c="btn btn-lg "+(C[1]==="user model"?"btn-primary active":"btn-default"))&&E(l,"class",c),p&2&&u!==(u="btn btn-lg "+(C[1]==="full model"?"btn-primary active":"btn-default"))&&E(m,"class",u),p&2&&_!==(_="btn btn-lg "+(C[1]==="estimate"?"btn-primary active":"btn-default"))&&E(b,"class",_),p&4&&S!==(S=!C[2].dataAvail||C[2].modelEmpty)&&(b.disabled=S),p&1&&y!==(y=C[0].mode!="estimate")&&(L.disabled=y)},i:ce,o:ce,d(C){C&&T(e),w=!1,Xe(N)}}}function zi(){window.$("#data-modal-2").modal()}function Bi(n,e,i){let t,o,s;te(n,ne,b=>i(0,t=b)),te(n,U,b=>i(2,o=b)),te(n,ue,b=>i(11,s=b));let r;function l(b){i(1,r=b),b!=="user model"?W(ue,s.showLav=!0,s):W(ue,s.showLav=!1,s),W(ne,t.mode=b,t)}window.$("#data-modal-extend-results").on("hidden.bs.modal",function(){W(U,o.showServerErrors=!0,o)});function d(){window.$("#data-modal-extend-results").modal(),W(U,o.showServerErrors=!1,o)}let c=!1;we(()=>{i(5,c=!0)});const a=()=>zi(),m=()=>l("user model"),g=()=>l("full model"),u=()=>l("estimate"),f=()=>d();return n.$$.update=()=>{n.$$.dirty&33&&c&&i(1,r=t.mode)},[t,r,o,l,d,c,a,m,g,u,f]}class Ui extends X{constructor(e){super(),Z(this,e,Bi,Ri,K,{})}}function Gi(){return typeof Shiny=="object"&&Shiny!==null}function qi(n){let e=0,i=Number.NEGATIVE_INFINITY,t=Number.NEGATIVE_INFINITY,o=n.nodes().length;n.nodes().forEach(l=>{let d=l.position();e+=d.x,d.x>i&&(i=d.x),d.y>t&&(t=d.y)});let s=e/o,r=t+100;return{x:s,y:r}}function ji(n,e){if(!n)throw new Error(e||"Assertion failed")}function Hi(n,e,i){let t,o,s;te(n,ne,a=>i(0,t=a)),te(n,U,a=>i(1,o=a)),te(n,Fe,a=>i(2,s=a));function r(a,m,g){let u,f,b;return m==="=~"?(u=Me,f=a,b=g):m=="~1"?(f=1,b=a,u=Me):m==="~~"?(b=g,f=a,a===g?u=lt:u=Oe):(b=a,f=g,u=Me),{directed:u,source:f,target:b}}function l(a,m,g,u){let f=r(a,m,g);f.user=u;const h=Y(Q).edges(function(_){let S;if(f.source!=1?(S=_.source().getLabel()==f.source&&_.target().getLabel()==f.target,f.directed==Oe&&(S=S||_.source().getLabel()==f.target&&_.target().getLabel()==f.source)):S=_.source().isConstant()&&_.target().getLabel()==f.target,f.user!=null)if(f.user==1)S=S&&_.isUserAdded();else if(f.user==0)S=S&&_.isLavaanAdded();else throw new Error("User was neither 0 nor 1");return S});if(h.length>1)throw new Error("Multiple edges found");return h}function d(a,m){W(U,o.meansModelled=!1,o),W(U,o.loadingMode=!0,o);let g=Y(Q);if(!m)g.edges().invalidate();else{let _=function(L,$,y){be(L,y,!1,$)};const h=Array.isArray(a.obs)?a.obs:[a.obs];let S={x:200,y:200};for(let L=0;L<h.length;L++)S.x=S.x+50,_(le,h[L],S);const v=Array.isArray(a.latent)?a.latent:[a.latent];S={x:200,y:100};for(let L=0;L<v.length;L++)S.x=S.x+50,_(me,v[L]);a=a.parTable}const u=new Set;for(let h=0;h<a.lhs.length;h++)a.op[h]==="|"&&u.add(a.lhs[h]);let f=!1,b;for(let h=0;h<a.lhs.length;h++){if(a.op[h]=="~*~"||a.op[h]=="|"||a.op[h]=="==")continue;let _=l(a.lhs[h],a.op[h],a.rhs[h],a.user[h]);if(!m&&a.user[h]==1)ji(_.length==1),_.validate(),_.isModifiedLavaan()&&_.isFixed()&&_.revertLavaanFix(),a.free[h]==0&&!_.isFixed()&&_.fixPara(a.ustart[h]).markModifiedLavaan();else{let S;if(m||_.length==0){const v=r(a.lhs[h],a.op[h],a.rhs[h]);if(m&&o.full&&a.user[h]==0)continue;let L;if(v.source!==1)L=g.nodes(function(y){return y.getLabel()==v.source})[0].id();else{if(W(U,o.meansModelled=!0,o),a.free[h]==0&&a.ustart[h]==0)continue;f||(b=be(Le,qi(g),!1),f=!0,g.nodes(function(w){return w.id()==b})[0].markAddedLavaan()),L=b}const $=g.nodes(function(y){return y.getLabel()==v.target})[0].id();S=g.add({groups:"edges",data:{source:L,target:$},classes:v.directed+" nolabel"}),a.label[h]!=""&&S.addLabelImport(a.label[h]),a.user[h]==1?S.markAddedUser():S.markAddedLavaan(),!m&&v.directed==Me&&(pe(L),pe($))}else!m&&_.length==1&&(S=_);a.free[h]==0?a.ustart[h]!==0&&a.exo[h]!==1?u.has(S.target().getLabel())&&a.op[h]=="~~"?S.fixPara("Total Variance 1"):S.fixPara(a.ustart[h]):S.remove():S.setFree(),m||S.validate(),S.checkAndMarkPotentialLatObReg()}}if(!m)g.edges().forEach(h=>{h.isValid()||h.remove()}),g.getLavaanNodes().forEach(h=>{h.connectedEdges().length==0&&(h.remove(),g.nodes().forEach(_=>{pe(_.id())}))});else{st("tree",!1);const h=new Map;g.getUndirectedEdges().forEach(v=>{const L=pe(v.source().id(),!0),$=pe(v.target().id(),!0),y=w=>{h.set(w,(h.get(w)||0)+1)};y(L),y($)});let _=null,S=0;h.forEach((v,L)=>{v>S&&(S=v,_=L)}),_===180&&g.edges().forEach(v=>{v.isUserAdded()&&v.data("control-point-distances",[100])}),g.fit()}o.parsedModel||W(U,o.parsedModel=!0,o),g.getUserEdges().length>0&&W(U,o.modelEmpty=!1,o),W(U,o.loadingMode=!1,o)}function c(a,m){Y(Q);const g=a.op.some(u=>u.includes("~~"));for(let u=0;u<a.lhs.length;u++){if(a.op[u]=="~*~"||a.op[u]=="|")continue;let f=l(a.lhs[u],a.op[u],a.rhs[u]);if(f.length>0){let b={};f.isFree()?(b.est=a.est[u],b.p_value=a.pvalue[u],b.se=a.se[u],b.ciLow=a["ci.lower"][u],b.ciHigh=a["ci.upper"][u],b.est_std=m["est.std"][u],b.se_std=m.se[u],b.ciLow_std=m["ci.lower"][u],b.ciHigh_std=m["ci.upper"][u],f.addClass("hasEst")):g&&a.op[u]=="~~"&&(b.estFixed=a.est[u],b.estFixed_std=m["est.std"][u],f.addClass("hasEstFixed")),f.data("estimates",b)}}}return Gi()&&(Shiny.addCustomMessageHandler("dataInfo",function(a){ht(a.columns),W(U,o.columnNames=[...a.columns],o),W(U,o.ids=[...a.columns],o),W(U,o.loadedFileName=a.name,o),W(U,o.dataAvail=!0,o),oe(t.mode),window.$("#upload-modal").modal("hide"),a.showData&&window.$("#data-modal-2").modal()}),Shiny.addCustomMessageHandler("lav_failed",function(a){W(U,o.fitting=!1,o),a=="stopped"?ge("danger","Fitting stopped by user"):ge("danger","Fitting failed")}),Shiny.addCustomMessageHandler("fitting",function(a){W(U,o.fitting=!0,o)}),Shiny.addCustomMessageHandler("lav_warning_error",function(a){const m=a.type=="warning"?"warning":"error";a.origin=="loading data"&&window.$("#upload-modal").modal("hide"),ge(a.type,`During ${a.origin} the following ${m} occurred: ${a.message}`)}),Shiny.addCustomMessageHandler("lav_error_fitting",function(a){W(U,o.fitting=!1,o),ge(a.type,"During "+a.origin+" the following error occurred: "+a.message)}),Shiny.addCustomMessageHandler("usecache",function(a){ge("info","Reusing cached results because model and data did not change since last fit")}),Shiny.addCustomMessageHandler("data_missing",function(a){ge("danger","Could not fit model because no data is available")}),Shiny.addCustomMessageHandler("columnames",function(a){const m=Y(Q),g=o.columnNames[a.index];W(U,o.columnNames[a.index]=a.newcolname,o),m.getObservedNodes().forEach(u=>{u.getLabel()==g&&(u.setLabel(a.newcolname),oe(t.mode))}),ht(o.columnNames)}),Shiny.addCustomMessageHandler("missing_vars",function(a){var m=[].concat(a).join(", ");ge("danger","Could not fit model because "+m+" are observed variables in the model but not present in the data.")}),Shiny.addCustomMessageHandler("lav_model",function(a){d(a,!1)}),Shiny.addCustomMessageHandler("imported_model",function(a){d(a,!0);let m=Y(Q);Array.isArray(a.ordered)||(a.ordered=[a.ordered]),a.ordered.forEach(g=>{m.nodes(function(u){return u.getLabel()==g})[0].makeOrdered()}),W(ne,t.fix_first=!1,t),ge("warning","lavaangui only imports user edges. Your full model is very likely different than what you fitted in lavaan because of different options used. To display the model, as you fitted it in lavaan, use plot_lavaan")}),Shiny.addCustomMessageHandler("lav_results",function(a){W(U,o.loadingMode=!0,o),W(Fe,s.lastFitLavFit=a.fitted_model,s),W(Fe,s.lastFitModel=a.model,s),W(Fe,s.lastFitData=a.data,s),W(U,o.fitting=!1,o),W(U,o.loadingMode=!1,o)}),Shiny.addCustomMessageHandler("lav_estimates",function(a){const m=a.normal,g=a.std;c(m,g)}),Shiny.addCustomMessageHandler("setToEstimate",function(a){W(ne,t.mode="estimate",t)})),[]}class Wi extends X{constructor(e){super(),Z(this,e,Hi,null,K,{})}}function Yi(n){Bn(B);let e=Y(Q);var i={zoomFactor:.05,zoomDelay:45,minZoom:e.minZoom(),maxZoom:e.maxZoom(),fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,zoomOnly:!1,fitSelector:void 0,animateOnFit(){return!1},fitAnimationDuration:1e3};return we(()=>{e.panzoom(i),e.on("zoom",function(t){var o=e.zoom();o<i.minZoom?e.zoom(i.minZoom):o>i.maxZoom&&e.zoom(i.maxZoom)})}),[]}class Ji extends X{constructor(e){super(),Z(this,e,Yi,null,K,{})}}function Xi(n){let e,i;const t=n[1].default,o=Ze(t,n,n[0],null);return{c(){e=G("div"),o&&o.c(),E(e,"class","svelte-16igfw6")},m(s,r){I(s,e,r),o&&o.m(e,null),i=!0},p(s,[r]){o&&o.p&&(!i||r&1)&&Ke(o,t,s,s[0],i?et(t,s[0],r,null):Qe(s[0]),null)},i(s){i||(M(o,s),i=!0)},o(s){O(o,s),i=!1},d(s){s&&T(e),o&&o.d(s)}}}function Zi(n,e,i){let{$$slots:t={},$$scope:o}=e;return n.$$set=s=>{"$$scope"in s&&i(0,o=s.$$scope)},[o,t]}class Ki extends X{constructor(e){super(),Z(this,e,Zi,Xi,K,{})}}function Qi(n,e,i){let t,o;te(n,De,r=>i(0,t=r)),te(n,U,r=>i(1,o=r));let s=Y(Q);return setInterval(()=>{o.drawing=="none"&&s&&(s.autoungrabify(!1),s.nodes().grabify(),W(U,o.undoEmpty=t.isUndoStackEmpty(),o),W(U,o.redoEmpty=t.isRedoStackEmpty(),o))},1e3),window.addEventListener("beforeunload",r=>{r.preventDefault(),r.returnValue=""}),we(()=>{Shiny.unbindAll(),Shiny.bindAll()}),[]}class es extends X{constructor(e){super(),Z(this,e,Qi,null,K,{})}}function sn(n){let e,i,t,o,s,r;return{c(){e=G("div"),i=G("button"),i.innerHTML='<span class="glyphicon glyphicon-refresh spinning svelte-16d2v0h"></span> Fitting...',t=V(),o=G("button"),o.textContent="Cancel",E(i,"class","btn btn-lg btn-secondary fixed-width disabled-button svelte-16d2v0h"),E(i,"id","fitting-button"),i.disabled=!0,E(o,"class","btn btn-lg btn-default fixed-width svelte-16d2v0h"),E(e,"class","center-screen svelte-16d2v0h")},m(l,d){I(l,e,d),R(e,i),R(e,t),R(e,o),s||(r=ie(o,"click",ns),s=!0)},p:ce,d(l){l&&T(e),s=!1,r()}}}function ts(n){let e,i=n[0].fitting&&sn();return{c(){i&&i.c(),e=Be()},m(t,o){i&&i.m(t,o),I(t,e,o)},p(t,[o]){t[0].fitting?i?i.p(t,o):(i=sn(),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:ce,o:ce,d(t){i&&i.d(t),t&&T(e)}}}function ns(){Shiny.setInputValue("run-abort",Math.random())}function os(n,e,i){let t;return te(n,U,o=>i(0,t=o)),[t]}class is extends X{constructor(e){super(),Z(this,e,os,ts,K,{})}}function rn(n){let e,i,t=n[2][n[0].type].label+"",o,s,r=n[0].message+"",l,d;return{c(){e=G("div"),i=G("strong"),o=_e(t),s=V(),l=_e(r),E(e,"class",d=Ve(n[2][n[0].type].class+(n[1]?" fadeOut":""))+" svelte-1wv9zbn")},m(c,a){I(c,e,a),R(e,i),R(i,o),R(e,s),R(e,l)},p(c,a){a&1&&t!==(t=c[2][c[0].type].label+"")&&Re(o,t),a&1&&r!==(r=c[0].message+"")&&Re(l,r),a&3&&d!==(d=Ve(c[2][c[0].type].class+(c[1]?" fadeOut":""))+" svelte-1wv9zbn")&&E(e,"class",d)},d(c){c&&T(e)}}}function ss(n){let e,i=n[0].message!==""&&rn(n);return{c(){i&&i.c(),e=Be()},m(t,o){i&&i.m(t,o),I(t,e,o)},p(t,[o]){t[0].message!==""?i?i.p(t,o):(i=rn(t),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:ce,o:ce,d(t){i&&i.d(t),t&&T(e)}}}function rs(n,e,i){let t;te(n,pn,l=>i(0,t=l));let o={success:{class:"alert-success",label:"Success!"},info:{class:"alert-info",label:"Info!"},warning:{class:"alert-warning",label:"Warning!"},danger:{class:"alert-danger",label:"Danger!"}},s=!1,r;return n.$$.update=()=>{n.$$.dirty&9&&t.message!==""&&(i(1,s=!1),clearTimeout(r),i(3,r=setTimeout(()=>{i(1,s=!0)},1e4)))},[t,s,o,r]}class ls extends X{constructor(e){super(),Z(this,e,rs,ss,K,{})}}function as(n,e){const i={};return n.forEach((t,o)=>{i[t]=e[o]}),i}function ds(n,e){const i=Object.keys(e);let t={};return i.forEach(o=>{n.hasOwnProperty(o)&&(t[o]=n[o])}),t}function us(n,e,i){let t,o,s;te(n,De,l=>i(0,t=l)),te(n,U,l=>i(1,o=l)),te(n,ne,l=>i(2,s=l));let r=Y(Q);return we(()=>{B.use(Un);const l={isDebug:!0};let d=r.undoRedo(l);De.set(d),d.action("style",function(c){let a={};const m=Object.keys(c.style);return c.eles.forEach(function(g){let u=[];m.forEach(f=>{u.push(g.data(f)||g.style(f)),g.data(f,c.style[f])}),a[g.id()]=as(m,u)}),{eles:c.eles,style:a}},function(c){const a=ds(c.eles[0].style(),c.style[Object.keys(c.style)[0]]);return Object.keys(c.style).forEach(function(m){var g=r.getElementById(m);for(var u in c.style[m])g.data(u,c.style[m][u])}),{eles:c.eles,style:a}}),r.on("afterUndo",function(c,a){a!=="style"&&a!=="move"&&oe(s.mode)}),r.on("afterRedo",function(c,a){a!=="style"&&a!=="move"&&oe(s.mode)}),document.addEventListener("keydown",function(c){(c.ctrlKey||c.metaKey)&&c.target.nodeName==="BODY"&&c.which===90&&!o.fitting&&(c.preventDefault(),c.stopPropagation(),c.shiftKey?t.redo():t.undo())}),document.addEventListener("keyup",function(c){c.metaKey&&c.target.nodeName==="BODY"&&c.which===90&&(c.preventDefault(),c.stopPropagation())})}),[]}class cs extends X{constructor(e){super(),Z(this,e,us,null,K,{})}}function fs(n,e,i){let t;return te(n,U,o=>i(0,t=o)),Shiny.addCustomMessageHandler("fullServer",function(o){W(U,t.full=o.full,t),W(U,t.ready=!0,t),W(U,t.shinyapps=o.shinyapps,t)}),[]}class ms extends X{constructor(e){super(),Z(this,e,fs,null,K,{})}}function gs(n,e,i){let t;te(n,ue,s=>i(1,t=s));let o=!1;return we(()=>{i(0,o=!0)}),n.$$.update=()=>{n.$$.dirty&3&&o&&Ho(t.showVar,t.showLav,t.showMean),n.$$.dirty&3&&o&&jo(t.view,t.std,t.number_digits)},[o,t]}class ps extends X{constructor(e){super(),Z(this,e,gs,null,K,{})}}function hs(n){let e,i,t,o;const s=n[6].default,r=Ze(s,n,n[5],null);return{c(){e=G("section"),r&&r.c(),ve(e,"left",n[0]+"px"),ve(e,"top",n[1]+"px"),E(e,"class","draggable svelte-13fkbj1")},m(l,d){I(l,e,d),r&&r.m(e,null),i=!0,t||(o=[ie(window,"mouseup",n[4]),ie(window,"mousemove",n[3]),ie(e,"mousedown",n[2])],t=!0)},p(l,[d]){r&&r.p&&(!i||d&32)&&Ke(r,s,l,l[5],i?et(s,l[5],d,null):Qe(l[5]),null),(!i||d&1)&&ve(e,"left",l[0]+"px"),(!i||d&2)&&ve(e,"top",l[1]+"px")},i(l){i||(M(r,l),i=!0)},o(l){O(r,l),i=!1},d(l){l&&T(e),r&&r.d(l),t=!1,Xe(o)}}}function bs(n,e,i){let{$$slots:t={},$$scope:o}=e,{left:s=100}=e,{top:r=100}=e,l=!1,d=0,c=0;function a(u){l=!0,d=u.clientX-s,c=u.clientY-r}function m(u){l&&(i(0,s=u.clientX-d),i(1,r=u.clientY-c))}function g(){l=!1}return n.$$set=u=>{"left"in u&&i(0,s=u.left),"top"in u&&i(1,r=u.top),"$$scope"in u&&i(5,o=u.$$scope)},[s,r,a,m,g,o,t]}class _s extends X{constructor(e){super(),Z(this,e,bs,hs,K,{left:0,top:1})}}function vs(n){let e,i,t;const o=n[0].default,s=Ze(o,n,n[1],null);return{c(){e=G("ul"),i=G("div"),s&&s.c(),ve(i,"display","flex"),ve(i,"flex-direction","column"),E(e,"class","nav navbar-nav navbar-left"),ve(e,"border","1px solid black"),ve(e,"z-index","9999")},m(r,l){I(r,e,l),R(e,i),s&&s.m(i,null),t=!0},p(r,l){s&&s.p&&(!t||l&2)&&Ke(s,o,r,r[1],t?et(o,r[1],l,null):Qe(r[1]),null)},i(r){t||(M(s,r),t=!0)},o(r){O(s,r),t=!1},d(r){r&&T(e),s&&s.d(r)}}}function $s(n){let e,i;return e=new _s({props:{$$slots:{default:[vs]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(t,o){j(e,t,o),i=!0},p(t,[o]){const s={};o&2&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){O(e.$$.fragment,t),i=!1},d(t){H(e,t)}}}function ys(n,e,i){let{$$slots:t={},$$scope:o}=e;return n.$$set=s=>{"$$scope"in s&&i(1,o=s.$$scope)},[t,o]}class ws extends X{constructor(e){super(),Z(this,e,ys,$s,K,{})}}function ks(n,e){return bootbox.alert({title:"<span style='color: red;'>Error</span>",message:`A ${e} error occurred:<br> <span style='color: red;'>${n}</span>.<br><br>Please consider reporting this issue by sending an email to <a href="mailto:j.d.karch@fsw.leidenuniv.nl">j.d.karch@fsw.leidenuniv.nl</a>.`,centerVertical:!0}),!0}function Es(){return typeof Shiny=="object"&&Shiny!==null}function Cs(n){return Es()&&Shiny.addCustomMessageHandler("serverError",function(e){Y(U).showServerErrors&&ks(e.msg,"Server")}),[]}class Ss extends X{constructor(e){super(),Z(this,e,Cs,null,K,{})}}function Ls(n,e,i){let t;return te(n,ne,o=>i(0,t=o)),n.$$.update=()=>{n.$$.dirty&1&&oe(t.mode)},[t]}class Ms extends X{constructor(e){super(),Z(this,e,Ls,null,K,{})}}function Ds(n){B.use(Gn);let e=Y(Q);return we(()=>{e.automove({nodesMatching:".automove-viewport",reposition:"viewport"})}),[]}class As extends X{constructor(e){super(),Z(this,e,Ds,null,K,{})}}function Fs(n){qn(B,window.$,gn);let e=Y(Q);return we(()=>{e.nodeEditing({resizeToContentCueImage:"",undoable:!0})}),[]}class Os extends X{constructor(e){super(),Z(this,e,Fs,null,K,{})}}function Is(n){return B("collection","init",function(){return this.addClass(Ee).addClass(We).addClass(he),this}),B("collection","free",function(){return this.hasClass(Ee)}),B("collection","addLabel",function(e){return this.addLabelImport(e).removeClass(Ne),this}),B("collection","addLabelImport",function(e){return this.data("label",e).addClass(ze).removeClass(We),this}),B("collection","removeLabel",function(){return this.removeClass(ze).addClass(We).data("label",null),this}),B("collection","setLabel",function(e){return this.data("label",e),this}),B("collection","getLabel",function(){return this.data("label")}),B("collection","fixPara",function(e){return this.data("value",e).removeClass(Ee).removeClass(Ae).removeClass(Dt).addClass(Ce),this}),B("collection","freePara",function(){return this.removeClass(Ce).removeClass(Ae).removeClass(Ne).addClass(Ee),this}),B("collection","setFree",function(){return this.removeClass(Ce).removeClass(Ae).addClass(Ee),this}),B("collection","forceFreePara",function(){return this.removeClass(Ee).removeClass(Ce).removeClass(Ne).addClass(Ae),this}),B("collection","revert",function(){const e=this.source().id(),i=this.target().id();return this.move({source:i,target:e}),this}),B("collection","setUndirected",function(){return this.removeClass(Me).addClass(Oe),this}),B("collection","setDirected",function(){return this.removeClass(Oe).addClass(Me),this}),B("collection","isUndirected",function(){return this.hasClass(Oe)}),B("collection","isDirected",function(){return this.hasClass(Me)}),B("collection","makeLoop",function(){return this.addClass(lt),this}),B("collection","myIsLoop",function(){return this.hasClass(lt)}),B("collection","makeMeanEdge",function(){return this.data("isMean","1"),this}),B("collection","isMean",function(){return this.data("isMean")==="1"||this.isConstant()}),B("collection","makeOtherEdge",function(){return this.data("isMean","0"),this}),B("collection","isFixed",function(){return this.hasClass(Ce)}),B("collection","isFree",function(){return this.hasClass(Ee)||this.hasClass(Ae)}),B("collection","isForceFree",function(){return this.hasClass(Ae)}),B("collection","hasLabel",function(){return this.hasClass(ze)}),B("collection","isModifiedLavaan",function(){return this.hasClass(Ne)}),B("collection","markModifiedLavaan",function(){return this.addClass(Ne),this}),B("collection","markAddedLavaan",function(){return this.addClass(Pe).removeClass(he),this}),B("collection","markAddedUser",function(){return this.removeClass(Pe).addClass(he),this}),B("collection","isUserAdded",function(){return this.hasClass(he)}),B("collection","isLavaanAdded",function(){return this.hasClass(Pe)}),B("collection","getValue",function(){return this.data("value")}),B("collection","setValue",function(e){this.data("value",e)}),B("collection","invalidate",function(){return this.removeClass(ft),this}),B("collection","validate",function(){return this.addClass(ft),this}),B("collection","isValid",function(){return this.hasClass(ft)}),B("collection","revertLavaanFix",function(){this.freePara().removeClass(Ne)}),B("collection","removeEstimates",function(){return this.removeClass(Dt).removeClass(Yn),this.removeData("estimates"),this}),B("collection","checkAndMarkPotentialLatObReg",function(){return this.isDirected()&&this.source().isLatent()&&this.target().isObserved()&&(this.addClass(Xn),this.addClass(He)),this}),B("collection","markRegression",function(){return this.addClass(ot),this.removeClass(He),this}),B("collection","markFactload",function(){return this.removeClass(ot),this.addClass(He),this}),B("collection","isRegression",function(){return this.hasClass(ot)}),B("collection","isFactLoad",function(){return this.hasClass(He)}),B("collection","link",function(){return this.addClass(Ue),this}),B("collection","unlink",function(){return this.removeClass(Ue),this}),B("collection","isLinked",function(){return this.hasClass(Ue)}),B("collection","isLatent",function(){return this.hasClass(me)}),B("collection","makeLatent",function(){return this.removeClass(le).addClass(me).removeClass(Ue),this}),B("collection","makeObserved",function(){return this.addClass(le).removeClass(me),this}),B("collection","makeOrdered",function(){return this.removeClass(Je).addClass(Ye),this}),B("collection","isOrdered",function(){return this.hasClass(Ye)}),B("collection","makeContinous",function(){return this.addClass(Je).removeClass(Ye),this}),B("collection","isConstant",function(){return this.hasClass(Le)}),B("collection","isObserved",function(){return this.hasClass(le)}),B("core","getLavaanNodes",function(){return this.nodes(`.${Pe}`)}),B("core","getLavaanEdges",function(){return this.edges(`.${Pe}`)}),B("core","getObservedNodes",function(){return this.nodes(`.${le}`)}),B("core","getUserEdges",function(){return this.edges(`.${he}`)}),B("core","getUndirectedEdges",function(){return this.edges(`.${Oe}`)}),B("core","getLavaanModifiedEdges",function(){return this.edges(`.${Ne}`)}),B("core","getLatentNodes",function(){return this.nodes(function(e){return e.hasClass(me)})}),[]}class Ts extends X{constructor(e){super(),Z(this,e,Is,null,K,{})}}function Ns(n){jn(B,window.$,gn);let e=Y(Q);return we(()=>{const i="Bend";e.edgeEditing({undoable:!0,bendRemovalSensitivity:16,enableMultipleAnchorRemovalOption:!0,initAnchorsAutomatically:!1,useTrailingDividersAfterContextMenuOptions:!1,enableCreateAnchorOnDrag:!0,anchorShapeSizeFactor:4,addBendMenuItemTitle:null,removeBendMenuItemTitle:null,removeAllBendMenuItemTitle:null,addControlMenuItemTitle:`Add ${i} Point`,removeControlMenuItemTitle:`Remove ${i} Point`,removeAllControlMenuItemTitle:`Remove All ${i} Points`,handleReconnectEdge:!1}),e.style().update()}),[]}class Ps extends X{constructor(e){super(),Z(this,e,Ns,null,K,{})}}const ln=840;function xs(n,e,i){let t;te(n,U,r=>i(0,t=r));function o(){var r=setTimeout(s,ln*1e3);window.onmousemove=l,window.onmousedown=l,window.onclick=l,window.onscroll=l,window.onkeypress=l;function l(){clearTimeout(r),r=setTimeout(s,ln*1e3)}}async function s(){console.log("Timeout");let r=null,l=null;if(t.dataAvail&&(yn("saveData"),l=await new Promise(c=>{Shiny.addCustomMessageHandler("dataForSave",function(a){c(a)})})),t.modelEmpty||(r=vt()),r!=null||l!=null){bootbox.alert("Due to inactivity, you will be disconnected from the server shortly. Your work was saved for you. In case you have already been disconnected now, you can continue where you left off by refreshing the page.");let c=sessionStorage.getItem("sessionId");c||(c=Date.now().toString(),sessionStorage.setItem("sessionId",c),console.log("Session ID save: ",c));var d=new Mt("ModelDatabase");d.version(1).stores({cache:"sessionId, model, data"}),await d.cache.clear(),await d.cache.put({sessionId:c,model:r,data:l})}}return we(async()=>{let r=sessionStorage.getItem("sessionId");if(console.log("Session ID load: ",r),r){var l=new Mt("ModelDatabase");l.version(1).stores({cache:"sessionId, model, data"});const d=await l.cache.get(r);d.model&&(console.log("Model loaded from cache"),_t(d.model)),d.data&&(console.log("Data loaded from cache"),Shiny.setInputValue("dataUpload-fileInput",{content:btoa(d.data)}))}}),o(),[]}class Vs extends X{constructor(e){super(),Z(this,e,xs,null,K,{})}}function an(n){let e,i,t,o,s,r,l,d,c,a,m,g,u,f,b,h,_,S,v=n[0].full&&dn();i=new to({});const L=[zs,Rs],$=[];function y(C,p){return C[0].full?0:1}s=y(n),r=$[s]=L[s](n),d=new Ki({props:{$$slots:{default:[Us]},$$scope:{ctx:n}}});let w=n[0].full&&cn();m=new Ti({}),u=new Wi({}),b=new es({});let N=n[0].shinyapps&&fn();return{c(){v&&v.c(),e=V(),q(i.$$.fragment),t=V(),o=G("div"),r.c(),l=V(),q(d.$$.fragment),c=V(),w&&w.c(),a=V(),q(m.$$.fragment),g=V(),q(u.$$.fragment),f=V(),q(b.$$.fragment),h=V(),N&&N.c(),_=Be(),E(o,"class","svelte-15ghafl")},m(C,p){v&&v.m(C,p),I(C,e,p),j(i,C,p),I(C,t,p),I(C,o,p),$[s].m(o,null),R(o,l),j(d,o,null),R(o,c),w&&w.m(o,null),I(C,a,p),j(m,C,p),I(C,g,p),j(u,C,p),I(C,f,p),j(b,C,p),I(C,h,p),N&&N.m(C,p),I(C,_,p),S=!0},p(C,p){C[0].full?v?p&1&&M(v,1):(v=dn(),v.c(),M(v,1),v.m(e.parentNode,e)):v&&($e(),O(v,1,1,()=>{v=null}),ye());let P=s;s=y(C),s!==P&&($e(),O($[P],1,1,()=>{$[P]=null}),ye(),r=$[s],r||(r=$[s]=L[s](C),r.c()),M(r,1),r.m(o,l));const A={};p&3&&(A.$$scope={dirty:p,ctx:C}),d.$set(A),C[0].full?w?p&1&&M(w,1):(w=cn(),w.c(),M(w,1),w.m(o,null)):w&&($e(),O(w,1,1,()=>{w=null}),ye()),C[0].shinyapps?N?p&1&&M(N,1):(N=fn(),N.c(),M(N,1),N.m(_.parentNode,_)):N&&($e(),O(N,1,1,()=>{N=null}),ye())},i(C){S||(M(v),M(i.$$.fragment,C),M(r),M(d.$$.fragment,C),M(w),M(m.$$.fragment,C),M(u.$$.fragment,C),M(b.$$.fragment,C),M(N),S=!0)},o(C){O(v),O(i.$$.fragment,C),O(r),O(d.$$.fragment,C),O(w),O(m.$$.fragment,C),O(u.$$.fragment,C),O(b.$$.fragment,C),O(N),S=!1},d(C){v&&v.d(C),C&&T(e),H(i,C),C&&T(t),C&&T(o),$[s].d(),H(d),w&&w.d(),C&&T(a),H(m,C),C&&T(g),H(u,C),C&&T(f),H(b,C),C&&T(h),N&&N.d(C),C&&T(_)}}}function dn(n){let e,i;return e=new is({}),{c(){q(e.$$.fragment)},m(t,o){j(e,t,o),i=!0},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){O(e.$$.fragment,t),i=!1},d(t){H(e,t)}}}function Rs(n){let e,i;return e=new ws({props:{$$slots:{default:[Bs]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(t,o){j(e,t,o),i=!0},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){O(e.$$.fragment,t),i=!1},d(t){H(e,t)}}}function zs(n){let e,i;return e=new Ai({}),{c(){q(e.$$.fragment)},m(t,o){j(e,t,o),i=!0},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){O(e.$$.fragment,t),i=!1},d(t){H(e,t)}}}function Bs(n){let e,i,t,o,s,r,l,d;return e=new wn({props:{full:!1}}),t=new En({props:{minimal:!0}}),s=new Ln({props:{minimal:!0}}),l=new Mn({props:{minimal:!0}}),{c(){q(e.$$.fragment),i=V(),q(t.$$.fragment),o=V(),q(s.$$.fragment),r=V(),q(l.$$.fragment)},m(c,a){j(e,c,a),I(c,i,a),j(t,c,a),I(c,o,a),j(s,c,a),I(c,r,a),j(l,c,a),d=!0},p:ce,i(c){d||(M(e.$$.fragment,c),M(t.$$.fragment,c),M(s.$$.fragment,c),M(l.$$.fragment,c),d=!0)},o(c){O(e.$$.fragment,c),O(t.$$.fragment,c),O(s.$$.fragment,c),O(l.$$.fragment,c),d=!1},d(c){H(e,c),c&&T(i),H(t,c),c&&T(o),H(s,c),c&&T(r),H(l,c)}}}function un(n){let e,i;return e=new Oi({}),{c(){q(e.$$.fragment)},m(t,o){j(e,t,o),i=!0},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){O(e.$$.fragment,t),i=!1},d(t){H(e,t)}}}function Us(n){let e,i,t,o,s,r,l,d,c,a,m,g,u,f,b,h,_,S,v,L,$,y,w,N;e=new _o({}),t=new cs({}),s=new Ts({}),l=new Wn({}),c=new As({}),m=new Os({}),u=new Ji({}),b=new Vi({}),_=new yo({}),v=new ps({}),$=new Ps({});let C=n[0].full&&un();return{c(){q(e.$$.fragment),i=V(),q(t.$$.fragment),o=V(),q(s.$$.fragment),r=V(),q(l.$$.fragment),d=V(),q(c.$$.fragment),a=V(),q(m.$$.fragment),g=V(),q(u.$$.fragment),f=V(),q(b.$$.fragment),h=V(),q(_.$$.fragment),S=V(),q(v.$$.fragment),L=V(),q($.$$.fragment),y=V(),C&&C.c(),w=Be()},m(p,P){j(e,p,P),I(p,i,P),j(t,p,P),I(p,o,P),j(s,p,P),I(p,r,P),j(l,p,P),I(p,d,P),j(c,p,P),I(p,a,P),j(m,p,P),I(p,g,P),j(u,p,P),I(p,f,P),j(b,p,P),I(p,h,P),j(_,p,P),I(p,S,P),j(v,p,P),I(p,L,P),j($,p,P),I(p,y,P),C&&C.m(p,P),I(p,w,P),N=!0},p(p,P){p[0].full?C?P&1&&M(C,1):(C=un(),C.c(),M(C,1),C.m(w.parentNode,w)):C&&($e(),O(C,1,1,()=>{C=null}),ye())},i(p){N||(M(e.$$.fragment,p),M(t.$$.fragment,p),M(s.$$.fragment,p),M(l.$$.fragment,p),M(c.$$.fragment,p),M(m.$$.fragment,p),M(u.$$.fragment,p),M(b.$$.fragment,p),M(_.$$.fragment,p),M(v.$$.fragment,p),M($.$$.fragment,p),M(C),N=!0)},o(p){O(e.$$.fragment,p),O(t.$$.fragment,p),O(s.$$.fragment,p),O(l.$$.fragment,p),O(c.$$.fragment,p),O(m.$$.fragment,p),O(u.$$.fragment,p),O(b.$$.fragment,p),O(_.$$.fragment,p),O(v.$$.fragment,p),O($.$$.fragment,p),O(C),N=!1},d(p){H(e,p),p&&T(i),H(t,p),p&&T(o),H(s,p),p&&T(r),H(l,p),p&&T(d),H(c,p),p&&T(a),H(m,p),p&&T(g),H(u,p),p&&T(f),H(b,p),p&&T(h),H(_,p),p&&T(S),H(v,p),p&&T(L),H($,p),p&&T(y),C&&C.d(p),p&&T(w)}}}function cn(n){let e,i,t,o,s,r;return e=new ls({}),t=new Ui({}),s=new Ms({}),{c(){q(e.$$.fragment),i=V(),q(t.$$.fragment),o=V(),q(s.$$.fragment)},m(l,d){j(e,l,d),I(l,i,d),j(t,l,d),I(l,o,d),j(s,l,d),r=!0},i(l){r||(M(e.$$.fragment,l),M(t.$$.fragment,l),M(s.$$.fragment,l),r=!0)},o(l){O(e.$$.fragment,l),O(t.$$.fragment,l),O(s.$$.fragment,l),r=!1},d(l){H(e,l),l&&T(i),H(t,l),l&&T(o),H(s,l)}}}function fn(n){let e,i;return e=new Vs({}),{c(){q(e.$$.fragment)},m(t,o){j(e,t,o),i=!0},i(t){i||(M(e.$$.fragment,t),i=!0)},o(t){O(e.$$.fragment,t),i=!1},d(t){H(e,t)}}}function Gs(n){let e,i,t,o,s;e=new ms({});let r=n[0].ready&&an(n);return o=new Ss({}),{c(){q(e.$$.fragment),i=V(),r&&r.c(),t=V(),q(o.$$.fragment)},m(l,d){j(e,l,d),I(l,i,d),r&&r.m(l,d),I(l,t,d),j(o,l,d),s=!0},p(l,[d]){l[0].ready?r?(r.p(l,d),d&1&&M(r,1)):(r=an(l),r.c(),M(r,1),r.m(t.parentNode,t)):r&&($e(),O(r,1,1,()=>{r=null}),ye())},i(l){s||(M(e.$$.fragment,l),M(r),M(o.$$.fragment,l),s=!0)},o(l){O(e.$$.fragment,l),O(r),O(o.$$.fragment,l),s=!1},d(l){H(e,l),l&&T(i),r&&r.d(l),l&&T(t),H(o,l)}}}function qs(n,e,i){let t;return te(n,U,o=>i(0,t=o)),[t]}class js extends X{constructor(e){super(),Z(this,e,qs,Gs,K,{})}}new js({target:document.getElementById("app")});
