import{t as Pt}from"./cssesc-ae0dab9a.js";import{e as $t}from"./font-family-papandreou-e99f1152.js";import{E as Bt,j as mt,B as Qt,M as Kt}from"./jspdf-f4d4ca1d.js";import{o as Jt}from"./svgpath-0da963bf.js";import{c as Zt}from"./specificity-c7128631.js";/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Nt=function(i,e){return(Nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(i,e)};function x(i,e){function t(){this.constructor=i}Nt(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var pt=function(){return(pt=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++)for(var n in e=arguments[t])Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);return i}).apply(this,arguments)};function S(i,e,t,r){return new(t||(t=Promise))(function(n,a){function s(f){try{u(r.next(f))}catch(l){a(l)}}function o(f){try{u(r.throw(f))}catch(l){a(l)}}function u(f){var l;f.done?n(f.value):(l=f.value,l instanceof t?l:new t(function(h){h(l)})).then(s,o)}u((r=r.apply(i,e||[])).next())})}function w(i,e){var t,r,n,a,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(u){return function(f){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(n=2&l[0]?r.return:l[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,l[1])).done)return n;switch(r=0,n&&(l=[2&l[0],n.value]),l[0]){case 0:case 1:n=l;break;case 4:return s.label++,{value:l[1],done:!1};case 5:s.label++,r=l[1],l=[0];continue;case 7:l=s.ops.pop(),s.trys.pop();continue;default:if(n=s.trys,!((n=n.length>0&&n[n.length-1])||l[0]!==6&&l[0]!==2)){s=0;continue}if(l[0]===3&&(!n||l[1]>n[0]&&l[1]<n[3])){s.label=l[1];break}if(l[0]===6&&s.label<n[1]){s.label=n[1],n=l;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(l);break}n[2]&&s.ops.pop(),s.trys.pop();continue}l=e.call(i,s)}catch(h){l=[6,h],r=0}finally{t=n=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([u,f])}}}var E=function(){function i(e){if(this.a=void 0,this.r=0,this.g=0,this.b=0,this.simpleColors={},this.colorDefs=[],this.ok=!1,e){for(var t in e.charAt(0)=="#"&&(e=e.substr(1,6)),e=(e=e.replace(/ /g,"")).toLowerCase(),this.simpleColors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},this.simpleColors)e==t&&(e=this.simpleColors[t]);this.colorDefs=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}];for(var r=0;r<this.colorDefs.length;r++){var n=this.colorDefs[r].re,a=this.colorDefs[r].process,s=n.exec(e);if(s){var o=a(s);this.r=o[0],this.g=o[1],this.b=o[2],this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b}}return i.prototype.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},i.prototype.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+(this.a||"1")+")"},i.prototype.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),r=this.b.toString(16);return e.length==1&&(e="0"+e),t.length==1&&(t="0"+t),r.length==1&&(r="0"+r),"#"+e+t+r},i.prototype.getHelpXML=function(){for(var e=[],t=0;t<this.colorDefs.length;t++)for(var r=this.colorDefs[t].example,n=0;n<r.length;n++)e[e.length]=r[n];for(var a in this.simpleColors)e[e.length]=a;var s=document.createElement("ul");for(s.setAttribute("id","rgbcolor-examples"),t=0;t<e.length;t++)try{var o=document.createElement("li"),u=new i(e[t]),f=document.createElement("div");f.style.cssText="margin: 3px; border: 1px solid black; background:"+u.toHex()+"; color:"+u.toHex(),f.appendChild(document.createTextNode("test"));var l=document.createTextNode(" "+e[t]+" -> "+u.toRGB()+" -> "+u.toHex());o.appendChild(f),o.appendChild(l),s.appendChild(o)}catch{}return s},i}(),P=function(){function i(e){this.color=e}return i.prototype.getFillData=function(e,t){return S(this,void 0,void 0,function(){return w(this,function(r){return[2,void 0]})})},i}(),te=function(){function i(){this.xmlSpace="",this.fill=null,this.fillOpacity=1,this.fontFamily="",this.fontSize=16,this.fontStyle="",this.fontWeight="",this.opacity=1,this.stroke=null,this.strokeDasharray=null,this.strokeDashoffset=0,this.strokeLinecap="",this.strokeLinejoin="",this.strokeMiterlimit=4,this.strokeOpacity=1,this.strokeWidth=1,this.alignmentBaseline="",this.textAnchor="",this.visibility="",this.color=null}return i.prototype.clone=function(){var e=new i;return e.xmlSpace=this.xmlSpace,e.fill=this.fill,e.fillOpacity=this.fillOpacity,e.fontFamily=this.fontFamily,e.fontSize=this.fontSize,e.fontStyle=this.fontStyle,e.fontWeight=this.fontWeight,e.opacity=this.opacity,e.stroke=this.stroke,e.strokeDasharray=this.strokeDasharray,e.strokeDashoffset=this.strokeDashoffset,e.strokeLinecap=this.strokeLinecap,e.strokeLinejoin=this.strokeLinejoin,e.strokeMiterlimit=this.strokeMiterlimit,e.strokeOpacity=this.strokeOpacity,e.strokeWidth=this.strokeWidth,e.textAnchor=this.textAnchor,e.alignmentBaseline=this.alignmentBaseline,e.visibility=this.visibility,e.color=this.color,e},i.default=function(){var e=new i;return e.xmlSpace="default",e.fill=new P(new E("rgb(0, 0, 0)")),e.fillOpacity=1,e.fontFamily="times",e.fontSize=16,e.fontStyle="normal",e.fontWeight="normal",e.opacity=1,e.stroke=null,e.strokeDasharray=null,e.strokeDashoffset=0,e.strokeLinecap="butt",e.strokeLinejoin="miter",e.strokeMiterlimit=4,e.strokeOpacity=1,e.strokeWidth=1,e.alignmentBaseline="baseline",e.textAnchor="start",e.visibility="visible",e.color=new E("rgb(0, 0, 0)"),e},i}(),Y=function(){function i(e,t){var r,n,a;this.pdf=e,this.svg2pdfParameters=t.svg2pdfParameters,this.attributeState=t.attributeState?t.attributeState.clone():te.default(),this.viewport=t.viewport,this.refsHandler=t.refsHandler,this.styleSheets=t.styleSheets,this.textMeasure=t.textMeasure,this.transform=(r=t.transform)!==null&&r!==void 0?r:this.pdf.unitMatrix,this.withinClipPath=(n=t.withinClipPath)!==null&&n!==void 0&&n,this.withinUse=(a=t.withinUse)!==null&&a!==void 0&&a}return i.prototype.clone=function(e){var t,r,n,a;return e===void 0&&(e={}),new i(this.pdf,{svg2pdfParameters:this.svg2pdfParameters,attributeState:e.attributeState?e.attributeState.clone():this.attributeState.clone(),viewport:(t=e.viewport)!==null&&t!==void 0?t:this.viewport,refsHandler:this.refsHandler,styleSheets:this.styleSheets,textMeasure:this.textMeasure,transform:(r=e.transform)!==null&&r!==void 0?r:this.transform,withinClipPath:(n=e.withinClipPath)!==null&&n!==void 0?n:this.withinClipPath,withinUse:(a=e.withinUse)!==null&&a!==void 0?a:this.withinUse})},i}(),Ot=function(){function i(e){this.renderedElements={},this.idMap=e,this.idPrefix=String(i.instanceCounter++)}return i.prototype.getRendered=function(e,t,r){return S(this,void 0,void 0,function(){var n,a;return w(this,function(s){switch(s.label){case 0:return n=this.generateKey(e,t),this.renderedElements.hasOwnProperty(n)?[2,this.renderedElements[e]]:(a=this.get(e),this.renderedElements[n]=a,[4,r(a)]);case 1:return s.sent(),[2,a]}})})},i.prototype.get=function(e){return this.idMap[Pt(e,{isIdentifier:!0})]},i.prototype.generateKey=function(e,t){return this.idPrefix+"|"+e+"|"+(t||new E("rgb(0,0,0)")).toRGBA()},i.instanceCounter=0,i}();function kt(i,e){return Math.atan2(e[1]-i[1],e[0]-i[0])}function Mt(i,e){return[2/3*(e[0]-i[0])+i[0],2/3*(e[1]-i[1])+i[1]]}function J(i){var e=Math.sqrt(i[0]*i[0]+i[1]*i[1]);return[i[0]/e,i[1]/e]}function $(i,e){return J([e[0]-i[0],e[1]-i[1]])}function it(i,e){return[i[0]+e[0],i[1]+e[1]]}function ut(i,e){var t=i[0],r=i[1];return[e.a*t+e.c*r+e.e,e.b*t+e.d*r+e.f]}var K=function(){function i(){this.segments=[]}return i.prototype.moveTo=function(e,t){return this.segments.push(new F(e,t)),this},i.prototype.lineTo=function(e,t){return this.segments.push(new U(e,t)),this},i.prototype.curveTo=function(e,t,r,n,a,s){return this.segments.push(new L(e,t,r,n,a,s)),this},i.prototype.close=function(){return this.segments.push(new dt),this},i.prototype.transform=function(e){this.segments.forEach(function(t){if(t instanceof F||t instanceof U||t instanceof L){var r=ut([t.x,t.y],e);t.x=r[0],t.y=r[1]}if(t instanceof L){var n=ut([t.x1,t.y1],e),a=ut([t.x2,t.y2],e);t.x1=n[0],t.y1=n[1],t.x2=a[0],t.y2=a[1]}})},i.prototype.draw=function(e){var t=e.pdf;this.segments.forEach(function(r){r instanceof F?t.moveTo(r.x,r.y):r instanceof U?t.lineTo(r.x,r.y):r instanceof L?t.curveTo(r.x1,r.y1,r.x2,r.y2,r.x,r.y):t.close()})},i}(),F=function(i,e){this.x=i,this.y=e},U=function(i,e){this.x=i,this.y=e},L=function(i,e,t,r,n,a){this.x1=i,this.y1=e,this.x2=t,this.y2=r,this.x=n,this.y=a},dt=function(){};function z(i,e){return e.split(",").indexOf((i.nodeName||i.tagName).toLowerCase())>=0}function c(i,e,t,r){var n;r===void 0&&(r=t);var a=(n=i.style)===null||n===void 0?void 0:n.getPropertyValue(r);if(a)return a;var s=e.getPropertyValue(i,r);return s||i.hasAttribute(t)&&i.getAttribute(t)||void 0}function H(i,e,t){if(c(i.element,t.styleSheets,"display")==="none")return!1;var r=e,n=c(i.element,t.styleSheets,"visibility");return n&&(r=n!=="hidden"),r}function X(i,e,t){var r=H(i,e,t);return i.element.childNodes.length!==0&&(i.children.forEach(function(n){n.isVisible(r,t)&&(r=!0)}),r)}var ee=function(){function i(){this.markers=[]}return i.prototype.addMarker=function(e){this.markers.push(e)},i.prototype.draw=function(e){return S(this,void 0,void 0,function(){var t,r,n,a,s,o,u;return w(this,function(f){switch(f.label){case 0:t=0,f.label=1;case 1:return t<this.markers.length?(r=this.markers[t],n=void 0,a=r.angle,s=r.anchor,o=Math.cos(a),u=Math.sin(a),n=e.pdf.Matrix(o,u,-u,o,s[0],s[1]),n=e.pdf.matrixMult(e.pdf.Matrix(e.attributeState.strokeWidth,0,0,e.attributeState.strokeWidth,0,0),n),n=e.pdf.matrixMult(n,e.transform),e.pdf.saveGraphicsState(),[4,e.refsHandler.getRendered(r.id,null,function(l){return l.apply(e)})]):[3,4];case 2:f.sent(),e.pdf.doFormObject(r.id,n),e.pdf.restoreGraphicsState(),f.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},i}(),G=function(i,e,t){this.id=i,this.anchor=e,this.angle=t},gt=/url\(["']?#([^"']+)["']?\)/,re={bottom:"bottom","text-bottom":"bottom",top:"top","text-top":"top",hanging:"hanging",middle:"middle",central:"middle",center:"middle",mathematical:"middle",ideographic:"ideographic",alphabetic:"alphabetic",baseline:"alphabetic"};function I(i,e){var t;return(t=i&&i.toString().match(/^([\-0-9.]+)em$/))?parseFloat(t[1])*e:(t=i&&i.toString().match(/^([\-0-9.]+)(px|)$/))?parseFloat(t[1]):0}function Lt(i){return re[i]||"alphabetic"}function N(i){for(var e,t=[],r=/[+-]?(?:(?:\d+\.?\d*)|(?:\d*\.?\d+))(?:[eE][+-]?\d+)?/g;e=r.exec(i);)t.push(parseFloat(e[0]));return t}function Q(i,e){if(i==="transparent"){var t=new E("rgb(0,0,0)");return t.a=0,t}if(i.toLowerCase()==="currentcolor")return e||new E("rgb(0,0,0)");var r=/\s*rgba\(((?:[^,\)]*,){3}[^,\)]*)\)\s*/.exec(i);if(r){var n=N(r[1]),a=new E("rgb("+n.slice(0,3).join(",")+")");return a.a=n[3],a}return new E(i)}var D={"sans-serif":"helvetica",verdana:"helvetica",arial:"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",serif:"times",cursive:"times",fantasy:"times"},ht,ie=(ht=Bt.version.split("."),parseFloat(ht[0])===2&&parseFloat(ht[1])===3);function Et(i,e){return ie?e==400?i=="italic"?"italic":"normal":e==700&&i!=="italic"?"bold":i+""+e:e==400||e==="normal"?i==="italic"?"italic":"normal":e!=700&&e!=="bold"||i!=="normal"?(e==700?"bold":e)+""+i:"bold"}function yt(i,e){if(c(e.element,i.styleSheets,"display")==="none")return[0,0,0,0];var t=[0,0,0,0];return e.children.forEach(function(r){var n=r.getBoundingBox(i);t=[Math.min(t[0],n[0]),Math.min(t[1],n[1]),Math.max(t[0]+t[2],n[0]+n[2])-Math.min(t[0],n[0]),Math.max(t[1]+t[3],n[1]+n[3])-Math.min(t[1],n[1])]}),t}function Z(i,e){var t=parseFloat,r=t(i.getAttribute("x1"))||t(c(i,e.styleSheets,"x"))||t(c(i,e.styleSheets,"cx"))-t(c(i,e.styleSheets,"r"))||0,n=t(i.getAttribute("x2"))||r+t(c(i,e.styleSheets,"width"))||t(c(i,e.styleSheets,"cx"))+t(c(i,e.styleSheets,"r"))||0,a=t(i.getAttribute("y1"))||t(c(i,e.styleSheets,"y"))||t(c(i,e.styleSheets,"cy"))-t(c(i,e.styleSheets,"r"))||0,s=t(i.getAttribute("y2"))||a+t(c(i,e.styleSheets,"height"))||t(c(i,e.styleSheets,"cy"))+t(c(i,e.styleSheets,"r"))||0;return[Math.min(r,n),Math.min(a,s),Math.max(r,n)-Math.min(r,n),Math.max(a,s)-Math.min(a,s)]}function nt(i,e,t,r,n,a,s,o){o===void 0&&(o=!1);var u,f,l=e[0],h=e[1],g=e[2],m=e[3],y=n/g,d=a/m,b=i.getAttribute("preserveAspectRatio");if(b){var p=b.split(" ");p[0]==="defer"&&(p=p.slice(1)),u=p[0],f=p[1]||"meet"}else u="xMidYMid",f="meet";if(u!=="none"&&(f==="meet"?y=d=Math.min(y,d):f==="slice"&&(y=d=Math.max(y,d))),o)return s.pdf.Matrix(y,0,0,d,0,0);var k=t-l*y,M=r-h*d;u.indexOf("xMid")>=0?k+=(n-g*y)/2:u.indexOf("xMax")>=0&&(k+=n-g*y),u.indexOf("YMid")>=0?M+=(a-m*d)/2:u.indexOf("YMax")>=0&&(M+=a-m*d);var C=s.pdf.Matrix(1,0,0,1,k,M),v=s.pdf.Matrix(y,0,0,d,0,0);return s.pdf.matrixMult(v,C)}function at(i,e){if(!i||i==="none")return e.pdf.unitMatrix;for(var t,r,n=/^[\s,]*matrix\(([^)]+)\)\s*/,a=/^[\s,]*translate\(([^)]+)\)\s*/,s=/^[\s,]*rotate\(([^)]+)\)\s*/,o=/^[\s,]*scale\(([^)]+)\)\s*/,u=/^[\s,]*skewX\(([^)]+)\)\s*/,f=/^[\s,]*skewY\(([^)]+)\)\s*/,l=e.pdf.unitMatrix;i.length>0&&i.length!==r;){r=i.length;var h=n.exec(i);if(h&&(t=N(h[1]),l=e.pdf.matrixMult(e.pdf.Matrix(t[0],t[1],t[2],t[3],t[4],t[5]),l),i=i.substr(h[0].length)),h=s.exec(i)){t=N(h[1]);var g=Math.PI*t[0]/180;if(l=e.pdf.matrixMult(e.pdf.Matrix(Math.cos(g),Math.sin(g),-Math.sin(g),Math.cos(g),0,0),l),t[1]||t[2]){var m=e.pdf.Matrix(1,0,0,1,t[1],t[2]),y=e.pdf.Matrix(1,0,0,1,-t[1],-t[2]);l=e.pdf.matrixMult(y,e.pdf.matrixMult(l,m))}i=i.substr(h[0].length)}(h=a.exec(i))&&(t=N(h[1]),l=e.pdf.matrixMult(e.pdf.Matrix(1,0,0,1,t[0],t[1]||0),l),i=i.substr(h[0].length)),(h=o.exec(i))&&((t=N(h[1]))[1]||(t[1]=t[0]),l=e.pdf.matrixMult(e.pdf.Matrix(t[0],0,0,t[1],0,0),l),i=i.substr(h[0].length)),(h=u.exec(i))&&(t=parseFloat(h[1]),t*=Math.PI/180,l=e.pdf.matrixMult(e.pdf.Matrix(1,0,Math.tan(t),1,0,0),l),i=i.substr(h[0].length)),(h=f.exec(i))&&(t=parseFloat(h[1]),t*=Math.PI/180,l=e.pdf.matrixMult(e.pdf.Matrix(1,Math.tan(t),0,1,0,0),l),i=i.substr(h[0].length))}return l}var bt=function(){function i(e,t){this.element=e,this.children=t,this.parent=null}return i.prototype.setParent=function(e){this.parent=e},i.prototype.getParent=function(){return this.parent},i.prototype.getBoundingBox=function(e){return c(this.element,e.styleSheets,"display")==="none"?[0,0,0,0]:this.getBoundingBoxCore(e)},i.prototype.computeNodeTransform=function(e){var t=this.computeNodeTransformCore(e),r=c(this.element,e.styleSheets,"transform");return r?e.pdf.matrixMult(t,at(r,e)):t},i}(),tt=function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return x(e,i),e.prototype.render=function(t){return Promise.resolve()},e.prototype.getBoundingBoxCore=function(t){return[]},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e}(bt),It=function(i){function e(t,r,n){var a=i.call(this,r,n)||this;return a.pdfGradientType=t,a.contextColor=void 0,a}return x(e,i),e.prototype.apply=function(t){return S(this,void 0,void 0,function(){var r,n,a,s,o,u;return w(this,function(f){return(r=this.element.getAttribute("id"))?(n=this.getStops(t.styleSheets),a=0,s=!1,n.forEach(function(l){var h=l.opacity;h&&h!==1&&(a+=h,s=!0)}),s&&(o=new mt({opacity:a/n.length})),u=new Qt(this.pdfGradientType,this.getCoordinates(),n,o),t.pdf.addShadingPattern(r,u),[2]):[2]})})},e.prototype.getStops=function(t){var r=this;if(this.stops)return this.stops;if(this.contextColor===void 0){this.contextColor=null;for(var n=this;n;){var a=c(n.element,t,"color");if(a){this.contextColor=Q(a,null);break}n=n.getParent()}}var s=[];return this.children.forEach(function(o){if(o.element.tagName.toLowerCase()==="stop"){var u=c(o.element,t,"color"),f=Q(c(o.element,t,"stop-color")||"",u?Q(u,null):r.contextColor),l=parseFloat(c(o.element,t,"stop-opacity")||"1");s.push({offset:e.parseGradientOffset(o.element.getAttribute("offset")||"0"),color:[f.r,f.g,f.b],opacity:l})}}),this.stops=s},e.prototype.getBoundingBoxCore=function(t){return Z(this.element,t)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return X(this,t,r)},e.parseGradientOffset=function(t){var r=parseFloat(t);return!isNaN(r)&&t.indexOf("%")>=0?r/100:r},e}(tt),Dt=function(i){function e(t,r){return i.call(this,"axial",t,r)||this}return x(e,i),e.prototype.getCoordinates=function(){return[parseFloat(this.element.getAttribute("x1")||"0"),parseFloat(this.element.getAttribute("y1")||"0"),parseFloat(this.element.getAttribute("x2")||"1"),parseFloat(this.element.getAttribute("y2")||"0")]},e}(It),Ht=function(i){function e(t,r){return i.call(this,"radial",t,r)||this}return x(e,i),e.prototype.getCoordinates=function(){var t=this.element.getAttribute("cx"),r=this.element.getAttribute("cy"),n=this.element.getAttribute("fx"),a=this.element.getAttribute("fy");return[parseFloat(n||t||"0.5"),parseFloat(a||r||"0.5"),0,parseFloat(t||"0.5"),parseFloat(r||"0.5"),parseFloat(this.element.getAttribute("r")||"0.5")]},e}(It),ne=function(){function i(e,t){this.key=e,this.gradient=t}return i.prototype.getFillData=function(e,t){return S(this,void 0,void 0,function(){var r,n,a;return w(this,function(s){switch(s.label){case 0:return[4,t.refsHandler.getRendered(this.key,null,function(o){return o.apply(new Y(t.pdf,{refsHandler:t.refsHandler,textMeasure:t.textMeasure,styleSheets:t.styleSheets,viewport:t.viewport,svg2pdfParameters:t.svg2pdfParameters}))})];case 1:return s.sent(),this.gradient.element.hasAttribute("gradientUnits")&&this.gradient.element.getAttribute("gradientUnits").toLowerCase()!=="objectboundingbox"?r=t.pdf.unitMatrix:(n=e.getBoundingBox(t),r=t.pdf.Matrix(n[2],0,0,n[3],n[0],n[1])),a=at(c(this.gradient.element,t.styleSheets,"gradientTransform","transform"),t),[2,{key:this.key,matrix:t.pdf.matrixMult(a,r)}]}})})},i}(),Rt=function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return x(e,i),e.prototype.apply=function(t){return S(this,void 0,void 0,function(){var r,n,a,s,o;return w(this,function(u){switch(u.label){case 0:if(!(r=this.element.getAttribute("id")))return[2];n=this.getBoundingBox(t),a=new Kt([n[0],n[1],n[0]+n[2],n[1]+n[3]],n[2],n[3]),t.pdf.beginTilingPattern(a),s=0,o=this.children,u.label=1;case 1:return s<o.length?[4,o[s].render(new Y(t.pdf,{attributeState:t.attributeState,refsHandler:t.refsHandler,styleSheets:t.styleSheets,viewport:t.viewport,svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure}))]:[3,4];case 2:u.sent(),u.label=3;case 3:return s++,[3,1];case 4:return t.pdf.endTilingPattern(r,a),[2]}})})},e.prototype.getBoundingBoxCore=function(t){return Z(this.element,t)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return X(this,t,r)},e}(tt),ae=function(){function i(e,t){this.key=e,this.pattern=t}return i.prototype.getFillData=function(e,t){return S(this,void 0,void 0,function(){var r,n,a,s,o,u,f,l,h,g,m,y;return w(this,function(d){switch(d.label){case 0:return[4,t.refsHandler.getRendered(this.key,null,function(b){return b.apply(new Y(t.pdf,{refsHandler:t.refsHandler,textMeasure:t.textMeasure,styleSheets:t.styleSheets,viewport:t.viewport,svg2pdfParameters:t.svg2pdfParameters}))})];case 1:return d.sent(),r={key:this.key,boundingBox:void 0,xStep:0,yStep:0,matrix:void 0},a=t.pdf.unitMatrix,this.pattern.element.hasAttribute("patternUnits")&&this.pattern.element.getAttribute("patternUnits").toLowerCase()!=="objectboundingbox"||(n=e.getBoundingBox(t),a=t.pdf.Matrix(1,0,0,1,n[0],n[1]),o=this.pattern.getBoundingBox(t),u=o[0]*n[0]||0,f=o[1]*n[1]||0,l=o[2]*n[2]||0,h=o[3]*n[3]||0,r.boundingBox=[u,f,u+l,f+h],r.xStep=l,r.yStep=h),s=t.pdf.unitMatrix,this.pattern.element.hasAttribute("patternContentUnits")&&this.pattern.element.getAttribute("patternContentUnits").toLowerCase()==="objectboundingbox"&&(n||(n=e.getBoundingBox(t)),s=t.pdf.Matrix(n[2],0,0,n[3],0,0),o=r.boundingBox||this.pattern.getBoundingBox(t),u=o[0]/n[0]||0,f=o[1]/n[1]||0,l=o[2]/n[2]||0,h=o[3]/n[3]||0,r.boundingBox=[u,f,u+l,f+h],r.xStep=l,r.yStep=h),g=t.pdf.unitMatrix,(m=c(this.pattern.element,t.styleSheets,"patternTransform","transform"))&&(g=at(m,t)),y=s,y=t.pdf.matrixMult(y,a),y=t.pdf.matrixMult(y,g),y=t.pdf.matrixMult(y,t.transform),r.matrix=y,[2,r]}})})},i}();function se(i,e){var t=gt.exec(i);if(t){var r=t[1],n=e.refsHandler.get(r);return n&&(n instanceof Dt||n instanceof Ht)?function(s,o,u){var f=o.getStops(u.styleSheets);if(f.length===0)return null;if(f.length===1){var l=f[0].color,h=new E;return h.ok=!0,h.r=l[0],h.g=l[1],h.b=l[2],h.a=f[0].opacity,new P(h)}return new ne(s,o)}(r,n,e):n&&n instanceof Rt?new ae(r,n):new P(new E("rgb(0, 0, 0)"))}var a=Q(i,e.attributeState.color);return a.ok?new P(a):null}function vt(i,e,t){var r=t||e.element,n=c(r,i.styleSheets,"color");if(n){var a=Q(n,i.attributeState.color);a.ok?i.attributeState.color=a:i.attributeState.color=new E("rgb(0,0,0)")}var s=c(r,i.styleSheets,"visibility");s&&(i.attributeState.visibility=s);var o=c(r,i.styleSheets,"fill");o&&(i.attributeState.fill=se(o,i));var u=c(r,i.styleSheets,"fill-opacity");u&&(i.attributeState.fillOpacity=parseFloat(u));var f=c(r,i.styleSheets,"stroke-opacity");f&&(i.attributeState.strokeOpacity=parseFloat(f));var l=c(r,i.styleSheets,"opacity");l&&(i.attributeState.opacity=parseFloat(l));var h=c(r,i.styleSheets,"stroke-width");h!==void 0&&h!==""&&(i.attributeState.strokeWidth=Math.abs(parseFloat(h)));var g=c(r,i.styleSheets,"stroke");if(g)if(g==="none")i.attributeState.stroke=null;else{var m=Q(g,i.attributeState.color);m.ok&&(i.attributeState.stroke=new P(m))}var y=c(r,i.styleSheets,"stroke-linecap");y&&(i.attributeState.strokeLinecap=y);var d=c(r,i.styleSheets,"stroke-linejoin");d&&(i.attributeState.strokeLinejoin=d);var b=c(r,i.styleSheets,"stroke-dasharray");if(b){var p=parseInt(c(r,i.styleSheets,"stroke-dashoffset")||"0");i.attributeState.strokeDasharray=N(b),i.attributeState.strokeDashoffset=p}var k=c(r,i.styleSheets,"stroke-miterlimit");k!==void 0&&k!==""&&(i.attributeState.strokeMiterlimit=parseFloat(k));var M=r.getAttribute("xml:space");M&&(i.attributeState.xmlSpace=M);var C=c(r,i.styleSheets,"font-weight");C&&(i.attributeState.fontWeight=C);var v=c(r,i.styleSheets,"font-style");v&&(i.attributeState.fontStyle=v);var T=c(r,i.styleSheets,"font-family");if(T){var B=$t.parse(T);i.attributeState.fontFamily=function(j,q,lt){var qt=Et(j.fontStyle,j.fontWeight),_t=lt.pdf.getFontList(),rt="";return q.some(function(_){var wt=_t[_];return wt&&wt.indexOf(qt)>=0?(rt=_,!0):(_=_.toLowerCase(),!!D.hasOwnProperty(_)&&(rt=_,!0))})||(rt="times"),rt}(i.attributeState,B,i)}var R=c(r,i.styleSheets,"font-size");if(R){var V=i.pdf.getFontSize();i.attributeState.fontSize=I(R,V)}var W=c(r,i.styleSheets,"vertical-align")||c(r,i.styleSheets,"alignment-baseline");if(W){var A=W.match(/(baseline|text-bottom|alphabetic|ideographic|middle|central|mathematical|text-top|bottom|center|top|hanging)/);A&&(i.attributeState.alignmentBaseline=A[0])}var O=c(r,i.styleSheets,"text-anchor");O&&(i.attributeState.textAnchor=O)}function xt(i,e,t){var r=1,n=1;r*=i.attributeState.fillOpacity,r*=i.attributeState.opacity,i.attributeState.fill instanceof P&&i.attributeState.fill.color.a!==void 0&&(r*=i.attributeState.fill.color.a),n*=i.attributeState.strokeOpacity,n*=i.attributeState.opacity,i.attributeState.stroke instanceof P&&i.attributeState.stroke.color.a!==void 0&&(n*=i.attributeState.stroke.color.a);var a,s,o=r<1,u=n<1;if(z(t,"use")?(o=!0,u=!0,r*=i.attributeState.fill?1:0,n*=i.attributeState.stroke?1:0):i.withinUse&&(i.attributeState.fill!==e.attributeState.fill?(o=!0,r*=i.attributeState.fill?1:0):o&&!i.attributeState.fill&&(r=0),i.attributeState.stroke!==e.attributeState.stroke?(u=!0,n*=i.attributeState.stroke?1:0):u&&!i.attributeState.stroke&&(n=0)),o||u){var f={};o&&(f.opacity=r),u&&(f["stroke-opacity"]=n),i.pdf.setGState(new mt(f))}if(i.attributeState.fill&&i.attributeState.fill!==e.attributeState.fill&&i.attributeState.fill instanceof P&&i.attributeState.fill.color.ok&&!z(t,"text")&&i.pdf.setFillColor(i.attributeState.fill.color.r,i.attributeState.fill.color.g,i.attributeState.fill.color.b),i.attributeState.strokeWidth!==e.attributeState.strokeWidth&&i.pdf.setLineWidth(i.attributeState.strokeWidth),i.attributeState.stroke!==e.attributeState.stroke&&i.attributeState.stroke instanceof P&&i.pdf.setDrawColor(i.attributeState.stroke.color.r,i.attributeState.stroke.color.g,i.attributeState.stroke.color.b),i.attributeState.strokeLinecap!==e.attributeState.strokeLinecap&&i.pdf.setLineCap(i.attributeState.strokeLinecap),i.attributeState.strokeLinejoin!==e.attributeState.strokeLinejoin&&i.pdf.setLineJoin(i.attributeState.strokeLinejoin),i.attributeState.strokeDasharray===e.attributeState.strokeDasharray&&i.attributeState.strokeDashoffset===e.attributeState.strokeDashoffset||!i.attributeState.strokeDasharray||i.pdf.setLineDashPattern(i.attributeState.strokeDasharray,i.attributeState.strokeDashoffset),i.attributeState.strokeMiterlimit!==e.attributeState.strokeMiterlimit&&i.pdf.setLineMiterLimit(i.attributeState.strokeMiterlimit),i.attributeState.fontFamily!==e.attributeState.fontFamily&&(a=D.hasOwnProperty(i.attributeState.fontFamily)?D[i.attributeState.fontFamily]:i.attributeState.fontFamily),i.attributeState.fill&&i.attributeState.fill!==e.attributeState.fill&&i.attributeState.fill instanceof P&&i.attributeState.fill.color.ok){var l=i.attributeState.fill.color;i.pdf.setTextColor(l.r,l.g,l.b)}i.attributeState.fontWeight===e.attributeState.fontWeight&&i.attributeState.fontStyle===e.attributeState.fontStyle||(s=Et(i.attributeState.fontStyle,i.attributeState.fontWeight)),a===void 0&&s===void 0||(a===void 0&&(a=D.hasOwnProperty(i.attributeState.fontFamily)?D[i.attributeState.fontFamily]:i.attributeState.fontFamily),i.pdf.setFont(a,s)),i.attributeState.fontSize!==e.attributeState.fontSize&&i.pdf.setFontSize(i.attributeState.fontSize*i.pdf.internal.scaleFactor)}function Vt(i,e,t){var r=gt.exec(i);if(r){var n=r[1];return t.refsHandler.get(n)||void 0}}function Wt(i,e,t){return S(this,void 0,void 0,function(){var r,n;return w(this,function(a){switch(a.label){case 0:return r=t.clone(),e.element.hasAttribute("clipPathUnits")&&e.element.getAttribute("clipPathUnits").toLowerCase()==="objectboundingbox"&&(n=i.getBoundingBox(t),r.transform=t.pdf.matrixMult(t.pdf.Matrix(n[2],0,0,n[3],n[0],n[1]),t.transform)),[4,e.apply(r)];case 1:return a.sent(),[2]}})})}var jt=function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return x(e,i),e.prototype.render=function(t){return S(this,void 0,void 0,function(){var r,n,a,s;return w(this,function(o){switch(o.label){case 0:return this.isVisible(t.attributeState.visibility!=="hidden",t)?((r=t.clone()).transform=r.pdf.matrixMult(this.computeNodeTransform(r),t.transform),vt(r,this),n=c(this.element,r.styleSheets,"clip-path"),(a=n&&n!=="none")?(s=Vt(n,0,r))?s.isVisible(!0,r)?(r.pdf.saveGraphicsState(),[4,Wt(this,s,r)]):[3,2]:[3,4]:[3,5]):[2];case 1:return o.sent(),[3,3];case 2:return[2];case 3:return[3,5];case 4:a=!1,o.label=5;case 5:return r.withinClipPath||r.pdf.saveGraphicsState(),xt(r,t,this.element),[4,this.renderCore(r)];case 6:return o.sent(),r.withinClipPath||r.pdf.restoreGraphicsState(),a&&r.pdf.restoreGraphicsState(),[2]}})})},e}(bt),st=function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return x(e,i),e}(jt),et=function(i){function e(t,r,n){var a=i.call(this,r,n)||this;return a.cachedPath=null,a.hasMarkers=t,a}return x(e,i),e.prototype.renderCore=function(t){return S(this,void 0,void 0,function(){var r;return w(this,function(n){switch(n.label){case 0:return(r=this.getCachedPath(t))===null||r.segments.length===0?[2]:(t.withinClipPath?r.transform(t.transform):t.pdf.setCurrentTransformationMatrix(t.transform),r.draw(t),[4,this.fillOrStroke(t)]);case 1:return n.sent(),this.hasMarkers?[4,this.drawMarkers(t,r)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.getCachedPath=function(t){return this.cachedPath||(this.cachedPath=this.getPath(t))},e.prototype.drawMarkers=function(t,r){return S(this,void 0,void 0,function(){return w(this,function(n){switch(n.label){case 0:return[4,this.getMarkers(r,t).draw(t.clone({transform:t.pdf.unitMatrix}))];case 1:return n.sent(),[2]}})})},e.prototype.fillOrStroke=function(t){return S(this,void 0,void 0,function(){var r,n,a,s,o;return w(this,function(u){switch(u.label){case 0:return t.withinClipPath?[2]:(r=t.attributeState.fill,n=t.attributeState.stroke&&t.attributeState.strokeWidth!==0,r?[4,r.getFillData(this,t)]:[3,2]);case 1:return s=u.sent(),[3,3];case 2:s=void 0,u.label=3;case 3:return a=s,o=c(this.element,t.styleSheets,"fill-rule")==="evenodd",r&&n||t.withinUse?o?t.pdf.fillStrokeEvenOdd(a):t.pdf.fillStroke(a):r?o?t.pdf.fillEvenOdd(a):t.pdf.fill(a):n?t.pdf.stroke():t.pdf.discardPath(),[2]}})})},e.prototype.getBoundingBoxCore=function(t){var r=this.getCachedPath(t);if(!r||!r.segments.length)return[0,0,0,0];for(var n=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY,u=0,f=0,l=0;l<r.segments.length;l++){var h=r.segments[l];(h instanceof F||h instanceof U||h instanceof L)&&(u=h.x,f=h.y),h instanceof L?(n=Math.min(n,u,h.x1,h.x2,h.x),s=Math.max(s,u,h.x1,h.x2,h.x),a=Math.min(a,f,h.y1,h.y2,h.y),o=Math.max(o,f,h.y1,h.y2,h.y)):(n=Math.min(n,u),s=Math.max(s,u),a=Math.min(a,f),o=Math.max(o,f))}return[n,a,s-n,o-a]},e.prototype.getMarkers=function(t,r){var n=c(this.element,r.styleSheets,"marker-start"),a=c(this.element,r.styleSheets,"marker-mid"),s=c(this.element,r.styleSheets,"marker-end"),o=new ee;if(n||a||s){s&&(s=ft(s)),n&&(n=ft(n)),a&&(a=ft(a));for(var u=t.segments,f=[1,0],l=void 0,h=!1,g=[1,0],m=!1,y=function(b){var p=u[b],k=n&&(b===1||!(u[b]instanceof F)&&u[b-1]instanceof F);k&&u.forEach(function(R,V){if(!m&&R instanceof dt&&V>b){var W=u[V-1];m=(W instanceof F||W instanceof U||W instanceof L)&&W}});var M=s&&(b===u.length-1||!(u[b]instanceof F)&&u[b+1]instanceof F),C=a&&b>0&&!(b===1&&u[b-1]instanceof F),v=u[b-1]||null;if(v instanceof F||v instanceof U||v instanceof L)if(p instanceof L)k&&o.addMarker(new G(n,[v.x,v.y],kt(m?[m.x,m.y]:[v.x,v.y],[p.x1,p.y1]))),M&&o.addMarker(new G(s,[p.x,p.y],kt([p.x2,p.y2],[p.x,p.y]))),C&&(l=$([v.x,v.y],[p.x1,p.y1]),l=v instanceof F?l:J(it(f,l)),o.addMarker(new G(a,[v.x,v.y],Math.atan2(l[1],l[0])))),f=$([p.x2,p.y2],[p.x,p.y]);else if(p instanceof F||p instanceof U){if(l=$([v.x,v.y],[p.x,p.y]),k){var T=m?$([m.x,m.y],[p.x,p.y]):l;o.addMarker(new G(n,[v.x,v.y],Math.atan2(T[1],T[0])))}M&&o.addMarker(new G(s,[p.x,p.y],Math.atan2(l[1],l[0]))),C&&(T=p instanceof F?f:v instanceof F?l:J(it(f,l)),o.addMarker(new G(a,[v.x,v.y],Math.atan2(T[1],T[0])))),f=l}else p instanceof dt&&(l=$([v.x,v.y],[h.x,h.y]),C&&(T=v instanceof F?l:J(it(f,l)),o.addMarker(new G(a,[v.x,v.y],Math.atan2(T[1],T[0])))),M&&(T=J(it(l,g)),o.addMarker(new G(s,[h.x,h.y],Math.atan2(T[1],T[0])))),f=l);else{h=p instanceof F&&p;var B=u[b+1];(B instanceof F||B instanceof U||B instanceof L)&&(g=$([h.x,h.y],[B.x,B.y]))}},d=0;d<u.length;d++)y(d)}return o},e}(st);function ft(i){var e=gt.exec(i);return e&&e[1]||void 0}var oe=function(i){function e(t,r){return i.call(this,!0,t,r)||this}return x(e,i),e.prototype.getPath=function(t){if(t.withinClipPath||t.attributeState.stroke===null)return null;var r=parseFloat(this.element.getAttribute("x1")||"0"),n=parseFloat(this.element.getAttribute("y1")||"0"),a=parseFloat(this.element.getAttribute("x2")||"0"),s=parseFloat(this.element.getAttribute("y2")||"0");return r||a||n||s?new K().moveTo(r,n).lineTo(a,s):null},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return H(this,t,r)},e.prototype.fillOrStroke=function(t){return S(this,void 0,void 0,function(){return w(this,function(r){switch(r.label){case 0:return t.attributeState.fill=null,[4,i.prototype.fillOrStroke.call(this,t)];case 1:return r.sent(),[2]}})})},e}(et),Gt=function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return x(e,i),e.prototype.apply=function(t){return S(this,void 0,void 0,function(){var r,n,a,s,o;return w(this,function(u){switch(u.label){case 0:return this.isVisible(t.attributeState.visibility!=="hidden",t)?((r=t.clone()).transform=r.pdf.unitMatrix,vt(r,this),n=c(this.element,r.styleSheets,"clip-path"),n&&n!=="none"&&(a=Vt(n,0,r))?a.isVisible(!0,r)?[4,Wt(this,a,r)]:[3,2]:[3,3]):[2];case 1:return u.sent(),[3,3];case 2:return[2];case 3:xt(r,t,this.element),s=0,o=this.children,u.label=4;case 4:return s<o.length?[4,o[s].render(r)]:[3,7];case 5:u.sent(),u.label=6;case 6:return s++,[3,4];case 7:return[2]}})})},e.prototype.getBoundingBoxCore=function(t){return yt(t,this)},e.prototype.isVisible=function(t,r){return X(this,t,r)},e.prototype.computeNodeTransformCore=function(t){var r=parseFloat(c(this.element,t.styleSheets,"x")||"0"),n=parseFloat(c(this.element,t.styleSheets,"y")||"0"),a=this.element.getAttribute("viewBox");if(a){var s=N(a),o=parseFloat(c(this.element,t.styleSheets,"width")||c(this.element.ownerSVGElement,t.styleSheets,"width")||a[2]),u=parseFloat(c(this.element,t.styleSheets,"height")||c(this.element.ownerSVGElement,t.styleSheets,"height")||a[3]);return nt(this.element,s,r,n,o,u,t)}return t.pdf.Matrix(1,0,0,1,r,n)},e}(tt),ot=function(i,e){this.width=i,this.height=e},le=function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return x(e,i),e.prototype.renderCore=function(t){return S(this,void 0,void 0,function(){var r,n,a,s,o,u,f,l,h,g,m,y,d;return w(this,function(b){switch(b.label){case 0:return r=parseFloat,(n=this.element.getAttribute("href")||this.element.getAttribute("xlink:href"))?(a=n.substring(1),s=t.refsHandler.get(a),o=z(s.element,"symbol,svg")&&s.element.hasAttribute("viewBox"),u=r(c(this.element,t.styleSheets,"x")||"0"),f=r(c(this.element,t.styleSheets,"y")||"0"),l=void 0,h=void 0,o?(l=r(c(this.element,t.styleSheets,"width")||c(s.element,t.styleSheets,"width")||"0"),h=r(c(this.element,t.styleSheets,"height")||c(s.element,t.styleSheets,"height")||"0"),u+=r(c(s.element,t.styleSheets,"x")||"0"),f+=r(c(s.element,t.styleSheets,"y")||"0"),m=N(s.element.getAttribute("viewBox")),g=nt(s.element,m,u,f,l,h,t)):g=t.pdf.Matrix(1,0,0,1,u,f),y=new Y(t.pdf,{refsHandler:t.refsHandler,styleSheets:t.styleSheets,withinUse:!0,viewport:o?new ot(l,h):t.viewport,svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure}),d=t.attributeState.color,[4,t.refsHandler.getRendered(a,d,function(p){return e.renderReferencedNode(p,a,d,y)})]):[2];case 1:return b.sent(),t.pdf.saveGraphicsState(),t.pdf.setCurrentTransformationMatrix(t.transform),o&&c(s.element,t.styleSheets,"overflow")!=="visible"&&(t.pdf.rect(u,f,l,h),t.pdf.clip().discardPath()),t.pdf.doFormObject(t.refsHandler.generateKey(a,d),g),t.pdf.restoreGraphicsState(),[2]}})})},e.renderReferencedNode=function(t,r,n,a){return S(this,void 0,void 0,function(){var s;return w(this,function(o){switch(o.label){case 0:return s=[(s=t.getBoundingBox(a))[0]-.5*s[2],s[1]-.5*s[3],2*s[2],2*s[3]],a.attributeState.color=n,a.pdf.beginFormObject(s[0],s[1],s[2],s[3],a.pdf.unitMatrix),t instanceof Gt?[4,t.apply(a)]:[3,2];case 1:return o.sent(),[3,4];case 2:return[4,t.render(a)];case 3:o.sent(),o.label=4;case 4:return a.pdf.endFormObject(a.refsHandler.generateKey(r,n)),[2]}})})},e.prototype.getBoundingBoxCore=function(t){return Z(this.element,t)},e.prototype.isVisible=function(t,r){return H(this,t,r)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e}(st),ue=function(i){function e(t,r){return i.call(this,!1,t,r)||this}return x(e,i),e.prototype.getPath=function(t){var r=parseFloat(c(this.element,t.styleSheets,"width")||"0"),n=parseFloat(c(this.element,t.styleSheets,"height")||"0");if(!isFinite(r)||r<=0||!isFinite(n)||n<=0)return null;var a=c(this.element,t.styleSheets,"rx"),s=c(this.element,t.styleSheets,"ry"),o=Math.min(parseFloat(a||s||"0"),.5*r),u=Math.min(parseFloat(s||a||"0"),.5*n),f=parseFloat(c(this.element,t.styleSheets,"x")||"0"),l=parseFloat(c(this.element,t.styleSheets,"y")||"0"),h=4/3*(Math.SQRT2-1);return o===0&&u===0?new K().moveTo(f,l).lineTo(f+r,l).lineTo(f+r,l+n).lineTo(f,l+n).close():new K().moveTo(f+=o,l).lineTo(f+=r-2*o,l).curveTo(f+o*h,l,f+o,l+(u-u*h),f+=o,l+=u).lineTo(f,l+=n-2*u).curveTo(f,l+u*h,f-o*h,l+u,f-=o,l+=u).lineTo(f+=2*o-r,l).curveTo(f-o*h,l,f-o,l-u*h,f-=o,l-=u).lineTo(f,l+=2*u-n).curveTo(f,l-u*h,f+o*h,l-u,f+=o,l-=u).close()},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return H(this,t,r)},e}(et),Ut=function(i){function e(t,r){return i.call(this,!1,t,r)||this}return x(e,i),e.prototype.getPath=function(t){var r=this.getRx(t),n=this.getRy(t);if(!isFinite(r)||n<=0||!isFinite(n)||n<=0)return null;var a=parseFloat(c(this.element,t.styleSheets,"cx")||"0"),s=parseFloat(c(this.element,t.styleSheets,"cy")||"0"),o=4/3*(Math.SQRT2-1)*r,u=4/3*(Math.SQRT2-1)*n;return new K().moveTo(a+r,s).curveTo(a+r,s-u,a+o,s-n,a,s-n).curveTo(a-o,s-n,a-r,s-u,a-r,s).curveTo(a-r,s+u,a-o,s+n,a,s+n).curveTo(a+o,s+n,a+r,s+u,a+r,s)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return H(this,t,r)},e}(et),he=function(i){function e(t,r){return i.call(this,t,r)||this}return x(e,i),e.prototype.getRx=function(t){return parseFloat(c(this.element,t.styleSheets,"rx")||"0")},e.prototype.getRy=function(t){return parseFloat(c(this.element,t.styleSheets,"ry")||"0")},e}(Ut);function zt(i){var e="invisible",t=i.stroke&&i.strokeWidth!==0,r=i.fill;return r&&t?e="fillThenStroke":r?e="fill":t&&(e="stroke"),e}function Tt(i){return i.replace(/[\n\r]/g,"")}function Ct(i){return i.replace(/[\t]/g," ")}function Ft(i){return i.replace(/ +/g," ")}function At(i,e,t){switch(c(i,t.styleSheets,"text-transform")){case"uppercase":return e.toUpperCase();case"lowercase":return e.toLowerCase();default:return e}}var ct=function(){function i(e,t,r,n){this.textNode=e,this.texts=[],this.textNodes=[],this.contexts=[],this.textAnchor=t,this.originX=r,this.originY=n,this.textMeasures=[]}return i.prototype.setX=function(e){this.originX=e},i.prototype.setY=function(e){this.originY=e},i.prototype.add=function(e,t,r){this.texts.push(t),this.textNodes.push(e),this.contexts.push(r)},i.prototype.rightTrimText=function(){for(var e=this.texts.length-1;e>=0;e--)if(this.contexts[e].attributeState.xmlSpace==="default"&&(this.texts[e]=this.texts[e].replace(/\s+$/,"")),this.texts[e].match(/[^\s]/))return!1;return!0},i.prototype.measureText=function(e){for(var t=0;t<this.texts.length;t++)this.textMeasures.push({width:e.textMeasure.measureTextWidth(this.texts[t],this.contexts[t].attributeState),length:this.texts[t].length})},i.prototype.put=function(e,t){var r,n,a,s,o=[],u=[],f=[],l=this.originX,h=this.originY,g=l,m=l;for(r=0;r<this.textNodes.length;r++){n=this.textNodes[r],a=this.contexts[r],s=this.textMeasures[r]||{width:e.textMeasure.measureTextWidth(this.texts[r],this.contexts[r].attributeState),length:this.texts[r].length};var y=l,d=h;if(n.nodeName!=="#text"&&!o.includes(n)){o.push(n);var b=i.resolveRelativePositionAttribute(n,"dx");b!==null&&(y+=I(b,a.attributeState.fontSize));var p=i.resolveRelativePositionAttribute(n,"dy");p!==null&&(d+=I(p,a.attributeState.fontSize))}u[r]=y,f[r]=d,l=y+s.width+s.length*t,h=d,g=Math.min(g,y),m=Math.max(m,l)}var k=0;switch(this.textAnchor){case"start":k=0;break;case"middle":k=(m-g)/2;break;case"end":k=m-g}for(r=0;r<this.textNodes.length;r++)if(n=this.textNodes[r],a=this.contexts[r],n.nodeName==="#text"||a.attributeState.visibility!=="hidden"){e.pdf.saveGraphicsState(),xt(a,e,n);var M=a.attributeState.alignmentBaseline,C=zt(a.attributeState);e.pdf.text(this.texts[r],u[r]-k,f[r],{baseline:Lt(M),angle:e.transform,renderingMode:C==="fill"?void 0:C,charSpace:t===0?void 0:t}),e.pdf.restoreGraphicsState()}return[l,h]},i.resolveRelativePositionAttribute=function(e,t){for(var r,n=e;n&&z(n,"tspan");){if(n.hasAttribute(t))return n.getAttribute(t);if(((r=e.parentElement)===null||r===void 0?void 0:r.firstChild)!==e)break;n=n.parentElement}return null},i}(),fe=function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return x(e,i),e.prototype.processTSpans=function(t,r,n,a,s,o){for(var u=n.pdf.getFontSize(),f=n.attributeState.xmlSpace,l=!0,h=!1,g=0;g<r.childNodes.length;g++){var m=r.childNodes[g];if(m.textContent){var y=m.textContent;if(m.nodeName==="#text"){var d=Tt(y);d=Ct(d),f==="default"&&(d=Ft(d),l&&d.match(/^\s/)&&(h=!0),d.match(/[^\s]/)&&(l=!1),o.prevText.match(/\s$/)&&(d=d.replace(/^\s+/,"")));var b=At(r,d,n);s.add(r,b,n),o.prevText=y,o.prevContext=n}else if(!z(m,"title")){if(z(m,"tspan")){var p=m,k=p.getAttribute("x");if(k!==null){var M=I(k,u);s=new ct(this,c(p,n.styleSheets,"text-anchor")||n.attributeState.textAnchor,M,0),a.push({type:"y",chunk:s})}var C=p.getAttribute("y");if(C!==null){var v=I(C,u);s=new ct(this,c(p,n.styleSheets,"text-anchor")||n.attributeState.textAnchor,0,v),a.push({type:"x",chunk:s})}var T=n.clone();vt(T,t,p),this.processTSpans(t,p,T,a,s,o)}}}}return h},e.prototype.renderCore=function(t){return S(this,void 0,void 0,function(){var r,n,a,s,o,u,f,l,h,g,m,y,d,b,p,k,M,C,v,T,B,R,V;return w(this,function(W){if(t.pdf.saveGraphicsState(),r=0,n=0,a=1,s=t.pdf.getFontSize(),o=I(this.element.getAttribute("x"),s),u=I(this.element.getAttribute("y"),s),f=I(this.element.getAttribute("dx"),s),l=I(this.element.getAttribute("dy"),s),h=parseFloat(this.element.getAttribute("textLength")||"0"),g=t.attributeState.visibility,this.element.childElementCount===0)m=this.element.textContent||"",y=function(A,O){return A=Ct(A=Tt(A)),O.xmlSpace==="default"&&(A=Ft(A=A.trim())),A}(m,t.attributeState),d=At(this.element,y,t),r=t.textMeasure.getTextOffset(d,t.attributeState),h>0&&(b=t.textMeasure.measureTextWidth(d,t.attributeState),t.attributeState.xmlSpace==="default"&&m.match(/^\s/)&&(a=0),n=(h-b)/(d.length-a)||0),g==="visible"&&(p=t.attributeState.alignmentBaseline,k=zt(t.attributeState),t.pdf.text(d,o+f-r,u+l,{baseline:Lt(p),angle:t.transform,renderingMode:k==="fill"?void 0:k,charSpace:n===0?void 0:n}));else{for(M=[],C=new ct(this,t.attributeState.textAnchor,o+f,u+l),M.push({type:"",chunk:C}),v=this.processTSpans(this,this.element,t,M,C,{prevText:" ",prevContext:t}),a=v?0:1,T=!0,B=M.length-1;B>=0;B--)T&&(T=M[B].chunk.rightTrimText());h>0&&(R=0,V=0,M.forEach(function(A){var O=A.chunk;O.measureText(t),O.textMeasures.forEach(function(j){var q=j.width,lt=j.length;R+=q,V+=lt})}),n=(h-R)/(V-a)),M.reduce(function(A,O){var j=O.type,q=O.chunk;return j==="x"?q.setX(A[0]):j==="y"&&q.setY(A[1]),q.put(t,n)},[0,0])}return t.pdf.restoreGraphicsState(),[2]})})},e.prototype.isVisible=function(t,r){return X(this,t,r)},e.prototype.getBoundingBoxCore=function(t){return Z(this.element,t)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e}(st),ce=function(i){function e(t,r){return i.call(this,!0,t,r)||this}return x(e,i),e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return H(this,t,r)},e.prototype.getPath=function(t){var r,n,a=new Jt(c(this.element,t.styleSheets,"d")||"").unshort().unarc().abs(),s=new K;return a.iterate(function(o){switch(o[0]){case"M":s.moveTo(o[1],o[2]);break;case"L":s.lineTo(o[1],o[2]);break;case"H":s.lineTo(o[1],n);break;case"V":s.lineTo(r,o[1]);break;case"C":s.curveTo(o[1],o[2],o[3],o[4],o[5],o[6]);break;case"Q":var u=Mt([r,n],[o[1],o[2]]),f=Mt([o[3],o[4]],[o[1],o[2]]);s.curveTo(u[0],u[1],f[0],f[1],o[3],o[4]);break;case"Z":s.close()}switch(o[0]){case"M":case"L":r=o[1],n=o[2];break;case"H":r=o[1];break;case"V":n=o[1];break;case"C":r=o[5],n=o[6];break;case"Q":r=o[3],n=o[4]}}),s},e}(et),pe=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,((?:.|\s)*)$/i,de=function(i){function e(t,r){var n=i.call(this,t,r)||this;return n.imageLoadingPromise=null,n.imageUrl=n.element.getAttribute("xlink:href")||n.element.getAttribute("href"),n.imageUrl&&(n.imageLoadingPromise=e.fetchImageData(n.imageUrl)),n}return x(e,i),e.prototype.renderCore=function(t){return S(this,void 0,void 0,function(){var r,n,a,s,o,u,f,l,h,g,m,y;return w(this,function(d){switch(d.label){case 0:return this.imageLoadingPromise?(t.pdf.setCurrentTransformationMatrix(t.transform),r=parseFloat(c(this.element,t.styleSheets,"width")||"0"),n=parseFloat(c(this.element,t.styleSheets,"height")||"0"),a=parseFloat(c(this.element,t.styleSheets,"x")||"0"),s=parseFloat(c(this.element,t.styleSheets,"y")||"0"),!isFinite(r)||r<=0||!isFinite(n)||n<=0?[2]:[4,this.imageLoadingPromise]):[2];case 1:return o=d.sent(),u=o.data,(f=o.format).indexOf("svg")!==0?[3,3]:(l=new DOMParser,h=l.parseFromString(u,"image/svg+xml").firstElementChild,(!(g=this.element.getAttribute("preserveAspectRatio"))||g.indexOf("defer")<0||!h.getAttribute("preserveAspectRatio"))&&h.setAttribute("preserveAspectRatio",g||""),h.setAttribute("x",String(a)),h.setAttribute("y",String(s)),h.setAttribute("width",String(r)),h.setAttribute("height",String(n)),[4,St(h,m={}).render(new Y(t.pdf,{refsHandler:new Ot(m),styleSheets:t.styleSheets,viewport:new ot(r,n),svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure}))]);case 2:return d.sent(),[2];case 3:y="data:image/"+f+";base64,"+btoa(u);try{t.pdf.addImage(y,"",a,s,r,n)}catch(b){typeof console=="object"&&console.warn&&console.warn("Could not load image "+this.imageUrl+`. 
`+b)}d.label=4;case 4:return[2]}})})},e.prototype.getBoundingBoxCore=function(t){return Z(this.element,t)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return H(this,t,r)},e.fetchImageData=function(t){return S(this,void 0,void 0,function(){var r,n,a,s,o;return w(this,function(u){switch(u.label){case 0:if(!(a=t.match(pe)))return[3,1];if(s=a[2],(o=s.split("/"))[0]!=="image")throw new Error("Unsupported image URL: "+t);return n=o[1],r=a[5],a[4]==="base64"?(r=r.replace(/\s/g,""),r=atob(r)):r=decodeURIComponent(r),[3,3];case 1:return[4,e.fetchImage(t)];case 2:r=u.sent(),n=t.substring(t.lastIndexOf(".")+1),u.label=3;case 3:return[2,{data:r,format:n}]}})})},e.fetchImage=function(t){return new Promise(function(r,n){var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){if(a.status!==200)throw new Error("Error "+a.status+": Failed to load image '"+t+"'");for(var s=new Uint8Array(a.response),o="",u=0;u<s.length;u++)o+=String.fromCharCode(s[u]);r(o)},a.onerror=n,a.onabort=n,a.send(null)})},e.getMimeType=function(t){switch(t=t.toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";default:return"image/"+t}},e}(st),Yt=function(i){function e(t,r,n){var a=i.call(this,!0,r,n)||this;return a.closed=t,a}return x(e,i),e.prototype.getPath=function(t){if(!this.element.hasAttribute("points")||this.element.getAttribute("points")==="")return null;var r=e.parsePointsString(this.element.getAttribute("points")),n=new K;if(r.length<1)return n;n.moveTo(r[0][0],r[0][1]);for(var a=1;a<r.length;a++)n.lineTo(r[a][0],r[a][1]);return this.closed&&n.close(),n},e.prototype.isVisible=function(t,r){return H(this,t,r)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.parsePointsString=function(t){for(var r=N(t),n=[],a=0;a<r.length-1;a+=2){var s=r[a],o=r[a+1];n.push([s,o])}return n},e}(et),me=function(i){function e(t,r){return i.call(this,!0,t,r)||this}return x(e,i),e}(Yt),ge=function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return x(e,i),e.prototype.render=function(t){return Promise.resolve()},e.prototype.getBoundingBoxCore=function(t){return[0,0,0,0]},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return H(this,t,r)},e}(bt),ye=function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return x(e,i),e.prototype.apply=function(t){return S(this,void 0,void 0,function(){var r,n,a,s,o;return w(this,function(u){switch(u.label){case 0:r=this.computeNodeTransform(t),n=this.getBoundingBox(t),t.pdf.beginFormObject(n[0],n[1],n[2],n[3],r),function(f){var l=f.attributeState,h=f.pdf,g=1,m=1;g*=l.fillOpacity,g*=l.opacity,l.fill instanceof P&&l.fill.color.a!==void 0&&(g*=l.fill.color.a),m*=l.strokeOpacity,m*=l.opacity,l.stroke instanceof P&&l.stroke.color.a!==void 0&&(m*=l.stroke.color.a);var y,d={};if(d.opacity=g,d["stroke-opacity"]=m,h.setGState(new mt(d)),l.fill&&l.fill instanceof P&&l.fill.color.ok?h.setFillColor(l.fill.color.r,l.fill.color.g,l.fill.color.b):h.setFillColor(0,0,0),h.setLineWidth(l.strokeWidth),l.stroke instanceof P?h.setDrawColor(l.stroke.color.r,l.stroke.color.g,l.stroke.color.b):h.setDrawColor(0,0,0),h.setLineCap(l.strokeLinecap),h.setLineJoin(l.strokeLinejoin),l.strokeDasharray?h.setLineDashPattern(l.strokeDasharray,l.strokeDashoffset):h.setLineDashPattern([],0),h.setLineMiterLimit(l.strokeMiterlimit),y=D.hasOwnProperty(l.fontFamily)?D[l.fontFamily]:l.fontFamily,l.fill&&l.fill instanceof P&&l.fill.color.ok){var b=l.fill.color;h.setTextColor(b.r,b.g,b.b)}else h.setTextColor(0,0,0);var p="";l.fontWeight==="bold"&&(p="bold"),l.fontStyle==="italic"&&(p+="italic"),p===""&&(p="normal"),y!==void 0||p!==void 0?(y===void 0&&(y=D.hasOwnProperty(l.fontFamily)?D[l.fontFamily]:l.fontFamily),h.setFont(y,p)):h.setFont("helvetica",p),h.setFontSize(l.fontSize*h.internal.scaleFactor)}(a=new Y(t.pdf,{refsHandler:t.refsHandler,styleSheets:t.styleSheets,viewport:t.viewport,svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure})),s=0,o=this.children,u.label=1;case 1:return s<o.length?[4,o[s].render(a)]:[3,4];case 2:u.sent(),u.label=3;case 3:return s++,[3,1];case 4:return t.pdf.endFormObject(this.element.getAttribute("id")),[2]}})})},e.prototype.getBoundingBoxCore=function(t){var r,n=this.element.getAttribute("viewBox");return n&&(r=N(n)),[r&&r[0]||0,r&&r[1]||0,r&&r[2]||parseFloat(this.element.getAttribute("markerWidth")||"3"),r&&r[3]||parseFloat(this.element.getAttribute("markerHeight")||"3")]},e.prototype.computeNodeTransformCore=function(t){var r,n=parseFloat(this.element.getAttribute("refX")||"0"),a=parseFloat(this.element.getAttribute("refY")||"0"),s=this.element.getAttribute("viewBox");if(s){var o=N(s);r=nt(this.element,o,0,0,parseFloat(this.element.getAttribute("markerWidth")||"3"),parseFloat(this.element.getAttribute("markerHeight")||"3"),t,!0),r=t.pdf.matrixMult(t.pdf.Matrix(1,0,0,1,-n,-a),r)}else r=t.pdf.Matrix(1,0,0,1,-n,-a);return r},e.prototype.isVisible=function(t,r){return X(this,t,r)},e}(tt),be=function(i){function e(t,r){return i.call(this,t,r)||this}return x(e,i),e.prototype.getR=function(t){var r;return(r=this.r)!==null&&r!==void 0?r:this.r=parseFloat(c(this.element,t.styleSheets,"r")||"0")},e.prototype.getRx=function(t){return this.getR(t)},e.prototype.getRy=function(t){return this.getR(t)},e}(Ut),ve=function(i){function e(t,r){return i.call(this,!1,t,r)||this}return x(e,i),e}(Yt),Xt=function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return x(e,i),e.prototype.renderCore=function(t){return S(this,void 0,void 0,function(){var r,n;return w(this,function(a){switch(a.label){case 0:r=0,n=this.children,a.label=1;case 1:return r<n.length?[4,n[r].render(t)]:[3,4];case 2:a.sent(),a.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},e.prototype.getBoundingBoxCore=function(t){return yt(t,this)},e}(jt),xe=function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return x(e,i),e.prototype.isVisible=function(t,r){return X(this,t,r)},e.prototype.render=function(t){return S(this,void 0,void 0,function(){var r,n,a,s,o;return w(this,function(u){switch(u.label){case 0:return this.isVisible(t.attributeState.visibility!=="hidden",t)?(r=this.getX(t),n=this.getY(t),a=this.getWidth(t),s=this.getHeight(t),t.pdf.saveGraphicsState(),o=t.transform,this.element.hasAttribute("transform")&&(o=t.pdf.matrixMult(at(this.element.getAttribute("transform"),t),o)),t.pdf.setCurrentTransformationMatrix(o),t.withinUse||c(this.element,t.styleSheets,"overflow")==="visible"||t.pdf.rect(r,n,a,s).clip().discardPath(),[4,i.prototype.render.call(this,t.clone({transform:t.pdf.unitMatrix,viewport:t.withinUse?t.viewport:new ot(a,s)}))]):[2];case 1:return u.sent(),t.pdf.restoreGraphicsState(),[2]}})})},e.prototype.computeNodeTransform=function(t){return this.computeNodeTransformCore(t)},e.prototype.computeNodeTransformCore=function(t){if(t.withinUse)return t.pdf.unitMatrix;var r,n=this.getX(t),a=this.getY(t),s=this.getViewBox();if(s){var o=this.getWidth(t),u=this.getHeight(t);r=nt(this.element,s,n,a,o,u,t)}else r=t.pdf.Matrix(1,0,0,1,n,a);return r},e.prototype.getWidth=function(t){if(this.width!==void 0)return this.width;var r,n,a=t.svg2pdfParameters;if(this.isOutermostSvg(t))if(a.width!=null)r=a.width;else if(n=c(this.element,t.styleSheets,"width"))r=parseFloat(n);else{var s=this.getViewBox();if(s&&(a.height!=null||c(this.element,t.styleSheets,"height"))){var o=s[2]/s[3];r=this.getHeight(t)*o}else r=Math.min(300,t.viewport.width,2*t.viewport.height)}else r=(n=c(this.element,t.styleSheets,"width"))?parseFloat(n):t.viewport.width;return this.width=r},e.prototype.getHeight=function(t){if(this.height!==void 0)return this.height;var r,n,a=t.svg2pdfParameters;if(this.isOutermostSvg(t))if(a.height!=null)r=a.height;else if(n=c(this.element,t.styleSheets,"height"))r=parseFloat(n);else{var s=this.getViewBox();if(s){var o=s[2]/s[3];r=this.getWidth(t)/o}else r=Math.min(150,t.viewport.width/2,t.viewport.height)}else r=(n=c(this.element,t.styleSheets,"height"))?parseFloat(n):t.viewport.height;return this.height=r},e.prototype.getX=function(t){if(this.x!==void 0)return this.x;if(this.isOutermostSvg(t))return this.x=0;var r=c(this.element,t.styleSheets,"x");return this.x=r?parseFloat(r):0},e.prototype.getY=function(t){if(this.y!==void 0)return this.y;if(this.isOutermostSvg(t))return this.y=0;var r=c(this.element,t.styleSheets,"y");return this.y=r?parseFloat(r):0},e.prototype.getViewBox=function(){if(this.viewBox!==void 0)return this.viewBox;var t=this.element.getAttribute("viewBox");return this.viewBox=t?N(t):void 0},e.prototype.isOutermostSvg=function(t){return t.svg2pdfParameters.element===this.element},e}(Xt),Se=function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return x(e,i),e.prototype.isVisible=function(t,r){return X(this,t,r)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e}(Xt),we=function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return x(e,i),e.prototype.apply=function(t){return S(this,void 0,void 0,function(){var r,n,a;return w(this,function(s){switch(s.label){case 0:if(!this.isVisible(!0,t))return[2];r=t.pdf.matrixMult(this.computeNodeTransform(t),t.transform),t.pdf.setCurrentTransformationMatrix(r),n=0,a=this.children,s.label=1;case 1:return n<a.length?[4,a[n].render(new Y(t.pdf,{refsHandler:t.refsHandler,styleSheets:t.styleSheets,viewport:t.viewport,withinClipPath:!0,svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure}))]:[3,4];case 2:s.sent(),s.label=3;case 3:return n++,[3,1];case 4:return t.pdf.clip().discardPath(),t.pdf.setCurrentTransformationMatrix(r.inversed()),[2]}})})},e.prototype.getBoundingBoxCore=function(t){return yt(t,this)},e.prototype.isVisible=function(t,r){return X(this,t,r)},e}(tt);function St(i,e){var t,r=[];switch(function(a,s){for(var o=[],u=0;u<a.childNodes.length;u++){var f=a.childNodes[u];f.nodeName.charAt(0)!=="#"&&o.push(f)}for(u=0;u<o.length;u++)s(u,o[u])}(i,function(a,s){return r.push(St(s,e))}),i.tagName.toLowerCase()){case"a":case"g":t=new Se(i,r);break;case"circle":t=new be(i,r);break;case"clippath":t=new we(i,r);break;case"ellipse":t=new he(i,r);break;case"lineargradient":t=new Dt(i,r);break;case"image":t=new de(i,r);break;case"line":t=new oe(i,r);break;case"marker":t=new ye(i,r);break;case"path":t=new ce(i,r);break;case"pattern":t=new Rt(i,r);break;case"polygon":t=new me(i,r);break;case"polyline":t=new ve(i,r);break;case"radialgradient":t=new Ht(i,r);break;case"rect":t=new ue(i,r);break;case"svg":t=new xe(i,r);break;case"symbol":t=new Gt(i,r);break;case"text":t=new fe(i,r);break;case"use":t=new le(i,r);break;default:t=new ge(i,r)}if(e!=null&&t.element.hasAttribute("id")){var n=Pt(t.element.id,{isIdentifier:!0});e[n]=e[n]||t}return t.children.forEach(function(a){return a.setParent(t)}),t}var ke=function(){function i(e,t){this.rootSvg=e,this.loadExternalSheets=t,this.styleSheets=[]}return i.prototype.load=function(){return S(this,void 0,void 0,function(){var e;return w(this,function(t){switch(t.label){case 0:return[4,this.collectStyleSheetTexts()];case 1:return e=t.sent(),this.parseCssSheets(e),[2]}})})},i.prototype.collectStyleSheetTexts=function(){return S(this,void 0,void 0,function(){var e,t,r,n,a;return w(this,function(s){switch(s.label){case 0:if(e=[],this.loadExternalSheets&&this.rootSvg.ownerDocument)for(n=0;n<this.rootSvg.ownerDocument.childNodes.length;n++)(t=this.rootSvg.ownerDocument.childNodes[n]).nodeName==="xml-stylesheet"&&typeof t.data=="string"&&e.push(i.loadSheet(t.data.match(/href=["'].*?["']/)[0].split("=")[1].slice(1,-1)));for(r=this.rootSvg.querySelectorAll("style,link"),n=0;n<r.length;n++)z(a=r[n],"style")?e.push(a.textContent):this.loadExternalSheets&&z(a,"link")&&a.getAttribute("rel")==="stylesheet"&&a.hasAttribute("href")&&e.push(i.loadSheet(a.getAttribute("href")));return[4,Promise.all(e)];case 1:return[2,s.sent().filter(function(o){return o!==null})]}})})},i.prototype.parseCssSheets=function(e){for(var t=document.implementation.createHTMLDocument(""),r=0,n=e;r<n.length;r++){var a=n[r],s=t.createElement("style");s.textContent=a,t.body.appendChild(s);var o=s.sheet;if(o instanceof CSSStyleSheet){for(var u=o.cssRules.length-1;u>=0;u--){var f=o.cssRules[u];if(f instanceof CSSStyleRule){var l=f;if(l.selectorText.indexOf(",")>=0){o.deleteRule(u);for(var h=l.cssText.substring(l.selectorText.length),g=i.splitSelectorAtCommas(l.selectorText),m=0;m<g.length;m++)o.insertRule(g[m]+h,u+m)}}else o.deleteRule(u)}this.styleSheets.push(o)}}},i.splitSelectorAtCommas=function(e){for(var t,r=/,|["']/g,n=/[^\\]["]/g,a=/[^\\][']/g,s=[],o="initial",u=-1,f=n,l=0;l<e.length;)switch(o){case"initial":r.lastIndex=l,(t=r.exec(e))?(t[0]===","?(s.push(e.substring(u+1,r.lastIndex-1).trim()),u=r.lastIndex-1):(o="withinQuotes",f=t[0]==='"'?n:a),l=r.lastIndex):(s.push(e.substring(u+1).trim()),l=e.length);break;case"withinQuotes":f.lastIndex=l,(t=f.exec(e))&&(l=f.lastIndex,o="initial")}return s},i.loadSheet=function(e){return new Promise(function(t,r){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="text",n.onload=function(){n.status!==200&&r(new Error("Error "+n.status+": Failed to load '"+e+"'")),t(n.responseText)},n.onerror=r,n.onabort=r,n.send(null)}).catch(function(){return null})},i.prototype.getPropertyValue=function(e,t){for(var r=[],n=0,a=this.styleSheets;n<a.length;n++)for(var s=a[n],o=0;o<s.cssRules.length;o++){var u=s.cssRules[o];u.style.getPropertyValue(t)&&e.matches(u.selectorText)&&r.push(u)}if(r.length!==0)return r.reduce(function(f,l){return g=l,((m=(h=f).style.getPropertyPriority(t))!==g.style.getPropertyPriority(t)?m==="important"?1:-1:Zt(h.selectorText,g.selectorText))===1?f:l;var h,g,m}).style.getPropertyValue(t)||void 0},i}(),Me=function(){function i(){this.measureMethods={}}return i.prototype.getTextOffset=function(e,t){var r=t.textAnchor;if(r==="start")return 0;var n=this.measureTextWidth(e,t),a=0;switch(r){case"end":a=n;break;case"middle":a=n/2}return a},i.prototype.measureTextWidth=function(e,t){if(e.length===0)return 0;var r=t.fontFamily;return this.getMeasureFunction(r).call(this,e,t.fontFamily,t.fontSize+"px",t.fontStyle,t.fontWeight)},i.prototype.getMeasurementTextNode=function(){if(!this.textMeasuringTextElement){this.textMeasuringTextElement=document.createElementNS("http://www.w3.org/2000/svg","text");var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.appendChild(this.textMeasuringTextElement),e.style.setProperty("position","absolute"),e.style.setProperty("visibility","hidden"),document.body.appendChild(e)}return this.textMeasuringTextElement},i.prototype.canvasTextMeasure=function(e,t,r,n,a){var s=document.createElement("canvas").getContext("2d");return s!=null?(s.font=[n,a,r,t].join(" "),s.measureText(e).width):0},i.prototype.svgTextMeasure=function(e,t,r,n,a,s){s===void 0&&(s=this.getMeasurementTextNode());var o=s;return o.setAttribute("font-family",t),o.setAttribute("font-size",r),o.setAttribute("font-style",n),o.setAttribute("font-weight",a),o.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),o.textContent=e,o.getBBox().width},i.prototype.getMeasureFunction=function(e){var t=this.measureMethods[e];if(!t){var r=this.canvasTextMeasure(i.testString,e,"16px","normal","normal"),n=this.svgTextMeasure(i.testString,e,"16px","normal","normal");t=Math.abs(r-n)<i.epsilon?this.canvasTextMeasure:this.svgTextMeasure,this.measureMethods[e]=t}return t},i.prototype.cleanupTextMeasuring=function(){if(this.textMeasuringTextElement){var e=this.textMeasuringTextElement.parentNode;e&&document.body.removeChild(e),this.textMeasuringTextElement=void 0}},i.testString=`abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789!"$%&/()=?'\\+*-_.:,;^}][{#~|<>`,i.epsilon=.1,i}();function Te(i,e,t){var r,n,a;return t===void 0&&(t={}),S(this,void 0,void 0,function(){var s,o,u,f,l,h,g,m,y,d,b;return w(this,function(p){switch(p.label){case 0:return s=(r=t.x)!==null&&r!==void 0?r:0,o=(n=t.y)!==null&&n!==void 0?n:0,u=(a=t.loadExternalStyleSheets)!==null&&a!==void 0&&a,l=new Ot(f={}),[4,(h=new ke(i,u)).load()];case 1:return p.sent(),g=new ot(e.internal.pageSize.getWidth(),e.internal.pageSize.getHeight()),m=pt(pt({},t),{element:i}),y=new Me,d=new Y(e,{refsHandler:l,styleSheets:h,viewport:g,svg2pdfParameters:m,textMeasure:y}),e.advancedAPI(),e.saveGraphicsState(),e.setCurrentTransformationMatrix(e.Matrix(1,0,0,1,s,o)),e.setLineWidth(d.attributeState.strokeWidth),b=d.attributeState.fill.color,e.setFillColor(b.r,b.g,b.b),e.setFont(d.attributeState.fontFamily),e.setFontSize(d.attributeState.fontSize*e.internal.scaleFactor),[4,St(i,f).render(d)];case 2:return p.sent(),e.restoreGraphicsState(),e.compatAPI(),d.textMeasure.cleanupTextMeasuring(),[2,e]}})})}Bt.API.svg=function(i,e){return e===void 0&&(e={}),Te(i,this,e)};export{Te as U};
