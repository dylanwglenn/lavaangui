import{d as vn,w as Ie,S as Z,i as J,s as X,c as ee,g as Y,o as we,e as z,a as C,b as _e,f as A,l as oe,n as se,h as O,r as Je,j as B,k as ae,m as T,p as x,q as Oe,t as be,u as Pe,v as Xe,x as G,y as U,z as Ke,A as Qe,B as et,C as S,D,E as q,F as ot,G as Be,H as Te,I as yn,J as st,K as at,L as ce,M as ve,N as ye,O as fe}from"./svelte-4598ef91.js";import{c as j}from"./cytoscape-86e840ae.js";import{g as wn}from"./cytoscape-grid-guide-eb2f2e88.js";import{e as kn}from"./cytoscape-edgehandles-455db19b.js";import{v as on}from"./uuid-a960c1f4.js";import{J as wt}from"./jszip-133f2485.js";import{s as Cn}from"./cytoscape-svg-5a8e6db6.js";import{F as ut}from"./file-saver-05fab67f.js";import{E as En}from"./jspdf-a7c15206.js";import{U as Sn}from"./svg2pdf.js-d0866cf6.js";import{d as Ln}from"./cytoscape-dagre-a4f19369.js";import{f as Mn}from"./cytoscape-fcose-2999cda1.js";import{c as Dn}from"./cytoscape-cola-af60e250.js";import{c as An}from"./cytoscape-context-menus-cfc05c35.js";import{i as On}from"./@jaames-324f80d4.js";import{p as Fn}from"./cytoscape-panzoom-81d89c13.js";import{u as Nn}from"./cytoscape-undo-redo-eac3a982.js";import{a as In}from"./cytoscape-automove-085c6bfa.js";import{K as sn}from"./konva-bc9c0e16.js";import{n as xn}from"./cytoscape-node-editing-170df28d.js";import{e as Tn}from"./cytoscape-edge-editing-b8b574b0.js";import"./core-js-bbf708ea.js";import"./lodash-6eb5ace2.js";import"./heap-8ffeb77a.js";import"./functional-red-black-tree-9a31655a.js";import"./lodash.memoize-ae7939c9.js";import"./lodash.throttle-e32db46a.js";import"./dagre-9b2543cb.js";import"./graphlib-a6487d85.js";import"./@babel-75df473a.js";import"./fflate-8981c52c.js";import"./cssesc-5de85916.js";import"./font-family-papandreou-066b018a.js";import"./svgpath-76644159.js";import"./specificity-c7128631.js";import"./cose-base-3e61f9ec.js";import"./layout-base-45dab9bc.js";import"./webcola-fe958753.js";import"./jquery-793df3aa.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function o(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(i){if(i.ep)return;i.ep=!0;const s=o(i);fetch(i.href,s)}})();const Q=Ie(null),ln=Ie(null),ze=Ie(null);let te=Ie({meanStruc:"default",intOvFree:!0,intLvFree:!1,estimator:"default",se:"default",missing:"listwise",n_boot:1e3,fix_first:!0,fix_single:!0,auto_var:!0,auto_cov_lv_x:!0,auto_cov_y:!0,fixed_x:!0,mode:"user model"}),ue=Ie({gridShow:!1,gridSpace:26,gridColor:"#dedede",gridWidth:1,gridMovePan:!1,gridSnap:!1,gridAlign:!0,gridResize:!1,showLav:!0,showVar:!0,showMean:!0,std:!1,view:"est",ci:.95,number_digits:2}),Ae=Ie({lastFitModel:null,lastFitLavFit:null,lastFitData:null}),W=Ie({fitting:!1,loadingMode:!1,runCounter:0,modelEmpty:!0,dataAvail:!1,columnNames:null,loadedFileName:null,ids:null,dragged:null,draggedName:null,drawing:!1,full:!0,ready:!1,parsedModel:!1,meansModelled:null,buttonDown:!1,showServerErrors:!0,everEdge:!1}),mt=Ie(0);vn(W,n=>n.columnNames);const rn=Ie({type:"info",message:"",key:0});function he(n,e){rn.update(o=>({type:n,message:e,key:o.key+1}))}he("info","Greetings");function Pn(n,e,o){let t;ee(n,ue,r=>o(1,t=r));let i=!1;wn(j);let s=Y(Q);var l={snapToGridOnRelease:!1,drawGrid:!1,snapToAlignmentLocationDuringDrag:!1,distributionGuidelines:!0,geometricGuideline:!0,initPosAlignment:!1,centerToEdgeAlignment:!1,resize:!1,parentPadding:!1,guidelinesStackOrder:4,guidelinesTolerance:2,guidelinesStyle:{strokeStyle:"#8b7d6b",geometricGuidelineRange:2e3,range:100,minDistRange:10,distGuidelineOffset:10,horizontalDistColor:"#ff0000",verticalDistColor:"#00ff00",initPosAlignmentColor:"#0000ff",lineDash:[0,0],horizontalDistLine:[0,0],verticalDistLine:[0,0],initPosAlignmentLine:[0,0]},parentSpacing:-1};return we(()=>{s.gridGuide(l),o(0,i=!0)}),n.$$.update=()=>{n.$$.dirty&3&&i&&t.gridShow!==void 0&&Y(Q).gridGuide({drawGrid:t.gridShow}),n.$$.dirty&3&&i&&t.gridSpace!==void 0&&Y(Q).gridGuide({gridSpacing:t.gridSpace}),n.$$.dirty&3&&i&&t.gridWidth!==void 0&&Y(Q).gridGuide({lineWidth:t.gridWidth}),n.$$.dirty&3&&i&&t.gridMovePan!==void 0&&Y(Q).gridGuide({panGrid:t.gridMovePan}),n.$$.dirty&3&&i&&t.gridSnap!==void 0&&Y(Q).gridGuide({snapToGridDuringDrag:t.gridSnap}),n.$$.dirty&3&&i&&t.gridAlign!==void 0&&Y(Q).gridGuide({snapToAlignmentLocationOnRelease:t.gridAlign}),n.$$.dirty&3&&i&&t.gridResize!==void 0&&Y(Q).gridGuide({resize:t.gridResize})},[i,t]}class Vn extends Z{constructor(e){super(),J(this,e,Pn,null,X,{})}}const de="observed-variable",me="latent-variable",Se="constant",ke="free",We="nolabel",ge="fromUser",Ve="label",xe="byLav",Ce="fixed",Me="forcefree",Fe="directed",Ne="undirected",lt="loop",Re="linked",De="fromLav",kt="hasEst",dt="validated",Ze="continous",Ye="ordered",zn="hasEstFixed",je=80,Rn=80,an=[{selector:"element",style:{"font-size":function(n){return n.data("font-size")||14}}},{selector:"node",style:{width:je.toString(),height:"80","background-color":function(n){return n.data("background-color")||"white"},"border-color":function(n){return n.data("border-color")||"grey"},"border-width":function(n){return n.data("border-width")||"2px"},label:"data(label)","text-valign":"center","text-halign":"center"}},{selector:`node.${de}`,style:{shape:"rectangle"}},{selector:`node.${de}.${Ye}`,style:{"border-style":"double","border-width":5}},{selector:`node.${me}`,style:{shape:"ellipse","border-color":"black"}},{selector:`node.${Se}`,style:{shape:"triangle",label:"1","text-valign":"center","text-margin-y":"10px","border-color":"black"}},{selector:`node.${Re}`,style:{"border-color":"black"}},{selector:"edge",style:{width:function(n){return n.data("width")||3},"line-color":function(n){return n.data("line-color")||"#000"},"target-arrow-color":function(n){return n.data("target-arrow-color")||"#000"},"source-arrow-color":function(n){return n.data("source-arrow-color")||"#000"},"target-arrow-shape":"triangle","curve-style":"bezier","text-valign":"center","text-halign":"center","text-wrap":"wrap","text-max-width":Rn,"z-index":10,color:"#000","text-outline-color":"#fff","text-outline-width":"2px","text-background-color":"#fff","text-background-opacity":1,"text-background-padding":"4px"}},{selector:"edge.loop",style:{"curve-style":"bezier","source-arrow-shape":"triangle","loop-direction":function(n){return n.data("loop-direction")||0},"loop-sweep":.8,"control-point-step-size":n=>{const e=n.source(),o=parseInt(e.style("height")),t=parseInt(e.style("width"));let i;return n.style("loop-direction")=="0deg"||n.style("loop-direction")=="180deg"?i=o:n.style("loop-direction")=="90deg"||n.style("loop-direction")=="270deg"?i=t:i=Math.max(t,o),i/80*60}}},{selector:`edge.${Ne}`,style:{"curve-style":"unbundled-bezier","control-point-distances":[-100],"control-point-weights":[.5],"source-arrow-shape":"triangle"}},{selector:`edge.${Ne}.${De}`,style:{"control-point-distances":[100]}},{selector:`edge.${Ve}, edge.${Ve}`,style:{label:function(n){return n.data("label")}}},{selector:`edge.${Ce}.${Ve}`,style:{label:function(n){return n.data("label")+"@"+n.data("value")}}},{selector:`edge.${Ce}.${We}`,style:{label:function(n){return"@"+n.data("value")}}},{selector:`edge.${Me}`,style:{"line-color":"blue"}},{selector:`edge.${De}, edge.${xe}`,style:{"line-style":"dashed"}},{selector:"edge:selected",style:{"underlay-opacity":.5,"underlay-color":"#928ff8"}},{selector:"node:selected",style:{"underlay-color":"#928ff8","underlay-opacity":.5}}],He={autoungrabify:!1,autolock:!1,style:an,minZoom:.2,maxZoom:5},Bn={preview:!1,hoverDelay:150,handleNodes:"node",snap:!0,handleColor:"#ff0000",handleSize:10,canConnect:function(n,e){return!cy.edges(function(t){if(!t.isUserAdded())return!1;const i=t.source().id()==n.id()&&t.target().id()==e.id(),s=t.source().id()==e.id()&&t.target().id()==n.id();return i||s}).length}},Gn={undoable:!0,bendRemovalSensitivity:16,enableMultipleAnchorRemovalOption:!0,initAnchorsAutomatically:!1,useTrailingDividersAfterContextMenuOptions:!1,enableCreateAnchorOnDrag:!0,anchorShapeSizeFactor:4};function Un(n){j.use(kn);var e=j(He);return e.boxSelectionEnabled(!0),Q.set(e),ln.set(e.edgehandles(Bn)),[]}class qn extends Z{constructor(e){super(),J(this,e,Un,null,X,{})}}function re(n){var e=Y(W);if(!e.full)return;let o=Y(Q);const t=o.edges();for(var i=0;i<t.length;i++)t[i].removeEstimates();if(o.getUserEdges().length==0){o.getLavaanNodes().remove(),o.getLavaanEdges().remove();return}if(!e.dataAvail&&n=="estimate"){he("danger","Model not send to lavaan because no data available");return}let s=un(n);Shiny.setInputValue("run-fromJavascript",JSON.stringify(s)),Shiny.setInputValue("runCounter",Math.random()),n==="user model"&&o.getLavaanModifiedEdges().forEach(l=>{l.freePara()})}function jn(n,e){for(let o=0;o<n.length;o++)if(n[o]===e)return!0;return!1}function it(n,e){let o;n==null?o="1":o=n.getLabel();let t=!1,i;if(e.isFixed()&&!e.isModifiedLavaan()?(i=e.getValue()+"*"+o,t=!0):e.isForceFree()&&(i="NA*"+o,t=!0),e.hasLabel()){const s=e.getLabel();t?i+=" + "+s+"*"+o:(t=!0,i=s+"*"+o)}else t||(i=o);return i}class Hn{constructor(e,o,t=null,i=null,s=null,l=null){this.mode=e,Object.assign(this,{model:{options:t,syntax:i,R_script:o,ordered_labels:l},forceUpdate:Math.random(),cache:s})}}function un(n){let e=Y(Q),o=Y(W),t="",i="";i+=`library(lavaan)
`,o.dataAvail?i+=`data <- read.csv("${o.loadedFileName}")
`:i+=`#make sure your data is loaded into the 'data' variable
`;const s=e.getLatentNodes();let l=!1;for(let m=0;m<s.length;m++){const k=s[m];let M="";const E=k.connectedEdges(function(y){return y.isDirected()&&y.source().id()==k.id()&&y.target().isObserved()});if(E.length>0){l||(t+=`# measurement model
`,l=!0);const y=Math.max(...E.map($=>$.target().position().x))-Math.min(...E.map($=>$.target().position().x)),H=Math.max(...E.map($=>$.target().position().y))-Math.min(...E.map($=>$.target().position().y)),R=y>=H?"x":"y",b=E.map(($,V)=>({index:V,value:$.target().position()[R]})).sort(($,V)=>$.value-V.value).map($=>$.index);for(let $=0;$<E.length;$++){const V=E[b[$]].target();$>0&&(M+=" + "),M+=it(V,E[b[$]])}t+=" "+k.getLabel()+" =~ "+M+`
`}else k.connectedEdges(function(y){return y.isUserAdded()}).length>0&&(l||(t+=`# measurement model
`,l=!0),t+=" "+k.getLabel()+` =~ 0
`)}function r(m){return m.isDirected()&&!m.source().isConstant()&&!(m.source().isLatent()&&m.target().isObserved())&&(m.isUserAdded()||m.isModifiedLavaan())}let u=e.edges(r),d=[];for(let m=0;m<u.length;m++)jn(d,u[m].target())||d.push(u[m].target());if(d.length>0){t+=`
# regressions`;for(let m=0;m<d.length;m++){const k=d[m],M=k.connectedEdges(E=>r(E)&&E.target().same(k));if(M.length>0){let E="";for(var a=0;a<M.length;a++){var f=M[a].source();a>0&&(E+=" + "),E+=it(f,M[a])}t+=`
 `+k.getLabel()+" ~ "+E}}}let g=e.edges(function(m){return(m.isUndirected()||m.myIsLoop())&&(m.isUserAdded()||m.isModifiedLavaan())});if(g.length>0){t+=`

# residual (co)variances`;for(let m=0;m<g.length;m++){let k=g[m].source().data("label");t+=`
 `+k+" ~~ "+it(g[m].target(),g[m])}}const c=e.nodes(function(m){return m.isConstant()});for(let m=0;m<c.length;m++){const M=c[m].connectedEdges(function(E){return E.isUserAdded()});if(M.length>0){t+=`
# intercepts
`;for(var a=0;a<M.length;a++){var f=M[a].target();t+=f.getLabel()+" ~ "+it(void 0,M[a])+`
`}}}t=`'
`+t+`'

`;function p(m,k=60){return m.split(`
`).map(M=>{if(M.includes("+")&&M.length>k){const E=M.split(" + ");let y=[],H=E[0];const R=M.match(/^\s*/)[0],b=H.indexOf("~")+1;for(let $=1;$<E.length;$++)H.length+E[$].length+3>k?(y.push(H+" + "),H=R+" ".repeat(b)+E[$]):H+=" + "+E[$];return y.push(H),y.join(`
`)}return M}).join(`
`)}t=p(t);const _=e.nodes(function(m){return m.isOrdered()}).map(m=>m.getLabel()),v=Wn(_);return i+="model <-"+t,i+="result <- lavaan(model, data, "+v,new Hn(n,i,v,t=t,Y(Ae),_)}function Wn(n){const e=Y(te),o=Le(e.meanStruc),t=Le(e.intOvFree),i=Le(e.intLvFree);let s=`meanstructure = ${o},
		 int.ov.free = ${t}, int.lv.free = ${i},
		 estimator = ${ct(e.estimator)}, se = ${ct(e.se)},
		 missing = ${ct(e.missing)}, auto.fix.first = ${Le(e.fix_first)},
		 auto.fix.single = ${Le(e.fix_single)}, auto.var = ${Le(e.auto_var)},
		 auto.cov.lv.x = ${Le(e.auto_cov_lv_x)}, auto.cov.y = ${Le(e.auto_cov_y)},
  		 fixed.x = ${Le(e.fixed_x)}`;if(e.se=="boot"){const l=`, bootstrap = ${e.n_boot})`;s=s+l}else s=s+")";return n.length>0&&(s=`ordered = ${'c("'+n.join('", "')+'")'}, ${s}`),s}function ct(n){return'"'+n+'"'}function Le(n){if(n==!0||n=="true")return"TRUE";if(n==!1||n=="false")return"FALSE";if(n=="default")return'"default"';throw new Error("Should not happen")}let dn,cn;function fn(){dn=1,cn=1}fn();function pe(n,e,o=!0,t=null){let i=Y(Q),s=on(),l;if(t!==null){if(i.nodes().find(u=>u.data().label===t)){he("danger","Node with the same label already exists.");return}l=t}else n==de?l="x"+dn++:n==me?l="f"+cn++:l=void 0,i.nodes().find(u=>u.data().label===l)&&(l=l+".1");let r=Y(ze);return e?r.do("add",{group:"nodes",data:{id:s,label:l},classes:[n,Ze],renderedPosition:e}):(e={x:Math.random()*400+50,y:Math.random()*400+50},i.add({group:"nodes",data:{id:s,label:l},classes:[n,Ze],renderedPosition:e})),o&&re(Y(te).mode),s}function qe(n,e,o=!0,t=!1,i=null,s=!0){let l=Y(Q),r=on();return l.add({group:"edges",data:{id:r,source:n,target:e,value:t?i:void 0},classes:`${o?Fe:Ne} ${s?ge:De} ${t?Ce:ke} ${We}`})}function $e(n){const e=Qn(n);if(e!=null){const o=Zn(n),t=Jn(o);let i=Kn(t);i=Yn(i,t),e.data("loop-direction",`${i}deg`)}}function Yn(n,e){const o=[0,180,90,270],t=35,i=o.sort((r,u)=>{const d=Math.min(Math.abs(r-n),360-Math.abs(r-n)),a=Math.min(Math.abs(u-n),360-Math.abs(u-n));return d-a}),l=[[0,180],[90,270]].flatMap(r=>i.filter(u=>r.includes(u)));for(const r of l)if(!e.some(d=>{const a=Math.abs(r-d);return Math.min(a,360-a)<=t}))return r;return n}function Zn(n){const e=cy.getElementById(n);if(e.length===0){console.error(`Node with ID ${n} does not exist.`);return}let o=[];return e.connectedEdges().forEach(t=>{const i=t.source(),s=t.target();let l;(i.id()!==e.id()||s.id()!==e.id())&&(i.id()===e.id()?l=Ct(t.sourceEndpoint(),e.position()):l=Ct(t.targetEndpoint(),e.position()),o.push(l))}),o}function Ct(n,e){return Object.keys(n).reduce((o,t)=>{if(e.hasOwnProperty(t))o[t]=n[t]-e[t];else throw new Error(`Key ${t} not found in second object`);return o},{})}function Jn(n){let e=[];return n.forEach(o=>{e.push(Xn(o))}),e}function Xn(n){let e=Math.atan2(n.y,n.x)*180/Math.PI;return e=(e+90)%360,e}function Kn(n){let e=-1,o=null;for(let t=0;t<=360;t++){let i=1/0;for(let s=0;s<n.length;s++){let l=Math.abs(n[s]-t);l=Math.min(l,360-l),i=Math.min(i,l)}i>e&&(e=i,o=t)}return o}function Qn(n,e){var o=cy.getElementById(n),t=null;return o.connectedEdges().forEach(function(i){var s=i.source(),l=i.target();if(s.id()===n&&l.id()===n){t=i;return}}),t!==null&&o.connectedEdges().length>1&&!t.hasClass("fixDeg")?t:null}function ei(n){let e,o,t;return{c(){e=z("div"),C(e,"id","cy"),C(e,"class","graph svelte-11pj9ut"),_e(e,"flex-basis",n[1].full?"70%":"100%")},m(i,s){A(i,e,s),n[6](e),o||(t=[oe(e,"mouseover",n[2]),oe(e,"mouseout",n[3]),oe(e,"mousemove",n[4]),oe(e,"drop",n[5]),oe(e,"dragover",ti)],o=!0)},p(i,[s]){s&2&&_e(e,"flex-basis",i[1].full?"70%":"100%")},i:se,o:se,d(i){i&&O(e),n[6](null),o=!1,Je(t)}}}function ti(n){n.preventDefault()}function ni(n,e){let o=Math.atan2(n,-e)*(180/Math.PI);return o<0&&(o+=360),o}function ii(n,e,o){let t,i,s;ee(n,ze,y=>o(13,t=y)),ee(n,W,y=>o(1,i=y)),ee(n,te,y=>o(14,s=y));let l=Y(Q),r=Y(ln),u,d={x:0,y:0},a;we(()=>{l.mount(u)});function f(y){if(B(W,i.buttonDown=!0,i),(y.key==="Alt"||y.key===" ")&&(r.enableDrawMode(),a=!1,B(W,i.drawing=!0,i),y.key==="Alt"&&(a=!0)),y.key==="Backspace"){let H=l.$(":selected");H.length>0&&(t.do("remove",H),re(s.mode)),B(W,i.buttonDown=!1,i)}if(["l","o","c"].includes(y.key.toLowerCase())){let H;switch(y.key.toLowerCase()){case"l":H=me;break;case"o":H=de;break;case"c":H=Se;break}pe(H,{...d}),B(W,i.buttonDown=!1,i)}B(W,i.buttonDown=!1,i)}function g(){l.autoungrabify(!1),l.nodes().grabify()}function c(){B(W,i.drawing=!1,i),g(),(event.key==="Alt"||event.key===" ")&&r.disableDrawMode()}function p(){document.addEventListener("keydown",f),document.addEventListener("keyup",c)}function h(){document.removeEventListener("keydown",f,!1),document.removeEventListener("keyup",c,!1),r.disableDrawMode()}function _(y){d.x=y.offsetX,d.y=y.offsetY}l.on("ehcomplete",(y,H,R,b)=>{const $=b,V=H.id(),ie=R.id();$.remove(),$.init(),V!==ie?(a?$.setUndirected():$.setDirected(),$e(V),$e(ie)):($.makeLoop(),$e(ie)),!(($.isUndirected()||$.myIsLoop())&&(H.isConstant()||R.isConstant()))&&($.isDirected()&&R.isConstant()||$.isDirected()&&H.isConstant()&&R.connectedEdges(w=>w.isUserAdded()&&w.source().isConstant()).length>1||($.isDirected()&&H.isConstant()?$.makeMeanEdge():$.makeOtherEdge(),t.do("add",$),re(s.mode)))});function v(y){let H=0;const R=100,b=R*2;y.preventDefault();let $={x:y.offsetX,y:y.offsetY};function V(w,N){let I;if(i.dataAvail){const K=l.getObservedNodes().map(ne=>ne.data().label);I=i.columnNames.filter(ne=>!K.includes(ne)).map(ne=>({text:ne,value:ne}))}else I=Array.from({length:100},(K,P)=>`var${P+1}`);const le={title:w,inputType:"select",multiple:!0,value:"",inputOptions:I,callback:N};bootbox.prompt(le)}function ie(){he("danger","Either no variable selected or at least one selected variable already is in the model.")}function F(w){return w&&!l.nodes().some(N=>N.data().label===w)}if(i.dragged=="observed-with-name")pe(de,$,!0,i.draggedName);else if(i.dragged=="multiple")V("Select Variables",function(w){if(F(w)){const N=l.zoom();w.forEach(I=>{pe(de,{x:$.x+H*N,y:$.y},!0,I),H+=R})}else ie()});else if(i.dragged=="factor")V("Select Variables",function(w){if(F(w)){const N=l.zoom(),I=pe(me,{x:$.x+R*N*w.length/2-je/2*N,y:$.y});w.forEach(le=>{const K=pe(de,{x:$.x+H*N,y:$.y+N*b},!0,le);H+=R,qe(I,K)}),B(te,s.fix_first=!0,s),B(te,s.fix_single=!0,s),B(te,s.auto_var=!0,s),B(te,s.intOvFree=!0,s),B(te,s.intLvFree=!1,s)}else ie()});else if(i.dragged=="growth"){let w=0;V("Select Time Points",function(N){if(F(N)){const I=l.zoom(),le=pe(Se,{x:$.x+R*I*N.length/2-je/2*I,y:$.y},!0),K=pe(me,{x:$.x+je/2*I,y:$.y+1*b*I},!0,"Intercept"),P=pe(me,{x:$.x+R*I*(N.length-1)-je/2*I,y:$.y+1*b*I},!0,"Slope");qe(le,K,!0,!1),qe(le,P,!0,!1);let ne=1;N.forEach(nt=>{const Ue=pe(de,{x:$.x+w*I,y:$.y+2*b*I},!0,nt);w+=R,qe(K,Ue,!0,!0,1),ne!=1&&qe(P,Ue,!0,!0,ne-1),ne+=1}),B(te,s.auto_var=!0,s),B(te,s.intOvFree=!1,s),B(te,s.intLvFree=!0,s)}})}else pe(i.dragged,$);(i.dragged=="multiple"||i.dragged=="factor"||i.dragged=="growth")&&re(s.mode),B(W,i.dragged=null,i)}let L=!1,m=null,k;l.on("mousedown","edge.loop",function(y){L=!0,m=y.target,m.unpanify(),k=m.style("loop-direction")});let M;l.on("mousemove",function(y){if(!L||!m)return;let R=m.source().renderedPosition();M=ni(d.x-R.x,d.y-R.y);const b=5,$=[0,90,180,270];for(let V=0;V<$.length;V++)if(Math.abs(M-$[V])<=b){M=$[V];break}m.data("loop-direction",`${M}deg`)}),window.addEventListener("mouseup",function(){if(L){if(L=!1,M===void 0||k===`${M}deg`)return;m.data("loop-direction",k),m.addClass("fixDeg"),t.do("style",{eles:m,style:{"loop-direction":`${M}deg`}}),m=null}});function E(y){ae[y?"unshift":"push"](()=>{u=y,o(0,u)})}return[u,i,p,h,_,v,E]}class oi extends Z{constructor(e){super(),J(this,e,ii,ei,X,{})}}function si(n,e,o){let t,i;ee(n,W,u=>o(2,t=u)),ee(n,te,u=>o(3,i=u));let s=Y(Q);s.on("add","node",function(u){const d=u.target;if(d.isObserved()){let a=t.columnNames;a&&a.includes(d.getLabel())&&(d.link(),he("success",`Variable ${d.getLabel()} linked to data`))}t.modelEmpty&&s.edges().length>0&&B(W,t.modelEmpty=!1,t)}),s.on("remove","node",function(u){s.getUserEdges().length==0&&(B(W,t.modelEmpty=!0,t),Shiny.setInputValue("show_help",Math.random())),t.loadingMode||re(i.mode)}),s.on("remove","edge",function(u){$e(u.target.source().id()),$e(u.target.target().id())}),s.on("add","edge",function(u){B(W,t.everEdge=!0,t),t.modelEmpty&&s.edges().length>0&&B(W,t.modelEmpty=!1,t),$e(u.target.source().id()),$e(u.target.target().id())}),s.on("position","node",function(u){u.target.neighborhood().nodes().forEach(f=>{const g=f.id();$e(g)})});let l=null,r=!1;return s.on("mousedown",function(u){const d=p=>parseFloat(p.replace("px","")),a=u.position;let f=null,g=1/0;const c=30;s.edges().forEach(function(p){if(p.isDirected()){const h=d(p.style("text-margin-x")),_=d(p.style("text-margin-y")),v=p.midpoint(),L={x:v.x+h,y:v.y+_},m=Math.abs(a.x-L.x),k=a.y-L.y,M=Math.sqrt(m*m+k*k);M<g&&M<c&&(f=p,g=M)}}),f!==null&&(l=f,r=!0,u.preventDefault(),f.unpanify())}),s.on("mousemove",function(u){if(r&&l){const d=u.position,a=l.midpoint(),f=l.source().position(),g=l.target().position(),c={x:g.x-f.x,y:g.y-f.y},p=Math.sqrt(c.x**2+c.y**2),h={x:c.x/p,y:c.y/p},_={x:d.x-a.x,y:d.y-a.y};let v=_.x*h.x+_.y*h.y;const L=(g.y-a.y)/h.y-70,m=(f.y-a.y)/h.y+70;let k=Math.min(L,v);k=Math.max(m,k);const M=k*h.x,E=k*h.y;l.style({"text-margin-x":M,"text-margin-y":E})}}),s.on("mouseup",function(u){r=!1,l=null}),[]}class li extends Z{constructor(e){super(),J(this,e,si,null,X,{})}}function Et(n,e,o){const t=n.slice();return t[19]=e[o],t}function St(n){let e,o,t,i,s,l,r,u,d,a,f,g,c,p,h=n[1],_=[];for(let v=0;v<h.length;v+=1)_[v]=Lt(Et(n,h,v));return{c(){e=z("div"),o=T(),t=z("div"),i=z("button"),i.textContent="Multiple Variables",s=T(),l=z("button"),l.textContent="Factor",r=T(),u=z("button"),u.textContent="Growth",d=T(),a=z("div"),f=T(),g=z("ul");for(let v=0;v<_.length;v+=1)_[v].c();C(e,"class","vertical-bar svelte-1ecko2"),C(i,"class","draggable-item svelte-1ecko2"),C(i,"draggable","true"),C(l,"class","draggable-item svelte-1ecko2"),C(l,"draggable","true"),C(u,"class","draggable-item svelte-1ecko2"),C(u,"draggable","true"),C(t,"id","model-buttons"),C(t,"class","svelte-1ecko2"),C(a,"class","vertical-bar svelte-1ecko2"),C(g,"class","draggable-list svelte-1ecko2")},m(v,L){A(v,e,L),A(v,o,L),A(v,t,L),x(t,i),x(t,s),x(t,l),x(t,r),x(t,u),A(v,d,L),A(v,a,L),A(v,f,L),A(v,g,L);for(let m=0;m<_.length;m+=1)_[m]&&_[m].m(g,null);c||(p=[oe(i,"dragstart",n[13]),oe(l,"dragstart",n[14]),oe(u,"dragstart",n[15])],c=!0)},p(v,L){if(L&10){h=v[1];let m;for(m=0;m<h.length;m+=1){const k=Et(v,h,m);_[m]?_[m].p(k,L):(_[m]=Lt(k),_[m].c(),_[m].m(g,null))}for(;m<_.length;m+=1)_[m].d(1);_.length=h.length}},d(v){v&&O(e),v&&O(o),v&&O(t),v&&O(d),v&&O(a),v&&O(f),v&&O(g),Oe(_,v),c=!1,Je(p)}}}function Lt(n){let e,o=n[19]+"",t,i,s,l;function r(...u){return n[16](n[19],...u)}return{c(){e=z("li"),t=be(o),i=T(),C(e,"draggable","true"),C(e,"class","draggable-item svelte-1ecko2")},m(u,d){A(u,e,d),x(e,t),x(e,i),s||(l=oe(e,"dragstart",r),s=!0)},p(u,d){n=u,d&2&&o!==(o=n[19]+"")&&Pe(t,o)},d(u){u&&O(e),s=!1,l()}}}function ri(n){let e,o,t,i,s,l,r,u,d,a,f,g,c,p,h,_=n[0].dataAvail&&St(n);return{c(){e=z("div"),o=z("div"),t=z("div"),i=z("button"),i.textContent="➔",s=T(),l=z("button"),l.textContent="↔",r=T(),u=z("div"),d=T(),a=z("div"),f=T(),g=z("div"),c=T(),_&&_.c(),C(i,"id","directed-arrow"),C(i,"class","arrow-btn svelte-1ecko2"),C(i,"title","Directed Arrow"),C(l,"id","undirected-arrow"),C(l,"class","arrow-btn svelte-1ecko2"),C(l,"title","Undirected Arrow"),C(u,"role","button"),C(u,"id","add-manifest-variable"),C(u,"title","Create Observed Variable"),C(u,"draggable","true"),C(u,"class","variable-button svelte-1ecko2"),C(u,"data-button-type",de),C(u,"tabindex","0"),C(a,"role","button"),C(a,"tabindex","0"),C(a,"id","add-latent-variable"),C(a,"title","Create Latent Variable"),C(a,"draggable","true"),C(a,"class","variable-button svelte-1ecko2"),C(a,"data-button-type",me),C(g,"role","button"),C(g,"tabindex","0"),C(g,"id","add-constant-variable"),C(g,"class","variable-button svelte-1ecko2"),C(g,"title","Create Constant Variable"),C(g,"data-button-type","const"),C(g,"draggable","true"),C(t,"id","buttons"),C(t,"class","svelte-1ecko2"),C(o,"id","buttonCont"),C(o,"class","svelte-1ecko2"),C(e,"class","toolbox svelte-1ecko2")},m(v,L){A(v,e,L),x(e,o),x(o,t),x(t,i),x(t,s),x(t,l),x(t,r),x(t,u),x(t,d),x(t,a),x(t,f),x(t,g),x(e,c),_&&_.m(e,null),p||(h=[oe(i,"click",n[8]),oe(l,"click",n[9]),oe(u,"dragstart",n[10]),oe(a,"dragstart",n[11]),oe(g,"dragstart",n[12])],p=!0)},p(v,[L]){v[0].dataAvail?_?_.p(v,L):(_=St(v),_.c(),_.m(e,null)):_&&(_.d(1),_=null)},i:se,o:se,d(v){v&&O(e),_&&_.d(),p=!1,Je(h)}}}function Mt(n){n==="directed"?bootbox.alert("Connect two nodes with a directed edge by dragging from one to another while holding the SPACE key."):n==="undirected"?bootbox.alert("Connect two nodes with an undirected edge by dragging from one to another while holding the ALT or OPTION key."):bootbox.alert("Error: Unknown edge type.")}function ai(n,e,o){let t,i;ee(n,W,k=>o(0,t=k)),ee(n,Q,k=>o(7,i=k)),W.subscribe(k=>{});function s(k){B(W,t.dragged=k,t)}function l(k,M){B(W,t.dragged="observed-with-name",t),B(W,t.draggedName=M,t)}function r(k){B(W,t.dragged="multiple",t)}function u(k){B(W,t.dragged="factor",t)}function d(k){B(W,t.dragged="growth",t)}let a;const f=()=>{Mt("directed")},g=()=>{Mt("undirected")},c=()=>{event.dataTransfer.setData("text/plain","node"),s(de)},p=()=>{s(me)},h=()=>{s(Se)},_=k=>r(),v=k=>u(),L=k=>d(),m=(k,M)=>l(M,k);return n.$$.update=()=>{if(n.$$.dirty&129&&typeof i.getObservedNodes=="function"&&t.columnNames!==null){const k=i.getObservedNodes().map(M=>M.data("label"));o(1,a=t.columnNames.filter(M=>!k.includes(M)))}},[t,a,s,l,r,u,d,i,f,g,c,p,h,_,v,L,m]}class ui extends Z{constructor(e){super(),J(this,e,ai,ri,X,{})}}function di(n){let e,o,t,i,s;const l=n[1].default,r=Xe(l,n,n[0],null);return i=new ui({}),{c(){e=z("nav"),o=z("ul"),r&&r.c(),t=T(),G(i.$$.fragment),C(o,"class","nav navbar-nav navbar-left"),C(e,"class","navbar navbar-default navbar-static-top navbar-left svelte-12n5yi9")},m(u,d){A(u,e,d),x(e,o),r&&r.m(o,null),x(e,t),U(i,e,null),s=!0},p(u,[d]){r&&r.p&&(!s||d&1)&&Ke(r,l,u,u[0],s?et(l,u[0],d,null):Qe(u[0]),null)},i(u){s||(S(r,u),S(i.$$.fragment,u),s=!0)},o(u){D(r,u),D(i.$$.fragment,u),s=!1},d(u){u&&O(e),r&&r.d(u),q(i)}}}function ci(n,e,o){let{$$slots:t={},$$scope:i}=e;return n.$$set=s=>{"$$scope"in s&&o(0,i=s.$$scope)},[i,t]}class fi extends Z{constructor(e){super(),J(this,e,ci,di,X,{})}}function gt(n,e){if(n==null)throw new Error("Columnnames may not be null.");const t=Y(Q).nodes(function(s){return s.isObserved()});if(t.length>0)for(var i=0;i<t.length;i++){const s=t[i],l=s.getLabel();n.includes(l)&&!s.isLinked()?s.link():!n.includes(l)&&s.isLinked()&&s.unlink()}}function mi(n){let e,o,t,i,s,l,r;const u=n[3].default,d=Xe(u,n,n[2],null);return{c(){e=z("li"),o=z("a"),t=be(n[0]),i=z("span"),s=T(),l=z("ul"),d&&d.c(),C(i,"class","caret"),C(o,"href","#"),C(o,"class","dropdown-toggle svelte-1oq006n"),C(o,"data-toggle","dropdown"),C(o,"role","button"),C(o,"aria-haspopup","true"),C(o,"aria-expanded","false"),C(o,"draggable","false"),ot(o,"minimal",n[1]),C(l,"class","dropdown-menu"),C(e,"class","dropdown")},m(a,f){A(a,e,f),x(e,o),x(o,t),x(o,i),x(e,s),x(e,l),d&&d.m(l,null),r=!0},p(a,[f]){(!r||f&1)&&Pe(t,a[0]),(!r||f&2)&&ot(o,"minimal",a[1]),d&&d.p&&(!r||f&4)&&Ke(d,u,a,a[2],r?et(u,a[2],f,null):Qe(a[2]),null)},i(a){r||(S(d,a),r=!0)},o(a){D(d,a),r=!1},d(a){a&&O(e),d&&d.d(a)}}}function gi(n,e,o){let{$$slots:t={},$$scope:i}=e,{name:s}=e,{minimal:l=!1}=e;return n.$$set=r=>{"name"in r&&o(0,s=r.name),"minimal"in r&&o(1,l=r.minimal),"$$scope"in r&&o(2,i=r.$$scope)},[s,l,i,t]}class Ge extends Z{constructor(e){super(),J(this,e,gi,mi,X,{name:0,minimal:1})}}function Dt(n,e,o){const t=n.slice();return t[4]=e[o],t}function At(n){let e;return{c(){e=z("li"),C(e,"class","divider")},m(o,t){A(o,e,t)},d(o){o&&O(e)}}}function Ot(n){let e,o,t=n[4].name+"",i,s,l,r,u;function d(...f){return n[3](n[4],...f)}let a=n[4].divider&&At();return{c(){e=z("li"),o=z("a"),i=be(t),s=T(),a&&a.c(),l=Be(),C(o,"href","#"),ot(e,"disabled",n[4].disable)},m(f,g){A(f,e,g),x(e,o),x(o,i),A(f,s,g),a&&a.m(f,g),A(f,l,g),r||(u=oe(o,"click",d),r=!0)},p(f,g){n=f,g&1&&t!==(t=n[4].name+"")&&Pe(i,t),g&1&&ot(e,"disabled",n[4].disable),n[4].divider?a||(a=At(),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null)},d(f){f&&O(e),f&&O(s),a&&a.d(f),f&&O(l),r=!1,u()}}}function pi(n){let e,o=n[0],t=[];for(let i=0;i<o.length;i+=1)t[i]=Ot(Dt(n,o,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=Be()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);A(i,e,s)},p(i,s){if(s&1){o=i[0];let l;for(l=0;l<o.length;l+=1){const r=Dt(i,o,l);t[l]?t[l].p(r,s):(t[l]=Ot(r),t[l].c(),t[l].m(e.parentNode,e))}for(;l<t.length;l+=1)t[l].d(1);t.length=o.length}},d(i){Oe(t,i),i&&O(e)}}}function hi(n){let e,o;return e=new Ge({props:{minimal:n[2],name:n[1],$$slots:{default:[pi]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},p(t,[i]){const s={};i&4&&(s.minimal=t[2]),i&2&&(s.name=t[1]),i&129&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(S(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}function bi(n,e){e.disable||e.action(n)}function _i(n,e,o){let{menuItems:t}=e,{name:i}=e,{minimal:s=!1}=e;const l=(r,u)=>bi(u,r);return n.$$set=r=>{"menuItems"in r&&o(0,t=r.menuItems),"name"in r&&o(1,i=r.name),"minimal"in r&&o(2,s=r.minimal)},[t,i,s,l]}class ht extends Z{constructor(e){super(),J(this,e,_i,hi,X,{menuItems:0,name:1,minimal:2})}}function $i(n){let e,o;return e=new ht({props:{name:"File",menuItems:n[1],minimal:!n[0]}}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},p(t,[i]){const s={};i&2&&(s.menuItems=t[1]),i&1&&(s.minimal=!t[0]),e.$set(s)},i(t){o||(S(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}function Ft(n,e){for(let o in e)e.hasOwnProperty(o)&&e[o]!==void 0&&(n[o]=e[o])}function vi(){document.getElementById("dataUpload-fileInput").click()}function Nt(){const n=new Date;return`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}_${String(n.getHours()).padStart(2,"0")}-${String(n.getMinutes()).padStart(2,"0")}-${String(n.getSeconds()).padStart(2,"0")}`}async function yi(){Shiny.setInputValue("down-requestData",Math.random())}function wi(n,e,o){let t,i,s,l,r;ee(n,W,b=>o(2,t=b)),ee(n,mt,b=>o(3,i=b)),ee(n,Ae,b=>o(4,s=b)),ee(n,te,b=>o(5,l=b)),ee(n,ue,b=>o(6,r=b));let{full:u=!0}=e;j.use(Cn);function d(){t.modelEmpty?a():bootbox.confirm("Are you sure you want to create a new model? This will delete the current model.",function(b){b&&a()})}function a(){Y(Q).elements().remove(),fn(),B(W,t.parsedModel=!1,t),B(te,l.fix_first=!0,l),B(te,l.mode="user model",l),Shiny.setInputValue("show_help",Math.random());for(let $ in s)B(Ae,s[$]=null,s)}function f(b,$){ut.saveAs(b,"model."+$)}function g(b){a();let $=JSON.parse(b),V=Y(Q),ie;ie=JSON.parse($.model);const F=JSON.parse($.modelOpt),w=JSON.parse($.gridViewOpt);if(Ft(l,F),Ft(r,w),$.fitCache!=null){const N=JSON.parse($.fitCache);B(Ae,s=N,s)}B(W,t.loadingMode=!0,t),V.json({elements:ie}),V.style(an),V.edgeEditing(Gn),V.style().update(),V.minZoom(He.minZoom),V.maxZoom(He.maxZoom),V.autolock(He.autolock),V.autoungrabify(He.autoungrabify),V.nodeEditing({resizeToContentCueImage:"",undoable:!0}),V.nodes().forEach(N=>{console.log(N.data("width")),N.style({width:N.data("width")}),N.style({height:N.data("height")})}),t.dataAvail&&gt(t.columnNames),l.mode!=="user model"?B(ue,r.showLav=!0,r):B(ue,r.showLav=!1,r),V.nodes().forEach(N=>{$e(N.id())}),B(W,t.loadingMode=!1,t)}async function c(){const b=document.createElement("input");b.setAttribute("type","file"),b.setAttribute("accept",".lvm");const $=await new Promise(ie=>{b.addEventListener("change",F=>ie(F.target.files[0])),b.click()}),V=await new Promise(ie=>{const F=new FileReader;F.readAsText($,"UTF-8"),F.onload=()=>ie(F.result)});g(V)}function p(){t.modelEmpty?c():bootbox.confirm("Are you sure you want to load a model? This will delete the current model.",function(b){b&&c()})}function h(){t.modelEmpty?_():bootbox.confirm("Are you sure you want to load a model? This will delete the current model.",function(b){b&&_()})}function _(){const b=document.createElement("input");b.setAttribute("type","file"),b.setAttribute("accept",".lvd"),b.addEventListener("change",function($){const V=$.target.files[0],ie=new FileReader;ie.readAsArrayBuffer(V),ie.onload=function(){const F=ie.result;wt.loadAsync(F).then(function(w){w.file("data.csv").async("base64").then(function(N){Shiny.setInputValue("dataUpload-fileInput",{content:N});const I=setInterval(()=>{t.dataAvail&&(clearInterval(I),w.file("model.lvm").async("text").then(function(le){g(le)}))},100)})})}}),b.click()}function v(){const b=Y(Q);j(),b.nodes().forEach(I=>{I.data("width",I.width()),I.data("height",I.height())});let $=b.json().elements;$.nodes.forEach(I=>{I.classes=I.classes.split(" ").filter(le=>le!==Re).join(" ")});const V=JSON.stringify($),ie=JSON.stringify(l),F=JSON.stringify(l),w=JSON.stringify(s);return JSON.stringify({model:V,modelOpt:ie,gridViewOpt:F,fitCache:w})}function L(){const b=v();let $=new Blob([b],{type:"application/json;charset=utf-8"});ut.saveAs($,"model_"+Nt()+".lvm")}Shiny.addCustomMessageHandler("dataForDownload",function(b){(async()=>{const $=v(),V=new wt;debugger;V.file("model.lvm",$),V.file("data.csv",b);const ie=await V.generateAsync({type:"blob"}),F=new File([ie],"model_"+Nt()+".lvd",{type:"application/zip"});ut.saveAs(F)})()});function m(){const b=Y(Q);B(W,t.dataAvail=!1,t),B(W,t.columnNames=null,t),B(W,t.loadedFileName=null,t),B(W,t.ids=null,t),B(mt,i=null,i),b.nodes().unlink(),Shiny.setInputValue("dataUpload-deleteData",Math.random())}function k(){const b=Y(Q);f(b.png({bg:"white"}),"png")}function M(){const b=Y(Q);f(b.jpg(),"jpg")}function E(){return Y(Q).svg({scale:1,full:!0})}function y(){const b=E(),$=new Blob([b],{type:"image/svg+xml;charset=utf-8"});f($,"svg")}async function H(){const b=E(),V=new DOMParser().parseFromString(b,"image/svg+xml").documentElement;V.style.position="absolute",V.style.left="-9999px",document.body.appendChild(V);const ie=V.getBoundingClientRect();document.body.removeChild(V);const F=ie.width,w=ie.height,N=new En({orientation:F>w?"landscape":"portrait",unit:"pt",format:[F,w]});await Sn(V,N,{width:F,height:w}),N.save("model.pdf")}let R;return n.$$set=b=>{"full"in b&&o(0,u=b.full)},n.$$.update=()=>{if(n.$$.dirty&5){let b=[{name:"New Model",action:d},{name:"Load Model",action:p},{name:"Load Data",action:vi},{name:"Load Model and Data",action:h},{name:"Download Model",action:L,disable:t.modelEmpty},{name:"Remove Data",action:m,disable:!t.dataAvail},{name:"Download Model and Data",disable:t.modelEmpty||!t.dataAvail,action:yi,divider:!0},{name:"Export Diagram to PNG",disable:t.modelEmpty,action:k},{name:"Export Diagram to JPG",disable:t.modelEmpty,action:M},{name:"Export Diagram to SVG",disable:t.modelEmpty,action:y},{name:"Export Diagram to PDF",disable:t.modelEmpty,action:H}];u?o(1,R=b):o(1,R=b.filter($=>["Download Model","Load Model"].includes($.name)||b.indexOf($)>=b.length-4))}},[u,R,t]}class mn extends Z{constructor(e){super(),J(this,e,wi,$i,X,{full:0})}}function ki(n){let e;return{c(){e=z("span"),C(e,"class","glyphicon glyphicon-ok check-mark invisible"),C(e,"aria-hidden","true")},m(o,t){A(o,e,t)},d(o){o&&O(e)}}}function Ci(n){let e;return{c(){e=z("span"),C(e,"class","glyphicon glyphicon-ok check-mark"),C(e,"aria-hidden","true")},m(o,t){A(o,e,t)},d(o){o&&O(e)}}}function Ei(n){let e,o,t,i,s,l,r,u,d;function a(c,p){return c[0]?Ci:ki}let f=a(n),g=f(n);return{c(){e=z("li"),o=z("label"),t=z("input"),i=T(),g.c(),s=T(),l=be(n[1]),C(t,"type","checkbox"),C(t,"class","check-box svelte-17cge7g"),t.disabled=n[2],C(o,"class",r=Te(n[2]?"disabled-label":"")+" svelte-17cge7g"),C(e,"class","svelte-17cge7g")},m(c,p){A(c,e,p),x(e,o),x(o,t),t.checked=n[0],x(o,i),g.m(o,null),x(o,s),x(o,l),u||(d=oe(t,"change",n[3]),u=!0)},p(c,[p]){p&4&&(t.disabled=c[2]),p&1&&(t.checked=c[0]),f!==(f=a(c))&&(g.d(1),g=f(c),g&&(g.c(),g.m(o,s))),p&2&&Pe(l,c[1]),p&4&&r!==(r=Te(c[2]?"disabled-label":"")+" svelte-17cge7g")&&C(o,"class",r)},i:se,o:se,d(c){c&&O(e),g.d(),u=!1,d()}}}function Si(n,e,o){let{name:t}=e,{checked:i}=e,{disable:s=!1}=e;function l(){i=this.checked,o(0,i)}return n.$$set=r=>{"name"in r&&o(1,t=r.name),"checked"in r&&o(0,i=r.checked),"disable"in r&&o(2,s=r.disable)},[i,t,s,l]}class Ee extends Z{constructor(e){super(),J(this,e,Si,Ei,X,{name:1,checked:0,disable:2})}}function Li(n){let e;return{c(){e=z("span"),C(e,"class","glyphicon glyphicon-ok check-mark invisible"),C(e,"aria-hidden","true")},m(o,t){A(o,e,t)},d(o){o&&O(e)}}}function Mi(n){let e;return{c(){e=z("span"),C(e,"class","glyphicon glyphicon-ok check-mark"),C(e,"aria-hidden","true")},m(o,t){A(o,e,t)},d(o){o&&O(e)}}}function Di(n){let e,o,t,i=!1,s,l,r,u,d,a,f,g;function c(_,v){return _[0]===_[2]?Mi:Li}let p=c(n),h=p(n);return a=yn(n[5][0]),{c(){e=z("div"),o=z("label"),t=z("input"),s=T(),h.c(),l=T(),r=be(n[1]),C(t,"type","radio"),C(t,"name","meanStruc"),t.__value=n[2],t.value=t.__value,t.disabled=n[3],C(t,"class","svelte-lbhkwe"),C(o,"class",u=Te(n[3]?"text-muted":"")+" svelte-lbhkwe"),C(e,"class",d=Te(n[3]?"radio disabled":"radio")+" svelte-lbhkwe"),a.p(t)},m(_,v){A(_,e,v),x(e,o),x(o,t),t.checked=t.__value===n[0],x(o,s),h.m(o,null),x(o,l),x(o,r),f||(g=oe(t,"change",n[4]),f=!0)},p(_,[v]){v&4&&(t.__value=_[2],t.value=t.__value,i=!0),v&8&&(t.disabled=_[3]),(i||v&1)&&(t.checked=t.__value===_[0]),p!==(p=c(_))&&(h.d(1),h=p(_),h&&(h.c(),h.m(o,l))),v&2&&Pe(r,_[1]),v&8&&u!==(u=Te(_[3]?"text-muted":"")+" svelte-lbhkwe")&&C(o,"class",u),v&8&&d!==(d=Te(_[3]?"radio disabled":"radio")+" svelte-lbhkwe")&&C(e,"class",d)},i:se,o:se,d(_){_&&O(e),h.d(),a.r(),f=!1,g()}}}function Ai(n,e,o){let{name:t}=e,{value:i}=e,{group:s}=e,{isDisabled:l=!1}=e;const r=[[]];function u(){s=this.__value,o(0,s)}return n.$$set=d=>{"name"in d&&o(1,t=d.name),"value"in d&&o(2,i=d.value),"group"in d&&o(0,s=d.group),"isDisabled"in d&&o(3,l=d.isDisabled)},[s,t,i,l,u,r]}class tt extends Z{constructor(e){super(),J(this,e,Ai,Di,X,{name:1,value:2,group:0,isDisabled:3})}}const It=[{name:"Arrows Created by Lavaan",modelSlot:"showLav"},{name:"Variance Arrows",modelSlot:"showVar"},{name:"Mean Arrows",modelSlot:"showMean"}];let xt=[{name:"Estimate",value:"est"},{name:"Confidence Interval",value:"ci"},{name:"Estimate + p-value (stars)",value:"estPVal"},{name:"Estimate + Standard Error",value:"estSE"}];function Oi(n,e,o){const t=Y(Q),i=e?"_std":"",s=gn(n,i,o);t.style().selector("edge.hasEst").style({label:s}).update();const l=Ii(n,i,o);t.style().selector("edge.hasEst.label").style({label:l}).update();const r=xi(n,i,o);t.style().selector("edge.hasEstFixed").style({label:r}).update()}function Fi(n,e,o,t){function i(a){return a.reduce((f,g,c)=>(g&&f.push(c),f),[])}const s=Y(Q),l=[e,n,o],r=i(l),u=i(l.map(a=>!a));function d(a,f){return[c=>c.isLavaanAdded(),c=>c.isLoop(),c=>c.isMean()][a](f)}for(let a of r)s.elements(function(f){return d(a,f)}).show();for(let a of u)s.elements(function(f){return d(a,f)}).hide()}function Ni(n){return n===null?"NA":n<.001?"***":n<.01?"**":n<.05?"*":""}function gn(n,e,o){const t=i=>i===null?"NA":i.toFixed(o);switch(n){case"est":return i=>t(i.data("estimates")["est"+e]);case"ci":return i=>`[${t(i.data("estimates")["ciLow"+e])}, ${t(i.data("estimates")["ciHigh"+e])}]`;case"estPVal":return i=>`${t(i.data("estimates")["est"+e])}${Ni(i.data("estimates").p_value)}`;case"estSE":return i=>`${t(i.data("estimates")["est"+e])} (${t(i.data("estimates")["se"+e])})`;default:return()=>"NA"}}function Ii(n,e,o){const t=gn(n,e,o);return i=>`${i.data("label")} = ${t(i)}`}function xi(n,e,o){const t=i=>i===null?"NA":i.toFixed(o);return i=>"@"+t(i.data("estimates")["estFixed"+e])}function Ti(n){let e,o,t,i,s,l;return{c(){e=z("li"),o=be(n[1]),t=T(),i=z("input"),_e(i,"width","4em"),C(i,"type","number"),C(i,"min",n[2]),_e(e,"padding-left","28px")},m(r,u){A(r,e,u),x(e,o),x(e,t),x(e,i),st(i,n[0]),s||(l=oe(i,"input",n[3]),s=!0)},p(r,[u]){u&2&&Pe(o,r[1]),u&4&&C(i,"min",r[2]),u&1&&at(i.value)!==r[0]&&st(i,r[0])},i:se,o:se,d(r){r&&O(e),s=!1,l()}}}function Pi(n,e,o){let{name:t}=e,{value:i}=e,{min:s}=e;function l(){i=at(this.value),o(0,i)}return n.$$set=r=>{"name"in r&&o(1,t=r.name),"value"in r&&o(0,i=r.value),"min"in r&&o(2,s=r.min)},[i,t,s,l]}class rt extends Z{constructor(e){super(),J(this,e,Pi,Ti,X,{name:1,value:0,min:2})}}function Tt(n,e,o){const t=n.slice();return t[9]=e[o],t}function Pt(n,e,o){const t=n.slice();return t[9]=e[o],t[12]=e,t[13]=o,t}function Vt(n){let e,o,t,i;function s(u){n[3](u,n[9])}function l(u){n[4](u,n[9])}let r={disable:!1};return n[9].name!==void 0&&(r.name=n[9].name),n[1][n[9].modelSlot]!==void 0&&(r.checked=n[1][n[9].modelSlot]),e=new Ee({props:r}),ae.push(()=>ce(e,"name",s)),ae.push(()=>ce(e,"checked",l)),{c(){G(e.$$.fragment)},m(u,d){U(e,u,d),i=!0},p(u,d){n=u;const a={};!o&&d&4&&(o=!0,a.name=n[9].name,fe(()=>o=!1)),!t&&d&6&&(t=!0,a.checked=n[1][n[9].modelSlot],fe(()=>t=!1)),e.$set(a)},i(u){i||(S(e.$$.fragment,u),i=!0)},o(u){D(e.$$.fragment,u),i=!1},d(u){q(e,u)}}}function zt(n){let e,o,t;function i(l){n[6](l)}let s={name:n[9].name,value:n[9].value};return n[1].view!==void 0&&(s.group=n[1].view),e=new tt({props:s}),ae.push(()=>ce(e,"group",i)),{c(){G(e.$$.fragment)},m(l,r){U(e,l,r),t=!0},p(l,r){const u={};!o&&r&2&&(o=!0,u.group=l[1].view,fe(()=>o=!1)),e.$set(u)},i(l){t||(S(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){q(e,l)}}}function Vi(n){let e,o,t,i,s,l,r,u,d,a,f,g,c,p,h,_,v,L,m,k,M=n[2],E=[];for(let w=0;w<M.length;w+=1)E[w]=Vt(Pt(n,M,w));const y=w=>D(E[w],1,1,()=>{E[w]=null});function H(w){n[5](w)}let R={name:"Standardized Estimates",disable:!1};n[1].std!==void 0&&(R.checked=n[1].std),i=new Ee({props:R}),ae.push(()=>ce(i,"checked",H));let b=xt,$=[];for(let w=0;w<b.length;w+=1)$[w]=zt(Tt(n,b,w));const V=w=>D($[w],1,1,()=>{$[w]=null});function ie(w){n[8](w)}let F={name:"Number Digits",min:0};return n[1].number_digits!==void 0&&(F.value=n[1].number_digits),_=new rt({props:F}),ae.push(()=>ce(_,"value",ie)),{c(){for(let w=0;w<E.length;w+=1)E[w].c();e=T(),o=z("li"),t=T(),G(i.$$.fragment),l=T(),r=z("li"),u=T();for(let w=0;w<$.length;w+=1)$[w].c();d=T(),a=z("li"),f=T(),g=z("li"),c=be(`Confidence Level
    `),p=z("input"),h=T(),G(_.$$.fragment),C(o,"class","divider"),C(r,"class","divider"),C(a,"class","divider"),C(p,"type","number"),C(p,"min","0"),C(p,"max","0.999999"),C(p,"step","0.01"),_e(p,"width","4em"),_e(g,"padding-left","28px")},m(w,N){for(let I=0;I<E.length;I+=1)E[I]&&E[I].m(w,N);A(w,e,N),A(w,o,N),A(w,t,N),U(i,w,N),A(w,l,N),A(w,r,N),A(w,u,N);for(let I=0;I<$.length;I+=1)$[I]&&$[I].m(w,N);A(w,d,N),A(w,a,N),A(w,f,N),A(w,g,N),x(g,c),x(g,p),st(p,n[1].ci),A(w,h,N),U(_,w,N),L=!0,m||(k=oe(p,"input",n[7]),m=!0)},p(w,N){if(N&6){M=w[2];let K;for(K=0;K<M.length;K+=1){const P=Pt(w,M,K);E[K]?(E[K].p(P,N),S(E[K],1)):(E[K]=Vt(P),E[K].c(),S(E[K],1),E[K].m(e.parentNode,e))}for(ve(),K=M.length;K<E.length;K+=1)y(K);ye()}const I={};if(!s&&N&2&&(s=!0,I.checked=w[1].std,fe(()=>s=!1)),i.$set(I),N&2){b=xt;let K;for(K=0;K<b.length;K+=1){const P=Tt(w,b,K);$[K]?($[K].p(P,N),S($[K],1)):($[K]=zt(P),$[K].c(),S($[K],1),$[K].m(d.parentNode,d))}for(ve(),K=b.length;K<$.length;K+=1)V(K);ye()}N&2&&at(p.value)!==w[1].ci&&st(p,w[1].ci);const le={};!v&&N&2&&(v=!0,le.value=w[1].number_digits,fe(()=>v=!1)),_.$set(le)},i(w){if(!L){for(let N=0;N<M.length;N+=1)S(E[N]);S(i.$$.fragment,w);for(let N=0;N<b.length;N+=1)S($[N]);S(_.$$.fragment,w),L=!0}},o(w){E=E.filter(Boolean);for(let N=0;N<E.length;N+=1)D(E[N]);D(i.$$.fragment,w),$=$.filter(Boolean);for(let N=0;N<$.length;N+=1)D($[N]);D(_.$$.fragment,w),L=!1},d(w){Oe(E,w),w&&O(e),w&&O(o),w&&O(t),q(i,w),w&&O(l),w&&O(r),w&&O(u),Oe($,w),w&&O(d),w&&O(a),w&&O(f),w&&O(g),w&&O(h),q(_,w),m=!1,k()}}}function zi(n){let e,o;return e=new Ge({props:{name:"View",minimal:n[0],$$slots:{default:[Vi]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},p(t,[i]){const s={};i&1&&(s.minimal=t[0]),i&16390&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(S(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}function Ri(n,e,o){let t;ee(n,ue,f=>o(1,t=f));let{minimal:i=!1}=e;function s(f,g){n.$$.not_equal(g.name,f)&&(g.name=f,o(2,It))}function l(f,g){n.$$.not_equal(t[g.modelSlot],f)&&(t[g.modelSlot]=f,ue.set(t))}function r(f){n.$$.not_equal(t.std,f)&&(t.std=f,ue.set(t))}function u(f){n.$$.not_equal(t.view,f)&&(t.view=f,ue.set(t))}function d(){t.ci=at(this.value),ue.set(t)}function a(f){n.$$.not_equal(t.number_digits,f)&&(t.number_digits=f,ue.set(t))}return n.$$set=f=>{"minimal"in f&&o(0,i=f.minimal)},n.$$.update=()=>{n.$$.dirty&2&&Shiny.setInputValue("ests-confindence_level",t.ci)},[i,t,It,s,l,r,u,d,a]}class pn extends Z{constructor(e){super(),J(this,e,Ri,zi,X,{minimal:0})}}function Rt(n,e,o){const t=n.slice();return t[8]=e[o],t}function Bt(n){let e,o,t;function i(l){n[3](l)}let s={name:n[8].name,value:n[8].value};return n[0].meanStruc!==void 0&&(s.group=n[0].meanStruc),e=new tt({props:s}),ae.push(()=>ce(e,"group",i)),{c(){G(e.$$.fragment)},m(l,r){U(e,l,r),t=!0},p(l,r){const u={};!o&&r&1&&(o=!0,u.group=l[0].meanStruc,fe(()=>o=!1)),e.$set(u)},i(l){t||(S(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){q(e,l)}}}function Bi(n){let e,o,t,i,s,l,r,u,d,a,f,g,c,p=n[2],h=[];for(let y=0;y<p.length;y+=1)h[y]=Bt(Rt(n,p,y));const _=y=>D(h[y],1,1,()=>{h[y]=null});function v(y){n[4](y)}function L(y){n[5](y)}let m={name:"Add Intercepts for all Observed Variables"};n[0].intOvFree!==void 0&&(m.checked=n[0].intOvFree),n[1]!==void 0&&(m.disable=n[1]),l=new Ee({props:m}),ae.push(()=>ce(l,"checked",v)),ae.push(()=>ce(l,"disable",L));function k(y){n[6](y)}function M(y){n[7](y)}let E={name:"Add Intercepts for all Latent Variables"};return n[0].intLvFree!==void 0&&(E.checked=n[0].intLvFree),n[1]!==void 0&&(E.disable=n[1]),a=new Ee({props:E}),ae.push(()=>ce(a,"checked",k)),ae.push(()=>ce(a,"disable",M)),{c(){e=z("li"),o=z("a"),o.textContent="Model Means?",t=T(),i=z("ul");for(let y=0;y<h.length;y+=1)h[y].c();s=T(),G(l.$$.fragment),d=T(),G(a.$$.fragment),C(o,"tabindex","-1"),C(o,"href","#"),C(o,"class","svelte-143y7r6"),C(i,"class","dropdown-menu svelte-143y7r6"),C(e,"class","dropdown-submenu svelte-143y7r6")},m(y,H){A(y,e,H),x(e,o),x(e,t),x(e,i);for(let R=0;R<h.length;R+=1)h[R]&&h[R].m(i,null);A(y,s,H),U(l,y,H),A(y,d,H),U(a,y,H),c=!0},p(y,H){if(H&5){p=y[2];let $;for($=0;$<p.length;$+=1){const V=Rt(y,p,$);h[$]?(h[$].p(V,H),S(h[$],1)):(h[$]=Bt(V),h[$].c(),S(h[$],1),h[$].m(i,null))}for(ve(),$=p.length;$<h.length;$+=1)_($);ye()}const R={};!r&&H&1&&(r=!0,R.checked=y[0].intOvFree,fe(()=>r=!1)),!u&&H&2&&(u=!0,R.disable=y[1],fe(()=>u=!1)),l.$set(R);const b={};!f&&H&1&&(f=!0,b.checked=y[0].intLvFree,fe(()=>f=!1)),!g&&H&2&&(g=!0,b.disable=y[1],fe(()=>g=!1)),a.$set(b)},i(y){if(!c){for(let H=0;H<p.length;H+=1)S(h[H]);S(l.$$.fragment,y),S(a.$$.fragment,y),c=!0}},o(y){h=h.filter(Boolean);for(let H=0;H<h.length;H+=1)D(h[H]);D(l.$$.fragment,y),D(a.$$.fragment,y),c=!1},d(y){y&&O(e),Oe(h,y),y&&O(s),q(l,y),y&&O(d),q(a,y)}}}function Gi(n){let e,o;return e=new Ge({props:{name:Ui,$$slots:{default:[Bi]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},p(t,[i]){const s={};i&2051&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(S(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}let Ui="Mean Options";function qi(n,e,o){let t,i;ee(n,te,f=>o(0,i=f));let s=[{name:"Automatic",value:"default"},{name:"Yes",value:"true"},{name:"No",value:"false"}];function l(f){n.$$.not_equal(i.meanStruc,f)&&(i.meanStruc=f,te.set(i))}function r(f){n.$$.not_equal(i.intOvFree,f)&&(i.intOvFree=f,te.set(i))}function u(f){t=f,o(1,t),o(0,i)}function d(f){n.$$.not_equal(i.intLvFree,f)&&(i.intLvFree=f,te.set(i))}function a(f){t=f,o(1,t),o(0,i)}return n.$$.update=()=>{n.$$.dirty&1&&o(1,t=i.meanStruc==="false")},[i,t,s,l,r,u,d,a]}class ji extends Z{constructor(e){super(),J(this,e,qi,Gi,X,{})}}function Gt(n,e,o){const t=n.slice();return t[9]=e[o],t}function Ut(n,e,o){const t=n.slice();return t[9]=e[o],t}function qt(n,e,o){const t=n.slice();return t[9]=e[o],t}function jt(n){let e,o,t;function i(l){n[4](l)}let s={name:n[9].name,value:n[9].value};return n[0].estimator!==void 0&&(s.group=n[0].estimator),e=new tt({props:s}),ae.push(()=>ce(e,"group",i)),{c(){G(e.$$.fragment)},m(l,r){U(e,l,r),t=!0},p(l,r){const u={};!o&&r&1&&(o=!0,u.group=l[0].estimator,fe(()=>o=!1)),e.$set(u)},i(l){t||(S(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){q(e,l)}}}function Ht(n){let e,o,t;function i(l){n[5](l)}let s={name:n[9].name,value:n[9].value};return n[0].se!==void 0&&(s.group=n[0].se),e=new tt({props:s}),ae.push(()=>ce(e,"group",i)),{c(){G(e.$$.fragment)},m(l,r){U(e,l,r),t=!0},p(l,r){const u={};!o&&r&1&&(o=!0,u.group=l[0].se,fe(()=>o=!1)),e.$set(u)},i(l){t||(S(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){q(e,l)}}}function Wt(n){let e,o,t;function i(l){n[7](l)}let s={name:n[9].name,value:n[9].value};return n[0].missing!==void 0&&(s.group=n[0].missing),e=new tt({props:s}),ae.push(()=>ce(e,"group",i)),{c(){G(e.$$.fragment)},m(l,r){U(e,l,r),t=!0},p(l,r){const u={};!o&&r&1&&(o=!0,u.group=l[0].missing,fe(()=>o=!1)),e.$set(u)},i(l){t||(S(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){q(e,l)}}}function Hi(n){let e,o,t,i,s,l,r,u,d,a,f,g,c,p,h,_,v,L,m=n[1],k=[];for(let F=0;F<m.length;F+=1)k[F]=jt(qt(n,m,F));const M=F=>D(k[F],1,1,()=>{k[F]=null});let E=n[2],y=[];for(let F=0;F<E.length;F+=1)y[F]=Ht(Ut(n,E,F));const H=F=>D(y[F],1,1,()=>{y[F]=null});function R(F){n[6](F)}let b={name:"Number of Bootstrap Samples:",min:5};n[0].n_boot!==void 0&&(b.value=n[0].n_boot),f=new rt({props:b}),ae.push(()=>ce(f,"value",R));let $=n[3],V=[];for(let F=0;F<$.length;F+=1)V[F]=Wt(Gt(n,$,F));const ie=F=>D(V[F],1,1,()=>{V[F]=null});return{c(){e=z("li"),o=z("a"),o.textContent="Estimator",t=T(),i=z("ul");for(let F=0;F<k.length;F+=1)k[F].c();s=T(),l=z("li"),r=z("a"),r.textContent="Standard Error",u=T(),d=z("ul");for(let F=0;F<y.length;F+=1)y[F].c();a=T(),G(f.$$.fragment),c=T(),p=z("li"),h=z("a"),h.textContent="Missing Values",_=T(),v=z("ul");for(let F=0;F<V.length;F+=1)V[F].c();C(o,"tabindex","-1"),C(o,"href","#"),C(o,"class","svelte-143y7r6"),C(i,"class","dropdown-menu svelte-143y7r6"),C(e,"class","dropdown-submenu svelte-143y7r6"),C(r,"tabindex","-1"),C(r,"href","#"),C(r,"class","svelte-143y7r6"),C(d,"class","dropdown-menu svelte-143y7r6"),C(l,"class","dropdown-submenu svelte-143y7r6"),C(h,"tabindex","-1"),C(h,"href","#"),C(h,"class","svelte-143y7r6"),C(v,"class","dropdown-menu svelte-143y7r6"),C(p,"class","dropdown-submenu svelte-143y7r6")},m(F,w){A(F,e,w),x(e,o),x(e,t),x(e,i);for(let N=0;N<k.length;N+=1)k[N]&&k[N].m(i,null);A(F,s,w),A(F,l,w),x(l,r),x(l,u),x(l,d);for(let N=0;N<y.length;N+=1)y[N]&&y[N].m(d,null);x(d,a),U(f,d,null),A(F,c,w),A(F,p,w),x(p,h),x(p,_),x(p,v);for(let N=0;N<V.length;N+=1)V[N]&&V[N].m(v,null);L=!0},p(F,w){if(w&3){m=F[1];let I;for(I=0;I<m.length;I+=1){const le=qt(F,m,I);k[I]?(k[I].p(le,w),S(k[I],1)):(k[I]=jt(le),k[I].c(),S(k[I],1),k[I].m(i,null))}for(ve(),I=m.length;I<k.length;I+=1)M(I);ye()}if(w&5){E=F[2];let I;for(I=0;I<E.length;I+=1){const le=Ut(F,E,I);y[I]?(y[I].p(le,w),S(y[I],1)):(y[I]=Ht(le),y[I].c(),S(y[I],1),y[I].m(d,a))}for(ve(),I=E.length;I<y.length;I+=1)H(I);ye()}const N={};if(!g&&w&1&&(g=!0,N.value=F[0].n_boot,fe(()=>g=!1)),f.$set(N),w&9){$=F[3];let I;for(I=0;I<$.length;I+=1){const le=Gt(F,$,I);V[I]?(V[I].p(le,w),S(V[I],1)):(V[I]=Wt(le),V[I].c(),S(V[I],1),V[I].m(v,null))}for(ve(),I=$.length;I<V.length;I+=1)ie(I);ye()}},i(F){if(!L){for(let w=0;w<m.length;w+=1)S(k[w]);for(let w=0;w<E.length;w+=1)S(y[w]);S(f.$$.fragment,F);for(let w=0;w<$.length;w+=1)S(V[w]);L=!0}},o(F){k=k.filter(Boolean);for(let w=0;w<k.length;w+=1)D(k[w]);y=y.filter(Boolean);for(let w=0;w<y.length;w+=1)D(y[w]);D(f.$$.fragment,F),V=V.filter(Boolean);for(let w=0;w<V.length;w+=1)D(V[w]);L=!1},d(F){F&&O(e),Oe(k,F),F&&O(s),F&&O(l),Oe(y,F),q(f),F&&O(c),F&&O(p),Oe(V,F)}}}function Wi(n){let e,o;return e=new Ge({props:{name:Yi,$$slots:{default:[Hi]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},p(t,[i]){const s={};i&65537&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(S(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}const Yi="Estimation";function Zi(n,e,o){let t;ee(n,te,f=>o(0,t=f));const i=[{value:"default",name:"Default"},{value:"ML",name:"Maximum Likelihood (ML)"},{value:"GLS",name:"Generalized Least Squares (GLS)"},{value:"WLS",name:"Weighted Least Squares (WLS)"},{value:"ULS",name:"Unweighted Least Squares (ULS)"},{value:"DLS",name:"Distributionally-weighted Least Squares (DLW)"}],s=[{value:"default",name:"Default"},{value:"robust",name:"Robust"},{value:"boot",name:"Bootstrap"}],l=[{value:"listwise",name:"Listwise"},{value:"ml",name:"Full Information Maximum Likelihood (FIML)"}];function r(f){n.$$.not_equal(t.estimator,f)&&(t.estimator=f,te.set(t))}function u(f){n.$$.not_equal(t.se,f)&&(t.se=f,te.set(t))}function d(f){n.$$.not_equal(t.n_boot,f)&&(t.n_boot=f,te.set(t))}function a(f){n.$$.not_equal(t.missing,f)&&(t.missing=f,te.set(t))}return[t,i,s,l,r,u,d,a]}class Ji extends Z{constructor(e){super(),J(this,e,Zi,Wi,X,{})}}let ft=0,hn=!1;function bn(){return typeof Shiny=="object"&&Shiny!==null}function Xi(n){const e=Object.keys(n),o=n[e[0]].length,t=[];for(let i=0;i<o;i++){const s={};for(const l of e)s[l]=n[l][i];t.push(s)}return t}function pt(n,e=!0){hn=e,ft=ft+1;let o=un(!0);o.name=n,o.counter=ft,bn()&&Shiny.setInputValue("layout-layout",JSON.stringify(o))}bn()&&Shiny.addCustomMessageHandler("semPlotLayout",function(n){n=Xi(n);const e=125,o=200;let t=1/0,i=1/0;for(let d=0;d<n.length;d++)for(let a=d+1;a<n.length;a++){const f=Math.abs(n[d].x-n[a].x),g=Math.abs(n[d].y-n[a].y);f<t&&n[d].y===n[a].y&&(t=f),g<i&&n[d].x===n[a].x&&(i=g)}const s=e/t,l=o/i;let r={};n.forEach(d=>{const a=d.x*s+400,f=d.y*-1*l+400;r[d.name]={x:a,y:f}});let u={name:"preset",positions:function(d){const a=d.data("label");return r[a]},fit:!0,padding:60,animate:!0};hn?Y(ze).do("layout",{options:u}):Y(Q).layout(u).run()});function Ki(n){let e,o;return e=new ht({props:{name:"Apply Layout",menuItems:n[1],minimal:n[0]}}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},p(t,[i]){const s={};i&2&&(s.menuItems=t[1]),i&1&&(s.minimal=t[0]),e.$set(s)},i(t){o||(S(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}function Qi(n,e,o){let t,i,s;ee(n,W,g=>o(2,i=g)),ee(n,ze,g=>o(3,s=g));let{minimal:l=!1}=e;Y(Q),we(()=>{j.use(Ln),j.use(Mn),j.use(Dn)});function r(){const g={name:"dagre",rankSep:150,animate:!0};s.do("layout",{options:g})}function u(){const g={name:"breadthfirst",animate:!0,spacingFactor:1};s.do("layout",{options:g})}function d(){const g={name:"circle",animate:!0};s.do("layout",{options:g})}function a(){const g={name:"fcose",animate:!0,idealEdgeLength:c=>150,quality:"proof",randomize:!1,nodeSeparation:200};s.do("layout",{options:g})}function f(){const g={name:"cola",animate:!0,nodeSpacing(c){return 50}};s.do("layout",{options:g})}return n.$$set=g=>{"minimal"in g&&o(0,l=g.minimal)},n.$$.update=()=>{n.$$.dirty&4&&o(1,t=[{name:"Recommended: Tree",action:()=>pt("tree"),disable:i.modelEmpty},{name:"Recommended: Tree2",action:()=>pt("tree2"),disable:i.modelEmpty},{name:"Experimental: Tree",action:r,disable:i.modelEmpty},{name:"Experimental: Tree2",action:u,disable:i.modelEmpty},{name:"Experimental: Circle",action:d,disable:i.modelEmpty},{name:"Experimental: Force-directed",action:a,disable:i.modelEmpty},{name:"Experimental: Cola",action:f,disable:i.modelEmpty}])},[l,t,i]}class _n extends Z{constructor(e){super(),J(this,e,Qi,Ki,X,{minimal:0})}}function Yt(n,e,o){const t=n.slice();return t[4]=e[o],t[5]=e,t[6]=o,t}function Zt(n){let e,o,t,i;function s(u){n[2](u,n[4])}function l(u){n[3](u,n[4])}let r={};return n[4].name!==void 0&&(r.name=n[4].name),n[1][n[4].modelProperty]!==void 0&&(r.checked=n[1][n[4].modelProperty]),e=new Ee({props:r}),ae.push(()=>ce(e,"name",s)),ae.push(()=>ce(e,"checked",l)),{c(){G(e.$$.fragment)},m(u,d){U(e,u,d),i=!0},p(u,d){n=u;const a={};!o&&d&1&&(o=!0,a.name=n[4].name,fe(()=>o=!1)),!t&&d&3&&(t=!0,a.checked=n[1][n[4].modelProperty],fe(()=>t=!1)),e.$set(a)},i(u){i||(S(e.$$.fragment,u),i=!0)},o(u){D(e.$$.fragment,u),i=!1},d(u){q(e,u)}}}function eo(n){let e,o,t=n[0],i=[];for(let l=0;l<t.length;l+=1)i[l]=Zt(Yt(n,t,l));const s=l=>D(i[l],1,1,()=>{i[l]=null});return{c(){for(let l=0;l<i.length;l+=1)i[l].c();e=Be()},m(l,r){for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(l,r);A(l,e,r),o=!0},p(l,r){if(r&3){t=l[0];let u;for(u=0;u<t.length;u+=1){const d=Yt(l,t,u);i[u]?(i[u].p(d,r),S(i[u],1)):(i[u]=Zt(d),i[u].c(),S(i[u],1),i[u].m(e.parentNode,e))}for(ve(),u=t.length;u<i.length;u+=1)s(u);ye()}},i(l){if(!o){for(let r=0;r<t.length;r+=1)S(i[r]);o=!0}},o(l){i=i.filter(Boolean);for(let r=0;r<i.length;r+=1)D(i[r]);o=!1},d(l){Oe(i,l),l&&O(e)}}}function to(n){let e,o;return e=new Ge({props:{name:no,$$slots:{default:[eo]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},p(t,[i]){const s={};i&131&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(S(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}const no="Automatically..";function io(n,e,o){let t;ee(n,te,r=>o(1,t=r));const i=[{name:"Fix Factor Loading of First Indicator at 1",modelProperty:"fix_first"},{name:"Include Variances",modelProperty:"auto_var"},{name:"Include Covariances of Exogenous Latent Variables",modelProperty:"auto_cov_lv_x"},{name:"Include Covariances of Dependent Variables",modelProperty:"auto_cov_y"},{name:"Fix Variance of Only Indicator to 0",modelProperty:"fix_single"},{name:"Treat Exogenous Observed Variables as Fixed Variables",modelProperty:"fixed_x"}];function s(r,u){n.$$.not_equal(u.name,r)&&(u.name=r,o(0,i))}function l(r,u){n.$$.not_equal(t[u.modelProperty],r)&&(t[u.modelProperty]=r,te.set(t))}return[i,t,s,l]}class oo extends Z{constructor(e){super(),J(this,e,io,to,X,{})}}function so(n){let e,o;return e=new ht({props:{name:"Help",menuItems:n[0]}}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},p:se,i(t){o||(S(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}function lo(){Shiny.setInputValue("show_help",Math.random())}function ro(){window.open("https://karchjd.github.io/docs.lavaangui/","_blank")}function ao(n){let e;const o=[{name:"Show Commands",action:lo},{name:"Open Manual",action:ro},{name:"About",action:t}];function t(){bootbox.alert({title:"About Lavaangui",message:`Version: ${e}<br> Autor: Julian D. Karch<br> Email: j.d.karch@fsw.leidenuniv.nl`})}return Shiny.addCustomMessageHandler("version",function(i){e=i[0].join(".")}),[o]}class uo extends Z{constructor(e){super(),J(this,e,ao,so,X,{})}}function co(n){let e,o,t,i,s,l,r,u,d,a,f,g,c,p,h,_,v,L,m,k,M;function E(P){n[2](P)}let y={name:"Show Grid"};n[1].gridShow!==void 0&&(y.checked=n[1].gridShow),e=new Ee({props:y}),ae.push(()=>ce(e,"checked",E));function H(P){n[3](P)}let R={name:"Snap to Grid"};n[1].gridSnap!==void 0&&(R.checked=n[1].gridSnap),i=new Ee({props:R}),ae.push(()=>ce(i,"checked",H));function b(P){n[4](P)}let $={name:"Resize to Grid"};n[1].gridResize!==void 0&&($.checked=n[1].gridResize),r=new Ee({props:$}),ae.push(()=>ce(r,"checked",b));function V(P){n[5](P)}let ie={name:"Snap to Alignment on Release"};n[1].gridAlign!==void 0&&(ie.checked=n[1].gridAlign),a=new Ee({props:ie}),ae.push(()=>ce(a,"checked",V));function F(P){n[6](P)}let w={name:"Move Grid on Pan"};n[1].gridMovePan!==void 0&&(w.checked=n[1].gridMovePan),c=new Ee({props:w}),ae.push(()=>ce(c,"checked",F));function N(P){n[7](P)}let I={name:"Grid Spacing:",min:5};n[1].gridSpace!==void 0&&(I.value=n[1].gridSpace),_=new rt({props:I}),ae.push(()=>ce(_,"value",N));function le(P){n[8](P)}let K={name:"Line Width:",min:0};return n[1].gridWidth!==void 0&&(K.value=n[1].gridWidth),m=new rt({props:K}),ae.push(()=>ce(m,"value",le)),{c(){G(e.$$.fragment),t=T(),G(i.$$.fragment),l=T(),G(r.$$.fragment),d=T(),G(a.$$.fragment),g=T(),G(c.$$.fragment),h=T(),G(_.$$.fragment),L=T(),G(m.$$.fragment)},m(P,ne){U(e,P,ne),A(P,t,ne),U(i,P,ne),A(P,l,ne),U(r,P,ne),A(P,d,ne),U(a,P,ne),A(P,g,ne),U(c,P,ne),A(P,h,ne),U(_,P,ne),A(P,L,ne),U(m,P,ne),M=!0},p(P,ne){const nt={};!o&&ne&2&&(o=!0,nt.checked=P[1].gridShow,fe(()=>o=!1)),e.$set(nt);const Ue={};!s&&ne&2&&(s=!0,Ue.checked=P[1].gridSnap,fe(()=>s=!1)),i.$set(Ue);const bt={};!u&&ne&2&&(u=!0,bt.checked=P[1].gridResize,fe(()=>u=!1)),r.$set(bt);const _t={};!f&&ne&2&&(f=!0,_t.checked=P[1].gridAlign,fe(()=>f=!1)),a.$set(_t);const $t={};!p&&ne&2&&(p=!0,$t.checked=P[1].gridMovePan,fe(()=>p=!1)),c.$set($t);const vt={};!v&&ne&2&&(v=!0,vt.value=P[1].gridSpace,fe(()=>v=!1)),_.$set(vt);const yt={};!k&&ne&2&&(k=!0,yt.value=P[1].gridWidth,fe(()=>k=!1)),m.$set(yt)},i(P){M||(S(e.$$.fragment,P),S(i.$$.fragment,P),S(r.$$.fragment,P),S(a.$$.fragment,P),S(c.$$.fragment,P),S(_.$$.fragment,P),S(m.$$.fragment,P),M=!0)},o(P){D(e.$$.fragment,P),D(i.$$.fragment,P),D(r.$$.fragment,P),D(a.$$.fragment,P),D(c.$$.fragment,P),D(_.$$.fragment,P),D(m.$$.fragment,P),M=!1},d(P){q(e,P),P&&O(t),q(i,P),P&&O(l),q(r,P),P&&O(d),q(a,P),P&&O(g),q(c,P),P&&O(h),q(_,P),P&&O(L),q(m,P)}}}function fo(n){let e,o;return e=new Ge({props:{minimal:n[0],name:"Grid Options",$$slots:{default:[co]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},p(t,[i]){const s={};i&1&&(s.minimal=t[0]),i&514&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(S(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}function mo(n,e,o){let t;ee(n,ue,g=>o(1,t=g));let{minimal:i=!1}=e;function s(g){n.$$.not_equal(t.gridShow,g)&&(t.gridShow=g,ue.set(t))}function l(g){n.$$.not_equal(t.gridSnap,g)&&(t.gridSnap=g,ue.set(t))}function r(g){n.$$.not_equal(t.gridResize,g)&&(t.gridResize=g,ue.set(t))}function u(g){n.$$.not_equal(t.gridAlign,g)&&(t.gridAlign=g,ue.set(t))}function d(g){n.$$.not_equal(t.gridMovePan,g)&&(t.gridMovePan=g,ue.set(t))}function a(g){n.$$.not_equal(t.gridSpace,g)&&(t.gridSpace=g,ue.set(t))}function f(g){n.$$.not_equal(t.gridWidth,g)&&(t.gridWidth=g,ue.set(t))}return n.$$set=g=>{"minimal"in g&&o(0,i=g.minimal)},[i,t,s,l,r,u,d,a,f]}class $n extends Z{constructor(e){super(),J(this,e,mo,fo,X,{minimal:0})}}function go(n){return window.$(document).ready(function(){var e=!1;window.$(".navbar .dropdown").hover(function(){e&&(window.$(".navbar .dropdown").removeClass("open"),window.$(this).addClass("open"))},function(){}),window.$(".navbar .dropdown").on("show.bs.dropdown",function(){e=!0}),window.$(".navbar .dropdown").on("hide.bs.dropdown",function(){window.$(".navbar .dropdown.open").length<=1&&(e=!1)})}),[]}class po extends Z{constructor(e){super(),J(this,e,go,null,X,{})}}function ho(n){let e,o,t,i,s,l,r,u,d,a,f,g,c,p,h,_,v,L;return e=new mn({}),t=new pn({}),s=new ji({}),r=new oo({}),d=new Ji({}),f=new _n({}),c=new $n({}),h=new uo({}),v=new po({}),{c(){G(e.$$.fragment),o=T(),G(t.$$.fragment),i=T(),G(s.$$.fragment),l=T(),G(r.$$.fragment),u=T(),G(d.$$.fragment),a=T(),G(f.$$.fragment),g=T(),G(c.$$.fragment),p=T(),G(h.$$.fragment),_=T(),G(v.$$.fragment)},m(m,k){U(e,m,k),A(m,o,k),U(t,m,k),A(m,i,k),U(s,m,k),A(m,l,k),U(r,m,k),A(m,u,k),U(d,m,k),A(m,a,k),U(f,m,k),A(m,g,k),U(c,m,k),A(m,p,k),U(h,m,k),A(m,_,k),U(v,m,k),L=!0},i(m){L||(S(e.$$.fragment,m),S(t.$$.fragment,m),S(s.$$.fragment,m),S(r.$$.fragment,m),S(d.$$.fragment,m),S(f.$$.fragment,m),S(c.$$.fragment,m),S(h.$$.fragment,m),S(v.$$.fragment,m),L=!0)},o(m){D(e.$$.fragment,m),D(t.$$.fragment,m),D(s.$$.fragment,m),D(r.$$.fragment,m),D(d.$$.fragment,m),D(f.$$.fragment,m),D(c.$$.fragment,m),D(h.$$.fragment,m),D(v.$$.fragment,m),L=!1},d(m){q(e,m),m&&O(o),q(t,m),m&&O(i),q(s,m),m&&O(l),q(r,m),m&&O(u),q(d,m),m&&O(a),q(f,m),m&&O(g),q(c,m),m&&O(p),q(h,m),m&&O(_),q(v,m)}}}function bo(n){let e,o;return e=new fi({props:{$$slots:{default:[ho]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},p(t,[i]){const s={};i&1&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(S(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}class _o extends Z{constructor(e){super(),J(this,e,null,bo,X,{})}}function $o(n){let e;return{c(){e=z("pre"),C(e,"id","res-results"),C(e,"class","shiny-html-output well svelte-74yvxb"),C(e,"data-testid","result-text")},m(o,t){A(o,e,t)},p:se,i:se,o:se,d(o){o&&O(e)}}}class vo extends Z{constructor(e){super(),J(this,e,null,$o,X,{})}}function yo(n){return window.cy=Y(Q),W.subscribe(e=>{window.appState=e}),te.subscribe(e=>{window.modelOptions=e}),mt.subscribe(e=>{window.dataInfo=e}),Ae.subscribe(e=>{window.fitCache=e}),ue.subscribe(e=>{window.gridViewOptions=e}),[]}class wo extends Z{constructor(e){super(),J(this,e,yo,null,X,{})}}function ko(n){return new RegExp("^[a-zA-Z\\._][a-zA-Z0-9\\._]*(?<!\\.)$").test(n)}function Jt(n){return n==""?(bootbox.alert("Provide a label"),!1):ko(n)?!0:(bootbox.alert("Provide a valid label"),!1)}function Co(n,e){const o=e?"full":"minimal";return n.filter(t=>t.show===o||t.show==="both")}function Eo(n,e,o){let t,i,s;ee(n,W,c=>o(1,t=c)),ee(n,ze,c=>o(2,i=c)),ee(n,te,c=>o(3,s=c));let l=Y(Q);j.use(An);var r=new On.ColorPicker("#picker",{width:200,color:"rgb(255, 0, 0)",borderWidth:1,borderColor:"#fff"});function u(c,p){var h;const _=l.$(":selected");if(_.length>1){if(p==="nodes"&&!_.every(v=>v.isNode()))return bootbox.alert("Not all selected elements are nodes. Aborting"),null;if(p==="edges"&&!_.every(v=>v.isEdge()))return bootbox.alert("Not all selected elements are edges. Aborting"),null;if(p==="nodes.edges"&&!_.every(v=>v.isEdge()||v.isNode()))return bootbox.alert("Not all selected elements are nodes or edges. Aborting"),null;h=_}else h=c;return h}const d=[{id:"add-observed",content:"Add Observed Variable",coreAsWell:!0,onClickFunction(c){const p=c.renderedPosition;pe(de,p)},show:"full"},{id:"add-latent",content:"Add Latent Variable",coreAsWell:!0,onClickFunction(c){const p=c.renderedPosition;pe(me,p)},show:"full"},{id:"add-constant",content:"Add Constant Variable",coreAsWell:!0,onClickFunction(c){const p=c.renderedPosition;pe(Se,p)},show:"full"},{id:"label-para",content:"Add/Change Label",selector:`edge.${ge}`,onClickFunction(c){const p=c.target||c.cyTarget;bootbox.prompt({title:"Enter a Label",value:p.getLabel(),callback(h){if(!Jt(h))return!1;h!==p.getLabel()&&h!==null&&(p.addLabel(h),re(s.mode))}})},show:"full",hasTrailingDivider:!1},{id:"label-remove",content:"Remove Label",selector:`edge.${Ve}`,onClickFunction(c){(c.target||c.cyTarget).removeLabel(),re(s.mode)},show:"both",hasTrailingDivider:!1},{id:"remove-edge",content:"Delete Edge",selector:`edge.${ge}`,onClickFunction(c){(c.target||c.cyTarget).remove(),re(s.mode)},show:"full",hasTrailingDivider:!0},{id:"fix-para",content:"Fix Parameter",selector:`edge.${ke}.${ge}, edge.${Me}.${ge}`,onClickFunction(c){const p=c.target||c.cyTarget;bootbox.prompt({title:"Enter a Value",inputType:"number",callback(h){if(h=="")return bootbox.alert("Provide a value"),!1;h!==null&&(p.fixPara(h),re(s.mode))}})},show:"full",hasTrailingDivider:!1},{id:"free-para",content:"Free Parameter",selector:`edge.${Ce}.${ge}, edge.${Me}.${ge}`,onClickFunction(c){var p=c.target||c.cyTarget;p.freePara(),re(s.mode)},show:"full",hasTrailingDivider:!1},{id:"free-force-para",content:"Force Parameter Free",selector:`edge.${ke}.${ge}, edge.${Ce}.${ge}`,onClickFunction(c){(c.target||c.cyTarget).forceFreePara(),re(s.mode)},show:"full",hasTrailingDivider:!0},{id:"revert-arrow",content:"Revert Direction",selector:`edge[isMean="0"].${Fe}.${ge}`,onClickFunction(c){(c.target||c.cyTarget).revert(),re(s.mode)},show:"full",hasTrailingDivider:!1},{id:"set-undirected",content:"Set Undirected",selector:`edge[isMean="0"].${Fe}.${ge}`,onClickFunction(c){(c.target||c.cyTarget).setUndirected(),re(s.mode)},show:"full",hasTrailingDivider:!0},{id:"set-arrow",content:"Set Directed",selector:`edge.${Ne}.${ge}`,onClickFunction(c){(c.target||c.cyTarget).setDirected(),re(s.mode)},show:"full",hasTrailingDivider:!0},{id:"free-orientation",content:"Free Loop Orientation",selector:`edge.${lt}.fixDeg`,onClickFunction(c){const p=c.target||c.cyTarget;p.removeClass("fixDeg"),$e(p.source().id())},show:"both",hasTrailingDivider:!0},{id:"change-fromUser",content:"Explicitly Include in Model",selector:`edge.${De}`,onClickFunction(c){(c.target||c.cyTarget).markAddedUser(),re(s.mode)},show:"full",hasTrailingDivider:!0},{id:"color-edge",content:"Change Edge Color",selector:"edge",show:"both",onClickFunction(c){var p=c.target||c.cyTarget;const h=u(p,"edges");if(h===null)return null;f(p,h,"edge")}},{id:"change-line-width",content:"Change Line Width",show:"both",selector:"edge",onClickFunction(c){var p=c.target||c.cyTarget;const h=u(p,"edges");if(h===null)return null;bootbox.prompt({title:"Enter New Line Width:",value:p.style("width"),callback(_){_!==null&&i.do("style",{eles:h,style:{width:_}})}})}},{id:"rename-node",show:"full",content:"Rename Variable",selector:`node.${me}, node.${de}`,onClickFunction(c){const p=c.target||c.cyTarget,h=t.columnNames;let _;t.dataAvail&&(_=h.map(L=>`<option value="${L}">${L}</option>`).join(""));const v=t.dataAvail&&p.isObserved()?`
      <label>Or Select From Variables in Your Data:</label>
      <select class="form-control" id="label-dropdown">
        <option value="">--Select--</option>
        ${_}
      </select>
    `:"";bootbox.dialog({title:"Rename Variable",message:`
      <div>
        <label>Enter a label:</label>
        <input type="text" class="form-control" id="new-label" value=${p.getLabel()}>
        ${v}
      </div>
    `,buttons:{cancel:{label:"Cancel",className:"btn-default"},confirm:{label:"Rename",className:"btn-primary",callback(){let L=document.getElementById("new-label").value;const m=t.dataAvail&&p.isObserved()?document.getElementById("label-dropdown").value:"";let k;if(L==p.getLabel()?k=m:k=L,!Jt(k))return!1;k&&(p.setLabel(k),h&&h.includes(p.getLabel())?(p.link(),he("success",`Variable ${p.data("label")} linked to data`)):p.isLinked()&&(p.unlink(),he("info",`Variable ${p.getLabel()} unlinked`)),re(s.mode))}}},onShown(L){document.getElementById("new-label").addEventListener("keypress",function(m){m.key==="Enter"&&(m.preventDefault(),L.target.querySelector(".btn-primary").click())})}})}},{id:"remove-node",content:"Delete Variable",selector:`node.${me}, node.${de}, node.${Se}`,onClickFunction(c){(c.target||c.cyTarget).remove(),re(s.mode)},show:"full",hasTrailingDivider:!0},{id:"change-latent",content:"Change to Latent",selector:`node.${de}`,onClickFunction(c){(c.target||c.cyTarget).makeLatent(),re(s.mode)},show:"full",hasTrailingDivider:!1},{id:"change-ordered",content:"Change to Ordered",selector:`node.${de}.${Ze}`,onClickFunction(c){(c.target||c.cyTarget).makeOrdered(),re(s.mode)},show:"full",hasTrailingDivider:!0},{id:"change-continous",content:"Change to Continous",selector:`node.${de}.${Ye}`,onClickFunction(c){(c.target||c.cyTarget).makeContinous(),re(s.mode)},show:"full",hasTrailingDivider:!0},{id:"change-observed",show:"full",content:"Change to Observed",selector:`node.${me}`,hasTrailingDivider:!0,onClickFunction(c){const p=c.target||c.cyTarget;p.makeObserved();let h=t.columnNames;h&&h.includes(p.getLabel())&&(p.link(),bootbox.alert("Variable linked with data set")),re(s.mode)}},{id:"color-node",content:"Change Background Color",selector:"node",show:"both",onClickFunction(c){var p=c.target||c.cyTarget;const h=u(p,"nodes");if(h===null)return null;f(p,h,"nodes")}},{id:"change-border-width",content:"Change Border Width",show:"both",selector:`node.${me}, node.${de}, node.${Se}`,onClickFunction(c){var p=c.target||c.cyTarget;const h=u(p,"nodes");if(h===null)return null;bootbox.prompt({title:"Enter New Border Width:",value:p.style("border-width"),callback(_){_!==null&&i.do("style",{eles:h,style:{"border-width":_}})}})}},{id:"change-font-size",content:"Change Font Size",show:"both",hasTrailingDivider:!0,selector:`node.${me}, node.${de}, node.${Se}, edge`,onClickFunction(c){var p=c.target||c.cyTarget;const h=u(p,"nodes.edges");if(h===null)return null;bootbox.prompt({title:"Enter New Font Size:",value:p.style("font-size"),callback(_){_!==null&&i.do("style",{eles:h,style:{"font-size":_}})}})}}];let a;function f(c,p,h){var _=document.getElementById("picker");_.style.display="block",_.style.left=event.pageX+"px",_.style.top=event.pageY+"px";let v;a=p;const L=function(M){v=M.hexString};r.on("color:change",L);const m=function(M){_.contains(M.target)||(h=="edge"?i.do("style",{eles:a,style:{"line-color":v,"target-arrow-color":v,"source-arrow-color":v}}):i.do("style",{eles:a,style:{"background-color":v}}),_.style.display="none",r.off("color:change",L),document.removeEventListener("click",m),document.removeEventListener("keydown",k))};setTimeout(()=>document.addEventListener("click",m),0);const k=function(M){M.key==="Enter"&&m(M)};document.addEventListener("keydown",k)}const g=Co(d,t.full);return we(()=>{l.contextMenus({menuItems:g})}),[]}class So extends Z{constructor(e){super(),J(this,e,Eo,null,X,{})}}function Lo(n){let e;return{c(){e=z("div"),e.innerHTML=`<label class="control-label shiny-label-null" for="fileInput" id="fileInput-label"></label> 
  <div class="input-group svelte-1qxcvef"><label class="input-group-btn input-group-prepend"><span class="btn btn-default btn-file">Browse...
        <input id="dataUpload-fileInput" name="fileInput" type="file" style="position: absolute !important; top: -99999px !important; left: -99999px !important;" accept=".csv,.sav, .xlsx, .rds"/></span></label> 
    <input type="text" class="form-control" placeholder="No file selected" readonly="readonly"/></div> 
  <div id="fileInput_progress" class="progress active shiny-file-input-progress svelte-1qxcvef"><div class="progress-bar svelte-1qxcvef"></div></div>`,C(e,"class","form-group shiny-input-container svelte-1qxcvef")},m(o,t){A(o,e,t)},p:se,i:se,o:se,d(o){o&&O(e)}}}class Mo extends Z{constructor(e){super(),J(this,e,null,Lo,X,{})}}function Do(n){let e,o,t,i,s,l,r,u,d,a,f,g,c,p,h,_,v,L,m,k,M,E,y,H;return{c(){e=z("div"),o=z("button"),t=be("Show Data"),s=T(),l=z("div"),r=z("button"),u=be("User Model"),a=T(),f=z("button"),g=be("Lavaan Model"),p=T(),h=z("button"),_=be("Estimates"),m=T(),k=z("button"),M=be("More Results"),C(o,"class","btn btn-lg btn-default"),o.disabled=i=!n[2].dataAvail,C(r,"class",d="btn btn-lg "+(n[1]==="user model"?"btn-primary active":"btn-default")),C(f,"class",c="btn btn-lg "+(n[1]==="full model"?"btn-primary active":"btn-default")),C(h,"class",v="btn btn-lg "+(n[1]==="estimate"?"btn-primary active":"btn-default")),h.disabled=L=!n[2].dataAvail||n[2].modelEmpty,C(l,"class","btn-group btn-toggle svelte-xny576"),C(k,"class","btn btn-lg btn-default"),k.disabled=E=n[0].mode!="estimate",C(e,"class","toolbox navbar-static-bottom svelte-xny576")},m(R,b){A(R,e,b),x(e,o),x(o,t),x(e,s),x(e,l),x(l,r),x(r,u),x(l,a),x(l,f),x(f,g),x(l,p),x(l,h),x(h,_),x(e,m),x(e,k),x(k,M),y||(H=[oe(o,"click",n[6]),oe(r,"click",n[7]),oe(f,"click",n[8]),oe(h,"click",n[9]),oe(k,"click",n[10])],y=!0)},p(R,[b]){b&4&&i!==(i=!R[2].dataAvail)&&(o.disabled=i),b&2&&d!==(d="btn btn-lg "+(R[1]==="user model"?"btn-primary active":"btn-default"))&&C(r,"class",d),b&2&&c!==(c="btn btn-lg "+(R[1]==="full model"?"btn-primary active":"btn-default"))&&C(f,"class",c),b&2&&v!==(v="btn btn-lg "+(R[1]==="estimate"?"btn-primary active":"btn-default"))&&C(h,"class",v),b&4&&L!==(L=!R[2].dataAvail||R[2].modelEmpty)&&(h.disabled=L),b&1&&E!==(E=R[0].mode!="estimate")&&(k.disabled=E)},i:se,o:se,d(R){R&&O(e),y=!1,Je(H)}}}function Ao(){window.$("#data-modal-2").modal()}function Oo(n,e,o){let t,i,s;ee(n,te,h=>o(0,t=h)),ee(n,W,h=>o(2,i=h)),ee(n,ue,h=>o(11,s=h));let l;function r(h){o(1,l=h),h!=="user model"?B(ue,s.showLav=!0,s):B(ue,s.showLav=!1,s),B(te,t.mode=h,t)}window.$("#data-modal-extend-results").on("hidden.bs.modal",function(){B(W,i.showServerErrors=!0,i)});function u(){window.$("#data-modal-extend-results").modal(),B(W,i.showServerErrors=!1,i)}let d=!1;we(()=>{o(5,d=!0)});const a=()=>Ao(),f=()=>r("user model"),g=()=>r("full model"),c=()=>r("estimate"),p=()=>u();return n.$$.update=()=>{n.$$.dirty&33&&d&&o(1,l=t.mode)},[t,l,i,r,u,d,a,f,g,c,p]}class Fo extends Z{constructor(e){super(),J(this,e,Oo,Do,X,{})}}function No(){return typeof Shiny=="object"&&Shiny!==null}function Io(n){let e=0,o=Number.NEGATIVE_INFINITY,t=Number.NEGATIVE_INFINITY,i=n.nodes().length;n.nodes().forEach(r=>{let u=r.position();e+=u.x,u.x>o&&(o=u.x),u.y>t&&(t=u.y)});let s=e/i,l=t+100;return{x:s,y:l}}function xo(n,e){if(!n)throw new Error(e||"Assertion failed")}function To(n,e,o){let t,i,s;ee(n,te,a=>o(0,t=a)),ee(n,W,a=>o(1,i=a)),ee(n,Ae,a=>o(2,s=a));function l(a,f,g){let c,p,h;return f==="=~"?(c=Fe,p=a,h=g):f=="~1"?(p=1,h=a,c=Fe):(h=a,p=g,f==="~~"?a===g?c=lt:c=Ne:c=Fe),{directed:c,source:p,target:h}}function r(a,f,g,c){let p=l(a,f,g);p.user=c;const _=Y(Q).edges(function(v){let L;if(p.source!=1?(L=v.source().getLabel()==p.source&&v.target().getLabel()==p.target,p.directed==Ne&&(L=L||v.source().getLabel()==p.target&&v.target().getLabel()==p.source)):L=v.source().isConstant()&&v.target().getLabel()==p.target,p.user!=null)if(p.user==1)L=L&&v.isUserAdded();else if(p.user==0)L=L&&v.isLavaanAdded();else throw new Error("User was neither 0 nor 1");return L});if(_.length>1)throw new Error("Multiple edges found");return _}function u(a,f){B(W,i.meansModelled=!1,i),B(W,i.loadingMode=!0,i);let g=Y(Q);if(!f)g.edges().invalidate();else{let v=function(k,M,E){pe(k,E,!1,M)};const _=Array.isArray(a.obs)?a.obs:[a.obs];let L={x:200,y:200};for(let k=0;k<_.length;k++)L.x=L.x+50,v(de,_[k],L);const m=Array.isArray(a.latent)?a.latent:[a.latent];L={x:200,y:100};for(let k=0;k<m.length;k++)L.x=L.x+50,v(me,m[k]);a=a.parTable}const c=new Set;for(let _=0;_<a.lhs.length;_++)a.op[_]==="|"&&c.add(a.lhs[_]);let p=!1,h;for(let _=0;_<a.lhs.length;_++){if(a.op[_]=="~*~"||a.op[_]=="|")continue;let v=r(a.lhs[_],a.op[_],a.rhs[_],a.user[_]);if(!f&&a.user[_]==1)xo(v.length==1),v.validate(),v.isModifiedLavaan()&&v.isFixed()&&v.revertLavaanFix(),a.free[_]==0&&!v.isFixed()&&v.fixPara(a.ustart[_]).markModifiedLavaan();else{let L;if(f||v.length==0){const m=l(a.lhs[_],a.op[_],a.rhs[_]);if(f&&i.full&&a.user[_]==0)continue;let k;if(m.source!==1)k=g.nodes(function(E){return E.getLabel()==m.source})[0].id();else{if(B(W,i.meansModelled=!0,i),a.free[_]==0&&a.ustart[_]==0)continue;p||(h=pe(Se,Io(g),!1),p=!0,g.nodes(function(y){return y.id()==h})[0].markAddedLavaan()),k=h}const M=g.nodes(function(E){return E.getLabel()==m.target})[0].id();L=g.add({groups:"edges",data:{source:k,target:M},classes:m.directed+" nolabel"}),a.label[_]!=""&&L.addLabelImport(a.label[_]),a.user[_]==1?L.markAddedUser():L.markAddedLavaan(),$e(k),$e(M)}else!f&&v.length==1&&(L=v);a.free[_]==0?a.ustart[_]!==0&&a.exo[_]!==1?c.has(L.target().getLabel())&&a.op[_]=="~~"?L.fixPara("Total Variance 1"):L.fixPara(a.ustart[_]):L.remove():L.setFree(),f||L.validate()}}f?(pt("tree",!1),g.fit()):(g.edges().forEach(_=>{_.isValid()||_.remove()}),g.getLavaanNodes().forEach(_=>{_.connectedEdges().length==0&&(_.remove(),g.nodes().forEach(v=>{$e(v.id())}))})),i.parsedModel||B(W,i.parsedModel=!0,i),g.getUserEdges().length>0&&B(W,i.modelEmpty=!1,i),B(W,i.loadingMode=!1,i)}function d(a,f){Y(Q);const g=a.op.some(c=>c.includes("~~"));for(let c=0;c<a.lhs.length;c++){if(a.op[c]=="~*~"||a.op[c]=="|")continue;let p=r(a.lhs[c],a.op[c],a.rhs[c]);if(p.length>0){let h={};p.isFree()?(h.est=a.est[c],h.p_value=a.pvalue[c],h.se=a.se[c],h.ciLow=a["ci.lower"][c],h.ciHigh=a["ci.upper"][c],h.est_std=f["est.std"][c],h.se_std=f.se[c],h.ciLow_std=f["ci.lower"][c],h.ciHigh_std=f["ci.upper"][c],p.addClass("hasEst")):g&&a.op[c]=="~~"&&(h.estFixed=a.est[c],h.estFixed_std=f["est.std"][c],p.addClass("hasEstFixed")),p.data("estimates",h)}}}return No()&&(Shiny.addCustomMessageHandler("dataInfo",function(a){gt(a.columns),B(W,i.columnNames=[...a.columns],i),B(W,i.ids=[...a.columns],i),B(W,i.loadedFileName=a.name,i),B(W,i.dataAvail=!0,i),re(t.mode),a.showData&&window.$("#data-modal-2").modal()}),Shiny.addCustomMessageHandler("lav_failed",function(a){B(W,i.fitting=!1,i),a=="stopped"?he("danger","Fitting stopped by user"):he("danger","Fitting failed")}),Shiny.addCustomMessageHandler("fitting",function(a){B(W,i.fitting=!0,i)}),Shiny.addCustomMessageHandler("lav_warning_error",function(a){const f=a.type=="warning"?"warning":"error";he(a.type,`During ${a.origin} the following ${f} occurred: ${a.message}`)}),Shiny.addCustomMessageHandler("lav_error_fitting",function(a){B(W,i.fitting=!1,i),he(a.type,"During "+a.origin+" the following error occurred: "+a.message)}),Shiny.addCustomMessageHandler("usecache",function(a){he("info","Reusing cached results because model and data did not change since last fit")}),Shiny.addCustomMessageHandler("data_missing",function(a){he("danger","Could not fit model because no data is available")}),Shiny.addCustomMessageHandler("columnames",function(a){const f=Y(Q),g=i.columnNames[a.index];B(W,i.columnNames[a.index]=a.newcolname,i),f.getObservedNodes().forEach(c=>{c.getLabel()==g&&(c.setLabel(a.newcolname),re(t.mode))}),gt(i.columnNames)}),Shiny.addCustomMessageHandler("missing_vars",function(a){var f=[].concat(a).join(", ");he("danger","Could not fit model because "+f+" are observed variables in the model but not present in the data.")}),Shiny.addCustomMessageHandler("lav_model",function(a){u(a,!1)}),Shiny.addCustomMessageHandler("imported_model",function(a){u(a,!0);let f=Y(Q);Array.isArray(a.ordered)||(a.ordered=[a.ordered]),a.ordered.forEach(g=>{f.nodes(function(c){return c.getLabel()==g})[0].makeOrdered()}),B(te,t.fix_first=!1,t),he("warning","start_gui only imports user edges. Your full model is very likely different than what you fitted in lavaan because of different options used. To display the model, as you fitted it in lavaan, use plot_interactive")}),Shiny.addCustomMessageHandler("lav_results",function(a){B(W,i.loadingMode=!0,i),B(Ae,s.lastFitLavFit=a.fitted_model,s),B(Ae,s.lastFitModel=a.model,s),B(Ae,s.lastFitData=a.data,s),B(W,i.fitting=!1,i),B(W,i.loadingMode=!1,i)}),Shiny.addCustomMessageHandler("lav_estimates",function(a){const f=a.normal,g=a.std;d(f,g)}),Shiny.addCustomMessageHandler("setToEstimate",function(a){B(te,t.mode="estimate",t)})),[]}class Po extends Z{constructor(e){super(),J(this,e,To,null,X,{})}}function Vo(n){Fn(j);let e=Y(Q);var o={zoomFactor:.05,zoomDelay:45,minZoom:e.minZoom(),maxZoom:e.maxZoom(),fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,zoomOnly:!1,fitSelector:void 0,animateOnFit(){return!1},fitAnimationDuration:1e3};return we(()=>{e.panzoom(o),e.on("zoom",function(t){var i=e.zoom();i<o.minZoom?e.zoom(o.minZoom):i>o.maxZoom&&e.zoom(o.maxZoom)})}),[]}class zo extends Z{constructor(e){super(),J(this,e,Vo,null,X,{})}}function Ro(n){let e,o;const t=n[1].default,i=Xe(t,n,n[0],null);return{c(){e=z("div"),i&&i.c(),C(e,"class","svelte-16igfw6")},m(s,l){A(s,e,l),i&&i.m(e,null),o=!0},p(s,[l]){i&&i.p&&(!o||l&1)&&Ke(i,t,s,s[0],o?et(t,s[0],l,null):Qe(s[0]),null)},i(s){o||(S(i,s),o=!0)},o(s){D(i,s),o=!1},d(s){s&&O(e),i&&i.d(s)}}}function Bo(n,e,o){let{$$slots:t={},$$scope:i}=e;return n.$$set=s=>{"$$scope"in s&&o(0,i=s.$$scope)},[i,t]}class Go extends Z{constructor(e){super(),J(this,e,Bo,Ro,X,{})}}function Uo(n,e,o){let t;ee(n,W,s=>o(0,t=s));let i=Y(Q);return setInterval(()=>{!t.drawing&&i&&(i.autoungrabify(!1),i.nodes().grabify())},1e3),we(()=>{Shiny.unbindAll(),Shiny.bindAll()}),[]}class qo extends Z{constructor(e){super(),J(this,e,Uo,null,X,{})}}function Xt(n){let e,o,t,i,s,l;return{c(){e=z("div"),o=z("button"),o.innerHTML='<span class="glyphicon glyphicon-refresh spinning svelte-16d2v0h"></span> Fitting...',t=T(),i=z("button"),i.textContent="Cancel",C(o,"class","btn btn-lg btn-secondary fixed-width disabled-button svelte-16d2v0h"),C(o,"id","fitting-button"),o.disabled=!0,C(i,"class","btn btn-lg btn-default fixed-width svelte-16d2v0h"),C(e,"class","center-screen svelte-16d2v0h")},m(r,u){A(r,e,u),x(e,o),x(e,t),x(e,i),s||(l=oe(i,"click",Ho),s=!0)},p:se,d(r){r&&O(e),s=!1,l()}}}function jo(n){let e,o=n[0].fitting&&Xt();return{c(){o&&o.c(),e=Be()},m(t,i){o&&o.m(t,i),A(t,e,i)},p(t,[i]){t[0].fitting?o?o.p(t,i):(o=Xt(),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null)},i:se,o:se,d(t){o&&o.d(t),t&&O(e)}}}function Ho(){Shiny.setInputValue("run-abort",Math.random())}function Wo(n,e,o){let t;return ee(n,W,i=>o(0,t=i)),[t]}class Yo extends Z{constructor(e){super(),J(this,e,Wo,jo,X,{})}}function Kt(n){let e,o,t=n[2][n[0].type].label+"",i,s,l=n[0].message+"",r,u;return{c(){e=z("div"),o=z("strong"),i=be(t),s=T(),r=be(l),C(e,"class",u=Te(n[2][n[0].type].class+(n[1]?" fadeOut":""))+" svelte-1wv9zbn")},m(d,a){A(d,e,a),x(e,o),x(o,i),x(e,s),x(e,r)},p(d,a){a&1&&t!==(t=d[2][d[0].type].label+"")&&Pe(i,t),a&1&&l!==(l=d[0].message+"")&&Pe(r,l),a&3&&u!==(u=Te(d[2][d[0].type].class+(d[1]?" fadeOut":""))+" svelte-1wv9zbn")&&C(e,"class",u)},d(d){d&&O(e)}}}function Zo(n){let e,o=n[0].message!==""&&Kt(n);return{c(){o&&o.c(),e=Be()},m(t,i){o&&o.m(t,i),A(t,e,i)},p(t,[i]){t[0].message!==""?o?o.p(t,i):(o=Kt(t),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null)},i:se,o:se,d(t){o&&o.d(t),t&&O(e)}}}function Jo(n,e,o){let t;ee(n,rn,r=>o(0,t=r));let i={success:{class:"alert-success",label:"Success!"},info:{class:"alert-info",label:"Info!"},warning:{class:"alert-warning",label:"Warning!"},danger:{class:"alert-danger",label:"Danger!"}},s=!1,l;return n.$$.update=()=>{n.$$.dirty&9&&t.message!==""&&(o(1,s=!1),clearTimeout(l),o(3,l=setTimeout(()=>{o(1,s=!0)},1e4)))},[t,s,i,l]}class Xo extends Z{constructor(e){super(),J(this,e,Jo,Zo,X,{})}}function Ko(n,e){const o={};return n.forEach((t,i)=>{o[t]=e[i]}),o}function Qo(n,e,o){let t;ee(n,ze,s=>o(0,t=s));let i=Y(Q);return we(()=>{j.use(Nn);const s={isDebug:!0};let l=i.undoRedo(s);ze.set(l),l.action("style",function(r){let u={};const d=Object.keys(r.style);return r.eles.forEach(function(a){let f=[];d.forEach(g=>{f.push(a.data(g)||a.style(g)),a.data(g,r.style[g])}),u[a.id()]=Ko(d,f)}),{eles:r.eles,style:u}},function(r){const u=r.eles[0].style();return Object.keys(r.style).forEach(function(d){var a=i.getElementById(d);for(var f in r.style[d])a.data(f,r.style[d][f])}),{eles:r.eles,style:u}}),document.addEventListener("keydown",function(r){(r.ctrlKey||r.metaKey)&&r.target.nodeName==="BODY"&&(r.which===90||r.which===89)&&(r.preventDefault(),r.stopPropagation(),r.which===90?t.undo():r.which===89&&t.redo())}),document.addEventListener("keyup",function(r){r.metaKey&&r.target.nodeName==="BODY"&&(r.which===90||r.which===89)&&(r.preventDefault(),r.stopPropagation())})}),[]}class es extends Z{constructor(e){super(),J(this,e,Qo,null,X,{})}}function ts(){return typeof Shiny=="object"&&Shiny!==null}function ns(n,e,o){let t;return ee(n,W,i=>o(0,t=i)),ts()?Shiny.addCustomMessageHandler("full",function(i){B(W,t.full=i,t),B(W,t.ready=!0,t)}):(B(W,t.full=!0,t),B(W,t.ready=!0,t)),[]}class is extends Z{constructor(e){super(),J(this,e,ns,null,X,{})}}function os(n,e,o){let t;ee(n,ue,s=>o(1,t=s));let i=!1;return we(()=>{o(0,i=!0)}),n.$$.update=()=>{n.$$.dirty&3&&i&&Fi(t.showVar,t.showLav,t.showMean),n.$$.dirty&3&&i&&Oi(t.view,t.std,t.number_digits)},[i,t]}class ss extends Z{constructor(e){super(),J(this,e,os,null,X,{})}}function ls(n){let e,o,t,i;const s=n[6].default,l=Xe(s,n,n[5],null);return{c(){e=z("section"),l&&l.c(),_e(e,"left",n[0]+"px"),_e(e,"top",n[1]+"px"),C(e,"class","draggable svelte-13fkbj1")},m(r,u){A(r,e,u),l&&l.m(e,null),o=!0,t||(i=[oe(window,"mouseup",n[4]),oe(window,"mousemove",n[3]),oe(e,"mousedown",n[2])],t=!0)},p(r,[u]){l&&l.p&&(!o||u&32)&&Ke(l,s,r,r[5],o?et(s,r[5],u,null):Qe(r[5]),null),(!o||u&1)&&_e(e,"left",r[0]+"px"),(!o||u&2)&&_e(e,"top",r[1]+"px")},i(r){o||(S(l,r),o=!0)},o(r){D(l,r),o=!1},d(r){r&&O(e),l&&l.d(r),t=!1,Je(i)}}}function rs(n,e,o){let{$$slots:t={},$$scope:i}=e,{left:s=100}=e,{top:l=100}=e,r=!1,u=0,d=0;function a(c){r=!0,u=c.clientX-s,d=c.clientY-l}function f(c){r&&(o(0,s=c.clientX-u),o(1,l=c.clientY-d))}function g(){r=!1}return n.$$set=c=>{"left"in c&&o(0,s=c.left),"top"in c&&o(1,l=c.top),"$$scope"in c&&o(5,i=c.$$scope)},[s,l,a,f,g,i,t]}class as extends Z{constructor(e){super(),J(this,e,rs,ls,X,{left:0,top:1})}}function us(n){let e,o,t;const i=n[0].default,s=Xe(i,n,n[1],null);return{c(){e=z("ul"),o=z("div"),s&&s.c(),_e(o,"display","flex"),_e(o,"flex-direction","column"),C(e,"class","nav navbar-nav navbar-left"),_e(e,"border","1px solid black"),_e(e,"z-index","9999")},m(l,r){A(l,e,r),x(e,o),s&&s.m(o,null),t=!0},p(l,r){s&&s.p&&(!t||r&2)&&Ke(s,i,l,l[1],t?et(i,l[1],r,null):Qe(l[1]),null)},i(l){t||(S(s,l),t=!0)},o(l){D(s,l),t=!1},d(l){l&&O(e),s&&s.d(l)}}}function ds(n){let e,o;return e=new as({props:{$$slots:{default:[us]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},p(t,[i]){const s={};i&2&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){o||(S(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}function cs(n,e,o){let{$$slots:t={},$$scope:i}=e;return n.$$set=s=>{"$$scope"in s&&o(1,i=s.$$scope)},[t,i]}class fs extends Z{constructor(e){super(),J(this,e,cs,ds,X,{})}}function ms(n,e){return bootbox.alert({title:"<span style='color: red;'>Error</span>",message:`A ${e} error occurred:<br> <span style='color: red;'>${n}</span>.<br><br>Please consider reporting this issue by sending an email to <a href="mailto:j.d.karch@fsw.leidenuniv.nl">j.d.karch@fsw.leidenuniv.nl</a>.`,centerVertical:!0}),!0}function gs(){return typeof Shiny=="object"&&Shiny!==null}function ps(n){return gs()&&Shiny.addCustomMessageHandler("serverError",function(e){Y(W).showServerErrors&&ms(e.msg,"Server")}),[]}class hs extends Z{constructor(e){super(),J(this,e,ps,null,X,{})}}function bs(n,e,o){let t;return ee(n,te,i=>o(0,t=i)),n.$$.update=()=>{n.$$.dirty&1&&re(t.mode)},[t]}class _s extends Z{constructor(e){super(),J(this,e,bs,null,X,{})}}function $s(n){j.use(In);let e=Y(Q);return we(()=>{e.automove({nodesMatching:".automove-viewport",reposition:"viewport"})}),[]}class vs extends Z{constructor(e){super(),J(this,e,$s,null,X,{})}}function ys(n){xn(j,window.$,sn);let e=Y(Q);return we(()=>{e.nodeEditing({resizeToContentCueImage:"",undoable:!0})}),[]}class ws extends Z{constructor(e){super(),J(this,e,ys,null,X,{})}}function ks(n){return j("collection","init",function(){return this.addClass(ke).addClass(We).addClass(ge),this}),j("collection","free",function(){return this.hasClass(ke)}),j("collection","addLabel",function(e){return this.addLabelImport(e).removeClass(xe),this}),j("collection","addLabelImport",function(e){return this.data("label",e).addClass(Ve).removeClass(We),this}),j("collection","removeLabel",function(){return this.removeClass(Ve).addClass(We).data("label",null),this}),j("collection","setLabel",function(e){return this.data("label",e),this}),j("collection","getLabel",function(){return this.data("label")}),j("collection","fixPara",function(e){return this.data("value",e).removeClass(ke).removeClass(Me).removeClass(kt).addClass(Ce),this}),j("collection","freePara",function(){return this.removeClass(Ce).removeClass(Me).removeClass(xe).addClass(ke),this}),j("collection","setFree",function(){return this.removeClass(Ce).removeClass(Me).addClass(ke),this}),j("collection","forceFreePara",function(){return this.removeClass(ke).removeClass(Ce).removeClass(xe).addClass(Me),this}),j("collection","revert",function(){const e=this.source().id(),o=this.target().id();return this.move({source:o,target:e}),this}),j("collection","setUndirected",function(){return this.removeClass(Fe).addClass(Ne),this}),j("collection","setDirected",function(){return this.removeClass(Ne).addClass(Fe),this}),j("collection","isUndirected",function(){return this.hasClass(Ne)}),j("collection","isDirected",function(){return this.hasClass(Fe)}),j("collection","makeLoop",function(){return this.addClass(lt),this}),j("collection","myIsLoop",function(){return this.hasClass(lt)}),j("collection","makeMeanEdge",function(){return this.data("isMean","1"),this}),j("collection","isMean",function(){return this.data("isMean")==="1"||this.isConstant()}),j("collection","makeOtherEdge",function(){return this.data("isMean","0"),this}),j("collection","isFixed",function(){return this.hasClass(Ce)}),j("collection","isFree",function(){return this.hasClass(ke)||this.hasClass(Me)}),j("collection","isForceFree",function(){return this.hasClass(Me)}),j("collection","hasLabel",function(){return this.hasClass(Ve)}),j("collection","isModifiedLavaan",function(){return this.hasClass(xe)}),j("collection","markModifiedLavaan",function(){return this.addClass(xe),this}),j("collection","markAddedLavaan",function(){return this.addClass(De).removeClass(ge),this}),j("collection","markAddedUser",function(){return this.removeClass(De).addClass(ge),this}),j("collection","isUserAdded",function(){return this.hasClass(ge)}),j("collection","isLavaanAdded",function(){return this.hasClass(De)}),j("collection","getValue",function(){return this.data("value")}),j("collection","setValue",function(e){this.data("value",e)}),j("collection","invalidate",function(){return this.removeClass(dt),this}),j("collection","validate",function(){return this.addClass(dt),this}),j("collection","isValid",function(){return this.hasClass(dt)}),j("collection","revertLavaanFix",function(){this.freePara().removeClass(xe)}),j("collection","removeEstimates",function(){return this.removeClass(kt).removeClass(zn),this.removeData("estimates"),this}),j("collection","link",function(){return this.addClass(Re),this}),j("collection","unlink",function(){return this.removeClass(Re),this}),j("collection","isLinked",function(){return this.hasClass(Re)}),j("collection","isLatent",function(){return this.hasClass(me)}),j("collection","makeLatent",function(){return this.removeClass(de).addClass(me).removeClass(Re),this}),j("collection","makeObserved",function(){return this.addClass(de).removeClass(me),this}),j("collection","makeOrdered",function(){return this.removeClass(Ze).addClass(Ye),this}),j("collection","isOrdered",function(){return this.hasClass(Ye)}),j("collection","makeContinous",function(){return this.addClass(Ze).removeClass(Ye),this}),j("collection","isConstant",function(){return this.hasClass(Se)}),j("collection","isObserved",function(){return this.hasClass(de)}),j("core","getLavaanNodes",function(){return this.nodes(`.${De}`)}),j("core","getLavaanEdges",function(){return this.edges(`.${De}`)}),j("core","getObservedNodes",function(){return this.nodes(`.${de}`)}),j("core","getUserEdges",function(){return this.edges(`.${ge}`)}),j("core","getLavaanModifiedEdges",function(){return this.edges(`.${xe}`)}),j("core","getLatentNodes",function(){return this.nodes(function(e){return e.hasClass(me)})}),[]}class Cs extends Z{constructor(e){super(),J(this,e,ks,null,X,{})}}function Es(n){Tn(j,window.$,sn);let e=Y(Q);return we(()=>{e.edgeEditing({undoable:!0,bendRemovalSensitivity:16,enableMultipleAnchorRemovalOption:!0,initAnchorsAutomatically:!1,useTrailingDividersAfterContextMenuOptions:!1,enableCreateAnchorOnDrag:!0,anchorShapeSizeFactor:4}),e.style().update()}),[]}class Ss extends Z{constructor(e){super(),J(this,e,Es,null,X,{})}}function Qt(n){let e,o,t,i,s,l,r,u,d,a,f,g,c,p,h,_,v=n[0].full&&en();o=new qn({});const L=[Ms,Ls],m=[];function k(E,y){return E[0].full?0:1}s=k(n),l=m[s]=L[s](n),u=new Go({props:{$$slots:{default:[As]},$$scope:{ctx:n}}});let M=n[0].full&&nn();return f=new wo({}),c=new Po({}),h=new qo({}),{c(){v&&v.c(),e=T(),G(o.$$.fragment),t=T(),i=z("div"),l.c(),r=T(),G(u.$$.fragment),d=T(),M&&M.c(),a=T(),G(f.$$.fragment),g=T(),G(c.$$.fragment),p=T(),G(h.$$.fragment),C(i,"class","svelte-15ghafl")},m(E,y){v&&v.m(E,y),A(E,e,y),U(o,E,y),A(E,t,y),A(E,i,y),m[s].m(i,null),x(i,r),U(u,i,null),x(i,d),M&&M.m(i,null),A(E,a,y),U(f,E,y),A(E,g,y),U(c,E,y),A(E,p,y),U(h,E,y),_=!0},p(E,y){E[0].full?v?y&1&&S(v,1):(v=en(),v.c(),S(v,1),v.m(e.parentNode,e)):v&&(ve(),D(v,1,1,()=>{v=null}),ye());let H=s;s=k(E),s!==H&&(ve(),D(m[H],1,1,()=>{m[H]=null}),ye(),l=m[s],l||(l=m[s]=L[s](E),l.c()),S(l,1),l.m(i,r));const R={};y&3&&(R.$$scope={dirty:y,ctx:E}),u.$set(R),E[0].full?M?y&1&&S(M,1):(M=nn(),M.c(),S(M,1),M.m(i,null)):M&&(ve(),D(M,1,1,()=>{M=null}),ye())},i(E){_||(S(v),S(o.$$.fragment,E),S(l),S(u.$$.fragment,E),S(M),S(f.$$.fragment,E),S(c.$$.fragment,E),S(h.$$.fragment,E),_=!0)},o(E){D(v),D(o.$$.fragment,E),D(l),D(u.$$.fragment,E),D(M),D(f.$$.fragment,E),D(c.$$.fragment,E),D(h.$$.fragment,E),_=!1},d(E){v&&v.d(E),E&&O(e),q(o,E),E&&O(t),E&&O(i),m[s].d(),q(u),M&&M.d(),E&&O(a),q(f,E),E&&O(g),q(c,E),E&&O(p),q(h,E)}}}function en(n){let e,o;return e=new Yo({}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},i(t){o||(S(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}function Ls(n){let e,o;return e=new fs({props:{$$slots:{default:[Ds]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},i(t){o||(S(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}function Ms(n){let e,o;return e=new _o({}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},i(t){o||(S(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}function Ds(n){let e,o,t,i,s,l,r,u;return e=new mn({props:{full:!1}}),t=new pn({props:{minimal:!0}}),s=new _n({props:{minimal:!0}}),r=new $n({props:{minimal:!0}}),{c(){G(e.$$.fragment),o=T(),G(t.$$.fragment),i=T(),G(s.$$.fragment),l=T(),G(r.$$.fragment)},m(d,a){U(e,d,a),A(d,o,a),U(t,d,a),A(d,i,a),U(s,d,a),A(d,l,a),U(r,d,a),u=!0},p:se,i(d){u||(S(e.$$.fragment,d),S(t.$$.fragment,d),S(s.$$.fragment,d),S(r.$$.fragment,d),u=!0)},o(d){D(e.$$.fragment,d),D(t.$$.fragment,d),D(s.$$.fragment,d),D(r.$$.fragment,d),u=!1},d(d){q(e,d),d&&O(o),q(t,d),d&&O(i),q(s,d),d&&O(l),q(r,d)}}}function tn(n){let e,o;return e=new vo({}),{c(){G(e.$$.fragment)},m(t,i){U(e,t,i),o=!0},i(t){o||(S(e.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),o=!1},d(t){q(e,t)}}}function As(n){let e,o,t,i,s,l,r,u,d,a,f,g,c,p,h,_,v,L,m,k,M,E,y,H;e=new oi({}),t=new es({}),s=new Cs({}),r=new Vn({}),d=new vs({}),f=new ws({}),c=new zo({}),h=new So({}),v=new li({}),m=new ss({}),M=new Ss({});let R=n[0].full&&tn();return{c(){G(e.$$.fragment),o=T(),G(t.$$.fragment),i=T(),G(s.$$.fragment),l=T(),G(r.$$.fragment),u=T(),G(d.$$.fragment),a=T(),G(f.$$.fragment),g=T(),G(c.$$.fragment),p=T(),G(h.$$.fragment),_=T(),G(v.$$.fragment),L=T(),G(m.$$.fragment),k=T(),G(M.$$.fragment),E=T(),R&&R.c(),y=Be()},m(b,$){U(e,b,$),A(b,o,$),U(t,b,$),A(b,i,$),U(s,b,$),A(b,l,$),U(r,b,$),A(b,u,$),U(d,b,$),A(b,a,$),U(f,b,$),A(b,g,$),U(c,b,$),A(b,p,$),U(h,b,$),A(b,_,$),U(v,b,$),A(b,L,$),U(m,b,$),A(b,k,$),U(M,b,$),A(b,E,$),R&&R.m(b,$),A(b,y,$),H=!0},p(b,$){b[0].full?R?$&1&&S(R,1):(R=tn(),R.c(),S(R,1),R.m(y.parentNode,y)):R&&(ve(),D(R,1,1,()=>{R=null}),ye())},i(b){H||(S(e.$$.fragment,b),S(t.$$.fragment,b),S(s.$$.fragment,b),S(r.$$.fragment,b),S(d.$$.fragment,b),S(f.$$.fragment,b),S(c.$$.fragment,b),S(h.$$.fragment,b),S(v.$$.fragment,b),S(m.$$.fragment,b),S(M.$$.fragment,b),S(R),H=!0)},o(b){D(e.$$.fragment,b),D(t.$$.fragment,b),D(s.$$.fragment,b),D(r.$$.fragment,b),D(d.$$.fragment,b),D(f.$$.fragment,b),D(c.$$.fragment,b),D(h.$$.fragment,b),D(v.$$.fragment,b),D(m.$$.fragment,b),D(M.$$.fragment,b),D(R),H=!1},d(b){q(e,b),b&&O(o),q(t,b),b&&O(i),q(s,b),b&&O(l),q(r,b),b&&O(u),q(d,b),b&&O(a),q(f,b),b&&O(g),q(c,b),b&&O(p),q(h,b),b&&O(_),q(v,b),b&&O(L),q(m,b),b&&O(k),q(M,b),b&&O(E),R&&R.d(b),b&&O(y)}}}function nn(n){let e,o,t,i,s,l;return e=new Xo({}),t=new Fo({}),s=new _s({}),{c(){G(e.$$.fragment),o=T(),G(t.$$.fragment),i=T(),G(s.$$.fragment)},m(r,u){U(e,r,u),A(r,o,u),U(t,r,u),A(r,i,u),U(s,r,u),l=!0},i(r){l||(S(e.$$.fragment,r),S(t.$$.fragment,r),S(s.$$.fragment,r),l=!0)},o(r){D(e.$$.fragment,r),D(t.$$.fragment,r),D(s.$$.fragment,r),l=!1},d(r){q(e,r),r&&O(o),q(t,r),r&&O(i),q(s,r)}}}function Os(n){let e,o,t,i,s,l,r;e=new is({});let u=n[0].ready&&Qt(n);return i=new Mo({}),l=new hs({}),{c(){G(e.$$.fragment),o=T(),u&&u.c(),t=T(),G(i.$$.fragment),s=T(),G(l.$$.fragment)},m(d,a){U(e,d,a),A(d,o,a),u&&u.m(d,a),A(d,t,a),U(i,d,a),A(d,s,a),U(l,d,a),r=!0},p(d,[a]){d[0].ready?u?(u.p(d,a),a&1&&S(u,1)):(u=Qt(d),u.c(),S(u,1),u.m(t.parentNode,t)):u&&(ve(),D(u,1,1,()=>{u=null}),ye())},i(d){r||(S(e.$$.fragment,d),S(u),S(i.$$.fragment,d),S(l.$$.fragment,d),r=!0)},o(d){D(e.$$.fragment,d),D(u),D(i.$$.fragment,d),D(l.$$.fragment,d),r=!1},d(d){q(e,d),d&&O(o),u&&u.d(d),d&&O(t),q(i,d),d&&O(s),q(l,d)}}}function Fs(n,e,o){let t;return ee(n,W,i=>o(0,t=i)),[t]}class Ns extends Z{constructor(e){super(),J(this,e,Fs,Os,X,{})}}new Ns({target:document.getElementById("app")});
